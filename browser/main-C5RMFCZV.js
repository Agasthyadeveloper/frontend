import{a as dL}from"./chunk-LD6SJG3P.js";import{a as xi}from"./chunk-FK6H3RFT.js";import{$ as Ai,$a as Qb,$b as rd,A as OE,Aa as YE,Ab as te,B as NE,Ba as $E,Bb as Oa,C as Zc,Ca as KE,Cb as ao,D as Vl,Da as ZE,Db as Et,E as qb,Ea as JE,Eb as At,F as FE,Fa as td,Fb as De,G as BE,Ga as ai,Gb as K0,H as VE,Ha as jl,Hb as sA,I as z0,Ia as QE,Ib as Z0,J as Hs,Ja as tA,Jb as J0,K as j0,Ka as eA,Kb as ey,L as Or,La as Hl,Lb as Q0,M as ei,Ma as Pp,Mb as ny,N as Ul,Na as _,Nb as tg,O as zl,Oa as Ot,Ob as Op,P as Qe,Pa as H0,Pb as aA,Q as Mi,Qa as nA,Qb as eg,R as UE,Ra as W0,Rb as oA,S as Pn,Sa as Wl,Sb as id,T as Xb,Ta as iA,Tb as lA,U as Ze,Ua as G0,Ub as cA,V as Oe,Va as Rp,Vb as dA,W as Yb,Wa as Pa,Wb as uA,X as zE,Xa as q0,Xb as jo,Y as Ap,Ya as rA,Yb as Np,Z as Ve,Za as Jb,Zb as Gl,_ as Ei,_a as rt,_b as hA,a as kE,aa as Jc,ab as Ra,ac as pA,b as IE,ba as jE,bb as D,bc as fA,c as Cp,ca as Qc,cb as ed,cc as or,d as jb,da as fa,db as ar,dc as mA,e as Hb,ea as ro,eb as c,ec as Fp,f as pa,fa as G,fb as u,fc as gA,g as ks,ga as q,gb as Rt,gc as _A,h as Nl,ha as zo,hb as pe,hc as sd,i as Lr,ia as HE,ib as fe,ic as ng,j as sn,ja as Tp,jb as Ft,jc as en,k as Mp,ka as kp,kb as lt,kc as Jn,l as DE,la as Nr,lb as I,lc as Sn,m as PE,ma as sr,mb as X0,mc as ig,n as Hn,na as $b,nb as ty,nc as Qr,o as yu,oa as Fr,ob as Y0,oc as rg,p as js,pa as WE,pb as $0,pc as vA,q as Ep,qa as Ip,qb as an,qc as xA,r as U0,ra as GE,rb as h,rc as Bp,s as Wb,sa as so,sb as A,sc as bA,t as RE,ta as Kb,tb as de,tc as sg,u as Uo,ua as Dp,ub as gt,v as Su,va as Zb,vb as _t,w as Fl,wa as wu,wb as vt,x as LE,xa as Cu,xb as La,y as Gb,ya as qE,yb as Lp,z as Bl,za as XE,zb as nd}from"./chunk-ZRQYFHHR.js";import{a as Se,b as In,c as AE,e as cL,f as io,g as bu,h as B0,i as V0,j as TE,k as Kc,l as Be}from"./chunk-M32CSIPC.js";var Up=class{},zp=class{},We=class i{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let n=t.indexOf(":");if(n>0){let r=t.slice(0,n),s=r.toLowerCase(),a=t.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,n)=>{this.setHeaderEntries(n,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,n])=>{this.setHeaderEntries(t,n)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof i?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new i;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof i?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let a=this.headers.get(t);if(!a)return;a=a.filter(o=>s.indexOf(o)===-1),a.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}break}}setHeaderEntries(e,t){let n=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,n),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var ry=class{encodeKey(e){return yA(e)}encodeValue(e){return yA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function hL(i,e){let t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[a,o]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(a)||[];l.push(o),t.set(a,l)}),t}var pL=/%(\d[a-f0-9])/gi,fL={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function yA(i){return encodeURIComponent(i).replace(pL,(e,t)=>fL[t]??e)}function ag(i){return`${i}`}var Xl=class i{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ry,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=hL(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let n=e.fromObject[t],r=Array.isArray(n)?n.map(ag):[ag(n)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(n=>{let r=e[n];Array.isArray(r)?r.forEach(s=>{t.push({param:n,value:s,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(n=>t+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new i({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(ag(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let n=this.map.get(e.param)||[],r=n.indexOf(ag(e.value));r!==-1&&n.splice(r,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var sy=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function mL(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function SA(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function wA(i){return typeof Blob<"u"&&i instanceof Blob}function CA(i){return typeof FormData<"u"&&i instanceof FormData}function gL(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}var Vp=class i{constructor(e,t,n,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(mL(this.method)||r?(this.body=n!==void 0?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new We,this.context??=new sy,!this.params)this.params=new Xl,this.urlWithParams=t;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=t;else{let o=t.indexOf("?"),l=o===-1?"?":o<t.length-1?"&":"";this.urlWithParams=t+l+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||SA(this.body)||wA(this.body)||CA(this.body)||gL(this.body)?this.body:this.body instanceof Xl?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||CA(this.body)?null:wA(this.body)?this.body.type||null:SA(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Xl?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,o=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,d=e.headers||this.headers,p=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(d=Object.keys(e.setHeaders).reduce((g,m)=>g.set(m,e.setHeaders[m]),d)),e.setParams&&(p=Object.keys(e.setParams).reduce((g,m)=>g.set(m,e.setParams[m]),p)),new i(t,n,a,{params:p,headers:d,context:f,reportProgress:l,responseType:r,withCredentials:o,transferCache:s})}},Yl=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}(Yl||{}),jp=class{constructor(e,t=200,n="OK"){this.headers=e.headers||new We,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},lg=class i extends jp{constructor(e={}){super(e),this.type=Yl.ResponseHeader}clone(e={}){return new i({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ad=class i extends jp{constructor(e={}){super(e),this.type=Yl.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new i({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ql=class extends jp{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},NA=200,_L=204;function iy(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials,transferCache:i.transferCache}}var En=(()=>{let e=class e{constructor(n){this.handler=n}request(n,r,s={}){let a;if(n instanceof Vp)a=n;else{let d;s.headers instanceof We?d=s.headers:d=new We(s.headers);let p;s.params&&(s.params instanceof Xl?p=s.params:p=new Xl({fromObject:s.params})),a=new Vp(n,r,s.body!==void 0?s.body:null,{headers:d,context:s.context,params:p,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let o=sn(a).pipe(Fl(d=>this.handler.handle(d)));if(n instanceof Vp||s.observe==="events")return o;let l=o.pipe(Uo(d=>d instanceof ad));switch(s.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return l.pipe(Hn(d=>{if(d.body!==null&&!(d.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return d.body}));case"blob":return l.pipe(Hn(d=>{if(d.body!==null&&!(d.body instanceof Blob))throw new Error("Response is not a Blob.");return d.body}));case"text":return l.pipe(Hn(d=>{if(d.body!==null&&typeof d.body!="string")throw new Error("Response is not a string.");return d.body}));case"json":default:return l.pipe(Hn(d=>d.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Xl().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,s={}){return this.request("PATCH",n,iy(s,r))}post(n,r,s={}){return this.request("POST",n,iy(s,r))}put(n,r,s={}){return this.request("PUT",n,iy(s,r))}};e.\u0275fac=function(r){return new(r||e)(Ze(Up))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac});let i=e;return i})(),vL=/^\)\]\}',?\n/,xL="X-Request-URL";function MA(i){if(i.url)return i.url;let e=xL.toLocaleLowerCase();return i.headers.get(e)}var ay=(()=>{let e=class e{constructor(){this.fetchImpl=Oe(oy,{optional:!0})?.fetch??((...n)=>globalThis.fetch(...n)),this.ngZone=Oe(sr)}handle(n){return new Cp(r=>{let s=new AbortController;return this.doRequest(n,s.signal,r).then(ly,a=>r.error(new ql({error:a}))),()=>s.abort()})}doRequest(n,r,s){return Be(this,null,function*(){let a=this.createRequestInit(n),o;try{let x=this.ngZone.runOutsideAngular(()=>this.fetchImpl(n.urlWithParams,Se({signal:r},a)));bL(x),s.next({type:Yl.Sent}),o=yield x}catch(x){s.error(new ql({error:x,status:x.status??0,statusText:x.statusText,url:n.urlWithParams,headers:x.headers}));return}let l=new We(o.headers),d=o.statusText,p=MA(o)??n.urlWithParams,f=o.status,g=null;if(n.reportProgress&&s.next(new lg({headers:l,status:f,statusText:d,url:p})),o.body){let x=o.headers.get("content-length"),y=[],S=o.body.getReader(),b=0,M,T,k=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>Be(this,null,function*(){for(;;){let{done:U,value:N}=yield S.read();if(U)break;if(y.push(N),b+=N.length,n.reportProgress){T=n.responseType==="text"?(T??"")+(M??=new TextDecoder).decode(N,{stream:!0}):void 0;let F=()=>s.next({type:Yl.DownloadProgress,total:x?+x:void 0,loaded:b,partialText:T});k?k.run(F):F()}}}));let L=this.concatChunks(y,b);try{let U=o.headers.get("Content-Type")??"";g=this.parseBody(n,L,U)}catch(U){s.error(new ql({error:U,headers:new We(o.headers),status:o.status,statusText:o.statusText,url:MA(o)??n.urlWithParams}));return}}f===0&&(f=g?NA:0),f>=200&&f<300?(s.next(new ad({body:g,headers:l,status:f,statusText:d,url:p})),s.complete()):s.error(new ql({error:g,headers:l,status:f,statusText:d,url:p}))})}parseBody(n,r,s){switch(n.responseType){case"json":let a=new TextDecoder().decode(r).replace(vL,"");return a===""?null:JSON.parse(a);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:s});case"arraybuffer":return r.buffer}}createRequestInit(n){let r={},s=n.withCredentials?"include":void 0;if(n.headers.forEach((a,o)=>r[a]=o.join(",")),n.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!n.headers.has("Content-Type")){let a=n.detectContentTypeHeader();a!==null&&(r["Content-Type"]=a)}return{body:n.serializeBody(),method:n.method,headers:r,credentials:s}}concatChunks(n,r){let s=new Uint8Array(r),a=0;for(let o of n)s.set(o,a),a+=o.length;return s}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Qe({token:e,factory:e.\u0275fac});let i=e;return i})(),oy=class{};function ly(){}function bL(i){i.then(ly,ly)}function FA(i,e){return e(i)}function yL(i,e){return(t,n)=>e.intercept(t,{handle:r=>i(r,n)})}function SL(i,e,t){return(n,r)=>fa(t,()=>e(n,s=>i(s,r)))}var wL=new Pn(""),cy=new Pn(""),BA=new Pn(""),VA=new Pn("",{providedIn:"root",factory:()=>!0});function CL(){let i=null;return(e,t)=>{i===null&&(i=(Oe(wL,{optional:!0})??[]).reduceRight(yL,FA));let n=Oe(kp);if(Oe(VA)){let s=n.add();return i(e,t).pipe(Zc(()=>n.remove(s)))}else return i(e,t)}}var EA=(()=>{let e=class e extends Up{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=Oe(kp),this.contributeToStability=Oe(VA)}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(cy),...this.injector.get(BA,[])]));this.chain=r.reduceRight((s,a)=>SL(s,a,this.injector),FA)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,s=>this.backend.handle(s)).pipe(Zc(()=>this.pendingTasks.remove(r)))}else return this.chain(n,r=>this.backend.handle(r))}};e.\u0275fac=function(r){return new(r||e)(Ze(zp),Ze(Qc))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac});let i=e;return i})();var ML=/^\)\]\}',?\n/;function EL(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}var AA=(()=>{let e=class e{constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new ei(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Lr(r.\u0275loadImpl()):sn(null)).pipe(Hs(()=>new Cp(a=>{let o=r.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((S,b)=>o.setRequestHeader(S,b.join(","))),n.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){let S=n.detectContentTypeHeader();S!==null&&o.setRequestHeader("Content-Type",S)}if(n.responseType){let S=n.responseType.toLowerCase();o.responseType=S!=="json"?S:"text"}let l=n.serializeBody(),d=null,p=()=>{if(d!==null)return d;let S=o.statusText||"OK",b=new We(o.getAllResponseHeaders()),M=EL(o)||n.url;return d=new lg({headers:b,status:o.status,statusText:S,url:M}),d},f=()=>{let{headers:S,status:b,statusText:M,url:T}=p(),k=null;b!==_L&&(k=typeof o.response>"u"?o.responseText:o.response),b===0&&(b=k?NA:0);let L=b>=200&&b<300;if(n.responseType==="json"&&typeof k=="string"){let U=k;k=k.replace(ML,"");try{k=k!==""?JSON.parse(k):null}catch(N){k=U,L&&(L=!1,k={error:N,text:k})}}L?(a.next(new ad({body:k,headers:S,status:b,statusText:M,url:T||void 0})),a.complete()):a.error(new ql({error:k,headers:S,status:b,statusText:M,url:T||void 0}))},g=S=>{let{url:b}=p(),M=new ql({error:S,status:o.status||0,statusText:o.statusText||"Unknown Error",url:b||void 0});a.error(M)},m=!1,x=S=>{m||(a.next(p()),m=!0);let b={type:Yl.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(b.total=S.total),n.responseType==="text"&&o.responseText&&(b.partialText=o.responseText),a.next(b)},y=S=>{let b={type:Yl.UploadProgress,loaded:S.loaded};S.lengthComputable&&(b.total=S.total),a.next(b)};return o.addEventListener("load",f),o.addEventListener("error",g),o.addEventListener("timeout",g),o.addEventListener("abort",g),n.reportProgress&&(o.addEventListener("progress",x),l!==null&&o.upload&&o.upload.addEventListener("progress",y)),o.send(l),a.next({type:Yl.Sent}),()=>{o.removeEventListener("error",g),o.removeEventListener("abort",g),o.removeEventListener("load",f),o.removeEventListener("timeout",g),n.reportProgress&&(o.removeEventListener("progress",x),l!==null&&o.upload&&o.upload.removeEventListener("progress",y)),o.readyState!==o.DONE&&o.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(Ze(sg))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac});let i=e;return i})(),UA=new Pn(""),AL="XSRF-TOKEN",TL=new Pn("",{providedIn:"root",factory:()=>AL}),kL="X-XSRF-TOKEN",IL=new Pn("",{providedIn:"root",factory:()=>kL}),cg=class{},DL=(()=>{let e=class e{constructor(n,r,s){this.doc=n,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=ng(n,this.cookieName),this.lastCookieString=n),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(Ze(or),Ze(so),Ze(TL))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac});let i=e;return i})();function PL(i,e){let t=i.url.toLowerCase();if(!Oe(UA)||i.method==="GET"||i.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(i);let n=Oe(cg).getToken(),r=Oe(IL);return n!=null&&!i.headers.has(r)&&(i=i.clone({headers:i.headers.set(r,n)})),e(i)}var dy=function(i){return i[i.Interceptors=0]="Interceptors",i[i.LegacyInterceptors=1]="LegacyInterceptors",i[i.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",i[i.NoXsrfProtection=3]="NoXsrfProtection",i[i.JsonpSupport=4]="JsonpSupport",i[i.RequestsMadeViaParent=5]="RequestsMadeViaParent",i[i.Fetch=6]="Fetch",i}(dy||{});function zA(i,e){return{\u0275kind:i,\u0275providers:e}}function uy(...i){let e=[En,AA,EA,{provide:Up,useExisting:EA},{provide:zp,useFactory:()=>Oe(ay,{optional:!0})??Oe(AA)},{provide:cy,useValue:PL,multi:!0},{provide:UA,useValue:!0},{provide:cg,useClass:DL}];for(let t of i)e.push(...t.\u0275providers);return Jc(e)}var TA=new Pn("");function RL(){return zA(dy.LegacyInterceptors,[{provide:TA,useFactory:CL},{provide:cy,useExisting:TA,multi:!0}])}function jA(){return zA(dy.Fetch,[ay,{provide:zp,useExisting:ay}])}var HA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ei({type:e}),e.\u0275inj=Mi({providers:[uy(RL())]});let i=e;return i})();var LL=new Pn(""),kA="b",IA="h",DA="s",PA="st",RA="u",LA="rt",og=new Pn(""),OL=["GET","HEAD"];function NL(i,e){let m=Oe(og),{isCacheActive:t}=m,n=AE(m,["isCacheActive"]),{transferCache:r,method:s}=i;if(!t||r===!1||s==="POST"&&!n.includePostRequests&&!r||s!=="POST"&&!OL.includes(s)||!n.includeRequestsWithAuthHeaders&&FL(i)||n.filter?.(i)===!1)return e(i);let a=Oe(Zb),o=Oe(LL,{optional:!0}),l=Bp(Oe(so));if(o&&!l)throw new ei(2803,!1);let d=l&&o?zL(i.url,o):i.url,p=VL(i,d),f=a.get(p,null),g=n.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(g=r.includeHeaders),f){let{[kA]:x,[LA]:y,[IA]:S,[DA]:b,[PA]:M,[RA]:T}=f,k=x;switch(y){case"arraybuffer":k=new TextEncoder().encode(x).buffer;break;case"blob":k=new Blob([x]);break}let L=new We(S);return sn(new ad({body:k,headers:L,status:b,statusText:M,url:T}))}return e(i).pipe(Or(x=>{x instanceof ad&&l&&a.set(p,{[kA]:x.body,[IA]:BL(x.headers,g),[DA]:x.status,[PA]:x.statusText,[RA]:d,[LA]:i.responseType})}))}function FL(i){return i.headers.has("authorization")||i.headers.has("proxy-authorization")}function BL(i,e){if(!e)return{};let t={};for(let n of e){let r=i.getAll(n);r!==null&&(t[n]=r)}return t}function OA(i){return[...i.keys()].sort().map(e=>`${e}=${i.getAll(e)}`).join("&")}function VL(i,e){let{params:t,method:n,responseType:r}=i,s=OA(t),a=i.serializeBody();a instanceof URLSearchParams?a=OA(a):typeof a!="string"&&(a="");let o=[n,r,e,a,s].join("|"),l=UL(o);return l}function UL(i){let e=0;for(let t of i)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function WA(i){return[{provide:og,useFactory:()=>(G0("NgHttpTransferCache"),Se({isCacheActive:!0},i))},{provide:BA,useValue:NL,multi:!0,deps:[Zb,og]},{provide:tg,multi:!0,useFactory:()=>{let e=Oe(Op),t=Oe(og);return()=>{aA(e).then(()=>{t.isCacheActive=!1})}}}]}function zL(i,e){let t=new URL(i,"resolve://").origin,n=e[t];return n?i.replace(t,n):i}var fy=class extends fA{constructor(){super(...arguments),this.supportsDOMEvents=!0}},my=class i extends fy{static makeCurrent(){pA(new i)}onAndCancel(e,t,n){return e.addEventListener(t,n),()=>{e.removeEventListener(t,n)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=HL();return t==null?null:WL(t)}resetBaseElement(){Hp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ng(document.cookie,e)}},Hp=null;function HL(){return Hp=Hp||document.querySelector("base"),Hp?Hp.getAttribute("href"):null}function WL(i){return new URL(i,document.baseURI).pathname}var gy=class{addToWindow(e){Ul.getAngularTestability=(n,r=!0)=>{let s=e.findTestabilityInTree(n,r);if(s==null)throw new ei(5103,!1);return s},Ul.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ul.getAllAngularRootElements=()=>e.getAllRootElements();let t=n=>{let r=Ul.getAllAngularTestabilities(),s=r.length,a=function(){s--,s==0&&n()};r.forEach(o=>{o.whenStable(a)})};Ul.frameworkStabilizers||(Ul.frameworkStabilizers=[]),Ul.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,n){if(t==null)return null;let r=e.getTestability(t);return r??(n?rd().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},GL=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Qe({token:e,factory:e.\u0275fac});let i=e;return i})(),dg=new Pn(""),XA=(()=>{let e=class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(s=>{s.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,s){return this._findPluginFor(r).addEventListener(n,r,s)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(a=>a.supports(n)),!r)throw new ei(5101,!1);return this._eventNameToPlugin.set(n,r),r}};e.\u0275fac=function(r){return new(r||e)(Ze(dg),Ze(sr))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac});let i=e;return i})(),Wp=class{constructor(e){this._doc=e}},hy="ng-app-id",YA=(()=>{let e=class e{constructor(n,r,s,a={}){this.doc=n,this.appId=r,this.nonce=s,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Bp(a),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(s=>s.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${hy}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(n,r){let s=this.styleRef;if(s.has(n)){let a=s.get(n);return a.usage+=r,a.usage}return s.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let s=this.styleNodesInDOM,a=s?.get(r);if(a?.parentNode===n)return s.delete(r),a.removeAttribute(hy),a;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(hy,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let s=this.getStyleElement(n,r),a=this.styleRef,o=a.get(r)?.elements;o?o.push(s):a.set(r,{elements:[s],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(Ze(or),Ze(Ip),Ze(Dp,8),Ze(so))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac});let i=e;return i})(),py={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},by=/%COMP%/g,$A="%COMP%",qL=`_nghost-${$A}`,XL=`_ngcontent-${$A}`,YL=!0,$L=new Pn("",{providedIn:"root",factory:()=>YL});function KL(i){return XL.replace(by,i)}function ZL(i){return qL.replace(by,i)}function KA(i,e){return e.map(t=>t.replace(by,i))}var ug=(()=>{let e=class e{constructor(n,r,s,a,o,l,d,p=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=a,this.doc=o,this.platformId=l,this.ngZone=d,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=Bp(l),this.defaultRenderer=new Gp(n,o,d,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ap.ShadowDom&&(r=In(Se({},r),{encapsulation:Ap.Emulated}));let s=this.getOrCreateRenderer(n,r);return s instanceof hg?s.applyToHost(n):s instanceof qp&&s.applyStyles(),s}getOrCreateRenderer(n,r){let s=this.rendererByCompId,a=s.get(r.id);if(!a){let o=this.doc,l=this.ngZone,d=this.eventManager,p=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Ap.Emulated:a=new hg(d,p,r,this.appId,f,o,l,g);break;case Ap.ShadowDom:return new _y(d,p,n,r,o,l,this.nonce,g);default:a=new qp(d,p,r,f,o,l,g);break}s.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(Ze(XA),Ze(YA),Ze(Ip),Ze($L),Ze(or),Ze(so),Ze(sr),Ze(Dp))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac});let i=e;return i})(),Gp=class{constructor(e,t,n,r){this.eventManager=e,this.doc=t,this.ngZone=n,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(py[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(GA(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(GA(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){t.remove()}selectRootElement(e,t){let n=typeof e=="string"?this.doc.querySelector(e):e;if(!n)throw new ei(-5104,!1);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;let s=py[r];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){let r=py[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(Pp.DashCase|Pp.Important)?e.style.setProperty(t,n,r&Pp.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&Pp.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e!=null&&(e[t]=n)}setValue(e,t){e.nodeValue=t}listen(e,t,n){if(typeof e=="string"&&(e=rd().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(n))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function GA(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var _y=class extends Gp{constructor(e,t,n,r,s,a,o,l){super(e,s,a,l),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=KA(r.id,r.styles);for(let p of d){let f=document.createElement("style");o&&f.setAttribute("nonce",o),f.textContent=p,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qp=class extends Gp{constructor(e,t,n,r,s,a,o,l){super(e,s,a,o),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?KA(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},hg=class extends qp{constructor(e,t,n,r,s,a,o,l){let d=r+"-"+n.id;super(e,t,n,s,a,o,l,d),this.contentAttr=KL(d),this.hostAttr=ZL(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}},JL=(()=>{let e=class e extends Wp{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,s){return n.addEventListener(r,s,!1),()=>this.removeEventListener(n,r,s)}removeEventListener(n,r,s){return n.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(Ze(or))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac});let i=e;return i})(),QL=(()=>{let e=class e extends Wp{constructor(n){super(n),this.delegate=Oe(dA,{optional:!0})}supports(n){return this.delegate?this.delegate.supports(n):!1}addEventListener(n,r,s){return this.delegate.addEventListener(n,r,s)}removeEventListener(n,r,s){return this.delegate.removeEventListener(n,r,s)}};e.\u0275fac=function(r){return new(r||e)(Ze(or))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac});let i=e;return i})(),qA=["alt","control","meta","shift"],tO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},eO={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},nO=(()=>{let e=class e extends Wp{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,s){let a=e.parseEventName(r),o=e.eventCallback(a.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>rd().onAndCancel(n,a.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let a=e._normalizeKey(r.pop()),o="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),o="code."),qA.forEach(p=>{let f=r.indexOf(p);f>-1&&(r.splice(f,1),o+=p+".")}),o+=a,r.length!=0||a.length===0)return null;let d={};return d.domEventName=s,d.fullKey=o,d}static matchEventFullKeyCode(n,r){let s=tO[n.key]||n.key,a="";return r.indexOf("code.")>-1&&(s=n.code,a="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),qA.forEach(o=>{if(o!==s){let l=eO[o];l(n)&&(a+=o+".")}}),a+=s,a===r)}static eventCallback(n,r,s){return a=>{e.matchEventFullKeyCode(a,n)&&s.runGuarded(()=>r(a))}}static _normalizeKey(n){return n==="esc"?"escape":n}};e.\u0275fac=function(r){return new(r||e)(Ze(or))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac});let i=e;return i})();function iO(){my.makeCurrent()}function rO(){return new $b}function sO(){return WE(document),document}var aO=[{provide:so,useValue:vA},{provide:GE,useValue:iO,multi:!0},{provide:or,useFactory:sO,deps:[]}],ZA=oA(lA,"browser",aO),oO=new Pn(""),lO=[{provide:Z0,useClass:gy,deps:[]},{provide:sA,useClass:J0,deps:[sr,ey,Z0]},{provide:J0,useClass:J0,deps:[sr,ey,Z0]}],cO=[{provide:jE,useValue:"root"},{provide:$b,useFactory:rO,deps:[]},{provide:dg,useClass:JL,multi:!0,deps:[or,sr,so]},{provide:dg,useClass:nO,multi:!0,deps:[or]},{provide:dg,useClass:QL,multi:!0},ug,YA,XA,{provide:W0,useExisting:ug},{provide:sg,useClass:GL,deps:[]},[]],JA=(()=>{let e=class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Ip,useValue:n.appId}]}}};e.\u0275fac=function(r){return new(r||e)(Ze(oO,12))},e.\u0275mod=Ei({type:e}),e.\u0275inj=Mi({providers:[...cO,...lO],imports:[rg,cA]});let i=e;return i})();var QA=(()=>{let e=class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}};e.\u0275fac=function(r){return new(r||e)(Ze(or))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var od=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Qe({token:e,factory:function(r){let s=null;return r?s=new(r||e):s=Ze(dO),s},providedIn:"root"});let i=e;return i})(),dO=(()=>{let e=class e extends od{constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case td.NONE:return r;case td.HTML:return Cu(r,"HTML")?wu(r):JE(this._doc,String(r)).toString();case td.STYLE:return Cu(r,"Style")?wu(r):r;case td.SCRIPT:if(Cu(r,"Script"))return wu(r);throw new ei(5200,!1);case td.URL:return Cu(r,"URL")?wu(r):ZE(String(r));case td.RESOURCE_URL:if(Cu(r,"ResourceURL"))return wu(r);throw new ei(5201,!1);default:throw new ei(5202,!1)}}bypassSecurityTrustHtml(n){return qE(n)}bypassSecurityTrustStyle(n){return XE(n)}bypassSecurityTrustScript(n){return YE(n)}bypassSecurityTrustUrl(n){return $E(n)}bypassSecurityTrustResourceUrl(n){return KE(n)}};e.\u0275fac=function(r){return new(r||e)(Ze(or))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),vy=function(i){return i[i.NoHttpTransferCache=0]="NoHttpTransferCache",i[i.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",i[i.I18nSupport=2]="I18nSupport",i[i.EventReplay=3]="EventReplay",i}(vy||{});function t3(...i){let e=[],t=new Set,n=t.has(vy.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:s}of i)t.add(s),r.length&&e.push(r);return Jc([[],uA(),t.has(vy.NoHttpTransferCache)||n?[]:WA({}),e])}var yy;try{yy=typeof Intl<"u"&&Intl.v8BreakIterator}catch{yy=!1}var $p=(()=>{let e=class e{constructor(n){this._platformId=n,this.isBrowser=this._platformId?xA(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||yy)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(Ze(so))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Yp;function uO(){if(Yp==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Yp=!0}))}finally{Yp=Yp||!1}return Yp}function Sy(i){return uO()?i:!!i.capture}function e3(i){return i.composedPath?i.composedPath()[0]:i.target}function n3(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function wy(i){return Array.isArray(i)?i:[i]}function Cy(i){return i instanceof Fr?i.nativeElement:i}var r3=new Set,ld,hO=(()=>{let e=class e{constructor(n,r){this._platform=n,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):fO}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&pO(n,this._nonce),this._matchMedia(n)}};e.\u0275fac=function(r){return new(r||e)(Ze($p),Ze(Dp,8))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function pO(i,e){if(!r3.has(i))try{ld||(ld=document.createElement("style"),e&&ld.setAttribute("nonce",e),ld.setAttribute("type","text/css"),document.head.appendChild(ld)),ld.sheet&&(ld.sheet.insertRule(`@media ${i} {body{ }}`,0),r3.add(i))}catch(t){console.error(t)}}function fO(i){return{matches:i==="all"||i==="",media:i,addListener:()=>{},removeListener:()=>{}}}var pg=(()=>{let e=class e{constructor(n,r){this._mediaMatcher=n,this._zone=r,this._queries=new Map,this._destroySubject=new pa}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return s3(wy(n)).some(s=>this._registerQuery(s).mql.matches)}observe(n){let s=s3(wy(n)).map(o=>this._registerQuery(o).observable),a=yu(s);return a=U0(a.pipe(Bl(1)),a.pipe(VE(1),LE(0))),a.pipe(Hn(o=>{let l={matches:!1,breakpoints:{}};return o.forEach(({matches:d,query:p})=>{l.matches=l.matches||d,l.breakpoints[p]=d}),l}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);let r=this._mediaMatcher.matchMedia(n),a={observable:new Cp(o=>{let l=d=>this._zone.run(()=>o.next(d));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(z0(r),Hn(({matches:o})=>({query:n,matches:o})),j0(this._destroySubject)),mql:r};return this._queries.set(n,a),a}};e.\u0275fac=function(r){return new(r||e)(Ze(hO),Ze(sr))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function s3(i){return i.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function l3(i){return i.buttons===0||i.detail===0}function c3(i){let e=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var cd=function(i){return i[i.NONE=0]="NONE",i[i.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",i[i.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",i}(cd||{}),a3="cdk-high-contrast-black-on-white",o3="cdk-high-contrast-white-on-black",My="cdk-high-contrast-active",d3=(()=>{let e=class e{constructor(n,r){this._platform=n,this._document=r,this._breakpointSubscription=Oe(pg).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return cd.NONE;let n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(n):null,a=(s&&s.backgroundColor||"").replace(/ /g,"");switch(n.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return cd.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return cd.BLACK_ON_WHITE}return cd.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let n=this._document.body.classList;n.remove(My,a3,o3),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===cd.BLACK_ON_WHITE?n.add(My,a3):r===cd.WHITE_ON_BLACK&&n.add(My,o3)}}};e.\u0275fac=function(r){return new(r||e)(Ze($p),Ze(or))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Ey=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ei({type:e}),e.\u0275inj=Mi({});let i=e;return i})();function _O(){return!0}var vO=new Pn("mat-sanity-checks",{providedIn:"root",factory:_O}),$l=(()=>{let e=class e{constructor(n,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,n._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return n3()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[n]}};e.\u0275fac=function(r){return new(r||e)(Ze(d3),Ze(vO,8),Ze(or))},e.\u0275mod=Ei({type:e}),e.\u0275inj=Mi({imports:[Ey,Ey]});let i=e;return i})();var ky=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ei({type:e}),e.\u0275inj=Mi({imports:[$l,$l]});let i=e;return i})(),ma=function(i){return i[i.FADING_IN=0]="FADING_IN",i[i.VISIBLE=1]="VISIBLE",i[i.FADING_OUT=2]="FADING_OUT",i[i.HIDDEN=3]="HIDDEN",i}(ma||{}),Ay=class{constructor(e,t,n,r=!1){this._renderer=e,this.element=t,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=ma.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},u3=Sy({passive:!0,capture:!0}),Ty=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=e3(e);t&&this._events.get(e.type)?.forEach((n,r)=>{(r===t||r.contains(t))&&n.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,n,r){let s=this._events.get(t);if(s){let a=s.get(n);a?a.add(r):s.set(n,new Set([r]))}else this._events.set(t,new Map([[n,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,u3)})}removeHandler(e,t,n){let r=this._events.get(e);if(!r)return;let s=r.get(t);s&&(s.delete(n),s.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,u3)))}},h3={enterDuration:225,exitDuration:150},xO=800,p3=Sy({passive:!0,capture:!0}),f3=["mousedown","touchstart"],m3=["mouseup","mouseleave","touchend","touchcancel"],Kp=class Kp{constructor(e,t,n,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Cy(n))}fadeInRipple(e,t,n={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Se(Se({},h3),n.animation);n.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let a=n.radius||bO(e,t,r),o=e-r.left,l=t-r.top,d=s.enterDuration,p=document.createElement("div");p.classList.add("mat-ripple-element"),p.style.left=`${o-a}px`,p.style.top=`${l-a}px`,p.style.height=`${a*2}px`,p.style.width=`${a*2}px`,n.color!=null&&(p.style.backgroundColor=n.color),p.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(p);let f=window.getComputedStyle(p),g=f.transitionProperty,m=f.transitionDuration,x=g==="none"||m==="0s"||m==="0s, 0s"||r.width===0&&r.height===0,y=new Ay(this,p,n,x);p.style.transform="scale3d(1, 1, 1)",y.state=ma.FADING_IN,n.persistent||(this._mostRecentTransientRipple=y);let S=null;return!x&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let b=()=>{S&&(S.fallbackTimer=null),clearTimeout(T),this._finishRippleTransition(y)},M=()=>this._destroyRipple(y),T=setTimeout(M,d+100);p.addEventListener("transitionend",b),p.addEventListener("transitioncancel",M),S={onTransitionEnd:b,onTransitionCancel:M,fallbackTimer:T}}),this._activeRipples.set(y,S),(x||!d)&&this._finishRippleTransition(y),y}fadeOutRipple(e){if(e.state===ma.FADING_OUT||e.state===ma.HIDDEN)return;let t=e.element,n=Se(Se({},h3),e.config.animation);t.style.transitionDuration=`${n.exitDuration}ms`,t.style.opacity="0",e.state=ma.FADING_OUT,(e._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Cy(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,f3.forEach(n=>{Kp._eventManager.addHandler(this._ngZone,n,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{m3.forEach(t=>{this._triggerElement.addEventListener(t,this,p3)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===ma.FADING_IN?this._startFadeOutTransition(e):e.state===ma.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:n}=e.config;e.state=ma.VISIBLE,!n&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=ma.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=l3(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+xO;!this._target.rippleDisabled&&!t&&!n&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!c3(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let n=0;n<t.length;n++)this.fadeInRipple(t[n].clientX,t[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===ma.VISIBLE||e.config.terminateOnPointerUp&&e.state===ma.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(f3.forEach(t=>Kp._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(m3.forEach(t=>e.removeEventListener(t,this,p3)),this._pointerUpEventsRegistered=!1))}};Kp._eventManager=new Ty;var g3=Kp;function bO(i,e,t){let n=Math.max(Math.abs(i-t.left),Math.abs(i-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(n*n+r*r)}var x3=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ei({type:e}),e.\u0275inj=Mi({imports:[ky,$l,ky,$l]});let i=e;return i})();var b3=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ei({type:e}),e.\u0275inj=Mi({imports:[$l,rg,$l]});let i=e;return i})();var I3=(()=>{let e=class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}};e.\u0275fac=function(r){return new(r||e)(Ot(Wl),Ot(Fr))},e.\u0275dir=Ai({type:e});let i=e;return i})(),yg=(()=>{let e=class e extends I3{};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=zo(e)))(s||e)}})(),e.\u0275dir=Ai({type:e,features:[Pa]});let i=e;return i})(),rf=new Pn("");var yO={provide:rf,useExisting:zl(()=>yi),multi:!0};function SO(){let i=rd()?rd().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var wO=new Pn(""),yi=(()=>{let e=class e extends I3{constructor(n,r,s){super(n,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!SO())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}};e.\u0275fac=function(r){return new(r||e)(Ot(Wl),Ot(Fr),Ot(wO,8))},e.\u0275dir=Ai({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&lt("input",function(o){return s._handleInput(o.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(o){return s._compositionEnd(o.target.value)})},features:[La([yO]),Pa]});let i=e;return i})();function CO(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}var Dy=new Pn(""),D3=new Pn("");function MO(i){return CO(i.value)?{required:!0}:null}function y3(i){return null}function P3(i){return i!=null}function R3(i){return Q0(i)?Lr(i):i}function L3(i){let e={};return i.forEach(t=>{e=t!=null?Se(Se({},e),t):e}),Object.keys(e).length===0?null:e}function O3(i,e){return e.map(t=>t(i))}function EO(i){return!i.validate}function N3(i){return i.map(e=>EO(e)?e:t=>e.validate(t))}function AO(i){if(!i)return null;let e=i.filter(P3);return e.length==0?null:function(t){return L3(O3(t,e))}}function Py(i){return i!=null?AO(N3(i)):null}function TO(i){if(!i)return null;let e=i.filter(P3);return e.length==0?null:function(t){let n=O3(t,e).map(R3);return RE(n).pipe(Hn(L3))}}function Ry(i){return i!=null?TO(N3(i)):null}function S3(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function kO(i){return i._rawValidators}function IO(i){return i._rawAsyncValidators}function Iy(i){return i?Array.isArray(i)?i:[i]:[]}function mg(i,e){return Array.isArray(i)?i.includes(e):i===e}function w3(i,e){let t=Iy(e);return Iy(i).forEach(r=>{mg(t,r)||t.push(r)}),t}function C3(i,e){return Iy(e).filter(t=>!mg(i,t))}var gg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Py(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ry(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Au=class extends gg{get formDirective(){return null}get path(){return null}},nf=class extends gg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},_g=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},DO={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},mst=In(Se({},DO),{"[class.ng-submitted]":"isSubmitted"}),oi=(()=>{let e=class e extends _g{constructor(n){super(n)}};e.\u0275fac=function(r){return new(r||e)(Ot(nf,2))},e.\u0275dir=Ai({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&ar("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Pa]});let i=e;return i})(),F3=(()=>{let e=class e extends _g{constructor(n){super(n)}};e.\u0275fac=function(r){return new(r||e)(Ot(Au,10))},e.\u0275dir=Ai({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&ar("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Pa]});let i=e;return i})();var Zp="VALID",fg="INVALID",Mu="PENDING",Jp="DISABLED",Tu=class{},vg=class extends Tu{constructor(e,t){super(),this.value=e,this.source=t}},tf=class extends Tu{constructor(e,t){super(),this.pristine=e,this.source=t}},ef=class extends Tu{constructor(e,t){super(),this.touched=e,this.source=t}},Eu=class extends Tu{constructor(e,t){super(),this.status=e,this.source=t}};function B3(i){return(Sg(i)?i.validators:i)||null}function PO(i){return Array.isArray(i)?Py(i):i||null}function V3(i,e){return(Sg(e)?e.asyncValidators:i)||null}function RO(i){return Array.isArray(i)?Ry(i):i||null}function Sg(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function LO(i,e,t){let n=i.controls;if(!(e?Object.keys(n):n).length)throw new ei(1e3,"");if(!n[t])throw new ei(1001,"")}function OO(i,e,t){i._forEachChild((n,r)=>{if(t[r]===void 0)throw new ei(1002,"")})}var xg=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Np(()=>this.statusReactive()),this.statusReactive=Rp(void 0),this._pristine=Np(()=>this.pristineReactive()),this.pristineReactive=Rp(!0),this._touched=Np(()=>this.touchedReactive()),this.touchedReactive=Rp(!1),this._events=new pa,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Gl(this.statusReactive)}set status(e){Gl(()=>this.statusReactive.set(e))}get valid(){return this.status===Zp}get invalid(){return this.status===fg}get pending(){return this.status==Mu}get disabled(){return this.status===Jp}get enabled(){return this.status!==Jp}get pristine(){return Gl(this.pristineReactive)}set pristine(e){Gl(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Gl(this.touchedReactive)}set touched(e){Gl(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(w3(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(w3(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(C3(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(C3(e,this._rawAsyncValidators))}hasValidator(e){return mg(this._rawValidators,e)}hasAsyncValidator(e){return mg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(In(Se({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new ef(!0,n))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:n})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n),t&&e.emitEvent!==!1&&this._events.next(new ef(!1,n))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(In(Se({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new tf(!1,n))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),t&&e.emitEvent!==!1&&this._events.next(new tf(!0,n))}markAsPending(e={}){this.status=Mu;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Eu(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(In(Se({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Jp,this.errors=null,this._forEachChild(r=>{r.disable(In(Se({},e),{onlySelf:!0}))}),this._updateValue();let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new vg(this.value,n)),this._events.next(new Eu(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(In(Se({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Zp,this._forEachChild(n=>{n.enable(In(Se({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(In(Se({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Zp||this.status===Mu)&&this._runAsyncValidator(n,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new vg(this.value,t)),this._events.next(new Eu(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(In(Se({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jp:Zp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Mu,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let n=R3(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){let n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,n){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||n)&&this._events.next(new Eu(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,n)}_initObservables(){this.valueChanges=new Nr,this.statusChanges=new Nr}_calculateStatus(){return this._allControlsDisabled()?Jp:this.errors?fg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mu)?Mu:this._anyControlsHaveStatus(fg)?fg:Zp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new tf(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ef(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Sg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=PO(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=RO(this._rawAsyncValidators)}},bg=class extends xg{constructor(e,t,n){super(B3(t),V3(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){OO(this,!0,e),Object.keys(e).forEach(n=>{LO(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(n=>{let r=this.controls[n];r&&r.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>n._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,n,r)=>((n.enabled||this.disabled)&&(t[r]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((r,s)=>{n=t(n,r,s)}),n}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Ly=new Pn("CallSetDisabledState",{providedIn:"root",factory:()=>Oy}),Oy="always";function NO(i,e){return[...e.path,i]}function U3(i,e,t=Oy){z3(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),BO(i,e),UO(i,e),VO(i,e),FO(i,e)}function M3(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function FO(i,e){if(e.valueAccessor.setDisabledState){let t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}function z3(i,e){let t=kO(i);e.validator!==null?i.setValidators(S3(t,e.validator)):typeof t=="function"&&i.setValidators([t]);let n=IO(i);e.asyncValidator!==null?i.setAsyncValidators(S3(n,e.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();M3(e._rawValidators,r),M3(e._rawAsyncValidators,r)}function BO(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&j3(i,e)})}function VO(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&j3(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function j3(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function UO(i,e){let t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}function zO(i,e){i==null,z3(i,e)}function jO(i,e){if(!i.hasOwnProperty("model"))return!1;let t=i.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function HO(i){return Object.getPrototypeOf(i.constructor)===yg}function WO(i,e){i._syncPendingControls(),e.forEach(t=>{let n=t.control;n.updateOn==="submit"&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function GO(i,e){if(!e)return null;Array.isArray(e);let t,n,r;return e.forEach(s=>{s.constructor===yi?t=s:HO(s)?n=s:r=s}),r||n||t||null}var qO={provide:Au,useExisting:zl(()=>Ny)},Qp=Promise.resolve(),Ny=(()=>{let e=class e extends Au{get submitted(){return Gl(this.submittedReactive)}constructor(n,r,s){super(),this.callSetDisabledState=s,this._submitted=Np(()=>this.submittedReactive()),this.submittedReactive=Rp(!1),this._directives=new Set,this.ngSubmit=new Nr,this.form=new bg({},Py(n),Ry(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Qp.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),U3(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Qp.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Qp.then(()=>{let r=this._findContainer(n.path),s=new bg({});zO(s,n),r.registerControl(n.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Qp.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Qp.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),WO(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}};e.\u0275fac=function(r){return new(r||e)(Ot(Dy,10),Ot(D3,10),Ot(Ly,8))},e.\u0275dir=Ai({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){r&1&&lt("submit",function(o){return s.onSubmit(o)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[La([qO]),Pa]});let i=e;return i})();function E3(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function A3(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var XO=class extends xg{constructor(e=null,t,n){super(B3(t),V3(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(A3(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){E3(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){E3(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){A3(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var YO={provide:nf,useExisting:zl(()=>ni)},T3=Promise.resolve(),ni=(()=>{let e=class e extends nf{constructor(n,r,s,a,o,l){super(),this._changeDetectorRef=o,this.callSetDisabledState=l,this.control=new XO,this._registered=!1,this.name="",this.update=new Nr,this._parent=n,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=GO(this,a)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),jO(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){U3(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){T3.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,s=r!==0&&jo(r);T3.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?NO(n,this._parent):[n]}};e.\u0275fac=function(r){return new(r||e)(Ot(Au,9),Ot(Dy,10),Ot(D3,10),Ot(rf,10),Ot(id,8),Ot(Ly,8))},e.\u0275dir=Ai({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[La([YO]),Pa,ro]});let i=e;return i})(),H3=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ai({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let i=e;return i})(),$O={provide:rf,useExisting:zl(()=>Ho),multi:!0},Ho=(()=>{let e=class e extends yg{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=zo(e)))(s||e)}})(),e.\u0275dir=Ai({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){r&1&&lt("input",function(o){return s.onChange(o.target.value)})("blur",function(){return s.onTouched()})},features:[La([$O]),Pa]});let i=e;return i})();var KO={provide:rf,useExisting:zl(()=>Si),multi:!0};function W3(i,e){return i==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function ZO(i){return i.split(":")[0]}var Si=(()=>{let e=class e extends yg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r=this._getOptionId(n),s=W3(r,n);this.setProperty("value",s)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=ZO(n);return this._optionMap.has(r)?this._optionMap.get(r):n}};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=zo(e)))(s||e)}})(),e.\u0275dir=Ai({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){r&1&&lt("change",function(o){return s.onChange(o.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[La([KO]),Pa]});let i=e;return i})(),Ri=(()=>{let e=class e{constructor(n,r,s){this._element=n,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(W3(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(Ot(Fr),Ot(Wl),Ot(Si,9))},e.\u0275dir=Ai({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let i=e;return i})(),JO={provide:rf,useExisting:zl(()=>G3),multi:!0};function k3(i,e){return i==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function QO(i){return i.split(":")[0]}var G3=(()=>{let e=class e extends yg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r;if(Array.isArray(n)){let s=n.map(a=>this._getOptionId(a));r=(a,o)=>{a._setSelected(s.indexOf(o.toString())>-1)}}else r=(s,a)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let s=[],a=r.selectedOptions;if(a!==void 0){let o=a;for(let l=0;l<o.length;l++){let d=o[l],p=this._getOptionValue(d.value);s.push(p)}}else{let o=r.options;for(let l=0;l<o.length;l++){let d=o[l];if(d.selected){let p=this._getOptionValue(d.value);s.push(p)}}}this.value=s,n(s)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=QO(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=zo(e)))(s||e)}})(),e.\u0275dir=Ai({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){r&1&&lt("change",function(o){return s.onChange(o.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[La([JO]),Pa]});let i=e;return i})(),Li=(()=>{let e=class e{constructor(n,r,s){this._element=n,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(k3(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(k3(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(Ot(Fr),Ot(Wl),Ot(G3,9))},e.\u0275dir=Ai({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let i=e;return i})();var tN=(()=>{let e=class e{constructor(){this._validator=y3}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):y3,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ai({type:e,features:[ro]});let i=e;return i})();var eN={provide:Dy,useExisting:zl(()=>Na),multi:!0};var Na=(()=>{let e=class e extends tN{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=jo,this.createValidator=n=>MO}enabled(n){return n}};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=zo(e)))(s||e)}})(),e.\u0275dir=Ai({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,s){r&2&&Ra("required",s._enabled?"":null)},inputs:{required:"required"},features:[La([eN]),Pa]});let i=e;return i})();var nN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ei({type:e}),e.\u0275inj=Mi({});let i=e;return i})();var q3=(()=>{let e=class e{static withConfig(n){return{ngModule:e,providers:[{provide:Ly,useValue:n.callSetDisabledState??Oy}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ei({type:e}),e.\u0275inj=Mi({imports:[nN]});let i=e;return i})();function lo(){}var o5=function(){let i=0;return function(){return i++}}();function Yn(i){return i===null||typeof i>"u"}function Ti(i){if(Array.isArray&&Array.isArray(i))return!0;let e=Object.prototype.toString.call(i);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Bn(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}var Qi=i=>(typeof i=="number"||i instanceof Number)&&isFinite(+i);function Gs(i,e){return Qi(i)?i:e}function wn(i,e){return typeof i>"u"?e:i}var l5=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:i/e,Wy=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*e:+i;function ki(i,e,t){if(i&&typeof i.call=="function")return i.apply(t,e)}function li(i,e,t,n){let r,s,a;if(Ti(i))if(s=i.length,n)for(r=s-1;r>=0;r--)e.call(t,i[r],r);else for(r=0;r<s;r++)e.call(t,i[r],r);else if(Bn(i))for(a=Object.keys(i),s=a.length,r=0;r<s;r++)e.call(t,i[a[r]],a[r])}function cf(i,e){let t,n,r,s;if(!i||!e||i.length!==e.length)return!1;for(t=0,n=i.length;t<n;++t)if(r=i[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Tg(i){if(Ti(i))return i.map(Tg);if(Bn(i)){let e=Object.create(null),t=Object.keys(i),n=t.length,r=0;for(;r<n;++r)e[t[r]]=Tg(i[t[r]]);return e}return i}function c5(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function iN(i,e,t,n){if(!c5(i))return;let r=e[i],s=t[i];Bn(r)&&Bn(s)?Du(r,s,n):e[i]=Tg(s)}function Du(i,e,t){let n=Ti(e)?e:[e],r=n.length;if(!Bn(i))return i;t=t||{};let s=t.merger||iN;for(let a=0;a<r;++a){if(e=n[a],!Bn(e))continue;let o=Object.keys(e);for(let l=0,d=o.length;l<d;++l)s(o[l],i,e,t)}return i}function Lu(i,e){return Du(i,e,{merger:rN})}function rN(i,e,t){if(!c5(i))return;let n=e[i],r=t[i];Bn(n)&&Bn(r)?Lu(n,r):Object.prototype.hasOwnProperty.call(e,i)||(e[i]=Tg(r))}var X3={"":i=>i,x:i=>i.x,y:i=>i.y};function qo(i,e){return(X3[e]||(X3[e]=sN(e)))(i)}function sN(i){let e=aN(i);return t=>{for(let n of e){if(n==="")break;t=t&&t[n]}return t}}function aN(i){let e=i.split("."),t=[],n="";for(let r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(t.push(n),n="");return t}function Pg(i){return i.charAt(0).toUpperCase()+i.slice(1)}var Ws=i=>typeof i<"u",Go=i=>typeof i=="function",Gy=(i,e)=>{if(i.size!==e.size)return!1;for(let t of i)if(!e.has(t))return!1;return!0};function d5(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}var Oi=Math.PI,fi=2*Oi,oN=fi+Oi,kg=Number.POSITIVE_INFINITY,lN=Oi/180,Gi=Oi/2,sf=Oi/4,Y3=Oi*2/3,qs=Math.log10,Fa=Math.sign;function qy(i){let e=Math.round(i);i=Ou(i,e,i/1e3)?e:i;let t=Math.pow(10,Math.floor(qs(i))),n=i/t;return(n<=1?1:n<=2?2:n<=5?5:10)*t}function u5(i){let e=[],t=Math.sqrt(i),n;for(n=1;n<t;n++)i%n===0&&(e.push(n),e.push(i/n));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function hd(i){return!isNaN(parseFloat(i))&&isFinite(i)}function Ou(i,e,t){return Math.abs(i-e)<t}function h5(i,e){let t=Math.round(i);return t-e<=i&&t+e>=i}function Xy(i,e,t){let n,r,s;for(n=0,r=i.length;n<r;n++)s=i[n][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function _a(i){return i*(Oi/180)}function Rg(i){return i*(180/Oi)}function Yy(i){if(!Qi(i))return;let e=1,t=0;for(;Math.round(i*e)/e!==i;)e*=10,t++;return t}function $y(i,e){let t=e.x-i.x,n=e.y-i.y,r=Math.sqrt(t*t+n*n),s=Math.atan2(n,t);return s<-.5*Oi&&(s+=fi),{angle:s,distance:r}}function Ig(i,e){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))}function cN(i,e){return(i-e+oN)%fi-Oi}function Is(i){return(i%fi+fi)%fi}function Nu(i,e,t,n){let r=Is(i),s=Is(e),a=Is(t),o=Is(s-r),l=Is(a-r),d=Is(r-s),p=Is(r-a);return r===s||r===a||n&&s===a||o>l&&d<p}function Mr(i,e,t){return Math.max(e,Math.min(t,i))}function p5(i){return Mr(i,-32768,32767)}function co(i,e,t,n=1e-6){return i>=Math.min(e,t)-n&&i<=Math.max(e,t)+n}function Lg(i,e,t){t=t||(a=>i[a]<e);let n=i.length-1,r=0,s;for(;n-r>1;)s=r+n>>1,t(s)?r=s:n=s;return{lo:r,hi:n}}var oo=(i,e,t,n)=>Lg(i,t,n?r=>i[r][e]<=t:r=>i[r][e]<t),f5=(i,e,t)=>Lg(i,t,n=>i[n][e]>=t);function m5(i,e,t){let n=0,r=i.length;for(;n<r&&i[n]<e;)n++;for(;r>n&&i[r-1]>t;)r--;return n>0||r<i.length?i.slice(n,r):i}var g5=["push","pop","shift","splice","unshift"];function _5(i,e){if(i._chartjs){i._chartjs.listeners.push(e);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),g5.forEach(t=>{let n="_onData"+Pg(t),r=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...s){let a=r.apply(this,s);return i._chartjs.listeners.forEach(o=>{typeof o[n]=="function"&&o[n](...s)}),a}})})}function Ky(i,e){let t=i._chartjs;if(!t)return;let n=t.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(g5.forEach(s=>{delete i[s]}),delete i._chartjs)}function Zy(i){let e=new Set,t,n;for(t=0,n=i.length;t<n;++t)e.add(i[t]);return e.size===n?i:Array.from(e)}var Jy=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function Qy(i,e,t){let n=t||(a=>Array.prototype.slice.call(a)),r=!1,s=[];return function(...a){s=n(a),r||(r=!0,Jy.call(window,()=>{r=!1,i.apply(e,s)}))}}function v5(i,e){let t;return function(...n){return e?(clearTimeout(t),t=setTimeout(i,e,n)):i.apply(this,n),e}}var Og=i=>i==="start"?"left":i==="end"?"right":"center",Wr=(i,e,t)=>i==="start"?e:i==="end"?t:(e+t)/2,x5=(i,e,t,n)=>i===(n?"left":"right")?t:i==="center"?(e+t)/2:e;function t2(i,e,t){let n=e.length,r=0,s=n;if(i._sorted){let{iScale:a,_parsed:o}=i,l=a.axis,{min:d,max:p,minDefined:f,maxDefined:g}=a.getUserBounds();f&&(r=Mr(Math.min(oo(o,a.axis,d).lo,t?n:oo(e,l,a.getPixelForValue(d)).lo),0,n-1)),g?s=Mr(Math.max(oo(o,a.axis,p,!0).hi+1,t?0:oo(e,l,a.getPixelForValue(p),!0).hi+1),r,n)-r:s=n-r}return{start:r,count:s}}function e2(i){let{xScale:e,yScale:t,_scaleRanges:n}=i,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!n)return i._scaleRanges=r,!0;let s=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==t.min||n.ymax!==t.max;return Object.assign(n,r),s}var wg=i=>i===0||i===1,$3=(i,e,t)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-e)*fi/t)),K3=(i,e,t)=>Math.pow(2,-10*i)*Math.sin((i-e)*fi/t)+1,Iu={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*Gi)+1,easeOutSine:i=>Math.sin(i*Gi),easeInOutSine:i=>-.5*(Math.cos(Oi*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>wg(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>wg(i)?i:$3(i,.075,.3),easeOutElastic:i=>wg(i)?i:K3(i,.075,.3),easeInOutElastic(i){return wg(i)?i:i<.5?.5*$3(i*2,.1125,.45):.5+.5*K3(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let e=1.70158;return(i/=.5)<1?.5*(i*i*(((e*=1.525)+1)*i-e)):.5*((i-=2)*i*(((e*=1.525)+1)*i+e)+2)},easeInBounce:i=>1-Iu.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?Iu.easeInBounce(i*2)*.5:Iu.easeOutBounce(i*2-1)*.5+.5};function df(i){return i+.5|0}var Zl=(i,e,t)=>Math.max(Math.min(i,t),e);function af(i){return Zl(df(i*2.55),0,255)}function Jl(i){return Zl(df(i*255),0,255)}function Wo(i){return Zl(df(i/2.55)/100,0,1)}function Z3(i){return Zl(df(i*100),0,100)}var ga={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},zy=[..."0123456789ABCDEF"],dN=i=>zy[i&15],uN=i=>zy[(i&240)>>4]+zy[i&15],Cg=i=>(i&240)>>4===(i&15),hN=i=>Cg(i.r)&&Cg(i.g)&&Cg(i.b)&&Cg(i.a);function pN(i){var e=i.length,t;return i[0]==="#"&&(e===4||e===5?t={r:255&ga[i[1]]*17,g:255&ga[i[2]]*17,b:255&ga[i[3]]*17,a:e===5?ga[i[4]]*17:255}:(e===7||e===9)&&(t={r:ga[i[1]]<<4|ga[i[2]],g:ga[i[3]]<<4|ga[i[4]],b:ga[i[5]]<<4|ga[i[6]],a:e===9?ga[i[7]]<<4|ga[i[8]]:255})),t}var fN=(i,e)=>i<255?e(i):"";function mN(i){var e=hN(i)?dN:uN;return i?"#"+e(i.r)+e(i.g)+e(i.b)+fN(i.a,e):void 0}var gN=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function b5(i,e,t){let n=e*Math.min(t,1-t),r=(s,a=(s+i/30)%12)=>t-n*Math.max(Math.min(a-3,9-a,1),-1);return[r(0),r(8),r(4)]}function _N(i,e,t){let n=(r,s=(r+i/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function vN(i,e,t){let n=b5(i,1,.5),r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)n[r]*=1-e-t,n[r]+=e;return n}function xN(i,e,t,n,r){return i===r?(e-t)/n+(e<t?6:0):e===r?(t-i)/n+2:(i-e)/n+4}function n2(i){let t=i.r/255,n=i.g/255,r=i.b/255,s=Math.max(t,n,r),a=Math.min(t,n,r),o=(s+a)/2,l,d,p;return s!==a&&(p=s-a,d=o>.5?p/(2-s-a):p/(s+a),l=xN(t,n,r,p,s),l=l*60+.5),[l|0,d||0,o]}function i2(i,e,t,n){return(Array.isArray(e)?i(e[0],e[1],e[2]):i(e,t,n)).map(Jl)}function r2(i,e,t){return i2(b5,i,e,t)}function bN(i,e,t){return i2(vN,i,e,t)}function yN(i,e,t){return i2(_N,i,e,t)}function y5(i){return(i%360+360)%360}function SN(i){let e=gN.exec(i),t=255,n;if(!e)return;e[5]!==n&&(t=e[6]?af(+e[5]):Jl(+e[5]));let r=y5(+e[2]),s=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?n=bN(r,s,a):e[1]==="hsv"?n=yN(r,s,a):n=r2(r,s,a),{r:n[0],g:n[1],b:n[2],a:t}}function wN(i,e){var t=n2(i);t[0]=y5(t[0]+e),t=r2(t),i.r=t[0],i.g=t[1],i.b=t[2]}function CN(i){if(!i)return;let e=n2(i),t=e[0],n=Z3(e[1]),r=Z3(e[2]);return i.a<255?`hsla(${t}, ${n}%, ${r}%, ${Wo(i.a)})`:`hsl(${t}, ${n}%, ${r}%)`}var J3={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Q3={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function MN(){let i={},e=Object.keys(Q3),t=Object.keys(J3),n,r,s,a,o;for(n=0;n<e.length;n++){for(a=o=e[n],r=0;r<t.length;r++)s=t[r],o=o.replace(s,J3[s]);s=parseInt(Q3[a],16),i[o]=[s>>16&255,s>>8&255,s&255]}return i}var Mg;function EN(i){Mg||(Mg=MN(),Mg.transparent=[0,0,0,0]);let e=Mg[i.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var AN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function TN(i){let e=AN.exec(i),t=255,n,r,s;if(e){if(e[7]!==n){let a=+e[7];t=e[8]?af(a):Zl(a*255,0,255)}return n=+e[1],r=+e[3],s=+e[5],n=255&(e[2]?af(n):Zl(n,0,255)),r=255&(e[4]?af(r):Zl(r,0,255)),s=255&(e[6]?af(s):Zl(s,0,255)),{r:n,g:r,b:s,a:t}}}function kN(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${Wo(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}var Fy=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,ku=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function IN(i,e,t){let n=ku(Wo(i.r)),r=ku(Wo(i.g)),s=ku(Wo(i.b));return{r:Jl(Fy(n+t*(ku(Wo(e.r))-n))),g:Jl(Fy(r+t*(ku(Wo(e.g))-r))),b:Jl(Fy(s+t*(ku(Wo(e.b))-s))),a:i.a+t*(e.a-i.a)}}function Eg(i,e,t){if(i){let n=n2(i);n[e]=Math.max(0,Math.min(n[e]+n[e]*t,e===0?360:1)),n=r2(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function S5(i,e){return i&&Object.assign(e||{},i)}function t5(i){var e={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(e={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(e.a=Jl(i[3]))):(e=S5(i,{r:0,g:0,b:0,a:1}),e.a=Jl(e.a)),e}function DN(i){return i.charAt(0)==="r"?TN(i):SN(i)}var jy=class i{constructor(e){if(e instanceof i)return e;let t=typeof e,n;t==="object"?n=t5(e):t==="string"&&(n=pN(e)||EN(e)||DN(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=S5(this._rgb);return e&&(e.a=Wo(e.a)),e}set rgb(e){this._rgb=t5(e)}rgbString(){return this._valid?kN(this._rgb):void 0}hexString(){return this._valid?mN(this._rgb):void 0}hslString(){return this._valid?CN(this._rgb):void 0}mix(e,t){if(e){let n=this.rgb,r=e.rgb,s,a=t===s?.5:t,o=2*a-1,l=n.a-r.a,d=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;s=1-d,n.r=255&d*n.r+s*r.r+.5,n.g=255&d*n.g+s*r.g+.5,n.b=255&d*n.b+s*r.b+.5,n.a=a*n.a+(1-a)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=IN(this._rgb,e._rgb,t)),this}clone(){return new i(this.rgb)}alpha(e){return this._rgb.a=Jl(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=df(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Eg(this._rgb,2,e),this}darken(e){return Eg(this._rgb,2,-e),this}saturate(e){return Eg(this._rgb,1,e),this}desaturate(e){return Eg(this._rgb,1,-e),this}rotate(e){return wN(this._rgb,e),this}};function w5(i){return new jy(i)}function C5(i){if(i&&typeof i=="object"){let e=i.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function s2(i){return C5(i)?i:w5(i)}function By(i){return C5(i)?i:w5(i).saturate(.5).darken(.1).hexString()}var Ql=Object.create(null),Ng=Object.create(null);function of(i,e){if(!e)return i;let t=e.split(".");for(let n=0,r=t.length;n<r;++n){let s=t[n];i=i[s]||(i[s]=Object.create(null))}return i}function Vy(i,e,t){return typeof e=="string"?Du(of(i,e),t):Du(of(i,""),e)}var Hy=class{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,n)=>By(n.backgroundColor),this.hoverBorderColor=(t,n)=>By(n.borderColor),this.hoverColor=(t,n)=>By(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,t){return Vy(this,e,t)}get(e){return of(this,e)}describe(e,t){return Vy(Ng,e,t)}override(e,t){return Vy(Ql,e,t)}route(e,t,n,r){let s=of(this,e),a=of(this,n),o="_"+t;Object.defineProperties(s,{[o]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let l=this[o],d=a[r];return Bn(l)?Object.assign({},d,l):wn(l,d)},set(l){this[o]=l}}})}},Rn=new Hy({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function PN(i){return!i||Yn(i.size)||Yn(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function lf(i,e,t,n,r){let s=e[r];return s||(s=e[r]=i.measureText(r).width,t.push(r)),s>n&&(n=s),n}function M5(i,e,t,n){n=n||{};let r=n.data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},s=n.garbageCollect=[],n.font=e),i.save(),i.font=e;let a=0,o=t.length,l,d,p,f,g;for(l=0;l<o;l++)if(f=t[l],f!=null&&Ti(f)!==!0)a=lf(i,r,s,a,f);else if(Ti(f))for(d=0,p=f.length;d<p;d++)g=f[d],g!=null&&!Ti(g)&&(a=lf(i,r,s,a,g));i.restore();let m=s.length/2;if(m>t.length){for(l=0;l<m;l++)delete r[s[l]];s.splice(0,m)}return a}function tc(i,e,t){let n=i.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*n)/n+r}function a2(i,e){e=e||i.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,i.width,i.height),e.restore()}function Fg(i,e,t,n){o2(i,e,t,n,null)}function o2(i,e,t,n,r){let s,a,o,l,d,p,f=e.pointStyle,g=e.rotation,m=e.radius,x=(g||0)*lN;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){i.save(),i.translate(t,n),i.rotate(x),i.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),i.restore();return}if(!(isNaN(m)||m<=0)){switch(i.beginPath(),f){default:r?i.ellipse(t,n,r/2,m,0,0,fi):i.arc(t,n,m,0,fi),i.closePath();break;case"triangle":i.moveTo(t+Math.sin(x)*m,n-Math.cos(x)*m),x+=Y3,i.lineTo(t+Math.sin(x)*m,n-Math.cos(x)*m),x+=Y3,i.lineTo(t+Math.sin(x)*m,n-Math.cos(x)*m),i.closePath();break;case"rectRounded":d=m*.516,l=m-d,a=Math.cos(x+sf)*l,o=Math.sin(x+sf)*l,i.arc(t-a,n-o,d,x-Oi,x-Gi),i.arc(t+o,n-a,d,x-Gi,x),i.arc(t+a,n+o,d,x,x+Gi),i.arc(t-o,n+a,d,x+Gi,x+Oi),i.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,p=r?r/2:l,i.rect(t-p,n-l,2*p,2*l);break}x+=sf;case"rectRot":a=Math.cos(x)*m,o=Math.sin(x)*m,i.moveTo(t-a,n-o),i.lineTo(t+o,n-a),i.lineTo(t+a,n+o),i.lineTo(t-o,n+a),i.closePath();break;case"crossRot":x+=sf;case"cross":a=Math.cos(x)*m,o=Math.sin(x)*m,i.moveTo(t-a,n-o),i.lineTo(t+a,n+o),i.moveTo(t+o,n-a),i.lineTo(t-o,n+a);break;case"star":a=Math.cos(x)*m,o=Math.sin(x)*m,i.moveTo(t-a,n-o),i.lineTo(t+a,n+o),i.moveTo(t+o,n-a),i.lineTo(t-o,n+a),x+=sf,a=Math.cos(x)*m,o=Math.sin(x)*m,i.moveTo(t-a,n-o),i.lineTo(t+a,n+o),i.moveTo(t+o,n-a),i.lineTo(t-o,n+a);break;case"line":a=r?r/2:Math.cos(x)*m,o=Math.sin(x)*m,i.moveTo(t-a,n-o),i.lineTo(t+a,n+o);break;case"dash":i.moveTo(t,n),i.lineTo(t+Math.cos(x)*m,n+Math.sin(x)*m);break}i.fill(),e.borderWidth>0&&i.stroke()}}function Pu(i,e,t){return t=t||.5,!e||i&&i.x>e.left-t&&i.x<e.right+t&&i.y>e.top-t&&i.y<e.bottom+t}function uf(i,e){i.save(),i.beginPath(),i.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),i.clip()}function hf(i){i.restore()}function E5(i,e,t,n,r){if(!e)return i.lineTo(t.x,t.y);if(r==="middle"){let s=(e.x+t.x)/2;i.lineTo(s,e.y),i.lineTo(s,t.y)}else r==="after"!=!!n?i.lineTo(e.x,t.y):i.lineTo(t.x,e.y);i.lineTo(t.x,t.y)}function A5(i,e,t,n){if(!e)return i.lineTo(t.x,t.y);i.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?t.cp2x:t.cp1x,n?t.cp2y:t.cp1y,t.x,t.y)}function ec(i,e,t,n,r,s={}){let a=Ti(e)?e:[e],o=s.strokeWidth>0&&s.strokeColor!=="",l,d;for(i.save(),i.font=r.string,RN(i,s),l=0;l<a.length;++l)d=a[l],o&&(s.strokeColor&&(i.strokeStyle=s.strokeColor),Yn(s.strokeWidth)||(i.lineWidth=s.strokeWidth),i.strokeText(d,t,n,s.maxWidth)),i.fillText(d,t,n,s.maxWidth),LN(i,t,n,d,s),n+=r.lineHeight;i.restore()}function RN(i,e){e.translation&&i.translate(e.translation[0],e.translation[1]),Yn(e.rotation)||i.rotate(e.rotation),e.color&&(i.fillStyle=e.color),e.textAlign&&(i.textAlign=e.textAlign),e.textBaseline&&(i.textBaseline=e.textBaseline)}function LN(i,e,t,n,r){if(r.strikethrough||r.underline){let s=i.measureText(n),a=e-s.actualBoundingBoxLeft,o=e+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,d=t+s.actualBoundingBoxDescent,p=r.strikethrough?(l+d)/2:d;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(a,p),i.lineTo(o,p),i.stroke()}}function Fu(i,e){let{x:t,y:n,w:r,h:s,radius:a}=e;i.arc(t+a.topLeft,n+a.topLeft,a.topLeft,-Gi,Oi,!0),i.lineTo(t,n+s-a.bottomLeft),i.arc(t+a.bottomLeft,n+s-a.bottomLeft,a.bottomLeft,Oi,Gi,!0),i.lineTo(t+r-a.bottomRight,n+s),i.arc(t+r-a.bottomRight,n+s-a.bottomRight,a.bottomRight,Gi,0,!0),i.lineTo(t+r,n+a.topRight),i.arc(t+r-a.topRight,n+a.topRight,a.topRight,0,-Gi,!0),i.lineTo(t+a.topLeft,n)}var ON=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),NN=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function FN(i,e){let t=(""+i).match(ON);if(!t||t[1]==="normal")return e*1.2;switch(i=+t[2],t[3]){case"px":return i;case"%":i/=100;break}return e*i}var BN=i=>+i||0;function Bg(i,e){let t={},n=Bn(e),r=n?Object.keys(e):e,s=Bn(i)?n?a=>wn(i[a],i[e[a]]):a=>i[a]:()=>i;for(let a of r)t[a]=BN(s(a));return t}function l2(i){return Bg(i,{top:"y",right:"x",bottom:"y",left:"x"})}function nc(i){return Bg(i,["topLeft","topRight","bottomLeft","bottomRight"])}function Gr(i){let e=l2(i);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function xr(i,e){i=i||{},e=e||Rn.font;let t=wn(i.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let n=wn(i.style,e.style);n&&!(""+n).match(NN)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");let r={family:wn(i.family,e.family),lineHeight:FN(wn(i.lineHeight,e.lineHeight),t),size:t,style:n,weight:wn(i.weight,e.weight),string:""};return r.string=PN(r),r}function Bu(i,e,t,n){let r=!0,s,a,o;for(s=0,a=i.length;s<a;++s)if(o=i[s],o!==void 0&&(e!==void 0&&typeof o=="function"&&(o=o(e),r=!1),t!==void 0&&Ti(o)&&(o=o[t%o.length],r=!1),o!==void 0))return n&&!r&&(n.cacheable=!1),o}function T5(i,e,t){let{min:n,max:r}=i,s=Wy(e,(r-n)/2),a=(o,l)=>t&&o===0?0:o+l;return{min:a(n,-Math.abs(s)),max:a(r,s)}}function Xo(i,e){return Object.assign(Object.create(i),e)}function Vg(i,e=[""],t=i,n,r=()=>i[0]){Ws(n)||(n=D5("_fallback",i));let s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:t,_fallback:n,_getTarget:r,override:a=>Vg([a,...i],e,t,n)};return new Proxy(s,{deleteProperty(a,o){return delete a[o],delete a._keys,delete i[0][o],!0},get(a,o){return k5(a,o,()=>qN(o,e,i,a))},getOwnPropertyDescriptor(a,o){return Reflect.getOwnPropertyDescriptor(a._scopes[0],o)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(a,o){return n5(a).includes(o)},ownKeys(a){return n5(a)},set(a,o,l){let d=a._storage||(a._storage=r());return a[o]=d[o]=l,delete a._keys,!0}})}function ud(i,e,t,n){let r={_cacheable:!1,_proxy:i,_context:e,_subProxy:t,_stack:new Set,_descriptors:c2(i,n),setContext:s=>ud(i,s,t,n),override:s=>ud(i.override(s),e,t,n)};return new Proxy(r,{deleteProperty(s,a){return delete s[a],delete i[a],!0},get(s,a,o){return k5(s,a,()=>UN(s,a,o))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(i,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,a)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(s,a){return Reflect.has(i,a)},ownKeys(){return Reflect.ownKeys(i)},set(s,a,o){return i[a]=o,delete s[a],!0}})}function c2(i,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=i;return{allKeys:r,scriptable:t,indexable:n,isScriptable:Go(t)?t:()=>t,isIndexable:Go(n)?n:()=>n}}var VN=(i,e)=>i?i+Pg(e):e,d2=(i,e)=>Bn(e)&&i!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function k5(i,e,t){if(Object.prototype.hasOwnProperty.call(i,e))return i[e];let n=t();return i[e]=n,n}function UN(i,e,t){let{_proxy:n,_context:r,_subProxy:s,_descriptors:a}=i,o=n[e];return Go(o)&&a.isScriptable(e)&&(o=zN(e,o,i,t)),Ti(o)&&o.length&&(o=jN(e,o,i,a.isIndexable)),d2(e,o)&&(o=ud(o,r,s&&s[e],a)),o}function zN(i,e,t,n){let{_proxy:r,_context:s,_subProxy:a,_stack:o}=t;if(o.has(i))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+i);return o.add(i),e=e(s,a||n),o.delete(i),d2(i,e)&&(e=u2(r._scopes,r,i,e)),e}function jN(i,e,t,n){let{_proxy:r,_context:s,_subProxy:a,_descriptors:o}=t;if(Ws(s.index)&&n(i))e=e[s.index%e.length];else if(Bn(e[0])){let l=e,d=r._scopes.filter(p=>p!==l);e=[];for(let p of l){let f=u2(d,r,i,p);e.push(ud(f,s,a&&a[i],o))}}return e}function I5(i,e,t){return Go(i)?i(e,t):i}var HN=(i,e)=>i===!0?e:typeof i=="string"?qo(e,i):void 0;function WN(i,e,t,n,r){for(let s of e){let a=HN(t,s);if(a){i.add(a);let o=I5(a._fallback,t,r);if(Ws(o)&&o!==t&&o!==n)return o}else if(a===!1&&Ws(n)&&t!==n)return null}return!1}function u2(i,e,t,n){let r=e._rootScopes,s=I5(e._fallback,t,n),a=[...i,...r],o=new Set;o.add(n);let l=e5(o,a,t,s||t,n);return l===null||Ws(s)&&s!==t&&(l=e5(o,a,s,l,n),l===null)?!1:Vg(Array.from(o),[""],r,s,()=>GN(e,t,n))}function e5(i,e,t,n,r){for(;t;)t=WN(i,e,t,n,r);return t}function GN(i,e,t){let n=i._getTarget();e in n||(n[e]={});let r=n[e];return Ti(r)&&Bn(t)?t:r}function qN(i,e,t,n){let r;for(let s of e)if(r=D5(VN(s,i),t),Ws(r))return d2(i,r)?u2(t,n,i,r):r}function D5(i,e){for(let t of e){if(!t)continue;let n=t[i];if(Ws(n))return n}}function n5(i){let e=i._keys;return e||(e=i._keys=XN(i._scopes)),e}function XN(i){let e=new Set;for(let t of i)for(let n of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}function h2(i,e,t,n){let{iScale:r}=i,{key:s="r"}=this._parsing,a=new Array(n),o,l,d,p;for(o=0,l=n;o<l;++o)d=o+t,p=e[d],a[o]={r:r.parse(qo(p,s),d)};return a}var YN=Number.EPSILON||1e-14,Ru=(i,e)=>e<i.length&&!i[e].skip&&i[e],P5=i=>i==="x"?"y":"x";function $N(i,e,t,n){let r=i.skip?e:i,s=e,a=t.skip?e:t,o=Ig(s,r),l=Ig(a,s),d=o/(o+l),p=l/(o+l);d=isNaN(d)?0:d,p=isNaN(p)?0:p;let f=n*d,g=n*p;return{previous:{x:s.x-f*(a.x-r.x),y:s.y-f*(a.y-r.y)},next:{x:s.x+g*(a.x-r.x),y:s.y+g*(a.y-r.y)}}}function KN(i,e,t){let n=i.length,r,s,a,o,l,d=Ru(i,0);for(let p=0;p<n-1;++p)if(l=d,d=Ru(i,p+1),!(!l||!d)){if(Ou(e[p],0,YN)){t[p]=t[p+1]=0;continue}r=t[p]/e[p],s=t[p+1]/e[p],o=Math.pow(r,2)+Math.pow(s,2),!(o<=9)&&(a=3/Math.sqrt(o),t[p]=r*a*e[p],t[p+1]=s*a*e[p])}}function ZN(i,e,t="x"){let n=P5(t),r=i.length,s,a,o,l=Ru(i,0);for(let d=0;d<r;++d){if(a=o,o=l,l=Ru(i,d+1),!o)continue;let p=o[t],f=o[n];a&&(s=(p-a[t])/3,o[`cp1${t}`]=p-s,o[`cp1${n}`]=f-s*e[d]),l&&(s=(l[t]-p)/3,o[`cp2${t}`]=p+s,o[`cp2${n}`]=f+s*e[d])}}function JN(i,e="x"){let t=P5(e),n=i.length,r=Array(n).fill(0),s=Array(n),a,o,l,d=Ru(i,0);for(a=0;a<n;++a)if(o=l,l=d,d=Ru(i,a+1),!!l){if(d){let p=d[e]-l[e];r[a]=p!==0?(d[t]-l[t])/p:0}s[a]=o?d?Fa(r[a-1])!==Fa(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}KN(i,r,s),ZN(i,s,e)}function Ag(i,e,t){return Math.max(Math.min(i,t),e)}function QN(i,e){let t,n,r,s,a,o=Pu(i[0],e);for(t=0,n=i.length;t<n;++t)a=s,s=o,o=t<n-1&&Pu(i[t+1],e),s&&(r=i[t],a&&(r.cp1x=Ag(r.cp1x,e.left,e.right),r.cp1y=Ag(r.cp1y,e.top,e.bottom)),o&&(r.cp2x=Ag(r.cp2x,e.left,e.right),r.cp2y=Ag(r.cp2y,e.top,e.bottom)))}function R5(i,e,t,n,r){let s,a,o,l;if(e.spanGaps&&(i=i.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")JN(i,r);else{let d=n?i[i.length-1]:i[0];for(s=0,a=i.length;s<a;++s)o=i[s],l=$N(d,o,i[Math.min(s+1,a-(n?0:1))%a],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,d=o}e.capBezierPoints&&QN(i,t)}function p2(){return typeof window<"u"&&typeof document<"u"}function Ug(i){let e=i.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Dg(i,e,t){let n;return typeof i=="string"?(n=parseInt(i,10),i.indexOf("%")!==-1&&(n=n/100*e.parentNode[t])):n=i,n}var zg=i=>window.getComputedStyle(i,null);function tF(i,e){return zg(i).getPropertyValue(e)}var eF=["top","right","bottom","left"];function dd(i,e,t){let n={};t=t?"-"+t:"";for(let r=0;r<4;r++){let s=eF[r];n[s]=parseFloat(i[e+"-"+s+t])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}var nF=(i,e,t)=>(i>0||e>0)&&(!t||!t.shadowRoot);function iF(i,e){let t=i.touches,n=t&&t.length?t[0]:i,{offsetX:r,offsetY:s}=n,a=!1,o,l;if(nF(r,s,i.target))o=r,l=s;else{let d=e.getBoundingClientRect();o=n.clientX-d.left,l=n.clientY-d.top,a=!0}return{x:o,y:l,box:a}}function ic(i,e){if("native"in i)return i;let{canvas:t,currentDevicePixelRatio:n}=e,r=zg(t),s=r.boxSizing==="border-box",a=dd(r,"padding"),o=dd(r,"border","width"),{x:l,y:d,box:p}=iF(i,t),f=a.left+(p&&o.left),g=a.top+(p&&o.top),{width:m,height:x}=e;return s&&(m-=a.width+o.width,x-=a.height+o.height),{x:Math.round((l-f)/m*t.width/n),y:Math.round((d-g)/x*t.height/n)}}function rF(i,e,t){let n,r;if(e===void 0||t===void 0){let s=Ug(i);if(!s)e=i.clientWidth,t=i.clientHeight;else{let a=s.getBoundingClientRect(),o=zg(s),l=dd(o,"border","width"),d=dd(o,"padding");e=a.width-d.width-l.width,t=a.height-d.height-l.height,n=Dg(o.maxWidth,s,"clientWidth"),r=Dg(o.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:n||kg,maxHeight:r||kg}}var Uy=i=>Math.round(i*10)/10;function L5(i,e,t,n){let r=zg(i),s=dd(r,"margin"),a=Dg(r.maxWidth,i,"clientWidth")||kg,o=Dg(r.maxHeight,i,"clientHeight")||kg,l=rF(i,e,t),{width:d,height:p}=l;if(r.boxSizing==="content-box"){let f=dd(r,"border","width"),g=dd(r,"padding");d-=g.width+f.width,p-=g.height+f.height}return d=Math.max(0,d-s.width),p=Math.max(0,n?Math.floor(d/n):p-s.height),d=Uy(Math.min(d,a,l.maxWidth)),p=Uy(Math.min(p,o,l.maxHeight)),d&&!p&&(p=Uy(d/2)),{width:d,height:p}}function f2(i,e,t){let n=e||1,r=Math.floor(i.height*n),s=Math.floor(i.width*n);i.height=r/n,i.width=s/n;let a=i.canvas;return a.style&&(t||!a.style.height&&!a.style.width)&&(a.style.height=`${i.height}px`,a.style.width=`${i.width}px`),i.currentDevicePixelRatio!==n||a.height!==r||a.width!==s?(i.currentDevicePixelRatio=n,a.height=r,a.width=s,i.ctx.setTransform(n,0,0,n,0,0),!0):!1}var O5=function(){let i=!1;try{let e={get passive(){return i=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return i}();function m2(i,e){let t=tF(i,e),n=t&&t.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Kl(i,e,t,n){return{x:i.x+t*(e.x-i.x),y:i.y+t*(e.y-i.y)}}function N5(i,e,t,n){return{x:i.x+t*(e.x-i.x),y:n==="middle"?t<.5?i.y:e.y:n==="after"?t<1?i.y:e.y:t>0?e.y:i.y}}function F5(i,e,t,n){let r={x:i.cp2x,y:i.cp2y},s={x:e.cp1x,y:e.cp1y},a=Kl(i,r,t),o=Kl(r,s,t),l=Kl(s,e,t),d=Kl(a,o,t),p=Kl(o,l,t);return Kl(d,p,t)}var i5=new Map;function sF(i,e){e=e||{};let t=i+JSON.stringify(e),n=i5.get(t);return n||(n=new Intl.NumberFormat(i,e),i5.set(t,n)),n}function Vu(i,e,t){return sF(e,t).format(i)}var aF=function(i,e){return{x(t){return i+i+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,n){return t-n},leftForLtr(t,n){return t-n}}},oF=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,e){return i+e},leftForLtr(i,e){return i}}};function pd(i,e,t){return i?aF(e,t):oF()}function g2(i,e){let t,n;(e==="ltr"||e==="rtl")&&(t=i.canvas.style,n=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),i.prevTextDirection=n)}function _2(i,e){e!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",e[0],e[1]))}function B5(i){return i==="angle"?{between:Nu,compare:cN,normalize:Is}:{between:co,compare:(e,t)=>e-t,normalize:e=>e}}function r5({start:i,end:e,count:t,loop:n,style:r}){return{start:i%t,end:e%t,loop:n&&(e-i+1)%t===0,style:r}}function lF(i,e,t){let{property:n,start:r,end:s}=t,{between:a,normalize:o}=B5(n),l=e.length,{start:d,end:p,loop:f}=i,g,m;if(f){for(d+=l,p+=l,g=0,m=l;g<m&&a(o(e[d%l][n]),r,s);++g)d--,p--;d%=l,p%=l}return p<d&&(p+=l),{start:d,end:p,loop:f,style:i.style}}function v2(i,e,t){if(!t)return[i];let{property:n,start:r,end:s}=t,a=e.length,{compare:o,between:l,normalize:d}=B5(n),{start:p,end:f,loop:g,style:m}=lF(i,e,t),x=[],y=!1,S=null,b,M,T,k=()=>l(r,T,b)&&o(r,T)!==0,L=()=>o(s,b)===0||l(s,T,b),U=()=>y||k(),N=()=>!y||L();for(let F=p,O=p;F<=f;++F)M=e[F%a],!M.skip&&(b=d(M[n]),b!==T&&(y=l(b,r,s),S===null&&U()&&(S=o(b,r)===0?F:O),S!==null&&N()&&(x.push(r5({start:S,end:F,loop:g,count:a,style:m})),S=null),O=F,T=b));return S!==null&&x.push(r5({start:S,end:f,loop:g,count:a,style:m})),x}function x2(i,e){let t=[],n=i.segments;for(let r=0;r<n.length;r++){let s=v2(n[r],i.points,e);s.length&&t.push(...s)}return t}function cF(i,e,t,n){let r=0,s=e-1;if(t&&!n)for(;r<e&&!i[r].skip;)r++;for(;r<e&&i[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&i[s%e].skip;)s--;return s%=e,{start:r,end:s}}function dF(i,e,t,n){let r=i.length,s=[],a=e,o=i[e],l;for(l=e+1;l<=t;++l){let d=i[l%r];d.skip||d.stop?o.skip||(n=!1,s.push({start:e%r,end:(l-1)%r,loop:n}),e=a=d.stop?l:null):(a=l,o.skip&&(e=l)),o=d}return a!==null&&s.push({start:e%r,end:a%r,loop:n}),s}function V5(i,e){let t=i.points,n=i.options.spanGaps,r=t.length;if(!r)return[];let s=!!i._loop,{start:a,end:o}=cF(t,r,s,n);if(n===!0)return s5(i,[{start:a,end:o,loop:s}],t,e);let l=o<a?o+r:o,d=!!i._fullLoop&&a===0&&o===r-1;return s5(i,dF(t,a,l,d),t,e)}function s5(i,e,t,n){return!n||!n.setContext||!t?e:uF(i,e,t,n)}function uF(i,e,t,n){let r=i._chart.getContext(),s=a5(i.options),{_datasetIndex:a,options:{spanGaps:o}}=i,l=t.length,d=[],p=s,f=e[0].start,g=f;function m(x,y,S,b){let M=o?-1:1;if(x!==y){for(x+=l;t[x%l].skip;)x-=M;for(;t[y%l].skip;)y+=M;x%l!==y%l&&(d.push({start:x%l,end:y%l,loop:S,style:b}),p=b,f=y%l)}}for(let x of e){f=o?f:x.start;let y=t[f%l],S;for(g=f+1;g<=x.end;g++){let b=t[g%l];S=a5(n.setContext(Xo(r,{type:"segment",p0:y,p1:b,p0DataIndex:(g-1)%l,p1DataIndex:g%l,datasetIndex:a}))),hF(S,p)&&m(f,g-1,x.loop,p),y=b,p=S}f<g-1&&m(f,g-1,x.loop,p)}return d}function a5(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function hF(i,e){return e&&JSON.stringify(i)!==JSON.stringify(e)}var k2=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){let s=t.listeners[r],a=t.duration;s.forEach(o=>o({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(n-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=Jy.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;let s=n.items,a=s.length-1,o=!1,l;for(;a>=0;--a)l=s[a],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),o=!0):(s[a]=s[s.length-1],s.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),s.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let n=t.items,r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},Yo=new k2,U5="transparent",pF={boolean(i,e,t){return t>.5?e:i},color(i,e,t){let n=s2(i||U5),r=n.valid&&s2(e||U5);return r&&r.valid?r.mix(n,t).hexString():e},number(i,e,t){return i+(e-i)*t}},I2=class{constructor(e,t,n,r){let s=t[n];r=Bu([e.to,r,s,e.from]);let a=Bu([e.from,s,r]);this._active=!0,this._fn=e.fn||pF[e.type||typeof a],this._easing=Iu[e.easing]||Iu.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);let r=this._target[this._prop],s=n-this._start,a=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Bu([e.to,t,r,e.from]),this._from=Bu([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,n=this._duration,r=this._prop,s=this._from,a=this._loop,o=this._to,l;if(this._active=s!==o&&(a||t<n),!this._active){this._target[r]=o,this._notify(!0);return}if(t<0){this._target[r]=s;return}l=t/n%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,o,l)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){let t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}},fF=["x","y","borderWidth","radius","tension"],mF=["color","borderColor","backgroundColor"];Rn.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});var gF=Object.keys(Rn.animation);Rn.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:i=>i!=="onProgress"&&i!=="onComplete"&&i!=="fn"});Rn.set("animations",{colors:{type:"color",properties:mF},numbers:{type:"number",properties:fF}});Rn.describe("animations",{_fallback:"animation"});Rn.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:i=>i|0}}}});var $g=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Bn(e))return;let t=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{let r=e[n];if(!Bn(r))return;let s={};for(let a of gF)s[a]=r[a];(Ti(r.properties)&&r.properties||[n]).forEach(a=>{(a===n||!t.has(a))&&t.set(a,s)})})}_animateOptions(e,t){let n=t.options,r=vF(e,n);if(!r)return[];let s=this._createAnimations(r,n);return n.$shared&&_F(e.options.$animations,n).then(()=>{e.options=n},()=>{}),s}_createAnimations(e,t){let n=this._properties,r=[],s=e.$animations||(e.$animations={}),a=Object.keys(t),o=Date.now(),l;for(l=a.length-1;l>=0;--l){let d=a[l];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(e,t));continue}let p=t[d],f=s[d],g=n.get(d);if(f)if(g&&f.active()){f.update(g,p,o);continue}else f.cancel();if(!g||!g.duration){e[d]=p;continue}s[d]=f=new I2(g,e,d,p),r.push(f)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let n=this._createAnimations(e,t);if(n.length)return Yo.add(this._chart,n),!0}};function _F(i,e){let t=[],n=Object.keys(e);for(let r=0;r<n.length;r++){let s=i[n[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function vF(i,e){if(!e)return;let t=i.options;if(!t){i.options=e;return}return t.$shared&&(i.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function z5(i,e){let t=i&&i.options||{},n=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:n?s:r,end:n?r:s}}function xF(i,e,t){if(t===!1)return!1;let n=z5(i,t),r=z5(e,t);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function bF(i){let e,t,n,r;return Bn(i)?(e=i.top,t=i.right,n=i.bottom,r=i.left):e=t=n=r=i,{top:e,right:t,bottom:n,left:r,disabled:i===!1}}function PT(i,e){let t=[],n=i._getSortedDatasetMetas(e),r,s;for(r=0,s=n.length;r<s;++r)t.push(n[r].index);return t}function j5(i,e,t,n={}){let r=i.keys,s=n.mode==="single",a,o,l,d;if(e!==null){for(a=0,o=r.length;a<o;++a){if(l=+r[a],l===t){if(n.all)continue;break}d=i.values[l],Qi(d)&&(s||e===0||Fa(e)===Fa(d))&&(e+=d)}return e}}function yF(i){let e=Object.keys(i),t=new Array(e.length),n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],t[n]={x:s,y:i[s]};return t}function H5(i,e){let t=i&&i.options.stacked;return t||t===void 0&&e.stack!==void 0}function SF(i,e,t){return`${i.id}.${e.id}.${t.stack||t.type}`}function wF(i){let{min:e,max:t,minDefined:n,maxDefined:r}=i.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function CF(i,e,t){let n=i[e]||(i[e]={});return n[t]||(n[t]={})}function W5(i,e,t,n){for(let r of e.getMatchingVisibleMetas(n).reverse()){let s=i[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function G5(i,e){let{chart:t,_cachedMeta:n}=i,r=t._stacks||(t._stacks={}),{iScale:s,vScale:a,index:o}=n,l=s.axis,d=a.axis,p=SF(s,a,n),f=e.length,g;for(let m=0;m<f;++m){let x=e[m],{[l]:y,[d]:S}=x,b=x._stacks||(x._stacks={});g=b[d]=CF(r,p,y),g[o]=S,g._top=W5(g,a,!0,n.type),g._bottom=W5(g,a,!1,n.type)}}function b2(i,e){let t=i.scales;return Object.keys(t).filter(n=>t[n].axis===e).shift()}function MF(i,e){return Xo(i,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function EF(i,e,t){return Xo(i,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function pf(i,e){let t=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){e=e||i._parsed;for(let r of e){let s=r._stacks;if(!s||s[n]===void 0||s[n][t]===void 0)return;delete s[n][t]}}}var y2=i=>i==="reset"||i==="none",q5=(i,e)=>e?i:Object.assign({},i),AF=(i,e,t)=>i&&!e.hidden&&e._stacked&&{keys:PT(t,!0),values:null},po=(()=>{class i{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=H5(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&pf(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(g,m,x,y)=>g==="x"?m:g==="r"?y:x,a=n.xAxisID=wn(r.xAxisID,b2(t,"x")),o=n.yAxisID=wn(r.yAxisID,b2(t,"y")),l=n.rAxisID=wn(r.rAxisID,b2(t,"r")),d=n.indexAxis,p=n.iAxisID=s(d,a,o,l),f=n.vAxisID=s(d,o,a,l);n.xScale=this.getScaleForId(a),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(p),n.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&Ky(this._data,this),t._stacked&&pf(t)}_dataCheck(){let t=this.getDataset(),n=t.data||(t.data=[]),r=this._data;if(Bn(n))this._data=yF(n);else if(r!==n){if(r){Ky(r,this);let s=this._cachedMeta;pf(s),s._parsed=[]}n&&Object.isExtensible(n)&&_5(n,this),this._syncList=[],this._data=n}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let n=this._cachedMeta,r=this.getDataset(),s=!1;this._dataCheck();let a=n._stacked;n._stacked=H5(n.vScale,n),n.stack!==r.stack&&(s=!0,pf(n),n.stack=r.stack),this._resyncElements(t),(s||a!==n._stacked)&&G5(this,n._parsed)}configure(){let t=this.chart.config,n=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){let{_cachedMeta:r,_data:s}=this,{iScale:a,_stacked:o}=r,l=a.axis,d=t===0&&n===s.length?!0:r._sorted,p=t>0&&r._parsed[t-1],f,g,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{Ti(s[t])?m=this.parseArrayData(r,s,t,n):Bn(s[t])?m=this.parseObjectData(r,s,t,n):m=this.parsePrimitiveData(r,s,t,n);let x=()=>g[l]===null||p&&g[l]<p[l];for(f=0;f<n;++f)r._parsed[f+t]=g=m[f],d&&(x()&&(d=!1),p=g);r._sorted=d}o&&G5(this,m)}parsePrimitiveData(t,n,r,s){let{iScale:a,vScale:o}=t,l=a.axis,d=o.axis,p=a.getLabels(),f=a===o,g=new Array(s),m,x,y;for(m=0,x=s;m<x;++m)y=m+r,g[m]={[l]:f||a.parse(p[y],y),[d]:o.parse(n[y],y)};return g}parseArrayData(t,n,r,s){let{xScale:a,yScale:o}=t,l=new Array(s),d,p,f,g;for(d=0,p=s;d<p;++d)f=d+r,g=n[f],l[d]={x:a.parse(g[0],f),y:o.parse(g[1],f)};return l}parseObjectData(t,n,r,s){let{xScale:a,yScale:o}=t,{xAxisKey:l="x",yAxisKey:d="y"}=this._parsing,p=new Array(s),f,g,m,x;for(f=0,g=s;f<g;++f)m=f+r,x=n[m],p[f]={x:a.parse(qo(x,l),m),y:o.parse(qo(x,d),m)};return p}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,r){let s=this.chart,a=this._cachedMeta,o=n[t.axis],l={keys:PT(s,!0),values:n._stacks[t.axis]};return j5(l,o,a.index,{mode:r})}updateRangeFromParsed(t,n,r,s){let a=r[n.axis],o=a===null?NaN:a,l=s&&r._stacks[n.axis];s&&l&&(s.values=l,o=j5(s,a,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){let r=this._cachedMeta,s=r._parsed,a=r._sorted&&t===r.iScale,o=s.length,l=this._getOtherScale(t),d=AF(n,r,this.chart),p={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:g}=wF(l),m,x;function y(){x=s[m];let S=x[l.axis];return!Qi(x[t.axis])||f>S||g<S}for(m=0;m<o&&!(!y()&&(this.updateRangeFromParsed(p,t,x,d),a));++m);if(a){for(m=o-1;m>=0;--m)if(!y()){this.updateRangeFromParsed(p,t,x,d);break}}return p}getAllParsedValues(t){let n=this._cachedMeta._parsed,r=[],s,a,o;for(s=0,a=n.length;s<a;++s)o=n[s][t.axis],Qi(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(t){let n=this._cachedMeta,r=n.iScale,s=n.vScale,a=this.getParsed(t);return{label:r?""+r.getLabelForValue(a[r.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(t){let n=this._cachedMeta;this.update(t||"default"),n._clip=bF(wn(this.options.clip,xF(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],a=n.chartArea,o=[],l=this._drawStart||0,d=this._drawCount||s.length-l,p=this.options.drawActiveElementsOnTop,f;for(r.dataset&&r.dataset.draw(t,a,l,d),f=l;f<l+d;++f){let g=s[f];g.hidden||(g.active&&p?o.push(g):g.draw(t,a))}for(f=0;f<o.length;++f)o[f].draw(t,a)}getStyle(t,n){let r=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,n,r){let s=this.getDataset(),a;if(t>=0&&t<this._cachedMeta.data.length){let o=this._cachedMeta.data[t];a=o.$context||(o.$context=EF(this.getContext(),t,o)),a.parsed=this.getParsed(t),a.raw=s.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=MF(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!n,a.mode=r,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",r){let s=n==="active",a=this._cachedDataOpts,o=t+"-"+n,l=a[o],d=this.enableOptionSharing&&Ws(r);if(l)return q5(l,d);let p=this.chart.config,f=p.datasetElementScopeKeys(this._type,t),g=s?[`${t}Hover`,"hover",t,""]:[t,""],m=p.getOptionScopes(this.getDataset(),f),x=Object.keys(Rn.elements[t]),y=()=>this.getContext(r,s),S=p.resolveNamedOptions(m,x,y,g);return S.$shared&&(S.$shared=d,a[o]=Object.freeze(q5(S,d))),S}_resolveAnimations(t,n,r){let s=this.chart,a=this._cachedDataOpts,o=`animation-${n}`,l=a[o];if(l)return l;let d;if(s.options.animation!==!1){let f=this.chart.config,g=f.datasetAnimationScopeKeys(this._type,n),m=f.getOptionScopes(this.getDataset(),g);d=f.createResolver(m,this.getContext(t,r,n))}let p=new $g(s,d&&d.animations);return d&&d._cacheable&&(a[o]=Object.freeze(p)),p}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||y2(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){let r=this.resolveDataElementOptions(t,n),s=this._sharedOptions,a=this.getSharedOptions(r),o=this.includeOptions(n,a)||a!==s;return this.updateSharedOptions(a,n,r),{sharedOptions:a,includeOptions:o}}updateElement(t,n,r,s){y2(s)?Object.assign(t,r):this._resolveAnimations(n,s).update(t,r)}updateSharedOptions(t,n,r){t&&!y2(n)&&this._resolveAnimations(void 0,n).update(t,r)}_setStyle(t,n,r,s){t.active=s;let a=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(t,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(t,n,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,n,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let n=this._data,r=this._cachedMeta.data;for(let[l,d,p]of this._syncList)this[l](d,p);this._syncList=[];let s=r.length,a=n.length,o=Math.min(a,s);o&&this.parse(0,o),a>s?this._insertElements(s,a-s,t):a<s&&this._removeElements(a,s-a)}_insertElements(t,n,r=!0){let s=this._cachedMeta,a=s.data,o=t+n,l,d=p=>{for(p.length+=n,l=p.length-1;l>=o;l--)p[l]=p[l-n]};for(d(a),l=t;l<o;++l)a[l]=new this.dataElementType;this._parsing&&d(s._parsed),this.parse(t,n),r&&this.updateElements(a,t,n,"reset")}updateElements(t,n,r,s){}_removeElements(t,n){let r=this._cachedMeta;if(this._parsing){let s=r._parsed.splice(t,n);r._stacked&&pf(r,s)}r.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[n,r,s]=t;this[n](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);let r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return i.defaults={},i})();po.prototype.datasetElementType=null;po.prototype.dataElementType=null;function TF(i,e){if(!i._cache.$bar){let t=i.getMatchingVisibleMetas(e),n=[];for(let r=0,s=t.length;r<s;r++)n=n.concat(t[r].controller.getAllParsedValues(i));i._cache.$bar=Zy(n.sort((r,s)=>r-s))}return i._cache.$bar}function kF(i){let e=i.iScale,t=TF(e,i.type),n=e._length,r,s,a,o,l=()=>{a===32767||a===-32768||(Ws(o)&&(n=Math.min(n,Math.abs(a-o)||n)),o=a)};for(r=0,s=t.length;r<s;++r)a=e.getPixelForValue(t[r]),l();for(o=void 0,r=0,s=e.ticks.length;r<s;++r)a=e.getPixelForTick(r),l();return n}function IF(i,e,t,n){let r=t.barThickness,s,a;return Yn(r)?(s=e.min*t.categoryPercentage,a=t.barPercentage):(s=r*n,a=1),{chunk:s/n,ratio:a,start:e.pixels[i]-s/2}}function DF(i,e,t,n){let r=e.pixels,s=r[i],a=i>0?r[i-1]:null,o=i<r.length-1?r[i+1]:null,l=t.categoryPercentage;a===null&&(a=s-(o===null?e.end-e.start:o-s)),o===null&&(o=s+s-a);let d=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/n,ratio:t.barPercentage,start:d}}function PF(i,e,t,n){let r=t.parse(i[0],n),s=t.parse(i[1],n),a=Math.min(r,s),o=Math.max(r,s),l=a,d=o;Math.abs(a)>Math.abs(o)&&(l=o,d=a),e[t.axis]=d,e._custom={barStart:l,barEnd:d,start:r,end:s,min:a,max:o}}function RT(i,e,t,n){return Ti(i)?PF(i,e,t,n):e[t.axis]=t.parse(i,n),e}function X5(i,e,t,n){let r=i.iScale,s=i.vScale,a=r.getLabels(),o=r===s,l=[],d,p,f,g;for(d=t,p=t+n;d<p;++d)g=e[d],f={},f[r.axis]=o||r.parse(a[d],d),l.push(RT(g,f,s,d));return l}function S2(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function RF(i,e,t){return i!==0?Fa(i):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function LF(i){let e,t,n,r,s;return i.horizontal?(e=i.base>i.x,t="left",n="right"):(e=i.base<i.y,t="bottom",n="top"),e?(r="end",s="start"):(r="start",s="end"),{start:t,end:n,reverse:e,top:r,bottom:s}}function OF(i,e,t,n){let r=e.borderSkipped,s={};if(!r){i.borderSkipped=s;return}if(r===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:a,end:o,reverse:l,top:d,bottom:p}=LF(i);r==="middle"&&t&&(i.enableBorderRadius=!0,(t._top||0)===n?r=d:(t._bottom||0)===n?r=p:(s[Y5(p,a,o,l)]=!0,r=d)),s[Y5(r,a,o,l)]=!0,i.borderSkipped=s}function Y5(i,e,t,n){return n?(i=NF(i,e,t),i=$5(i,t,e)):i=$5(i,e,t),i}function NF(i,e,t){return i===e?t:i===t?e:i}function $5(i,e,t){return i==="start"?e:i==="end"?t:i}function FF(i,{inflateAmount:e},t){i.inflateAmount=e==="auto"?t===1?.33:0:e}var BF=(()=>{class i extends po{parsePrimitiveData(t,n,r,s){return X5(t,n,r,s)}parseArrayData(t,n,r,s){return X5(t,n,r,s)}parseObjectData(t,n,r,s){let{iScale:a,vScale:o}=t,{xAxisKey:l="x",yAxisKey:d="y"}=this._parsing,p=a.axis==="x"?l:d,f=o.axis==="x"?l:d,g=[],m,x,y,S;for(m=r,x=r+s;m<x;++m)S=n[m],y={},y[a.axis]=a.parse(qo(S,p),m),g.push(RT(qo(S,f),y,o,m));return g}updateRangeFromParsed(t,n,r,s){super.updateRangeFromParsed(t,n,r,s);let a=r._custom;a&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,a.min),t.max=Math.max(t.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let n=this._cachedMeta,{iScale:r,vScale:s}=n,a=this.getParsed(t),o=a._custom,l=S2(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(a[s.axis]);return{label:""+r.getLabelForValue(a[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,r,s){let a=s==="reset",{index:o,_cachedMeta:{vScale:l}}=this,d=l.getBasePixel(),p=l.isHorizontal(),f=this._getRuler(),{sharedOptions:g,includeOptions:m}=this._getSharedOptions(n,s);for(let x=n;x<n+r;x++){let y=this.getParsed(x),S=a||Yn(y[l.axis])?{base:d,head:d}:this._calculateBarValuePixels(x),b=this._calculateBarIndexPixels(x,f),M=(y._stacks||{})[l.axis],T={horizontal:p,base:S.base,enableBorderRadius:!M||S2(y._custom)||o===M._top||o===M._bottom,x:p?S.head:b.center,y:p?b.center:S.head,height:p?b.size:Math.abs(S.size),width:p?Math.abs(S.size):b.size};m&&(T.options=g||this.resolveDataElementOptions(x,t[x].active?"active":s));let k=T.options||t[x].options;OF(T,k,M,o),FF(T,k,f.ratio),this.updateElement(t[x],x,T,s)}}_getStacks(t,n){let{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),a=r.options.stacked,o=[],l=d=>{let p=d.controller.getParsed(n),f=p&&p[d.vScale.axis];if(Yn(f)||isNaN(f))return!0};for(let d of s)if(!(n!==void 0&&l(d))&&((a===!1||o.indexOf(d.stack)===-1||a===void 0&&d.stack===void 0)&&o.push(d.stack),d.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,r){let s=this._getStacks(t,r),a=n!==void 0?s.indexOf(n):-1;return a===-1?s.length-1:a}_getRuler(){let t=this.options,n=this._cachedMeta,r=n.iScale,s=[],a,o;for(a=0,o=n.data.length;a<o;++a)s.push(r.getPixelForValue(this.getParsed(a)[r.axis],a));let l=t.barThickness;return{min:l||kF(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:n,_stacked:r},options:{base:s,minBarLength:a}}=this,o=s||0,l=this.getParsed(t),d=l._custom,p=S2(d),f=l[n.axis],g=0,m=r?this.applyStack(n,l,r):f,x,y;m!==f&&(g=m-f,m=f),p&&(f=d.barStart,m=d.barEnd-d.barStart,f!==0&&Fa(f)!==Fa(d.barEnd)&&(g=0),g+=f);let S=!Yn(s)&&!p?s:g,b=n.getPixelForValue(S);if(this.chart.getDataVisibility(t)?x=n.getPixelForValue(g+m):x=b,y=x-b,Math.abs(y)<a){y=RF(y,n,o)*a,f===o&&(b-=y/2);let M=n.getPixelForDecimal(0),T=n.getPixelForDecimal(1),k=Math.min(M,T),L=Math.max(M,T);b=Math.max(Math.min(b,L),k),x=b+y}if(b===n.getPixelForValue(o)){let M=Fa(y)*n.getLineWidthForValue(o)/2;b+=M,y-=M}return{size:y,base:b,head:x,center:x+y/2}}_calculateBarIndexPixels(t,n){let r=n.scale,s=this.options,a=s.skipNull,o=wn(s.maxBarThickness,1/0),l,d;if(n.grouped){let p=a?this._getStackCount(t):n.stackCount,f=s.barThickness==="flex"?DF(t,n,s,p):IF(t,n,s,p),g=this._getStackIndex(this.index,this._cachedMeta.stack,a?t:void 0);l=f.start+f.chunk*g+f.chunk/2,d=Math.min(o,f.chunk*f.ratio)}else l=r.getPixelForValue(this.getParsed(t)[r.axis],t),d=Math.min(o,n.min*n.ratio);return{base:l-d/2,head:l+d/2,center:l,size:d}}draw(){let t=this._cachedMeta,n=t.vScale,r=t.data,s=r.length,a=0;for(;a<s;++a)this.getParsed(a)[n.axis]!==null&&r[a].draw(this._ctx)}}return i.id="bar",i.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},i.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},i})(),VF=(()=>{class i extends po{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,r,s){let a=super.parsePrimitiveData(t,n,r,s);for(let o=0;o<a.length;o++)a[o]._custom=this.resolveDataElementOptions(o+r).radius;return a}parseArrayData(t,n,r,s){let a=super.parseArrayData(t,n,r,s);for(let o=0;o<a.length;o++){let l=n[r+o];a[o]._custom=wn(l[2],this.resolveDataElementOptions(o+r).radius)}return a}parseObjectData(t,n,r,s){let a=super.parseObjectData(t,n,r,s);for(let o=0;o<a.length;o++){let l=n[r+o];a[o]._custom=wn(l&&l.r&&+l.r,this.resolveDataElementOptions(o+r).radius)}return a}getMaxOverflow(){let t=this._cachedMeta.data,n=0;for(let r=t.length-1;r>=0;--r)n=Math.max(n,t[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(t){let n=this._cachedMeta,{xScale:r,yScale:s}=n,a=this.getParsed(t),o=r.getLabelForValue(a.x),l=s.getLabelForValue(a.y),d=a._custom;return{label:n.label,value:"("+o+", "+l+(d?", "+d:"")+")"}}update(t){let n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,r,s){let a=s==="reset",{iScale:o,vScale:l}=this._cachedMeta,{sharedOptions:d,includeOptions:p}=this._getSharedOptions(n,s),f=o.axis,g=l.axis;for(let m=n;m<n+r;m++){let x=t[m],y=!a&&this.getParsed(m),S={},b=S[f]=a?o.getPixelForDecimal(.5):o.getPixelForValue(y[f]),M=S[g]=a?l.getBasePixel():l.getPixelForValue(y[g]);S.skip=isNaN(b)||isNaN(M),p&&(S.options=d||this.resolveDataElementOptions(m,x.active?"active":s),a&&(S.options.radius=0)),this.updateElement(x,m,S,s)}}resolveDataElementOptions(t,n){let r=this.getParsed(t),s=super.resolveDataElementOptions(t,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let a=s.radius;return n!=="active"&&(s.radius=0),s.radius+=wn(r&&r._custom,a),s}}return i.id="bubble",i.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},i.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}},i})();function UF(i,e,t){let n=1,r=1,s=0,a=0;if(e<fi){let o=i,l=o+e,d=Math.cos(o),p=Math.sin(o),f=Math.cos(l),g=Math.sin(l),m=(T,k,L)=>Nu(T,o,l,!0)?1:Math.max(k,k*t,L,L*t),x=(T,k,L)=>Nu(T,o,l,!0)?-1:Math.min(k,k*t,L,L*t),y=m(0,d,f),S=m(Gi,p,g),b=x(Oi,d,f),M=x(Oi+Gi,p,g);n=(y-b)/2,r=(S-M)/2,s=-(y+b)/2,a=-(S+M)/2}return{ratioX:n,ratioY:r,offsetX:s,offsetY:a}}var LT=(()=>{class i extends po{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){let r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let a=d=>+r[d];if(Bn(r[t])){let{key:d="value"}=this._parsing;a=p=>+qo(r[p],d)}let o,l;for(o=t,l=t+n;o<l;++o)s._parsed[o]=a(o)}}_getRotation(){return _a(this.options.rotation-90)}_getCircumference(){return _a(this.options.circumference)}_getRotationExtents(){let t=fi,n=-fi;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)){let s=this.chart.getDatasetMeta(r).controller,a=s._getRotation(),o=s._getCircumference();t=Math.min(t,a),n=Math.max(n,a+o)}return{rotation:t,circumference:n-t}}update(t){let n=this.chart,{chartArea:r}=n,s=this._cachedMeta,a=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-o)/2,0),d=Math.min(l5(this.options.cutout,l),1),p=this._getRingWeight(this.index),{circumference:f,rotation:g}=this._getRotationExtents(),{ratioX:m,ratioY:x,offsetX:y,offsetY:S}=UF(g,f,d),b=(r.width-o)/m,M=(r.height-o)/x,T=Math.max(Math.min(b,M)/2,0),k=Wy(this.options.radius,T),L=Math.max(k*d,0),U=(k-L)/this._getVisibleDatasetWeightTotal();this.offsetX=y*k,this.offsetY=S*k,s.total=this.calculateTotal(),this.outerRadius=k-U*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-U*p,0),this.updateElements(a,0,a.length,t)}_circumference(t,n){let r=this.options,s=this._cachedMeta,a=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*a/fi)}updateElements(t,n,r,s){let a=s==="reset",o=this.chart,l=o.chartArea,p=o.options.animation,f=(l.left+l.right)/2,g=(l.top+l.bottom)/2,m=a&&p.animateScale,x=m?0:this.innerRadius,y=m?0:this.outerRadius,{sharedOptions:S,includeOptions:b}=this._getSharedOptions(n,s),M=this._getRotation(),T;for(T=0;T<n;++T)M+=this._circumference(T,a);for(T=n;T<n+r;++T){let k=this._circumference(T,a),L=t[T],U={x:f+this.offsetX,y:g+this.offsetY,startAngle:M,endAngle:M+k,circumference:k,outerRadius:y,innerRadius:x};b&&(U.options=S||this.resolveDataElementOptions(T,L.active?"active":s)),M+=k,this.updateElement(L,T,U,s)}}calculateTotal(){let t=this._cachedMeta,n=t.data,r=0,s;for(s=0;s<n.length;s++){let a=t._parsed[s];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(a))}return r}calculateCircumference(t){let n=this._cachedMeta.total;return n>0&&!isNaN(t)?fi*(Math.abs(t)/n):0}getLabelAndValue(t){let n=this._cachedMeta,r=this.chart,s=r.data.labels||[],a=Vu(n._parsed[t],r.options.locale);return{label:s[t]||"",value:a}}getMaxBorderWidth(t){let n=0,r=this.chart,s,a,o,l,d;if(!t){for(s=0,a=r.data.datasets.length;s<a;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),t=o.data,l=o.controller;break}}if(!t)return 0;for(s=0,a=t.length;s<a;++s)d=l.resolveDataElementOptions(s),d.borderAlign!=="inner"&&(n=Math.max(n,d.borderWidth||0,d.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let r=0,s=t.length;r<s;++r){let a=this.resolveDataElementOptions(r);n=Math.max(n,a.offset||0,a.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(t){return Math.max(wn(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return i.id="doughnut",i.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},i.descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"},i.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data;if(t.labels.length&&t.datasets.length){let{labels:{pointStyle:n}}=e.legend.options;return t.labels.map((r,s)=>{let o=e.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title(){return""},label(e){let t=e.label,n=": "+e.formattedValue;return Ti(t)?(t=t.slice(),t[0]+=n):t+=n,t}}}}},i})(),zF=(()=>{class i extends po{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let n=this._cachedMeta,{dataset:r,data:s=[],_dataset:a}=n,o=this.chart._animationsDisabled,{start:l,count:d}=t2(n,s,o);this._drawStart=l,this._drawCount=d,e2(n)&&(l=0,d=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!a._decimated,r.points=s;let p=this.resolveDatasetElementOptions(t);this.options.showLine||(p.borderWidth=0),p.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:p},t),this.updateElements(s,l,d,t)}updateElements(t,n,r,s){let a=s==="reset",{iScale:o,vScale:l,_stacked:d,_dataset:p}=this._cachedMeta,{sharedOptions:f,includeOptions:g}=this._getSharedOptions(n,s),m=o.axis,x=l.axis,{spanGaps:y,segment:S}=this.options,b=hd(y)?y:Number.POSITIVE_INFINITY,M=this.chart._animationsDisabled||a||s==="none",T=n>0&&this.getParsed(n-1);for(let k=n;k<n+r;++k){let L=t[k],U=this.getParsed(k),N=M?L:{},F=Yn(U[x]),O=N[m]=o.getPixelForValue(U[m],k),B=N[x]=a||F?l.getBasePixel():l.getPixelForValue(d?this.applyStack(l,U,d):U[x],k);N.skip=isNaN(O)||isNaN(B)||F,N.stop=k>0&&Math.abs(U[m]-T[m])>b,S&&(N.parsed=U,N.raw=p.data[k]),g&&(N.options=f||this.resolveDataElementOptions(k,L.active?"active":s)),M||this.updateElement(L,k,N,s),T=U}}getMaxOverflow(){let t=this._cachedMeta,n=t.dataset,r=n.options&&n.options.borderWidth||0,s=t.data||[];if(!s.length)return r;let a=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,a,o)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return i.id="line",i.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},i.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},i})(),jF=(()=>{class i extends po{constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let n=this._cachedMeta,r=this.chart,s=r.data.labels||[],a=Vu(n._parsed[t].r,r.options.locale);return{label:s[t]||"",value:a}}parseObjectData(t,n,r,s){return h2.bind(this)(t,n,r,s)}update(t){let n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){let t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((r,s)=>{let a=this.getParsed(s).r;!isNaN(a)&&this.chart.getDataVisibility(s)&&(a<n.min&&(n.min=a),a>n.max&&(n.max=a))}),n}_updateRadius(){let t=this.chart,n=t.chartArea,r=t.options,s=Math.min(n.right-n.left,n.bottom-n.top),a=Math.max(s/2,0),o=Math.max(r.cutoutPercentage?a/100*r.cutoutPercentage:1,0),l=(a-o)/t.getVisibleDatasetCount();this.outerRadius=a-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(t,n,r,s){let a=s==="reset",o=this.chart,d=o.options.animation,p=this._cachedMeta.rScale,f=p.xCenter,g=p.yCenter,m=p.getIndexAngle(0)-.5*Oi,x=m,y,S=360/this.countVisibleElements();for(y=0;y<n;++y)x+=this._computeAngle(y,s,S);for(y=n;y<n+r;y++){let b=t[y],M=x,T=x+this._computeAngle(y,s,S),k=o.getDataVisibility(y)?p.getDistanceFromCenterForValue(this.getParsed(y).r):0;x=T,a&&(d.animateScale&&(k=0),d.animateRotate&&(M=T=m));let L={x:f,y:g,innerRadius:0,outerRadius:k,startAngle:M,endAngle:T,options:this.resolveDataElementOptions(y,b.active?"active":s)};this.updateElement(b,y,L,s)}}countVisibleElements(){let t=this._cachedMeta,n=0;return t.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(t,n,r){return this.chart.getDataVisibility(t)?_a(this.resolveDataElementOptions(t,n).angle||r):0}}return i.id="polarArea",i.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},i.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data;if(t.labels.length&&t.datasets.length){let{labels:{pointStyle:n}}=e.legend.options;return t.labels.map((r,s)=>{let o=e.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title(){return""},label(e){return e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},i})(),HF=(()=>{class i extends LT{}return i.id="pie",i.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},i})(),WF=(()=>{class i extends po{getLabelAndValue(t){let n=this._cachedMeta.vScale,r=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(t,n,r,s){return h2.bind(this)(t,n,r,s)}update(t){let n=this._cachedMeta,r=n.dataset,s=n.data||[],a=n.iScale.getLabels();if(r.points=s,t!=="resize"){let o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);let l={_loop:!0,_fullLoop:a.length===s.length,options:o};this.updateElement(r,void 0,l,t)}this.updateElements(s,0,s.length,t)}updateElements(t,n,r,s){let a=this._cachedMeta.rScale,o=s==="reset";for(let l=n;l<n+r;l++){let d=t[l],p=this.resolveDataElementOptions(l,d.active?"active":s),f=a.getPointPositionForValue(l,this.getParsed(l).r),g=o?a.xCenter:f.x,m=o?a.yCenter:f.y,x={x:g,y:m,angle:f.angle,skip:isNaN(g)||isNaN(m),options:p};this.updateElement(d,l,x,s)}}}return i.id="radar",i.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},i.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},i})(),Xs=class{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){let{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return hd(this.x)&&hd(this.y)}getProps(e,t){let n=this.$animations;if(!t||!n)return this;let r={};return e.forEach(s=>{r[s]=n[s]&&n[s].active()?n[s]._to:this[s]}),r}};Xs.defaults={};Xs.defaultRoutes=void 0;var OT={values(i){return Ti(i)?i:""+i},numeric(i,e,t){if(i===0)return"0";let n=this.chart.options.locale,r,s=i;if(t.length>1){let d=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),s=GF(i,t)}let a=qs(Math.abs(s)),o=Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Vu(i,n,l)},logarithmic(i,e,t){if(i===0)return"0";let n=i/Math.pow(10,Math.floor(qs(i)));return n===1||n===2||n===5?OT.numeric.call(this,i,e,t):""}};function GF(i,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&i!==Math.floor(i)&&(t=i-Math.floor(i)),t}var e_={formatters:OT};Rn.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(i,e)=>e.lineWidth,tickColor:(i,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:e_.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});Rn.route("scale.ticks","color","","color");Rn.route("scale.grid","color","","borderColor");Rn.route("scale.grid","borderColor","","borderColor");Rn.route("scale.title","color","","color");Rn.describe("scale",{_fallback:!1,_scriptable:i=>!i.startsWith("before")&&!i.startsWith("after")&&i!=="callback"&&i!=="parser",_indexable:i=>i!=="borderDash"&&i!=="tickBorderDash"});Rn.describe("scales",{_fallback:"scale"});Rn.describe("scale.ticks",{_scriptable:i=>i!=="backdropPadding"&&i!=="callback",_indexable:i=>i!=="backdropPadding"});function qF(i,e){let t=i.options.ticks,n=t.maxTicksLimit||XF(i),r=t.major.enabled?$F(e):[],s=r.length,a=r[0],o=r[s-1],l=[];if(s>n)return KF(e,l,r,s/n),l;let d=YF(r,e,n);if(s>0){let p,f,g=s>1?Math.round((o-a)/(s-1)):null;for(jg(e,l,d,Yn(g)?0:a-g,a),p=0,f=s-1;p<f;p++)jg(e,l,d,r[p],r[p+1]);return jg(e,l,d,o,Yn(g)?e.length:o+g),l}return jg(e,l,d),l}function XF(i){let e=i.options.offset,t=i._tickSize(),n=i._length/t+(e?0:1),r=i._maxLength/t;return Math.floor(Math.min(n,r))}function YF(i,e,t){let n=ZF(i),r=e.length/t;if(!n)return Math.max(r,1);let s=u5(n);for(let a=0,o=s.length-1;a<o;a++){let l=s[a];if(l>r)return l}return Math.max(r,1)}function $F(i){let e=[],t,n;for(t=0,n=i.length;t<n;t++)i[t].major&&e.push(t);return e}function KF(i,e,t,n){let r=0,s=t[0],a;for(n=Math.ceil(n),a=0;a<i.length;a++)a===s&&(e.push(i[a]),r++,s=t[r*n])}function jg(i,e,t,n,r){let s=wn(n,0),a=Math.min(wn(r,i.length),i.length),o=0,l,d,p;for(t=Math.ceil(t),r&&(l=r-n,t=l/Math.floor(l/t)),p=s;p<0;)o++,p=Math.round(s+o*t);for(d=Math.max(s,0);d<a;d++)d===p&&(e.push(i[d]),o++,p=Math.round(s+o*t))}function ZF(i){let e=i.length,t,n;if(e<2)return!1;for(n=i[0],t=1;t<e;++t)if(i[t]-i[t-1]!==n)return!1;return n}var JF=i=>i==="left"?"right":i==="right"?"left":i,K5=(i,e,t)=>e==="top"||e==="left"?i[e]+t:i[e]-t;function Z5(i,e){let t=[],n=i.length/e,r=i.length,s=0;for(;s<r;s+=n)t.push(i[Math.floor(s)]);return t}function QF(i,e,t){let n=i.ticks.length,r=Math.min(e,n-1),s=i._startPixel,a=i._endPixel,o=1e-6,l=i.getPixelForTick(r),d;if(!(t&&(n===1?d=Math.max(l-s,a-l):e===0?d=(i.getPixelForTick(1)-l)/2:d=(l-i.getPixelForTick(r-1))/2,l+=r<e?d:-d,l<s-o||l>a+o)))return l}function t6(i,e){li(i,t=>{let n=t.gc,r=n.length/2,s;if(r>e){for(s=0;s<r;++s)delete t.data[n[s]];n.splice(0,r)}})}function ff(i){return i.drawTicks?i.tickLength:0}function J5(i,e){if(!i.display)return 0;let t=xr(i.font,e),n=Gr(i.padding);return(Ti(i.text)?i.text.length:1)*t.lineHeight+n.height}function e6(i,e){return Xo(i,{scale:e,type:"scale"})}function n6(i,e,t){return Xo(i,{tick:t,index:e,type:"tick"})}function i6(i,e,t){let n=Og(i);return(t&&e!=="right"||!t&&e==="right")&&(n=JF(n)),n}function r6(i,e,t,n){let{top:r,left:s,bottom:a,right:o,chart:l}=i,{chartArea:d,scales:p}=l,f=0,g,m,x,y=a-r,S=o-s;if(i.isHorizontal()){if(m=Wr(n,s,o),Bn(t)){let b=Object.keys(t)[0],M=t[b];x=p[b].getPixelForValue(M)+y-e}else t==="center"?x=(d.bottom+d.top)/2+y-e:x=K5(i,t,e);g=o-s}else{if(Bn(t)){let b=Object.keys(t)[0],M=t[b];m=p[b].getPixelForValue(M)-S+e}else t==="center"?m=(d.left+d.right)/2-S+e:m=K5(i,t,e);x=Wr(n,a,r),f=t==="left"?-Gi:Gi}return{titleX:m,titleY:x,maxWidth:g,rotation:f}}var md=class i extends Xs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=Gs(e,Number.POSITIVE_INFINITY),t=Gs(t,Number.NEGATIVE_INFINITY),n=Gs(n,Number.POSITIVE_INFINITY),r=Gs(r,Number.NEGATIVE_INFINITY),{min:Gs(e,n),max:Gs(t,r),minDefined:Qi(e),maxDefined:Qi(t)}}getMinMax(e){let{min:t,max:n,minDefined:r,maxDefined:s}=this.getUserBounds(),a;if(r&&s)return{min:t,max:n};let o=this.getMatchingVisibleMetas();for(let l=0,d=o.length;l<d;++l)a=o[l].controller.getMinMax(this,e),r||(t=Math.min(t,a.min)),s||(n=Math.max(n,a.max));return t=s&&t>n?n:t,n=r&&t>n?t:n,{min:Gs(t,Gs(n,t)),max:Gs(n,Gs(t,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ki(this.options.beforeUpdate,[this])}update(e,t,n){let{beginAtZero:r,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=T5(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=o<this.ticks.length;this._convertTicksToLabels(l?Z5(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=qF(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,n;this.isHorizontal()?(t=this.left,n=this.right):(t=this.top,n=this.bottom,e=!e),this._startPixel=t,this._endPixel=n,this._reversePixels=e,this._length=n-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ki(this.options.afterUpdate,[this])}beforeSetDimensions(){ki(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ki(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ki(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ki(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,n,r,s;for(n=0,r=e.length;n<r;n++)s=e[n],s.label=ki(t.callback,[s.value,n,e],this)}afterTickToLabelConversion(){ki(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ki(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,n=this.ticks.length,r=t.minRotation||0,s=t.maxRotation,a=r,o,l,d;if(!this._isVisible()||!t.display||r>=s||n<=1||!this.isHorizontal()){this.labelRotation=r;return}let p=this._getLabelSizes(),f=p.widest.width,g=p.highest.height,m=Mr(this.chart.width-f,0,this.maxWidth);o=e.offset?this.maxWidth/n:m/(n-1),f+6>o&&(o=m/(n-(e.offset?.5:1)),l=this.maxHeight-ff(e.grid)-t.padding-J5(e.title,this.chart.options.font),d=Math.sqrt(f*f+g*g),a=Rg(Math.min(Math.asin(Mr((p.highest.height+6)/o,-1,1)),Math.asin(Mr(l/d,-1,1))-Math.asin(Mr(g/d,-1,1)))),a=Math.max(r,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){ki(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ki(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){let l=J5(r,t.options.font);if(o?(e.width=this.maxWidth,e.height=ff(s)+l):(e.height=this.maxHeight,e.width=ff(s)+l),n.display&&this.ticks.length){let{first:d,last:p,widest:f,highest:g}=this._getLabelSizes(),m=n.padding*2,x=_a(this.labelRotation),y=Math.cos(x),S=Math.sin(x);if(o){let b=n.mirror?0:S*f.width+y*g.height;e.height=Math.min(this.maxHeight,e.height+b+m)}else{let b=n.mirror?0:y*f.width+S*g.height;e.width=Math.min(this.maxWidth,e.width+b+m)}this._calculatePadding(d,p,S,y)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){let{ticks:{align:s,padding:a},position:o}=this.options,l=this.labelRotation!==0,d=o!=="top"&&this.axis==="x";if(this.isHorizontal()){let p=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1),g=0,m=0;l?d?(g=r*e.width,m=n*t.height):(g=n*e.height,m=r*t.width):s==="start"?m=t.width:s==="end"?g=e.width:s!=="inner"&&(g=e.width/2,m=t.width/2),this.paddingLeft=Math.max((g-p+a)*this.width/(this.width-p),0),this.paddingRight=Math.max((m-f+a)*this.width/(this.width-f),0)}else{let p=t.height/2,f=e.height/2;s==="start"?(p=0,f=e.height):s==="end"&&(p=t.height,f=0),this.paddingTop=p+a,this.paddingBottom=f+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ki(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,n;for(t=0,n=e.length;t<n;t++)Yn(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,n=this.ticks;t<n.length&&(n=Z5(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length)}return e}_computeLabelSizes(e,t){let{ctx:n,_longestTextCache:r}=this,s=[],a=[],o=0,l=0,d,p,f,g,m,x,y,S,b,M,T;for(d=0;d<t;++d){if(g=e[d].label,m=this._resolveTickFontOptions(d),n.font=x=m.string,y=r[x]=r[x]||{data:{},gc:[]},S=m.lineHeight,b=M=0,!Yn(g)&&!Ti(g))b=lf(n,y.data,y.gc,b,g),M=S;else if(Ti(g))for(p=0,f=g.length;p<f;++p)T=g[p],!Yn(T)&&!Ti(T)&&(b=lf(n,y.data,y.gc,b,T),M+=S);s.push(b),a.push(M),o=Math.max(b,o),l=Math.max(M,l)}t6(r,t);let k=s.indexOf(o),L=a.indexOf(l),U=N=>({width:s[N]||0,height:a[N]||0});return{first:U(0),last:U(t-1),widest:U(k),highest:U(L),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return p5(this._alignToPixels?tc(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let n=t[e];return n.$context||(n.$context=n6(this.getContext(),e,n))}return this.$context||(this.$context=e6(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=_a(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),a=e.autoSkipPadding||0,o=s?s.widest.width+a:0,l=s?s.highest.height+a:0;return this.isHorizontal()?l*n>o*r?o/n:l/r:l*r<o*n?l/n:o/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,n=this.chart,r=this.options,{grid:s,position:a}=r,o=s.offset,l=this.isHorizontal(),p=this.ticks.length+(o?1:0),f=ff(s),g=[],m=s.setContext(this.getContext()),x=m.drawBorder?m.borderWidth:0,y=x/2,S=function(ct){return tc(n,ct,x)},b,M,T,k,L,U,N,F,O,B,P,V;if(a==="top")b=S(this.bottom),U=this.bottom-f,F=b-y,B=S(e.top)+y,V=e.bottom;else if(a==="bottom")b=S(this.top),B=e.top,V=S(e.bottom)-y,U=b+y,F=this.top+f;else if(a==="left")b=S(this.right),L=this.right-f,N=b-y,O=S(e.left)+y,P=e.right;else if(a==="right")b=S(this.left),O=e.left,P=S(e.right)-y,L=b+y,N=this.left+f;else if(t==="x"){if(a==="center")b=S((e.top+e.bottom)/2+.5);else if(Bn(a)){let ct=Object.keys(a)[0],ot=a[ct];b=S(this.chart.scales[ct].getPixelForValue(ot))}B=e.top,V=e.bottom,U=b+y,F=U+f}else if(t==="y"){if(a==="center")b=S((e.left+e.right)/2);else if(Bn(a)){let ct=Object.keys(a)[0],ot=a[ct];b=S(this.chart.scales[ct].getPixelForValue(ot))}L=b-y,N=L-f,O=e.left,P=e.right}let $=wn(r.ticks.maxTicksLimit,p),K=Math.max(1,Math.ceil(p/$));for(M=0;M<p;M+=K){let ct=s.setContext(this.getContext(M)),ot=ct.lineWidth,st=ct.color,Q=ct.borderDash||[],xt=ct.borderDashOffset,Mt=ct.tickWidth,qt=ct.tickColor,z=ct.tickBorderDash||[],it=ct.tickBorderDashOffset;T=QF(this,M,o),T!==void 0&&(k=tc(n,T,ot),l?L=N=O=P=k:U=F=B=V=k,g.push({tx1:L,ty1:U,tx2:N,ty2:F,x1:O,y1:B,x2:P,y2:V,width:ot,color:st,borderDash:Q,borderDashOffset:xt,tickWidth:Mt,tickColor:qt,tickBorderDash:z,tickBorderDashOffset:it}))}return this._ticksLength=p,this._borderValue=b,g}_computeLabelItems(e){let t=this.axis,n=this.options,{position:r,ticks:s}=n,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:d,padding:p,mirror:f}=s,g=ff(n.grid),m=g+p,x=f?-p:m,y=-_a(this.labelRotation),S=[],b,M,T,k,L,U,N,F,O,B,P,V,$="middle";if(r==="top")U=this.bottom-x,N=this._getXAxisLabelAlignment();else if(r==="bottom")U=this.top+x,N=this._getXAxisLabelAlignment();else if(r==="left"){let ct=this._getYAxisLabelAlignment(g);N=ct.textAlign,L=ct.x}else if(r==="right"){let ct=this._getYAxisLabelAlignment(g);N=ct.textAlign,L=ct.x}else if(t==="x"){if(r==="center")U=(e.top+e.bottom)/2+m;else if(Bn(r)){let ct=Object.keys(r)[0],ot=r[ct];U=this.chart.scales[ct].getPixelForValue(ot)+m}N=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")L=(e.left+e.right)/2-m;else if(Bn(r)){let ct=Object.keys(r)[0],ot=r[ct];L=this.chart.scales[ct].getPixelForValue(ot)}N=this._getYAxisLabelAlignment(g).textAlign}t==="y"&&(l==="start"?$="top":l==="end"&&($="bottom"));let K=this._getLabelSizes();for(b=0,M=o.length;b<M;++b){T=o[b],k=T.label;let ct=s.setContext(this.getContext(b));F=this.getPixelForTick(b)+s.labelOffset,O=this._resolveTickFontOptions(b),B=O.lineHeight,P=Ti(k)?k.length:1;let ot=P/2,st=ct.color,Q=ct.textStrokeColor,xt=ct.textStrokeWidth,Mt=N;a?(L=F,N==="inner"&&(b===M-1?Mt=this.options.reverse?"left":"right":b===0?Mt=this.options.reverse?"right":"left":Mt="center"),r==="top"?d==="near"||y!==0?V=-P*B+B/2:d==="center"?V=-K.highest.height/2-ot*B+B:V=-K.highest.height+B/2:d==="near"||y!==0?V=B/2:d==="center"?V=K.highest.height/2-ot*B:V=K.highest.height-P*B,f&&(V*=-1)):(U=F,V=(1-P)*B/2);let qt;if(ct.showLabelBackdrop){let z=Gr(ct.backdropPadding),it=K.heights[b],Z=K.widths[b],at=U+V-z.top,pt=L-z.left;switch($){case"middle":at-=it/2;break;case"bottom":at-=it;break}switch(N){case"center":pt-=Z/2;break;case"right":pt-=Z;break}qt={left:pt,top:at,width:Z+z.width,height:it+z.height,color:ct.backdropColor}}S.push({rotation:y,label:k,font:O,color:st,strokeColor:Q,strokeWidth:xt,textOffset:V,textAlign:Mt,textBaseline:$,translation:[L,U],backdrop:qt})}return S}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-_a(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,a=this._getLabelSizes(),o=e+s,l=a.widest.width,d,p;return t==="left"?r?(p=this.right+s,n==="near"?d="left":n==="center"?(d="center",p+=l/2):(d="right",p+=l)):(p=this.right-o,n==="near"?d="right":n==="center"?(d="center",p-=l/2):(d="left",p=this.left)):t==="right"?r?(p=this.left+s,n==="near"?d="right":n==="center"?(d="center",p-=l/2):(d="left",p-=l)):(p=this.left+o,n==="near"?d="left":n==="center"?(d="center",p+=l/2):(d="right",p=this.right)):d="right",{textAlign:d,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:n,top:r,width:s,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,s,a),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,a,o=(l,d,p)=>{!p.width||!p.color||(n.save(),n.lineWidth=p.width,n.strokeStyle=p.color,n.setLineDash(p.borderDash||[]),n.lineDashOffset=p.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(t.display)for(s=0,a=r.length;s<a;++s){let l=r[s];t.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{grid:n}}=this,r=n.setContext(this.getContext()),s=n.drawBorder?r.borderWidth:0;if(!s)return;let a=n.setContext(this.getContext(0)).lineWidth,o=this._borderValue,l,d,p,f;this.isHorizontal()?(l=tc(e,this.left,s)-s/2,d=tc(e,this.right,a)+a/2,p=f=o):(p=tc(e,this.top,s)-s/2,f=tc(e,this.bottom,a)+a/2,l=d=o),t.save(),t.lineWidth=r.borderWidth,t.strokeStyle=r.borderColor,t.beginPath(),t.moveTo(l,p),t.lineTo(d,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let n=this.ctx,r=this._computeLabelArea();r&&uf(n,r);let s=this._labelItems||(this._labelItems=this._computeLabelItems(e)),a,o;for(a=0,o=s.length;a<o;++a){let l=s[a],d=l.font,p=l.label;l.backdrop&&(n.fillStyle=l.backdrop.color,n.fillRect(l.backdrop.left,l.backdrop.top,l.backdrop.width,l.backdrop.height));let f=l.textOffset;ec(n,p,0,f,d,l)}r&&hf(n)}drawTitle(){let{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;let s=xr(n.font),a=Gr(n.padding),o=n.align,l=s.lineHeight/2;t==="bottom"||t==="center"||Bn(t)?(l+=a.bottom,Ti(n.text)&&(l+=s.lineHeight*(n.text.length-1))):l+=a.top;let{titleX:d,titleY:p,maxWidth:f,rotation:g}=r6(this,l,t,o);ec(e,n.text,0,0,s,{color:n.color,maxWidth:f,rotation:g,textAlign:i6(o,t,r),textBaseline:"middle",translation:[d,p]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,n=wn(e.grid&&e.grid.z,-1);return!this._isVisible()||this.draw!==i.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[],s,a;for(s=0,a=t.length;s<a;++s){let o=t[s];o[n]===this.id&&(!e||o.type===e)&&r.push(o)}return r}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return xr(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},zu=class{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),n;o6(t)&&(n=this.register(t));let r=this.items,s=e.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,s6(e,a,n),this.override&&Rn.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){let t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in Rn[r]&&(delete Rn[r][n],this.override&&delete Ql[n])}};function s6(i,e,t){let n=Du(Object.create(null),[t?Rn.get(t):{},Rn.get(e),i.defaults]);Rn.set(e,n),i.defaultRoutes&&a6(e,i.defaultRoutes),i.descriptors&&Rn.describe(e,i.descriptors)}function a6(i,e){Object.keys(e).forEach(t=>{let n=t.split("."),r=n.pop(),s=[i].concat(n).join("."),a=e[t].split("."),o=a.pop(),l=a.join(".");Rn.route(s,r,l,o)})}function o6(i){return"id"in i&&"defaults"in i}var D2=class{constructor(){this.controllers=new zu(po,"datasets",!0),this.elements=new zu(Xs,"elements"),this.plugins=new zu(Object,"plugins"),this.scales=new zu(md,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach(r=>{let s=n||this._getRegistryForType(r);n||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):li(r,a=>{let o=n||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,t,n){let r=Pg(e);ki(n["before"+r],[],n),t[e](n),ki(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){let r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}},ho=new D2,l6=(()=>{class i extends po{update(t){let n=this._cachedMeta,{data:r=[]}=n,s=this.chart._animationsDisabled,{start:a,count:o}=t2(n,r,s);if(this._drawStart=a,this._drawCount=o,e2(n)&&(a=0,o=r.length),this.options.showLine){let{dataset:l,_dataset:d}=n;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!d._decimated,l.points=r;let p=this.resolveDatasetElementOptions(t);p.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:p},t)}this.updateElements(r,a,o,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=ho.getElement("line")),super.addElements()}updateElements(t,n,r,s){let a=s==="reset",{iScale:o,vScale:l,_stacked:d,_dataset:p}=this._cachedMeta,f=this.resolveDataElementOptions(n,s),g=this.getSharedOptions(f),m=this.includeOptions(s,g),x=o.axis,y=l.axis,{spanGaps:S,segment:b}=this.options,M=hd(S)?S:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||a||s==="none",k=n>0&&this.getParsed(n-1);for(let L=n;L<n+r;++L){let U=t[L],N=this.getParsed(L),F=T?U:{},O=Yn(N[y]),B=F[x]=o.getPixelForValue(N[x],L),P=F[y]=a||O?l.getBasePixel():l.getPixelForValue(d?this.applyStack(l,N,d):N[y],L);F.skip=isNaN(B)||isNaN(P)||O,F.stop=L>0&&Math.abs(N[x]-k[x])>M,b&&(F.parsed=N,F.raw=p.data[L]),m&&(F.options=g||this.resolveDataElementOptions(L,U.active?"active":s)),T||this.updateElement(U,L,F,s),k=N}this.updateSharedOptions(g,s,f)}getMaxOverflow(){let t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let l=0;for(let d=n.length-1;d>=0;--d)l=Math.max(l,n[d].size(this.resolveDataElementOptions(d))/2);return l>0&&l}let r=t.dataset,s=r.options&&r.options.borderWidth||0;if(!n.length)return s;let a=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,a,o)/2}}return i.id="scatter",i.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},i.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(e){return"("+e.label+", "+e.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}},i})(),c6=Object.freeze({__proto__:null,BarController:BF,BubbleController:VF,DoughnutController:LT,LineController:zF,PolarAreaController:jF,PieController:HF,RadarController:WF,ScatterController:l6});function fd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var d6=(()=>{class i{constructor(t){this.options=t||{}}init(t){}formats(){return fd()}parse(t,n){return fd()}format(t,n){return fd()}add(t,n,r){return fd()}diff(t,n,r){return fd()}startOf(t,n,r){return fd()}endOf(t,n){return fd()}}return i.override=function(e){Object.assign(i.prototype,e)},i})(),u6={_date:d6};function h6(i,e,t,n){let{controller:r,data:s,_sorted:a}=i,o=r._cachedMeta.iScale;if(o&&e===o.axis&&e!=="r"&&a&&s.length){let l=o._reversePixels?f5:oo;if(n){if(r._sharedOptions){let d=s[0],p=typeof d.getRange=="function"&&d.getRange(e);if(p){let f=l(s,e,t-p),g=l(s,e,t+p);return{lo:f.lo,hi:g.hi}}}}else return l(s,e,t)}return{lo:0,hi:s.length-1}}function Mf(i,e,t,n,r){let s=i.getSortedVisibleDatasetMetas(),a=t[e];for(let o=0,l=s.length;o<l;++o){let{index:d,data:p}=s[o],{lo:f,hi:g}=h6(s[o],e,a,r);for(let m=f;m<=g;++m){let x=p[m];x.skip||n(x,d,m)}}}function p6(i){let e=i.indexOf("x")!==-1,t=i.indexOf("y")!==-1;return function(n,r){let s=e?Math.abs(n.x-r.x):0,a=t?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function w2(i,e,t,n,r){let s=[];return!r&&!i.isPointInArea(e)||Mf(i,t,e,function(o,l,d){!r&&!Pu(o,i.chartArea,0)||o.inRange(e.x,e.y,n)&&s.push({element:o,datasetIndex:l,index:d})},!0),s}function f6(i,e,t,n){let r=[];function s(a,o,l){let{startAngle:d,endAngle:p}=a.getProps(["startAngle","endAngle"],n),{angle:f}=$y(a,{x:e.x,y:e.y});Nu(f,d,p)&&r.push({element:a,datasetIndex:o,index:l})}return Mf(i,t,e,s),r}function m6(i,e,t,n,r,s){let a=[],o=p6(t),l=Number.POSITIVE_INFINITY;function d(p,f,g){let m=p.inRange(e.x,e.y,r);if(n&&!m)return;let x=p.getCenterPoint(r);if(!(!!s||i.isPointInArea(x))&&!m)return;let S=o(e,x);S<l?(a=[{element:p,datasetIndex:f,index:g}],l=S):S===l&&a.push({element:p,datasetIndex:f,index:g})}return Mf(i,t,e,d),a}function C2(i,e,t,n,r,s){return!s&&!i.isPointInArea(e)?[]:t==="r"&&!n?f6(i,e,t,r):m6(i,e,t,n,r,s)}function Q5(i,e,t,n,r){let s=[],a=t==="x"?"inXRange":"inYRange",o=!1;return Mf(i,t,e,(l,d,p)=>{l[a](e[t],r)&&(s.push({element:l,datasetIndex:d,index:p}),o=o||l.inRange(e.x,e.y,r))}),n&&!o?[]:s}var g6={evaluateInteractionItems:Mf,modes:{index(i,e,t,n){let r=ic(e,i),s=t.axis||"x",a=t.includeInvisible||!1,o=t.intersect?w2(i,r,s,n,a):C2(i,r,s,!1,n,a),l=[];return o.length?(i.getSortedVisibleDatasetMetas().forEach(d=>{let p=o[0].index,f=d.data[p];f&&!f.skip&&l.push({element:f,datasetIndex:d.index,index:p})}),l):[]},dataset(i,e,t,n){let r=ic(e,i),s=t.axis||"xy",a=t.includeInvisible||!1,o=t.intersect?w2(i,r,s,n,a):C2(i,r,s,!1,n,a);if(o.length>0){let l=o[0].datasetIndex,d=i.getDatasetMeta(l).data;o=[];for(let p=0;p<d.length;++p)o.push({element:d[p],datasetIndex:l,index:p})}return o},point(i,e,t,n){let r=ic(e,i),s=t.axis||"xy",a=t.includeInvisible||!1;return w2(i,r,s,n,a)},nearest(i,e,t,n){let r=ic(e,i),s=t.axis||"xy",a=t.includeInvisible||!1;return C2(i,r,s,t.intersect,n,a)},x(i,e,t,n){let r=ic(e,i);return Q5(i,r,"x",t.intersect,n)},y(i,e,t,n){let r=ic(e,i);return Q5(i,r,"y",t.intersect,n)}}},NT=["left","top","right","bottom"];function mf(i,e){return i.filter(t=>t.pos===e)}function tT(i,e){return i.filter(t=>NT.indexOf(t.pos)===-1&&t.box.axis===e)}function gf(i,e){return i.sort((t,n)=>{let r=e?n:t,s=e?t:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function _6(i){let e=[],t,n,r,s,a,o;for(t=0,n=(i||[]).length;t<n;++t)r=i[t],{position:s,options:{stack:a,stackWeight:o=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:o});return e}function v6(i){let e={};for(let t of i){let{stack:n,pos:r,stackWeight:s}=t;if(!n||!NT.includes(r))continue;let a=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return e}function x6(i,e){let t=v6(i),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e,s,a,o;for(s=0,a=i.length;s<a;++s){o=i[s];let{fullSize:l}=o.box,d=t[o.stack],p=d&&o.stackWeight/d.weight;o.horizontal?(o.width=p?p*n:l&&e.availableWidth,o.height=r):(o.width=n,o.height=p?p*r:l&&e.availableHeight)}return t}function b6(i){let e=_6(i),t=gf(e.filter(d=>d.box.fullSize),!0),n=gf(mf(e,"left"),!0),r=gf(mf(e,"right")),s=gf(mf(e,"top"),!0),a=gf(mf(e,"bottom")),o=tT(e,"x"),l=tT(e,"y");return{fullSize:t,leftAndTop:n.concat(s),rightAndBottom:r.concat(l).concat(a).concat(o),chartArea:mf(e,"chartArea"),vertical:n.concat(r).concat(l),horizontal:s.concat(a).concat(o)}}function eT(i,e,t,n){return Math.max(i[t],e[t])+Math.max(i[n],e[n])}function FT(i,e){i.top=Math.max(i.top,e.top),i.left=Math.max(i.left,e.left),i.bottom=Math.max(i.bottom,e.bottom),i.right=Math.max(i.right,e.right)}function y6(i,e,t,n){let{pos:r,box:s}=t,a=i.maxPadding;if(!Bn(r)){t.size&&(i[r]-=t.size);let f=n[t.stack]||{size:0,count:1};f.size=Math.max(f.size,t.horizontal?s.height:s.width),t.size=f.size/f.count,i[r]+=t.size}s.getPadding&&FT(a,s.getPadding());let o=Math.max(0,e.outerWidth-eT(a,i,"left","right")),l=Math.max(0,e.outerHeight-eT(a,i,"top","bottom")),d=o!==i.w,p=l!==i.h;return i.w=o,i.h=l,t.horizontal?{same:d,other:p}:{same:p,other:d}}function S6(i){let e=i.maxPadding;function t(n){let r=Math.max(e[n]-i[n],0);return i[n]+=r,r}i.y+=t("top"),i.x+=t("left"),t("right"),t("bottom")}function w6(i,e){let t=e.maxPadding;function n(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(a=>{s[a]=Math.max(e[a],t[a])}),s}return n(i?["left","right"]:["top","bottom"])}function vf(i,e,t,n){let r=[],s,a,o,l,d,p;for(s=0,a=i.length,d=0;s<a;++s){o=i[s],l=o.box,l.update(o.width||e.w,o.height||e.h,w6(o.horizontal,e));let{same:f,other:g}=y6(e,t,o,n);d|=f&&r.length,p=p||g,l.fullSize||r.push(o)}return d&&vf(r,e,t,n)||p}function Hg(i,e,t,n,r){i.top=t,i.left=e,i.right=e+n,i.bottom=t+r,i.width=n,i.height=r}function nT(i,e,t,n){let r=t.padding,{x:s,y:a}=e;for(let o of i){let l=o.box,d=n[o.stack]||{count:1,placed:0,weight:1},p=o.stackWeight/d.weight||1;if(o.horizontal){let f=e.w*p,g=d.size||l.height;Ws(d.start)&&(a=d.start),l.fullSize?Hg(l,r.left,a,t.outerWidth-r.right-r.left,g):Hg(l,e.left+d.placed,a,f,g),d.start=a,d.placed+=f,a=l.bottom}else{let f=e.h*p,g=d.size||l.width;Ws(d.start)&&(s=d.start),l.fullSize?Hg(l,s,r.top,g,t.outerHeight-r.bottom-r.top):Hg(l,s,e.top+d.placed,g,f),d.start=s,d.placed+=f,s=l.right}}e.x=s,e.y=a}Rn.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var ts={addBox(i,e){i.boxes||(i.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},i.boxes.push(e)},removeBox(i,e){let t=i.boxes?i.boxes.indexOf(e):-1;t!==-1&&i.boxes.splice(t,1)},configure(i,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(i,e,t,n){if(!i)return;let r=Gr(i.options.layout.padding),s=Math.max(e-r.width,0),a=Math.max(t-r.height,0),o=b6(i.boxes),l=o.vertical,d=o.horizontal;li(i.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});let p=l.reduce((y,S)=>S.box.options&&S.box.options.display===!1?y:y+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/p,hBoxMaxHeight:a/2}),g=Object.assign({},r);FT(g,Gr(n));let m=Object.assign({maxPadding:g,w:s,h:a,x:r.left,y:r.top},r),x=x6(l.concat(d),f);vf(o.fullSize,m,f,x),vf(l,m,f,x),vf(d,m,f,x)&&vf(l,m,f,x),S6(m),nT(o.leftAndTop,m,f,x),m.x+=m.w,m.y+=m.h,nT(o.rightAndBottom,m,f,x),i.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},li(o.chartArea,y=>{let S=y.box;Object.assign(S,i.chartArea),S.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}},Kg=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}},P2=class extends Kg{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},Yg="$chartjs",C6={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},iT=i=>i===null||i==="";function M6(i,e){let t=i.style,n=i.getAttribute("height"),r=i.getAttribute("width");if(i[Yg]={initial:{height:n,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",iT(r)){let s=m2(i,"width");s!==void 0&&(i.width=s)}if(iT(n))if(i.style.height==="")i.height=i.width/(e||2);else{let s=m2(i,"height");s!==void 0&&(i.height=s)}return i}var BT=O5?{passive:!0}:!1;function E6(i,e,t){i.addEventListener(e,t,BT)}function A6(i,e,t){i.canvas.removeEventListener(e,t,BT)}function T6(i,e){let t=C6[i.type]||i.type,{x:n,y:r}=ic(i,e);return{type:t,chart:e,native:i,x:n!==void 0?n:null,y:r!==void 0?r:null}}function Zg(i,e){for(let t of i)if(t===e||t.contains(e))return!0}function k6(i,e,t){let n=i.canvas,r=new MutationObserver(s=>{let a=!1;for(let o of s)a=a||Zg(o.addedNodes,n),a=a&&!Zg(o.removedNodes,n);a&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function I6(i,e,t){let n=i.canvas,r=new MutationObserver(s=>{let a=!1;for(let o of s)a=a||Zg(o.removedNodes,n),a=a&&!Zg(o.addedNodes,n);a&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}var bf=new Map,rT=0;function VT(){let i=window.devicePixelRatio;i!==rT&&(rT=i,bf.forEach((e,t)=>{t.currentDevicePixelRatio!==i&&e()}))}function D6(i,e){bf.size||window.addEventListener("resize",VT),bf.set(i,e)}function P6(i){bf.delete(i),bf.size||window.removeEventListener("resize",VT)}function R6(i,e,t){let n=i.canvas,r=n&&Ug(n);if(!r)return;let s=Qy((o,l)=>{let d=r.clientWidth;t(o,l),d<r.clientWidth&&t()},window),a=new ResizeObserver(o=>{let l=o[0],d=l.contentRect.width,p=l.contentRect.height;d===0&&p===0||s(d,p)});return a.observe(r),D6(i,s),a}function M2(i,e,t){t&&t.disconnect(),e==="resize"&&P6(i)}function L6(i,e,t){let n=i.canvas,r=Qy(s=>{i.ctx!==null&&t(T6(s,i))},i,s=>{let a=s[0];return[a,a.offsetX,a.offsetY]});return E6(n,e,r),r}var R2=class extends Kg{acquireContext(e,t){let n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(M6(e,t),n):null}releaseContext(e){let t=e.canvas;if(!t[Yg])return!1;let n=t[Yg].initial;["height","width"].forEach(s=>{let a=n[s];Yn(a)?t.removeAttribute(s):t.setAttribute(s,a)});let r=n.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[Yg],!0}addEventListener(e,t,n){this.removeEventListener(e,t);let r=e.$proxies||(e.$proxies={}),a={attach:k6,detach:I6,resize:R6}[t]||L6;r[t]=a(e,t,n)}removeEventListener(e,t){let n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:M2,detach:M2,resize:M2}[t]||A6)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return L5(e,t,n,r)}isAttached(e){let t=Ug(e);return!!(t&&t.isConnected)}};function O6(i){return!p2()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?P2:R2}var L2=class{constructor(){this._init=[]}notify(e,t,n,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let s=r?this._descriptors(e).filter(r):this._descriptors(e),a=this._notify(s,e,t,n);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,n,r){r=r||{};for(let s of e){let a=s.plugin,o=a[n],l=[t,r,s.options];if(ki(o,l,a)===!1&&r.cancelable)return!1}return!0}invalidate(){Yn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let n=e&&e.config,r=wn(n.options&&n.options.plugins,{}),s=N6(n);return r===!1&&!t?[]:B6(e,s,r,t)}_notifyStateChanges(e){let t=this._oldCache||[],n=this._cache,r=(s,a)=>s.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}};function N6(i){let e={},t=[],n=Object.keys(ho.plugins.items);for(let s=0;s<n.length;s++)t.push(ho.getPlugin(n[s]));let r=i.plugins||[];for(let s=0;s<r.length;s++){let a=r[s];t.indexOf(a)===-1&&(t.push(a),e[a.id]=!0)}return{plugins:t,localIds:e}}function F6(i,e){return!e&&i===!1?null:i===!0?{}:i}function B6(i,{plugins:e,localIds:t},n,r){let s=[],a=i.getContext();for(let o of e){let l=o.id,d=F6(n[l],r);d!==null&&s.push({plugin:o,options:V6(i.config,{plugin:o,local:t[l]},d,a)})}return s}function V6(i,{plugin:e,local:t},n,r){let s=i.pluginScopeKeys(e),a=i.getOptionScopes(n,s);return t&&e.defaults&&a.push(e.defaults),i.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function O2(i,e){let t=Rn.datasets[i]||{};return((e.datasets||{})[i]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function U6(i,e){let t=i;return i==="_index_"?t=e:i==="_value_"&&(t=e==="x"?"y":"x"),t}function z6(i,e){return i===e?"_index_":"_value_"}function j6(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function N2(i,e){return i==="x"||i==="y"?i:e.axis||j6(e.position)||i.charAt(0).toLowerCase()}function H6(i,e){let t=Ql[i.type]||{scales:{}},n=e.scales||{},r=O2(i.type,e),s=Object.create(null),a=Object.create(null);return Object.keys(n).forEach(o=>{let l=n[o];if(!Bn(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let d=N2(o,l),p=z6(d,r),f=t.scales||{};s[d]=s[d]||o,a[o]=Lu(Object.create(null),[{axis:d},l,f[d],f[p]])}),i.data.datasets.forEach(o=>{let l=o.type||i.type,d=o.indexAxis||O2(l,e),f=(Ql[l]||{}).scales||{};Object.keys(f).forEach(g=>{let m=U6(g,d),x=o[m+"AxisID"]||s[m]||m;a[x]=a[x]||Object.create(null),Lu(a[x],[{axis:m},n[x],f[g]])})}),Object.keys(a).forEach(o=>{let l=a[o];Lu(l,[Rn.scales[l.type],Rn.scale])}),a}function UT(i){let e=i.options||(i.options={});e.plugins=wn(e.plugins,{}),e.scales=H6(i,e)}function zT(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function W6(i){return i=i||{},i.data=zT(i.data),UT(i),i}var sT=new Map,jT=new Set;function Wg(i,e){let t=sT.get(i);return t||(t=e(),sT.set(i,t),jT.add(t)),t}var _f=(i,e,t)=>{let n=qo(e,t);n!==void 0&&i.add(n)},F2=class{constructor(e){this._config=W6(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=zT(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),UT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Wg(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Wg(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Wg(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,n=this.type;return Wg(`${n}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let n=this._scopeCache,r=n.get(e);return(!r||t)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){let{options:r,type:s}=this,a=this._cachedScopes(e,n),o=a.get(t);if(o)return o;let l=new Set;t.forEach(p=>{e&&(l.add(e),p.forEach(f=>_f(l,e,f))),p.forEach(f=>_f(l,r,f)),p.forEach(f=>_f(l,Ql[s]||{},f)),p.forEach(f=>_f(l,Rn,f)),p.forEach(f=>_f(l,Ng,f))});let d=Array.from(l);return d.length===0&&d.push(Object.create(null)),jT.has(t)&&a.set(t,d),d}chartOptionScopes(){let{options:e,type:t}=this;return[e,Ql[t]||{},Rn.datasets[t]||{},{type:t},Rn,Ng]}resolveNamedOptions(e,t,n,r=[""]){let s={$shared:!0},{resolver:a,subPrefixes:o}=aT(this._resolverCache,e,r),l=a;if(q6(a,t)){s.$shared=!1,n=Go(n)?n():n;let d=this.createResolver(e,n,o);l=ud(a,n,d)}for(let d of t)s[d]=l[d];return s}createResolver(e,t,n=[""],r){let{resolver:s}=aT(this._resolverCache,e,n);return Bn(t)?ud(s,t,void 0,r):s}};function aT(i,e,t){let n=i.get(e);n||(n=new Map,i.set(e,n));let r=t.join(),s=n.get(r);return s||(s={resolver:Vg(e,t),subPrefixes:t.filter(o=>!o.toLowerCase().includes("hover"))},n.set(r,s)),s}var G6=i=>Bn(i)&&Object.getOwnPropertyNames(i).reduce((e,t)=>e||Go(i[t]),!1);function q6(i,e){let{isScriptable:t,isIndexable:n}=c2(i);for(let r of e){let s=t(r),a=n(r),o=(a||s)&&i[r];if(s&&(Go(o)||G6(o))||a&&Ti(o))return!0}return!1}var X6="3.9.1",Y6=["top","bottom","left","right","chartArea"];function oT(i,e){return i==="top"||i==="bottom"||Y6.indexOf(i)===-1&&e==="x"}function lT(i,e){return function(t,n){return t[i]===n[i]?t[e]-n[e]:t[i]-n[i]}}function cT(i){let e=i.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ki(t&&t.onComplete,[i],e)}function $6(i){let e=i.chart,t=e.options.animation;ki(t&&t.onProgress,[i],e)}function HT(i){return p2()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}var Jg={},WT=i=>{let e=HT(i);return Object.values(Jg).filter(t=>t.canvas===e).pop()};function K6(i,e,t){let n=Object.keys(i);for(let r of n){let s=+r;if(s>=e){let a=i[r];delete i[r],(t>0||s>e)&&(i[s+t]=a)}}}function Z6(i,e,t,n){return!t||i.type==="mouseout"?null:n?e:i}var Ko=class{constructor(e,t){let n=this.config=new F2(t),r=HT(e),s=WT(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");let a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||O6(r)),this.platform.updateConfig(n);let o=this.platform.acquireContext(r,a.aspectRatio),l=o&&o.canvas,d=l&&l.height,p=l&&l.width;if(this.id=o5(),this.ctx=o,this.canvas=l,this.width=p,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new L2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=v5(f=>this.update(f),a.resizeDelay||0),this._dataChanges=[],Jg[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Yo.listen(this,"complete",cT),Yo.listen(this,"progress",$6),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:s}=this;return Yn(e)?t&&s?s:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():f2(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return a2(this.canvas,this.ctx),this}stop(){return Yo.stop(this),this}resize(e,t){Yo.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){let n=this.options,r=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,t,s),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,f2(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),ki(n.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let t=this.options.scales||{};li(t,(n,r)=>{n.id=r})}buildOrUpdateScales(){let e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((a,o)=>(a[o]=!1,a),{}),s=[];t&&(s=s.concat(Object.keys(t).map(a=>{let o=t[a],l=N2(a,o),d=l==="r",p=l==="x";return{options:o,dposition:d?"chartArea":p?"bottom":"left",dtype:d?"radialLinear":p?"category":"linear"}}))),li(s,a=>{let o=a.options,l=o.id,d=N2(l,o),p=wn(o.type,a.dtype);(o.position===void 0||oT(o.position,d)!==oT(a.dposition))&&(o.position=a.dposition),r[l]=!0;let f=null;if(l in n&&n[l].type===p)f=n[l];else{let g=ho.getScale(p);f=new g({id:l,type:p,ctx:this.ctx,chart:this}),n[f.id]=f}f.init(o,e)}),li(r,(a,o)=>{a||delete n[o]}),li(n,a=>{ts.configure(this,a,a.options),ts.addBox(this,a)})}_updateMetasets(){let e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((r,s)=>r.index-s.index),n>t){for(let r=t;r<n;++r)this._destroyDatasetMeta(r);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(lT("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((n,r)=>{t.filter(s=>s===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){let e=[],t=this.data.datasets,n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){let s=t[n],a=this.getDatasetMeta(n),o=s.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=o,a.indexAxis=s.indexAxis||O2(o,this.options),a.order=s.order||0,a.index=n,a.label=""+s.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{let l=ho.getController(o),{datasetElementType:d,dataElementType:p}=Rn.datasets[o];Object.assign(l.prototype,{dataElementType:ho.getElement(p),datasetElementType:d&&ho.getElement(d)}),a.controller=new l(this,n),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){li(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let t=this.config;t.update();let n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,p=this.data.datasets.length;d<p;d++){let{controller:f}=this.getDatasetMeta(d),g=!r&&s.indexOf(f)===-1;f.buildOrUpdateElements(g),a=Math.max(+f.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||li(s,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(lT("z","_idx"));let{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){li(this.scales,e=>{ts.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Gy(t,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(let{method:n,start:r,count:s}of t){let a=n==="_removeElements"?-s:s;K6(e,r,a)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let t=this.data.datasets.length,n=s=>new Set(e.filter(a=>a[0]===s).map((a,o)=>o+","+a.splice(1).join(","))),r=n(0);for(let s=1;s<t;s++)if(!Gy(r,n(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ts.update(this,this.width,this.height,e);let t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],li(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Go(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){let n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Yo.has(this)?this.attached&&!Yo.running(this)&&Yo.start(this):(this.draw(),cT({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:n,height:r}=this._resizeBeforeDraw;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let t=this._sortedMetasets,n=[],r,s;for(r=0,s=t.length;r<s;++r){let a=t[r];(!e||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let t=this.ctx,n=e._clip,r=!n.disabled,s=this.chartArea,a={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(r&&uf(t,{left:n.left===!1?0:s.left-n.left,right:n.right===!1?this.width:s.right+n.right,top:n.top===!1?0:s.top-n.top,bottom:n.bottom===!1?this.height:s.bottom+n.bottom}),e.controller.draw(),r&&hf(t),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(e){return Pu(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){let s=g6.modes[t];return typeof s=="function"?s(this,e,n,r):[]}getDatasetMeta(e){let t=this.data.datasets[e],n=this._metasets,r=n.filter(s=>s&&s._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Xo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let t=this.data.datasets[e];if(!t)return!1;let n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!t.hidden}setDatasetVisibility(e,t){let n=this.getDatasetMeta(e);n.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){let r=n?"show":"hide",s=this.getDatasetMeta(e),a=s.controller._resolveAnimations(void 0,r);Ws(t)?(s.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(s,{visible:n}),this.update(o=>o.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){let t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Yo.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),a2(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete Jg[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,t=this.platform,n=(s,a)=>{t.addEventListener(this,s,a),e[s]=a},r=(s,a,o)=>{s.offsetX=a,s.offsetY=o,this._eventHandler(s)};li(this.options.events,s=>n(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,t=this.platform,n=(l,d)=>{t.addEventListener(this,l,d),e[l]=d},r=(l,d)=>{e[l]&&(t.removeEventListener(this,l,d),delete e[l])},s=(l,d)=>{this.canvas&&this.resize(l,d)},a,o=()=>{r("attach",o),this.attached=!0,this.resize(),n("resize",s),n("detach",a)};a=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():a()}unbindEvents(){li(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},li(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){let r=n?"set":"remove",s,a,o,l;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){a=e[o];let d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let t=this._active||[],n=e.map(({datasetIndex:s,index:a})=>{let o=this.getDatasetMeta(s);if(!o)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:o.data[a],index:a}});!cf(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}_updateHoverStyles(e,t,n){let r=this.options.hover,s=(l,d)=>l.filter(p=>!d.some(f=>p.datasetIndex===f.datasetIndex&&p.index===f.index)),a=s(t,e),o=n?e:s(e,t);a.length&&this.updateHoverStyle(a,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(e,t){let n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;let s=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(e,t,n){let{_active:r=[],options:s}=this,a=t,o=this._getActiveElements(e,r,n,a),l=d5(e),d=Z6(e,this._lastEvent,n,l);n&&(this._lastEvent=null,ki(s.onHover,[e,o,this],this),l&&ki(s.onClick,[e,o,this],this));let p=!cf(o,r);return(p||t)&&(this._active=o,this._updateHoverStyles(o,r,t)),this._lastEvent=d,p}_getActiveElements(e,t,n,r){if(e.type==="mouseout")return[];if(!n)return t;let s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},dT=()=>li(Ko.instances,i=>i._plugins.invalidate()),rc=!0;Object.defineProperties(Ko,{defaults:{enumerable:rc,value:Rn},instances:{enumerable:rc,value:Jg},overrides:{enumerable:rc,value:Ql},registry:{enumerable:rc,value:ho},version:{enumerable:rc,value:X6},getChart:{enumerable:rc,value:WT},register:{enumerable:rc,value:(...i)=>{ho.add(...i),dT()}},unregister:{enumerable:rc,value:(...i)=>{ho.remove(...i),dT()}}});function GT(i,e,t){let{startAngle:n,pixelMargin:r,x:s,y:a,outerRadius:o,innerRadius:l}=e,d=r/o;i.beginPath(),i.arc(s,a,o,n-d,t+d),l>r?(d=r/l,i.arc(s,a,l,t+d,n-d,!0)):i.arc(s,a,r,t+Gi,n-Gi),i.closePath(),i.clip()}function J6(i){return Bg(i,["outerStart","outerEnd","innerStart","innerEnd"])}function Q6(i,e,t,n){let r=J6(i.options.borderRadius),s=(t-e)/2,a=Math.min(s,n*e/2),o=l=>{let d=(t-Math.min(s,l))*n/2;return Mr(l,0,Math.min(s,d))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:Mr(r.innerStart,0,a),innerEnd:Mr(r.innerEnd,0,a)}}function Uu(i,e,t,n){return{x:t+i*Math.cos(e),y:n+i*Math.sin(e)}}function B2(i,e,t,n,r,s){let{x:a,y:o,startAngle:l,pixelMargin:d,innerRadius:p}=e,f=Math.max(e.outerRadius+n+t-d,0),g=p>0?p+n+t+d:0,m=0,x=r-l;if(n){let ct=p>0?p-n:0,ot=f>0?f-n:0,st=(ct+ot)/2,Q=st!==0?x*st/(st+n):x;m=(x-Q)/2}let y=Math.max(.001,x*f-t/Oi)/f,S=(x-y)/2,b=l+S+m,M=r-S-m,{outerStart:T,outerEnd:k,innerStart:L,innerEnd:U}=Q6(e,g,f,M-b),N=f-T,F=f-k,O=b+T/N,B=M-k/F,P=g+L,V=g+U,$=b+L/P,K=M-U/V;if(i.beginPath(),s){if(i.arc(a,o,f,O,B),k>0){let st=Uu(F,B,a,o);i.arc(st.x,st.y,k,B,M+Gi)}let ct=Uu(V,M,a,o);if(i.lineTo(ct.x,ct.y),U>0){let st=Uu(V,K,a,o);i.arc(st.x,st.y,U,M+Gi,K+Math.PI)}if(i.arc(a,o,g,M-U/g,b+L/g,!0),L>0){let st=Uu(P,$,a,o);i.arc(st.x,st.y,L,$+Math.PI,b-Gi)}let ot=Uu(N,b,a,o);if(i.lineTo(ot.x,ot.y),T>0){let st=Uu(N,O,a,o);i.arc(st.x,st.y,T,b-Gi,O)}}else{i.moveTo(a,o);let ct=Math.cos(O)*f+a,ot=Math.sin(O)*f+o;i.lineTo(ct,ot);let st=Math.cos(B)*f+a,Q=Math.sin(B)*f+o;i.lineTo(st,Q)}i.closePath()}function t8(i,e,t,n,r){let{fullCircles:s,startAngle:a,circumference:o}=e,l=e.endAngle;if(s){B2(i,e,t,n,a+fi,r);for(let d=0;d<s;++d)i.fill();isNaN(o)||(l=a+o%fi,o%fi===0&&(l+=fi))}return B2(i,e,t,n,l,r),i.fill(),l}function e8(i,e,t){let{x:n,y:r,startAngle:s,pixelMargin:a,fullCircles:o}=e,l=Math.max(e.outerRadius-a,0),d=e.innerRadius+a,p;for(t&&GT(i,e,s+fi),i.beginPath(),i.arc(n,r,d,s+fi,s,!0),p=0;p<o;++p)i.stroke();for(i.beginPath(),i.arc(n,r,l,s,s+fi),p=0;p<o;++p)i.stroke()}function n8(i,e,t,n,r,s){let{options:a}=e,{borderWidth:o,borderJoinStyle:l}=a,d=a.borderAlign==="inner";o&&(d?(i.lineWidth=o*2,i.lineJoin=l||"round"):(i.lineWidth=o,i.lineJoin=l||"bevel"),e.fullCircles&&e8(i,e,d),d&&GT(i,e,r),B2(i,e,t,n,r,s),i.stroke())}var ju=class extends Xs{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){let r=this.getProps(["x","y"],n),{angle:s,distance:a}=$y(r,{x:e,y:t}),{startAngle:o,endAngle:l,innerRadius:d,outerRadius:p,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),g=this.options.spacing/2,x=wn(f,l-o)>=fi||Nu(s,o,l),y=co(a,d+g,p+g);return x&&y}getCenterPoint(e){let{x:t,y:n,startAngle:r,endAngle:s,innerRadius:a,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:l,spacing:d}=this.options,p=(r+s)/2,f=(a+o+d+l)/2;return{x:t+Math.cos(p)*f,y:n+Math.sin(p)*f}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:n}=this,r=(t.offset||0)/2,s=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=n>fi?Math.floor(n/fi):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let o=0;if(r){o=r/2;let d=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(d)*o,Math.sin(d)*o),this.circumference>=Oi&&(o=r)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;let l=t8(e,this,o,s,a);n8(e,this,o,s,l,a),e.restore()}};ju.id="arc";ju.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};ju.defaultRoutes={backgroundColor:"backgroundColor"};function qT(i,e,t=e){i.lineCap=wn(t.borderCapStyle,e.borderCapStyle),i.setLineDash(wn(t.borderDash,e.borderDash)),i.lineDashOffset=wn(t.borderDashOffset,e.borderDashOffset),i.lineJoin=wn(t.borderJoinStyle,e.borderJoinStyle),i.lineWidth=wn(t.borderWidth,e.borderWidth),i.strokeStyle=wn(t.borderColor,e.borderColor)}function i8(i,e,t){i.lineTo(t.x,t.y)}function r8(i){return i.stepped?E5:i.tension||i.cubicInterpolationMode==="monotone"?A5:i8}function XT(i,e,t={}){let n=i.length,{start:r=0,end:s=n-1}=t,{start:a,end:o}=e,l=Math.max(r,a),d=Math.min(s,o),p=r<a&&s<a||r>o&&s>o;return{count:n,start:l,loop:e.loop,ilen:d<l&&!p?n+d-l:d-l}}function s8(i,e,t,n){let{points:r,options:s}=e,{count:a,start:o,loop:l,ilen:d}=XT(r,t,n),p=r8(s),{move:f=!0,reverse:g}=n||{},m,x,y;for(m=0;m<=d;++m)x=r[(o+(g?d-m:m))%a],!x.skip&&(f?(i.moveTo(x.x,x.y),f=!1):p(i,y,x,g,s.stepped),y=x);return l&&(x=r[(o+(g?d:0))%a],p(i,y,x,g,s.stepped)),!!l}function a8(i,e,t,n){let r=e.points,{count:s,start:a,ilen:o}=XT(r,t,n),{move:l=!0,reverse:d}=n||{},p=0,f=0,g,m,x,y,S,b,M=k=>(a+(d?o-k:k))%s,T=()=>{y!==S&&(i.lineTo(p,S),i.lineTo(p,y),i.lineTo(p,b))};for(l&&(m=r[M(0)],i.moveTo(m.x,m.y)),g=0;g<=o;++g){if(m=r[M(g)],m.skip)continue;let k=m.x,L=m.y,U=k|0;U===x?(L<y?y=L:L>S&&(S=L),p=(f*p+k)/++f):(T(),i.lineTo(k,L),x=U,f=0,y=S=L),b=L}T()}function V2(i){let e=i.options,t=e.borderDash&&e.borderDash.length;return!i._decimated&&!i._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?a8:s8}function o8(i){return i.stepped?N5:i.tension||i.cubicInterpolationMode==="monotone"?F5:Kl}function l8(i,e,t,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,n)&&r.closePath()),qT(i,e.options),i.stroke(r)}function c8(i,e,t,n){let{segments:r,options:s}=e,a=V2(e);for(let o of r)qT(i,s,o.style),i.beginPath(),a(i,e,o,{start:t,end:t+n-1})&&i.closePath(),i.stroke()}var d8=typeof Path2D=="function";function u8(i,e,t,n){d8&&!e.options.segment?l8(i,e,t,n):c8(i,e,t,n)}var n_=(()=>{class i extends Xs{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let s=r.spanGaps?this._loop:this._fullLoop;R5(this._points,r,t,s,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=V5(this,this.options.segment))}first(){let t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){let t=this.segments,n=this.points,r=t.length;return r&&n[t[r-1].end]}interpolate(t,n){let r=this.options,s=t[n],a=this.points,o=x2(this,{property:n,start:s,end:s});if(!o.length)return;let l=[],d=o8(r),p,f;for(p=0,f=o.length;p<f;++p){let{start:g,end:m}=o[p],x=a[g],y=a[m];if(x===y){l.push(x);continue}let S=Math.abs((s-x[n])/(y[n]-x[n])),b=d(x,y,S,r.stepped);b[n]=t[n],l.push(b)}return l.length===1?l[0]:l}pathSegment(t,n,r){return V2(this)(t,this,n,r)}path(t,n,r){let s=this.segments,a=V2(this),o=this._loop;n=n||0,r=r||this.points.length-n;for(let l of s)o&=a(t,this,l,{start:n,end:n+r-1});return!!o}draw(t,n,r,s){let a=this.options||{};(this.points||[]).length&&a.borderWidth&&(t.save(),u8(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return i.id="line",i.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},i.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},i.descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"},i})();function uT(i,e,t,n){let r=i.options,{[t]:s}=i.getProps([t],n);return Math.abs(e-s)<r.radius+r.hitRadius}var h8=(()=>{class i extends Xs{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,r){let s=this.options,{x:a,y:o}=this.getProps(["x","y"],r);return Math.pow(t-a,2)+Math.pow(n-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,n){return uT(this,t,"x",n)}inYRange(t,n){return uT(this,t,"y",n)}getCenterPoint(t){let{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);let r=n&&t.borderWidth||0;return(n+r)*2}draw(t,n){let r=this.options;this.skip||r.radius<.1||!Pu(this,n,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,Fg(t,r,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return i.id="point",i.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},i.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},i})();function YT(i,e){let{x:t,y:n,base:r,width:s,height:a}=i.getProps(["x","y","base","width","height"],e),o,l,d,p,f;return i.horizontal?(f=a/2,o=Math.min(t,r),l=Math.max(t,r),d=n-f,p=n+f):(f=s/2,o=t-f,l=t+f,d=Math.min(n,r),p=Math.max(n,r)),{left:o,top:d,right:l,bottom:p}}function sc(i,e,t,n){return i?0:Mr(e,t,n)}function p8(i,e,t){let n=i.options.borderWidth,r=i.borderSkipped,s=l2(n);return{t:sc(r.top,s.top,0,t),r:sc(r.right,s.right,0,e),b:sc(r.bottom,s.bottom,0,t),l:sc(r.left,s.left,0,e)}}function f8(i,e,t){let{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),r=i.options.borderRadius,s=nc(r),a=Math.min(e,t),o=i.borderSkipped,l=n||Bn(r);return{topLeft:sc(!l||o.top||o.left,s.topLeft,0,a),topRight:sc(!l||o.top||o.right,s.topRight,0,a),bottomLeft:sc(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:sc(!l||o.bottom||o.right,s.bottomRight,0,a)}}function m8(i){let e=YT(i),t=e.right-e.left,n=e.bottom-e.top,r=p8(i,t/2,n/2),s=f8(i,t/2,n/2);return{outer:{x:e.left,y:e.top,w:t,h:n,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function E2(i,e,t,n){let r=e===null,s=t===null,o=i&&!(r&&s)&&YT(i,n);return o&&(r||co(e,o.left,o.right))&&(s||co(t,o.top,o.bottom))}function g8(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function _8(i,e){i.rect(e.x,e.y,e.w,e.h)}function A2(i,e,t={}){let n=i.x!==t.x?-e:0,r=i.y!==t.y?-e:0,s=(i.x+i.w!==t.x+t.w?e:0)-n,a=(i.y+i.h!==t.y+t.h?e:0)-r;return{x:i.x+n,y:i.y+r,w:i.w+s,h:i.h+a,radius:i.radius}}var Hu=class extends Xs{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:a}=m8(this),o=g8(a.radius)?Fu:_8;e.save(),(a.w!==s.w||a.h!==s.h)&&(e.beginPath(),o(e,A2(a,t,s)),e.clip(),o(e,A2(s,-t,a)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,A2(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return E2(this,e,t,n)}inXRange(e,t){return E2(this,e,null,t)}inYRange(e,t){return E2(this,null,e,t)}getCenterPoint(e){let{x:t,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?n:(n+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}};Hu.id="bar";Hu.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};Hu.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var v8=Object.freeze({__proto__:null,ArcElement:ju,LineElement:n_,PointElement:h8,BarElement:Hu});function x8(i,e,t,n,r){let s=r.samples||n;if(s>=t)return i.slice(e,e+t);let a=[],o=(t-2)/(s-2),l=0,d=e+t-1,p=e,f,g,m,x,y;for(a[l++]=i[p],f=0;f<s-2;f++){let S=0,b=0,M,T=Math.floor((f+1)*o)+1+e,k=Math.min(Math.floor((f+2)*o)+1,t)+e,L=k-T;for(M=T;M<k;M++)S+=i[M].x,b+=i[M].y;S/=L,b/=L;let U=Math.floor(f*o)+1+e,N=Math.min(Math.floor((f+1)*o)+1,t)+e,{x:F,y:O}=i[p];for(m=x=-1,M=U;M<N;M++)x=.5*Math.abs((F-S)*(i[M].y-O)-(F-i[M].x)*(b-O)),x>m&&(m=x,g=i[M],y=M);a[l++]=g,p=y}return a[l++]=i[d],a}function b8(i,e,t,n){let r=0,s=0,a,o,l,d,p,f,g,m,x,y,S=[],b=e+t-1,M=i[e].x,k=i[b].x-M;for(a=e;a<e+t;++a){o=i[a],l=(o.x-M)/k*n,d=o.y;let L=l|0;if(L===p)d<x?(x=d,f=a):d>y&&(y=d,g=a),r=(s*r+o.x)/++s;else{let U=a-1;if(!Yn(f)&&!Yn(g)){let N=Math.min(f,g),F=Math.max(f,g);N!==m&&N!==U&&S.push(In(Se({},i[N]),{x:r})),F!==m&&F!==U&&S.push(In(Se({},i[F]),{x:r}))}a>0&&U!==m&&S.push(i[U]),S.push(o),p=L,s=0,x=y=d,f=g=m=a}}return S}function $T(i){if(i._decimated){let e=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{value:e})}}function hT(i){i.data.datasets.forEach(e=>{$T(e)})}function y8(i,e){let t=e.length,n=0,r,{iScale:s}=i,{min:a,max:o,minDefined:l,maxDefined:d}=s.getUserBounds();return l&&(n=Mr(oo(e,s.axis,a).lo,0,t-1)),d?r=Mr(oo(e,s.axis,o).hi+1,n,t)-n:r=t-n,{start:n,count:r}}var S8={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,e,t)=>{if(!t.enabled){hT(i);return}let n=i.width;i.data.datasets.forEach((r,s)=>{let{_data:a,indexAxis:o}=r,l=i.getDatasetMeta(s),d=a||r.data;if(Bu([o,i.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let p=i.scales[l.xAxisID];if(p.type!=="linear"&&p.type!=="time"||i.options.parsing)return;let{start:f,count:g}=y8(l,d),m=t.threshold||4*n;if(g<=m){$T(r);return}Yn(a)&&(r._data=d,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(y){this._data=y}}));let x;switch(t.algorithm){case"lttb":x=x8(d,f,g,n,t);break;case"min-max":x=b8(d,f,g,n);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=x})},destroy(i){hT(i)}};function w8(i,e,t){let n=i.segments,r=i.points,s=e.points,a=[];for(let o of n){let{start:l,end:d}=o;d=j2(l,d,r);let p=U2(t,r[l],r[d],o.loop);if(!e.segments){a.push({source:o,target:p,start:r[l],end:r[d]});continue}let f=x2(e,p);for(let g of f){let m=U2(t,s[g.start],s[g.end],g.loop),x=v2(o,r,m);for(let y of x)a.push({source:y,target:g,start:{[t]:pT(p,m,"start",Math.max)},end:{[t]:pT(p,m,"end",Math.min)}})}}return a}function U2(i,e,t,n){if(n)return;let r=e[i],s=t[i];return i==="angle"&&(r=Is(r),s=Is(s)),{property:i,start:r,end:s}}function C8(i,e){let{x:t=null,y:n=null}=i||{},r=e.points,s=[];return e.segments.forEach(({start:a,end:o})=>{o=j2(a,o,r);let l=r[a],d=r[o];n!==null?(s.push({x:l.x,y:n}),s.push({x:d.x,y:n})):t!==null&&(s.push({x:t,y:l.y}),s.push({x:t,y:d.y}))}),s}function j2(i,e,t){for(;e>i;e--){let n=t[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function pT(i,e,t,n){return i&&e?n(i[t],e[t]):i?i[t]:e?e[t]:0}function KT(i,e){let t=[],n=!1;return Ti(i)?(n=!0,t=i):t=C8(i,e),t.length?new n_({points:t,options:{tension:0},_loop:n,_fullLoop:n}):null}function fT(i){return i&&i.fill!==!1}function M8(i,e,t){let r=i[e].fill,s=[e],a;if(!t)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Qi(r))return r;if(a=i[r],!a)return!1;if(a.visible)return r;s.push(r),r=a.fill}return!1}function E8(i,e,t){let n=I8(i);if(Bn(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return Qi(r)&&Math.floor(r)===r?A8(n[0],e,r,t):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function A8(i,e,t,n){return(i==="-"||i==="+")&&(t=e+t),t===e||t<0||t>=n?!1:t}function T8(i,e){let t=null;return i==="start"?t=e.bottom:i==="end"?t=e.top:Bn(i)?t=e.getPixelForValue(i.value):e.getBasePixel&&(t=e.getBasePixel()),t}function k8(i,e,t){let n;return i==="start"?n=t:i==="end"?n=e.options.reverse?e.min:e.max:Bn(i)?n=i.value:n=e.getBaseValue(),n}function I8(i){let e=i.options,t=e.fill,n=wn(t&&t.target,t);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function D8(i){let{scale:e,index:t,line:n}=i,r=[],s=n.segments,a=n.points,o=P8(e,t);o.push(KT({x:null,y:e.bottom},n));for(let l=0;l<s.length;l++){let d=s[l];for(let p=d.start;p<=d.end;p++)R8(r,a[p],o)}return new n_({points:r,options:{}})}function P8(i,e){let t=[],n=i.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){let s=n[r];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function R8(i,e,t){let n=[];for(let r=0;r<t.length;r++){let s=t[r],{first:a,last:o,point:l}=L8(s,e,"x");if(!(!l||a&&o)){if(a)n.unshift(l);else if(i.push(l),!o)break}}i.push(...n)}function L8(i,e,t){let n=i.interpolate(e,t);if(!n)return{};let r=n[t],s=i.segments,a=i.points,o=!1,l=!1;for(let d=0;d<s.length;d++){let p=s[d],f=a[p.start][t],g=a[p.end][t];if(co(r,f,g)){o=r===f,l=r===g;break}}return{first:o,last:l,point:n}}var Qg=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){let{x:r,y:s,radius:a}=this;return t=t||{start:0,end:fi},e.arc(r,s,a,t.end,t.start,!0),!n.bounds}interpolate(e){let{x:t,y:n,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}};function O8(i){let{chart:e,fill:t,line:n}=i;if(Qi(t))return N8(e,t);if(t==="stack")return D8(i);if(t==="shape")return!0;let r=F8(i);return r instanceof Qg?r:KT(r,n)}function N8(i,e){let t=i.getDatasetMeta(e);return t&&i.isDatasetVisible(e)?t.dataset:null}function F8(i){return(i.scale||{}).getPointPositionForValue?V8(i):B8(i)}function B8(i){let{scale:e={},fill:t}=i,n=T8(t,e);if(Qi(n)){let r=e.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function V8(i){let{scale:e,fill:t}=i,n=e.options,r=e.getLabels().length,s=n.reverse?e.max:e.min,a=k8(t,e,s),o=[];if(n.grid.circular){let l=e.getPointPositionForValue(0,s);return new Qg({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(a)})}for(let l=0;l<r;++l)o.push(e.getPointPositionForValue(l,a));return o}function T2(i,e,t){let n=O8(e),{line:r,scale:s,axis:a}=e,o=r.options,l=o.fill,d=o.backgroundColor,{above:p=d,below:f=d}=l||{};n&&r.points.length&&(uf(i,t),U8(i,{line:r,target:n,above:p,below:f,area:t,scale:s,axis:a}),hf(i))}function U8(i,e){let{line:t,target:n,above:r,below:s,area:a,scale:o}=e,l=t._loop?"angle":e.axis;i.save(),l==="x"&&s!==r&&(mT(i,n,a.top),gT(i,{line:t,target:n,color:r,scale:o,property:l}),i.restore(),i.save(),mT(i,n,a.bottom)),gT(i,{line:t,target:n,color:s,scale:o,property:l}),i.restore()}function mT(i,e,t){let{segments:n,points:r}=e,s=!0,a=!1;i.beginPath();for(let o of n){let{start:l,end:d}=o,p=r[l],f=r[j2(l,d,r)];s?(i.moveTo(p.x,p.y),s=!1):(i.lineTo(p.x,t),i.lineTo(p.x,p.y)),a=!!e.pathSegment(i,o,{move:a}),a?i.closePath():i.lineTo(f.x,t)}i.lineTo(e.first().x,t),i.closePath(),i.clip()}function gT(i,e){let{line:t,target:n,property:r,color:s,scale:a}=e,o=w8(t,n,r);for(let{source:l,target:d,start:p,end:f}of o){let{style:{backgroundColor:g=s}={}}=l,m=n!==!0;i.save(),i.fillStyle=g,z8(i,a,m&&U2(r,p,f)),i.beginPath();let x=!!t.pathSegment(i,l),y;if(m){x?i.closePath():_T(i,n,f,r);let S=!!n.pathSegment(i,d,{move:x,reverse:!0});y=x&&S,y||_T(i,n,p,r)}i.closePath(),i.fill(y?"evenodd":"nonzero"),i.restore()}}function z8(i,e,t){let{top:n,bottom:r}=e.chart.chartArea,{property:s,start:a,end:o}=t||{};s==="x"&&(i.beginPath(),i.rect(a,n,o-a,r-n),i.clip())}function _T(i,e,t,n){let r=e.interpolate(t,n);r&&i.lineTo(r.x,r.y)}var j8={id:"filler",afterDatasetsUpdate(i,e,t){let n=(i.data.datasets||[]).length,r=[],s,a,o,l;for(a=0;a<n;++a)s=i.getDatasetMeta(a),o=s.dataset,l=null,o&&o.options&&o instanceof n_&&(l={visible:i.isDatasetVisible(a),index:a,fill:E8(o,a,n),chart:i,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=l,r.push(l);for(a=0;a<n;++a)l=r[a],!(!l||l.fill===!1)&&(l.fill=M8(r,a,t.propagate))},beforeDraw(i,e,t){let n=t.drawTime==="beforeDraw",r=i.getSortedVisibleDatasetMetas(),s=i.chartArea;for(let a=r.length-1;a>=0;--a){let o=r[a].$filler;o&&(o.line.updateControlPoints(s,o.axis),n&&o.fill&&T2(i.ctx,o,s))}},beforeDatasetsDraw(i,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let n=i.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){let s=n[r].$filler;fT(s)&&T2(i.ctx,s,i.chartArea)}},beforeDatasetDraw(i,e,t){let n=e.meta.$filler;!fT(n)||t.drawTime!=="beforeDatasetDraw"||T2(i.ctx,n,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},vT=(i,e)=>{let{boxHeight:t=e,boxWidth:n=e}=i;return i.usePointStyle&&(t=Math.min(t,e),n=i.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:t,itemHeight:Math.max(e,t)}},H8=(i,e)=>i!==null&&e!==null&&i.datasetIndex===e.datasetIndex&&i.index===e.index,t_=class extends Xs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=ki(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(n=>e.filter(n,this.chart.data))),e.sort&&(t=t.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let n=e.labels,r=xr(n.font),s=r.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=vT(n,s),d,p;t.font=r.string,this.isHorizontal()?(d=this.maxWidth,p=this._fitRows(a,s,o,l)+10):(p=this.maxHeight,d=this._fitCols(a,s,o,l)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(p,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){let{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],d=this.lineWidths=[0],p=r+o,f=e;s.textAlign="left",s.textBaseline="middle";let g=-1,m=-p;return this.legendItems.forEach((x,y)=>{let S=n+t/2+s.measureText(x.text).width;(y===0||d[d.length-1]+S+2*o>a)&&(f+=p,d[d.length-(y>0?0:1)]=0,m+=p,g++),l[y]={left:0,top:m,row:g,width:S,height:r},d[d.length-1]+=S+o}),f}_fitCols(e,t,n,r){let{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],d=this.columnSizes=[],p=a-e,f=o,g=0,m=0,x=0,y=0;return this.legendItems.forEach((S,b)=>{let M=n+t/2+s.measureText(S.text).width;b>0&&m+r+2*o>p&&(f+=g+o,d.push({width:g,height:m}),x+=g+o,y++,g=m=0),l[b]={left:x,top:m,col:y,width:M,height:r},g=Math.max(g,M),m+=r+o}),f+=g,d.push({width:g,height:m}),f}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:s}}=this,a=pd(s,this.left,this.width);if(this.isHorizontal()){let o=0,l=Wr(n,this.left+r,this.right-this.lineWidths[o]);for(let d of t)o!==d.row&&(o=d.row,l=Wr(n,this.left+r,this.right-this.lineWidths[o])),d.top+=this.top+e+r,d.left=a.leftForLtr(a.x(l),d.width),l+=d.width+r}else{let o=0,l=Wr(n,this.top+e+r,this.bottom-this.columnSizes[o].height);for(let d of t)d.col!==o&&(o=d.col,l=Wr(n,this.top+e+r,this.bottom-this.columnSizes[o].height)),d.top=l,d.left+=this.left+r,d.left=a.leftForLtr(a.x(d.left),d.width),l+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;uf(e,this),this._draw(),hf(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:s,labels:a}=e,o=Rn.color,l=pd(e.rtl,this.left,this.width),d=xr(a.font),{color:p,padding:f}=a,g=d.size,m=g/2,x;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;let{boxWidth:y,boxHeight:S,itemHeight:b}=vT(a,g),M=function(N,F,O){if(isNaN(y)||y<=0||isNaN(S)||S<0)return;r.save();let B=wn(O.lineWidth,1);if(r.fillStyle=wn(O.fillStyle,o),r.lineCap=wn(O.lineCap,"butt"),r.lineDashOffset=wn(O.lineDashOffset,0),r.lineJoin=wn(O.lineJoin,"miter"),r.lineWidth=B,r.strokeStyle=wn(O.strokeStyle,o),r.setLineDash(wn(O.lineDash,[])),a.usePointStyle){let P={radius:S*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:B},V=l.xPlus(N,y/2),$=F+m;o2(r,P,V,$,a.pointStyleWidth&&y)}else{let P=F+Math.max((g-S)/2,0),V=l.leftForLtr(N,y),$=nc(O.borderRadius);r.beginPath(),Object.values($).some(K=>K!==0)?Fu(r,{x:V,y:P,w:y,h:S,radius:$}):r.rect(V,P,y,S),r.fill(),B!==0&&r.stroke()}r.restore()},T=function(N,F,O){ec(r,O.text,N,F+b/2,d,{strikethrough:O.hidden,textAlign:l.textAlign(O.textAlign)})},k=this.isHorizontal(),L=this._computeTitleHeight();k?x={x:Wr(s,this.left+f,this.right-n[0]),y:this.top+f+L,line:0}:x={x:this.left+f,y:Wr(s,this.top+L+f,this.bottom-t[0].height),line:0},g2(this.ctx,e.textDirection);let U=b+f;this.legendItems.forEach((N,F)=>{r.strokeStyle=N.fontColor||p,r.fillStyle=N.fontColor||p;let O=r.measureText(N.text).width,B=l.textAlign(N.textAlign||(N.textAlign=a.textAlign)),P=y+m+O,V=x.x,$=x.y;l.setWidth(this.width),k?F>0&&V+P+f>this.right&&($=x.y+=U,x.line++,V=x.x=Wr(s,this.left+f,this.right-n[x.line])):F>0&&$+U>this.bottom&&(V=x.x=V+t[x.line].width+f,x.line++,$=x.y=Wr(s,this.top+L+f,this.bottom-t[x.line].height));let K=l.x(V);M(K,$,N),V=x5(B,V+y+m,k?V+P:this.right,e.rtl),T(l.x(V),$,N),k?x.x+=P+f:x.y+=U}),_2(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,n=xr(t.font),r=Gr(t.padding);if(!t.display)return;let s=pd(e.rtl,this.left,this.width),a=this.ctx,o=t.position,l=n.size/2,d=r.top+l,p,f=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),p=this.top+d,f=Wr(e.align,f,this.right-g);else{let x=this.columnSizes.reduce((y,S)=>Math.max(y,S.height),0);p=d+Wr(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}let m=Wr(o,f,f+g);a.textAlign=s.textAlign(Og(o)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=n.string,ec(a,t.text,m,p,n)}_computeTitleHeight(){let e=this.options.title,t=xr(e.font),n=Gr(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,s;if(co(e,this.left,this.right)&&co(t,this.top,this.bottom)){for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],co(e,r.left,r.left+r.width)&&co(t,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){let t=this.options;if(!W8(e.type,t))return;let n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let r=this._hoveredItem,s=H8(r,n);r&&!s&&ki(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!s&&ki(t.onHover,[e,n,this],this)}else n&&ki(t.onClick,[e,n,this],this)}};function W8(i,e){return!!((i==="mousemove"||i==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(i==="click"||i==="mouseup"))}var G8={id:"legend",_element:t_,start(i,e,t){let n=i.legend=new t_({ctx:i.ctx,options:t,chart:i});ts.configure(i,n,t),ts.addBox(i,n)},stop(i){ts.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,e,t){let n=i.legend;ts.configure(i,n,t),n.options=t},afterUpdate(i){let e=i.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(i,e){e.replay||i.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,e,t){let n=e.datasetIndex,r=t.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){let e=i.data.datasets,{labels:{usePointStyle:t,pointStyle:n,textAlign:r,color:s}}=i.legend.options;return i._getSortedDatasetMetas().map(a=>{let o=a.controller.getStyle(t?0:void 0),l=Gr(o.borderWidth);return{text:e[a.index].label,fillStyle:o.backgroundColor,fontColor:s,hidden:!a.visible,lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:o.borderColor,pointStyle:n||o.pointStyle,rotation:o.rotation,textAlign:r||o.textAlign,borderRadius:0,datasetIndex:a.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}},yf=class extends Xs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let r=Ti(n.text)?n.text.length:1;this._padding=Gr(n.padding);let s=r*xr(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:n,bottom:r,right:s,options:a}=this,o=a.align,l=0,d,p,f;return this.isHorizontal()?(p=Wr(o,n,s),f=t+e,d=s-n):(a.position==="left"?(p=n+e,f=Wr(o,r,t),l=Oi*-.5):(p=s-e,f=Wr(o,t,r),l=Oi*.5),d=r-t),{titleX:p,titleY:f,maxWidth:d,rotation:l}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let n=xr(t.font),s=n.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:l,rotation:d}=this._drawArgs(s);ec(e,t.text,0,0,n,{color:t.color,maxWidth:l,rotation:d,textAlign:Og(t.align),textBaseline:"middle",translation:[a,o]})}};function q8(i,e){let t=new yf({ctx:i.ctx,options:e,chart:i});ts.configure(i,t,e),ts.addBox(i,t),i.titleBlock=t}var X8={id:"title",_element:yf,start(i,e,t){q8(i,t)},stop(i){let e=i.titleBlock;ts.removeBox(i,e),delete i.titleBlock},beforeUpdate(i,e,t){let n=i.titleBlock;ts.configure(i,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Gg=new WeakMap,Y8={id:"subtitle",start(i,e,t){let n=new yf({ctx:i.ctx,options:t,chart:i});ts.configure(i,n,t),ts.addBox(i,n),Gg.set(i,n)},stop(i){ts.removeBox(i,Gg.get(i)),Gg.delete(i)},beforeUpdate(i,e,t){let n=Gg.get(i);ts.configure(i,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},xf={average(i){if(!i.length)return!1;let e,t,n=0,r=0,s=0;for(e=0,t=i.length;e<t;++e){let a=i[e].element;if(a&&a.hasValue()){let o=a.tooltipPosition();n+=o.x,r+=o.y,++s}}return{x:n/s,y:r/s}},nearest(i,e){if(!i.length)return!1;let t=e.x,n=e.y,r=Number.POSITIVE_INFINITY,s,a,o;for(s=0,a=i.length;s<a;++s){let l=i[s].element;if(l&&l.hasValue()){let d=l.getCenterPoint(),p=Ig(e,d);p<r&&(r=p,o=l)}}if(o){let l=o.tooltipPosition();t=l.x,n=l.y}return{x:t,y:n}}};function uo(i,e){return e&&(Ti(e)?Array.prototype.push.apply(i,e):i.push(e)),i}function $o(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function $8(i,e){let{element:t,datasetIndex:n,index:r}=e,s=i.getDatasetMeta(n).controller,{label:a,value:o}=s.getLabelAndValue(r);return{chart:i,label:a,parsed:s.getParsed(r),raw:i.data.datasets[n].data[r],formattedValue:o,dataset:s.getDataset(),dataIndex:r,datasetIndex:n,element:t}}function xT(i,e){let t=i.chart.ctx,{body:n,footer:r,title:s}=i,{boxWidth:a,boxHeight:o}=e,l=xr(e.bodyFont),d=xr(e.titleFont),p=xr(e.footerFont),f=s.length,g=r.length,m=n.length,x=Gr(e.padding),y=x.height,S=0,b=n.reduce((k,L)=>k+L.before.length+L.lines.length+L.after.length,0);if(b+=i.beforeBody.length+i.afterBody.length,f&&(y+=f*d.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),b){let k=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;y+=m*k+(b-m)*l.lineHeight+(b-1)*e.bodySpacing}g&&(y+=e.footerMarginTop+g*p.lineHeight+(g-1)*e.footerSpacing);let M=0,T=function(k){S=Math.max(S,t.measureText(k).width+M)};return t.save(),t.font=d.string,li(i.title,T),t.font=l.string,li(i.beforeBody.concat(i.afterBody),T),M=e.displayColors?a+2+e.boxPadding:0,li(n,k=>{li(k.before,T),li(k.lines,T),li(k.after,T)}),M=0,t.font=p.string,li(i.footer,T),t.restore(),S+=x.width,{width:S,height:y}}function K8(i,e){let{y:t,height:n}=e;return t<n/2?"top":t>i.height-n/2?"bottom":"center"}function Z8(i,e,t,n){let{x:r,width:s}=n,a=t.caretSize+t.caretPadding;if(i==="left"&&r+s+a>e.width||i==="right"&&r-s-a<0)return!0}function J8(i,e,t,n){let{x:r,width:s}=t,{width:a,chartArea:{left:o,right:l}}=i,d="center";return n==="center"?d=r<=(o+l)/2?"left":"right":r<=s/2?d="left":r>=a-s/2&&(d="right"),Z8(d,i,e,t)&&(d="center"),d}function bT(i,e,t){let n=t.yAlign||e.yAlign||K8(i,t);return{xAlign:t.xAlign||e.xAlign||J8(i,e,t,n),yAlign:n}}function Q8(i,e){let{x:t,width:n}=i;return e==="right"?t-=n:e==="center"&&(t-=n/2),t}function tB(i,e,t){let{y:n,height:r}=i;return e==="top"?n+=t:e==="bottom"?n-=r+t:n-=r/2,n}function yT(i,e,t,n){let{caretSize:r,caretPadding:s,cornerRadius:a}=i,{xAlign:o,yAlign:l}=t,d=r+s,{topLeft:p,topRight:f,bottomLeft:g,bottomRight:m}=nc(a),x=Q8(e,o),y=tB(e,l,d);return l==="center"?o==="left"?x+=d:o==="right"&&(x-=d):o==="left"?x-=Math.max(p,g)+r:o==="right"&&(x+=Math.max(f,m)+r),{x:Mr(x,0,n.width-e.width),y:Mr(y,0,n.height-e.height)}}function qg(i,e,t){let n=Gr(t.padding);return e==="center"?i.x+i.width/2:e==="right"?i.x+i.width-n.right:i.x+n.left}function ST(i){return uo([],$o(i))}function eB(i,e,t){return Xo(i,{tooltip:e,tooltipItems:t,type:"tooltip"})}function wT(i,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?i.override(t):i}var CT=(()=>{class i extends Xs{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,a=new $g(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=eB(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){let{callbacks:r}=n,s=r.beforeTitle.apply(this,[t]),a=r.title.apply(this,[t]),o=r.afterTitle.apply(this,[t]),l=[];return l=uo(l,$o(s)),l=uo(l,$o(a)),l=uo(l,$o(o)),l}getBeforeBody(t,n){return ST(n.callbacks.beforeBody.apply(this,[t]))}getBody(t,n){let{callbacks:r}=n,s=[];return li(t,a=>{let o={before:[],lines:[],after:[]},l=wT(r,a);uo(o.before,$o(l.beforeLabel.call(this,a))),uo(o.lines,l.label.call(this,a)),uo(o.after,$o(l.afterLabel.call(this,a))),s.push(o)}),s}getAfterBody(t,n){return ST(n.callbacks.afterBody.apply(this,[t]))}getFooter(t,n){let{callbacks:r}=n,s=r.beforeFooter.apply(this,[t]),a=r.footer.apply(this,[t]),o=r.afterFooter.apply(this,[t]),l=[];return l=uo(l,$o(s)),l=uo(l,$o(a)),l=uo(l,$o(o)),l}_createItems(t){let n=this._active,r=this.chart.data,s=[],a=[],o=[],l=[],d,p;for(d=0,p=n.length;d<p;++d)l.push($8(this.chart,n[d]));return t.filter&&(l=l.filter((f,g,m)=>t.filter(f,g,m,r))),t.itemSort&&(l=l.sort((f,g)=>t.itemSort(f,g,r))),li(l,f=>{let g=wT(t.callbacks,f);s.push(g.labelColor.call(this,f)),a.push(g.labelPointStyle.call(this,f)),o.push(g.labelTextColor.call(this,f))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=o,this.dataPoints=l,l}update(t,n){let r=this.options.setContext(this.getContext()),s=this._active,a,o=[];if(!s.length)this.opacity!==0&&(a={opacity:0});else{let l=xf[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);let d=this._size=xT(this,r),p=Object.assign({},l,d),f=bT(this.chart,r,p),g=yT(r,p,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,a={opacity:1,x:g.x,y:g.y,width:d.width,height:d.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,r,s){let a=this.getCaretPosition(t,r,s);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)}getCaretPosition(t,n,r){let{xAlign:s,yAlign:a}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:d,topRight:p,bottomLeft:f,bottomRight:g}=nc(l),{x:m,y:x}=t,{width:y,height:S}=n,b,M,T,k,L,U;return a==="center"?(L=x+S/2,s==="left"?(b=m,M=b-o,k=L+o,U=L-o):(b=m+y,M=b+o,k=L-o,U=L+o),T=b):(s==="left"?M=m+Math.max(d,f)+o:s==="right"?M=m+y-Math.max(p,g)-o:M=this.caretX,a==="top"?(k=x,L=k-o,b=M-o,T=M+o):(k=x+S,L=k+o,b=M+o,T=M-o),U=k),{x1:b,x2:M,x3:T,y1:k,y2:L,y3:U}}drawTitle(t,n,r){let s=this.title,a=s.length,o,l,d;if(a){let p=pd(r.rtl,this.x,this.width);for(t.x=qg(this,r.titleAlign,r),n.textAlign=p.textAlign(r.titleAlign),n.textBaseline="middle",o=xr(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,d=0;d<a;++d)n.fillText(s[d],p.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,d+1===a&&(t.y+=r.titleMarginBottom-l)}}_drawColorBox(t,n,r,s,a){let o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:d,boxWidth:p,boxPadding:f}=a,g=xr(a.bodyFont),m=qg(this,"left",a),x=s.x(m),y=d<g.lineHeight?(g.lineHeight-d)/2:0,S=n.y+y;if(a.usePointStyle){let b={radius:Math.min(p,d)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},M=s.leftForLtr(x,p)+p/2,T=S+d/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,Fg(t,b,M,T),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Fg(t,b,M,T)}else{t.lineWidth=Bn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;let b=s.leftForLtr(x,p-f),M=s.leftForLtr(s.xPlus(x,1),p-f-2),T=nc(o.borderRadius);Object.values(T).some(k=>k!==0)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,Fu(t,{x:b,y:S,w:p,h:d,radius:T}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Fu(t,{x:M,y:S+1,w:p-2,h:d-2,radius:T}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(b,S,p,d),t.strokeRect(b,S,p,d),t.fillStyle=o.backgroundColor,t.fillRect(M,S+1,p-2,d-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,n,r){let{body:s}=this,{bodySpacing:a,bodyAlign:o,displayColors:l,boxHeight:d,boxWidth:p,boxPadding:f}=r,g=xr(r.bodyFont),m=g.lineHeight,x=0,y=pd(r.rtl,this.x,this.width),S=function(O){n.fillText(O,y.x(t.x+x),t.y+m/2),t.y+=m+a},b=y.textAlign(o),M,T,k,L,U,N,F;for(n.textAlign=o,n.textBaseline="middle",n.font=g.string,t.x=qg(this,b,r),n.fillStyle=r.bodyColor,li(this.beforeBody,S),x=l&&b!=="right"?o==="center"?p/2+f:p+2+f:0,L=0,N=s.length;L<N;++L){for(M=s[L],T=this.labelTextColors[L],n.fillStyle=T,li(M.before,S),k=M.lines,l&&k.length&&(this._drawColorBox(n,t,L,y,r),m=Math.max(g.lineHeight,d)),U=0,F=k.length;U<F;++U)S(k[U]),m=g.lineHeight;li(M.after,S)}x=0,m=g.lineHeight,li(this.afterBody,S),t.y-=a}drawFooter(t,n,r){let s=this.footer,a=s.length,o,l;if(a){let d=pd(r.rtl,this.x,this.width);for(t.x=qg(this,r.footerAlign,r),t.y+=r.footerMarginTop,n.textAlign=d.textAlign(r.footerAlign),n.textBaseline="middle",o=xr(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,l=0;l<a;++l)n.fillText(s[l],d.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+r.footerSpacing}}drawBackground(t,n,r,s){let{xAlign:a,yAlign:o}=this,{x:l,y:d}=t,{width:p,height:f}=r,{topLeft:g,topRight:m,bottomLeft:x,bottomRight:y}=nc(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(l+g,d),o==="top"&&this.drawCaret(t,n,r,s),n.lineTo(l+p-m,d),n.quadraticCurveTo(l+p,d,l+p,d+m),o==="center"&&a==="right"&&this.drawCaret(t,n,r,s),n.lineTo(l+p,d+f-y),n.quadraticCurveTo(l+p,d+f,l+p-y,d+f),o==="bottom"&&this.drawCaret(t,n,r,s),n.lineTo(l+x,d+f),n.quadraticCurveTo(l,d+f,l,d+f-x),o==="center"&&a==="left"&&this.drawCaret(t,n,r,s),n.lineTo(l,d+g),n.quadraticCurveTo(l,d,l+g,d),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){let n=this.chart,r=this.$animations,s=r&&r.x,a=r&&r.y;if(s||a){let o=xf[t.position].call(this,this._active,this._eventPosition);if(!o)return;let l=this._size=xT(this,t),d=Object.assign({},o,this._size),p=bT(n,t,d),f=yT(t,d,p,n);(s._to!==f.x||a._to!==f.y)&&(this.xAlign=p.xAlign,this.yAlign=p.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(t){let n=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(n);let s={width:this.width,height:this.height},a={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let o=Gr(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=r,this.drawBackground(a,t,s,n),g2(t,n.textDirection),a.y+=o.top,this.drawTitle(a,t,n),this.drawBody(a,t,n),this.drawFooter(a,t,n),_2(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){let r=this._active,s=t.map(({datasetIndex:l,index:d})=>{let p=this.chart.getDatasetMeta(l);if(!p)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:p.data[d],index:d}}),a=!cf(r,s),o=this._positionChanged(s,n);(a||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,a=this._active||[],o=this._getActiveElements(t,a,n,r),l=this._positionChanged(o,t),d=n||!cf(o,a)||l;return d&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),d}_getActiveElements(t,n,r,s){let a=this.options;if(t.type==="mouseout")return[];if(!s)return n;let o=this.chart.getElementsAtEventForMode(t,a.mode,a,r);return a.reverse&&o.reverse(),o}_positionChanged(t,n){let{caretX:r,caretY:s,options:a}=this,o=xf[a.position].call(this,t,n);return o!==!1&&(r!==o.x||s!==o.y)}}return i.positioners=xf,i})(),nB={id:"tooltip",_element:CT,positioners:xf,afterInit(i,e,t){t&&(i.tooltip=new CT({chart:i,options:t}))},beforeUpdate(i,e,t){i.tooltip&&i.tooltip.initialize(t)},reset(i,e,t){i.tooltip&&i.tooltip.initialize(t)},afterDraw(i){let e=i.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(i.notifyPlugins("beforeTooltipDraw",t)===!1)return;e.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",t)}},afterEvent(i,e){if(i.tooltip){let t=e.replay;i.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,e)=>e.bodyFont.size,boxWidth:(i,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:lo,title(i){if(i.length>0){let e=i[0],t=e.chart.data.labels,n=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return t[e.dataIndex]}return""},afterTitle:lo,beforeBody:lo,beforeLabel:lo,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let e=i.dataset.label||"";e&&(e+=": ");let t=i.formattedValue;return Yn(t)||(e+=t),e},labelColor(i){let t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){let t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:lo,afterBody:lo,beforeFooter:lo,footer:lo,afterFooter:lo}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},iB=Object.freeze({__proto__:null,Decimation:S8,Filler:j8,Legend:G8,SubTitle:Y8,Title:X8,Tooltip:nB}),rB=(i,e,t,n)=>(typeof e=="string"?(t=i.push(e)-1,n.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function sB(i,e,t,n){let r=i.indexOf(e);if(r===-1)return rB(i,e,t,n);let s=i.lastIndexOf(e);return r!==s?t:r}var aB=(i,e)=>i===null?null:Mr(Math.round(i),0,e),Wu=class extends md{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let t=this._addedLabels;if(t.length){let n=this.getLabels();for(let{index:r,label:s}of t)n[r]===s&&n.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Yn(e))return null;let n=this.getLabels();return t=isFinite(t)&&n[t]===e?t:sB(n,e,wn(t,e),this._addedLabels),aB(t,n.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){let e=this.min,t=this.max,n=this.options.offset,r=[],s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=t;a++)r.push({value:a});return r}getLabelForValue(e){let t=this.getLabels();return e>=0&&e<t.length?t[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}};Wu.id="category";Wu.defaults={ticks:{callback:Wu.prototype.getLabelForValue}};function oB(i,e){let t=[],{bounds:r,step:s,min:a,max:o,precision:l,count:d,maxTicks:p,maxDigits:f,includeBounds:g}=i,m=s||1,x=p-1,{min:y,max:S}=e,b=!Yn(a),M=!Yn(o),T=!Yn(d),k=(S-y)/(f+1),L=qy((S-y)/x/m)*m,U,N,F,O;if(L<1e-14&&!b&&!M)return[{value:y},{value:S}];O=Math.ceil(S/L)-Math.floor(y/L),O>x&&(L=qy(O*L/x/m)*m),Yn(l)||(U=Math.pow(10,l),L=Math.ceil(L*U)/U),r==="ticks"?(N=Math.floor(y/L)*L,F=Math.ceil(S/L)*L):(N=y,F=S),b&&M&&s&&h5((o-a)/s,L/1e3)?(O=Math.round(Math.min((o-a)/L,p)),L=(o-a)/O,N=a,F=o):T?(N=b?a:N,F=M?o:F,O=d-1,L=(F-N)/O):(O=(F-N)/L,Ou(O,Math.round(O),L/1e3)?O=Math.round(O):O=Math.ceil(O));let B=Math.max(Yy(L),Yy(N));U=Math.pow(10,Yn(l)?B:l),N=Math.round(N*U)/U,F=Math.round(F*U)/U;let P=0;for(b&&(g&&N!==a?(t.push({value:a}),N<a&&P++,Ou(Math.round((N+P*L)*U)/U,a,MT(a,k,i))&&P++):N<a&&P++);P<O;++P)t.push({value:Math.round((N+P*L)*U)/U});return M&&g&&F!==o?t.length&&Ou(t[t.length-1].value,o,MT(o,k,i))?t[t.length-1].value=o:t.push({value:o}):(!M||F===o)&&t.push({value:F}),t}function MT(i,e,{horizontal:t,minRotation:n}){let r=_a(n),s=(t?Math.sin(r):Math.cos(r))||.001,a=.75*e*(""+i).length;return Math.min(e/s,a)}var Gu=class extends md{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Yn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds(),{min:r,max:s}=this,a=l=>r=t?r:l,o=l=>s=n?s:l;if(e){let l=Fa(r),d=Fa(s);l<0&&d<0?o(0):l>0&&d>0&&a(0)}if(r===s){let l=1;(s>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(s*.05)),o(s+l),e||a(r-l)}this.min=r,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,n=this.getTickLimit();n=Math.max(2,n);let r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,a=oB(r,s);return e.bounds==="ticks"&&Xy(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){let e=this.ticks,t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){let r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Vu(e,this.chart.options.locale,this.options.ticks.format)}},Sf=class extends Gu{determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Qi(e)?e:0,this.max=Qi(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,n=_a(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}};Sf.id="linear";Sf.defaults={ticks:{callback:e_.formatters.numeric}};function ET(i){return i/Math.pow(10,Math.floor(qs(i)))===1}function lB(i,e){let t=Math.floor(qs(e.max)),n=Math.ceil(e.max/Math.pow(10,t)),r=[],s=Gs(i.min,Math.pow(10,Math.floor(qs(e.min)))),a=Math.floor(qs(s)),o=Math.floor(s/Math.pow(10,a)),l=a<0?Math.pow(10,Math.abs(a)):1;do r.push({value:s,major:ET(s)}),++o,o===10&&(o=1,++a,l=a>=0?1:l),s=Math.round(o*Math.pow(10,a)*l)/l;while(a<t||a===t&&o<n);let d=Gs(i.max,s);return r.push({value:d,major:ET(s)}),r}var wf=class extends md{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let n=Gu.prototype.parse.apply(this,[e,t]);if(n===0){this._zero=!0;return}return Qi(n)&&n>0?n:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Qi(e)?Math.max(0,e):null,this.max=Qi(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),n=this.min,r=this.max,s=l=>n=e?n:l,a=l=>r=t?r:l,o=(l,d)=>Math.pow(10,Math.floor(qs(l))+d);n===r&&(n<=0?(s(1),a(10)):(s(o(n,-1)),a(o(r,1)))),n<=0&&s(o(r,-1)),r<=0&&a(o(n,1)),this._zero&&this.min!==this._suggestedMin&&n===o(this.min,0)&&s(o(n,-1)),this.min=n,this.max=r}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},n=lB(t,this);return e.bounds==="ticks"&&Xy(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Vu(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=qs(e),this._valueRange=qs(this.max)-qs(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(qs(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};wf.id="logarithmic";wf.defaults={ticks:{callback:e_.formatters.logarithmic,major:{enabled:!0}}};function z2(i){let e=i.ticks;if(e.display&&i.display){let t=Gr(e.backdropPadding);return wn(e.font&&e.font.size,Rn.font.size)+t.height}return 0}function cB(i,e,t){return t=Ti(t)?t:[t],{w:M5(i,e.string,t),h:t.length*e.lineHeight}}function AT(i,e,t,n,r){return i===n||i===r?{start:e-t/2,end:e+t/2}:i<n||i>r?{start:e-t,end:e}:{start:e,end:e+t}}function dB(i){let e={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},t=Object.assign({},e),n=[],r=[],s=i._pointLabels.length,a=i.options.pointLabels,o=a.centerPointLabels?Oi/s:0;for(let l=0;l<s;l++){let d=a.setContext(i.getPointLabelContext(l));r[l]=d.padding;let p=i.getPointPosition(l,i.drawingArea+r[l],o),f=xr(d.font),g=cB(i.ctx,f,i._pointLabels[l]);n[l]=g;let m=Is(i.getIndexAngle(l)+o),x=Math.round(Rg(m)),y=AT(x,p.x,g.w,0,180),S=AT(x,p.y,g.h,90,270);uB(t,e,m,y,S)}i.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),i._pointLabelItems=hB(i,n,r)}function uB(i,e,t,n,r){let s=Math.abs(Math.sin(t)),a=Math.abs(Math.cos(t)),o=0,l=0;n.start<e.l?(o=(e.l-n.start)/s,i.l=Math.min(i.l,e.l-o)):n.end>e.r&&(o=(n.end-e.r)/s,i.r=Math.max(i.r,e.r+o)),r.start<e.t?(l=(e.t-r.start)/a,i.t=Math.min(i.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/a,i.b=Math.max(i.b,e.b+l))}function hB(i,e,t){let n=[],r=i._pointLabels.length,s=i.options,a=z2(s)/2,o=i.drawingArea,l=s.pointLabels.centerPointLabels?Oi/r:0;for(let d=0;d<r;d++){let p=i.getPointPosition(d,o+a+t[d],l),f=Math.round(Rg(Is(p.angle+Gi))),g=e[d],m=mB(p.y,g.h,f),x=pB(f),y=fB(p.x,g.w,x);n.push({x:p.x,y:m,textAlign:x,left:y,top:m,right:y+g.w,bottom:m+g.h})}return n}function pB(i){return i===0||i===180?"center":i<180?"left":"right"}function fB(i,e,t){return t==="right"?i-=e:t==="center"&&(i-=e/2),i}function mB(i,e,t){return t===90||t===270?i-=e/2:(t>270||t<90)&&(i-=e),i}function gB(i,e){let{ctx:t,options:{pointLabels:n}}=i;for(let r=e-1;r>=0;r--){let s=n.setContext(i.getPointLabelContext(r)),a=xr(s.font),{x:o,y:l,textAlign:d,left:p,top:f,right:g,bottom:m}=i._pointLabelItems[r],{backdropColor:x}=s;if(!Yn(x)){let y=nc(s.borderRadius),S=Gr(s.backdropPadding);t.fillStyle=x;let b=p-S.left,M=f-S.top,T=g-p+S.width,k=m-f+S.height;Object.values(y).some(L=>L!==0)?(t.beginPath(),Fu(t,{x:b,y:M,w:T,h:k,radius:y}),t.fill()):t.fillRect(b,M,T,k)}ec(t,i._pointLabels[r],o,l+a.lineHeight/2,a,{color:s.color,textAlign:d,textBaseline:"middle"})}}function ZT(i,e,t,n){let{ctx:r}=i;if(t)r.arc(i.xCenter,i.yCenter,e,0,fi);else{let s=i.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let a=1;a<n;a++)s=i.getPointPosition(a,e),r.lineTo(s.x,s.y)}}function _B(i,e,t,n){let r=i.ctx,s=e.circular,{color:a,lineWidth:o}=e;!s&&!n||!a||!o||t<0||(r.save(),r.strokeStyle=a,r.lineWidth=o,r.setLineDash(e.borderDash),r.lineDashOffset=e.borderDashOffset,r.beginPath(),ZT(i,t,s,n),r.closePath(),r.stroke(),r.restore())}function vB(i,e,t){return Xo(i,{label:t,index:e,type:"pointLabel"})}var gd=class extends Gu{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=Gr(z2(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Qi(e)&&!isNaN(e)?e:0,this.max=Qi(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/z2(this.options))}generateTickLabels(e){Gu.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,n)=>{let r=ki(this.options.pointLabels.callback,[t,n],this);return r||r===0?r:""}).filter((t,n)=>this.chart.getDataVisibility(n))}fit(){let e=this.options;e.display&&e.pointLabels.display?dB(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){let t=fi/(this._pointLabels.length||1),n=this.options.startAngle||0;return Is(e*t+_a(n))}getDistanceFromCenterForValue(e){if(Yn(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Yn(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let n=t[e];return vB(this.getContext(),e,n)}}getPointPosition(e,t,n=0){let r=this.getIndexAngle(e)-Gi+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:n,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let n=this.ctx;n.save(),n.beginPath(),ZT(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:n,grid:r}=t,s=this._pointLabels.length,a,o,l;if(t.pointLabels.display&&gB(this,s),r.display&&this.ticks.forEach((d,p)=>{if(p!==0){o=this.getDistanceFromCenterForValue(d.value);let f=r.setContext(this.getContext(p-1));_B(this,f,o,s)}}),n.display){for(e.save(),a=s-1;a>=0;a--){let d=n.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:f}=d;!f||!p||(e.lineWidth=f,e.strokeStyle=p,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,o=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;let r=this.getIndexAngle(0),s,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,l)=>{if(l===0&&!t.reverse)return;let d=n.setContext(this.getContext(l)),p=xr(d.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),d.showLabelBackdrop){e.font=p.string,a=e.measureText(o.label).width,e.fillStyle=d.backdropColor;let f=Gr(d.backdropPadding);e.fillRect(-a/2-f.left,-s-p.size/2-f.top,a+f.width,p.size+f.height)}ec(e,o.label,0,-s,p,{color:d.color})}),e.restore()}drawTitle(){}};gd.id="radialLinear";gd.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:e_.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(i){return i},padding:5,centerPointLabels:!1}};gd.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};gd.descriptors={angleLines:{_fallback:"grid"}};var i_={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ds=Object.keys(i_);function xB(i,e){return i-e}function TT(i,e){if(Yn(e))return null;let t=i._adapter,{parser:n,round:r,isoWeekday:s}=i._parseOpts,a=e;return typeof n=="function"&&(a=n(a)),Qi(a)||(a=typeof n=="string"?t.parse(a,n):t.parse(a)),a===null?null:(r&&(a=r==="week"&&(hd(s)||s===!0)?t.startOf(a,"isoWeek",s):t.startOf(a,r)),+a)}function kT(i,e,t,n){let r=Ds.length;for(let s=Ds.indexOf(i);s<r-1;++s){let a=i_[Ds[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((t-e)/(o*a.size))<=n)return Ds[s]}return Ds[r-1]}function bB(i,e,t,n,r){for(let s=Ds.length-1;s>=Ds.indexOf(t);s--){let a=Ds[s];if(i_[a].common&&i._adapter.diff(r,n,a)>=e-1)return a}return Ds[t?Ds.indexOf(t):0]}function yB(i){for(let e=Ds.indexOf(i)+1,t=Ds.length;e<t;++e)if(i_[Ds[e]].common)return Ds[e]}function IT(i,e,t){if(!t)i[e]=!0;else if(t.length){let{lo:n,hi:r}=Lg(t,e),s=t[n]>=e?t[n]:t[r];i[s]=!0}}function SB(i,e,t,n){let r=i._adapter,s=+r.startOf(e[0].value,n),a=e[e.length-1].value,o,l;for(o=s;o<=a;o=+r.add(o,1,n))l=t[o],l>=0&&(e[l].major=!0);return e}function DT(i,e,t){let n=[],r={},s=e.length,a,o;for(a=0;a<s;++a)o=e[a],r[o]=a,n.push({value:o,major:!1});return s===0||!t?n:SB(i,n,r,t)}var H2=(()=>{class i extends md{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n){let r=t.time||(t.time={}),s=this._adapter=new u6._date(t.adapters.date);s.init(n),Lu(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:TT(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,n=this._adapter,r=t.time.unit||"day",{min:s,max:a,minDefined:o,maxDefined:l}=this.getUserBounds();function d(p){!o&&!isNaN(p.min)&&(s=Math.min(s,p.min)),!l&&!isNaN(p.max)&&(a=Math.max(a,p.max))}(!o||!l)&&(d(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&d(this.getMinMax(!1))),s=Qi(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),a=Qi(a)&&!isNaN(a)?a:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){let t=this.getLabelTimestamps(),n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],r=t[t.length-1]),{min:n,max:r}}buildTicks(){let t=this.options,n=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let a=this.min,o=this.max,l=m5(s,a,o);return this._unit=n.unit||(r.autoSkip?kT(n.minUnit,this.min,this.max,this._getLabelCapacity(a)):bB(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:yB(this._unit),this.initOffsets(s),t.reverse&&l.reverse(),DT(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t){let n=0,r=0,s,a;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,a=this.getDecimalForValue(t[t.length-1]),t.length===1?r=a:r=(a-this.getDecimalForValue(t[t.length-2]))/2);let o=t.length<3?.5:.25;n=Mr(n,0,o),r=Mr(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){let t=this._adapter,n=this.min,r=this.max,s=this.options,a=s.time,o=a.unit||kT(a.minUnit,n,r,this._getLabelCapacity(n)),l=wn(a.stepSize,1),d=o==="week"?a.isoWeekday:!1,p=hd(d)||d===!0,f={},g=n,m,x;if(p&&(g=+t.startOf(g,"isoWeek",d)),g=+t.startOf(g,p?"day":o),t.diff(r,n,o)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+o);let y=s.ticks.source==="data"&&this.getDataTimestamps();for(m=g,x=0;m<r;m=+t.add(m,l,o),x++)IT(f,m,y);return(m===r||s.bounds==="ticks"||x===1)&&IT(f,m,y),Object.keys(f).sort((S,b)=>S-b).map(S=>+S)}getLabelForValue(t){let n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(t,r.tooltipFormat):n.format(t,r.displayFormats.datetime)}_tickFormatFunction(t,n,r,s){let a=this.options,o=a.time.displayFormats,l=this._unit,d=this._majorUnit,p=l&&o[l],f=d&&o[d],g=r[n],m=d&&f&&g&&g.major,x=this._adapter.format(t,s||(m?f:p)),y=a.ticks.callback;return y?ki(y,[x,n,r],this):x}generateTickLabels(t){let n,r,s;for(n=0,r=t.length;n<r;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let n=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(t){let n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){let n=this.options.ticks,r=this.ctx.measureText(t).width,s=_a(this.isHorizontal()?n.maxRotation:n.minRotation),a=Math.cos(s),o=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*a+l*o,h:r*o+l*a}}_getLabelCapacity(t){let n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,a=this._tickFormatFunction(t,0,DT(this,[t],this._majorUnit),s),o=this._getLabelSize(a),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,r;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],n,r;if(t.length)return t;let s=this.getLabels();for(n=0,r=s.length;n<r;++n)t.push(TT(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Zy(t.sort(xB))}}return i.id="time",i.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},i})();function Xg(i,e,t){let n=0,r=i.length-1,s,a,o,l;t?(e>=i[n].pos&&e<=i[r].pos&&({lo:n,hi:r}=oo(i,"pos",e)),{pos:s,time:o}=i[n],{pos:a,time:l}=i[r]):(e>=i[n].time&&e<=i[r].time&&({lo:n,hi:r}=oo(i,"time",e)),{time:s,pos:o}=i[n],{time:a,pos:l}=i[r]);let d=a-s;return d?o+(l-o)*(e-s)/d:o}var Cf=class extends H2{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Xg(t,this.min),this._tableRange=Xg(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:n}=this,r=[],s=[],a,o,l,d,p;for(a=0,o=e.length;a<o;++a)d=e[a],d>=t&&d<=n&&r.push(d);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(a=0,o=r.length;a<o;++a)p=r[a+1],l=r[a-1],d=r[a],Math.round((p+l)/2)!==d&&s.push({time:d,pos:a/(o-1)});return s}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),n=this.getLabelTimestamps();return t.length&&n.length?e=this.normalize(t.concat(n)):e=t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Xg(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Xg(this._table,n*this._tableRange+this._minPos,!0)}};Cf.id="timeseries";Cf.defaults=H2.defaults;var wB=Object.freeze({__proto__:null,CategoryScale:Wu,LinearScale:Sf,LogarithmicScale:wf,RadialLinearScale:gd,TimeScale:H2,TimeSeriesScale:Cf}),JT=[c6,v8,iB,wB];var CB=typeof global=="object"&&global&&global.Object===Object&&global,r_=CB;var MB=typeof self=="object"&&self&&self.Object===Object&&self,EB=r_||MB||Function("return this")(),va=EB;var AB=va.Symbol,qu=AB;var QT=Object.prototype,TB=QT.hasOwnProperty,kB=QT.toString,Ef=qu?qu.toStringTag:void 0;function IB(i){var e=TB.call(i,Ef),t=i[Ef];try{i[Ef]=void 0;var n=!0}catch{}var r=kB.call(i);return n&&(e?i[Ef]=t:delete i[Ef]),r}var tk=IB;var DB=Object.prototype,PB=DB.toString;function RB(i){return PB.call(i)}var ek=RB;var LB="[object Null]",OB="[object Undefined]",nk=qu?qu.toStringTag:void 0;function NB(i){return i==null?i===void 0?OB:LB:nk&&nk in Object(i)?tk(i):ek(i)}var ac=NB;function FB(i){return i!=null&&typeof i=="object"}var fo=FB;var BB=Array.isArray,Af=BB;function VB(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var Ps=VB;function UB(i){return i}var s_=UB;var zB="[object AsyncFunction]",jB="[object Function]",HB="[object GeneratorFunction]",WB="[object Proxy]";function GB(i){if(!Ps(i))return!1;var e=ac(i);return e==jB||e==HB||e==zB||e==WB}var Xu=GB;var qB=va["__core-js_shared__"],a_=qB;var ik=function(){var i=/[^.]+$/.exec(a_&&a_.keys&&a_.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function XB(i){return!!ik&&ik in i}var rk=XB;var YB=Function.prototype,$B=YB.toString;function KB(i){if(i!=null){try{return $B.call(i)}catch{}try{return i+""}catch{}}return""}var sk=KB;var ZB=/[\\^$.*+?()[\]{}|]/g,JB=/^\[object .+?Constructor\]$/,QB=Function.prototype,tV=Object.prototype,eV=QB.toString,nV=tV.hasOwnProperty,iV=RegExp("^"+eV.call(nV).replace(ZB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rV(i){if(!Ps(i)||rk(i))return!1;var e=Xu(i)?iV:JB;return e.test(sk(i))}var ak=rV;function sV(i,e){return i?.[e]}var ok=sV;function aV(i,e){var t=ok(i,e);return ak(t)?t:void 0}var Yu=aV;var lk=Object.create,oV=function(){function i(){}return function(e){if(!Ps(e))return{};if(lk)return lk(e);i.prototype=e;var t=new i;return i.prototype=void 0,t}}(),ck=oV;function lV(i,e,t){switch(t.length){case 0:return i.call(e);case 1:return i.call(e,t[0]);case 2:return i.call(e,t[0],t[1]);case 3:return i.call(e,t[0],t[1],t[2])}return i.apply(e,t)}var dk=lV;function cV(i,e){var t=-1,n=i.length;for(e||(e=Array(n));++t<n;)e[t]=i[t];return e}var uk=cV;var dV=800,uV=16,hV=Date.now;function pV(i){var e=0,t=0;return function(){var n=hV(),r=uV-(n-t);if(t=n,r>0){if(++e>=dV)return arguments[0]}else e=0;return i.apply(void 0,arguments)}}var hk=pV;function fV(i){return function(){return i}}var pk=fV;var mV=function(){try{var i=Yu(Object,"defineProperty");return i({},"",{}),i}catch{}}(),$u=mV;var gV=$u?function(i,e){return $u(i,"toString",{configurable:!0,enumerable:!1,value:pk(e),writable:!0})}:s_,fk=gV;var _V=hk(fk),mk=_V;var vV=9007199254740991,xV=/^(?:0|[1-9]\d*)$/;function bV(i,e){var t=typeof i;return e=e??vV,!!e&&(t=="number"||t!="symbol"&&xV.test(i))&&i>-1&&i%1==0&&i<e}var o_=bV;function yV(i,e,t){e=="__proto__"&&$u?$u(i,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):i[e]=t}var Ku=yV;function SV(i,e){return i===e||i!==i&&e!==e}var oc=SV;var wV=Object.prototype,CV=wV.hasOwnProperty;function MV(i,e,t){var n=i[e];(!(CV.call(i,e)&&oc(n,t))||t===void 0&&!(e in i))&&Ku(i,e,t)}var gk=MV;function EV(i,e,t,n){var r=!t;t||(t={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=n?n(t[o],i[o],o,t,i):void 0;l===void 0&&(l=i[o]),r?Ku(t,o,l):gk(t,o,l)}return t}var _k=EV;var vk=Math.max;function AV(i,e,t){return e=vk(e===void 0?i.length-1:e,0),function(){for(var n=arguments,r=-1,s=vk(n.length-e,0),a=Array(s);++r<s;)a[r]=n[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=n[r];return o[e]=t(a),dk(i,this,o)}}var xk=AV;function TV(i,e){return mk(xk(i,e,s_),i+"")}var bk=TV;var kV=9007199254740991;function IV(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=kV}var l_=IV;function DV(i){return i!=null&&l_(i.length)&&!Xu(i)}var Zu=DV;function PV(i,e,t){if(!Ps(t))return!1;var n=typeof e;return(n=="number"?Zu(t)&&o_(e,t.length):n=="string"&&e in t)?oc(t[e],i):!1}var yk=PV;function RV(i){return bk(function(e,t){var n=-1,r=t.length,s=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(s=i.length>3&&typeof s=="function"?(r--,s):void 0,a&&yk(t[0],t[1],a)&&(s=r<3?void 0:s,r=1),e=Object(e);++n<r;){var o=t[n];o&&i(e,o,n,s)}return e})}var Sk=RV;var LV=Object.prototype;function OV(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||LV;return i===t}var c_=OV;function NV(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n}var wk=NV;var FV="[object Arguments]";function BV(i){return fo(i)&&ac(i)==FV}var W2=BV;var Ck=Object.prototype,VV=Ck.hasOwnProperty,UV=Ck.propertyIsEnumerable,zV=W2(function(){return arguments}())?W2:function(i){return fo(i)&&VV.call(i,"callee")&&!UV.call(i,"callee")},Tf=zV;function jV(){return!1}var Mk=jV;var Tk=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ek=Tk&&typeof module=="object"&&module&&!module.nodeType&&module,HV=Ek&&Ek.exports===Tk,Ak=HV?va.Buffer:void 0,WV=Ak?Ak.isBuffer:void 0,GV=WV||Mk,d_=GV;var qV="[object Arguments]",XV="[object Array]",YV="[object Boolean]",$V="[object Date]",KV="[object Error]",ZV="[object Function]",JV="[object Map]",QV="[object Number]",tU="[object Object]",eU="[object RegExp]",nU="[object Set]",iU="[object String]",rU="[object WeakMap]",sU="[object ArrayBuffer]",aU="[object DataView]",oU="[object Float32Array]",lU="[object Float64Array]",cU="[object Int8Array]",dU="[object Int16Array]",uU="[object Int32Array]",hU="[object Uint8Array]",pU="[object Uint8ClampedArray]",fU="[object Uint16Array]",mU="[object Uint32Array]",Ni={};Ni[oU]=Ni[lU]=Ni[cU]=Ni[dU]=Ni[uU]=Ni[hU]=Ni[pU]=Ni[fU]=Ni[mU]=!0;Ni[qV]=Ni[XV]=Ni[sU]=Ni[YV]=Ni[aU]=Ni[$V]=Ni[KV]=Ni[ZV]=Ni[JV]=Ni[QV]=Ni[tU]=Ni[eU]=Ni[nU]=Ni[iU]=Ni[rU]=!1;function gU(i){return fo(i)&&l_(i.length)&&!!Ni[ac(i)]}var kk=gU;function _U(i){return function(e){return i(e)}}var Ik=_U;var Dk=typeof exports=="object"&&exports&&!exports.nodeType&&exports,kf=Dk&&typeof module=="object"&&module&&!module.nodeType&&module,vU=kf&&kf.exports===Dk,G2=vU&&r_.process,xU=function(){try{var i=kf&&kf.require&&kf.require("util").types;return i||G2&&G2.binding&&G2.binding("util")}catch{}}(),q2=xU;var Pk=q2&&q2.isTypedArray,bU=Pk?Ik(Pk):kk,u_=bU;var yU=Object.prototype,SU=yU.hasOwnProperty;function wU(i,e){var t=Af(i),n=!t&&Tf(i),r=!t&&!n&&d_(i),s=!t&&!n&&!r&&u_(i),a=t||n||r||s,o=a?wk(i.length,String):[],l=o.length;for(var d in i)(e||SU.call(i,d))&&!(a&&(d=="length"||r&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||o_(d,l)))&&o.push(d);return o}var Rk=wU;function CU(i,e){return function(t){return i(e(t))}}var Lk=CU;function MU(i){var e=[];if(i!=null)for(var t in Object(i))e.push(t);return e}var Ok=MU;var EU=Object.prototype,AU=EU.hasOwnProperty;function TU(i){if(!Ps(i))return Ok(i);var e=c_(i),t=[];for(var n in i)n=="constructor"&&(e||!AU.call(i,n))||t.push(n);return t}var Nk=TU;function kU(i){return Zu(i)?Rk(i,!0):Nk(i)}var h_=kU;var IU=Yu(Object,"create"),Zo=IU;function DU(){this.__data__=Zo?Zo(null):{},this.size=0}var Fk=DU;function PU(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}var Bk=PU;var RU="__lodash_hash_undefined__",LU=Object.prototype,OU=LU.hasOwnProperty;function NU(i){var e=this.__data__;if(Zo){var t=e[i];return t===RU?void 0:t}return OU.call(e,i)?e[i]:void 0}var Vk=NU;var FU=Object.prototype,BU=FU.hasOwnProperty;function VU(i){var e=this.__data__;return Zo?e[i]!==void 0:BU.call(e,i)}var Uk=VU;var UU="__lodash_hash_undefined__";function zU(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=Zo&&e===void 0?UU:e,this}var zk=zU;function Ju(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Ju.prototype.clear=Fk;Ju.prototype.delete=Bk;Ju.prototype.get=Vk;Ju.prototype.has=Uk;Ju.prototype.set=zk;var X2=Ju;function jU(){this.__data__=[],this.size=0}var jk=jU;function HU(i,e){for(var t=i.length;t--;)if(oc(i[t][0],e))return t;return-1}var lc=HU;var WU=Array.prototype,GU=WU.splice;function qU(i){var e=this.__data__,t=lc(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():GU.call(e,t,1),--this.size,!0}var Hk=qU;function XU(i){var e=this.__data__,t=lc(e,i);return t<0?void 0:e[t][1]}var Wk=XU;function YU(i){return lc(this.__data__,i)>-1}var Gk=YU;function $U(i,e){var t=this.__data__,n=lc(t,i);return n<0?(++this.size,t.push([i,e])):t[n][1]=e,this}var qk=$U;function Qu(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Qu.prototype.clear=jk;Qu.prototype.delete=Hk;Qu.prototype.get=Wk;Qu.prototype.has=Gk;Qu.prototype.set=qk;var cc=Qu;var KU=Yu(va,"Map"),p_=KU;function ZU(){this.size=0,this.__data__={hash:new X2,map:new(p_||cc),string:new X2}}var Xk=ZU;function JU(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}var Yk=JU;function QU(i,e){var t=i.__data__;return Yk(e)?t[typeof e=="string"?"string":"hash"]:t.map}var dc=QU;function t7(i){var e=dc(this,i).delete(i);return this.size-=e?1:0,e}var $k=t7;function e7(i){return dc(this,i).get(i)}var Kk=e7;function n7(i){return dc(this,i).has(i)}var Zk=n7;function i7(i,e){var t=dc(this,i),n=t.size;return t.set(i,e),this.size+=t.size==n?0:1,this}var Jk=i7;function th(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}th.prototype.clear=Xk;th.prototype.delete=$k;th.prototype.get=Kk;th.prototype.has=Zk;th.prototype.set=Jk;var Qk=th;var r7=Lk(Object.getPrototypeOf,Object),f_=r7;var s7="[object Object]",a7=Function.prototype,o7=Object.prototype,tI=a7.toString,l7=o7.hasOwnProperty,c7=tI.call(Object);function d7(i){if(!fo(i)||ac(i)!=s7)return!1;var e=f_(i);if(e===null)return!0;var t=l7.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&tI.call(t)==c7}var eI=d7;function u7(){this.__data__=new cc,this.size=0}var nI=u7;function h7(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}var iI=h7;function p7(i){return this.__data__.get(i)}var rI=p7;function f7(i){return this.__data__.has(i)}var sI=f7;var m7=200;function g7(i,e){var t=this.__data__;if(t instanceof cc){var n=t.__data__;if(!p_||n.length<m7-1)return n.push([i,e]),this.size=++t.size,this;t=this.__data__=new Qk(n)}return t.set(i,e),this.size=t.size,this}var aI=g7;function eh(i){var e=this.__data__=new cc(i);this.size=e.size}eh.prototype.clear=nI;eh.prototype.delete=iI;eh.prototype.get=rI;eh.prototype.has=sI;eh.prototype.set=aI;var oI=eh;var uI=typeof exports=="object"&&exports&&!exports.nodeType&&exports,lI=uI&&typeof module=="object"&&module&&!module.nodeType&&module,_7=lI&&lI.exports===uI,cI=_7?va.Buffer:void 0,dI=cI?cI.allocUnsafe:void 0;function v7(i,e){if(e)return i.slice();var t=i.length,n=dI?dI(t):new i.constructor(t);return i.copy(n),n}var hI=v7;var x7=va.Uint8Array,Y2=x7;function b7(i){var e=new i.constructor(i.byteLength);return new Y2(e).set(new Y2(i)),e}var pI=b7;function y7(i,e){var t=e?pI(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.length)}var fI=y7;function S7(i){return typeof i.constructor=="function"&&!c_(i)?ck(f_(i)):{}}var mI=S7;function w7(i){return function(e,t,n){for(var r=-1,s=Object(e),a=n(e),o=a.length;o--;){var l=a[i?o:++r];if(t(s[l],l,s)===!1)break}return e}}var gI=w7;var C7=gI(),_I=C7;function M7(i,e,t){(t!==void 0&&!oc(i[e],t)||t===void 0&&!(e in i))&&Ku(i,e,t)}var If=M7;function E7(i){return fo(i)&&Zu(i)}var vI=E7;function A7(i,e){if(!(e==="constructor"&&typeof i[e]=="function")&&e!="__proto__")return i[e]}var Df=A7;function T7(i){return _k(i,h_(i))}var xI=T7;function k7(i,e,t,n,r,s,a){var o=Df(i,t),l=Df(e,t),d=a.get(l);if(d){If(i,t,d);return}var p=s?s(o,l,t+"",i,e,a):void 0,f=p===void 0;if(f){var g=Af(l),m=!g&&d_(l),x=!g&&!m&&u_(l);p=l,g||m||x?Af(o)?p=o:vI(o)?p=uk(o):m?(f=!1,p=hI(l,!0)):x?(f=!1,p=fI(l,!0)):p=[]:eI(l)||Tf(l)?(p=o,Tf(o)?p=xI(o):(!Ps(o)||Xu(o))&&(p=mI(l))):f=!1}f&&(a.set(l,p),r(p,l,n,s,a),a.delete(l)),If(i,t,p)}var bI=k7;function yI(i,e,t,n,r){i!==e&&_I(e,function(s,a){if(r||(r=new oI),Ps(s))bI(i,e,a,t,yI,n,r);else{var o=n?n(Df(i,a),s,a+"",i,e,r):void 0;o===void 0&&(o=s),If(i,a,o)}},h_)}var SI=yI;var I7=Sk(function(i,e,t){SI(i,e,t)}),m_=I7;var D7=(()=>{class i{constructor(){this.colorschemesOptions=new ks(void 0)}setColorschemesOptions(t){this.pColorschemesOptions=t,this.colorschemesOptions.next(t)}getColorschemesOptions(){return this.pColorschemesOptions}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Qe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),CI=(()=>{class i{constructor(t,n,r){this.zone=n,this.themeService=r,this.type="bar",this.plugins=[],this.chartClick=new Nr,this.chartHover=new Nr,this.subs=[],this.ctx=t.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(NE()).subscribe(s=>this.themeChanged(s)))}ngOnChanges(t){let n=["type"],r=Object.getOwnPropertyNames(t);if(r.some(s=>n.includes(s))||r.every(s=>t[s].isFirstChange()))this.render();else{let s=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,s.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,s.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,s.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(t=>t.unsubscribe())}render(){return this.chart&&this.chart.destroy(),Ko.register(...this.plugins),this.zone.runOutsideAngular(()=>this.chart=new Ko(this.ctx,this.getChartConfiguration()))}update(t){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(t))}hideDataset(t,n){this.chart&&(this.chart.getDatasetMeta(t).hidden=n,this.update())}isDatasetHidden(t){return this.chart?.getDatasetMeta(t)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(t){this.themeOverrides=t,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return m_({onHover:(t,n)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:t,active:n}))},onClick:(t,n)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:t,active:n}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions()}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}}return i.\u0275fac=function(t){return new(t||i)(Ot(Fr),Ot(sr),Ot(D7))},i.\u0275dir=Ai({type:i,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[ro]}),i})(),P7=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],R7={datasets:{line:{backgroundColor:i=>_s(vs(i.datasetIndex),.4),borderColor:i=>_s(vs(i.datasetIndex),1),pointBackgroundColor:i=>_s(vs(i.datasetIndex),1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:i=>_s(vs(i.datasetIndex),.8)},bar:{backgroundColor:i=>_s(vs(i.datasetIndex),.6),borderColor:i=>_s(vs(i.datasetIndex),1),hoverBackgroundColor:i=>_s(vs(i.datasetIndex),.8),hoverBorderColor:i=>_s(vs(i.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:i=>_s(vs(i.dataIndex),.6),borderColor:"#fff",hoverBackgroundColor:i=>_s(vs(i.dataIndex),1),hoverBorderColor:i=>_s(vs(i.dataIndex),1)},get pie(){return this.doughnut},polarArea:{backgroundColor:i=>_s(vs(i.dataIndex),.6),borderColor:i=>_s(vs(i.dataIndex),1),hoverBackgroundColor:i=>_s(vs(i.dataIndex),.8),hoverBorderColor:i=>_s(vs(i.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function _s(i,e){return"rgba("+i.concat(e).join(",")+")"}function $2(i,e){return Math.floor(Math.random()*(e-i+1))+i}function L7(){return[$2(0,255),$2(0,255),$2(0,255)]}function vs(i=0){return P7[i]||L7()}var wI=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Qe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();Ko.register(...JT);var MI=(()=>{class i{constructor(t){t?.plugins&&Ko.register(...t?.plugins);let n=m_(R7,t?.defaults||{});Rn.set(n)}static forRoot(t){return{ngModule:i,providers:[{provide:wI,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)(Ze(wI,8))},i.\u0275mod=Ei({type:i}),i.\u0275inj=Mi({}),i})();var An="primary",Gf=Symbol("RouteTitle"),tS=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function oh(i){return new tS(i)}function N7(i,e,t){let n=t.path.split("/");if(n.length>i.length||t.pathMatch==="full"&&(e.hasChildren()||n.length<i.length))return null;let r={};for(let s=0;s<n.length;s++){let a=n[s],o=i[s];if(a[0]===":")r[a.substring(1)]=o;else if(a!==o.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function F7(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!mo(i[t],e[t]))return!1;return!0}function mo(i,e){let t=i?eS(i):void 0,n=e?eS(e):void 0;if(!t||!n||t.length!=n.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!NI(i[r],e[r]))return!1;return!0}function eS(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function NI(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;let t=[...i].sort(),n=[...e].sort();return t.every((r,s)=>n[s]===r)}else return i===e}function FI(i){return i.length>0?i[i.length-1]:null}function hc(i){return DE(i)?i:Q0(i)?Lr(Promise.resolve(i)):sn(i)}var B7={exact:VI,subset:UI},BI={exact:V7,subset:U7,ignored:()=>!0};function EI(i,e,t){return B7[t.paths](i.root,e.root,t.matrixParams)&&BI[t.queryParams](i.queryParams,e.queryParams)&&!(t.fragment==="exact"&&i.fragment!==e.fragment)}function V7(i,e){return mo(i,e)}function VI(i,e,t){if(!vd(i.segments,e.segments)||!v_(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(let n in e.children)if(!i.children[n]||!VI(i.children[n],e.children[n],t))return!1;return!0}function U7(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>NI(i[t],e[t]))}function UI(i,e,t){return zI(i,e,e.segments,t)}function zI(i,e,t,n){if(i.segments.length>t.length){let r=i.segments.slice(0,t.length);return!(!vd(r,t)||e.hasChildren()||!v_(r,t,n))}else if(i.segments.length===t.length){if(!vd(i.segments,t)||!v_(i.segments,t,n))return!1;for(let r in e.children)if(!i.children[r]||!UI(i.children[r],e.children[r],n))return!1;return!0}else{let r=t.slice(0,i.segments.length),s=t.slice(i.segments.length);return!vd(i.segments,r)||!v_(i.segments,r,n)||!i.children[An]?!1:zI(i.children[An],e,s,n)}}function v_(i,e,t){return e.every((n,r)=>BI[t](i[r].parameters,n.parameters))}var Qo=class{constructor(e=new ci([],{}),t={},n=null){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap??=oh(this.queryParams),this._queryParamMap}toString(){return H7.serialize(this)}},ci=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return x_(this)}},_d=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=oh(this.parameters),this._parameterMap}toString(){return HI(this)}};function z7(i,e){return vd(i,e)&&i.every((t,n)=>mo(t.parameters,e[n].parameters))}function vd(i,e){return i.length!==e.length?!1:i.every((t,n)=>t.path===e[n].path)}function j7(i,e){let t=[];return Object.entries(i.children).forEach(([n,r])=>{n===An&&(t=t.concat(e(r,n)))}),Object.entries(i.children).forEach(([n,r])=>{n!==An&&(t=t.concat(e(r,n)))}),t}var qf=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Qe({token:e,factory:()=>new lh,providedIn:"root"});let i=e;return i})(),lh=class{parse(e){let t=new iS(e);return new Qo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Pf(e.root,!0)}`,n=q7(e.queryParams),r=typeof e.fragment=="string"?`#${W7(e.fragment)}`:"";return`${t}${n}${r}`}},H7=new lh;function x_(i){return i.segments.map(e=>HI(e)).join("/")}function Pf(i,e){if(!i.hasChildren())return x_(i);if(e){let t=i.children[An]?Pf(i.children[An],!1):"",n=[];return Object.entries(i.children).forEach(([r,s])=>{r!==An&&n.push(`${r}:${Pf(s,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}else{let t=j7(i,(n,r)=>r===An?[Pf(i.children[An],!1)]:[`${r}:${Pf(n,!1)}`]);return Object.keys(i.children).length===1&&i.children[An]!=null?`${x_(i)}/${t[0]}`:`${x_(i)}/(${t.join("//")})`}}function jI(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function g_(i){return jI(i).replace(/%3B/gi,";")}function W7(i){return encodeURI(i)}function nS(i){return jI(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function b_(i){return decodeURIComponent(i)}function AI(i){return b_(i.replace(/\+/g,"%20"))}function HI(i){return`${nS(i.path)}${G7(i.parameters)}`}function G7(i){return Object.entries(i).map(([e,t])=>`;${nS(e)}=${nS(t)}`).join("")}function q7(i){let e=Object.entries(i).map(([t,n])=>Array.isArray(n)?n.map(r=>`${g_(t)}=${g_(r)}`).join("&"):`${g_(t)}=${g_(n)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var X7=/^[^\/()?;#]+/;function K2(i){let e=i.match(X7);return e?e[0]:""}var Y7=/^[^\/()?;=#]+/;function $7(i){let e=i.match(Y7);return e?e[0]:""}var K7=/^[^=?&#]+/;function Z7(i){let e=i.match(K7);return e?e[0]:""}var J7=/^[^&#]+/;function Q7(i){let e=i.match(J7);return e?e[0]:""}var iS=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ci([],{}):new ci([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[An]=new ci(e,t)),n}parseSegment(){let e=K2(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ei(4009,!1);return this.capture(e),new _d(b_(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=$7(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){let r=K2(this.remaining);r&&(n=r,this.capture(n))}e[b_(t)]=b_(n)}parseQueryParam(e){let t=Z7(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){let a=Q7(this.remaining);a&&(n=a,this.capture(n))}let r=AI(t),s=AI(n);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=K2(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new ei(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=An);let a=this.parseChildren();t[s]=Object.keys(a).length===1?a[An]:new ci([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ei(4011,!1)}};function WI(i){return i.segments.length>0?new ci([],{[An]:i}):i}function GI(i){let e={};for(let[n,r]of Object.entries(i.children)){let s=GI(r);if(n===An&&s.segments.length===0&&s.hasChildren())for(let[a,o]of Object.entries(s.children))e[a]=o;else(s.segments.length>0||s.hasChildren())&&(e[n]=s)}let t=new ci(i.segments,e);return tz(t)}function tz(i){if(i.numberOfChildren===1&&i.children[An]){let e=i.children[An];return new ci(i.segments.concat(e.segments),e.children)}return i}function xd(i){return i instanceof Qo}function ez(i,e,t=null,n=null){let r=qI(i);return XI(r,e,t,n)}function qI(i){let e;function t(s){let a={};for(let l of s.children){let d=t(l);a[l.outlet]=d}let o=new ci(s.url,a);return s===i&&(e=o),o}let n=t(i.root),r=WI(n);return e??r}function XI(i,e,t,n){let r=i;for(;r.parent;)r=r.parent;if(e.length===0)return Z2(r,r,r,t,n);let s=nz(e);if(s.toRoot())return Z2(r,r,new ci([],{}),t,n);let a=iz(s,r,i),o=a.processChildren?Of(a.segmentGroup,a.index,s.commands):$I(a.segmentGroup,a.index,s.commands);return Z2(r,a.segmentGroup,o,t,n)}function y_(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function Bf(i){return typeof i=="object"&&i!=null&&i.outlets}function Z2(i,e,t,n,r){let s={};n&&Object.entries(n).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`});let a;i===e?a=t:a=YI(i,e,t);let o=WI(GI(a));return new Qo(o,s,r)}function YI(i,e,t){let n={};return Object.entries(i.children).forEach(([r,s])=>{s===e?n[r]=t:n[r]=YI(s,e,t)}),new ci(i.segments,n)}var S_=class{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&y_(n[0]))throw new ei(4003,!1);let r=n.find(Bf);if(r&&r!==FI(n))throw new ei(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function nz(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new S_(!0,0,i);let e=0,t=!1,n=i.reduce((r,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let o={};return Object.entries(s.outlets).forEach(([l,d])=>{o[l]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:o}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:a===0?(s.split("/").forEach((o,l)=>{l==0&&o==="."||(l==0&&o===""?t=!0:o===".."?e++:o!=""&&r.push(o))}),r):[...r,s]},[]);return new S_(t,e,n)}var rh=class{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}};function iz(i,e,t){if(i.isAbsolute)return new rh(e,!0,0);if(!t)return new rh(e,!1,NaN);if(t.parent===null)return new rh(t,!0,0);let n=y_(i.commands[0])?0:1,r=t.segments.length-1+n;return rz(t,r,i.numberOfDoubleDots)}function rz(i,e,t){let n=i,r=e,s=t;for(;s>r;){if(s-=r,n=n.parent,!n)throw new ei(4005,!1);r=n.segments.length}return new rh(n,!1,r-s)}function sz(i){return Bf(i[0])?i[0].outlets:{[An]:i}}function $I(i,e,t){if(i??=new ci([],{}),i.segments.length===0&&i.hasChildren())return Of(i,e,t);let n=az(i,e,t),r=t.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){let s=new ci(i.segments.slice(0,n.pathIndex),{});return s.children[An]=new ci(i.segments.slice(n.pathIndex),i.children),Of(s,0,r)}else return n.match&&r.length===0?new ci(i.segments,{}):n.match&&!i.hasChildren()?rS(i,e,t):n.match?Of(i,0,r):rS(i,e,t)}function Of(i,e,t){if(t.length===0)return new ci(i.segments,{});{let n=sz(t),r={};if(Object.keys(n).some(s=>s!==An)&&i.children[An]&&i.numberOfChildren===1&&i.children[An].segments.length===0){let s=Of(i.children[An],e,t);return new ci(i.segments,s.children)}return Object.entries(n).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[s]=$I(i.children[s],e,a))}),Object.entries(i.children).forEach(([s,a])=>{n[s]===void 0&&(r[s]=a)}),new ci(i.segments,r)}}function az(i,e,t){let n=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=t.length)return s;let a=i.segments[r],o=t[n];if(Bf(o))break;let l=`${o}`,d=n<t.length-1?t[n+1]:null;if(r>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!kI(l,d,a))return s;n+=2}else{if(!kI(l,{},a))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function rS(i,e,t){let n=i.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(Bf(s)){let l=oz(s.outlets);return new ci(n,l)}if(r===0&&y_(t[0])){let l=i.segments[e];n.push(new _d(l.path,TI(t[0]))),r++;continue}let a=Bf(s)?s.outlets[An]:`${s}`,o=r<t.length-1?t[r+1]:null;a&&o&&y_(o)?(n.push(new _d(a,TI(o))),r+=2):(n.push(new _d(a,{})),r++)}return new ci(n,{})}function oz(i){let e={};return Object.entries(i).forEach(([t,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(e[t]=rS(new ci([],{}),0,n))}),e}function TI(i){let e={};return Object.entries(i).forEach(([t,n])=>e[t]=`${n}`),e}function kI(i,e,t){return i==t.path&&mo(e,t.parameters)}var Nf="imperative",Br=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(Br||{}),xa=class{constructor(e,t){this.id=e,this.url=t}},ch=class extends xa{constructor(e,t,n="imperative",r=null){super(e,t),this.type=Br.NavigationStart,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Va=class extends xa{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n,this.type=Br.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$s=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}($s||{}),w_=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(w_||{}),Jo=class extends xa{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=Br.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},uc=class extends xa{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=Br.NavigationSkipped}},Vf=class extends xa{constructor(e,t,n,r){super(e,t),this.error=n,this.target=r,this.type=Br.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},C_=class extends xa{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=Br.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sS=class extends xa{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=Br.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},aS=class extends xa{constructor(e,t,n,r,s){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=Br.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},oS=class extends xa{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=Br.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lS=class extends xa{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=Br.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cS=class{constructor(e){this.route=e,this.type=Br.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},dS=class{constructor(e){this.route=e,this.type=Br.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},uS=class{constructor(e){this.snapshot=e,this.type=Br.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hS=class{constructor(e){this.snapshot=e,this.type=Br.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pS=class{constructor(e){this.snapshot=e,this.type=Br.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fS=class{constructor(e){this.snapshot=e,this.type=Br.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},M_=class{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n,this.type=Br.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Uf=class{},dh=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function lz(i,e){return i.providers&&!i._injector&&(i._injector=Jb(i.providers,e,`Route: ${i.path}`)),i._injector??e}function Ba(i){return i.outlet||An}function cz(i,e){let t=i.filter(n=>Ba(n)===e);return t.push(...i.filter(n=>Ba(n)!==e)),t}function Xf(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var mS=class{get injector(){return Xf(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Yf(this.rootInjector),this.attachRef=null}},Yf=(()=>{let e=class e{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let s=this.getOrCreateContext(n);s.outlet=r,this.contexts.set(n,s)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new mS(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}};e.\u0275fac=function(r){return new(r||e)(Ze(Qc))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),E_=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=gS(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){let t=gS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=_S(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return _S(e,this._root).map(t=>t.value)}};function gS(i,e){if(i===e.value)return e;for(let t of e.children){let n=gS(i,t);if(n)return n}return null}function _S(i,e){if(i===e.value)return[e];for(let t of e.children){let n=_S(i,t);if(n.length)return n.unshift(e),n}return[]}var Ys=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ih(i){let e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}var A_=class extends E_{constructor(e,t){super(e),this.snapshot=t,ES(this,e)}toString(){return this.snapshot.toString()}};function KI(i){let e=dz(i),t=new ks([new _d("",{})]),n=new ks({}),r=new ks({}),s=new ks({}),a=new ks(""),o=new mn(t,n,s,a,r,An,i,e.root);return o.snapshot=e.root,new A_(new Ys(o,[]),e)}function dz(i){let e={},t={},n={},r="",s=new sh([],e,n,r,t,An,i,null,{});return new k_("",new Ys(s,[]))}var mn=class{constructor(e,t,n,r,s,a,o,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=s,this.outlet=a,this.component=o,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Hn(d=>d[Gf]))??sn(void 0),this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Hn(e=>oh(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Hn(e=>oh(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function T_(i,e,t="emptyOnly"){let n,{routeConfig:r}=i;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?n={params:Se(Se({},e.params),i.params),data:Se(Se({},e.data),i.data),resolve:Se(Se(Se(Se({},i.data),e.data),r?.data),i._resolvedData)}:n={params:Se({},i.params),data:Se({},i.data),resolve:Se(Se({},i.data),i._resolvedData??{})},r&&JI(r)&&(n.resolve[Gf]=r.title),n}var sh=class{get title(){return this.data?.[Gf]}constructor(e,t,n,r,s,a,o,l,d){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=a,this.component=o,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=oh(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=oh(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(n=>n.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},k_=class extends E_{constructor(e,t){super(t),this.url=e,ES(this,t)}toString(){return ZI(this._root)}};function ES(i,e){e.value._routerState=i,e.children.forEach(t=>ES(i,t))}function ZI(i){let e=i.children.length>0?` { ${i.children.map(ZI).join(", ")} } `:"";return`${i.value}${e}`}function J2(i){if(i.snapshot){let e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,mo(e.queryParams,t.queryParams)||i.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&i.fragmentSubject.next(t.fragment),mo(e.params,t.params)||i.paramsSubject.next(t.params),F7(e.url,t.url)||i.urlSubject.next(t.url),mo(e.data,t.data)||i.dataSubject.next(t.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function vS(i,e){let t=mo(i.params,e.params)&&z7(i.url,e.url),n=!i.parent!=!e.parent;return t&&!n&&(!i.parent||vS(i.parent,e.parent))}function JI(i){return typeof i.title=="string"||i.title===null}var AS=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=An,this.activateEvents=new Nr,this.deactivateEvents=new Nr,this.attachEvents=new Nr,this.detachEvents=new Nr,this.parentContexts=Oe(Yf),this.location=Oe(iA),this.changeDetector=Oe(id),this.inputBinder=Oe(L_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:s}=n.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ei(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ei(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ei(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new ei(4013,!1);this._activatedRoute=n;let s=this.location,o=n.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new xS(n,l,s.injector);this.activated=s.createComponent(o,{index:s.length,injector:d,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ai({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ro]});let i=e;return i})(),xS=class i{__ngOutletInjector(e){return new i(this.route,this.childContexts,e)}constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===mn?this.route:e===Yf?this.childContexts:this.parent.get(e,t)}},L_=new Pn(""),II=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,s=yu([r.queryParams,r.params,r.data]).pipe(Hs(([a,o,l],d)=>(l=Se(Se(Se({},a),o),l),d===0?sn(l):Promise.resolve(l)))).subscribe(a=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let o=hA(r.component);if(!o){this.unsubscribeFromRouteData(n);return}for(let{templateName:l}of o.inputs)n.activatedComponentRef.setInput(l,a[l])});this.outletDataSubscriptions.set(n,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Qe({token:e,factory:e.\u0275fac});let i=e;return i})();function uz(i,e,t){let n=zf(i,e._root,t?t._root:void 0);return new A_(n,e)}function zf(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){let n=t.value;n._futureSnapshot=e.value;let r=hz(i,e,t);return new Ys(n,r)}else{if(i.shouldAttach(e.value)){let s=i.retrieve(e.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(o=>zf(i,o)),a}}let n=pz(e.value),r=e.children.map(s=>zf(i,s));return new Ys(n,r)}}function hz(i,e,t){return e.children.map(n=>{for(let r of t.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return zf(i,n,r);return zf(i,n)})}function pz(i){return new mn(new ks(i.url),new ks(i.params),new ks(i.queryParams),new ks(i.fragment),new ks(i.data),i.outlet,i.component,i)}var jf=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},QI="ngNavigationCancelingError";function I_(i,e){let{redirectTo:t,navigationBehaviorOptions:n}=xd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=tD(!1,$s.Redirect);return r.url=t,r.navigationBehaviorOptions=n,r}function tD(i,e){let t=new Error(`NavigationCancelingError: ${i||""}`);return t[QI]=!0,t.cancellationCode=e,t}function fz(i){return eD(i)&&xd(i.url)}function eD(i){return!!i&&i[QI]}var mz=(i,e,t,n)=>Hn(r=>(new bS(e,r.targetRouterState,r.currentRouterState,t,n).activate(i),r)),bS=class{constructor(e,t,n,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),J2(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){let r=ih(t);e.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,r[a],n),delete r[a]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(e,t,n){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let a=n.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=ih(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,r);if(n&&n.outlet){let a=n.outlet.detach(),o=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:o})}}deactivateRouteAndOutlet(e,t){let n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=ih(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(e,t,n){let r=ih(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new fS(s.value.snapshot))}),e.children.length&&this.forwardEvent(new hS(e.value.snapshot))}activateRoutes(e,t,n){let r=e.value,s=t?t.value:null;if(J2(r),r===s)if(r.component){let a=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,n);else if(r.component){let a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let o=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(o.contexts),a.attachRef=o.componentRef,a.route=o.route.value,a.outlet&&a.outlet.attach(o.componentRef,o.route.value),J2(o.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,n)}},D_=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ah=class{constructor(e,t){this.component=e,this.route=t}};function gz(i,e,t){let n=i._root,r=e?e._root:null;return Rf(n,r,t,[n.value])}function _z(i){let e=i.routeConfig?i.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:i,guards:e}}function hh(i,e){let t=Symbol(),n=e.get(i,t);return n===t?typeof i=="function"&&!UE(i)?i:e.get(i):n}function Rf(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=ih(e);return i.children.forEach(a=>{vz(a,s[a.value.outlet],t,n.concat([a.value]),r),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,o])=>Ff(o,t.getContext(a),r)),r}function vz(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=i.value,a=e?e.value:null,o=t?t.getContext(i.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let l=xz(a,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new D_(n)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?Rf(i,e,o?o.children:null,n,r):Rf(i,e,t,n,r),l&&o&&o.outlet&&o.outlet.isActivated&&r.canDeactivateChecks.push(new ah(o.outlet.component,a))}else a&&Ff(e,o,r),r.canActivateChecks.push(new D_(n)),s.component?Rf(i,null,o?o.children:null,n,r):Rf(i,null,t,n,r);return r}function xz(i,e,t){if(typeof t=="function")return t(i,e);switch(t){case"pathParamsChange":return!vd(i.url,e.url);case"pathParamsOrQueryParamsChange":return!vd(i.url,e.url)||!mo(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vS(i,e)||!mo(i.queryParams,e.queryParams);case"paramsChange":default:return!vS(i,e)}}function Ff(i,e,t){let n=ih(i),r=i.value;Object.entries(n).forEach(([s,a])=>{r.component?e?Ff(a,e.children.getContext(s),t):Ff(a,null,t):Ff(a,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ah(e.outlet.component,r)):t.canDeactivateChecks.push(new ah(null,r)):t.canDeactivateChecks.push(new ah(null,r))}function $f(i){return typeof i=="function"}function bz(i){return typeof i=="boolean"}function yz(i){return i&&$f(i.canLoad)}function Sz(i){return i&&$f(i.canActivate)}function wz(i){return i&&$f(i.canActivateChild)}function Cz(i){return i&&$f(i.canDeactivate)}function Mz(i){return i&&$f(i.canMatch)}function nD(i){return i instanceof PE||i?.name==="EmptyError"}var __=Symbol("INITIAL_VALUE");function uh(){return Hs(i=>yu(i.map(e=>e.pipe(Bl(1),z0(__)))).pipe(Hn(e=>{for(let t of e)if(t!==!0){if(t===__)return __;if(t===!1||Ez(t))return t}return!0}),Uo(e=>e!==__),Bl(1)))}function Ez(i){return xd(i)||i instanceof jf}function Az(i,e){return js(t=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return a.length===0&&s.length===0?sn(In(Se({},t),{guardsResult:!0})):Tz(a,n,r,i).pipe(js(o=>o&&bz(o)?kz(n,s,i,e):sn(o)),Hn(o=>In(Se({},t),{guardsResult:o})))})}function Tz(i,e,t,n){return Lr(i).pipe(js(r=>Lz(r.component,r.route,t,e,n)),Vl(r=>r!==!0,!0))}function kz(i,e,t,n){return Lr(e).pipe(Fl(r=>U0(Dz(r.route.parent,n),Iz(r.route,n),Rz(i,r.path,t),Pz(i,r.route,t))),Vl(r=>r!==!0,!0))}function Iz(i,e){return i!==null&&e&&e(new pS(i)),sn(!0)}function Dz(i,e){return i!==null&&e&&e(new uS(i)),sn(!0)}function Pz(i,e,t){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return sn(!0);let r=n.map(s=>Wb(()=>{let a=Xf(e)??t,o=hh(s,a),l=Sz(o)?o.canActivate(e,i):fa(a,()=>o(e,i));return hc(l).pipe(Vl())}));return sn(r).pipe(uh())}function Rz(i,e,t){let n=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>_z(a)).filter(a=>a!==null).map(a=>Wb(()=>{let o=a.guards.map(l=>{let d=Xf(a.node)??t,p=hh(l,d),f=wz(p)?p.canActivateChild(n,i):fa(d,()=>p(n,i));return hc(f).pipe(Vl())});return sn(o).pipe(uh())}));return sn(s).pipe(uh())}function Lz(i,e,t,n,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return sn(!0);let a=s.map(o=>{let l=Xf(e)??r,d=hh(o,l),p=Cz(d)?d.canDeactivate(i,e,t,n):fa(l,()=>d(i,e,t,n));return hc(p).pipe(Vl())});return sn(a).pipe(uh())}function Oz(i,e,t,n){let r=e.canLoad;if(r===void 0||r.length===0)return sn(!0);let s=r.map(a=>{let o=hh(a,i),l=yz(o)?o.canLoad(e,t):fa(i,()=>o(e,t));return hc(l)});return sn(s).pipe(uh(),iD(n))}function iD(i){return IE(Or(e=>{if(typeof e!="boolean")throw I_(i,e)}),Hn(e=>e===!0))}function Nz(i,e,t,n){let r=e.canMatch;if(!r||r.length===0)return sn(!0);let s=r.map(a=>{let o=hh(a,i),l=Mz(o)?o.canMatch(e,t):fa(i,()=>o(e,t));return hc(l)});return sn(s).pipe(uh(),iD(n))}var Hf=class{constructor(e){this.segmentGroup=e||null}},Wf=class extends Error{constructor(e){super(),this.urlTree=e}};function nh(i){return Mp(new Hf(i))}function Fz(i){return Mp(new ei(4e3,!1))}function Bz(i){return Mp(tD(!1,$s.GuardRejected))}var yS=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return sn(n);if(r.numberOfChildren>1||!r.children[An])return Fz(`${e.redirectTo}`);r=r.children[An]}}applyRedirectCommands(e,t,n,r,s){if(typeof t!="string"){let o=t,{queryParams:l,fragment:d,routeConfig:p,url:f,outlet:g,params:m,data:x,title:y}=r,S=fa(s,()=>o({params:m,data:x,queryParams:l,fragment:d,routeConfig:p,url:f,outlet:g,title:y}));if(S instanceof Qo)throw new Wf(S);t=S}let a=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n);if(t[0]==="/")throw new Wf(a);return a}applyRedirectCreateUrlTree(e,t,n,r){let s=this.createSegmentGroup(e,t.root,n,r);return new Qo(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let n={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let o=s.substring(1);n[r]=t[o]}else n[r]=s}),n}createSegmentGroup(e,t,n,r){let s=this.createSegments(e,t.segments,n,r),a={};return Object.entries(t.children).forEach(([o,l])=>{a[o]=this.createSegmentGroup(e,l,n,r)}),new ci(s,a)}createSegments(e,t,n,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,n))}findPosParam(e,t,n){let r=n[t.path.substring(1)];if(!r)throw new ei(4001,!1);return r}findOrReturn(e,t){let n=0;for(let r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}},SS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Vz(i,e,t,n,r){let s=rD(i,e,t);return s.matched?(n=lz(e,n),Nz(n,e,t,r).pipe(Hn(a=>a===!0?s:Se({},SS)))):sn(s)}function rD(i,e,t){if(e.path==="**")return Uz(t);if(e.path==="")return e.pathMatch==="full"&&(i.hasChildren()||t.length>0)?Se({},SS):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||N7)(t,i,e);if(!r)return Se({},SS);let s={};Object.entries(r.posParams??{}).forEach(([o,l])=>{s[o]=l.path});let a=r.consumed.length>0?Se(Se({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function Uz(i){return{matched:!0,parameters:i.length>0?FI(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function DI(i,e,t,n){return t.length>0&&Hz(i,t,n)?{segmentGroup:new ci(e,jz(n,new ci(t,i.children))),slicedSegments:[]}:t.length===0&&Wz(i,t,n)?{segmentGroup:new ci(i.segments,zz(i,t,n,i.children)),slicedSegments:t}:{segmentGroup:new ci(i.segments,i.children),slicedSegments:t}}function zz(i,e,t,n){let r={};for(let s of t)if(O_(i,e,s)&&!n[Ba(s)]){let a=new ci([],{});r[Ba(s)]=a}return Se(Se({},n),r)}function jz(i,e){let t={};t[An]=e;for(let n of i)if(n.path===""&&Ba(n)!==An){let r=new ci([],{});t[Ba(n)]=r}return t}function Hz(i,e,t){return t.some(n=>O_(i,e,n)&&Ba(n)!==An)}function Wz(i,e,t){return t.some(n=>O_(i,e,n))}function O_(i,e,t){return(i.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Gz(i,e,t){return e.length===0&&!i.children[t]}var wS=class{};function qz(i,e,t,n,r,s,a="emptyOnly"){return new CS(i,e,t,n,r,a,s).recognize()}var Xz=31,CS=class{constructor(e,t,n,r,s,a,o){this.injector=e,this.configLoader=t,this.rootComponentType=n,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=o,this.applyRedirects=new yS(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ei(4002,`'${e.segmentGroup}'`)}recognize(){let e=DI(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Hn(({children:t,rootSnapshot:n})=>{let r=new Ys(n,t),s=new k_("",r),a=ez(n,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),{state:s,tree:a}}))}match(e){let t=new sh([],Object.freeze({}),Object.freeze(Se({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),An,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,An,t).pipe(Hn(n=>({children:n,rootSnapshot:t})),Su(n=>{if(n instanceof Wf)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Hf?this.noMatchError(n):n}))}processSegmentGroup(e,t,n,r,s){return n.segments.length===0&&n.hasChildren()?this.processChildren(e,t,n,s):this.processSegment(e,t,n,n.segments,r,!0,s).pipe(Hn(a=>a instanceof Ys?[a]:[]))}processChildren(e,t,n,r){let s=[];for(let a of Object.keys(n.children))a==="primary"?s.unshift(a):s.push(a);return Lr(s).pipe(Fl(a=>{let o=n.children[a],l=cz(t,a);return this.processSegmentGroup(e,l,o,a,r)}),BE((a,o)=>(a.push(...o),a)),Gb(null),FE(),js(a=>{if(a===null)return nh(n);let o=sD(a);return Yz(o),sn(o)}))}processSegment(e,t,n,r,s,a,o){return Lr(t).pipe(Fl(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,n,r,s,a,o).pipe(Su(d=>{if(d instanceof Hf)return sn(null);throw d}))),Vl(l=>!!l),Su(l=>{if(nD(l))return Gz(n,r,s)?sn(new wS):nh(n);throw l}))}processSegmentAgainstRoute(e,t,n,r,s,a,o,l){return Ba(n)!==a&&(a===An||!O_(r,s,n))?nh(r):n.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,n,s,a,l):this.allowRedirects&&o?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,n,s,a,l):nh(r)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,a,o){let{matched:l,parameters:d,consumedSegments:p,positionalParamSegments:f,remainingSegments:g}=rD(t,r,s);if(!l)return nh(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Xz&&(this.allowRedirects=!1));let m=new sh(s,d,Object.freeze(Se({},this.urlTree.queryParams)),this.urlTree.fragment,PI(r),Ba(r),r.component??r._loadedComponent??null,r,RI(r)),x=T_(m,o,this.paramsInheritanceStrategy);m.params=Object.freeze(x.params),m.data=Object.freeze(x.data);let y=this.applyRedirects.applyRedirectCommands(p,r.redirectTo,f,m,e);return this.applyRedirects.lineralizeSegments(r,y).pipe(js(S=>this.processSegment(e,n,t,S.concat(g),a,!1,o)))}matchSegmentAgainstRoute(e,t,n,r,s,a){let o=Vz(t,n,r,e,this.urlSerializer);return n.path==="**"&&(t.children={}),o.pipe(Hs(l=>l.matched?(e=n._injector??e,this.getChildConfig(e,n,r).pipe(Hs(({routes:d})=>{let p=n._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:m}=l,x=new sh(g,f,Object.freeze(Se({},this.urlTree.queryParams)),this.urlTree.fragment,PI(n),Ba(n),n.component??n._loadedComponent??null,n,RI(n)),y=T_(x,a,this.paramsInheritanceStrategy);x.params=Object.freeze(y.params),x.data=Object.freeze(y.data);let{segmentGroup:S,slicedSegments:b}=DI(t,g,m,d);if(b.length===0&&S.hasChildren())return this.processChildren(p,d,S,x).pipe(Hn(T=>new Ys(x,T)));if(d.length===0&&b.length===0)return sn(new Ys(x,[]));let M=Ba(n)===s;return this.processSegment(p,d,S,b,M?An:s,!0,x).pipe(Hn(T=>new Ys(x,T instanceof Ys?[T]:[])))}))):nh(t)))}getChildConfig(e,t,n){return t.children?sn({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?sn({routes:t._loadedRoutes,injector:t._loadedInjector}):Oz(e,t,n,this.urlSerializer).pipe(js(r=>r?this.configLoader.loadChildren(e,t).pipe(Or(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):Bz(t))):sn({routes:[],injector:e})}};function Yz(i){i.sort((e,t)=>e.value.outlet===An?-1:t.value.outlet===An?1:e.value.outlet.localeCompare(t.value.outlet))}function $z(i){let e=i.value.routeConfig;return e&&e.path===""}function sD(i){let e=[],t=new Set;for(let n of i){if(!$z(n)){e.push(n);continue}let r=e.find(s=>n.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...n.children),t.add(r)):e.push(n)}for(let n of t){let r=sD(n.children);e.push(new Ys(n.value,r))}return e.filter(n=>!t.has(n))}function PI(i){return i.data||{}}function RI(i){return i.resolve||{}}function Kz(i,e,t,n,r,s){return js(a=>qz(i,e,t,n,a.extractedUrl,r,s).pipe(Hn(({state:o,tree:l})=>In(Se({},a),{targetSnapshot:o,urlAfterRedirects:l}))))}function Zz(i,e){return js(t=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=t;if(!r.length)return sn(t);let s=new Set(r.map(l=>l.route)),a=new Set;for(let l of s)if(!a.has(l))for(let d of aD(l))a.add(d);let o=0;return Lr(a).pipe(Fl(l=>s.has(l)?Jz(l,n,i,e):(l.data=T_(l,l.parent,i).resolve,sn(void 0))),Or(()=>o++),qb(1),js(l=>o===a.size?sn(t):Nl))})}function aD(i){let e=i.children.map(t=>aD(t)).flat();return[i,...e]}function Jz(i,e,t,n){let r=i.routeConfig,s=i._resolve;return r?.title!==void 0&&!JI(r)&&(s[Gf]=r.title),Qz(s,i,e,n).pipe(Hn(a=>(i._resolvedData=a,i.data=T_(i,i.parent,t).resolve,null)))}function Qz(i,e,t,n){let r=eS(i);if(r.length===0)return sn({});let s={};return Lr(r).pipe(js(a=>t9(i[a],e,t,n).pipe(Vl(),Or(o=>{if(o instanceof jf)throw I_(new lh,o);s[a]=o}))),qb(1),OE(s),Su(a=>nD(a)?Nl:Mp(a)))}function t9(i,e,t,n){let r=Xf(e)??n,s=hh(i,r),a=s.resolve?s.resolve(e,t):fa(r,()=>s(e,t));return hc(a)}function Q2(i){return Hs(e=>{let t=i(e);return t?Lr(t).pipe(Hn(()=>e)):sn(e)})}var oD=(()=>{let e=class e{buildTitle(n){let r,s=n.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(a=>a.outlet===An);return r}getResolvedTitleForRoute(n){return n.data[Gf]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Qe({token:e,factory:()=>Oe(e9),providedIn:"root"});let i=e;return i})(),e9=(()=>{let e=class e extends oD{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(Ze(QA))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Kf=new Pn("",{providedIn:"root",factory:()=>({})}),n9=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ve({type:e,selectors:[["ng-component"]],standalone:!0,features:[Lp],decls:1,vars:0,template:function(r,s){r&1&&Rt(0,"router-outlet")},dependencies:[AS],encapsulation:2});let i=e;return i})();function TS(i){let e=i.children&&i.children.map(TS),t=e?In(Se({},i),{children:e}):Se({},i);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==An&&(t.component=n9),t}var P_=new Pn(""),kS=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Oe(eg)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return sn(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=hc(n.loadComponent()).pipe(Hn(lD),Or(a=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=a}),Zc(()=>{this.componentLoaders.delete(n)})),s=new Hb(r,()=>new pa).pipe(jb());return this.componentLoaders.set(n,s),s}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return sn({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let a=i9(r,this.compiler,n,this.onLoadEndListener).pipe(Zc(()=>{this.childrenLoaders.delete(r)})),o=new Hb(a,()=>new pa).pipe(jb());return this.childrenLoaders.set(r,o),o}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function i9(i,e,t,n){return hc(i.loadChildren()).pipe(Hn(lD),js(r=>r instanceof rA||Array.isArray(r)?sn(r):Lr(e.compileModuleAsync(r))),Hn(r=>{n&&n(i);let s,a,o=!1;return Array.isArray(r)?(a=r,o=!0):(s=r.create(t).injector,a=s.get(P_,[],{optional:!0,self:!0}).flat()),{routes:a.map(TS),injector:s}}))}function r9(i){return i&&typeof i=="object"&&"default"in i}function lD(i){return r9(i)?i.default:i}var IS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Qe({token:e,factory:()=>Oe(s9),providedIn:"root"});let i=e;return i})(),s9=(()=>{let e=class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),cD=new Pn(""),dD=new Pn("");function a9(i,e,t){let n=i.get(dD),r=i.get(or);return i.get(sr).runOutsideAngular(()=>{if(!r.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,a=new Promise(d=>{s=d}),o=r.startViewTransition(()=>(s(),o9(i))),{onViewTransitionCreated:l}=n;return l&&fa(i,()=>l({transition:o,from:e,to:t})),a})}function o9(i){return new Promise(e=>{Qb({read:()=>setTimeout(e)},{injector:i})})}var l9=new Pn(""),DS=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new pa,this.transitionAbortSubject=new pa,this.configLoader=Oe(kS),this.environmentInjector=Oe(Qc),this.urlSerializer=Oe(qf),this.rootContexts=Oe(Yf),this.location=Oe(sd),this.inputBindingEnabled=Oe(L_,{optional:!0})!==null,this.titleStrategy=Oe(oD),this.options=Oe(Kf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Oe(IS),this.createViewTransition=Oe(cD,{optional:!0}),this.navigationErrorHandler=Oe(l9,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>sn(void 0),this.rootComponentType=null;let n=s=>this.events.next(new cS(s)),r=s=>this.events.next(new dS(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(In(Se(Se({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,s){return this.transitions=new ks({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Nf,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Uo(a=>a.id!==0),Hn(a=>In(Se({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Hs(a=>{let o=!1,l=!1;return sn(a).pipe(Hs(d=>{if(this.navigationId>a.id)return this.cancelNavigationTransition(a,"",$s.SupersededByNewNavigation),Nl;this.currentTransition=a,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,targetBrowserUrl:typeof d.extras.browserUrl=="string"?this.urlSerializer.parse(d.extras.browserUrl):d.extras.browserUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?In(Se({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=d.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!p&&f!=="reload"){let g="";return this.events.next(new uc(d.id,this.urlSerializer.serialize(d.rawUrl),g,w_.IgnoredSameUrlNavigation)),d.resolve(!1),Nl}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return sn(d).pipe(Hs(g=>{let m=this.transitions?.getValue();return this.events.next(new ch(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),m!==this.transitions?.getValue()?Nl:Promise.resolve(g)}),Kz(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Or(g=>{a.targetSnapshot=g.targetSnapshot,a.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=In(Se({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let m=new C_(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:g,extractedUrl:m,source:x,restoredState:y,extras:S}=d,b=new ch(g,this.urlSerializer.serialize(m),x,y);this.events.next(b);let M=KI(this.rootComponentType).snapshot;return this.currentTransition=a=In(Se({},d),{targetSnapshot:M,urlAfterRedirects:m,extras:In(Se({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,sn(a)}else{let g="";return this.events.next(new uc(d.id,this.urlSerializer.serialize(d.extractedUrl),g,w_.IgnoredByUrlHandlingStrategy)),d.resolve(!1),Nl}}),Or(d=>{let p=new sS(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),Hn(d=>(this.currentTransition=a=In(Se({},d),{guards:gz(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),a)),Az(this.environmentInjector,d=>this.events.next(d)),Or(d=>{if(a.guardsResult=d.guardsResult,d.guardsResult&&typeof d.guardsResult!="boolean")throw I_(this.urlSerializer,d.guardsResult);let p=new aS(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(p)}),Uo(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",$s.GuardRejected),!1)),Q2(d=>{if(d.guards.canActivateChecks.length)return sn(d).pipe(Or(p=>{let f=new oS(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(f)}),Hs(p=>{let f=!1;return sn(p).pipe(Zz(this.paramsInheritanceStrategy,this.environmentInjector),Or({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(p,"",$s.NoDataFromResolver)}}))}),Or(p=>{let f=new lS(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(f)}))}),Q2(d=>{let p=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(Or(m=>{f.component=m}),Hn(()=>{})));for(let m of f.children)g.push(...p(m));return g};return yu(p(d.targetSnapshot.root)).pipe(Gb(null),Bl(1))}),Q2(()=>this.afterPreactivation()),Hs(()=>{let{currentSnapshot:d,targetSnapshot:p}=a,f=this.createViewTransition?.(this.environmentInjector,d.root,p.root);return f?Lr(f).pipe(Hn(()=>a)):sn(a)}),Hn(d=>{let p=uz(n.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=a=In(Se({},d),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,a}),Or(()=>{this.events.next(new Uf)}),mz(this.rootContexts,n.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),Bl(1),Or({next:d=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Va(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{o=!0}}),j0(this.transitionAbortSubject.pipe(Or(d=>{throw d}))),Zc(()=>{!o&&!l&&this.cancelNavigationTransition(a,"",$s.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),Su(d=>{if(l=!0,eD(d))this.events.next(new Jo(a.id,this.urlSerializer.serialize(a.extractedUrl),d.message,d.cancellationCode)),fz(d)?this.events.next(new dh(d.url,d.navigationBehaviorOptions)):a.resolve(!1);else{let p=new Vf(a.id,this.urlSerializer.serialize(a.extractedUrl),d,a.targetSnapshot??void 0);try{let f=fa(this.environmentInjector,()=>this.navigationErrorHandler?.(p));if(f instanceof jf){let{message:g,cancellationCode:m}=I_(this.urlSerializer,f);this.events.next(new Jo(a.id,this.urlSerializer.serialize(a.extractedUrl),g,m)),this.events.next(new dh(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(p);let g=n.errorHandler(d);a.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(f)}}return Nl}))}))}cancelNavigationTransition(n,r,s){let a=new Jo(n.id,this.urlSerializer.serialize(n.extractedUrl),r,s);this.events.next(a),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function c9(i){return i!==Nf}var d9=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Qe({token:e,factory:()=>Oe(u9),providedIn:"root"});let i=e;return i})(),MS=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},u9=(()=>{let e=class e extends MS{};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=zo(e)))(s||e)}})(),e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),uD=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Qe({token:e,factory:()=>Oe(h9),providedIn:"root"});let i=e;return i})(),h9=(()=>{let e=class e extends uD{constructor(){super(...arguments),this.location=Oe(sd),this.urlSerializer=Oe(qf),this.options=Oe(Kf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Oe(IS),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Qo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=KI(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof ch)this.stateMemento=this.createStateMemento();else if(n instanceof uc)this.rawUrlTree=r.initialUrl;else if(n instanceof C_){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??s,r)}}else n instanceof Uf?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Jo&&(n.code===$s.GuardRejected||n.code===$s.NoDataFromResolver)?this.restoreHistory(r):n instanceof Vf?this.restoreHistory(r,!0):n instanceof Va&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let s=n instanceof Qo?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let a=this.browserPageId,o=Se(Se({},r.extras.state),this.generateNgRouterState(r.id,a));this.location.replaceState(s,"",o)}else{let a=Se(Se({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,a=this.currentPageId-s;a!==0?this.location.historyGo(a):this.currentUrlTree===n.finalUrl&&a===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=zo(e)))(s||e)}})(),e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Lf=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(Lf||{});function hD(i,e){i.events.pipe(Uo(t=>t instanceof Va||t instanceof Jo||t instanceof Vf||t instanceof uc),Hn(t=>t instanceof Va||t instanceof uc?Lf.COMPLETE:(t instanceof Jo?t.code===$s.Redirect||t.code===$s.SupersededByNewNavigation:!1)?Lf.REDIRECTING:Lf.FAILED),Uo(t=>t!==Lf.REDIRECTING),Bl(1)).subscribe(()=>{e()})}function p9(i){throw i}var f9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},m9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Vn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Oe(K0),this.stateManager=Oe(uD),this.options=Oe(Kf,{optional:!0})||{},this.pendingTasks=Oe(kp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Oe(DS),this.urlSerializer=Oe(qf),this.location=Oe(sd),this.urlHandlingStrategy=Oe(IS),this._events=new pa,this.errorHandler=this.options.errorHandler||p9,this.navigated=!1,this.routeReuseStrategy=Oe(d9),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Oe(P_,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Oe(L_,{optional:!0}),this.eventsSubscription=new kE,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(s!==null&&a!==null){if(this.stateManager.handleRouterEvent(r,a),r instanceof Jo&&r.code!==$s.Redirect&&r.code!==$s.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Va)this.navigated=!0;else if(r instanceof dh){let o=r.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),d=Se({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||c9(s.source)},o);this.scheduleNavigation(l,Nf,null,d,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}_9(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Nf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,s){let a={replaceUrl:!0},o=s?.navigationId?s:null;if(s){let d=Se({},s);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(a.state=d)}let l=this.parseUrl(n);this.scheduleNavigation(l,r,o,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(TS),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:s,queryParams:a,fragment:o,queryParamsHandling:l,preserveFragment:d}=r,p=d?this.currentUrlTree.fragment:o,f=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":f=Se(Se({},this.currentUrlTree.queryParams),a);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=a||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let m=s?s.snapshot:this.routerState.snapshot.root;g=qI(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),g=this.currentUrlTree.root}return XI(g,n,f,p??null)}navigateByUrl(n,r={skipLocationChange:!1}){let s=xd(n)?n:this.parseUrl(n),a=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(a,Nf,null,r)}navigate(n,r={skipLocationChange:!1}){return g9(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let s;if(r===!0?s=Se({},f9):r===!1?s=Se({},m9):s=r,xd(n))return EI(this.currentUrlTree,n,s);let a=this.parseUrl(n);return EI(this.currentUrlTree,a,s)}removeEmptyProps(n){return Object.entries(n).reduce((r,[s,a])=>(a!=null&&(r[s]=a),r),{})}scheduleNavigation(n,r,s,a,o){if(this.disposed)return Promise.resolve(!1);let l,d,p;o?(l=o.resolve,d=o.reject,p=o.promise):p=new Promise((g,m)=>{l=g,d=m});let f=this.pendingTasks.add();return hD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:a,resolve:l,reject:d,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(g=>Promise.reject(g))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function g9(i){for(let e=0;e<i.length;e++)if(i[e]==null)throw new ei(4008,!1)}function _9(i){return!(i instanceof Uf)&&!(i instanceof dh)}var di=(()=>{let e=class e{constructor(n,r,s,a,o,l){this.router=n,this.route=r,this.tabIndexAttribute=s,this.renderer=a,this.el=o,this.locationStrategy=l,this.href=null,this.onChanges=new pa,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let d=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area",this.isAnchorElement?this.subscription=n.events.subscribe(p=>{p instanceof Va&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(xd(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,s,a,o){let l=this.urlTree;if(l===null||this.isAnchorElement&&(n!==0||r||s||a||o||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,d),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:tA(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let s=this.renderer,a=this.el.nativeElement;r!==null?s.setAttribute(a,n,r):s.removeAttribute(a,n)}get urlTree(){return this.routerLinkInput===null?null:xd(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(Ot(Vn),Ot(mn),HE("tabindex"),Ot(Wl),Ot(Fr),Ot(Fp))},e.\u0275dir=Ai({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&lt("click",function(o){return s.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Ra("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",jo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",jo],replaceUrl:[2,"replaceUrl","replaceUrl",jo],routerLink:"routerLink"},standalone:!0,features:[q0,ro]});let i=e;return i})(),pD=(()=>{let e=class e{get isActive(){return this._isActive}constructor(n,r,s,a,o){this.router=n,this.element=r,this.renderer=s,this.cdr=a,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Nr,this.routerEventsSubscription=n.events.subscribe(l=>{l instanceof Va&&this.update()})}ngAfterContentInit(){sn(this.links.changes,sn(null)).pipe(Ep()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Lr(n).pipe(Ep()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(s=>!!s)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=v9(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>{let a=s.urlTree;return a?n.isActive(a,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}};e.\u0275fac=function(r){return new(r||e)(Ot(Vn),Ot(Fr),Ot(Wl),Ot(id),Ot(di,8))},e.\u0275dir=Ai({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(r,s,a){if(r&1&&ty(a,di,5),r&2){let o;Y0(o=$0())&&(s.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[ro]});let i=e;return i})();function v9(i){return!!i.paths}var R_=class{};var x9=(()=>{let e=class e{constructor(n,r,s,a,o){this.router=n,this.injector=s,this.preloadingStrategy=a,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Uo(n=>n instanceof Va),Fl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let s=[];for(let a of r){a.providers&&!a._injector&&(a._injector=Jb(a.providers,n,`Route: ${a.path}`));let o=a._injector??n,l=a._loadedInjector??o;(a.loadChildren&&!a._loadedRoutes&&a.canLoad===void 0||a.loadComponent&&!a._loadedComponent)&&s.push(this.preloadConfig(o,a)),(a.children||a._loadedRoutes)&&s.push(this.processRoutes(l,a.children??a._loadedRoutes))}return Lr(s).pipe(Ep())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(n,r):s=sn(null);let a=s.pipe(js(o=>o===null?sn(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Lr([a,o]).pipe(Ep())}else return a})}};e.\u0275fac=function(r){return new(r||e)(Ze(Vn),Ze(eg),Ze(Qc),Ze(R_),Ze(kS))},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),fD=new Pn(""),b9=(()=>{let e=class e{constructor(n,r,s,a,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=s,this.zone=a,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ch?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Va?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof uc&&n.code===w_.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof M_&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new M_(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){H0()},e.\u0275prov=Qe({token:e,factory:e.\u0275fac});let i=e;return i})();function y9(i){return i.routerState.root}function Zf(i,e){return{\u0275kind:i,\u0275providers:e}}function S9(){let i=Oe(Tp);return e=>{let t=i.get(Op);if(e!==t.components[0])return;let n=i.get(Vn),r=i.get(mD);i.get(PS)===1&&n.initialNavigation(),i.get(gD,null,Xb.Optional)?.setUpPreloading(),i.get(fD,null,Xb.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var mD=new Pn("",{factory:()=>new pa}),PS=new Pn("",{providedIn:"root",factory:()=>1});function w9(){return Zf(2,[{provide:PS,useValue:0},{provide:ny,multi:!0,deps:[Tp],useFactory:e=>{let t=e.get(mA,Promise.resolve());return()=>t.then(()=>new Promise(n=>{let r=e.get(Vn),s=e.get(mD);hD(r,()=>{n(!0)}),e.get(DS).afterPreactivation=()=>(n(!0),s.closed?sn(void 0):s),r.initialNavigation()}))}}])}function C9(){return Zf(3,[{provide:ny,multi:!0,useFactory:()=>{let e=Oe(Vn);return()=>{e.setUpLocationChangeListener()}}},{provide:PS,useValue:2}])}var gD=new Pn("");function M9(i){return Zf(0,[{provide:gD,useExisting:x9},{provide:R_,useExisting:i}])}function E9(){return Zf(8,[II,{provide:L_,useExisting:II}])}function A9(i){let e=[{provide:cD,useValue:a9},{provide:dD,useValue:Se({skipNextTransition:!!i?.skipInitialTransition},i)}];return Zf(9,e)}var LI=new Pn("ROUTER_FORROOT_GUARD"),T9=[sd,{provide:qf,useClass:lh},Vn,Yf,{provide:mn,useFactory:y9,deps:[Vn]},kS,[]],RS=(()=>{let e=class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[T9,[],{provide:P_,multi:!0,useValue:n},{provide:LI,useFactory:P9,deps:[[Vn,new Yb,new zE]]},{provide:Kf,useValue:r||{}},r?.useHash?I9():D9(),k9(),r?.preloadingStrategy?M9(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?R9(r):[],r?.bindToComponentInputs?E9().\u0275providers:[],r?.enableViewTransitions?A9().\u0275providers:[],L9()]}}static forChild(n){return{ngModule:e,providers:[{provide:P_,multi:!0,useValue:n}]}}};e.\u0275fac=function(r){return new(r||e)(Ze(LI,8))},e.\u0275mod=Ei({type:e}),e.\u0275inj=Mi({});let i=e;return i})();function k9(){return{provide:fD,useFactory:()=>{let i=Oe(bA),e=Oe(sr),t=Oe(Kf),n=Oe(DS),r=Oe(qf);return t.scrollOffset&&i.setOffset(t.scrollOffset),new b9(r,n,i,e,t)}}}function I9(){return{provide:Fp,useClass:_A}}function D9(){return{provide:Fp,useClass:gA}}function P9(i){return"guarded"}function R9(i){return[i.initialNavigation==="disabled"?C9().\u0275providers:[],i.initialNavigation==="enabledBlocking"?w9().\u0275providers:[]]}var OI=new Pn("");function L9(){return[{provide:OI,useFactory:S9},{provide:tg,multi:!0,useExisting:OI}]}var N_=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Ve({type:i,selectors:[["app-home"]],decls:24,vars:0,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1"],["id","banner"],[1,"banner-text"],["src","assets/images/logo-1.png","alt","",1,"logo-size"],["src","assets/images/agasthya-font.png","alt",""],[1,"dev-txt"],[1,"pvt-txt"],[1,"welcome-txt"],["href","","routerLink","/login"],["type","submit"]],template:function(t,n){t&1&&(c(0,"html",0)(1,"head"),Rt(2,"meta",1)(3,"meta",2),c(4,"title"),h(5,"Clean Homes"),u()(),c(6,"body")(7,"section",3)(8,"div",4),Rt(9,"img",5)(10,"br")(11,"img",6),c(12,"h6",7),h(13,"DEVELOPER"),u(),c(14,"h6",8),h(15,"PRIVATE LIMITED"),u(),Rt(16,"br")(17,"br"),c(18,"h2",9),h(19,"Welcome To Agasthya CRM"),u(),Rt(20,"br"),c(21,"a",10)(22,"button",11),h(23,"Login"),u()()()()()())},dependencies:[di],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Poppins,sans-serif}#banner[_ngcontent-%COMP%]{background:linear-gradient(#00000080,#5e0f80),url(/assets/images/banner-background.png);background-size:cover;background-position:center;height:100vh;overflow:hidden;position:relative}.logo-size[_ngcontent-%COMP%]{height:150px;width:150px;animation:_ngcontent-%COMP%_continuous-rotation 5s linear infinite}@keyframes _ngcontent-%COMP%_continuous-rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.banner-text[_ngcontent-%COMP%]{text-align:center;color:#fff;padding-top:120px}.banner-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:130px;font-family:Kaushan Script,cursive}.dev-txt[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;letter-spacing:2px;margin-top:-25px;margin-left:5px;font-size:9px}.pvt-txt[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;letter-spacing:5px;margin-top:-20px;font-size:10px;color:#f48d3a}button[_ngcontent-%COMP%]{width:20%;margin-top:2%;padding:10px;border:none;border-radius:4px;background-color:#f48d3a;color:#fff;font-size:16px;cursor:pointer;transition:1s;font-family:Arial,Helvetica,sans-serif;font-weight:700}button[_ngcontent-%COMP%]:hover{background-color:#fff;color:#181818;border:#f48d3a 1px solid}",`

        @import url('https://fonts.googleapis.com/css2?family=Protest+Guerrilla&display=swap');
        .welcome-txt[_ngcontent-%COMP%] {
            display: inline-block;
            overflow: hidden;
            white-space: nowrap;
            animation: _ngcontent-%COMP%_typing 4s steps(40, end);
            font-family: "Protest Guerrilla", sans-serif;
            font-weight: 400;
            font-style: normal;
            font-size: 2rem;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            z-index: -1;
            overflow: hidden;
            opacity: 0.5;
        }

        @keyframes _ngcontent-%COMP%_typing {
            from {
                width: 0;
            }

            to {
                width: 100%;
            }
        }`]})};var _D={production:!0,apiUrl:"https://api.agasthyacrm.com/api/"};var Cn=class i{apiUrl=_D.apiUrl;constructor(){}marketing_content_tracker_api(){return`${this.apiUrl}marketing_content_tracker/`}Collateraltrackerapi(){return`${this.apiUrl}marketing_collateral_tracker/`}marketingcalenderapi(){return`${this.apiUrl}marketing_calender/`}engagementanalyzingapi(){return`${this.apiUrl}marketing_engagement/`}marketingtotalleadapi(){return`${this.apiUrl}marketing_total_leads/`}marketingmiscellaneousapi(){return`${this.apiUrl}Marketing_miscellaneous/`}marketing_manage_task_api(){return`${this.apiUrl}marketing_manage_task/`}user_management_api(){return`${this.apiUrl}user_register/`}user_login_api(){return`${this.apiUrl}user_login/`}manage_department(){return`${this.apiUrl}manage_department/`}manage_designation(){return`${this.apiUrl}manage_designation/`}send_email_api(){return`${this.apiUrl}send-email/`}sales_dbtracker_api(){return`${this.apiUrl}Sales_database_tracker/`}sales_telecallers_comments_api(){return`${this.apiUrl}Sales_telecallers_commants/`}marketing_meeting_api(){return`${this.apiUrl}marketing_meeting/`}marketing_meeting_data_api(){return`${this.apiUrl}Marketing_Meeting_Data/`}sales_report_api(){return`${this.apiUrl}sales_report/`}site_details_api(){return`${this.apiUrl}site_details/`}redirect_card=null;set_redirect_card(e){this.redirect_card=e}get_redirect_card(){return this.redirect_card}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Qe({token:i,factory:i.\u0275fac,providedIn:"root"})};var pn=class i{constructor(){}saveUserData(e){sessionStorage.setItem("userData",JSON.stringify(e))}getUserData(){let e=sessionStorage.getItem("userData");return e?JSON.parse(e):null}clearUserData(){sessionStorage.removeItem("userData")}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Qe({token:i,factory:i.\u0275fac,providedIn:"root"})};function O9(i,e){if(i&1){let t=Ft();c(0,"div",18)(1,"div",19)(2,"strong"),h(3,"Success!"),u(),h(4),c(5,"button",20),lt("click",function(){G(t);let r=I();return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}if(i&2){let t=I();_(4),de(" ",t.login_message," ")}}function N9(i,e){if(i&1){let t=Ft();c(0,"div",21)(1,"div",19)(2,"strong"),h(3,"Error!"),u(),h(4),c(5,"button",20),lt("click",function(){G(t);let r=I();return q(r.error_mgs_card=!1)}),h(6,"\xD7"),u()()()}if(i&2){let t=I();_(4),de(" ",t.errorMessage," ")}}var F_=class i{constructor(e,t,n,r,s){this.route=e;this.apiService=t;this.http=n;this.router=r;this.authService=s}passwordFieldType="password";togglePasswordVisibility(){this.passwordFieldType=this.passwordFieldType==="password"?"text":"password"}ngOnInit(){this.apifromservice()}login_api_url="";apifromservice(){this.login_api_url=this.apiService.user_login_api()}user_email="";user_password="";successmgs=!1;error_mgs_card=!1;errorMessage="";error_log;login_message="";login_btn(){debugger;let e=this.login_api_url,t={User_email_id:this.user_email,User_password:this.user_password},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{console.log(r),this.login_message=r.message;let s=r.user_data;this.authService.saveUserData(s),this.successmgs=!0,this.router.navigate(["/dashboard"])},r=>{this.error_log=r,this.get_error()})}get_error(){this.user_email.length==0&&(this.errorMessage="Enter Email ID!"),this.user_email.length==0?this.errorMessage="Enter Password!":(this.errorMessage=this.error_log.error?.error||"An unknown error occurred",console.error("Backend returned code:",this.error_log.status),console.error("Response body:",this.error_log.error)),this.error_mgs_card=!0}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(Vn),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-login"]],decls:31,vars:6,consts:[[1,"log-container"],["class","alert-card fade-in",4,"ngIf"],["class","alert-card-error fade-in",4,"ngIf"],[1,"left-side"],[1,"img-container"],["src","assets/images/logo-1.png","alt","",1,"logo-style"],["src","assets/images/agasthya-font.png","alt","",1,"logo-font"],[1,"dev-txt"],[1,"pvt-txt"],[1,"right-side"],[1,"login-container"],[1,"form-group"],["for","username"],["required","Pleace Enter your Email id","placeholder","email","type","email","id","username","name","username",3,"ngModelChange","ngModel"],["for","password"],["placeholder","password","id","password","name","password",3,"ngModelChange","ngModel","type"],[1,"far",3,"click","ngClass"],["type","submit",1,"login-btn",3,"click"],[1,"alert-card","fade-in"],[1,"alert-content"],[1,"close-btn",3,"click"],[1,"alert-card-error","fade-in"]],template:function(t,n){t&1&&(c(0,"div",0),rt(1,O9,7,1,"div",1)(2,N9,7,1,"div",2),c(3,"div",3)(4,"div",4)(5,"div"),Rt(6,"img",5),u(),c(7,"div"),Rt(8,"img",6),c(9,"h6",7),h(10,"DEVELOPER"),u(),c(11,"h6",8),h(12,"PRIVATE LIMITED"),u(),Rt(13,"br")(14,"br"),u()()(),c(15,"div",9)(16,"div",10)(17,"h2"),h(18,"Login"),u(),c(19,"form")(20,"div",11)(21,"label",12),h(22,"Email"),u(),c(23,"input",13),vt("ngModelChange",function(s){return _t(n.user_email,s)||(n.user_email=s),s}),u()(),c(24,"div",11)(25,"label",14),h(26,"Password"),u(),c(27,"input",15),vt("ngModelChange",function(s){return _t(n.user_password,s)||(n.user_password=s),s}),u(),c(28,"i",16),lt("click",function(){return n.togglePasswordVisibility()}),u()(),c(29,"button",17),lt("click",function(){return n.login_btn()}),h(30,"Login"),u()()()()()),t&2&&(_(),D("ngIf",n.successmgs),_(),D("ngIf",n.error_mgs_card),_(21),gt("ngModel",n.user_email),_(4),gt("ngModel",n.user_password),D("type",n.passwordFieldType),_(),D("ngClass",n.passwordFieldType==="password"?"fa-eye":"fa-eye-slash"))},dependencies:[en,Sn,H3,yi,oi,F3,Na,ni,Ny],styles:[".log-container[_ngcontent-%COMP%]{display:flex;height:100vh}.left-side[_ngcontent-%COMP%]{flex:1;background-color:#582c6b;display:flex;justify-content:center;align-items:center}.right-side[_ngcontent-%COMP%]{background:linear-gradient(#00000080,#181818),url(/assets/images/login-bgimg.jpg);flex:1;background-color:#fff;display:flex;justify-content:center;align-items:center;background-size:cover;background-position:center}.img-container[_ngcontent-%COMP%]{width:80%;max-width:400px;padding:0;margin-bottom:20%;margin-left:20%}.login-container[_ngcontent-%COMP%]{width:40%;max-width:400px;padding:20px;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 8px #0000001a;background-color:#fff}.logo-style[_ngcontent-%COMP%]{height:150px;width:150px;animation:_ngcontent-%COMP%_continuous-rotation 5s linear infinite;margin-bottom:8%;margin-left:11%}.logo-font[_ngcontent-%COMP%]{margin-top:-20%}@keyframes _ngcontent-%COMP%_continuous-rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.img-container[_ngcontent-%COMP%]   .dev-txt[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;letter-spacing:2px;margin-top:-40px;margin-left:20%;color:#fff;font-size:9px}.pvt-txt[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;letter-spacing:5px;margin-top:-3%;margin-left:10%;font-size:9px;color:#f48d3a}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px;position:relative}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}input[_ngcontent-%COMP%]{width:100%;color:gray;padding:8px;border:1px solid #ccc;border-radius:4px}i[_ngcontent-%COMP%]{position:absolute;top:49px;right:2%;transform:translateY(-50%);cursor:pointer;color:#868686;padding:2px}label[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}.login-btn[_ngcontent-%COMP%]{width:100%;padding:10px;border:none;border-radius:4px;background-color:#582c6b;color:#fff;font-size:16px;cursor:pointer;transition:1s}.login-btn[_ngcontent-%COMP%]:hover{background-color:#fff;color:#181818;border:#582c6b 1px solid}@media screen and (max-width: 768px){.left-side[_ngcontent-%COMP%]{display:none}.login-container[_ngcontent-%COMP%]{width:90%}}"]})};var nm={};nm.d=(i,e)=>{for(var t in e)nm.o(e,t)&&!nm.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})};nm.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var gn=globalThis.pdfjsLib={};nm.d(gn,{AbortException:()=>nl,AnnotationEditorLayer:()=>Rj,AnnotationEditorParamsType:()=>Wn,AnnotationEditorType:()=>Tn,AnnotationEditorUIManager:()=>lm,AnnotationLayer:()=>Yw,AnnotationMode:()=>pc,ColorPicker:()=>x1,DOMSVGFactory:()=>pm,DrawLayer:()=>iC,FeatureTest:()=>qr,GlobalWorkerOptions:()=>wd,ImageKind:()=>W_,InvalidPDFException:()=>X_,MissingPDFException:()=>Cd,OPS:()=>Ua,OutputScale:()=>om,PDFDataRangeTransport:()=>o1,PDFDateString:()=>$_,PDFWorker:()=>mh,PasswordResponses:()=>z9,PermissionFlag:()=>U9,PixelsPerInch:()=>mc,RenderingCancelledException:()=>am,TextLayer:()=>um,UnexpectedResponseException:()=>vh,Util:()=>qe,VerbosityLevel:()=>w1,XfaLayer:()=>d1,build:()=>Ij,createValidAbsoluteUrl:()=>G9,fetchData:()=>A1,getDocument:()=>Ej,getFilenameFromUrl:()=>Q9,getPdfFilenameFromUrl:()=>tj,getXfaPageViewport:()=>ej,isDataScheme:()=>T1,isPdfFile:()=>aC,noContextMenu:()=>ja,normalizeUnicode:()=>K9,setLayerDimensions:()=>Md,shadow:()=>Un,stopEvent:()=>za,version:()=>kj});var xs=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),LD=[1,0,0,1,0,0],VS=[.001,0,0,.001,0,0],F9=1e7,H_=1.35,B9=.35,Bdt=B9/H_,Ks={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},pc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},V9="pdfjs_internal_editor_",Tn={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Wn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},U9={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},es={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},W_={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Er={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var Jf={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var w1={ERRORS:0,WARNINGS:1,INFOS:5},Ua={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},z9={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},C1=w1.WARNINGS;function j9(i){Number.isInteger(i)&&(C1=i)}function H9(){return C1}function M1(i){C1>=w1.INFOS&&console.log(`Info: ${i}`)}function Ln(i){C1>=w1.WARNINGS&&console.log(`Warning: ${i}`)}function wi(i){throw new Error(i)}function Sr(i,e){i||wi(e)}function W9(i){switch(i?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function G9(i,e=null,t=null){if(!i)return null;try{if(t&&typeof i=="string"&&(t.addDefaultProtocol&&i.startsWith("www.")&&i.match(/\./g)?.length>=2&&(i=`http://${i}`),t.tryConvertEncoding))try{i=$9(i)}catch{}let n=e?new URL(i,e):new URL(i);if(W9(n))return n}catch{}return null}function Un(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}var gc=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}(),im=class extends gc{constructor(e,t){super(e,"PasswordException"),this.code=t}},rm=class extends gc{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}},X_=class extends gc{constructor(e){super(e,"InvalidPDFException")}},Cd=class extends gc{constructor(e){super(e,"MissingPDFException")}},vh=class extends gc{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}},US=class extends gc{constructor(e){super(e,"FormatError")}},nl=class extends gc{constructor(e){super(e,"AbortException")}};function OD(i){(typeof i!="object"||i?.length===void 0)&&wi("Invalid argument for bytesToString");let e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);let n=[];for(let r=0;r<e;r+=t){let s=Math.min(r+t,e),a=i.subarray(r,s);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function E1(i){typeof i!="string"&&wi("Invalid argument for stringToBytes");let e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function q9(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function rC(i){let e=Object.create(null);for(let[t,n]of i)e[t]=n;return e}function X9(){let i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function Y9(){try{return new Function(""),!0}catch{return!1}}var qr=class{static get isLittleEndian(){return Un(this,"isLittleEndian",X9())}static get isEvalSupported(){return Un(this,"isEvalSupported",Y9())}static get isOffscreenCanvasSupported(){return Un(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Un(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?Un(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):Un(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return Un(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},LS=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0")),qe=class{static makeHexColor(e,t,n){return`#${LS[e]}${LS[t]}${LS[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){let n=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[n,r]}static applyInverseTransform(e,t){let n=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,s=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[r,s]}static getAxialAlignedBoundingBox(e,t){let n=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],s[0],a[0]),Math.min(n[1],r[1],s[1],a[1]),Math.max(n[0],r[0],s[0],a[0]),Math.max(n[1],r[1],s[1],a[1])]}static inverseTransform(e){let t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){let t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(n+a)/2,l=Math.sqrt((n+a)**2-4*(n*a-s*r))/2,d=o+l||1,p=o-l||1;return[Math.sqrt(d),Math.sqrt(p)]}static normalizeRect(e){let t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){let n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;let s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[n,s,r,a]}static#t(e,t,n,r,s,a,o,l,d,p){if(d<=0||d>=1)return;let f=1-d,g=d*d,m=g*d,x=f*(f*(f*e+3*d*t)+3*g*n)+m*r,y=f*(f*(f*s+3*d*a)+3*g*o)+m*l;p[0]=Math.min(p[0],x),p[1]=Math.min(p[1],y),p[2]=Math.max(p[2],x),p[3]=Math.max(p[3],y)}static#e(e,t,n,r,s,a,o,l,d,p,f,g){if(Math.abs(d)<1e-12){Math.abs(p)>=1e-12&&this.#t(e,t,n,r,s,a,o,l,-f/p,g);return}let m=p**2-4*f*d;if(m<0)return;let x=Math.sqrt(m),y=2*d;this.#t(e,t,n,r,s,a,o,l,(-p+x)/y,g),this.#t(e,t,n,r,s,a,o,l,(-p-x)/y,g)}static bezierBoundingBox(e,t,n,r,s,a,o,l,d){return d?(d[0]=Math.min(d[0],e,o),d[1]=Math.min(d[1],t,l),d[2]=Math.max(d[2],e,o),d[3]=Math.max(d[3],t,l)):d=[Math.min(e,o),Math.min(t,l),Math.max(e,o),Math.max(t,l)],this.#e(e,n,s,o,t,r,a,l,3*(-e+3*(n-s)+o),6*(e-2*n+s),3*(n-e),d),this.#e(e,n,s,o,t,r,a,l,3*(-t+3*(r-a)+l),6*(t-2*r+a),3*(r-t),d),d}};function $9(i){return decodeURIComponent(escape(i))}var OS=null,vD=null;function K9(i){return OS||(OS=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,vD=new Map([["\uFB05","\u017Ft"]])),i.replaceAll(OS,(e,t,n)=>t?t.normalize("NFKC"):vD.get(n))}function Z9(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();let i=new Uint8Array(32);return crypto.getRandomValues(i),OD(i)}var sC="pdfjs_internal_id_",tl={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function J9(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(OD(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...e){return new Promise(t=>{t(i(...e))})});var el="http://www.w3.org/2000/svg",mc=class{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF};function A1(i,e="text"){return Be(this,null,function*(){if(em(i,document.baseURI)){let t=yield fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{let r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})})}var sm=class i{constructor({viewBox:e,scale:t,rotation:n,offsetX:r=0,offsetY:s=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=r,this.offsetY=s;let o=(e[2]+e[0])/2,l=(e[3]+e[1])/2,d,p,f,g;switch(n%=360,n<0&&(n+=360),n){case 180:d=-1,p=0,f=0,g=1;break;case 90:d=0,p=1,f=1,g=0;break;case 270:d=0,p=-1,f=-1,g=0;break;case 0:d=1,p=0,f=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,g=-g);let m,x,y,S;d===0?(m=Math.abs(l-e[1])*t+r,x=Math.abs(o-e[0])*t+s,y=(e[3]-e[1])*t,S=(e[2]-e[0])*t):(m=Math.abs(o-e[0])*t+r,x=Math.abs(l-e[1])*t+s,y=(e[2]-e[0])*t,S=(e[3]-e[1])*t),this.transform=[d*t,p*t,f*t,g*t,m-d*t*o-f*t*l,x-p*t*o-g*t*l],this.width=y,this.height=S}get rawDims(){let{viewBox:e}=this;return Un(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new i({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){return qe.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){let t=qe.applyTransform([e[0],e[1]],this.transform),n=qe.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return qe.applyInverseTransform([e,t],this.transform)}},am=class extends gc{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}};function T1(i){let e=i.length,t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function aC(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function Q9(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function tj(i,e="document.pdf"){if(typeof i!="string")return e;if(T1(i))return Ln('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;let t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(i),s=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(s&&(s=s[0],s.includes("%")))try{s=n.exec(decodeURIComponent(s))[0]}catch{}return s||e}var Y_=class{started=Object.create(null);times=[];time(e){e in this.started&&Ln(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ln(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){let e=[],t=0;for(let{name:n}of this.times)t=Math.max(n.length,t);for(let{name:n,start:r,end:s}of this.times)e.push(`${n.padEnd(t)} ${s-r}ms
`);return e.join("")}};function em(i,e){try{let{protocol:t}=e?new URL(i,e):new URL(i);return t==="http:"||t==="https:"}catch{return!1}}function ja(i){i.preventDefault()}function za(i){i.preventDefault(),i.stopPropagation()}function xD(i){console.log("Deprecated API usage: "+i)}var $_=class{static#t;static toDateObject(e){if(!e||typeof e!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let t=this.#t.exec(e);if(!t)return null;let n=parseInt(t[1],10),r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;let d=t[7]||"Z",p=parseInt(t[8],10);p=p>=0&&p<=23?p:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,d==="-"?(a+=p,o+=f):d==="+"&&(a-=p,o-=f),new Date(Date.UTC(n,r,s,a,o,l))}};function ej(i,{scale:e=1,rotation:t=0}){let{width:n,height:r}=i.attributes.style,s=[0,0,parseInt(n),parseInt(r)];return new sm({viewBox:s,scale:e,rotation:t})}function oC(i){if(i.startsWith("#")){let e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ln(`Not a valid color format: "${i}"`),[0,0,0])}function nj(i){let e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(let t of i.keys()){e.style.color=t;let n=window.getComputedStyle(e).color;i.set(t,oC(n))}e.remove()}function Vi(i){let{a:e,b:t,c:n,d:r,e:s,f:a}=i.getTransform();return[e,t,n,r,s,a]}function go(i){let{a:e,b:t,c:n,d:r,e:s,f:a}=i.getTransform().invertSelf();return[e,t,n,r,s,a]}function Md(i,e,t=!1,n=!0){if(e instanceof sm){let{pageWidth:r,pageHeight:s}=e.rawDims,{style:a}=i,o=qr.isCSSRoundSupported,l=`var(--scale-factor) * ${r}px`,d=`var(--scale-factor) * ${s}px`,p=o?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,f=o?`round(down, ${d}, var(--scale-round-y, 1px))`:`calc(${d})`;!t||e.rotation%180===0?(a.width=p,a.height=f):(a.width=f,a.height=p)}n&&i.setAttribute("data-main-rotation",e.rotation)}var om=class{constructor(){let e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}},zS=class i{#t=null;#e=null;#n;#i=null;#s=null;static#r=null;constructor(e){this.#n=e,i.#r||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){let e=this.#t=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");let t=this.#n._uiManager._signal;e.addEventListener("contextmenu",ja,{signal:t}),e.addEventListener("pointerdown",i.#c,{signal:t});let n=this.#i=document.createElement("div");n.className="buttons",e.append(n);let r=this.#n.toolbarPosition;if(r){let{style:s}=e,a=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return this.#u(),e}get div(){return this.#t}static#c(e){e.stopPropagation()}#o(e){this.#n._focusEventsAllowed=!1,za(e)}#d(e){this.#n._focusEventsAllowed=!0,za(e)}#l(e){let t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#o.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ja,{signal:t})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#s?.shown()}#u(){let{editorType:e,_uiManager:t}=this.#n,n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",i.#r[e]),this.#l(n),n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),this.#i.append(n)}get#a(){let e=document.createElement("div");return e.className="divider",e}addAltText(e){return Be(this,null,function*(){let t=yield e.render();this.#l(t),this.#i.prepend(t,this.#a),this.#s=e})}addColorPicker(e){this.#e=e;let t=e.renderButton();this.#l(t),this.#i.prepend(t,this.#a)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}},jS=class{#t=null;#e=null;#n;constructor(e){this.#n=e}#i(){let e=this.#e=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ja,{signal:this.#n._signal});let t=this.#t=document.createElement("div");return t.className="buttons",e.append(t),this.#r(),e}#s(e,t){let n=0,r=0;for(let s of e){let a=s.y+s.height;if(a<n)continue;let o=s.x+(t?s.width:0);if(a>n){r=o,n=a;continue}t?o>r&&(r=o):o<r&&(r=o)}return[t?1-r:r,n]}show(e,t,n){let[r,s]=this.#s(t,n),{style:a}=this.#e||=this.#i();e.append(this.#e),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(){let e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");let t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");let n=this.#n._signal;e.addEventListener("contextmenu",ja,{signal:n}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:n}),this.#t.append(e)}};function K_(i,e,t){for(let n of t)e.addEventListener(n,i[n].bind(i))}var HS=class{#t=0;get id(){return`${V9}${this.#t++}`}},WS=class i{#t=Z9();#e=0;#n=null;static get _isSVGFittingCanvas(){let e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;let s=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Un(this,"_isSVGFittingCanvas",s)}#i(e,t){return Be(this,null,function*(){this.#n||=new Map;let n=this.#n.get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof t=="string"?(n.url=t,r=yield A1(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){let s=i._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((d,p)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,d()},a.onload=()=>Be(this,null,function*(){let f=n.svgUrl=a.result;o.src=(yield s)?`${f}#svgView(preserveAspectRatio(none))`:f}),o.onerror=a.onerror=p});a.readAsDataURL(r),yield l}else n.bitmap=yield createImageBitmap(r);n.refCounter=1}catch(r){Ln(r),n=null}return this.#n.set(e,n),n&&this.#n.set(n.id,n),n})}getFromFile(e){return Be(this,null,function*(){let{lastModified:t,name:n,size:r,type:s}=e;return this.#i(`${t}_${n}_${r}_${s}`,e)})}getFromUrl(e){return Be(this,null,function*(){return this.#i(e,e)})}getFromBlob(e,t){return Be(this,null,function*(){let n=yield t;return this.#i(e,n)})}getFromId(e){return Be(this,null,function*(){this.#n||=new Map;let t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){let{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)})}getFromCanvas(e,t){this.#n||=new Map;let n=this.#n.get(e);if(n?.bitmap)return n.refCounter+=1,n;let r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(e,n),this.#n.set(n.id,n),n}getSvgUrl(e){let t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;let t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;let{bitmap:n}=t;if(!t.url&&!t.file){let r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=r.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#t}_`)}},GS=class{#t=[];#e=!1;#n;#i=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:n,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(r&&e(),this.#e)return;let l={cmd:e,undo:t,post:n,type:s};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(l);return}if(a&&this.#t[this.#i].type===s){o&&(l.undo=this.#t[this.#i].undo),this.#t[this.#i]=l;return}let d=this.#i+1;d===this.#n?this.#t.splice(0,1):(this.#i=d,d<this.#t.length&&this.#t.splice(d)),this.#t.push(l)}undo(){if(this.#i===-1)return;this.#e=!0;let{undo:e,post:t}=this.#t[this.#i];e(),t?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;let{cmd:e,post:t}=this.#t[this.#i];e(),t?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(e){if(this.#i!==-1){for(let t=this.#i;t>=0;t--)if(this.#t[t].type!==e){this.#t.splice(t+1,this.#i-t),this.#i=t;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}},Ed=class{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:t}=qr.platform;for(let[n,r,s={}]of e)for(let a of n){let o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1)))}}#t(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);let t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;let n=this.callbacks.get(this.#t(t));if(!n)return;let{callback:r,options:{bubbles:s=!1,args:a=[],checker:o=null}}=n;o&&!o(e,t)||(r.bind(e,...a,t)(),s||za(t))}},qS=class i{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let e=new Map([["CanvasText",null],["Canvas",null]]);return nj(e),Un(this,"_colors",e)}convert(e){let t=oC(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(let[n,r]of this._colors)if(r.every((s,a)=>s===t[a]))return i._colorsMapping.get(n);return t}getHexCode(e){let t=this._colors.get(e);return t?qe.makeHexColor(...t):e}},lm=(()=>{class i{#t=new AbortController;#e=null;#n=new Map;#i=new Map;#s=null;#r=null;#c=null;#o=new GS;#d=null;#l=null;#u=0;#a=new Set;#h=null;#p=null;#f=new Set;_editorUndoBar=null;#g=!1;#m=!1;#_=!1;#v=null;#b=null;#y=null;#C=null;#M=!1;#E=null;#T=new HS;#S=!1;#k=!1;#A=null;#I=null;#L=null;#B=null;#w=Tn.NONE;#x=new Set;#R=null;#V=null;#z=null;#j={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#N=[0,0];#P=null;#U=null;#q=null;#O=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let t=i.prototype,n=o=>o.#U.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:l})=>{if(l instanceof HTMLInputElement){let{type:d}=l;return d!=="text"&&d!=="number"}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Un(this,"_keyboardManager",new Ed([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],t.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:r}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&o.#U.contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&o.#U.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:n}]]))}constructor(t,n,r,s,a,o,l,d,p,f,g,m){let x=this._signal=this.#t.signal;this.#U=t,this.#q=n,this.#s=r,this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:x}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),s._on("setpreference",this.onSetPreference.bind(this),{signal:x}),s._on("switchannotationeditorparams",y=>this.updateParams(y.type,y.value),{signal:x}),this.#et(),this.#st(),this.#Y(),this.#r=a.annotationStorage,this.#v=a.filterFactory,this.#V=o,this.#C=l||null,this.#g=d,this.#m=p,this.#_=f,this.#B=g||null,this.viewParameters={realScale:mc.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null}destroy(){this.#O?.resolve(),this.#O=null,this.#t?.abort(),this.#t=null,this._signal=null;for(let t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#f.clear(),this.#e=null,this.#x.clear(),this.#o.destroy(),this.#s?.destroy(),this.#E?.hide(),this.#E=null,this.#b&&(clearTimeout(this.#b),this.#b=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#B}get useNewAltTextFlow(){return this.#m}get useNewAltTextWhenAddingImage(){return this.#_}get hcmFilter(){return Un(this,"hcmFilter",this.#V?this.#v.addHCMFilter(this.#V.foreground,this.#V.background):"none")}get direction(){return Un(this,"direction",getComputedStyle(this.#U).direction)}get highlightColors(){return Un(this,"highlightColors",this.#C?new Map(this.#C.split(",").map(t=>t.split("=").map(n=>n.trim()))):null)}get highlightColorNames(){return Un(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#l=t}setMainHighlightColorPicker(t){this.#L=t}editAltText(t,n=!1){this.#s?.editAltText(this,t,n)}switchToMode(t,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,n){this._eventBus.dispatch("setpreference",{source:this,name:t,value:n})}onSetPreference({name:t,value:n}){switch(t){case"enableNewAltTextWhenAddingImage":this.#_=n;break}}onPageChanging({pageNumber:t}){this.#u=t-1}focusMainContainer(){this.#U.focus()}findParent(t,n){for(let r of this.#i.values()){let{x:s,y:a,width:o,height:l}=r.div.getBoundingClientRect();if(t>=s&&t<=s+o&&n>=a&&n<=a+l)return r}return null}disableUserSelect(t=!1){this.#q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#f.add(t)}removeShouldRescale(t){this.#f.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*mc.PDF_TO_CSS_UNITS;for(let n of this.#f)n.onScaleChanging();this.#l?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#W({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#X(t){let{currentLayer:n}=this;if(n.hasTextLayer(t))return n;for(let r of this.#i.values())if(r.hasTextLayer(t))return r;return null}highlightSelection(t=""){let n=document.getSelection();if(!n||n.isCollapsed)return;let{anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:o}=n,l=n.toString(),p=this.#W(n).closest(".textLayer"),f=this.getSelectionBoxes(p);if(!f)return;n.empty();let g=this.#X(p),m=this.#w===Tn.NONE,x=()=>{g?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:f,anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:o,text:l}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(Tn.HIGHLIGHT,x);return}x()}#Q(){let t=document.getSelection();if(!t||t.isCollapsed)return;let r=this.#W(t).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(this.#E||=new jS(this),this.#E.show(r,s,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#r&&!this.#r.has(t.id)&&this.#r.setValue(t.id,t)}#tt(){let t=document.getSelection();if(!t||t.isCollapsed){this.#R&&(this.#E?.hide(),this.#R=null,this.#D({hasSelectedText:!1}));return}let{anchorNode:n}=t;if(n===this.#R)return;let s=this.#W(t).closest(".textLayer");if(!s){this.#R&&(this.#E?.hide(),this.#R=null,this.#D({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#R=n,this.#D({hasSelectedText:!0}),!(this.#w!==Tn.HIGHLIGHT&&this.#w!==Tn.NONE)&&(this.#w===Tn.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#M=this.isShiftKeyDown,!this.isShiftKeyDown)){let a=this.#w===Tn.HIGHLIGHT?this.#X(s):null;a?.toggleDrawing();let o=new AbortController,l=this.combinedSignal(o),d=p=>{p.type==="pointerup"&&p.button!==0||(o.abort(),a?.toggleDrawing(!0),p.type==="pointerup"&&this.#G("main_toolbar"))};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}}#G(t=""){this.#w===Tn.HIGHLIGHT?this.highlightSelection(t):this.#g&&this.#Q()}#et(){document.addEventListener("selectionchange",this.#tt.bind(this),{signal:this._signal})}#nt(){if(this.#y)return;this.#y=new AbortController;let t=this.combinedSignal(this.#y);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#it(){this.#y?.abort(),this.#y=null}blur(){if(this.isShiftKeyDown=!1,this.#M&&(this.#M=!1,this.#G("main_toolbar")),!this.hasSelection)return;let{activeElement:t}=document;for(let n of this.#x)if(n.div.contains(t)){this.#I=[n,t],n._focusEventsAllowed=!1;break}}focus(){if(!this.#I)return;let[t,n]=this.#I;this.#I=null,n.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#Y(){if(this.#A)return;this.#A=new AbortController;let t=this.combinedSignal(this.#A);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#rt(){this.#A?.abort(),this.#A=null}#$(){if(this.#d)return;this.#d=new AbortController;let t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#K(){this.#d?.abort(),this.#d=null}#st(){let t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Y(),this.#$()}removeEditListeners(){this.#rt(),this.#K()}dragOver(t){for(let{type:n}of t.dataTransfer.items)for(let r of this.#p)if(r.isHandlingMimeForPasting(n)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(let n of t.dataTransfer.items)for(let r of this.#p)if(r.isHandlingMimeForPasting(n.type)){r.paste(n,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;let n=[];for(let r of this.#x){let s=r.serialize(!0);s&&n.push(s)}n.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}paste(t){return Be(this,null,function*(){t.preventDefault();let{clipboardData:n}=t;for(let a of n.items)for(let o of this.#p)if(o.isHandlingMimeForPasting(a.type)){o.paste(a,this.currentLayer);return}let r=n.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(a){Ln(`paste: "${a.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();let s=this.currentLayer;try{let a=[];for(let d of r){let p=yield s.deserialize(d);if(!p)return;a.push(p)}let o=()=>{for(let d of a)this.#Z(d);this.#J(a)},l=()=>{for(let d of a)d.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(a){Ln(`paste: "${a.message}".`)}})}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#w!==Tn.NONE&&!this.isEditorHandlingKeyboard&&i._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#M&&(this.#M=!1,this.#G("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#D(t){Object.entries(t).some(([r,s])=>this.#j[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#j,t)}),this.#w===Tn.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#F([[Wn.HIGHLIGHT_FREE,!0]]))}#F(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#nt(),this.#$(),this.#D({isEditing:this.#w!==Tn.NONE,isEmpty:this.#H(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#it(),this.#K(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#p){this.#p=t;for(let n of this.#p)this.#F(n.defaultPropertiesToUpdate)}}getId(){return this.#T.id}get currentLayer(){return this.#i.get(this.#u)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#u}addLayer(t){this.#i.set(t.pageIndex,t),this.#S?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}updateMode(t,n=null,r=!1){return Be(this,null,function*(){if(this.#w!==t&&!(this.#O&&(yield this.#O.promise,!this.#O))){if(this.#O=Promise.withResolvers(),this.#w=t,t===Tn.NONE){this.setEditingState(!1),this.#ot(),this._editorUndoBar?.hide(),this.#O.resolve();return}this.setEditingState(!0),yield this.#at(),this.unselectAll();for(let s of this.#i.values())s.updateMode(t);if(!n){r&&this.addNewEditorFromKeyboard(),this.#O.resolve();return}for(let s of this.#n.values())s.annotationElementId===n?(this.setSelected(s),s.enterInEditMode()):s.unselect();this.#O.resolve()}})}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#w&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,n){if(this.#p){switch(t){case Wn.CREATE:this.currentLayer.addNewEditor();return;case Wn.HIGHLIGHT_DEFAULT_COLOR:this.#L?.updateColor(n);break;case Wn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#z||=new Map).set(t,n),this.showAllEditors("highlight",n);break}for(let r of this.#x)r.updateParams(t,n);for(let r of this.#p)r.updateDefaultParams(t,n)}}showAllEditors(t,n,r=!1){for(let a of this.#n.values())a.editorType===t&&a.show(n);(this.#z?.get(Wn.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#F([[Wn.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(t=!1){if(this.#k!==t){this.#k=t;for(let n of this.#i.values())t?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",t)}}#at(){return Be(this,null,function*(){if(!this.#S){this.#S=!0;let t=[];for(let n of this.#i.values())t.push(n.enable());yield Promise.all(t);for(let n of this.#n.values())n.enable()}})}#ot(){if(this.unselectAll(),this.#S){this.#S=!1;for(let t of this.#i.values())t.disable();for(let t of this.#n.values())t.disable()}}getEditors(t){let n=[];for(let r of this.#n.values())r.pageIndex===t&&n.push(r);return n}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.focusMainContainer(),this.#b=null},0)),this.#n.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#a.has(t.annotationElementId))&&this.#r?.remove(t.id)}addDeletedAnnotationElement(t){this.#a.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#a.has(t)}removeDeletedAnnotationElement(t){this.#a.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#Z(t){let n=this.#i.get(t.pageIndex);n?n.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#F(t.propertiesToUpdate))}get#lt(){let t=null;for(t of this.#x);return t}updateUI(t){this.#lt===t&&this.#F(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#F(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#x.has(t)){this.#x.delete(t),t.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#x.add(t),t.select(),this.#F(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(t){this.#l?.commitOrRemove();for(let n of this.#x)n!==t&&n.unselect();this.#x.clear(),this.#x.add(t),t.select(),this.#F(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(t){return this.#x.has(t)}get firstSelectedEditor(){return this.#x.values().next().value}unselect(t){t.unselect(),this.#x.delete(t),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#x.size!==0}get isEnterHandled(){return this.#x.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#D({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#H()}),this._editorUndoBar?.hide()}redo(){this.#o.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#H()})}addCommands(t){this.#o.add(t),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#H()})}cleanUndoStack(t){this.#o.cleanType(t)}#H(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(let t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();let t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;let n=t?[t]:[...this.#x],r=()=>{this._editorUndoBar?.show(s,n.length===1?n[0].editorType:n.length);for(let a of n)a.remove()},s=()=>{for(let a of n)this.#Z(a)};this.addCommands({cmd:r,undo:s,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#J(t){for(let n of this.#x)n.unselect();this.#x.clear();for(let n of t)n.isEmpty()||(this.#x.add(n),n.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(let t of this.#x)t.commit();this.#J(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#w!==Tn.NONE))&&!this.#l?.commitOrRemove()&&this.hasSelection){for(let t of this.#x)t.unselect();this.#x.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(t,n,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#N[0]+=t,this.#N[1]+=n;let[s,a]=this.#N,o=[...this.#x],l=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#N[0]=this.#N[1]=0,this.addCommands({cmd:()=>{for(let d of o)this.#n.has(d.id)&&d.translateInPage(s,a)},undo:()=>{for(let d of o)this.#n.has(d.id)&&d.translateInPage(-s,-a)},mustExec:!1})},l);for(let d of o)d.translateInPage(t,n)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#h=new Map;for(let t of this.#x)this.#h.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#h)return!1;this.disableUserSelect(!1);let t=this.#h;this.#h=null;let n=!1;for(let[{x:s,y:a,pageIndex:o},l]of t)l.newX=s,l.newY=a,l.newPageIndex=o,n||=s!==l.savedX||a!==l.savedY||o!==l.savedPageIndex;if(!n)return!1;let r=(s,a,o,l)=>{if(this.#n.has(s.id)){let d=this.#i.get(l);d?s._setParentAndPosition(d,a,o):(s.pageIndex=l,s.x=a,s.y=o)}};return this.addCommands({cmd:()=>{for(let[s,{newX:a,newY:o,newPageIndex:l}]of t)r(s,a,o,l)},undo:()=>{for(let[s,{savedX:a,savedY:o,savedPageIndex:l}]of t)r(s,a,o,l)},mustExec:!0}),!0}dragSelectedEditors(t,n){if(this.#h)for(let r of this.#h.keys())r.drag(t,n)}rebuild(t){if(t.parent===null){let n=this.getLayer(t.pageIndex);n?(n.changeParent(t),n.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#x.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#w}get imageManager(){return Un(this,"imageManager",new WS)}getSelectionBoxes(t){if(!t)return null;let n=document.getSelection();for(let p=0,f=n.rangeCount;p<f;p++)if(!t.contains(n.getRangeAt(p).commonAncestorContainer))return null;let{x:r,y:s,width:a,height:o}=t.getBoundingClientRect(),l;switch(t.getAttribute("data-main-rotation")){case"90":l=(p,f,g,m)=>({x:(f-s)/o,y:1-(p+g-r)/a,width:m/o,height:g/a});break;case"180":l=(p,f,g,m)=>({x:1-(p+g-r)/a,y:1-(f+m-s)/o,width:g/a,height:m/o});break;case"270":l=(p,f,g,m)=>({x:1-(f+m-s)/o,y:(p-r)/a,width:m/o,height:g/a});break;default:l=(p,f,g,m)=>({x:(p-r)/a,y:(f-s)/o,width:g/a,height:m/o});break}let d=[];for(let p=0,f=n.rangeCount;p<f;p++){let g=n.getRangeAt(p);if(!g.collapsed)for(let{x:m,y:x,width:y,height:S}of g.getClientRects())y===0||S===0||d.push(l(m,x,y,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:n}){(this.#c||=new Map).set(t,n)}removeChangedExistingAnnotation({annotationElementId:t}){this.#c?.delete(t)}renderAnnotationElement(t){let n=this.#c?.get(t.data.id);if(!n)return;let r=this.#r.getRawValue(n);r&&(this.#w===Tn.NONE&&!r.hasBeenModified||r.renderAnnotationElement(t))}}return i})(),bD=(()=>{class i{#t=null;#e=!1;#n=null;#i=null;#s=null;#r=null;#c=!1;#o=null;#d=null;#l=null;#u=null;#a=!1;static#h=null;static _l10n=null;constructor(t){this.#d=t,this.#a=t._uiManager.useNewAltTextFlow,i.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){i._l10n??=t}render(){return Be(this,null,function*(){let t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";let n=this.#i=document.createElement("span");t.append(n),this.#a?(t.classList.add("new"),t.setAttribute("data-l10n-id",i.#h.missing),n.setAttribute("data-l10n-id",i.#h["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let r=this.#d._uiManager._signal;t.addEventListener("contextmenu",ja,{signal:r}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:r});let s=a=>{a.preventDefault(),this.#d._uiManager.editAltText(this.#d),this.#a&&this.#d._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return t.addEventListener("click",s,{capture:!0,signal:r}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#c=!0,s(a))},{signal:r}),yield this.#f(),t})}get#p(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#c}),this.#c=!1)}isEmpty(){return this.#a?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#a?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}setGuessedText(t){return Be(this,null,function*(){this.#t===null&&(this.#l=t,this.#u=yield i._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#f())})}toggleAltTextBadge(t=!1){if(!this.#a||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){let n=this.#o=document.createElement("div");n.className="noAltTextBadge",this.#d.div.append(n)}this.#o.classList.toggle("hidden",!t)}serialize(t){let n=this.#t;return!t&&this.#l===n&&(n=this.#u),{altText:n,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#u}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:n,guessedText:r,textWithDisclaimer:s,cancel:a=!1}){r&&(this.#l=r,this.#u=s),!(this.#t===t&&this.#e===n)&&(a||(this.#t=t,this.#e=n),this.#f())}toggle(t=!1){this.#n&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!t)}shown(){this.#d._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#s=null,this.#o?.remove(),this.#o=null}#f(){return Be(this,null,function*(){let t=this.#n;if(!t)return;if(this.#a){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",i.#h[this.#p]),this.#i?.setAttribute("data-l10n-id",i.#h[`${this.#p}-label`]),!this.#t){this.#s?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#s?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#s;if(!n){this.#s=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#d.id}`;let s=100,a=this.#d._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#s.classList.add("show"),this.#d._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:a}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#s?.classList.remove("show")},{signal:a})}this.#e?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#t),n.parentNode||t.append(n),this.#d.getImageForAltText()?.setAttribute("aria-describedby",n.id)})}}return i})(),qi=class i{#t=null;#e=null;#n=null;#i=!1;#s=null;#r="";#c=!1;#o=null;#d=null;#l=null;#u=null;#a="";#h=!1;#p=null;#f=!1;#g=!1;#m=!1;#_=null;#v=0;#b=0;#y=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#C=!1;#M=i._zIndex++;static _borderLineWidth=-1;static _colorManager=new qS;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){let e=i.prototype._resizeWithKeyboard,t=lm.TRANSLATE_SMALL,n=lm.TRANSLATE_BIG;return Un(this,"_resizerKeyboardManager",new Ed([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],i.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;let{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[s,a];let[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Un(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){let t=new XS({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(i._l10n??=e,i._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),i._borderLineWidth!==-1)return;let n=getComputedStyle(document.documentElement);i._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){wi("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#C}set _isDraggable(e){this.#C=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){let[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#M}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#P(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#h?this.#h=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){let[s,a]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/s,this.y=(t+r)/a,this.fixAndSetPosition()}#E([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#E(this.parentDimensions,e,t)}translateInPage(e,t){this.#p||=[this.x,this.y,this.width,this.height],this.#E(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#p||=[this.x,this.y,this.width,this.height];let{div:n,parentDimensions:[r,s]}=this;if(this.x+=e/r,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:f,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this,[l,d]=this.getBaseTranslation();a+=l,o+=d;let{style:p}=n;p.left=`${(100*a).toFixed(2)}%`,p.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#p&&(this.#p[0]!==this.x||this.#p[1]!==this.y)}get _hasBeenResized(){return!!this.#p&&(this.#p[2]!==this.width||this.#p[3]!==this.height)}getBaseTranslation(){let[e,t]=this.parentDimensions,{_borderLineWidth:n}=i,r=n/e,s=n/t;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){let{div:{style:t},pageDimensions:[n,r]}=this,{x:s,y:a,width:o,height:l}=this;if(o*=n,l*=r,s*=n,a*=r,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(n-o,s)),a=Math.max(0,Math.min(r-l,a));break;case 90:s=Math.max(0,Math.min(n-l,s)),a=Math.min(r,Math.max(o,a));break;case 180:s=Math.min(n,Math.max(o,s)),a=Math.min(r,Math.max(l,a));break;case 270:s=Math.min(n,Math.max(l,s)),a=Math.max(0,Math.min(r-o,a));break}this.x=s/=n,this.y=a/=r;let[d,p]=this.getBaseTranslation();s+=d,a+=p,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}static#T(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return i.#T(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return i.#T(e,t,360-this.parentRotation)}#S(e){switch(e){case 90:{let[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{let[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){let[n,r]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*e/n).toFixed(2)}%`,this.#c||(s.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){let{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),s=!this.#c&&t.endsWith("%");if(r&&s)return;let[a,o]=this.parentDimensions;r||(e.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!this.#c&&!s&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#k(){if(this.#o)return;this.#o=document.createElement("div"),this.#o.classList.add("resizers");let e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(let n of e){let r=document.createElement("div");this.#o.append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",this.#A.bind(this,n),{signal:t}),r.addEventListener("contextmenu",ja,{signal:t}),r.tabIndex=-1}this.div.prepend(this.#o)}#A(e,t){t.preventDefault();let{isMac:n}=qr.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#n?.toggle(!1);let r=this._isDraggable;this._isDraggable=!1,this.#d=[t.screenX,t.screenY];let s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",za,{passive:!1,signal:a}),window.addEventListener("contextmenu",ja,{signal:a}),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;let d=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=o,this.div.style.cursor=l,this.#L()};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})}#I(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t;let[s,a]=this.parentDimensions;this.setDims(s*n,a*r),this.fixAndSetPosition(),this._onResized()}_onResized(){}#L(){if(!this.#l)return;let{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=this.#l;this.#l=null;let s=this.x,a=this.y,o=this.width,l=this.height;s===e&&a===t&&o===n&&l===r||this.addCommands({cmd:this.#I.bind(this,s,a,o,l),undo:this.#I.bind(this,e,t,n,r),mustExec:!0})}#B(e,t){let[n,r]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,d=i.MIN_SIZE/n,p=i.MIN_SIZE/r,f=st=>Math.round(st*1e4)/1e4,g=this.#S(this.rotation),m=(st,Q)=>[g[0]*st+g[2]*Q,g[1]*st+g[3]*Q],x=this.#S(360-this.rotation),y=(st,Q)=>[x[0]*st+x[2]*Q,x[1]*st+x[3]*Q],S,b,M=!1,T=!1;switch(e){case"topLeft":M=!0,S=(st,Q)=>[0,0],b=(st,Q)=>[st,Q];break;case"topMiddle":S=(st,Q)=>[st/2,0],b=(st,Q)=>[st/2,Q];break;case"topRight":M=!0,S=(st,Q)=>[st,0],b=(st,Q)=>[0,Q];break;case"middleRight":T=!0,S=(st,Q)=>[st,Q/2],b=(st,Q)=>[0,Q/2];break;case"bottomRight":M=!0,S=(st,Q)=>[st,Q],b=(st,Q)=>[0,0];break;case"bottomMiddle":S=(st,Q)=>[st/2,Q],b=(st,Q)=>[st/2,0];break;case"bottomLeft":M=!0,S=(st,Q)=>[0,Q],b=(st,Q)=>[st,0];break;case"middleLeft":T=!0,S=(st,Q)=>[0,Q/2],b=(st,Q)=>[st,Q/2];break}let k=S(o,l),L=b(o,l),U=m(...L),N=f(s+U[0]),F=f(a+U[1]),O=1,B=1,P,V;if(t.fromKeyboard)({deltaX:P,deltaY:V}=t);else{let{screenX:st,screenY:Q}=t,[xt,Mt]=this.#d;[P,V]=this.screenToPageTranslation(st-xt,Q-Mt),this.#d[0]=st,this.#d[1]=Q}if([P,V]=y(P/n,V/r),M){let st=Math.hypot(o,l);O=B=Math.max(Math.min(Math.hypot(L[0]-k[0]-P,L[1]-k[1]-V)/st,1/o,1/l),d/o,p/l)}else T?O=Math.max(d,Math.min(1,Math.abs(L[0]-k[0]-P)))/o:B=Math.max(p,Math.min(1,Math.abs(L[1]-k[1]-V)))/l;let $=f(o*O),K=f(l*B);U=m(...b($,K));let ct=N-U[0],ot=F-U[1];this.#p||=[this.x,this.y,this.width,this.height],this.width=$,this.height=K,this.x=ct,this.y=ot,this.setDims(n*$,r*K),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}addEditToolbar(){return Be(this,null,function*(){return this._editToolbar||this.#g?this._editToolbar:(this._editToolbar=new zS(this),this.div.append(this._editToolbar.render()),this.#n&&(yield this._editToolbar.addAltText(this.#n)),this._editToolbar)})}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){let t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){return Be(this,null,function*(){this.#n||(bD.initialize(i._l10n),this.#n=new bD(this),this.#t&&(this.#n.data=this.#t,this.#t=null),yield this.addEditToolbar())})}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}setGuessedAltText(e){return Be(this,null,function*(){yield this.#n?.setGuessedText(e)})}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#i?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#R();let[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);let[n,r]=this.getInitialTranslation();return this.translate(n,r),K_(this,this.div,["pointerdown"]),this._uiManager._editorUndoBar?.hide(),this.div}pointerdown(e){let{isMac:t}=qr.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#h=!0,this._isDraggable){this.#x(e);return}this.#w(e)}get isSelected(){return this._uiManager.isSelected(this)}#w(e){let{isMac:t}=qr.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#x(e){let{isSelected:t}=this;this._uiManager.setUpDragSession();let n=new AbortController,r=this._uiManager.combinedSignal(n),s={capture:!0,passive:!1,signal:r},a=l=>{n.abort(),this.#s=null,this.#h=!1,this._uiManager.endDragSession()||this.#w(l)};t&&(this.#v=e.clientX,this.#b=e.clientY,this.#s=e.pointerId,this.#r=e.pointerType,window.addEventListener("pointermove",l=>{let{clientX:d,clientY:p,pointerId:f}=l;if(f!==this.#s){za(l);return}let[g,m]=this.screenToPageTranslation(d-this.#v,p-this.#b);this.#v=d,this.#b=p,this._uiManager.dragSelectedEditors(g,m)},s),window.addEventListener("touchmove",za,s),window.addEventListener("pointerdown",l=>{l.isPrimary&&l.pointerType===this.#r&&a(l),za(l)},s)),this._onStartDragging();let o=l=>{if(!this.#s||this.#s===l.pointerId){a(l),this._onStopDragging();return}za(l)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.#_=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){let r=this.parentScale,[s,a]=this.pageDimensions,[o,l]=this.pageTranslation,d=e/r,p=t/r,f=this.x*s,g=this.y*a,m=this.width*s,x=this.height*a;switch(n){case 0:return[f+d+o,a-g-p-x+l,f+d+m+o,a-g-p+l];case 90:return[f+p+o,a-g+d+l,f+p+x+o,a-g+d+m+l];case 180:return[f-d-m+o,a-g+p+l,f-d+o,a-g+p+x+l];case 270:return[f-p-x+o,a-g-d-m+l,f-p+o,a-g-d+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){let[n,r,s,a]=e,o=s-n,l=a-r;switch(this.rotation){case 0:return[n,t-a,o,l];case 90:return[n,t-r,l,o];case 180:return[s,t-r,o,l];case 270:return[s,t-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#g=!0}disableEditMode(){this.#g=!1}isInEditMode(){return this.#g}shouldGetKeyboardEvents(){return this.#m}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return t<a&&r>0&&e<s&&n>0}#R(){if(this.#u||!this.div)return;this.#u=new AbortController;let e=this._uiManager.combinedSignal(this.#u);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#R()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){wi("An editor must be serializable")}static deserialize(e,t,n){return Be(this,null,function*(){let r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation,r.#t=e.accessibilityData;let[s,a]=r.pageDimensions,[o,l,d,p]=r.getRectInCurrentCoords(e.rect,a);return r.x=o/s,r.y=l/a,r.width=d/s,r.height=p/a,r})}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#u?.abort(),this.#u=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#_&&(clearTimeout(this.#_),this.#_=null),this.#P(),this.removeEditToolbar(),this.#y){for(let e of this.#y.values())clearTimeout(e);this.#y=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#k(),this.#o.classList.remove("hidden"),K_(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let t=this.#o.children;if(!this.#e){this.#e=Array.from(t);let a=this.#V.bind(this),o=this.#z.bind(this),l=this._uiManager._signal;for(let d of this.#e){let p=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",a,{signal:l}),d.addEventListener("blur",o,{signal:l}),d.addEventListener("focus",this.#j.bind(this,p),{signal:l}),d.setAttribute("data-l10n-id",i._l10nResizer[p])}}let n=this.#e[0],r=0;for(let a of t){if(a===n)break;r++}let s=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(s!==r){if(s<r)for(let o=0;o<r-s;o++)this.#o.append(this.#o.firstChild);else if(s>r)for(let o=0;o<s-r;o++)this.#o.firstChild.before(this.#o.lastChild);let a=0;for(let o of t){let d=this.#e[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",i._l10nResizer[d])}}this.#N(0),this.#m=!0,this.#o.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#V(e){i._resizerKeyboardManager.exec(this,e)}#z(e){this.#m&&e.relatedTarget?.parentNode!==this.#o&&this.#P()}#j(e){this.#a=this.#m?e:""}#N(e){if(this.#e)for(let t of this.#e)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#m&&this.#B(this.#a,{deltaX:e,deltaY:t,fromKeyboard:!0})}#P(){this.#m=!1,this.#N(-1),this.#L()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}unselect(){this.#o?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(e){this.#f=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#c=!0;let n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#y||=new Map;let{action:n}=e,r=this.#y.get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),this.#y.delete(n),this.#y.size===0&&(this.#y=null)},i._telemetryTimeout),this.#y.set(n,r);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){let n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){let{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}},XS=class extends qi{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},yD=3285377520,ba=4294901760,_o=65535,Z_=class{constructor(e){this.h1=e?e&4294967295:yD,this.h2=e?e&4294967295:yD}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let y=0,S=e.length;y<S;y++){let b=e.charCodeAt(y);b<=255?t[n++]=b:(t[n++]=b>>>8,t[n++]=b&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let r=n>>2,s=n-r*4,a=new Uint32Array(t.buffer,0,r),o=0,l=0,d=this.h1,p=this.h2,f=3432918353,g=461845907,m=f&_o,x=g&_o;for(let y=0;y<r;y++)y&1?(o=a[y],o=o*f&ba|o*m&_o,o=o<<15|o>>>17,o=o*g&ba|o*x&_o,d^=o,d=d<<13|d>>>19,d=d*5+3864292196):(l=a[y],l=l*f&ba|l*m&_o,l=l<<15|l>>>17,l=l*g&ba|l*x&_o,p^=l,p=p<<13|p>>>19,p=p*5+3864292196);switch(o=0,s){case 3:o^=t[r*4+2]<<16;case 2:o^=t[r*4+1]<<8;case 1:o^=t[r*4],o=o*f&ba|o*m&_o,o=o<<15|o>>>17,o=o*g&ba|o*x&_o,r&1?d^=o:p^=o}this.h1=d,this.h2=p}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ba|e*36045&_o,t=t*4283543511&ba|((t<<16|e>>>16)*2950163797&ba)>>>16,e^=t>>>1,e=e*444984403&ba|e*60499&_o,t=t*3301882366&ba|((t<<16|e>>>16)*3120437893&ba)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}},YS=Object.freeze({map:null,hash:"",transfer:void 0}),cm=class{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){let n=this.#n.get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let t of this.#n.values())if(t instanceof qi)return;this.onAnnotationEditor(null)}}setValue(e,t){let n=this.#n.get(e),r=!1;if(n!==void 0)for(let[s,a]of Object.entries(t))n[s]!==a&&(r=!0,n[s]=a);else r=!0,this.#n.set(e,t);r&&this.#i(),t instanceof qi&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?rC(this.#n):null}setAll(e){for(let[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return this.#n.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new J_(this)}get serializable(){if(this.#n.size===0)return YS;let e=new Map,t=new Z_,n=[],r=Object.create(null),s=!1;for(let[a,o]of this.#n){let l=o instanceof qi?o.serialize(!1,r):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),s||=!!l.bitmap)}if(s)for(let a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:YS}get editorStats(){let e=null,t=new Map;for(let n of this.#n.values()){if(!(n instanceof qi))continue;let r=n.telemetryFinalData;if(!r)continue;let{type:s}=r;t.has(s)||t.set(s,Object.getPrototypeOf(n).constructor),e||=Object.create(null);let a=e[s]||=new Map;for(let[o,l]of Object.entries(r)){if(o==="type")continue;let d=a.get(o);d||(d=new Map,a.set(o,d));let p=d.get(l)??0;d.set(l,p+1)}}for(let[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;let e=[];for(let t of this.#n.values())!(t instanceof qi)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#e={ids:new Set(e),hash:e.join(",")}}},J_=class extends cm{#t;constructor(e){super();let{map:t,hash:n,transfer:r}=e.serializable,s=structuredClone(t,r?{transfer:r}:null);this.#t={map:s,hash:n,transfer:r}}get print(){wi("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Un(this,"modifiedIds",{ids:new Set,hash:""})}},$S=class{#t=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(let e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(n){return Be(this,arguments,function*({systemFontInfo:e,_inspectFont:t}){if(!(!e||this.#t.has(e.loadedName))){if(Sr(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:r,src:s,style:a}=e,o=new FontFace(r,s,a);this.addNativeFontFace(o);try{yield o.load(),this.#t.add(r),t?.(e)}catch{Ln(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}wi("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(e){return Be(this,null,function*(){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){yield this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){let n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{yield n.loaded}catch(r){throw Ln(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}let t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;yield new Promise(n=>{let r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}})}get isFontLoadingAPISupported(){let e=!!this._document?.fonts;return Un(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(xs||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Un(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Sr(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){let s=n.shift();setTimeout(s.callback,0)}}let{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){let e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Un(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(k,L){return k.charCodeAt(L)<<24|k.charCodeAt(L+1)<<16|k.charCodeAt(L+2)<<8|k.charCodeAt(L+3)&255}function r(k,L,U,N){let F=k.substring(0,L),O=k.substring(L+U);return F+N+O}let s,a,o=this._document.createElement("canvas");o.width=1,o.height=1;let l=o.getContext("2d"),d=0;function p(k,L){if(++d>30){Ln("Load test font never loaded."),L();return}if(l.font="30px "+k,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(p.bind(null,k,L))}let f=`lt${Date.now()}${this.loadTestFontId++}`,g=this._loadTestFont;g=r(g,976,f.length,f);let x=16,y=1482184792,S=n(g,x);for(s=0,a=f.length-3;s<a;s+=4)S=S-y+n(f,s)|0;s<f.length&&(S=S-y+n(f+"XXX",s)|0),g=r(g,x,4,q9(S));let b=`url(data:font/opentype;base64,${btoa(g)});`,M=`@font-face {font-family:"${f}";src:${b}}`;this.insertRule(M);let T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(let k of[e.loadedName,f]){let L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=k,T.append(L)}this._document.body.append(T),p(f,()=>{T.remove(),t.complete()})}},KS=class{constructor(e,{disableFontFace:t=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(let r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=n}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{let t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let e=`url(data:${this.mimetype};base64,${J9(this.data)});`,t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(s){Ln(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[t]=function(s,a){};let r=[];for(let s=0,a=n.length;s<a;)switch(n[s++]){case tl.BEZIER_CURVE_TO:{let[o,l,d,p,f,g]=n.slice(s,s+6);r.push(m=>m.bezierCurveTo(o,l,d,p,f,g)),s+=6}break;case tl.MOVE_TO:{let[o,l]=n.slice(s,s+2);r.push(d=>d.moveTo(o,l)),s+=2}break;case tl.LINE_TO:{let[o,l]=n.slice(s,s+2);r.push(d=>d.lineTo(o,l)),s+=2}break;case tl.QUADRATIC_CURVE_TO:{let[o,l,d,p]=n.slice(s,s+4);r.push(f=>f.quadraticCurveTo(o,l,d,p)),s+=4}break;case tl.RESTORE:r.push(o=>o.restore());break;case tl.SAVE:r.push(o=>o.save());break;case tl.SCALE:Sr(r.length===2,"Scale command is only valid at the third position.");break;case tl.TRANSFORM:{let[o,l,d,p,f,g]=n.slice(s,s+6);r.push(m=>m.transform(o,l,d,p,f,g)),s+=6}break;case tl.TRANSLATE:{let[o,l]=n.slice(s,s+2);r.push(d=>d.translate(o,l)),s+=2}break}return r.push(s=>s.closePath()),this.compiledGlyphs[t]=function(a,o){r[0](a),r[1](a),a.scale(o,-o);for(let l=2,d=r.length;l<d;l++)r[l](a)}}},Q_=class{#t=!1;constructor({enableHWA:e=!1}){this.#t=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");let n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){wi("Abstract method `_createCanvas` called.")}},ZS=class extends Q_{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){let n=this._document.createElement("canvas");return n.width=e,n.height=t,n}},t1=class{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}fetch(t){return Be(this,arguments,function*({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");let n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})})}_fetch(e){return Be(this,null,function*(){wi("Abstract method `_fetch` called.")})}},e1=class extends t1{_fetch(e){return Be(this,null,function*(){let t=yield A1(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):E1(t)})}},n1=class{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,s){return"none"}destroy(e=!1){}},JS=class extends n1{#t;#e;#n;#i;#s;#r;#c=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#i=e,this.#s=t}get#o(){return this.#e||=new Map}get#d(){return this.#r||=new Map}get#l(){if(!this.#n){let e=this.#s.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;let n=this.#s.createElementNS(el,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#n=this.#s.createElementNS(el,"defs"),e.append(n),n.append(this.#n),this.#s.body.append(e)}return this.#n}#u(e){if(e.length===1){let l=e[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=l[f]/255;let p=d.join(",");return[p,p,p]}let[t,n,r]=e,s=new Array(256),a=new Array(256),o=new Array(256);for(let l=0;l<256;l++)s[l]=t[l]/255,a[l]=n[l]/255,o[l]=r[l]/255;return[s.join(","),a.join(","),o.join(",")]}#a(e){if(this.#t===void 0){this.#t="";let t=this.#s.URL;t!==this.#s.baseURI&&(T1(t)?Ln('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=t.split("#",1)[0])}return`url(${this.#t}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;let[n,r,s]=this.#u(e),a=e.length===1?n:`${n}${r}${s}`;if(t=this.#o.get(a),t)return this.#o.set(e,t),t;let o=`g_${this.#i}_transfer_map_${this.#c++}`,l=this.#a(o);this.#o.set(e,l),this.#o.set(a,l);let d=this.#f(o);return this.#m(n,r,s,d),l}addHCMFilter(e,t){let n=`${e}-${t}`,r="base",s=this.#d.get(r);if(s?.key===n||(s?(s.filter?.remove(),s.key=n,s.url="none",s.filter=null):(s={key:n,url:"none",filter:null},this.#d.set(r,s)),!e||!t))return s.url;let a=this.#v(e);e=qe.makeHexColor(...a);let o=this.#v(t);if(t=qe.makeHexColor(...o),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return s.url;let l=new Array(256);for(let m=0;m<=255;m++){let x=m/255;l[m]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}let d=l.join(","),p=`g_${this.#i}_hcm_filter`,f=s.filter=this.#f(p);this.#m(d,d,d,f),this.#p(f);let g=(m,x)=>{let y=a[m]/255,S=o[m]/255,b=new Array(x+1);for(let M=0;M<=x;M++)b[M]=y+M/x*(S-y);return b.join(",")};return this.#m(g(0,5),g(1,5),g(2,5),f),s.url=this.#a(p),s.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;let[n]=this.#u([e]),r=`alpha_${n}`;if(t=this.#o.get(r),t)return this.#o.set(e,t),t;let s=`g_${this.#i}_alpha_map_${this.#c++}`,a=this.#a(s);this.#o.set(e,a),this.#o.set(r,a);let o=this.#f(s);return this.#_(n,o),a}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let n,r;if(e?([n]=this.#u([e]),r=`luminosity_${n}`):r="luminosity",t=this.#o.get(r),t)return this.#o.set(e,t),t;let s=`g_${this.#i}_luminosity_map_${this.#c++}`,a=this.#a(s);this.#o.set(e,a),this.#o.set(r,a);let o=this.#f(s);return this.#h(o),e&&this.#_(n,o),a}addHighlightHCMFilter(e,t,n,r,s){let a=`${t}-${n}-${r}-${s}`,o=this.#d.get(e);if(o?.key===a||(o?(o.filter?.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},this.#d.set(e,o)),!t||!n))return o.url;let[l,d]=[t,n].map(this.#v.bind(this)),p=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[g,m]=[r,s].map(this.#v.bind(this));f<p&&([p,f,g,m]=[f,p,m,g]),this.#l.style.color="";let x=(b,M,T)=>{let k=new Array(256),L=(f-p)/T,U=b/255,N=(M-b)/(255*T),F=0;for(let O=0;O<=T;O++){let B=Math.round(p+O*L),P=U+O*N;for(let V=F;V<=B;V++)k[V]=P;F=B+1}for(let O=F;O<256;O++)k[O]=k[F-1];return k.join(",")},y=`g_${this.#i}_hcm_${e}_filter`,S=o.filter=this.#f(y);return this.#p(S),this.#m(x(g[0],m[0],5),x(g[1],m[1],5),x(g[2],m[2],5),S),o.url=this.#a(y),o.url}destroy(e=!1){e&&this.#r?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#c=0)}#h(e){let t=this.#s.createElementNS(el,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#p(e){let t=this.#s.createElementNS(el,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#f(e){let t=this.#s.createElementNS(el,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#g(e,t,n){let r=this.#s.createElementNS(el,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)}#m(e,t,n,r){let s=this.#s.createElementNS(el,"feComponentTransfer");r.append(s),this.#g(s,"feFuncR",e),this.#g(s,"feFuncG",t),this.#g(s,"feFuncB",n)}#_(e,t){let n=this.#s.createElementNS(el,"feComponentTransfer");t.append(n),this.#g(n,"feFuncA",e)}#v(e){return this.#l.style.color=e,oC(getComputedStyle(this.#l).getPropertyValue("color"))}},i1=class{constructor({baseUrl:e=null}){this.baseUrl=e}fetch(t){return Be(this,arguments,function*({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");let n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load font data at: ${n}`)})})}_fetch(e){return Be(this,null,function*(){wi("Abstract method `_fetch` called.")})}},r1=class extends i1{_fetch(e){return Be(this,null,function*(){let t=yield A1(e,"arraybuffer");return new Uint8Array(t)})}};function ND(i){return Be(this,null,function*(){let t=yield process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(t)})}var QS=class extends n1{},tw=class extends Q_{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}},ew=class extends t1{_fetch(e){return Be(this,null,function*(){return ND(e)})}},nw=class extends i1{_fetch(e){return Be(this,null,function*(){return ND(e)})}},ns={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function iw(i,e){if(!e)return;let t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),i.clip(r)}var dm=class{getPattern(){wi("Abstract method `getPattern` called.")}},rw=class extends dm{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let s;if(r===ns.STROKE||r===ns.FILL){let a=t.current.getClippedPathBoundingBox(r,Vi(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,d=t.cachedCanvases.getCanvas("pattern",o,l),p=d.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-a[0],-a[1]),n=qe.transform(n,[1,0,0,1,a[0],a[1]]),p.transform(...t.baseTransform),this.matrix&&p.transform(...this.matrix),iw(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),s=e.createPattern(d.canvas,"no-repeat");let f=new DOMMatrix(n);s.setTransform(f)}else iw(e,this._bbox),s=this._createGradient(e);return s}};function NS(i,e,t,n,r,s,a,o){let l=e.coords,d=e.colors,p=i.data,f=i.width*4,g;l[t+1]>l[n+1]&&(g=t,t=n,n=g,g=s,s=a,a=g),l[n+1]>l[r+1]&&(g=n,n=r,r=g,g=a,a=o,o=g),l[t+1]>l[n+1]&&(g=t,t=n,n=g,g=s,s=a,a=g);let m=(l[t]+e.offsetX)*e.scaleX,x=(l[t+1]+e.offsetY)*e.scaleY,y=(l[n]+e.offsetX)*e.scaleX,S=(l[n+1]+e.offsetY)*e.scaleY,b=(l[r]+e.offsetX)*e.scaleX,M=(l[r+1]+e.offsetY)*e.scaleY;if(x>=M)return;let T=d[s],k=d[s+1],L=d[s+2],U=d[a],N=d[a+1],F=d[a+2],O=d[o],B=d[o+1],P=d[o+2],V=Math.round(x),$=Math.round(M),K,ct,ot,st,Q,xt,Mt,qt;for(let z=V;z<=$;z++){if(z<S){let ft=z<x?0:(x-z)/(x-S);K=m-(m-y)*ft,ct=T-(T-U)*ft,ot=k-(k-N)*ft,st=L-(L-F)*ft}else{let ft;z>M?ft=1:S===M?ft=0:ft=(S-z)/(S-M),K=y-(y-b)*ft,ct=U-(U-O)*ft,ot=N-(N-B)*ft,st=F-(F-P)*ft}let it;z<x?it=0:z>M?it=1:it=(x-z)/(x-M),Q=m-(m-b)*it,xt=T-(T-O)*it,Mt=k-(k-B)*it,qt=L-(L-P)*it;let Z=Math.round(Math.min(K,Q)),at=Math.round(Math.max(K,Q)),pt=f*z+Z*4;for(let ft=Z;ft<=at;ft++)it=(K-ft)/(K-Q),it<0?it=0:it>1&&(it=1),p[pt++]=ct-(ct-xt)*it|0,p[pt++]=ot-(ot-Mt)*it|0,p[pt++]=st-(st-qt)*it|0,p[pt++]=255}}function ij(i,e,t){let n=e.coords,r=e.colors,s,a;switch(e.type){case"lattice":let o=e.verticesPerRow,l=Math.floor(n.length/o)-1,d=o-1;for(s=0;s<l;s++){let p=s*o;for(let f=0;f<d;f++,p++)NS(i,t,n[p],n[p+1],n[p+o],r[p],r[p+1],r[p+o]),NS(i,t,n[p+o+1],n[p+1],n[p+o],r[p+o+1],r[p+1],r[p+o])}break;case"triangles":for(s=0,a=n.length;s<a;s+=3)NS(i,t,n[s],n[s+1],n[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}var sw=class extends dm{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){let o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-o,p=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(p*e[1]*1.1)),3e3),m=d/f,x=p/g,y={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/m,scaleY:1/x},S=f+2*2,b=g+2*2,M=n.getCanvas("mesh",S,b),T=M.context,k=T.createImageData(f,g);if(t){let U=k.data;for(let N=0,F=U.length;N<F;N+=4)U[N]=t[0],U[N+1]=t[1],U[N+2]=t[2],U[N+3]=255}for(let U of this._figures)ij(k,U,y);return T.putImageData(k,2,2),{canvas:M.canvas,offsetX:o-2*m,offsetY:l-2*x,scaleX:m,scaleY:x}}getPattern(e,t,n,r){iw(e,this._bbox);let s;if(r===ns.SHADING)s=qe.singularValueDecompose2dScale(Vi(e));else if(s=qe.singularValueDecompose2dScale(t.baseTransform),this.matrix){let o=qe.singularValueDecompose2dScale(this.matrix);s=[s[0]*o[0],s[1]*o[1]]}let a=this._createMeshCanvas(s,r===ns.SHADING?null:this._background,t.cachedCanvases);return r!==ns.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}},aw=class extends dm{getPattern(){return"hotpink"}};function rj(i){switch(i[0]){case"RadialAxial":return new rw(i);case"Mesh":return new sw(i);case"Dummy":return new aw}throw new Error(`Unknown IR type: ${i[0]}`)}var SD={COLORED:1,UNCOLORED:2},sj=(()=>{class i{static MAX_PATTERN_SIZE=3e3;constructor(t,n,r,s,a){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=n,this.ctx=r,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t){let{bbox:n,operatorList:r,paintType:s,tilingType:a,color:o,canvasGraphicsFactory:l}=this,{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),M1("TilingType: "+a);let f=n[0],g=n[1],m=n[2],x=n[3],y=m-f,S=x-g,b=qe.singularValueDecompose2dScale(this.matrix),M=qe.singularValueDecompose2dScale(this.baseTransform),T=b[0]*M[0],k=b[1]*M[1],L=y,U=S,N=!1,F=!1,O=Math.ceil(d*T),B=Math.ceil(p*k),P=Math.ceil(y*T),V=Math.ceil(S*k);O>=P?L=d:N=!0,B>=V?U=p:F=!0;let $=this.getSizeAndScale(L,this.ctx.canvas.width,T),K=this.getSizeAndScale(U,this.ctx.canvas.height,k),ct=t.cachedCanvases.getCanvas("pattern",$.size,K.size),ot=ct.context,st=l.createCanvasGraphics(ot);if(st.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(st,s,o),ot.translate(-$.scale*f,-K.scale*g),st.transform($.scale,0,0,K.scale,0,0),ot.save(),this.clipBbox(st,f,g,m,x),st.baseTransform=Vi(st.ctx),st.executeOperatorList(r),st.endDrawing(),ot.restore(),N||F){let Q=ct.canvas;N&&(L=d),F&&(U=p);let xt=this.getSizeAndScale(L,this.ctx.canvas.width,T),Mt=this.getSizeAndScale(U,this.ctx.canvas.height,k),qt=xt.size,z=Mt.size,it=t.cachedCanvases.getCanvas("pattern-workaround",qt,z),Z=it.context,at=N?Math.floor(y/d):0,pt=F?Math.floor(S/p):0;for(let ft=0;ft<=at;ft++)for(let St=0;St<=pt;St++)Z.drawImage(Q,qt*ft,z*St,qt,z,0,0,qt,z);return{canvas:it.canvas,scaleX:xt.scale,scaleY:Mt.scale,offsetX:f,offsetY:g}}return{canvas:ct.canvas,scaleX:$.scale,scaleY:K.scale,offsetX:f,offsetY:g}}getSizeAndScale(t,n,r){let s=Math.max(i.MAX_PATTERN_SIZE,n),a=Math.ceil(t*r);return a>=s?a=s:r=a/t,{scale:r,size:a}}clipBbox(t,n,r,s,a){let o=s-n,l=a-r;t.ctx.rect(n,r,o,l),t.current.updateRectMinMax(Vi(t.ctx),[n,r,s,a]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,n,r){let s=t.ctx,a=t.current;switch(n){case SD.COLORED:let o=this.ctx;s.fillStyle=o.fillStyle,s.strokeStyle=o.strokeStyle,a.fillColor=o.fillStyle,a.strokeColor=o.strokeStyle;break;case SD.UNCOLORED:let l=qe.makeHexColor(r[0],r[1],r[2]);s.fillStyle=l,s.strokeStyle=l,a.fillColor=l,a.strokeColor=l;break;default:throw new US(`Unsupported paint type: ${n}`)}}getPattern(t,n,r,s){let a=r;s!==ns.SHADING&&(a=qe.transform(a,n.baseTransform),this.matrix&&(a=qe.transform(a,this.matrix)));let o=this.createPatternCanvas(n),l=new DOMMatrix(a);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);let d=t.createPattern(o.canvas,"repeat");return d.setTransform(l),d}}return i})();function aj({src:i,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:s=4294967295,inverseDecode:a=!1}){let o=qr.isLittleEndian?4278190080:255,[l,d]=a?[s,o]:[o,s],p=n>>3,f=n&7,g=i.length;t=new Uint32Array(t.buffer);let m=0;for(let x=0;x<r;x++){for(let S=e+p;e<S;e++){let b=e<g?i[e]:255;t[m++]=b&128?d:l,t[m++]=b&64?d:l,t[m++]=b&32?d:l,t[m++]=b&16?d:l,t[m++]=b&8?d:l,t[m++]=b&4?d:l,t[m++]=b&2?d:l,t[m++]=b&1?d:l}if(f===0)continue;let y=e<g?i[e++]:255;for(let S=0;S<f;S++)t[m++]=y&1<<7-S?d:l}return{srcPos:e,destPos:m}}var wD=16,CD=100,oj=15,MD=10,ED=1e3,Ls=16;function lj(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},i.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},i.transform=function(n,r,s,a,o,l){e.transform(n,r,s,a,o,l),this.__originalTransform(n,r,s,a,o,l)},i.setTransform=function(n,r,s,a,o,l){e.setTransform(n,r,s,a,o,l),this.__originalSetTransform(n,r,s,a,o,l)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){e.rotate(n),this.__originalRotate(n)},i.clip=function(n){e.clip(n),this.__originalClip(n)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,r,s,a,o){e.bezierCurveTo(t,n,r,s,a,o),this.__originalBezierCurveTo(t,n,r,s,a,o)},i.rect=function(t,n,r,s){e.rect(t,n,r,s),this.__originalRect(t,n,r,s)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}var ow=class{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(let e in this.cache){let t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}};function B_(i,e,t,n,r,s,a,o,l,d){let[p,f,g,m,x,y]=Vi(i);if(f===0&&g===0){let M=a*p+x,T=Math.round(M),k=o*m+y,L=Math.round(k),U=(a+l)*p+x,N=Math.abs(Math.round(U)-T)||1,F=(o+d)*m+y,O=Math.abs(Math.round(F)-L)||1;return i.setTransform(Math.sign(p),0,0,Math.sign(m),T,L),i.drawImage(e,t,n,r,s,0,0,N,O),i.setTransform(p,f,g,m,x,y),[N,O]}if(p===0&&m===0){let M=o*g+x,T=Math.round(M),k=a*f+y,L=Math.round(k),U=(o+d)*g+x,N=Math.abs(Math.round(U)-T)||1,F=(a+l)*f+y,O=Math.abs(Math.round(F)-L)||1;return i.setTransform(0,Math.sign(f),Math.sign(g),0,T,L),i.drawImage(e,t,n,r,s,0,0,O,N),i.setTransform(p,f,g,m,x,y),[O,N]}i.drawImage(e,t,n,r,s,a,o,l,d);let S=Math.hypot(p,f),b=Math.hypot(g,m);return[S*l,b*d]}function cj(i){let{width:e,height:t}=i;if(e>ED||t>ED)return null;let n=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1,a=new Uint8Array(s*(t+1)),o,l,d,p=e+7&-8,f=new Uint8Array(p*t),g=0;for(let b of i.data){let M=128;for(;M>0;)f[g++]=b&M?0:255,M>>=1}let m=0;for(g=0,f[g]!==0&&(a[0]=1,++m),l=1;l<e;l++)f[g]!==f[g+1]&&(a[l]=f[g]?2:1,++m),g++;for(f[g]!==0&&(a[l]=2,++m),o=1;o<t;o++){g=o*p,d=o*s,f[g-p]!==f[g]&&(a[d]=f[g]?1:8,++m);let b=(f[g]?4:0)+(f[g-p]?8:0);for(l=1;l<e;l++)b=(b>>2)+(f[g+1]?4:0)+(f[g-p+1]?8:0),r[b]&&(a[d+l]=r[b],++m),g++;if(f[g-p]!==f[g]&&(a[d+l]=f[g]?2:4,++m),m>n)return null}for(g=p*(t-1),d=o*s,f[g]!==0&&(a[d]=8,++m),l=1;l<e;l++)f[g]!==f[g+1]&&(a[d+l]=f[g]?4:8,++m),g++;if(f[g]!==0&&(a[d+l]=4,++m),m>n)return null;let x=new Int32Array([0,s,-1,0,-s,0,0,0,1]),y=new Path2D;for(o=0;m&&o<=t;o++){let b=o*s,M=b+e;for(;b<M&&!a[b];)b++;if(b===M)continue;y.moveTo(b%s,o);let T=b,k=a[b];do{let L=x[k];do b+=L;while(!a[b]);let U=a[b];U!==5&&U!==10?(k=U,a[b]=0):(k=U&51*k>>4,a[b]&=k>>2|k<<2),y.lineTo(b%s,b/s|0),a[b]||--m}while(T!==b);--o}return f=null,a=null,function(b){b.save(),b.scale(1/e,-1/t),b.translate(0,-t),b.fill(y),b.beginPath(),b.restore()}}var s1=class{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=LD,this.textMatrixScale=1,this.fontMatrix=VS,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=es.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){let e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=qe.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){let n=qe.applyTransform(t,e),r=qe.applyTransform(t.slice(2),e),s=qe.applyTransform([t[0],t[3]],e),a=qe.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],r[0],s[0],a[0]),this.minY=Math.min(this.minY,n[1],r[1],s[1],a[1]),this.maxX=Math.max(this.maxX,n[0],r[0],s[0],a[0]),this.maxY=Math.max(this.maxY,n[1],r[1],s[1],a[1])}updateScalingPathMinMax(e,t){qe.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,r,s,a,o,l,d,p){let f=qe.bezierBoundingBox(t,n,r,s,a,o,l,d,p);p||this.updateRectMinMax(e,f)}getPathBoundingBox(e=ns.FILL,t=null){let n=[this.minX,this.minY,this.maxX,this.maxY];if(e===ns.STROKE){t||wi("Stroke bounding box must include transform.");let r=qe.singularValueDecompose2dScale(t),s=r[0]*this.lineWidth/2,a=r[1]*this.lineWidth/2;n[0]-=s,n[1]-=a,n[2]+=s,n[3]+=a}return n}updateClipFromPath(){let e=qe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=ns.FILL,t=null){return qe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}};function AD(i,e){if(e instanceof ImageData){i.putImageData(e,0,0);return}let t=e.height,n=e.width,r=t%Ls,s=(t-r)/Ls,a=r===0?s:s+1,o=i.createImageData(n,Ls),l=0,d,p=e.data,f=o.data,g,m,x,y;if(e.kind===W_.GRAYSCALE_1BPP){let S=p.byteLength,b=new Uint32Array(f.buffer,0,f.byteLength>>2),M=b.length,T=n+7>>3,k=4294967295,L=qr.isLittleEndian?4278190080:255;for(g=0;g<a;g++){for(x=g<s?Ls:r,d=0,m=0;m<x;m++){let U=S-l,N=0,F=U>T?n:U*8-7,O=F&-8,B=0,P=0;for(;N<O;N+=8)P=p[l++],b[d++]=P&128?k:L,b[d++]=P&64?k:L,b[d++]=P&32?k:L,b[d++]=P&16?k:L,b[d++]=P&8?k:L,b[d++]=P&4?k:L,b[d++]=P&2?k:L,b[d++]=P&1?k:L;for(;N<F;N++)B===0&&(P=p[l++],B=128),b[d++]=P&B?k:L,B>>=1}for(;d<M;)b[d++]=0;i.putImageData(o,0,g*Ls)}}else if(e.kind===W_.RGBA_32BPP){for(m=0,y=n*Ls*4,g=0;g<s;g++)f.set(p.subarray(l,l+y)),l+=y,i.putImageData(o,0,m),m+=Ls;g<a&&(y=n*r*4,f.set(p.subarray(l,l+y)),i.putImageData(o,0,m))}else if(e.kind===W_.RGB_24BPP)for(x=Ls,y=n*x,g=0;g<a;g++){for(g>=s&&(x=r,y=n*x),d=0,m=y;m--;)f[d++]=p[l++],f[d++]=p[l++],f[d++]=p[l++],f[d++]=255;i.putImageData(o,0,g*Ls)}else throw new Error(`bad image kind: ${e.kind}`)}function TD(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}let t=e.height,n=e.width,r=t%Ls,s=(t-r)/Ls,a=r===0?s:s+1,o=i.createImageData(n,Ls),l=0,d=e.data,p=o.data;for(let f=0;f<a;f++){let g=f<s?Ls:r;({srcPos:l}=aj({src:d,srcPos:l,dest:p,width:n,height:g,nonBlackColor:0})),i.putImageData(o,0,f*Ls)}}function Qf(i,e){let t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function V_(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!xs){let{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}}function kD(i,e){if(e)return!0;let t=qe.singularValueDecompose2dScale(i);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);let n=Math.fround((globalThis.devicePixelRatio||1)*mc.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}var dj=["butt","round","square"],uj=["miter","round","bevel"],hj={},ID={},fh=class i{constructor(e,t,n,r,s,{optionalContentConfig:a,markedContentStack:o=null},l,d){this.ctx=e,this.current=new s1(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new ow(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){let s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,n){let l=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Vi(this.compositeCtx))}this.ctx.save(),V_(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Vi(this.ctx)}executeOperatorList(e,t,n,r){let s=e.argsArray,a=e.fnArray,o=t||0,l=s.length;if(l===o)return o;let d=l-o>MD&&typeof n=="function",p=d?Date.now()+oj:0,f=0,g=this.commonObjs,m=this.objs,x;for(;;){if(r!==void 0&&o===r.nextBreakPoint)return r.breakIt(o,n),o;if(x=a[o],x!==Ua.dependency)this[x].apply(this,s[o]);else for(let y of s[o]){let S=y.startsWith("g_")?g:m;if(!S.has(y))return S.get(y,n),o}if(o++,o===l)return o;if(d&&++f>MD){if(Date.now()>p)return n(),o;f=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let e of this._cachedBitmapsMap.values()){for(let t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){let e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){let t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){let n=e.width??e.displayWidth,r=e.height??e.displayHeight,s=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=n,l=r,d="prescale1",p,f;for(;s>2&&o>1||a>2&&l>1;){let g=o,m=l;s>2&&o>1&&(g=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/g),a>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/m),p=this.cachedCanvases.getCanvas(d,g,m),f=p.context,f.clearRect(0,0,g,m),f.drawImage(e,0,0,o,l,0,0,g,m),e=p.canvas,o=g,l=m,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){let t=this.ctx,{width:n,height:r}=e,s=this.current.fillColor,a=this.current.patternFill,o=Vi(t),l,d,p,f;if((e.bitmap||e.data)&&e.count>1){let F=e.bitmap||e.data.buffer;d=JSON.stringify(a?o:[o.slice(0,4),s]),l=this._cachedBitmapsMap.get(F),l||(l=new Map,this._cachedBitmapsMap.set(F,l));let O=l.get(d);if(O&&!a){let B=Math.round(Math.min(o[0],o[2])+o[4]),P=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:O,offsetX:B,offsetY:P}}p=O}p||(f=this.cachedCanvases.getCanvas("maskCanvas",n,r),TD(f.context,e));let g=qe.transform(o,[1/n,0,0,-1/r,0,0]);g=qe.transform(g,[1,0,0,1,0,-r]);let[m,x,y,S]=qe.getAxialAlignedBoundingBox([0,0,n,r],g),b=Math.round(y-m)||1,M=Math.round(S-x)||1,T=this.cachedCanvases.getCanvas("fillCanvas",b,M),k=T.context,L=m,U=x;k.translate(-L,-U),k.transform(...g),p||(p=this._scaleImage(f.canvas,go(k)),p=p.img,l&&a&&l.set(d,p)),k.imageSmoothingEnabled=kD(Vi(k),e.interpolate),B_(k,p,0,0,p.width,p.height,0,0,n,r),k.globalCompositeOperation="source-in";let N=qe.transform(go(k),[1,0,0,1,-L,-U]);return k.fillStyle=a?s.getPattern(t,this,N,ns.FILL):s,k.fillRect(0,0,n,r),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(d,T.canvas)),{canvas:T.canvas,offsetX:Math.round(L),offsetY:Math.round(U)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=dj[e]}setLineJoin(e){this.ctx.lineJoin=uj[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){let n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(let[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;let s=this.ctx;s.setTransform(...Vi(this.suspendedCtx)),Qf(this.suspendedCtx,s),lj(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Qf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){let s=r[0],a=r[1],o=r[2]-s,l=r[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,n,o,l,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,s,a,o,l,d,p,f){let g=e.canvas,m=l-p,x=d-f;if(a){let S=qe.makeHexColor(...a);if(m<0||x<0||m+n>g.width||x+r>g.height){let b=this.cachedCanvases.getCanvas("maskExtension",n,r),M=b.context;M.drawImage(g,-m,-x),M.globalCompositeOperation="destination-atop",M.fillStyle=S,M.fillRect(0,0,n,r),M.globalCompositeOperation="source-over",g=b.canvas,m=x=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);let b=new Path2D;b.rect(m,x,n,r),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=S,e.fillRect(m,x,n,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));let y=new Path2D;y.rect(l,d,n,r),t.clip(y),t.globalCompositeOperation="destination-in",t.drawImage(g,m,x,n,r,l,d,n,r),t.restore()}save(){this.inSMaskMode?(Qf(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Qf(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,r,s,a){this.ctx.transform(e,t,n,r,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){let r=this.ctx,s=this.current,a=s.x,o=s.y,l,d,p=Vi(r),f=p[0]===0&&p[3]===0||p[1]===0&&p[2]===0,g=f?n.slice(0):null;for(let m=0,x=0,y=e.length;m<y;m++)switch(e[m]|0){case Ua.rectangle:a=t[x++],o=t[x++];let S=t[x++],b=t[x++],M=a+S,T=o+b;r.moveTo(a,o),S===0||b===0?r.lineTo(M,T):(r.lineTo(M,o),r.lineTo(M,T),r.lineTo(a,T)),f||s.updateRectMinMax(p,[a,o,M,T]),r.closePath();break;case Ua.moveTo:a=t[x++],o=t[x++],r.moveTo(a,o),f||s.updatePathMinMax(p,a,o);break;case Ua.lineTo:a=t[x++],o=t[x++],r.lineTo(a,o),f||s.updatePathMinMax(p,a,o);break;case Ua.curveTo:l=a,d=o,a=t[x+4],o=t[x+5],r.bezierCurveTo(t[x],t[x+1],t[x+2],t[x+3],a,o),s.updateCurvePathMinMax(p,l,d,t[x],t[x+1],t[x+2],t[x+3],a,o,g),x+=6;break;case Ua.curveTo2:l=a,d=o,r.bezierCurveTo(a,o,t[x],t[x+1],t[x+2],t[x+3]),s.updateCurvePathMinMax(p,l,d,a,o,t[x],t[x+1],t[x+2],t[x+3],g),a=t[x+2],o=t[x+3],x+=4;break;case Ua.curveTo3:l=a,d=o,a=t[x+2],o=t[x+3],r.bezierCurveTo(t[x],t[x+1],a,o,a,o),s.updateCurvePathMinMax(p,l,d,t[x],t[x+1],a,o,a,o,g),x+=4;break;case Ua.closePath:r.closePath();break}f&&s.updateScalingPathMinMax(p,g),s.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){let t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&n?.getPattern?(t.save(),t.strokeStyle=n.getPattern(t,this,go(t),ns.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){let t=this.ctx,n=this.current.fillColor,r=this.current.patternFill,s=!1;r&&(t.save(),t.fillStyle=n.getPattern(t,this,go(t),ns.FILL),s=!0);let a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=hj}eoClip(){this.pendingClip=ID}beginText(){this.current.textMatrix=LD,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(let n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){let n=this.commonObjs.get(e),r=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=n.fontMatrix||VS,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Ln("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;let s=n.loadedName||"sans-serif",a=n.systemFontInfo?.css||`"${s}", ${n.fallbackName}`,o="normal";n.black?o="900":n.bold&&(o="bold");let l=n.italic?"italic":"normal",d=t;t<wD?d=wD:t>CD&&(d=CD),this.current.fontSizeScale=t/d,this.ctx.font=`${l} ${o} ${d}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,r,s,a){this.current.textMatrix=[e,t,n,r,s,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,r,s){let a=this.ctx,o=this.current,l=o.font,d=o.textRenderingMode,p=o.fontSize/o.fontSizeScale,f=d&es.FILL_STROKE_MASK,g=!!(d&es.ADD_TO_PATH_FLAG),m=o.patternFill&&!l.missingFile,x=o.patternStroke&&!l.missingFile,y;(l.disableFontFace||g||m||x)&&(y=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||m||x?(a.save(),a.translate(t,n),a.beginPath(),y(a,p),(f===es.FILL||f===es.FILL_STROKE)&&(r&&a.setTransform(...r),a.fill()),(f===es.STROKE||f===es.FILL_STROKE)&&(s&&a.setTransform(...s),a.stroke()),a.restore()):((f===es.FILL||f===es.FILL_STROKE)&&a.fillText(e,t,n),(f===es.STROKE||f===es.FILL_STROKE)&&a.strokeText(e,t,n)),g&&(this.pendingTextPaths||=[]).push({transform:Vi(a),x:t,y:n,fontSize:p,addToPath:y})}get isFontSubpixelAAEnabled(){let{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);let t=e.getImageData(0,0,10,10).data,n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return Un(this,"isFontSubpixelAAEnabled",n)}showText(e){let t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);let r=t.fontSize;if(r===0)return;let s=this.ctx,a=t.fontSizeScale,o=t.charSpacing,l=t.wordSpacing,d=t.fontDirection,p=t.textHScale*d,f=e.length,g=n.vertical,m=g?1:-1,x=n.defaultVMetrics,y=r*t.fontMatrix[0],S=t.textRenderingMode===es.FILL&&!n.disableFontFace&&!t.patternFill;s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),d>0?s.scale(p,-1):s.scale(p,1);let b,M;if(t.patternFill){s.save();let N=t.fillColor.getPattern(s,this,go(s),ns.FILL);b=Vi(s),s.restore(),s.fillStyle=N}if(t.patternStroke){s.save();let N=t.strokeColor.getPattern(s,this,go(s),ns.STROKE);M=Vi(s),s.restore(),s.strokeStyle=N}let T=t.lineWidth,k=t.textMatrixScale;if(k===0||T===0){let N=t.textRenderingMode&es.FILL_STROKE_MASK;(N===es.STROKE||N===es.FILL_STROKE)&&(T=this.getSinglePixelWidth())}else T/=k;if(a!==1&&(s.scale(a,a),T/=a),s.lineWidth=T,n.isInvalidPDFjsFont){let N=[],F=0;for(let O of e)N.push(O.unicode),F+=O.width;s.fillText(N.join(""),0,0),t.x+=F*y*p,s.restore(),this.compose();return}let L=0,U;for(U=0;U<f;++U){let N=e[U];if(typeof N=="number"){L+=m*N*r/1e3;continue}let F=!1,O=(N.isSpace?l:0)+o,B=N.fontChar,P=N.accent,V,$,K=N.width;if(g){let ot=N.vmetric||x,st=-(N.vmetric?ot[1]:K*.5)*y,Q=ot[2]*y;K=ot?-ot[0]:K,V=st/a,$=(L+Q)/a}else V=L/a,$=0;if(n.remeasure&&K>0){let ot=s.measureText(B).width*1e3/r*a;if(K<ot&&this.isFontSubpixelAAEnabled){let st=K/ot;F=!0,s.save(),s.scale(st,1),V/=st}else K!==ot&&(V+=(K-ot)/2e3*r/a)}if(this.contentVisible&&(N.isInFont||n.missingFile)){if(S&&!P)s.fillText(B,V,$);else if(this.paintChar(B,V,$,b,M),P){let ot=V+r*P.offset.x/a,st=$-r*P.offset.y/a;this.paintChar(P.fontChar,ot,st,b,M)}}let ct=g?K*y-O*d:K*y+O*d;L+=ct,F&&s.restore()}g?t.y-=L:t.x+=L*p,s.restore(),this.compose()}showType3Text(e){let t=this.ctx,n=this.current,r=n.font,s=n.fontSize,a=n.fontDirection,o=r.vertical?1:-1,l=n.charSpacing,d=n.wordSpacing,p=n.textHScale*a,f=n.fontMatrix||VS,g=e.length,m=n.textRenderingMode===es.INVISIBLE,x,y,S,b;if(!(m||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(p,a),x=0;x<g;++x){if(y=e[x],typeof y=="number"){b=o*y*s/1e3,this.ctx.translate(b,0),n.x+=b*p;continue}let M=(y.isSpace?d:0)+l,T=r.charProcOperatorList[y.operatorListId];if(!T){Ln(`Type3 character "${y.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=y,this.save(),t.scale(s,s),t.transform(...f),this.executeOperatorList(T),this.restore()),S=qe.applyTransform([y.width,0],f)[0]*s+M,t.translate(S,0),n.x+=S*p}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,s,a){this.ctx.rect(n,r,s-n,a-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){let n=e[1],r=this.baseTransform||Vi(this.ctx),s={createCanvasGraphics:a=>new i(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new sj(e,n,this.ctx,s,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=qe.makeHexColor(e,t,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=qe.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=rj(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;let t=this.ctx;this.save();let n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,go(t),ns.SHADING);let r=go(t);if(r){let{width:s,height:a}=t.canvas,[o,l,d,p]=qe.getAxialAlignedBoundingBox([0,0,s,a],r);this.ctx.fillRect(o,l,d-o,p-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){wi("Should not call beginInlineImage")}beginImageData(){wi("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Vi(this.ctx),t)){let n=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],n,r),this.current.updateRectMinMax(Vi(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let t=this.ctx;e.isolated||M1("TODO: Support non-isolated groups."),e.knockout&&Ln("Knockout groups not supported.");let n=Vi(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=qe.getAxialAlignedBoundingBox(e.bbox,Vi(t)),s=[0,0,t.canvas.width,t.canvas.height];r=qe.intersect(r,s)||[0,0,0,0];let a=Math.floor(r[0]),o=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-a,1),d=Math.max(Math.ceil(r[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,d]);let p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);let f=this.cachedCanvases.getCanvas(p,l,d),g=f.context;g.translate(-a,-o),g.transform(...n),e.smask?this.smaskStack.push({canvas:f.canvas,context:g,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),Qf(t,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;let t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let r=Vi(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);let s=qe.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,n,r,s){if(this.#t(),V_(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){let a=t[2]-t[0],o=t[3]-t[1];if(s&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;let[l,d]=qe.singularValueDecompose2dScale(Vi(this.ctx)),{viewportScale:p}=this,f=Math.ceil(a*this.outputScaleX*p),g=Math.ceil(o*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(f,g);let{canvas:m,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(e,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(l,0,0,-d,0,o*d),V_(this.ctx)}else V_(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new s1(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;let t=e.count;e=this.getObject(e.data,e),e.count=t;let n=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=cj(e)),r.compiled)){r.compiled(n);return}let s=this._createMaskCanvas(e),a=s.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,s.offsetX,s.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,r=0,s,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);let o=this.ctx;o.save();let l=Vi(o);o.transform(t,n,r,s,0,0);let d=this._createMaskCanvas(e);o.setTransform(1,0,0,1,d.offsetX-l[4],d.offsetY-l[5]);for(let p=0,f=a.length;p<f;p+=2){let g=qe.transform(l,[t,n,r,s,a[p],a[p+1]]),[m,x]=qe.applyTransform([0,0],g);o.drawImage(d.canvas,m,x)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;let t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(let s of e){let{data:a,width:o,height:l,transform:d}=s,p=this.cachedCanvases.getCanvas("maskCanvas",o,l),f=p.context;f.save();let g=this.getObject(a,s);TD(f,g),f.globalCompositeOperation="source-in",f.fillStyle=r?n.getPattern(f,this,go(t),ns.FILL):n,f.fillRect(0,0,o,l),f.restore(),t.save(),t.transform(...d),t.scale(1,-1),B_(t,p.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;let t=this.getObject(e);if(!t){Ln("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;let s=this.getObject(e);if(!s){Ln("Dependent image isn't ready yet");return}let a=s.width,o=s.height,l=[];for(let d=0,p=r.length;d<p;d+=2)l.push({transform:[t,0,0,n,r[d],r[d+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;let{bitmap:t,width:n,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,r),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;let t=e.width,n=e.height,r=this.ctx;if(this.save(),!xs){let{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none")}r.scale(1/t,-1/n);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{let l=this.cachedCanvases.getCanvas("inlineImage",t,n).context;AD(l,e),s=this.applyTransferMapsToCanvas(l)}let a=this._scaleImage(s,go(r));r.imageSmoothingEnabled=kD(Vi(r),e.interpolate),B_(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;let n=this.ctx,r;if(e.bitmap)r=e.bitmap;else{let s=e.width,a=e.height,l=this.cachedCanvases.getCanvas("inlineImage",s,a).context;AD(l,e),r=this.applyTransferMapsToCanvas(l)}for(let s of t)n.save(),n.transform(...s.transform),n.scale(1,-1),B_(n,r,s.x,s.y,s.w,s.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){let t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);let n=this.ctx;this.pendingClip&&(t||(this.pendingClip===ID?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let e=Vi(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{let t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:e}=this.current,{a:t,b:n,c:r,d:s}=this.ctx.getTransform(),a,o;if(n===0&&r===0){let l=Math.abs(t),d=Math.abs(s);if(l===d)if(e===0)a=o=1/l;else{let p=l*e;a=o=p<1?1/p:1}else if(e===0)a=1/l,o=1/d;else{let p=l*e,f=d*e;a=p<1?1/p:1,o=f<1?1/f:1}}else{let l=Math.abs(t*s-n*r),d=Math.hypot(t,n),p=Math.hypot(r,s);if(e===0)a=p/l,o=d/l;else{let f=e*l;a=p>f?p/f:1,o=d>f?d/f:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){let{ctx:t}=this,{lineWidth:n}=this.current,[r,s]=this.getScaleForStroking();if(t.lineWidth=n||1,r===1&&s===1){t.stroke();return}let a=t.getLineDash();if(e&&t.save(),t.scale(r,s),a.length>0){let o=Math.max(r,s);t.setLineDash(a.map(l=>l/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};for(let i in Ua)fh.prototype[i]!==void 0&&(fh.prototype[Ua[i]]=fh.prototype[i]);var wd=class{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#t=e}static get workerSrc(){return this.#e}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#e=e}},U_={UNKNOWN:0,DATA:1,ERROR:2},yr={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function DD(){}function ya(i){switch(i instanceof Error||typeof i=="object"&&i!==null||wi('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new nl(i.message);case"MissingPDFException":return new Cd(i.message);case"PasswordException":return new im(i.message,i.code);case"UnexpectedResponseException":return new vh(i.message,i.status);case"UnknownErrorException":return new rm(i.message,i.details);default:return new rm(i.message,i.toString())}}var bd=class{#t=new AbortController;constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#i(e);return}if(e.callback){let n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===U_.DATA)r.resolve(e.data);else if(e.callback===U_.ERROR)r.reject(ya(e.reason));else throw new Error("Unexpected callback case");return}let t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){let n=this.sourceName,r=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(a){s.postMessage({sourceName:n,targetName:r,callback:U_.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:n,targetName:r,callback:U_.ERROR,callbackId:e.callbackId,reason:ya(a)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){let n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){let r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,n,r){let s=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:d=>{let p=Promise.withResolvers();return this.streamControllers[s]={controller:d,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:s,data:t,desiredSize:d.desiredSize},r),p.promise},pull:d=>{let p=Promise.withResolvers();return this.streamControllers[s].pullCall=p,l.postMessage({sourceName:a,targetName:o,stream:yr.PULL,streamId:s,desiredSize:d.desiredSize}),p.promise},cancel:d=>{Sr(d instanceof Error,"cancel must have a valid reason");let p=Promise.withResolvers();return this.streamControllers[s].cancelCall=p,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:yr.CANCEL,streamId:s,reason:ya(d)}),p.promise}},n)}#n(e){let t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(d,p=1,f){if(this.isCancelled)return;let g=this.desiredSize;this.desiredSize-=p,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:r,stream:yr.ENQUEUE,streamId:t,chunk:d},f)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:yr.CLOSE,streamId:t}),delete a.streamSinks[t])},error(d){Sr(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:yr.ERROR,streamId:t,reason:ya(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(o,e.data,l).then(function(){s.postMessage({sourceName:n,targetName:r,stream:yr.START_COMPLETE,streamId:t,success:!0})},function(d){s.postMessage({sourceName:n,targetName:r,stream:yr.START_COMPLETE,streamId:t,reason:ya(d)})})}#i(e){let t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case yr.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(ya(e.reason));break;case yr.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(ya(e.reason));break;case yr.PULL:if(!o){s.postMessage({sourceName:n,targetName:r,stream:yr.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||DD).then(function(){s.postMessage({sourceName:n,targetName:r,stream:yr.PULL_COMPLETE,streamId:t,success:!0})},function(d){s.postMessage({sourceName:n,targetName:r,stream:yr.PULL_COMPLETE,streamId:t,reason:ya(d)})});break;case yr.ENQUEUE:if(Sr(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case yr.CLOSE:if(Sr(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#s(a,t);break;case yr.ERROR:Sr(a,"error should have stream controller"),a.controller.error(ya(e.reason)),this.#s(a,t);break;case yr.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(ya(e.reason)),this.#s(a,t);break;case yr.CANCEL:if(!o)break;let l=ya(e.reason);Promise.try(o.onCancel||DD,l).then(function(){s.postMessage({sourceName:n,targetName:r,stream:yr.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){s.postMessage({sourceName:n,targetName:r,stream:yr.CANCEL_COMPLETE,streamId:t,reason:ya(d)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}#s(e,t){return Be(this,null,function*(){yield Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]})}destroy(){this.#t?.abort(),this.#t=null}},lw=class{#t;#e;constructor({parsedData:e,rawData:t}){this.#t=e,this.#e=t}getRaw(){return this.#e}get(e){return this.#t.get(e)??null}getAll(){return rC(this.#t)}has(e){return this.#t.has(e)}},ph=Symbol("INTERNAL"),cw=class{#t=!1;#e=!1;#n=!1;#i=!0;constructor(e,{name:t,intent:n,usage:r,rbGroups:s}){this.#t=!!(e&Ks.DISPLAY),this.#e=!!(e&Ks.PRINT),this.name=t,this.intent=n,this.usage=r,this.rbGroups=s}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;let{print:e,view:t}=this.usage;return this.#t?t?.viewState!=="OFF":this.#e?e?.printState!=="OFF":!0}_setVisible(e,t,n=!1){e!==ph&&wi("Internal method `_setVisible` called."),this.#n=n,this.#i=t}},dw=class{#t=null;#e=new Map;#n=null;#i=null;constructor(e,t=Ks.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#i=e.order;for(let n of e.groups)this.#e.set(n.id,new cw(t,n));if(e.baseState==="OFF")for(let n of this.#e.values())n._setVisible(ph,!1);for(let n of e.on)this.#e.get(n)._setVisible(ph,!0);for(let n of e.off)this.#e.get(n)._setVisible(ph,!1);this.#n=this.getHash()}}#s(e){let t=e.length;if(t<2)return!0;let n=e[0];for(let r=1;r<t;r++){let s=e[r],a;if(Array.isArray(s))a=this.#s(s);else if(this.#e.has(s))a=this.#e.get(s).visible;else return Ln(`Optional content group not found: ${s}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"}isVisible(e){if(this.#e.size===0)return!0;if(!e)return M1("Optional content group not defined."),!0;if(e.type==="OCG")return this.#e.has(e.id)?this.#e.get(e.id).visible:(Ln(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#s(e.expression);if(!e.policy||e.policy==="AnyOn"){for(let t of e.ids){if(!this.#e.has(t))return Ln(`Optional content group not found: ${t}`),!0;if(this.#e.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(let t of e.ids){if(!this.#e.has(t))return Ln(`Optional content group not found: ${t}`),!0;if(!this.#e.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(let t of e.ids){if(!this.#e.has(t))return Ln(`Optional content group not found: ${t}`),!0;if(!this.#e.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(let t of e.ids){if(!this.#e.has(t))return Ln(`Optional content group not found: ${t}`),!0;if(this.#e.get(t).visible)return!1}return!0}return Ln(`Unknown optional content policy ${e.policy}.`),!0}return Ln(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){let r=this.#e.get(e);if(!r){Ln(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(let s of r.rbGroups)for(let a of s)a!==e&&this.#e.get(a)?._setVisible(ph,!1,!0);r._setVisible(ph,!!t,!0),this.#t=null}setOCGState({state:e,preserveRB:t}){let n;for(let r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}let s=this.#e.get(r);if(s)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!s.visible,t);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?rC(this.#e):null}getGroup(e){return this.#e.get(e)||null}getHash(){if(this.#t!==null)return this.#t;let e=new Z_;for(let[t,n]of this.#e)e.update(`${t}:${n.visible}`);return this.#t=e.hexdigest()}},uw=class{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Sr(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,s?.length>0){let l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,d)=>{this._onReceiveData({begin:l,chunk:d})}),e.addProgressListener((l,d)=>{this._onProgress({loaded:l,total:d})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){let n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{let r=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(n),!0)});Sr(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){let t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Sr(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let e=this._queuedChunks;return this._queuedChunks=null,new hw(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new pw(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}},hw=class{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=aC(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(let s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return Be(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},pw=class{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return Be(this,null,function*(){if(this._queuedChunk){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function pj(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let p=o(t);return p=unescape(p),p=l(p),p=d(p),s(p)}if(t=a(i),t){let p=d(t);return s(p)}if(t=n("filename","i").exec(i),t){t=t[1];let p=o(t);return p=d(p),s(p)}function n(p,f){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function r(p,f){if(p){if(!/^[\x00-\xFF]+$/.test(f))return f;try{let g=new TextDecoder(p,{fatal:!0}),m=E1(f);f=g.decode(m),e=!1}catch{}}return f}function s(p){return e&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),e&&(p=r("iso-8859-1",p))),p}function a(p){let f=[],g,m=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=m.exec(p))!==null;){let[,y,S,b]=g;if(y=parseInt(y,10),y in f){if(y===0)break;continue}f[y]=[S,b]}let x=[];for(let y=0;y<f.length&&y in f;++y){let[S,b]=f[y];b=o(b),S&&(b=unescape(b),y===0&&(b=l(b))),x.push(b)}return x.join("")}function o(p){if(p.startsWith('"')){let f=p.slice(1).split('\\"');for(let g=0;g<f.length;++g){let m=f[g].indexOf('"');m!==-1&&(f[g]=f[g].slice(0,m),f.length=g+1),f[g]=f[g].replaceAll(/\\(.)/g,"$1")}p=f.join('"')}return p}function l(p){let f=p.indexOf("'");if(f===-1)return p;let g=p.slice(0,f),x=p.slice(f+1).replace(/^[^']*'/,"");return r(g,x)}function d(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,g,m,x){if(m==="q"||m==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,S){return String.fromCharCode(parseInt(S,16))}),r(g,x);try{x=atob(x)}catch{}return r(g,x)})}return""}function FD(i,e){let t=new Headers;if(!i||!e||typeof e!="object")return t;for(let n in e){let r=e[n];r!==void 0&&t.append(n,r)}return t}function k1(i){try{return new URL(i).origin}catch{}return null}function BD({responseHeaders:i,isHttp:e,rangeChunkSize:t,disableRange:n}){let r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(i.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*t)||n||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function VD(i){let e=i.get("Content-Disposition");if(e){let t=pj(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(aC(t))return t}return null}function I1(i,e){return i===404||i===0&&e.startsWith("file:")?new Cd('Missing PDF "'+e+'".'):new vh(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i)}function UD(i){return i===200||i===206}function zD(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function jD(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Ln(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}var a1=class{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=FD(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Sr(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new fw(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new mw(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},fw=class{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;let t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;let n=new Headers(e.headers),r=t.url;fetch(r,zD(n,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=k1(s.url),!UD(s.status))throw I1(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();let a=s.headers,{allowRangeRequests:o,suggestedLength:l}=BD({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=VD(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new nl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return Be(this,null,function*(){yield this._headersCapability.promise;let{value:e,done:t}=yield this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:jD(e),done:!1})})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},mw=class{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;let r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;let s=new Headers(e.headers);s.append("Range",`bytes=${t}-${n-1}`);let a=r.url;fetch(a,zD(s,this._withCredentials,this._abortController)).then(o=>{let l=k1(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!UD(o.status))throw I1(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return Be(this,null,function*(){yield this._readCapability.promise;let{value:e,done:t}=yield this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:jD(e),done:!1})})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},FS=200,BS=206;function fj(i){let e=i.response;return typeof e!="string"?e:E1(e).buffer}var gw=class{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=FD(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){let r={begin:e,end:t};for(let s in n)r[s]=n[s];return this.request(r)}requestFull(e){return this.request(e)}request(e){let t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(let[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=BS):r.expectedStatus=FS,t.responseType="arraybuffer",e.onError&&(t.onerror=function(s){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){let n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){let n=this.pendingRequests[e];if(!n)return;let r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){n.onError?.(r.status);return}let s=r.status||FS;if(!(s===FS&&n.expectedStatus===BS)&&s!==n.expectedStatus){n.onError?.(r.status);return}let o=fj(r);if(s===BS){let l=r.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);n.onDone({begin:parseInt(d[1],10),chunk:o})}else o?n.onDone({begin:0,chunk:o}):n.onError?.(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){let t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}},_w=class{constructor(e){this._source=e,this._manager=new gw(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){let t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Sr(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new vw(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){let n=new xw(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},vw=class{constructor(e,t){this._manager=e;let n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=k1(t.responseURL);let n=t.getAllResponseHeaders(),r=new Headers(n?n.trim().split(/[\r\n]+/).map(o=>{let[l,...d]=o.split(": ");return[l,d.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=BD({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=VD(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=I1(e,this._url),this._headersCapability.reject(this._storedError);for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){return Be(this,null,function*(){if(yield this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0,this._headersCapability.reject(e);for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},xw=class{constructor(e,t,n){this._manager=e;let r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){let e=k1(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){let t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=I1(e,this._url);for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}read(){return Be(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},mj=/^[a-z][a-z0-9\-+.]+:/i;function gj(i){if(mj.test(i))return new URL(i);let e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(i))}var bw=class{constructor(e){this.source=e,this.url=gj(e.url),Sr(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Sr(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new yw(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new Sw(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},yw=class{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;let t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new Cd(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return Be(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new nl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},Sw=class{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let r=e.source;this._isStreamingSupported=!r.disableStream;let s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}read(){return Be(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}},_j=1e5,Rs=30,vj=.8,um=class i{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#s=null;#r=null;#c=0;#o=0;#d=null;#l=null;#u=0;#a=0;#h=Object.create(null);#p=[];#f=null;#g=[];#m=new WeakMap;#_=null;static#v=new Map;static#b=new Map;static#y=new WeakMap;static#C=null;static#M=new Set;constructor({textContentSource:e,container:t,viewport:n}){if(e instanceof ReadableStream)this.#f=e;else if(typeof e=="object")this.#f=new ReadableStream({start(l){l.enqueue(e),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=t,this.#a=n.scale*(globalThis.devicePixelRatio||1),this.#u=n.rotation,this.#r={div:null,properties:null,ctx:null};let{pageWidth:r,pageHeight:s,pageX:a,pageY:o}=n.rawDims;this.#_=[1,0,0,-1,-a,o+s],this.#o=r,this.#c=s,i.#I(),Md(t,n),this.#t.promise.finally(()=>{i.#M.delete(this),this.#r=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:e,isFirefox:t}=qr.platform;return Un(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){let e=()=>{this.#d.read().then(({value:t,done:n})=>{if(n){this.#t.resolve();return}this.#s??=t.lang,Object.assign(this.#h,t.styles),this.#E(t.items),e()},this.#t.reject)};return this.#d=this.#f.getReader(),i.#M.add(this),e(),this.#t.promise}update({viewport:e,onBefore:t=null}){let n=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==this.#u&&(t?.(),this.#u=r,Md(this.#l,{rotation:r})),n!==this.#a){t?.(),this.#a=n;let s={div:null,properties:null,ctx:i.#k(this.#s)};for(let a of this.#g)s.properties=this.#m.get(a),s.div=a,this.#S(s)}}cancel(){let e=new nl("TextLayer task cancelled.");this.#d?.cancel(e).catch(()=>{}),this.#d=null,this.#t.reject(e)}get textDivs(){return this.#g}get textContentItemsStr(){return this.#p}#E(e){if(this.#n)return;this.#r.ctx??=i.#k(this.#s);let t=this.#g,n=this.#p;for(let r of e){if(t.length>_j){Ln("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){let s=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id!==null&&this.#e.setAttribute("id",`${r.id}`),s.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(r.str),this.#T(r)}}#T(e){let t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#g.push(t);let r=qe.transform(this.#_,e.transform),s=Math.atan2(r[1],r[0]),a=this.#h[e.fontName];a.vertical&&(s+=Math.PI/2);let o=this.#i&&a.fontSubstitution||a.fontFamily;o=i.fontFamilyMap.get(o)||o;let l=Math.hypot(r[2],r[3]),d=l*i.#L(o,this.#s),p,f;s===0?(p=r[4],f=r[5]-d):(p=r[4]+d*Math.sin(s),f=r[5]-d*Math.cos(s));let g="calc(var(--scale-factor)*",m=t.style;this.#e===this.#l?(m.left=`${(100*p/this.#o).toFixed(2)}%`,m.top=`${(100*f/this.#c).toFixed(2)}%`):(m.left=`${g}${p.toFixed(2)}px)`,m.top=`${g}${f.toFixed(2)}px)`),m.fontSize=`${g}${(i.#C*l).toFixed(2)}px)`,m.fontFamily=o,n.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#i&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(n.angle=s*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){let y=Math.abs(e.transform[0]),S=Math.abs(e.transform[3]);y!==S&&Math.max(y,S)/Math.min(y,S)>1.5&&(x=!0)}if(x&&(n.canvasWidth=a.vertical?e.height:e.width),this.#m.set(t,n),this.#r.div=t,this.#r.properties=n,this.#S(this.#r),n.hasText&&this.#e.append(t),n.hasEOL){let y=document.createElement("br");y.setAttribute("role","presentation"),this.#e.append(y)}}#S(e){let{div:t,properties:n,ctx:r}=e,{style:s}=t,a="";if(i.#C>1&&(a=`scale(${1/i.#C})`),n.canvasWidth!==0&&n.hasText){let{fontFamily:o}=s,{canvasWidth:l,fontSize:d}=n;i.#A(r,d*this.#a,o);let{width:p}=r.measureText(t.textContent);p>0&&(a=`scaleX(${l*this.#a/p}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(s.transform=a)}static cleanup(){if(!(this.#M.size>0)){this.#v.clear();for(let{canvas:e}of this.#b.values())e.remove();this.#b.clear()}}static#k(e=null){let t=this.#b.get(e||="");if(!t){let n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(e,t),this.#y.set(t,{size:0,family:""})}return t}static#A(e,t,n){let r=this.#y.get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)}static#I(){if(this.#C!==null)return;let e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#C=e.getBoundingClientRect().height,e.remove()}static#L(e,t){let n=this.#v.get(e);if(n)return n;let r=this.#k(t);r.canvas.width=r.canvas.height=Rs,this.#A(r,Rs,e);let s=r.measureText(""),a=s.fontBoundingBoxAscent,o=Math.abs(s.fontBoundingBoxDescent);if(a){let p=a/(a+o);return this.#v.set(e,p),r.canvas.width=r.canvas.height=0,p}r.strokeStyle="red",r.clearRect(0,0,Rs,Rs),r.strokeText("g",0,0);let l=r.getImageData(0,0,Rs,Rs).data;o=0;for(let p=l.length-1-3;p>=0;p-=4)if(l[p]>0){o=Math.ceil(p/4/Rs);break}r.clearRect(0,0,Rs,Rs),r.strokeText("A",0,Rs),l=r.getImageData(0,0,Rs,Rs).data,a=0;for(let p=0,f=l.length;p<f;p+=4)if(l[p]>0){a=Rs-Math.floor(p/4/Rs);break}r.canvas.width=r.canvas.height=0;let d=a?a/(a+o):vj;return this.#v.set(e,d),d}},hm=class i{static textContent(e){let t=[],n={items:t,styles:Object.create(null)};function r(s){if(!s)return;let a=null,o=s.name;if(o==="#text")a=s.value;else if(i.shouldBuildText(o))s?.attributes?.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&t.push({str:a}),!!s.children)for(let l of s.children)r(l)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}},xj=65536,bj=100,yj=5e3,Sj=xs?tw:ZS,wj=xs?ew:e1,Cj=xs?QS:JS,Mj=xs?nw:r1;function Ej(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});let e=new ww,{docId:t}=e,n=i.url?Aj(i.url):null,r=i.data?Tj(i.data):null,s=i.httpHeaders||null,a=i.withCredentials===!0,o=i.password??null,l=i.range instanceof o1?i.range:null,d=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:xj,p=i.worker instanceof mh?i.worker:null,f=i.verbosity,g=typeof i.docBaseUrl=="string"&&!T1(i.docBaseUrl)?i.docBaseUrl:null,m=typeof i.cMapUrl=="string"?i.cMapUrl:null,x=i.cMapPacked!==!1,y=i.CMapReaderFactory||wj,S=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,b=i.StandardFontDataFactory||Mj,M=i.stopAtErrors!==!0,T=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,k=i.isEvalSupported!==!1,L=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!xs,U=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!xs&&(qr.platform.isFirefox||!globalThis.chrome),N=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,F=typeof i.disableFontFace=="boolean"?i.disableFontFace:xs,O=i.fontExtraProperties===!0,B=i.enableXfa===!0,P=i.ownerDocument||globalThis.document,V=i.disableRange===!0,$=i.disableStream===!0,K=i.disableAutoFetch===!0,ct=i.pdfBug===!0,ot=i.CanvasFactory||Sj,st=i.FilterFactory||Cj,Q=i.enableHWA===!0,xt=l?l.length:i.length??NaN,Mt=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!xs&&!F,qt=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:y===e1&&b===r1&&m&&S&&em(m,document.baseURI)&&em(S,document.baseURI);i.canvasFactory&&xD("`canvasFactory`-instance option, please use `CanvasFactory` instead."),i.filterFactory&&xD("`filterFactory`-instance option, please use `FilterFactory` instead.");let z=null;j9(f);let it={canvasFactory:new ot({ownerDocument:P,enableHWA:Q}),filterFactory:new st({docId:t,ownerDocument:P}),cMapReaderFactory:qt?null:new y({baseUrl:m,isCompressed:x}),standardFontDataFactory:qt?null:new b({baseUrl:S})};if(!p){let pt={verbosity:f,port:wd.workerPort};p=pt.port?mh.fromPort(pt):new mh(pt),e._worker=p}let Z={docId:t,apiVersion:"4.9.155",data:r,password:o,disableAutoFetch:K,rangeChunkSize:d,length:xt,docBaseUrl:g,enableXfa:B,evaluatorOptions:{maxImageSize:T,disableFontFace:F,ignoreErrors:M,isEvalSupported:k,isOffscreenCanvasSupported:L,isImageDecoderSupported:U,canvasMaxAreaInBytes:N,fontExtraProperties:O,useSystemFonts:Mt,cMapUrl:qt?m:null,standardFontDataUrl:qt?S:null}},at={disableFontFace:F,fontExtraProperties:O,ownerDocument:P,pdfBug:ct,styleElement:z,loadingParams:{disableAutoFetch:K,enableXfa:B}};return p.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");let pt=p.messageHandler.sendWithPromise("GetDocRequest",Z,r?[r.buffer]:null),ft;if(l)ft=new uw(l,{disableRange:V,disableStream:$});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");let St;if(xs)if(em(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");St=a1}else St=bw;else St=em(n)?a1:_w;ft=new St({url:n,length:xt,httpHeaders:s,withCredentials:a,rangeChunkSize:d,disableRange:V,disableStream:$})}return pt.then(St=>{if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");let kt=new bd(t,St,p.port),Qt=new Aw(kt,e,ft,at,it);e._transport=Qt,kt.send("Ready",null)})}).catch(e._capability.reject),e}function Aj(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(xs&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Tj(i){if(xs&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return E1(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i?.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function PD(i){return typeof i=="object"&&Number.isInteger(i?.num)&&i.num>=0&&Number.isInteger(i?.gen)&&i.gen>=0}var ww=class i{static#t=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${i.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){return Be(this,null,function*(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),yield this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null})}},o1=class{constructor(e,t,n=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(let n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(let n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(let t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){wi("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},Cw=class{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Un(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},Mw=class{#t=null;#e=!1;constructor(e,t,n,r=!1){this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new Y_:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new l1,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:s=!1}={}){return new sm({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Un(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return Be(this,null,function*(){return this._transport._htmlForXfa?.children[this._pageIndex]||null})}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:r=pc.ENABLE,transform:s=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:d=null,printAnnotationStorage:p=null,isEditing:f=!1}){this._stats?.time("Overall");let g=this._transport.getRenderingIntent(n,r,p,f),{renderingIntent:m,cacheKey:x}=g;this.#e=!1,this.#i(),o||=this._transport.getOptionalContentConfig(m);let y=this._intentStates.get(x);y||(y=Object.create(null),this._intentStates.set(x,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);let S=!!(m&Ks.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(g));let b=k=>{y.renderTasks.delete(M),(this._maybeCleanupAfterRender||S)&&(this.#e=!0),this.#n(!S),k?(M.capability.reject(k),this._abortOperatorList({intentState:y,reason:k instanceof Error?k:new Error(k)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new kw({callback:b,params:{canvasContext:e,viewport:t,transform:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:d});(y.renderTasks||=new Set).add(M);let T=M.task;return Promise.all([y.displayReadyCapability.promise,o]).then(([k,L])=>{if(this.destroyed){b();return}if(this._stats?.time("Rendering"),!(L.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:k,optionalContentConfig:L}),M.operatorListChanged()}).catch(b),T}getOperatorList({intent:e="display",annotationMode:t=pc.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}let a=this._transport.getRenderingIntent(e,t,n,r,!0),o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>hm.textContent(n));let t=this.streamTextContent(e);return new Promise(function(n,r){function s(){a.read().then(function({value:l,done:d}){if(d){n(o);return}o.lang??=l.lang,Object.assign(o.styles,l.styles),o.items.push(...l.items),s()},r)}let a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(let n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,this.#i(),Promise.all(e)}cleanup(e=!1){this.#e=!0;let t=this.#n(!1);return e&&t&&(this._stats&&=new Y_),t}#n(e=!1){if(this.#i(),!this.#e||this.destroyed)return!1;if(e)return this.#t=setTimeout(()=>{this.#t=null,this.#n(!1)},yj),!1;for(let{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#i(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(e,t){let n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(let n of t.renderTasks)n.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){let{map:s,transfer:a}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:r},a).getReader(),d=this._intentStates.get(t);d.streamReader=l;let p=()=>{l.read().then(({value:f,done:g})=>{if(g){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,d),p())},f=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(let g of d.renderTasks)g.operatorListChanged();this.#n(!0)}if(d.displayReadyCapability)d.displayReadyCapability.reject(f);else if(d.opListReadCapability)d.opListReadCapability.reject(f);else throw f}})};p()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof am){let r=bj;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new nl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(let[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}},Ew=class{#t=new Map;#e=Promise.resolve();postMessage(e,t){let n={data:structuredClone(e,t?{transfer:t}:null)};this.#e.then(()=>{for(let[r]of this.#t)r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if(n?.signal instanceof AbortSignal){let{signal:s}=n;if(s.aborted){Ln("LoopbackPort - cannot use an `aborted` signal.");return}let a=()=>this.removeEventListener(e,t);r=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}this.#t.set(t,r)}removeEventListener(e,t){this.#t.get(t)?.(),this.#t.delete(t)}terminate(){for(let[,e]of this.#t)e?.();this.#t.clear()}},S1,yd,Sd,gh,G_,_h,q_,Bi=class Bi{constructor({name:e=null,port:t=null,verbosity:n=H9()}={}){bu(this,gh);if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(io(Bi,Sd)?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(io(Bi,Sd)||B0(Bi,Sd,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new bd("main","worker",e),this._messageHandler.on("ready",function(){}),V0(this,gh,G_).call(this)}_initialize(){if(io(Bi,yd)||io(Bi,_h,q_)){this._setupFakeWorker();return}let{workerSrc:e}=Bi;try{Bi._isSameOrigin(window.location.href,e)||(e=Bi._createCDNWrapper(new URL(e,window.location).href));let t=new Worker(e,{type:"module"}),n=new bd("main","worker",t),r=()=>{s.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:s.signal}),n.on("test",o=>{if(s.abort(),this.destroyed||!o){r();return}this._messageHandler=n,this._port=t,this._webWorker=t,V0(this,gh,G_).call(this)}),n.on("ready",o=>{if(s.abort(),this.destroyed){r();return}try{a()}catch{this._setupFakeWorker()}});let a=()=>{let o=new Uint8Array;n.send("test",o,[o.buffer])};a();return}catch{M1("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){io(Bi,yd)||(Ln("Setting up fake worker."),B0(Bi,yd,!0)),Bi._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let t=new Ew;this._port=t;let n=`fake${TE(Bi,S1)._++}`,r=new bd(n+"_worker",n,t);e.setup(r,t),this._messageHandler=new bd(n,n+"_worker",t),V0(this,gh,G_).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker?.terminate(),this._webWorker=null,io(Bi,Sd)?.delete(this._port),this._port=null,this._messageHandler?.destroy(),this._messageHandler=null}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");let t=io(this,Sd)?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Bi(e)}static get workerSrc(){if(wd.workerSrc)return wd.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Un(this,"_setupFakeWorkerGlobal",Be(this,null,function*(){return io(this,_h,q_)?io(this,_h,q_):(yield import(this.workerSrc)).WorkerMessageHandler}))}};S1=new WeakMap,yd=new WeakMap,Sd=new WeakMap,gh=new WeakSet,G_=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},_h=new WeakSet,q_=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},bu(Bi,_h),bu(Bi,S1,0),bu(Bi,yd,!1),bu(Bi,Sd),xs&&(B0(Bi,yd,!0),wd.workerSrc||="./pdf.worker.mjs"),Bi._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}let r=new URL(t,n);return n.origin===r.origin},Bi._createCDNWrapper=e=>{let t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};var mh=Bi,Aw=class{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#s=null;constructor(e,t,n,r,s){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new l1,this.fontLoader=new $S({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#r(e,t=null){let n=this.#t.get(e);if(n)return n;let r=this.messageHandler.sendWithPromise(e,t);return this.#t.set(e,r),r}get annotationStorage(){return Un(this,"annotationStorage",new cm)}getRenderingIntent(e,t=pc.ENABLE,n=null,r=!1,s=!1){let a=Ks.DISPLAY,o=YS;switch(e){case"any":a=Ks.ANY;break;case"display":break;case"print":a=Ks.PRINT;break;default:Ln(`getRenderingIntent - invalid intent: ${e}`)}let l=a&Ks.PRINT&&n instanceof J_?n:this.annotationStorage;switch(t){case pc.DISABLE:a+=Ks.ANNOTATIONS_DISABLE;break;case pc.ENABLE:break;case pc.ENABLE_FORMS:a+=Ks.ANNOTATIONS_FORMS;break;case pc.ENABLE_STORAGE:a+=Ks.ANNOTATIONS_STORAGE,o=l.serializable;break;default:Ln(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=Ks.IS_EDITING),s&&(a+=Ks.OPLIST);let{ids:d,hash:p}=l.modifiedIds,f=[a,o.hash,p];return{renderingIntent:a,cacheKey:f.join("_"),annotationStorageSerializable:o,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));let e=[];for(let n of this.#e.values())e.push(n._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),um.cleanup(),this._networkStream?.cancelAllRequests(new nl("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{Sr(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){r.close();return}Sr(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",n=>Be(this,null,function*(){yield this._fullReader.headersReady;let{isStreamingSupported:r,isRangeSupported:s,contentLength:a}=this._fullReader;return(!r||!s)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=o=>{t.onProgress?.({loaded:o.loaded,total:o.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:a}})),e.on("GetRangeReader",(n,r)=>{Sr(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let s=this._networkStream.getRangeReader(n.begin,n.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){r.close();return}Sr(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{s.cancel(a),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new Cw(n,this))}),e.on("DocException",function(n){let r;switch(n.name){case"PasswordException":r=new im(n.message,n.code);break;case"InvalidPDFException":r=new X_(n.message);break;case"MissingPDFException":r=new Cd(n.message);break;case"UnexpectedResponseException":r=new vh(n.message,n.status);break;case"UnknownErrorException":r=new rm(n.message,n.details);break;default:wi("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",n=>{if(this.#s=Promise.withResolvers(),t.onPassword){let r=s=>{s instanceof Error?this.#s.reject(s):this.#s.resolve({password:s})};try{t.onPassword(r,n.code)}catch(s){this.#s.reject(s)}}else this.#s.reject(new im(n.message,n.code));return this.#s.promise}),e.on("DataLoaded",n=>{t.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;this.#e.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,s])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":let{disableFontFace:a,fontExtraProperties:o,pdfBug:l}=this._params;if("error"in s){let g=s.error;Ln(`Error during font loading: ${g}`),this.commonObjs.resolve(n,g);break}let d=l&&globalThis.FontInspector?.enabled?(g,m)=>globalThis.FontInspector.fontAdded(g,m):null,p=new KS(s,{disableFontFace:a,inspectFont:d});this.fontLoader.bind(p).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!o&&p.data&&(p.data=null),this.commonObjs.resolve(n,p)});break;case"CopyLocalImage":let{imageRef:f}=s;Sr(f,"The imageRef must be defined.");for(let g of this.#e.values())for(let[,m]of g.objs)if(m?.ref===f)return m.dataLen?(this.commonObjs.resolve(n,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,s);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,s,a])=>{if(this.destroyed)return;let o=this.#e.get(r);if(!o.objs.has(n)){if(o._intentStates.size===0){a?.bitmap?.close();return}switch(s){case"Image":o.objs.resolve(n,a),a?.dataLen>F9&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",n=>{this.destroyed||t.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",n=>Be(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)})),e.on("FetchStandardFontData",n=>Be(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ln("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));let t=e-1,n=this.#n.get(t);if(n)return n;let r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#i.set(s.refStr,e);let a=new Mw(t,s,this,this._params.pdfBug);return this.#e.set(t,a),a});return this.#n.set(t,r),r}getPageIndex(e){return PD(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#r("GetOptionalContentConfig").then(t=>new dw(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let e="GetMetadata",t=this.#t.get(e);if(t)return t;let n=this.messageHandler.sendWithPromise(e,null).then(r=>({info:r[0],metadata:r[1]?new lw(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(e=!1){return Be(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(let t of this.#e.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),um.cleanup()}})}cachedPageNumber(e){if(!PD(e))return null;let t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#i.get(t)??null}},z_=Symbol("INITIAL_DATA"),l1=class{#t=Object.create(null);#e(e){return this.#t[e]||=In(Se({},Promise.withResolvers()),{data:z_})}get(e,t=null){if(t){let r=this.#e(e);return r.promise.then(()=>t(r.data)),null}let n=this.#t[e];if(!n||n.data===z_)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){let t=this.#t[e];return!!t&&t.data!==z_}resolve(e,t=null){let n=this.#e(e);n.data=t,n.resolve()}clear(){for(let e in this.#t){let{data:t}=this.#t[e];t?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(let e in this.#t){let{data:t}=this.#t[e];t!==z_&&(yield[e,t])}}},Tw=class{#t=null;constructor(e){this.#t=e,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(e=0){this.#t.cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=this.#t.operatorList;if(!e)return!1;let{annotationCanvasMap:t}=this.#t;return e.form||e.canvas&&t?.size>0}},kw=class i{#t=null;static#e=new WeakSet;constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:d,useRequestAnimationFrame:p=!1,pdfBug:f=!1,pageColors:g=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=d,this._pdfBug=f,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Tw(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(i.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");i.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:n,viewport:r,transform:s,background:a}=this.params;this.gfx=new fh(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),i.#e.delete(this._canvas),this.callback(e||new am(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return Be(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),i.#e.delete(this._canvas),this.callback())))})}},kj="4.9.155",Ij="a4eb8407c";function RD(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function tm(i){return Math.max(0,Math.min(255,255*i))}var c1=class{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=tm(e),[e,e,e]}static G_HTML([e]){let t=RD(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(tm)}static RGB_HTML(e){return`#${e.map(RD).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[tm(1-Math.min(1,e+r)),tm(1-Math.min(1,n+r)),tm(1-Math.min(1,t+r))]}static CMYK_HTML(e){let t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){let r=1-e,s=1-t,a=1-n,o=Math.min(r,s,a);return["CMYK",r,s,a,o]}},Iw=class{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");let r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){wi("Abstract method `_createSVG` called.")}},pm=class extends Iw{_createSVG(e){return document.createElementNS(el,e)}},d1=class{static setupStorage(e,t,n,r,s){let a=r.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",o=>{r.setValue(t,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",o=>{r.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",o=>{r.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(let o of n.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{let l=o.target.options,d=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:s}){let{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(let[l,d]of Object.entries(a))if(d!=null)switch(l){case"class":d.length&&e.setAttribute(l,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,d)}o&&s.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){let t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,s=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:s,linkService:n});let o=s!=="richText",l=e.div;if(l.append(a),e.viewport){let f=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=f}o&&l.setAttribute("class","xfaLayer xfaFont");let d=[];if(r.children.length===0){if(r.value){let f=document.createTextNode(r.value);a.append(f),o&&hm.shouldBuildText(r.name)&&d.push(f)}return{textDivs:d}}let p=[[r,-1,a]];for(;p.length>0;){let[f,g,m]=p.at(-1);if(g+1===f.children.length){p.pop();continue}let x=f.children[++p.at(-1)[1]];if(x===null)continue;let{name:y}=x;if(y==="#text"){let b=document.createTextNode(x.value);d.push(b),m.append(b);continue}let S=x?.attributes?.xmlns?document.createElementNS(x.attributes.xmlns,y):document.createElement(y);if(m.append(S),x.attributes&&this.setAttributes({html:S,element:x,storage:t,intent:s,linkService:n}),x.children?.length>0)p.push([x,-1,S]);else if(x.value){let b=document.createTextNode(x.value);o&&hm.shouldBuildText(y)&&d.push(b),S.append(b)}}for(let f of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){let t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}},vm=1e3,Dj=9,Ad=new WeakSet;function fc(i){return{width:i[2]-i[0],height:i[3]-i[1]}}var Dw=class{static create(e){switch(e.data.annotationType){case Er.LINK:return new u1(e);case Er.TEXT:return new Pw(e);case Er.WIDGET:switch(e.data.fieldType){case"Tx":return new Rw(e);case"Btn":return e.data.radioButton?new h1(e):e.data.checkBox?new Ow(e):new Nw(e);case"Ch":return new Fw(e);case"Sig":return new Lw(e)}return new il(e);case Er.POPUP:return new fm(e);case Er.FREETEXT:return new p1(e);case Er.LINE:return new Vw(e);case Er.SQUARE:return new Uw(e);case Er.CIRCLE:return new zw(e);case Er.POLYLINE:return new f1(e);case Er.CARET:return new Hw(e);case Er.INK:return new mm(e);case Er.POLYGON:return new jw(e);case Er.HIGHLIGHT:return new m1(e);case Er.UNDERLINE:return new Ww(e);case Er.SQUIGGLY:return new Gw(e);case Er.STRIKEOUT:return new qw(e);case Er.STAMP:return new g1(e);case Er.FILEATTACHMENT:return new Xw(e);default:return new lr(e)}}},lr=class i{#t=null;#e=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e?.str||t?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return i._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};let{rect:t}=e;t&&this.#i(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(e){let{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}}=this;n?.splice(0,4,...e);let{width:d,height:p}=fc(e);t.left=`${100*(e[0]-o)/s}%`,t.top=`${100*(a-e[3]+l)/a}%`,r===0?(t.width=`${100*d/s}%`,t.height=`${100*p/a}%`):this.setRotation(r)}_createContainer(e){let{data:t,parent:{page:n,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof il||(s.tabIndex=vm);let{style:a}=s;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof fm){let{rotation:y}=t;return!t.hasOwnCanvas&&y!==0&&this.setRotation(y,s),s}let{width:o,height:l}=fc(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;let y=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(y>0||S>0){let M=`calc(${y}px * var(--scale-factor)) / calc(${S}px * var(--scale-factor))`;a.borderRadius=M}else if(this instanceof h1){let M=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;a.borderRadius=M}switch(t.borderStyle.style){case Jf.SOLID:a.borderStyle="solid";break;case Jf.DASHED:a.borderStyle="dashed";break;case Jf.BEVELED:Ln("Unimplemented border style: beveled");break;case Jf.INSET:Ln("Unimplemented border style: inset");break;case Jf.UNDERLINE:a.borderBottomStyle="solid";break;default:break}let b=t.borderColor||null;b?(this.#e=!0,a.borderColor=qe.makeHexColor(b[0]|0,b[1]|0,b[2]|0)):a.borderWidth=0}let d=qe.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:f,pageX:g,pageY:m}=r.rawDims;a.left=`${100*(d[0]-g)/p}%`,a.top=`${100*(d[1]-m)/f}%`;let{rotation:x}=t;return t.hasOwnCanvas||x===0?(a.width=`${100*o/p}%`,a.height=`${100*l/f}%`):this.setRotation(x,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;let{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:s,height:a}=fc(this.data.rect),o,l;e%180===0?(o=100*s/n,l=100*a/r):(o=100*a/n,l=100*s/r),t.style.width=`${o}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){let e=(t,n,r)=>{let s=r.detail[t],a=s[0],o=s.slice(1);r.target.style[n]=c1[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:c1[`${a}_rgb`](o)})};return Un(this,"_commonActions",{display:t=>{let{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{let{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{let n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){let n=this._commonActions;for(let r of Object.keys(t.detail))(e[r]||n[r])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;let t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;let n=this._commonActions;for(let[r,s]of Object.entries(t)){let a=n[r];if(a){let o={detail:{[r]:s},target:e};a(o),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:e}=this.data;if(!e)return;let[t,n,r,s]=this.data.rect.map(y=>Math.fround(y));if(e.length===8){let[y,S,b,M]=e.subarray(2,6);if(r===y&&s===S&&t===b&&n===M)return}let{style:a}=this.container,o;if(this.#e){let{borderColor:y,borderWidth:S}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}let l=r-t,d=s-n,{svgFactory:p}=this,f=p.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);let g=p.createElement("defs");f.append(g);let m=p.createElement("clipPath"),x=`clippath_${this.data.id}`;m.setAttribute("id",x),m.setAttribute("clipPathUnits","objectBoundingBox"),g.append(m);for(let y=2,S=e.length;y<S;y+=8){let b=e[y],M=e[y+1],T=e[y+2],k=e[y+3],L=p.createElement("rect"),U=(T-t)/l,N=(s-M)/d,F=(b-T)/l,O=(M-k)/d;L.setAttribute("x",U),L.setAttribute("y",N),L.setAttribute("width",F),L.setAttribute("height",O),m.append(L),o?.push(`<rect vector-effect="non-scaling-stroke" x="${U}" y="${N}" width="${F}" height="${O}"/>`)}this.#e&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(f),this.container.style.clipPath=`url(#${x})`}_createPopup(){let{data:e}=this,t=this.#n=new fm({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){wi("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){let n=[];if(this._fieldObjects){let r=this._fieldObjects[e];if(r)for(let{page:s,id:a,exportValues:o}of r){if(s===-1||a===t)continue;let l=typeof o=="string"?o:null,d=document.querySelector(`[data-element-id="${a}"]`);if(d&&!Ad.has(d)){Ln(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:l,domElement:d})}return n}for(let r of document.getElementsByName(e)){let{exportValue:s}=r,a=r.getAttribute("data-element-id");a!==t&&Ad.has(r)&&n.push({id:a,exportValue:s,domElement:r})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(let t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}},u1=class extends lr{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){let{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action),r=!0):e.attachment?(this.#e(n,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(this.#n(n,e.setOCGState),r=!0):e.dest?(this._bindLink(n,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#t()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#t()}#e(e,t,n=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,n),!1),this.#t()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#t()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");let n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let r of Object.keys(t.actions)){let s=n.get(r);s&&(e[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1))}e.onclick||(e.onclick=()=>!1),this.#t()}_bindResetFormAction(e,t){let n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Ln('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{n?.();let{fields:r,refs:s,include:a}=t,o=[];if(r.length!==0||s.length!==0){let p=new Set(s);for(let f of r){let g=this._fieldObjects[f]||[];for(let{id:m}of g)p.add(m)}for(let f of Object.values(this._fieldObjects))for(let g of f)p.has(g.id)===a&&o.push(g)}else for(let p of Object.values(this._fieldObjects))o.push(...p);let l=this.annotationStorage,d=[];for(let p of o){let{id:f}=p;switch(d.push(f),p.type){case"text":{let m=p.defaultValue||"";l.setValue(f,{value:m});break}case"checkbox":case"radiobutton":{let m=p.defaultValue===p.exportValues;l.setValue(f,{value:m});break}case"combobox":case"listbox":{let m=p.defaultValue||"";l.setValue(f,{value:m});break}default:continue}let g=document.querySelector(`[data-element-id="${f}"]`);if(g){if(!Ad.has(g)){Ln(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}},Pw=class extends lr{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}},il=class extends lr{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return qr.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,s){n.includes("mouse")?e.addEventListener(n,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a)}})})}_setEventListeners(e,t,n,r){for(let[s,a]of n)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,s,a,r),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){let t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":qe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){let t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||Dj,s=e.style,a,o=2,l=d=>Math.round(10*d)/10;if(this.data.multiLine){let d=Math.abs(this.data.rect[3]-this.data.rect[1]-o),p=Math.round(d/(H_*r))||1,f=d/p;a=Math.min(r,l(f/H_))}else{let d=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(r,l(d/H_))}s.fontSize=`calc(${a}px * var(--scale-factor))`,s.color=qe.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}},Rw=class extends il{constructor(e){let t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){let s=this.annotationStorage;for(let a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),s.setValue(a.id,{[r]:n})}render(){let e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){let r=e.getValue(t,{value:this.data.fieldValue}),s=r.value||"",a=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;a&&s.length>a&&(s=s.slice(0,a));let o=r.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));let l={userValue:s,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=o??s,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",o??s),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Ad.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=vm,this._setRequired(n,this.data.required),a&&(n.maxLength=a),n.addEventListener("input",p=>{e.setValue(t,{value:p.target.value}),this.setPropertyOnSiblings(n,"value",p.target.value,"value"),l.formattedValue=null}),n.addEventListener("resetform",p=>{let f=this.data.defaultFieldValue??"";n.value=l.userValue=f,l.formattedValue=null});let d=p=>{let{formattedValue:f}=l;f!=null&&(p.target.value=f),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",f=>{if(l.focused)return;let{target:g}=f;l.userValue&&(g.value=l.userValue),l.lastCommittedValue=g.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),n.addEventListener("updatefromsandbox",f=>{this.showElementAndHideCanvas(f.target);let g={value(m){l.userValue=m.detail.value??"",e.setValue(t,{value:l.userValue.toString()}),m.target.value=l.userValue},formattedValue(m){let{formattedValue:x}=m.detail;l.formattedValue=x,x!=null&&m.target!==document.activeElement&&(m.target.value=x),e.setValue(t,{formattedValue:x})},selRange(m){m.target.setSelectionRange(...m.detail.selRange)},charLimit:m=>{let{charLimit:x}=m.detail,{target:y}=m;if(x===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",x);let S=l.userValue;!S||S.length<=x||(S=S.slice(0,x),y.value=l.userValue=S,e.setValue(t,{value:S}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(g,f)}),n.addEventListener("keydown",f=>{l.commitKey=1;let g=-1;if(f.key==="Escape"?g=0:f.key==="Enter"&&!this.data.multiLine?g=2:f.key==="Tab"&&(l.commitKey=3),g===-1)return;let{value:m}=f.target;l.lastCommittedValue!==m&&(l.lastCommittedValue=m,l.userValue=m,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:g,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}))});let p=d;d=null,n.addEventListener("blur",f=>{if(!l.focused||!f.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);let{value:g}=f.target;l.userValue=g,l.lastCommittedValue!==g&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:l.commitKey,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}),p(f)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",f=>{l.lastCommittedValue=null;let{data:g,target:m}=f,{value:x,selectionStart:y,selectionEnd:S}=m,b=y,M=S;switch(f.inputType){case"deleteWordBackward":{let T=x.substring(0,y).match(/\w*[^\w]*$/);T&&(b-=T[0].length);break}case"deleteWordForward":{let T=x.substring(y).match(/^[^\w]*\w*/);T&&(M+=T[0].length);break}case"deleteContentBackward":y===S&&(b-=1);break;case"deleteContentForward":y===S&&(M+=1);break}f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,change:g||"",willCommit:!1,selStart:b,selEnd:M}})}),this._setEventListeners(n,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.value)}if(d&&n.addEventListener("blur",d),this.data.comb){let f=(this.data.rect[2]-this.data.rect[0])/a;n.classList.add("comb"),n.style.letterSpacing=`calc(${f}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}},Lw=class extends il{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}},Ow=class extends il{constructor(e){super(e,{isRenderable:e.renderForms})}render(){let e=this.annotationStorage,t=this.data,n=t.id,r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let s=document.createElement("input");return Ad.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=vm,s.addEventListener("change",a=>{let{name:o,checked:l}=a.target;for(let d of this._getElementsByName(o,n)){let p=l&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=p),e.setValue(d.id,{value:p})}e.setValue(n,{value:l})}),s.addEventListener("resetform",a=>{let o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{let o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(n,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},h1=class extends il{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let e=this.annotationStorage,t=this.data,n=t.id,r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(let a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});let s=document.createElement("input");if(Ad.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=vm,s.addEventListener("change",a=>{let{name:o,checked:l}=a.target;for(let d of this._getElementsByName(o,n))e.setValue(d.id,{value:!1});e.setValue(n,{value:l})}),s.addEventListener("resetform",a=>{let o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){let a=t.buttonValue;s.addEventListener("updatefromsandbox",o=>{let l={value:d=>{let p=a===d.detail.value;for(let f of this._getElementsByName(d.target.name)){let g=p&&f.id===n;f.domElement&&(f.domElement.checked=g),e.setValue(f.id,{value:g})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},Nw=class extends u1{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){let e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");let t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}},Fw=class extends il{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Ad.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=vm;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{let f=this.data.defaultFieldValue;for(let g of r.options)g.selected=g.value===f});for(let p of this.data.options){let f=document.createElement("option");f.textContent=p.displayValue,f.value=p.exportValue,n.value.includes(p.exportValue)&&(f.setAttribute("selected",!0),s=!1),r.append(f)}let a=null;if(s){let p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),a=()=>{p.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}let o=p=>{let f=p?"value":"textContent",{options:g,multiple:m}=r;return m?Array.prototype.filter.call(g,x=>x.selected).map(x=>x[f]):g.selectedIndex===-1?null:g[g.selectedIndex][f]},l=o(!1),d=p=>{let f=p.target.options;return Array.prototype.map.call(f,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{let f={value(g){a?.();let m=g.detail.value,x=new Set(Array.isArray(m)?m:[m]);for(let y of r.options)y.selected=x.has(y.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(g){r.multiple=!0},remove(g){let m=r.options,x=g.detail.remove;m[x].selected=!1,r.remove(x),m.length>0&&Array.prototype.findIndex.call(m,S=>S.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:o(!0),items:d(g)}),l=o(!1)},clear(g){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(g){let{index:m,displayValue:x,exportValue:y}=g.detail.insert,S=r.children[m],b=document.createElement("option");b.textContent=x,b.value=y,S?S.before(b):r.append(b),e.setValue(t,{value:o(!0),items:d(g)}),l=o(!1)},items(g){let{items:m}=g.detail;for(;r.length!==0;)r.remove(0);for(let x of m){let{displayValue:y,exportValue:S}=x,b=document.createElement("option");b.textContent=y,b.value=S,r.append(b)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:o(!0),items:d(g)}),l=o(!1)},indices(g){let m=new Set(g.detail.indices);for(let x of g.target.options)x.selected=m.has(x.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(f,p)}),r.addEventListener("input",p=>{let f=o(!0),g=o(!1);e.setValue(t,{value:f}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:g,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}},fm=class extends lr{constructor(e){let{data:t,elements:n}=e;super(e,{isRenderable:lr._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");let e=this.popup=new Bw({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(let n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${sC}${n}`).join(",")),this.container}},Bw=class{#t=this.#E.bind(this);#e=this.#A.bind(this);#n=this.#k.bind(this);#i=this.#S.bind(this);#s=null;#r=null;#c=null;#o=null;#d=null;#l=null;#u=null;#a=!1;#h=null;#p=null;#f=null;#g=null;#m=null;#_=null;#v=!1;constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:d,parentRect:p,open:f}){this.#r=e,this.#m=r,this.#c=a,this.#g=o,this.#l=l,this.#s=t,this.#f=d,this.#u=p,this.#d=n,this.#o=$_.toDateObject(s),this.trigger=n.flatMap(g=>g.getElementsToTriggerPopup());for(let g of this.trigger)g.addEventListener("click",this.#i),g.addEventListener("mouseenter",this.#n),g.addEventListener("mouseleave",this.#e),g.classList.add("popupTriggerArea");for(let g of n)g.container?.addEventListener("keydown",this.#t);this.#r.hidden=!0,f&&this.#S()}render(){if(this.#h)return;let e=this.#h=document.createElement("div");if(e.className="popup",this.#s){let s=e.style.outlineColor=qe.makeHexColor(...this.#s);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=qe.makeHexColor(...this.#s.map(o=>Math.floor(.7*(255-o)+o)))}let t=document.createElement("span");t.className="header";let n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=this.#m,e.append(t),this.#o){let s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),t.append(s)}let r=this.#b;if(r)d1.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{let s=this._formatContents(this.#c);e.append(s)}this.#r.append(e)}get#b(){let e=this.#g,t=this.#c;return e?.str&&(!t?.str||t.str===e.str)&&this.#g.html||null}get#y(){return this.#b?.attributes?.style?.fontSize||0}get#C(){return this.#b?.attributes?.style?.color||null}#M(e){let t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:this.#C,fontSize:this.#y?`calc(${this.#y}px * var(--scale-factor))`:""}};for(let s of e.split(`
`))t.push({name:"span",value:s,attributes:r});return n}_formatContents({str:e,dir:t}){let n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;let r=e.split(/(?:\r\n?|\n)/);for(let s=0,a=r.length;s<a;++s){let o=r[s];n.append(document.createTextNode(o)),s<a-1&&n.append(document.createElement("br"))}return n}#E(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#a)&&this.#S()}updateEdited({rect:e,popupContent:t}){this.#_||={contentsObj:this.#c,richText:this.#g},e&&(this.#p=null),t&&(this.#g=this.#M(t),this.#c=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#_&&({contentsObj:this.#c,richText:this.#g}=this.#_,this.#_=null,this.#h?.remove(),this.#h=null,this.#p=null)}#T(){if(this.#p!==null)return;let{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:s}}}=this.#l,a=!!this.#u,o=a?this.#u:this.#f;for(let x of this.#d)if(!o||qe.intersect(x.data.rect,o)!==null){o=x.data.rect,a=!0;break}let l=qe.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),p=a?o[2]-o[0]+5:0,f=l[0]+p,g=l[1];this.#p=[100*(f-r)/t,100*(g-s)/n];let{style:m}=this.#r;m.left=`${this.#p[0]}%`,m.top=`${this.#p[1]}%`}#S(){this.#a=!this.#a,this.#a?(this.#k(),this.#r.addEventListener("click",this.#i),this.#r.addEventListener("keydown",this.#t)):(this.#A(),this.#r.removeEventListener("click",this.#i),this.#r.removeEventListener("keydown",this.#t))}#k(){this.#h||this.render(),this.isVisible?this.#a&&this.#r.classList.add("focused"):(this.#T(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#A(){this.#r.classList.remove("focused"),!(this.#a||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#v=this.isVisible,this.#v&&(this.#r.hidden=!0)}maybeShow(){this.#v&&(this.#h||this.#k(),this.#v=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}},p1=class extends lr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Tn.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(let t of this.textContent){let n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},Vw=class extends lr{#t=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let e=this.data,{width:t,height:n}=fc(e.rect),r=this.svgFactory.create(t,n,!0),s=this.#t=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},Uw=class extends lr{#t=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let e=this.data,{width:t,height:n}=fc(e.rect),r=this.svgFactory.create(t,n,!0),s=e.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",t-s),a.setAttribute("height",n-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},zw=class extends lr{#t=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let e=this.data,{width:t,height:n}=fc(e.rect),r=this.svgFactory.create(t,n,!0),s=e.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",t/2),a.setAttribute("cy",n/2),a.setAttribute("rx",t/2-s/2),a.setAttribute("ry",n/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},f1=class extends lr{#t=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,vertices:t,borderStyle:n,popupRef:r}}=this;if(!t)return this.container;let{width:s,height:a}=fc(e),o=this.svgFactory.create(s,a,!0),l=[];for(let p=0,f=t.length;p<f;p+=2){let g=t[p]-e[0],m=e[3]-t[p+1];l.push(`${g},${m}`)}l=l.join(" ");let d=this.#t=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",l),d.setAttribute("stroke-width",n.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),o.append(d),this.container.append(o),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},jw=class extends f1{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},Hw=class extends lr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},mm=class extends lr{#t=null;#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Tn.HIGHLIGHT:Tn.INK}#n(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,rotation:t,inkLists:n,borderStyle:r,popupRef:s}}=this,{transform:a,width:o,height:l}=this.#n(t,e),d=this.svgFactory.create(o,l,!0),p=this.#t=this.svgFactory.createElement("svg:g");d.append(p),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",a);for(let f=0,g=n.length;f<g;f++){let m=this.svgFactory.createElement(this.svgElementName);this.#e.push(m),m.setAttribute("points",n[f].join(",")),p.append(m)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);let{thickness:t,points:n,rect:r}=e,s=this.#t;if(t>=0&&s.setAttribute("stroke-width",t||1),n)for(let a=0,o=this.#e.length;a<o;a++)this.#e[a].setAttribute("points",n[a].join(","));if(r){let{transform:a,width:o,height:l}=this.#n(this.data.rotation,r);s.parentElement.setAttribute("viewBox",`0 0 ${o} ${l}`),s.setAttribute("transform",a)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},m1=class extends lr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Tn.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}},Ww=class extends lr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}},Gw=class extends lr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}},qw=class extends lr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}},g1=class extends lr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Tn.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},Xw=class extends lr{#t=null;constructor(e){super(e,{isRenderable:!0});let{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",Se({source:this},t))}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:e,data:t}=this,n;t.hasAppearance||t.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;let{isMac:r}=qr.platform;return e.addEventListener("keydown",s=>{s.key==="Enter"&&(r?s.metaKey:s.ctrlKey)&&this.#e()}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}},Yw=class{#t=null;#e=null;#n=new Map;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:o}){this.div=e,this.#t=t,this.#e=n,this.#i=o||null,this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#n.size>0}#s(e,t){return Be(this,null,function*(){let n=e.firstChild||e,r=n.id=`${sC}${t}`,s=yield this.#i?.getAriaAttributes(r);if(s)for(let[a,o]of s)n.setAttribute(a,o);this.div.append(e),this.#t?.moveElementInDOM(this.div,e,n,!1)})}render(e){return Be(this,null,function*(){let{annotations:t}=e,n=this.div;Md(n,this.viewport);let r=new Map,s={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new pm,annotationStorage:e.annotationStorage||new cm,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(let a of t){if(a.noHTML)continue;let o=a.annotationType===Er.POPUP;if(o){let p=r.get(a.id);if(!p)continue;s.elements=p}else{let{width:p,height:f}=fc(a.rect);if(p<=0||f<=0)continue}s.data=a;let l=Dw.create(s);if(!l.isRenderable)continue;if(!o&&a.popupRef){let p=r.get(a.popupRef);p?p.push(l):r.set(a.popupRef,[l])}let d=l.render();a.hidden&&(d.style.visibility="hidden"),yield this.#s(d,a.id),l._isEditable&&(this.#n.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#r()})}update({viewport:e}){let t=this.div;this.viewport=e,Md(t,{rotation:e.rotation}),this.#r(),t.hidden=!1}#r(){if(!this.#e)return;let e=this.div;for(let[t,n]of this.#e){let r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;n.className="annotationContent";let{firstChild:s}=r;s?s.nodeName==="CANVAS"?s.replaceWith(n):s.classList.contains("annotationContent")?s.after(n):s.before(n):r.append(n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}},j_=/\r\n?|\n/g,$w=class i extends qi{#t;#e="";#n=`${this.id}-editor`;#i=null;#s;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let e=i.prototype,t=s=>s.isEmpty(),n=lm.TRANSLATE_SMALL,r=lm.TRANSLATE_BIG;return Un(this,"_keyboardManager",new Ed([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}static _type="freetext";static _editorType=Tn.FREETEXT;constructor(e){super(In(Se({},e),{name:"freeTextEditor"})),this.#t=e.color||i._defaultColor||qi._defaultLineColor,this.#s=e.fontSize||i._defaultFontSize}static initialize(e,t){qi.initialize(e,t);let n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Wn.FREETEXT_SIZE:i._defaultFontSize=t;break;case Wn.FREETEXT_COLOR:i._defaultColor=t;break}}updateParams(e,t){switch(e){case Wn.FREETEXT_SIZE:this.#r(t);break;case Wn.FREETEXT_COLOR:this.#c(t);break}}static get defaultPropertiesToUpdate(){return[[Wn.FREETEXT_SIZE,i._defaultFontSize],[Wn.FREETEXT_COLOR,i._defaultColor||qi._defaultLineColor]]}get propertiesToUpdate(){return[[Wn.FREETEXT_SIZE,this.#s],[Wn.FREETEXT_COLOR,this.#t]]}#r(e){let t=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-this.#s)*this.parentScale),this.#s=r,this.#d()},n=this.#s;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#c(e){let t=r=>{this.#t=this.editorDiv.style.color=r},n=this.#t;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){let e=this.parentScale;return[-i._internalPadding*e,-(i._internalPadding+this.#s)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Tn.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;let e=this._uiManager.combinedSignal(this.#i);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){let e=[];this.editorDiv.normalize();let t=null;for(let n of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(e.push(i.#l(n)),t=n);return e.join(`
`)}#d(){let[e,t]=this.parentDimensions,n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{let{currentLayer:r,div:s}=this,a=s.style.display,o=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",r.div.append(this.div),n=s.getBoundingClientRect(),s.remove(),s.style.display=a,s.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let e=this.#e,t=this.#e=this.#o().trimEnd();if(e===t)return;let n=r=>{if(this.#e=r,!r){this.remove();return}this.#u(),this._uiManager.rebuild(this),this.#d()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),this.#d()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){i._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#s}px * var(--scale-factor))`,n.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),K_(this,this.div,["dblclick","keydown"]),this.width){let[r,s]=this.parentDimensions;if(this.annotationElementId){let{position:a}=this._initialData,[o,l]=this.getInitialTranslation();[o,l]=this.pageTranslationToScreen(o,l);let[d,p]=this.pageDimensions,[f,g]=this.pageTranslation,m,x;switch(this.rotation){case 0:m=e+(a[0]-f)/d,x=t+this.height-(a[1]-g)/p;break;case 90:m=e+(a[0]-f)/d,x=t-(a[1]-g)/p,[o,l]=[l,-o];break;case 180:m=e-this.width+(a[0]-f)/d,x=t-(a[1]-g)/p,[o,l]=[-o,-l];break;case 270:m=e+(a[0]-f-this.height*p)/d,x=t+(a[1]-g-this.width*d)/p,[o,l]=[-l,o];break}this.setAt(m*r,x*s,o,l)}else this.setAt(e*r,t*s,this.width*r,this.height*s);this.#u(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#l(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(j_,"")}editorDivPaste(e){let t=e.clipboardData||window.clipboardData,{types:n}=t;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();let r=i.#h(t.getData("text")||"").replaceAll(j_,`
`);if(!r)return;let s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();let a=s.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),s.collapseToStart();return}let{startContainer:o,startOffset:l}=a,d=[],p=[];if(o.nodeType===Node.TEXT_NODE){let m=o.parentElement;if(p.push(o.nodeValue.slice(l).replaceAll(j_,"")),m!==this.editorDiv){let x=d;for(let y of this.editorDiv.childNodes){if(y===m){x=p;continue}x.push(i.#l(y))}}d.push(o.nodeValue.slice(0,l).replaceAll(j_,""))}else if(o===this.editorDiv){let m=d,x=0;for(let y of this.editorDiv.childNodes)x++===l&&(m=p),m.push(i.#l(y))}this.#e=`${d.join(`
`)}${r}${p.join(`
`)}`,this.#u();let f=new Range,g=d.reduce((m,x)=>m+x.length,0);for(let{firstChild:m}of this.editorDiv.childNodes)if(m.nodeType===Node.TEXT_NODE){let x=m.nodeValue.length;if(g<=x){f.setStart(m,g),f.setEnd(m,g);break}g-=x}s.removeAllRanges(),s.addRange(f)}#u(){if(this.editorDiv.replaceChildren(),!!this.#e)for(let e of this.#e.split(`
`)){let t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#a(){return this.#e.replaceAll("\xA0"," ")}static#h(e){return e.replaceAll(" ","\xA0")}get contentDiv(){return this.editorDiv}static deserialize(e,t,n){return Be(this,null,function*(){let r=null;if(e instanceof p1){let{data:{defaultAppearanceData:{fontSize:a,fontColor:o},rect:l,rotation:d,id:p,popupRef:f},textContent:g,textPosition:m,parent:{page:{pageNumber:x}}}=e;if(!g||g.length===0)return null;r=e={annotationType:Tn.FREETEXT,color:Array.from(o),fontSize:a,value:g.join(`
`),position:m,pageIndex:x-1,rect:l.slice(0),rotation:d,id:p,deleted:!1,popupRef:f}}let s=yield Kc(i,this,"deserialize").call(this,e,t,n);return s.#s=e.fontSize,s.#t=qe.makeHexColor(...e.color),s.#e=i.#h(e.value),s.annotationElementId=e.id||null,s._initialData=r,s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let t=i._internalPadding*this.parentScale,n=this.getRect(t,t),r=qi._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),s={annotationType:Tn.FREETEXT,color:r,fontSize:this.#s,value:this.#a(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?s:this.annotationElementId&&!this.#p(s)?null:(s.id=this.annotationElementId,s)}#p(e){let{value:t,fontSize:n,color:r,pageIndex:s}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((a,o)=>a!==r[o])||e.pageIndex!==s}renderAnnotationElement(e){let t=super.renderAnnotationElement(e);if(this.deleted)return t;let{style:n}=t;n.fontSize=`calc(${this.#s}px * var(--scale-factor))`,n.color=this.#t,t.replaceChildren();for(let s of this.#e.split(`
`)){let a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),t.append(a)}let r=i._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:this.#e}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}},ze=(()=>{class i{static PRECISION=1e-4;toSVGPath(){wi("Abstract method `toSVGPath` must be implemented.")}get box(){wi("Abstract getter `box` must be implemented.")}serialize(t,n){wi("Abstract method `serialize` must be implemented.")}static _rescale(t,n,r,s,a,o){o||=new Float32Array(t.length);for(let l=0,d=t.length;l<d;l+=2)o[l]=n+t[l]*s,o[l+1]=r+t[l+1]*a;return o}static _rescaleAndSwap(t,n,r,s,a,o){o||=new Float32Array(t.length);for(let l=0,d=t.length;l<d;l+=2)o[l]=n+t[l+1]*s,o[l+1]=r+t[l]*a;return o}static _translate(t,n,r,s){s||=new Float32Array(t.length);for(let a=0,o=t.length;a<o;a+=2)s[a]=n+t[a],s[a+1]=r+t[a+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,n,r,s,a){switch(a){case 90:return[1-n/r,t/s];case 180:return[1-t/r,1-n/s];case 270:return[n/r,1-t/s];default:return[t/r,n/s]}}static _normalizePagePoint(t,n,r){switch(r){case 90:return[1-n,t];case 180:return[1-t,1-n];case 270:return[n,1-t];default:return[t,n]}}static createBezierPoints(t,n,r,s,a,o){return[(t+5*r)/6,(n+5*s)/6,(5*r+a)/6,(5*s+o)/6,(r+a)/2,(s+o)/2]}}return i})(),_1=class i{#t;#e=[];#n;#i;#s=[];#r=new Float32Array(18);#c;#o;#d;#l;#u;#a;#h=[];static#p=8;static#f=2;static#g=i.#p+i.#f;constructor({x:e,y:t},n,r,s,a,o=0){this.#t=n,this.#a=s*r,this.#i=a,this.#r.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=o,this.#l=i.#p*r,this.#d=i.#g*r,this.#u=r,this.#h.push(e,t)}isEmpty(){return isNaN(this.#r[8])}#m(){let e=this.#r.subarray(4,6),t=this.#r.subarray(16,18),[n,r,s,a]=this.#t;return[(this.#c+(e[0]-t[0])/2-n)/s,(this.#o+(e[1]-t[1])/2-r)/a,(this.#c+(t[0]-e[0])/2-n)/s,(this.#o+(t[1]-e[1])/2-r)/a]}add({x:e,y:t}){this.#c=e,this.#o=t;let[n,r,s,a]=this.#t,[o,l,d,p]=this.#r.subarray(8,12),f=e-d,g=t-p,m=Math.hypot(f,g);if(m<this.#d)return!1;let x=m-this.#l,y=x/m,S=y*f,b=y*g,M=o,T=l;o=d,l=p,d+=S,p+=b,this.#h?.push(e,t);let k=-b/x,L=S/x,U=k*this.#a,N=L*this.#a;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([d+U,p+N],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([d-U,p-N],16),isNaN(this.#r[6])?(this.#s.length===0&&(this.#r.set([o+U,l+N],2),this.#s.push(NaN,NaN,NaN,NaN,(o+U-n)/s,(l+N-r)/a),this.#r.set([o-U,l-N],14),this.#e.push(NaN,NaN,NaN,NaN,(o-U-n)/s,(l-N-r)/a)),this.#r.set([M,T,o,l,d,p],6),!this.isEmpty()):(this.#r.set([M,T,o,l,d,p],6),Math.abs(Math.atan2(T-l,M-o)-Math.atan2(b,S))<Math.PI/2?([o,l,d,p]=this.#r.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((o+d)/2-n)/s,((l+p)/2-r)/a),[o,l,M,T]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((M+o)/2-n)/s,((T+l)/2-r)/a),!0):([M,T,o,l,d,p]=this.#r.subarray(0,6),this.#s.push(((M+5*o)/6-n)/s,((T+5*l)/6-r)/a,((5*o+d)/6-n)/s,((5*l+p)/6-r)/a,((o+d)/2-n)/s,((l+p)/2-r)/a),[d,p,o,l,M,T]=this.#r.subarray(12,18),this.#e.push(((M+5*o)/6-n)/s,((T+5*l)/6-r)/a,((5*o+d)/6-n)/s,((5*l+p)/6-r)/a,((o+d)/2-n)/s,((l+p)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";let e=this.#s,t=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#_();let n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);this.#b(n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return this.#v(n),n.join(" ")}#_(){let[e,t,n,r]=this.#t,[s,a,o,l]=this.#m();return`M${(this.#r[2]-e)/n} ${(this.#r[3]-t)/r} L${(this.#r[4]-e)/n} ${(this.#r[5]-t)/r} L${s} ${a} L${o} ${l} L${(this.#r[16]-e)/n} ${(this.#r[17]-t)/r} L${(this.#r[14]-e)/n} ${(this.#r[15]-t)/r} Z`}#v(e){let t=this.#e;e.push(`L${t[4]} ${t[5]} Z`)}#b(e){let[t,n,r,s]=this.#t,a=this.#r.subarray(4,6),o=this.#r.subarray(16,18),[l,d,p,f]=this.#m();e.push(`L${(a[0]-t)/r} ${(a[1]-n)/s} L${l} ${d} L${p} ${f} L${(o[0]-t)/r} ${(o[1]-n)/s}`)}newFreeDrawOutline(e,t,n,r,s,a){return new v1(e,t,n,r,s,a)}getOutlines(){let e=this.#s,t=this.#e,n=this.#r,[r,s,a,o]=this.#t,l=new Float32Array((this.#h?.length??0)+2);for(let f=0,g=l.length-2;f<g;f+=2)l[f]=(this.#h[f]-r)/a,l[f+1]=(this.#h[f+1]-s)/o;if(l[l.length-2]=(this.#c-r)/a,l[l.length-1]=(this.#o-s)/o,isNaN(n[6])&&!this.isEmpty())return this.#y(l);let d=new Float32Array(this.#s.length+24+this.#e.length),p=e.length;for(let f=0;f<p;f+=2){if(isNaN(e[f])){d[f]=d[f+1]=NaN;continue}d[f]=e[f],d[f+1]=e[f+1]}p=this.#M(d,p);for(let f=t.length-6;f>=6;f-=6)for(let g=0;g<6;g+=2){if(isNaN(t[f+g])){d[p]=d[p+1]=NaN,p+=2;continue}d[p]=t[f+g],d[p+1]=t[f+g+1],p+=2}return this.#C(d,p),this.newFreeDrawOutline(d,l,this.#t,this.#u,this.#n,this.#i)}#y(e){let t=this.#r,[n,r,s,a]=this.#t,[o,l,d,p]=this.#m(),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-n)/s,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-n)/s,(t[5]-r)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,(t[16]-n)/s,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-n)/s,(t[15]-r)/a],0),this.newFreeDrawOutline(f,e,this.#t,this.#u,this.#n,this.#i)}#C(e,t){let n=this.#e;return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6}#M(e,t){let n=this.#r.subarray(4,6),r=this.#r.subarray(16,18),[s,a,o,l]=this.#t,[d,p,f,g]=this.#m();return e.set([NaN,NaN,NaN,NaN,(n[0]-s)/o,(n[1]-a)/l,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(r[0]-s)/o,(r[1]-a)/l],t),t+=24}},v1=class extends ze{#t;#e=new Float32Array(4);#n;#i;#s;#r;#c;constructor(e,t,n,r,s,a){super(),this.#c=e,this.#s=t,this.#t=n,this.#r=r,this.#n=s,this.#i=a,this.lastPoint=[NaN,NaN],this.#o(a);let[o,l,d,p]=this.#e;for(let f=0,g=e.length;f<g;f+=2)e[f]=(e[f]-o)/d,e[f+1]=(e[f+1]-l)/p;for(let f=0,g=t.length;f<g;f+=2)t[f]=(t[f]-o)/d,t[f+1]=(t[f+1]-l)/p}toSVGPath(){let e=[`M${this.#c[4]} ${this.#c[5]}`];for(let t=6,n=this.#c.length;t<n;t+=6){if(isNaN(this.#c[t])){e.push(`L${this.#c[t+4]} ${this.#c[t+5]}`);continue}e.push(`C${this.#c[t]} ${this.#c[t+1]} ${this.#c[t+2]} ${this.#c[t+3]} ${this.#c[t+4]} ${this.#c[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,n,r],s){let a=n-e,o=r-t,l,d;switch(s){case 0:l=ze._rescale(this.#c,e,r,a,-o),d=ze._rescale(this.#s,e,r,a,-o);break;case 90:l=ze._rescaleAndSwap(this.#c,e,t,a,o),d=ze._rescaleAndSwap(this.#s,e,t,a,o);break;case 180:l=ze._rescale(this.#c,n,t,-a,o),d=ze._rescale(this.#s,n,t,-a,o);break;case 270:l=ze._rescaleAndSwap(this.#c,n,r,-a,-o),d=ze._rescaleAndSwap(this.#s,n,r,-a,-o);break}return{outline:Array.from(l),points:[Array.from(d)]}}#o(e){let t=this.#c,n=t[4],r=t[5],s=n,a=r,o=n,l=r,d=n,p=r,f=e?Math.max:Math.min;for(let m=6,x=t.length;m<x;m+=6){if(isNaN(t[m]))s=Math.min(s,t[m+4]),a=Math.min(a,t[m+5]),o=Math.max(o,t[m+4]),l=Math.max(l,t[m+5]),p<t[m+5]?(d=t[m+4],p=t[m+5]):p===t[m+5]&&(d=f(d,t[m+4]));else{let y=qe.bezierBoundingBox(n,r,...t.slice(m,m+6));s=Math.min(s,y[0]),a=Math.min(a,y[1]),o=Math.max(o,y[2]),l=Math.max(l,y[3]),p<y[3]?(d=y[2],p=y[3]):p===y[3]&&(d=f(d,y[2]))}n=t[m+4],r=t[m+5]}let g=this.#e;g[0]=s-this.#n,g[1]=a-this.#n,g[2]=o-s+2*this.#n,g[3]=l-a+2*this.#n,this.lastPoint=[d,p]}get box(){return this.#e}newOutliner(e,t,n,r,s,a=0){return new _1(e,t,n,r,s,a)}getNewOutline(e,t){let[n,r,s,a]=this.#e,[o,l,d,p]=this.#t,f=s*d,g=a*p,m=n*d+o,x=r*p+l,y=this.newOutliner({x:this.#s[0]*f+m,y:this.#s[1]*g+x},this.#t,this.#r,e,this.#i,t??this.#n);for(let S=2;S<this.#s.length;S+=2)y.add({x:this.#s[S]*f+m,y:this.#s[S+1]*g+x});return y.getOutlines()}},gm=class{#t;#e;#n=[];#i=[];constructor(e,t=0,n=0,r=!0){let s=1/0,a=-1/0,o=1/0,l=-1/0,p=10**-4;for(let{x:b,y:M,width:T,height:k}of e){let L=Math.floor((b-t)/p)*p,U=Math.ceil((b+T+t)/p)*p,N=Math.floor((M-t)/p)*p,F=Math.ceil((M+k+t)/p)*p,O=[L,N,F,!0],B=[U,N,F,!1];this.#n.push(O,B),s=Math.min(s,L),a=Math.max(a,U),o=Math.min(o,N),l=Math.max(l,F)}let f=a-s+2*n,g=l-o+2*n,m=s-n,x=o-n,y=this.#n.at(r?-1:-2),S=[y[0],y[2]];for(let b of this.#n){let[M,T,k]=b;b[0]=(M-m)/f,b[1]=(T-x)/g,b[2]=(k-x)/g}this.#t=new Float32Array([m,x,f,g]),this.#e=S}getOutlines(){this.#n.sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);let e=[];for(let t of this.#n)t[3]?(e.push(...this.#d(t)),this.#c(t)):(this.#o(t),e.push(...this.#d(t)));return this.#s(e)}#s(e){let t=[],n=new Set;for(let a of e){let[o,l,d]=a;t.push([o,l,a],[o,d,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){let l=t[a][2],d=t[a+1][2];l.push(d),d.push(l),n.add(l),n.add(d)}let r=[],s;for(;n.size>0;){let a=n.values().next().value,[o,l,d,p,f]=a;n.delete(a);let g=o,m=l;for(s=[o,d],r.push(s);;){let x;if(n.has(p))x=p;else if(n.has(f))x=f;else break;n.delete(x),[o,l,d,p,f]=x,g!==o&&(s.push(g,m,o,m===l?l:d),g=o),m=m===l?d:l}s.push(g,m)}return new Kw(r,this.#t,this.#e)}#r(e){let t=this.#i,n=0,r=t.length-1;for(;n<=r;){let s=n+r>>1,a=t[s][0];if(a===e)return s;a<e?n=s+1:r=s-1}return r+1}#c([,e,t]){let n=this.#r(e);this.#i.splice(n,0,[e,t])}#o([,e,t]){let n=this.#r(e);for(let r=n;r<this.#i.length;r++){let[s,a]=this.#i[r];if(s!==e)break;if(s===e&&a===t){this.#i.splice(r,1);return}}for(let r=n-1;r>=0;r--){let[s,a]=this.#i[r];if(s!==e)break;if(s===e&&a===t){this.#i.splice(r,1);return}}}#d(e){let[t,n,r]=e,s=[[t,n,r]],a=this.#r(r);for(let o=0;o<a;o++){let[l,d]=this.#i[o];for(let p=0,f=s.length;p<f;p++){let[,g,m]=s[p];if(!(d<=g||m<=l)){if(g>=l){if(m>d)s[p][1]=d;else{if(f===1)return[];s.splice(p,1),p--,f--}continue}s[p][2]=l,m>d&&s.push([t,d,m])}}}return s}},Kw=class extends ze{#t;#e;constructor(e,t,n){super(),this.#e=e,this.#t=t,this.lastPoint=n}toSVGPath(){let e=[];for(let t of this.#e){let[n,r]=t;e.push(`M${n} ${r}`);for(let s=2;s<t.length;s+=2){let a=t[s],o=t[s+1];a===n?(e.push(`V${o}`),r=o):o===r&&(e.push(`H${a}`),n=a)}e.push("Z")}return e.join(" ")}serialize([e,t,n,r],s){let a=[],o=n-e,l=r-t;for(let d of this.#e){let p=new Array(d.length);for(let f=0;f<d.length;f+=2)p[f]=e+d[f]*o,p[f+1]=r-d[f+1]*l;a.push(p)}return a}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}},_m=class extends _1{newFreeDrawOutline(e,t,n,r,s,a){return new Zw(e,t,n,r,s,a)}},Zw=class extends v1{newOutliner(e,t,n,r,s,a=0){return new _m(e,t,n,r,s,a)}},x1=class i{#t=null;#e=null;#n;#i=null;#s=!1;#r=!1;#c=null;#o;#d=null;#l=null;#u;static#a=null;static get _keyboardManager(){return Un(this,"_keyboardManager",new Ed([[["Escape","mac+Escape"],i.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],i.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],i.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],i.prototype._moveToPrevious],[["Home","mac+Home"],i.prototype._moveToBeginning],[["End","mac+End"],i.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#r=!1,this.#u=Wn.HIGHLIGHT_COLOR,this.#c=e):(this.#r=!0,this.#u=Wn.HIGHLIGHT_DEFAULT_COLOR),this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#n=e?.color||this.#l?.highlightColors.values().next().value||"#FFFF98",i.#a||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){let e=this.#t=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);let t=this.#l._signal;e.addEventListener("click",this.#g.bind(this),{signal:t}),e.addEventListener("keydown",this.#f.bind(this),{signal:t});let n=this.#e=document.createElement("span");return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=this.#n,e.append(n),e}renderMainDropdown(){let e=this.#i=this.#h();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#h(){let e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",ja,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(let[n,r]of this.#l.highlightColors){let s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=n,s.setAttribute("data-l10n-id",i.#a[n]);let a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=r,s.setAttribute("aria-selected",r===this.#n),s.addEventListener("click",this.#p.bind(this,r),{signal:t}),e.append(s)}return e.addEventListener("keydown",this.#f.bind(this),{signal:t}),e}#p(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:this.#u,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#t){this.#g(e);return}let t=e.target.getAttribute("data-color");t&&this.#p(t,e)}_moveToNext(e){if(!this.#_){this.#g(e);return}if(e.target===this.#t){this.#i.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#i?.firstChild||e.target===this.#t){this.#_&&this._hideDropdownFromKeyboard();return}this.#_||this.#g(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#_){this.#g(e);return}this.#i.firstChild?.focus()}_moveToEnd(e){if(!this.#_){this.#g(e);return}this.#i.lastChild?.focus()}#f(e){i._keyboardManager.exec(this,e)}#g(e){if(this.#_){this.hideDropdown();return}if(this.#s=e.detail===0,this.#d||(this.#d=new AbortController,window.addEventListener("pointerdown",this.#m.bind(this),{signal:this.#l.combinedSignal(this.#d)})),this.#i){this.#i.classList.remove("hidden");return}let t=this.#i=this.#h();this.#t.append(t)}#m(e){this.#i?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#d?.abort(),this.#d=null}get#_(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#_){this.#c?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(e){if(this.#e&&(this.#e.style.backgroundColor=e),!this.#i)return;let t=this.#l.highlightColors.values();for(let n of this.#i.children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}},b1=class i extends qi{#t=null;#e=0;#n;#i=null;#s=null;#r=null;#c=null;#o=0;#d=null;#l=null;#u=null;#a=!1;#h=null;#p;#f=null;#g="";#m;#_="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Tn.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){let e=i.prototype;return Un(this,"_keyboardManager",new Ed([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super(In(Se({},e),{name:"highlightEditor"})),this.color=e.color||i._defaultColor,this.#m=e.thickness||i._defaultThickness,this.#p=e.opacity||i._defaultOpacity,this.#n=e.boxes||null,this.#_=e.methodOfCreation||"",this.#g=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#a=!0,this.#b(e),this.#T()):this.#n&&(this.#t=e.anchorNode,this.#e=e.anchorOffset,this.#c=e.focusNode,this.#o=e.focusOffset,this.#v(),this.#T(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#a?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#_}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#v(){let e=new gm(this.#n,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;let t=new gm(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=t.getOutlines();let{lastPoint:n}=this.#r;this.#h=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#b({highlightOutlines:e,highlightId:t,clipPathId:n}){this.#l=e;let r=1.5;if(this.#r=e.getNewOutline(this.#m/2+r,.0025),t>=0)this.#u=t,this.#i=n,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#f=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){let p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#u,{bbox:i.#S(this.#l.box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#f,{bbox:i.#S(this.#r.box,p),path:{d:this.#r.toSVGPath()}})}let[s,a,o,l]=e.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=o,this.height=l;break;case 90:{let[p,f]=this.parentDimensions;this.x=a,this.y=1-s,this.width=o*f/p,this.height=l*p/f;break}case 180:this.x=1-s,this.y=1-a,this.width=o,this.height=l;break;case 270:{let[p,f]=this.parentDimensions;this.x=1-a,this.y=s,this.width=o*f/p,this.height=l*p/f;break}}let{lastPoint:d}=this.#r;this.#h=[(d[0]-s)/o,(d[1]-a)/l]}static initialize(e,t){qi.initialize(e,t),i._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case Wn.HIGHLIGHT_DEFAULT_COLOR:i._defaultColor=t;break;case Wn.HIGHLIGHT_THICKNESS:i._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#h}updateParams(e,t){switch(e){case Wn.HIGHLIGHT_COLOR:this.#y(t);break;case Wn.HIGHLIGHT_THICKNESS:this.#C(t);break}}static get defaultPropertiesToUpdate(){return[[Wn.HIGHLIGHT_DEFAULT_COLOR,i._defaultColor],[Wn.HIGHLIGHT_THICKNESS,i._defaultThickness]]}get propertiesToUpdate(){return[[Wn.HIGHLIGHT_COLOR,this.color||i._defaultColor],[Wn.HIGHLIGHT_THICKNESS,this.#m||i._defaultThickness],[Wn.HIGHLIGHT_FREE,this.#a]]}#y(e){let t=(s,a)=>{this.color=s,this.#p=a,this.parent?.drawLayer.updateProperties(this.#u,{root:{fill:s,"fill-opacity":a}}),this.#s?.updateColor(s)},n=this.color,r=this.#p;this.addCommands({cmd:t.bind(this,e,i._defaultOpacity),undo:t.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#C(e){let t=this.#m,n=r=>{this.#m=r,this.#M(r)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}addEditToolbar(){return Be(this,null,function*(){let e=yield Kc(i.prototype,this,"addEditToolbar").call(this);return e?(this._uiManager.highlightColors&&(this.#s=new x1({editor:this}),e.addColorPicker(this.#s)),e):null})}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#I())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#I())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#E(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#T(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#E():e&&(this.#T(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#M(e){if(!this.#a)return;this.#b({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition();let[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}#E(){this.#u===null||!this.parent||(this.parent.drawLayer.remove(this.#u),this.#u=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#T(e=this.parent){this.#u===null&&({id:this.#u,clipPathId:this.#i}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#p},rootClass:{highlight:!0,free:this.#a},path:{d:this.#l.toSVGPath()}},!1,!0),this.#f=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#a},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#a),this.#d&&(this.#d.style.clipPath=this.#i))}static#S([e,t,n,r],s){switch(s){case 90:return[1-t-r,e,r,n];case 180:return[1-e-n,1-t-r,n,r];case 270:return[t,1-e-n,r,n]}return[e,t,n,r]}rotate(e){let{drawLayer:t}=this.parent,n;this.#a?(e=(e-this.rotation+360)%360,n=i.#S(this.#l.box,e)):n=i.#S([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#u,{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(this.#f,{bbox:i.#S(this.#r.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;let e=super.render();this.#g&&(e.setAttribute("aria-label",this.#g),e.setAttribute("role","mark")),this.#a?e.classList.add("free"):this.div.addEventListener("keydown",this.#k.bind(this),{signal:this._uiManager._signal});let t=this.#d=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#i;let[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),K_(this,this.#d,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1}})}#k(e){i._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#A(!0);break;case 1:case 3:this.#A(!1);break}}#A(e){if(!this.#t)return;let t=window.getSelection();e?t.setPosition(this.#t,this.#e):t.setPosition(this.#c,this.#o)}select(){super.select(),this.#f&&this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{selected:!1}}),this.#a||this.#A(!1))}get _mustFixPosition(){return!this.#a}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#u,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!e}}))}#I(){return this.#a?this.rotation:0}#L(){if(this.#a)return null;let[e,t]=this.pageDimensions,[n,r]=this.pageTranslation,s=this.#n,a=new Float32Array(s.length*8),o=0;for(let{x:l,y:d,width:p,height:f}of s){let g=l*e+n,m=(1-d)*t+r;a[o]=a[o+4]=g,a[o+1]=a[o+3]=m,a[o+2]=a[o+6]=g+p*e,a[o+5]=a[o+7]=m-f*t,o+=8}return a}#B(e){return this.#l.serialize(e,this.#I())}static startHighlighting(e,t,{target:n,x:r,y:s}){let{x:a,y:o,width:l,height:d}=n.getBoundingClientRect(),p=new AbortController,f=e.combinedSignal(p),g=m=>{p.abort(),this.#x(e,m)};window.addEventListener("blur",g,{signal:f}),window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("pointerdown",za,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",ja,{signal:f}),n.addEventListener("pointermove",this.#w.bind(this,e),{signal:f}),this._freeHighlight=new _m({x:r,y:s},[a,o,l,d],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#w(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#x(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(e,t,n){return Be(this,null,function*(){let r=null;if(e instanceof m1){let{data:{quadPoints:x,rect:y,rotation:S,id:b,color:M,opacity:T,popupRef:k},parent:{page:{pageNumber:L}}}=e;r=e={annotationType:Tn.HIGHLIGHT,color:Array.from(M),opacity:T,quadPoints:x,boxes:null,pageIndex:L-1,rect:y.slice(0),rotation:S,id:b,deleted:!1,popupRef:k}}else if(e instanceof mm){let{data:{inkLists:x,rect:y,rotation:S,id:b,color:M,borderStyle:{rawWidth:T},popupRef:k},parent:{page:{pageNumber:L}}}=e;r=e={annotationType:Tn.HIGHLIGHT,color:Array.from(M),thickness:T,inkLists:x,boxes:null,pageIndex:L-1,rect:y.slice(0),rotation:S,id:b,deleted:!1,popupRef:k}}let{color:s,quadPoints:a,inkLists:o,opacity:l}=e,d=yield Kc(i,this,"deserialize").call(this,e,t,n);d.color=qe.makeHexColor(...s),d.#p=l||1,o&&(d.#m=e.thickness),d.annotationElementId=e.id||null,d._initialData=r;let[p,f]=d.pageDimensions,[g,m]=d.pageTranslation;if(a){let x=d.#n=[];for(let y=0;y<a.length;y+=8)x.push({x:(a[y]-g)/p,y:1-(a[y+1]-m)/f,width:(a[y+2]-a[y])/p,height:(a[y+1]-a[y+5])/f});d.#v(),d.#T(),d.rotate(d.rotation)}else if(o){d.#a=!0;let x=o[0],y={x:x[0]-g,y:f-(x[1]-m)},S=new _m(y,[0,0,p,f],1,d.#m/2,!0,.001);for(let T=0,k=x.length;T<k;T+=2)y.x=x[T]-g,y.y=f-(x[T+1]-m),S.add(y);let{id:b,clipPathId:M}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);d.#b({highlightOutlines:S.getOutlines(),highlightId:b,clipPathId:M}),d.#T()}return d})}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();let t=this.getRect(0,0),n=qi._colorManager.convert(this.color),r={annotationType:Tn.HIGHLIGHT,color:n,opacity:this.#p,thickness:this.#m,quadPoints:this.#L(),outlines:this.#B(t),pageIndex:this.pageIndex,rect:t,rotation:this.#I(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#R(r)?null:(r.id=this.annotationElementId,r)}#R(e){let{color:t}=this._initialData;return e.color.some((n,r)=>n!==t[r])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}},Jw=class{#t=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(let[t,n]of Object.entries(e))this.updateProperty(t,n)}updateSVGProperty(e,t){this.#t[e]=t}toSVGProperties(){let e=this.#t;return this.#t=Object.create(null),{root:e}}reset(){this.#t=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){wi("Not implemented")}},Pj=(()=>{class i extends qi{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentDraw=null;static _currentDrawingOptions=null;static _currentParent=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,t.drawOutlines&&(this.#n(t),this.#r())}#n({drawOutlines:t,drawId:n,drawingOptions:r}){this.#t=t,this._drawingOptions||=r,n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=this.#i(t,this.parent),this.#d(t.box)}#i(t,n){let{id:r}=n.drawLayer.draw(i._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r}static _mergeSVGProperties(t,n){let r=new Set(Object.keys(t));for(let[s,a]of Object.entries(n))r.has(s)?Object.assign(t[s],a):t[s]=a;return t}static getDefaultDrawingOptions(t){wi("Not implemented")}static get typesMap(){wi("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){let r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(this._currentDraw.updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){let r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,n)}static get defaultPropertiesToUpdate(){let t=[],n=this._defaultDrawingOptions;for(let[r,s]of this.typesMap)t.push([r,n[s]]);return t}get propertiesToUpdate(){let t=[],{_drawingOptions:n}=this;for(let[r,s]of this.constructor.typesMap)t.push([r,n[s]]);return t}_updateProperty(t,n,r){let s=this._drawingOptions,a=s[n],o=l=>{s.updateProperty(n,l);let d=this.#t.updateProperty(n,l);d&&this.#d(d),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties())};this.addCommands({cmd:o.bind(this,r),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,i._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#o()),{bbox:this.#l()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,i._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#o()),{bbox:this.#l()}))}_onTranslating(t,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#l(t,n)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,i._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#o(),this.parentDimensions),{bbox:this.#l()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),this.isOnScreen&&this.div.focus())}remove(){this.#s(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#r(),this.#d(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#s()):t&&(this._uiManager.addShouldRescale(this),this.#r(t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),n&&this.select()}#s(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#r(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#i(this.#t,t)}}#c([t,n,r,s]){let{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[n,1-t,r*(o/a),s*(a/o)];case 180:return[1-t,1-n,r,s];case 270:return[1-n,t,r*(o/a),s*(a/o)];default:return[t,n,r,s]}}#o(){let{x:t,y:n,width:r,height:s,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-n,t,r*(a/o),s*(o/a)];case 180:return[1-t,1-n,r,s];case 270:return[n,1-t,r*(a/o),s*(o/a)];default:return[t,n,r,s]}}#d(t){if([this.x,this.y,this.width,this.height]=this.#c(t),this.div){this.fixAndSetPosition();let[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)}this._onResized()}#l(){let{x:t,y:n,width:r,height:s,rotation:a,parentRotation:o,parentDimensions:[l,d]}=this;switch((a*4+o)/90){case 1:return[1-n-s,t,s,r];case 2:return[1-t-r,1-n-s,r,s];case 3:return[n,1-t-r,s,r];case 4:return[t,n-r*(l/d),s*(d/l),r*(l/d)];case 5:return[1-n,t,r*(l/d),s*(d/l)];case 6:return[1-t-s*(d/l),1-n,s*(d/l),r*(l/d)];case 7:return[n-r*(l/d),1-t-s*(d/l),r*(l/d),s*(d/l)];case 8:return[t-r,n-s,r,s];case 9:return[1-n,t-r,s,r];case 10:return[1-t,1-n,r,s];case 11:return[n-s,1-t,s,r];case 12:return[t-s*(d/l),n,s*(d/l),r*(l/d)];case 13:return[1-n-r*(l/d),t-s*(d/l),r*(l/d),s*(d/l)];case 14:return[1-t,1-n-r*(l/d),s*(d/l),r*(l/d)];case 15:return[n,1-t,r*(l/d),s*(d/l)];default:return[t,n,r,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,i._mergeSVGProperties({bbox:this.#l()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t=super.render();t.classList.add("draw");let n=document.createElement("div");t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";let[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,n,r,s,a){wi("Not implemented")}static startDrawing(t,n,r,{target:s,offsetX:a,offsetY:o}){let{viewport:{rotation:l}}=t,{width:d,height:p}=s.getBoundingClientRect(),f=new AbortController,g=t.combinedSignal(f);if(window.addEventListener("pointerup",m=>{f.abort(),t.toggleDrawing(!0),this._endDraw(m)},{signal:g}),window.addEventListener("pointerdown",za,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",ja,{signal:g}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),t.toggleDrawing(),n._editorUndoBar?.hide(),this._currentDraw){t.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.startNew(a,o,d,p,l));return}n.updateUIForDefaultProperties(this),this._currentDraw=this.createDrawerInstance(a,o,d,p,l),this._currentDrawingOptions=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(this._currentDrawingOptions.toSVGProperties(),this._currentDraw.defaultSVGProperties),!0,!1)}static _drawMove({offsetX:t,offsetY:n}){this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.add(t,n))}static _endDraw({offsetX:t,offsetY:n}){let r=this._currentParent;if(r.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.end(t,n)),this.supportMultipleDrawings){let s=this._currentDraw,a=this._currentDrawId,o=s.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(a,s.setLastElement(o))},undo:()=>{r.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:Wn.DRAW_STEP});return}this.endDrawing(!1)}static endDrawing(t){let n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Wn.DRAW_STEP),!this._currentDraw.isEmpty()){let{pageDimensions:[r,s],scale:a}=n,o=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:this._currentDraw.getOutlines(r*a,s*a,a,this._INNER_MARGIN),drawingOptions:this._currentDrawingOptions,mustBeCommitted:!t});return this._cleanup(),o}return n.drawLayer.remove(this._currentDrawId),this._cleanup(),null}static _cleanup(){this._currentDrawId=-1,this._currentDraw=null,this._currentDrawingOptions=null,this._currentParent=null}createDrawingOptions(t){}static deserializeDraw(t,n,r,s,a,o){wi("Not implemented")}static deserialize(t,n,r){return Be(this,null,function*(){let{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=n.viewport,d=this.deserializeDraw(o,l,s,a,this._INNER_MARGIN,t),p=yield Kc(i,this,"deserialize").call(this,t,n,r);return p.createDrawingOptions(t),p.#n({drawOutlines:d}),p.#r(),p.onScaleChanging(),p.rotate(),p})}serializeDraw(t){let[n,r]=this.pageTranslation,[s,a]=this.pageDimensions;return this.#t.serialize([n,r,s,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}return i})(),Qw=class{#t=new Float64Array(6);#e;#n;#i;#s;#r;#c="";#o=0;#d=new y1;#l;#u;constructor(e,t,n,r,s,a){this.#l=n,this.#u=r,this.#i=s,this.#s=a,[e,t]=this.#a(e,t);let o=this.#e=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t],this.#n=[{line:o,points:this.#r}],this.#t.set(o,0)}updateProperty(e,t){e==="stroke-width"&&(this.#s=t)}#a(e,t){return ze._normalizePoint(e,t,this.#l,this.#u,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}add(e,t){[e,t]=this.#a(e,t);let[n,r,s,a]=this.#t.subarray(2,6),o=e-s,l=t-a;return Math.hypot(this.#l*o,this.#u*l)<=2?null:(this.#r.push(e,t),isNaN(n)?(this.#t.set([s,a,e,t],2),this.#e.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,r,s,a,e,t],0),this.#e.push(...ze.createBezierPoints(n,r,s,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){let n=this.add(e,t);return n||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,s){this.#l=n,this.#u=r,this.#i=s,[e,t]=this.#a(e,t);let a=this.#e=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t];let o=this.#n.at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),this.#n.push({line:a,points:this.#r}),this.#t.set(a,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(e){return this.#n?(this.#n.push(e),this.#e=e.line,this.#r=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#d.setLastElement(e)}removeLastElement(){if(!this.#n)return this.#d.removeLastElement();this.#n.pop(),this.#c="";for(let e=0,t=this.#n.length;e<t;e++){let{line:n,points:r}=this.#n[e];this.#e=n,this.#r=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#c}}}toSVGPath(){let e=ze.svgRound(this.#e[4]),t=ze.svgRound(this.#e[5]);if(this.#r.length===2)return this.#c=`${this.#c} M ${e} ${t} Z`,this.#c;if(this.#r.length<=6){let r=this.#c.lastIndexOf("M");this.#c=`${this.#c.slice(0,r)} M ${e} ${t}`,this.#o=6}if(this.#r.length===4){let r=ze.svgRound(this.#e[10]),s=ze.svgRound(this.#e[11]);return this.#c=`${this.#c} L ${r} ${s}`,this.#o=12,this.#c}let n=[];this.#o===0&&(n.push(`M ${e} ${t}`),this.#o=6);for(let r=this.#o,s=this.#e.length;r<s;r+=6){let[a,o,l,d,p,f]=this.#e.slice(r,r+6).map(ze.svgRound);n.push(`C${a} ${o} ${l} ${d} ${p} ${f}`)}return this.#c+=n.join(" "),this.#o=this.#e.length,this.#c}getOutlines(e,t,n,r){let s=this.#n.at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),this.#d.build(this.#n,e,t,n,this.#i,this.#s,r),this.#t=null,this.#e=null,this.#n=null,this.#c=null,this.#d}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}},y1=class i extends ze{#t;#e=0;#n;#i;#s;#r;#c;#o;#d;build(e,t,n,r,s,a,o){this.#s=t,this.#r=n,this.#c=r,this.#o=s,this.#d=a,this.#n=o??0,this.#i=e,this.#a()}setLastElement(e){return this.#i.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let e=[];for(let{line:t}of this.#i){if(e.push(`M${ze.svgRound(t[4])} ${ze.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12){e.push(`L${ze.svgRound(t[10])} ${ze.svgRound(t[11])}`);continue}for(let n=6,r=t.length;n<r;n+=6){let[s,a,o,l,d,p]=t.subarray(n,n+6).map(ze.svgRound);e.push(`C${s} ${a} ${o} ${l} ${d} ${p}`)}}return e.join("")}serialize([e,t,n,r],s){let a=[],o=[],[l,d,p,f]=this.#u(),g,m,x,y,S,b,M,T,k;switch(this.#o){case 0:k=ze._rescale,g=e,m=t+r,x=n,y=-r,S=e+l*n,b=t+(1-d-f)*r,M=e+(l+p)*n,T=t+(1-d)*r;break;case 90:k=ze._rescaleAndSwap,g=e,m=t,x=n,y=r,S=e+d*n,b=t+l*r,M=e+(d+f)*n,T=t+(l+p)*r;break;case 180:k=ze._rescale,g=e+n,m=t,x=-n,y=r,S=e+(1-l-p)*n,b=t+d*r,M=e+(1-l)*n,T=t+(d+f)*r;break;case 270:k=ze._rescaleAndSwap,g=e+n,m=t+r,x=-n,y=-r,S=e+(1-d-f)*n,b=t+(1-l-p)*r,M=e+(1-d)*n,T=t+(1-l)*r;break}for(let{line:L,points:U}of this.#i)a.push(k(L,g,m,x,y,s?new Array(L.length):null)),o.push(k(U,g,m,x,y,s?new Array(U.length):null));return{lines:a,points:o,rect:[S,b,M,T]}}static deserialize(e,t,n,r,s,{paths:{lines:a,points:o},rotation:l,thickness:d}){let p=[],f,g,m,x,y;switch(l){case 0:y=ze._rescale,f=-e/n,g=t/r+1,m=1/n,x=-1/r;break;case 90:y=ze._rescaleAndSwap,f=-t/r,g=-e/n,m=1/r,x=1/n;break;case 180:y=ze._rescale,f=e/n+1,g=-t/r,m=-1/n,x=1/r;break;case 270:y=ze._rescaleAndSwap,f=t/r+1,g=e/n+1,m=-1/r,x=-1/n;break}if(!a){a=[];for(let b of o){let M=b.length;if(M===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(M===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}let T=new Float32Array(3*(M-2));a.push(T);let[k,L,U,N]=b.subarray(0,4);T.set([NaN,NaN,NaN,NaN,k,L],0);for(let F=4;F<M;F+=2){let O=b[F],B=b[F+1];T.set(ze.createBezierPoints(k,L,U,N,O,B),(F-2)*3),[k,L,U,N]=[U,N,O,B]}}}for(let b=0,M=a.length;b<M;b++)p.push({line:y(a[b].map(T=>T??NaN),f,g,m,x),points:y(o[b].map(T=>T??NaN),f,g,m,x)});let S=new i;return S.build(p,n,r,1,l,d,s),S}#l(e=this.#d){let t=this.#n+e/2*this.#c;return this.#o%180===0?[t/this.#s,t/this.#r]:[t/this.#r,t/this.#s]}#u(){let[e,t,n,r]=this.#t,[s,a]=this.#l(0);return[e+s,t+a,n-2*s,r-2*a]}#a(){let e=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(let{line:r}of this.#i){if(r.length<=12){for(let o=4,l=r.length;o<l;o+=6){let[d,p]=r.subarray(o,o+2);e[0]=Math.min(e[0],d),e[1]=Math.min(e[1],p),e[2]=Math.max(e[2],d),e[3]=Math.max(e[3],p)}continue}let s=r[4],a=r[5];for(let o=6,l=r.length;o<l;o+=6){let[d,p,f,g,m,x]=r.subarray(o,o+6);qe.bezierBoundingBox(s,a,d,p,f,g,m,x,e),s=m,a=x}}let[t,n]=this.#l();e[0]=Math.min(1,Math.max(0,e[0]-t)),e[1]=Math.min(1,Math.max(0,e[1]-n)),e[2]=Math.min(1,Math.max(0,e[2]+t)),e[3]=Math.min(1,Math.max(0,e[3]+n)),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#t}updateProperty(e,t){return e==="stroke-width"?this.#h(t):null}#h(e){let[t,n]=this.#l();this.#d=e;let[r,s]=this.#l(),[a,o]=[r-t,s-n],l=this.#t;return l[0]-=a,l[1]-=o,l[2]+=2*a,l[3]+=2*o,l}updateParentDimensions([e,t],n){let[r,s]=this.#l();this.#s=e,this.#r=t,this.#c=n;let[a,o]=this.#l(),l=a-r,d=o-s,p=this.#t;return p[0]-=l,p[1]-=d,p[2]+=2*l,p[3]+=2*d,p}updateRotation(e){return this.#e=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(ze.svgRound).join(" ")}get defaultProperties(){let[e,t]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ze.svgRound(e)} ${ze.svgRound(t)}`}}}get rotationTransform(){let[,,e,t]=this.#t,n=0,r=0,s=0,a=0,o=0,l=0;switch(this.#e){case 90:r=t/e,s=-e/t,o=e;break;case 180:n=-1,a=-1,o=e,l=t;break;case 270:r=-t/e,s=e/t,l=t;break;default:return""}return`matrix(${n} ${r} ${s} ${a} ${ze.svgRound(o)} ${ze.svgRound(l)})`}getPathResizingSVGProperties([e,t,n,r]){let[s,a]=this.#l(),[o,l,d,p]=this.#t;if(Math.abs(d-s)<=ze.PRECISION||Math.abs(p-a)<=ze.PRECISION){let y=e+n/2-(o+d/2),S=t+r/2-(l+p/2);return{path:{"transform-origin":`${ze.svgRound(e)} ${ze.svgRound(t)}`,transform:`${this.rotationTransform} translate(${y} ${S})`}}}let f=(n-2*s)/(d-2*s),g=(r-2*a)/(p-2*a),m=d/n,x=p/r;return{path:{"transform-origin":`${ze.svgRound(o)} ${ze.svgRound(l)}`,transform:`${this.rotationTransform} scale(${m} ${x}) translate(${ze.svgRound(s)} ${ze.svgRound(a)}) scale(${f} ${g}) translate(${ze.svgRound(-s)} ${ze.svgRound(-a)})`}}}getPathResizedSVGProperties([e,t,n,r]){let[s,a]=this.#l(),o=this.#t,[l,d,p,f]=o;if(o[0]=e,o[1]=t,o[2]=n,o[3]=r,Math.abs(p-s)<=ze.PRECISION||Math.abs(f-a)<=ze.PRECISION){let S=e+n/2-(l+p/2),b=t+r/2-(d+f/2);for(let{line:M,points:T}of this.#i)ze._translate(M,S,b,M),ze._translate(T,S,b,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ze.svgRound(e)} ${ze.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}let g=(n-2*s)/(p-2*s),m=(r-2*a)/(f-2*a),x=-g*(l+s)+e+s,y=-m*(d+a)+t+a;if(g!==1||m!==1||x!==0||y!==0)for(let{line:S,points:b}of this.#i)ze._rescale(S,x,y,g,m,S),ze._rescale(b,x,y,g,m,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ze.svgRound(e)} ${ze.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],n){let[r,s]=n,a=this.#t,o=e-a[0],l=t-a[1];if(this.#s===r&&this.#r===s)for(let{line:d,points:p}of this.#i)ze._translate(d,o,l,d),ze._translate(p,o,l,p);else{let d=this.#s/r,p=this.#r/s;this.#s=r,this.#r=s;for(let{line:f,points:g}of this.#i)ze._rescale(f,o,l,d,p,f),ze._rescale(g,o,l,d,p,g);a[2]*=d,a[3]*=p}return a[0]=e,a[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ze.svgRound(e)} ${ze.svgRound(t)}`}}}get defaultSVGProperties(){let e=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ze.svgRound(e[0])} ${ze.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}},tC=class i extends Jw{#t;constructor(e){super(),this.#t=e,super.updateProperties({fill:"none",stroke:qi._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this.#t.realScale),super.updateSVGProperty(e,t)}clone(){let e=new i(this.#t);return e.updateAll(this),e}},eC=class i extends Pj{static _type="ink";static _editorType=Tn.INK;static _defaultDrawingOptions=null;constructor(e){super(In(Se({},e),{name:"inkEditor"})),this._willKeepAspectRatio=!0}static initialize(e,t){qi.initialize(e,t),this._defaultDrawingOptions=new tC(t.viewParameters)}static getDefaultDrawingOptions(e){let t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Un(this,"typesMap",new Map([[Wn.INK_THICKNESS,"stroke-width"],[Wn.INK_COLOR,"stroke"],[Wn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,r,s){return new Qw(e,t,n,r,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,r,s,a){return y1.deserialize(e,t,n,r,s,a)}static deserialize(e,t,n){return Be(this,null,function*(){let r=null;if(e instanceof mm){let{data:{inkLists:a,rect:o,rotation:l,id:d,color:p,opacity:f,borderStyle:{rawWidth:g},popupRef:m},parent:{page:{pageNumber:x}}}=e;r=e={annotationType:Tn.INK,color:Array.from(p),thickness:g,opacity:f,paths:{points:a},boxes:null,pageIndex:x-1,rect:o.slice(0),rotation:l,id:d,deleted:!1,popupRef:m}}let s=yield Kc(i,this,"deserialize").call(this,e,t,n);return s.annotationElementId=e.id||null,s._initialData=r,s})}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){let e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:n}){this._drawingOptions=i.getDefaultDrawingOptions({stroke:qe.makeHexColor(...e),"stroke-width":t,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:t,points:n,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:s,"stroke-opacity":a,"stroke-width":o}}=this,l={annotationType:Tn.INK,color:qi._colorManager.convert(s),opacity:a,thickness:o,paths:{lines:t,points:n},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?l:this.annotationElementId&&!this.#t(l)?null:(l.id=this.annotationElementId,l)}#t(e){let{color:t,thickness:n,opacity:r,pageIndex:s}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((a,o)=>a!==t[o])||e.thickness!==n||e.opacity!==r||e.pageIndex!==s}renderAnnotationElement(e){let{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t}),null}},nC=class i extends qi{#t=null;#e=null;#n=null;#i=null;#s=null;#r="";#c=null;#o=null;#d=null;#l=!1;#u=!1;static _type="stamp";static _editorType=Tn.STAMP;constructor(e){super(In(Se({},e),{name:"stampEditor"})),this.#i=e.bitmapUrl,this.#s=e.bitmapFile}static initialize(e,t){qi.initialize(e,t)}static get supportedTypes(){return Un(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return Un(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(Tn.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){let t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#a(e,t=!1){if(!e){this.remove();return}this.#t=e.bitmap,t||(this.#e=e.id,this.#l=e.isSvg),e.file&&(this.#r=e.file.name),this.#f()}#h(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#c){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(e=null,t=!0){return Be(this,null,function*(){if(this.hasAltTextData())return null;let{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!(yield n.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");let{data:r,width:s,height:a}=e||this.copyCanvas(null,null,!0).imageData,o=yield n.guess({name:"altText",request:{data:r,width:s,height:a,channels:r.length/(s*a)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");let l=o.output;return yield this.setGuessedAltText(l),t&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l})}#p(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#a(n,!0)).finally(()=>this.#h());return}if(this.#i){let n=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(n).then(r=>this.#a(r)).finally(()=>this.#h());return}if(this.#s){let n=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(n).then(r=>this.#a(r)).finally(()=>this.#h());return}let e=document.createElement("input");e.type="file",e.accept=i.supportedTypesStr;let t=this._uiManager._signal;this.#n=new Promise(n=>{e.addEventListener("change",()=>Be(this,null,function*(){if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let r=yield this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#a(r)}n()}),{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>this.#h()),e.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#c?.remove(),this.#c=null,this.#o?.disconnect(),this.#o=null,this.#d&&(clearTimeout(this.#d),this.#d=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#p();return}super.rebuild(),this.div!==null&&(this.#e&&this.#c===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#s||this.#e)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#t?this.#f():this.#p(),this.width&&!this.annotationElementId){let[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r)}return this.div}#f(){let{div:e}=this,{width:t,height:n}=this.#t,[r,s]=this.pageDimensions,a=.75;if(this.width)t=this.width*r,n=this.height*s;else if(t>a*r||n>a*s){let p=Math.min(a*r/t,a*s/n);t*=p,n*=p}let[o,l]=this.parentDimensions;this.setDims(t*o/r,n*l/s),this._uiManager.enableWaiting(!1);let d=this.#c=document.createElement("canvas");d.setAttribute("role","img"),this.addContainer(d),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#_(t,n),this.#b(),this.#u||(this.parent.addUndoableEditor(this),this.#u=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&d.setAttribute("aria-label",this.#r)}copyCanvas(e,t,n=!1){e||(e=224);let{width:r,height:s}=this.#t,a=new om,o=this.#t,l=r,d=s,p=null;if(t){if(r>t||s>t){let U=Math.min(t/r,t/s);l=Math.floor(r*U),d=Math.floor(s*U)}p=document.createElement("canvas");let g=p.width=Math.ceil(l*a.sx),m=p.height=Math.ceil(d*a.sy);this.#l||(o=this.#m(g,m));let x=p.getContext("2d");x.filter=this._uiManager.hcmFilter;let y="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(y="#8f8f9d",S="#42414d");let b=15,M=b*a.sx,T=b*a.sy,k=new OffscreenCanvas(M*2,T*2),L=k.getContext("2d");L.fillStyle=y,L.fillRect(0,0,M*2,T*2),L.fillStyle=S,L.fillRect(0,0,M,T),L.fillRect(M,T,M,T),x.fillStyle=x.createPattern(k,"repeat"),x.fillRect(0,0,g,m),x.drawImage(o,0,0,o.width,o.height,0,0,g,m)}let f=null;if(n){let g,m;if(a.symmetric&&o.width<e&&o.height<e)g=o.width,m=o.height;else if(o=this.#t,r>e||s>e){let S=Math.min(e/r,e/s);g=Math.floor(r*S),m=Math.floor(s*S),this.#l||(o=this.#m(g,m))}let y=new OffscreenCanvas(g,m).getContext("2d",{willReadFrequently:!0});y.drawImage(o,0,0,o.width,o.height,0,0,g,m),f={width:g,height:m,data:y.getImageData(0,0,g,m).data}}return{canvas:p,width:l,height:d,imageData:f}}#g(e,t){let[n,r]=this.parentDimensions;this.width=e/n,this.height=t/r,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#d!==null&&clearTimeout(this.#d);let s=200;this.#d=setTimeout(()=>{this.#d=null,this.#_(e,t)},s)}#m(e,t){let{width:n,height:r}=this.#t,s=n,a=r,o=this.#t;for(;s>2*e||a>2*t;){let l=s,d=a;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));let p=new OffscreenCanvas(s,a);p.getContext("2d").drawImage(o,0,0,l,d,0,0,s,a),o=p.transferToImageBitmap()}return o}#_(e,t){let n=new om,r=Math.ceil(e*n.sx),s=Math.ceil(t*n.sy),a=this.#c;if(!a||a.width===r&&a.height===s)return;a.width=r,a.height=s;let o=this.#l?this.#t:this.#m(r,s),l=a.getContext("2d");l.filter=this._uiManager.hcmFilter,l.drawImage(o,0,0,o.width,o.height,0,0,r,s)}getImageForAltText(){return this.#c}#v(e){if(e){if(this.#l){let r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}let t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#t,t.getContext("2d").drawImage(this.#t,0,0),t.toDataURL()}if(this.#l){let[t,n]=this.pageDimensions,r=Math.round(this.width*t*mc.PDF_TO_CSS_UNITS),s=Math.round(this.height*n*mc.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,s);return a.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,s),a.transferToImageBitmap()}return structuredClone(this.#t)}#b(){this._uiManager._signal&&(this.#o=new ResizeObserver(e=>{let t=e[0].contentRect;t.width&&t.height&&this.#g(t.width,t.height)}),this.#o.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#o?.disconnect(),this.#o=null},{once:!0}))}static deserialize(e,t,n){return Be(this,null,function*(){let r=null;if(e instanceof g1){let{data:{rect:x,rotation:y,id:S,structParent:b,popupRef:M},container:T,parent:{page:{pageNumber:k}}}=e,L=T.querySelector("canvas"),U=n.imageManager.getFromCanvas(T.id,L);L.remove();let N=(yield t._structTree.getAriaAttributes(`${sC}${S}`))?.get("aria-label")||"";r=e={annotationType:Tn.STAMP,bitmapId:U.id,bitmap:U.bitmap,pageIndex:k-1,rect:x.slice(0),rotation:y,id:S,deleted:!1,accessibilityData:{decorative:!1,altText:N},isSvg:!1,structParent:b,popupRef:M}}let s=yield Kc(i,this,"deserialize").call(this,e,t,n),{rect:a,bitmap:o,bitmapUrl:l,bitmapId:d,isSvg:p,accessibilityData:f}=e;d&&n.imageManager.isValidId(d)?(s.#e=d,o&&(s.#t=o)):s.#i=l,s.#l=p;let[g,m]=s.pageDimensions;return s.width=(a[2]-a[0])/g,s.height=(a[3]-a[1])/m,s.annotationElementId=e.id||null,f&&(s.altTextData=f),s._initialData=r,s.#u=!!r,s})}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let n={annotationType:Tn.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#l,structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=this.#v(!0),n.accessibilityData=this.serializeAltText(!0),n;let{decorative:r,altText:s}=this.serializeAltText(!1);if(!r&&s&&(n.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){let o=this.#y(n);if(o.isSame)return null;o.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,t===null)return n;t.stamps||=new Map;let a=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!t.stamps.has(this.#e))t.stamps.set(this.#e,{area:a,serialized:n}),n.bitmap=this.#v(!1);else if(this.#l){let o=t.stamps.get(this.#e);a>o.area&&(o.area=a,o.serialized.bitmap.close(),o.serialized.bitmap=this.#v(!1))}return n}#y(e){let{pageIndex:t,accessibilityData:{altText:n}}=this._initialData,r=e.pageIndex===t,s=(e.accessibilityData?.alt||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&s,isSameAltText:s}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}},Rj=(()=>{class i{#t;#e=!1;#n=null;#i=null;#s=null;#r=new Map;#c=!1;#o=!1;#d=null;#l=null;#u=null;#a;static _initialized=!1;static#h=new Map([$w,eC,nC,b1].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:n,div:r,structTreeLayer:s,accessibilityManager:a,annotationLayer:o,drawLayer:l,textLayer:d,viewport:p,l10n:f}){let g=[...i.#h.values()];if(!i._initialized){i._initialized=!0;for(let m of g)m.initialize(f,t)}t.registerEditorTypes(g),this.#a=t,this.pageIndex=n,this.div=r,this.#t=a,this.#n=o,this.viewport=p,this.#l=d,this.drawLayer=l,this._structTree=s,this.#a.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#a.getMode()===Tn.NONE}updateToolbar(t){this.#a.updateToolbar(t)}updateMode(t=this.#a.getMode()){switch(this.#_(),t){case Tn.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Tn.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Tn.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:n}=this.div;for(let r of i.#h.values())n.toggle(`${r._type}Editing`,t===r._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#l?.div}setEditingState(t){this.#a.setEditingState(t)}addCommands(t){this.#a.addCommands(t)}cleanUndoStack(t){this.#a.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}enable(){return Be(this,null,function*(){this.div.tabIndex=0,this.togglePointerEvents(!0);let t=new Set;for(let r of this.#r.values())r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#a.removeChangedExistingAnnotation(r),t.add(r.annotationElementId));if(!this.#n)return;let n=this.#n.getEditableAnnotations();for(let r of n){if(r.hide(),this.#a.isDeletedAnnotationElement(r.data.id)||t.has(r.data.id))continue;let s=yield this.deserialize(r);s&&(this.addOrRebuild(s),s.enableEditing())}})}disable(){this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);let t=new Map,n=new Map;for(let s of this.#r.values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){t.set(s.annotationElementId,s);continue}else n.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#n){let s=this.#n.getEditableAnnotations();for(let a of s){let{id:o}=a.data;if(this.#a.isDeletedAnnotationElement(o))continue;let l=n.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=t.get(o),l&&(this.#a.addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}this.#_(),this.isEmpty&&(this.div.hidden=!0);let{classList:r}=this.div;for(let s of i.#h.values())r.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#a.getActive()!==t&&this.#a.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#l?.div&&!this.#u){this.#u=new AbortController;let t=this.#a.combinedSignal(this.#u);this.#l.div.addEventListener("pointerdown",this.#p.bind(this),{signal:t}),this.#l.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#l?.div&&this.#u&&(this.#u.abort(),this.#u=null,this.#l.div.classList.remove("highlighting"))}#p(t){this.#a.unselectAll();let{target:n}=t;if(n===this.#l.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#l.div.contains(n)){let{isMac:r}=qr.platform;if(t.button!==0||t.ctrlKey&&r)return;this.#a.showAllEditors("highlight",!0,!0),this.#l.div.classList.add("free"),this.toggleDrawing(),b1.startHighlighting(this,this.#a.direction==="ltr",{target:this.#l.div,x:t.x,y:t.y}),this.#l.div.addEventListener("pointerup",()=>{this.#l.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#a._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;let t=this.#a.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#r.set(t.id,t);let{annotationElementId:n}=t;n&&this.#a.isDeletedAnnotationElement(n)&&this.#a.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#a.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#a.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#a.addDeletedAnnotationElement(t.annotationElementId),qi.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#a.addEditor(t),this.attach(t),!t.isAttachedToDOM){let n=t.render();this.div.append(n),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#a.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;let{activeElement:n}=document;t.div.contains(n)&&!this.#s&&(t._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#a._signal}),n.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){let n=()=>t._uiManager.rebuild(t),r=()=>{t.remove()};this.addCommands({cmd:n,undo:r,mustExec:!1})}getNextId(){return this.#a.getId()}get#f(){return i.#h.get(this.#a.getMode())}combinedSignal(t){return this.#a.combinedSignal(t)}#g(t){let n=this.#f;return n?new n.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(t,n){this.#a.updateToolbar(t),this.#a.updateMode(t);let{offsetX:r,offsetY:s}=this.#m(),a=this.getNextId(),o=this.#g(Se({parent:this,id:a,x:r,y:s,uiManager:this.#a,isCentered:!0},n));o&&this.add(o)}deserialize(t){return Be(this,null,function*(){return(yield i.#h.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#a))||null})}createAndAddNewEditor(t,n,r={}){let s=this.getNextId(),a=this.#g(Se({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#a,isCentered:n},r));return a&&this.add(a),a}#m(){let{x:t,y:n,width:r,height:s}=this.div.getBoundingClientRect(),a=Math.max(0,t),o=Math.max(0,n),l=Math.min(window.innerWidth,t+r),d=Math.min(window.innerHeight,n+s),p=(a+l)/2-t,f=(o+d)/2-n,[g,m]=this.viewport.rotation%180===0?[p,f]:[f,p];return{offsetX:g,offsetY:m}}addNewEditor(){this.createAndAddNewEditor(this.#m(),!0)}setSelected(t){this.#a.setSelected(t)}toggleSelected(t){this.#a.toggleSelected(t)}unselect(t){this.#a.unselect(t)}pointerup(t){let{isMac:n}=qr.platform;if(!(t.button!==0||t.ctrlKey&&n)&&t.target===this.div&&this.#c&&(this.#c=!1,!(this.#f?.isDrawer&&this.#f.supportMultipleDrawings))){if(!this.#e){this.#e=!0;return}if(this.#a.getMode()===Tn.STAMP){this.#a.unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#a.getMode()===Tn.HIGHLIGHT&&this.enableTextSelection(),this.#c){this.#c=!1;return}let{isMac:n}=qr.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div)return;if(this.#c=!0,this.#f?.isDrawer){this.startDrawingSession(t);return}let r=this.#a.getActive();this.#e=!r||r.isEmpty()}startDrawingSession(t){if(this.div.focus(),this.#d){this.#f.startDrawing(this,this.#a,!1,t);return}this.#a.setCurrentDrawingSession(this),this.#d=new AbortController;let n=this.#a.combinedSignal(this.#d);this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&this.commitOrRemove()},{signal:n}),this.#f.startDrawing(this,this.#a,!1,t)}endDrawingSession(t=!1){return this.#d?(this.#a.setCurrentDrawingSession(null),this.#d.abort(),this.#d=null,this.#f.endDrawing(t)):null}findNewParent(t,n,r){let s=this.#a.findParent(n,r);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return this.#d?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#d&&this.#f.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#a.getActive()?.parent===this&&(this.#a.commitOrRemove(),this.#a.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(let t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#a.removeLayer(this)}#_(){for(let t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Md(this.div,t);for(let n of this.#a.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:t}){this.#a.commitOrRemove(),this.#_();let n=this.viewport.rotation,r=t.rotation;if(this.viewport=t,Md(this.div,{rotation:r}),n!==r)for(let s of this.#r.values())s.rotate(r)}get pageDimensions(){let{pageWidth:t,pageHeight:n}=this.viewport.rawDims;return[t,n]}get scale(){return this.#a.viewParameters.realScale}}return i})(),iC=class i{#t=null;#e=0;#n=new Map;#i=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#t){this.#t=e;return}if(this.#t!==e){if(this.#n.size>0)for(let t of this.#n.values())t.remove(),e.append(t);this.#t=e}}static get _svgFactory(){return Un(this,"_svgFactory",new pm)}static#s(e,[t,n,r,s]){let{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*r}%`,a.height=`${100*s}%`}#r(){let e=i._svgFactory.create(1,1,!0);return this.#t.append(e),e.setAttribute("aria-hidden",!0),e}#c(e,t){let n=i._svgFactory.createElement("clipPath");e.append(n);let r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");let s=i._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r}#o(e,t){for(let[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)}draw(e,t=!1,n=!1){let r=this.#e++,s=this.#r(),a=i._svgFactory.createElement("defs");s.append(a);let o=i._svgFactory.createElement("path");a.append(o);let l=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#i.set(r,o);let d=n?this.#c(a,l):null,p=i._svgFactory.createElement("use");return s.append(p),p.setAttribute("href",`#${l}`),this.updateProperties(s,e),this.#n.set(r,s),{id:r,clipPathId:`url(#${d})`}}drawOutline(e,t){let n=this.#e++,r=this.#r(),s=i._svgFactory.createElement("defs");r.append(s);let a=i._svgFactory.createElement("path");s.append(a);let o=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){let f=i._svgFactory.createElement("mask");s.append(f),l=`mask_p${this.pageIndex}_${n}`,f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");let g=i._svgFactory.createElement("rect");f.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");let m=i._svgFactory.createElement("use");f.append(m),m.setAttribute("href",`#${o}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}let d=i._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${o}`),l&&d.setAttribute("mask",`url(#${l})`);let p=d.cloneNode();return r.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,e),this.#n.set(n,r),n}finalizeDraw(e,t){this.#i.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;let{root:n,bbox:r,rootClass:s,path:a}=t,o=typeof e=="number"?this.#n.get(e):e;if(o){if(n&&this.#o(o,n),r&&i.#s(o,r),s){let{classList:l}=o;for(let[d,p]of Object.entries(s))l.toggle(d,p)}if(a){let d=o.firstChild.firstChild;this.#o(d,a)}}}updateParent(e,t){if(t===this)return;let n=this.#n.get(e);n&&(t.#t.append(n),this.#n.delete(e),t.#n.set(e,n))}remove(e){this.#i.delete(e),this.#t!==null&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#t=null;for(let e of this.#n.values())e.remove();this.#n.clear(),this.#i.clear()}};globalThis.pdfjsTestingUtils={HighlightOutliner:gm};var Vdt=gn.AbortException,Udt=gn.AnnotationEditorLayer,zdt=gn.AnnotationEditorParamsType,jdt=gn.AnnotationEditorType,Hdt=gn.AnnotationEditorUIManager,Wdt=gn.AnnotationLayer,Gdt=gn.AnnotationMode,qdt=gn.ColorPicker,Xdt=gn.DOMSVGFactory,Ydt=gn.DrawLayer,$dt=gn.FeatureTest,HD=gn.GlobalWorkerOptions,Kdt=gn.ImageKind,Zdt=gn.InvalidPDFException,Jdt=gn.MissingPDFException,Qdt=gn.OPS,tut=gn.OutputScale,eut=gn.PDFDataRangeTransport,nut=gn.PDFDateString,iut=gn.PDFWorker,rut=gn.PasswordResponses,sut=gn.PermissionFlag,aut=gn.PixelsPerInch,out=gn.RenderingCancelledException,lut=gn.TextLayer,cut=gn.UnexpectedResponseException,dut=gn.Util,uut=gn.VerbosityLevel,hut=gn.XfaLayer,put=gn.build,fut=gn.createValidAbsoluteUrl,mut=gn.fetchData,WD=gn.getDocument,gut=gn.getFilenameFromUrl,_ut=gn.getPdfFilenameFromUrl,vut=gn.getXfaPageViewport,xut=gn.isDataScheme,but=gn.isPdfFile,yut=gn.noContextMenu,Sut=gn.normalizeUnicode,wut=gn.setLayerDimensions,Cut=gn.shadow,Mut=gn.stopEvent,Eut=gn.version;var D1=class i{constructor(){HD.workerSrc="/assets/pdf.worker.min.mjs"}getPdfDocument(e){return Be(this,null,function*(){try{let t=yield WD(e).promise;return console.log("PDF loaded successfully"),t}catch(t){throw console.error("Error loading PDF:",t),t}})}renderPdfPage(e,t,n){return Be(this,null,function*(){try{let r=yield e.getPage(t),s=r.getViewport({scale:1.5}),a=n.getContext("2d");n.width=s.width,n.height=s.height;let o={canvasContext:a,viewport:s};yield r.render(o).promise}catch(r){throw console.error(`Error rendering page ${t}:`,r),r}})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Qe({token:i,factory:i.\u0275fac,providedIn:"root"})};var Nj=i=>({width:i}),GD=(i,e)=>({"fa-chevron-down":i,"fa-chevron-right":e}),Fj=()=>["active"];function Bj(i,e){i&1&&(c(0,"ul")(1,"li")(2,"a",15),h(3,"Submenu Item 1"),u()(),c(4,"li")(5,"a",15),h(6,"Submenu Item 2"),u()()())}function Vj(i,e){if(i&1){let t=Ft();c(0,"li")(1,"a",11),lt("click",function(){G(t);let r=I();return q(r.toggleMenu("civil"))}),c(2,"span",3),Rt(3,"i",12),u(),h(4,"Civil "),Rt(5,"i",13),u(),rt(6,Bj,7,0,"ul",14),u()}if(i&2){let t=I();ar("active",t.activeMenu==="civil"),_(5),D("ngClass",Oa(4,GD,t.isMenuExpanded("civil"),!t.isMenuExpanded("civil"))),_(),D("ngIf",t.isMenuExpanded("civil"))}}function Uj(i,e){if(i&1){let t=Ft();c(0,"li",16)(1,"a",11),lt("click",function(){G(t);let r=I();return q(r.toggleMenu("marketing"))}),c(2,"span",3),Rt(3,"i",17),u(),h(4,"Marketing "),u()()}if(i&2){let t=I();ar("active",t.activeMenu==="marketing")}}function zj(i,e){if(i&1){let t=Ft();c(0,"li",18)(1,"a",11),lt("click",function(){G(t);let r=I();return q(r.toggleMenu("Sales"))}),c(2,"span",3),Rt(3,"i",19),u(),h(4,"Sales "),u()()}if(i&2){let t=I();ar("active",t.activeMenu==="Sales")}}function jj(i,e){if(i&1){let t=Ft();c(0,"li",20)(1,"a",11),lt("click",function(){G(t);let r=I();return q(r.toggleMenu("Report"))}),c(2,"span",3),Rt(3,"i",21),u(),h(4,"Report"),u()()}if(i&2){let t=I();ar("active",t.activeMenu==="Report")}}function Hj(i,e){if(i&1){let t=Ft();c(0,"li")(1,"a",11),lt("click",function(){G(t);let r=I();return q(r.toggleMenu("Purchase"))}),c(2,"span",3),Rt(3,"i",22),u(),h(4,"Purchase"),u()()}if(i&2){let t=I();ar("active",t.activeMenu==="Purchase")}}function Wj(i,e){i&1&&(c(0,"ul")(1,"li",24)(2,"a"),h(3,"Sales"),u()()())}function Gj(i,e){if(i&1){let t=Ft();c(0,"li")(1,"a",11),lt("click",function(){G(t);let r=I();return q(r.toggleMenu("Accounts"))}),c(2,"span",3),Rt(3,"i",23),u(),h(4,"Accounts"),u(),rt(5,Wj,4,0,"ul",14),u()}if(i&2){let t=I();ar("active",t.activeMenu==="Accounts"),_(5),D("ngIf",t.isMenuExpanded("Accounts"))}}function qj(i,e){if(i&1){let t=Ft();c(0,"li")(1,"a",11),lt("click",function(){G(t);let r=I();return q(r.toggleMenu("Liaison"))}),c(2,"span",3),Rt(3,"i",25),u(),h(4,"Liaison"),u()()}if(i&2){let t=I();ar("active",t.activeMenu==="Liaison")}}function Xj(i,e){if(i&1){let t=Ft();c(0,"li",26)(1,"a",11),lt("click",function(){G(t);let r=I();return q(r.toggleMenu("HR"))}),c(2,"span",3),Rt(3,"i",27),u(),h(4,"HR"),u()()}if(i&2){let t=I();ar("active",t.activeMenu==="HR")}}function Yj(i,e){i&1&&(c(0,"ul")(1,"li",29)(2,"a"),h(3,"View User"),u()()()),i&2&&(_(),D("routerLinkActive",nd(1,Fj)))}function $j(i,e){if(i&1){let t=Ft();c(0,"li")(1,"a",11),lt("click",function(){G(t);let r=I();return q(r.toggleMenu("IT"))}),c(2,"span",3),Rt(3,"i",28),u(),h(4,"IT "),Rt(5,"i",13),u(),rt(6,Yj,4,2,"ul",14),u()}if(i&2){let t=I();ar("active",t.activeMenu==="IT"),_(5),D("ngClass",Oa(4,GD,t.isMenuExpanded("IT"),!t.isMenuExpanded("IT"))),_(),D("ngIf",t.isMenuExpanded("IT"))}}function Kj(i,e){if(i&1){let t=Ft();c(0,"li",30)(1,"a",11),lt("click",function(){G(t);let r=I();return q(r.toggleMenu("Meeting"))}),c(2,"span",3),Rt(3,"i",31),u(),h(4,"Meeting"),u()()}if(i&2){let t=I();ar("active",t.activeMenu==="Meeting")}}var on=class i{constructor(e){this.userService=e}isOpen=!0;expandedMenu=null;toggleMenu(e){this.expandedMenu===e?this.expandedMenu=null:this.expandedMenu=e,this.activeMenu=e,localStorage.setItem("activeMenu",e)}isMenuExpanded(e){return this.expandedMenu===e}activeMenu=null;user_data=[];user_details;user_data_array;ngOnInit(){this.get_data(),this.activeMenu=localStorage.getItem("activeMenu")}image_url="";get_data(){this.user_details=this.userService.getUserData(),this.user_data=Object.entries(this.user_details),this.user_data_array=this.user_data.reduce((e,[t,n])=>(e[t]=n,e),{}),this.get_access()}is_marketing=!1;is_salse=!1;is_Purchase=!1;is_Accounts=!1;is_Liaison=!1;is_HR=!1;is_Civil=!1;is_IT=!1;get_access(){this.user_data_array.User_Department=="Marketing"?this.is_marketing=!0:this.user_data_array.User_Department=="Sales"?this.is_salse=!0:this.user_data_array.User_Department=="Purchase"?this.is_Purchase=!0:this.user_data_array.User_Department=="Accounts"?this.is_Accounts=!0:this.user_data_array.User_Department=="Liaison"?this.is_Liaison=!0:this.user_data_array.User_Department=="HR"?this.is_HR=!0:this.user_data_array.User_Department=="Civil"?this.is_Civil=!0:this.user_data_array.User_Department=="IT"&&(this.is_IT=!0)}static \u0275fac=function(t){return new(t||i)(Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-sidebar"]],inputs:{isOpen:"isOpen"},decls:20,vars:15,consts:[["id","sidenav",3,"ngStyle"],["src","assets/images/sidebar-logo.png","alt","",1,"logo-img"],["routerLink","/dashboard",3,"click"],[1,"icon-bg"],["aria-hidden","true",1,"fa","fa-home"],[3,"active",4,"ngIf"],["routerLink","/project-marketing",3,"active",4,"ngIf"],["routerLink","/Sales-projects",3,"active",4,"ngIf"],["routerLink","/Sales-Report",3,"active",4,"ngIf"],["routerLink","/hr-dashboard",3,"active",4,"ngIf"],["routerLink","/marketing-meeting",3,"active",4,"ngIf"],[3,"click"],["aria-hidden","true",1,"far","fa-building"],["aria-hidden","true",1,"fa",3,"ngClass"],[4,"ngIf"],["href","#"],["routerLink","/project-marketing"],["aria-hidden","true",1,"fas","fa-poll"],["routerLink","/Sales-projects"],["aria-hidden","true",1,"fas","fa-chart-line"],["routerLink","/Sales-Report"],["aria-hidden","true",1,"fa","fa-file-text"],["aria-hidden","true",1,"fas","fa-shopping-cart"],["aria-hidden","true",1,"fa","fa-rupee"],["routerLink","/project-accounds"],["aria-hidden","true",1,"fa","fa-balance-scale"],["routerLink","/hr-dashboard"],["aria-hidden","true",1,"fas","fa-id-card-alt"],["aria-hidden","true",1,"fa","fa-laptop"],["routerLink","/view-users",3,"routerLinkActive"],["routerLink","/marketing-meeting"],["aria-hidden","true",1,"far","fa-calendar-alt"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div"),Rt(2,"img",1),u(),c(3,"nav")(4,"ul")(5,"li")(6,"a",2),lt("click",function(){return n.toggleMenu("Dashboard")}),c(7,"span",3),Rt(8,"i",4),u(),h(9,"Dashboard"),u()(),rt(10,Vj,7,7,"li",5)(11,Uj,5,2,"li",6)(12,zj,5,2,"li",7)(13,jj,5,2,"li",8)(14,Hj,5,2,"li",5)(15,Gj,6,3,"li",5)(16,qj,5,2,"li",5)(17,Xj,5,2,"li",9)(18,$j,7,7,"li",5)(19,Kj,5,2,"li",10),u()()()),t&2&&(D("ngStyle",te(13,Nj,n.isOpen?"250px":"0px")),_(5),ar("active",n.activeMenu==="Dashboard"),_(5),D("ngIf",n.is_Civil),_(),D("ngIf",n.is_marketing),_(),D("ngIf",n.is_salse),_(),D("ngIf",n.is_salse),_(),D("ngIf",n.is_Purchase),_(),D("ngIf",n.is_Accounts),_(),D("ngIf",n.is_Liaison),_(),D("ngIf",n.is_HR),_(),D("ngIf",n.is_IT),_(),D("ngIf",n.is_marketing))},dependencies:[en,Sn,ig,di,pD],styles:['.logo-img[_ngcontent-%COMP%]{margin:12%}#sidenav[_ngcontent-%COMP%]{height:100vh;position:fixed;left:0;top:0;background:#5e0f80;z-index:2;transition:.5s;overflow-y:auto;overflow-x:hidden}#sidenav[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}#sidenav[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#5e0f80}#sidenav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#a347b5;border-radius:5px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:10px;margin:0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-bottom:10px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;display:flex;align-items:center;padding:10px 20px;border-radius:5px;position:relative;overflow:hidden;z-index:1;transition:color .3s}.icon-bg[_ngcontent-%COMP%]{background-color:#fff;padding:5px;border-radius:5px;color:gray;text-align:center;margin-right:15px;flex-shrink:0;width:15%}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;width:100%;height:100%;background-color:#3a043ace;border-radius:5px;transform:translateY(-50%) scale(0);transition:transform .3s;z-index:-1}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{transform:translateY(-50%) scale(1)}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%]{margin-left:auto;transition:transform .3s ease;font-size:12px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa.fa-chevron-down[_ngcontent-%COMP%]{transform:rotate(0)}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa.fa-chevron-right[_ngcontent-%COMP%]{transform:rotate(90deg)}li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#f48d3a;color:#000}']})};var Zj=i=>({"margin-left":i});function Jj(i,e){i&1&&(pe(0),Rt(1,"i",11),fe())}function Qj(i,e){i&1&&(pe(0),Rt(1,"i",12),fe())}var ln=class i{constructor(e,t,n,r){this.breakpointObserver=e;this.location=t;this.router=n;this.userService=r}toggleSidebarEvent=new Nr;isSidebarOpen=!1;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen,this.toggleSidebarEvent.emit()}goBack(){this.location.back()}user_data=[];user_details;user_data_array;ngOnInit(){this.get_data()}image_url="";get_data(){this.user_details=this.userService.getUserData(),this.user_data=Object.entries(this.user_details),this.user_data_array=this.user_data.reduce((e,[t,n])=>(e[t]=n,e),{})}static \u0275fac=function(t){return new(t||i)(Ot(pg),Ot(sd),Ot(Vn),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-header"]],outputs:{toggleSidebarEvent:"toggleSidebarEvent"},decls:13,vars:6,consts:[[1,"header",3,"ngStyle"],[1,"back-icon"],[1,"fa","fa-chevron-circle-left",3,"click"],[1,"tooltip-text"],[1,"nav-right"],[1,"menu-btn",3,"click"],[4,"ngIf"],[1,"msg-box"],[1,"fa-solid","fa-envelope"],[1,"circle-profile"],["alt","Profile Image",3,"src"],[1,"fa-solid","fa-xmark"],[1,"fa-solid","fa-bars"]],template:function(t,n){t&1&&(c(0,"nav",0)(1,"div",1)(2,"i",2),lt("click",function(){return n.goBack()}),u(),c(3,"span",3),h(4,"Back"),u()(),c(5,"div",4)(6,"div",5),lt("click",function(){return n.toggleSidebar()}),rt(7,Jj,2,0,"ng-container",6)(8,Qj,2,0,"ng-container",6),u(),c(9,"div",7),Rt(10,"i",8),u(),c(11,"div",9),Rt(12,"img",10),u()()()),t&2&&(D("ngStyle",te(4,Zj,n.isSidebarOpen?"10px":"260px")),_(7),D("ngIf",!n.isSidebarOpen),_(),D("ngIf",n.isSidebarOpen),_(4),D("src",n.user_data_array.user_profile_img,jl))},dependencies:[Sn,ig],styles:[".header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;display:flex;justify-content:space-between;align-items:center;height:60px;padding:10px 20px;background:#ac5ff9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-radius:15px;box-shadow:0 4px 12px #0003;z-index:1000;transition:margin-left .5s;margin:10px 10px 10%}.back-icon[_ngcontent-%COMP%]{position:relative;color:#fff;cursor:pointer;display:inline-block;font-size:24px;transition:transform .3s ease,color .3s ease}.tooltip-text[_ngcontent-%COMP%]{visibility:hidden;width:50px;background-color:#000;color:#fff;text-align:center;border-radius:5px;padding:5px 0;position:absolute;top:100%;left:50%;transform:translate(-50%);opacity:0;transition:opacity .3s;z-index:1;font-size:12px}.back-icon[_ngcontent-%COMP%]:hover   .tooltip-text[_ngcontent-%COMP%]{visibility:visible;opacity:1;transition:transform .3s ease}.back-icon[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.nav-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.menu-btn[_ngcontent-%COMP%]{font-size:24px;color:#fff;cursor:pointer;transition:transform .3s ease,color .3s ease}.menu-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.menu-btn[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.circle-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;border:2px solid white;box-shadow:0 2px 8px #0000004d;transition:transform .3s ease;cursor:pointer}.circle-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.msg-box[_ngcontent-%COMP%]{font-size:24px;color:#fff;cursor:pointer;transition:transform .3s ease,color .3s ease}.msg-box[_ngcontent-%COMP%]:hover{transform:scale(1.2)}@media screen and (max-width: 768px){.header[_ngcontent-%COMP%]{margin-left:0;padding:10px;justify-content:space-between}.back-icon[_ngcontent-%COMP%]{display:none}.nav-right[_ngcontent-%COMP%]{justify-content:flex-end;gap:15px;position:fixed;right:10px}.menu-btn[_ngcontent-%COMP%], .msg-box[_ngcontent-%COMP%], .circle-profile[_ngcontent-%COMP%]{font-size:20px;margin-left:auto}.circle-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:25px}}"]})};var tH=i=>({"full-width":i});function eH(i,e){i&1&&(c(0,"div",9)(1,"div",10),Rt(2,"iframe",11),u()())}var P1=class i{constructor(e,t,n){this.router=e;this.userService=t;this.pdfReader=n}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}user_data=[];user_details;user_data_array;ngOnInit(){this.get_data()}image_url="";get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied"),this.user_data=Object.entries(this.user_details),this.user_data_array=this.user_data.reduce((e,[t,n])=>(e[t]=n,e),{}),console.log(this.user_data_array.User_r_and_r,"here is the url")}log_out(){this.userService.clearUserData(),this.router.navigate(["/login"])}isCardVisible=!1;toggleCard(){this.isCardVisible=!this.isCardVisible}onDocumentClick(e){let t=document.querySelector(".popup-card");t&&!t.contains(e.target)&&(this.isCardVisible=!1)}static \u0275fac=function(t){return new(t||i)(Ot(Vn),Ot(pn),Ot(D1))};static \u0275cmp=Ve({type:i,selectors:[["app-dashboard"]],hostBindings:function(t,n){t&1&&lt("click",function(s){return n.onDocumentClick(s)},!1,Hl)},decls:16,vars:7,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"welcome-card"],[2,"margin-left","10%"],["alt","",2,"height","8vh","width","60%","margin-left","-20px","border-radius","100%",3,"src"],[1,"logout-button",3,"click"],[1,"logout-button",2,"margin","10px",3,"click"],["class","popup-container",4,"ngIf"],[1,"popup-container"],[1,"popup-card"],["src",QE`https://drive.google.com/file/d/1dzckyF7mYmdKQb0PzgqX-1ZtTisCvVql/view?usp=drive_link`,"frameborder","0"]],template:function(t,n){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",1),c(2,"div",2)(3,"div")(4,"div",3)(5,"div",4),Rt(6,"img",5),u(),c(7,"h6"),h(8,"Welcome"),u(),c(9,"h4"),h(10),u(),c(11,"button",6),lt("click",function(){return n.log_out()}),h(12,"Log out"),u(),c(13,"button",7),lt("click",function(){return n.toggleCard()}),h(14,"R & R"),u()(),rt(15,eH,3,0,"div",8),u()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(5,tH,!n.isSidebarOpen)),_(4),D("src",n.user_data_array.user_profile_img,jl),_(4),A(n.user_data_array.User_first_name),_(5),D("ngIf",n.isCardVisible))},dependencies:[en,Sn,on,ln],styles:[".chart-card[_ngcontent-%COMP%]{margin-top:10%}.cards-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:20px;width:420px;box-shadow:0 4px 20px #0000001a;transition:transform .2s}.cards-container[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.time-card[_ngcontent-%COMP%]{border-radius:10px;padding:20px;width:180px;box-shadow:0 4px 20px #0000001a;background:linear-gradient(90deg,#4b6cb7,#182848);color:#fff;transition:transform .2s;height:90%}.time-font[_ngcontent-%COMP%]{font-size:50px;font-family:Protest Guerrilla,sans-serif;font-weight:400;font-style:normal;text-indent:10px;margin-left:-15px;margin-top:30px}span[_ngcontent-%COMP%]{font-size:11px}.month-txt[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-optical-sizing:auto;font-weight:400;font-style:normal;font-size:20px}.year-txt[_ngcontent-%COMP%]{font-size:30px;font-weight:700;font-family:Space Grotesk,sans-serif;margin-top:-10px}.date-card[_ngcontent-%COMP%]{margin-top:40%}.day-txt[_ngcontent-%COMP%]{font-size:14px;font-family:Protest Guerrilla,sans-serif;font-weight:400;font-style:normal}.welcome-card[_ngcontent-%COMP%]{margin-top:50%;background-color:#4b6cb7;padding:30px;border-radius:10px;color:#fff;position:relative}.welcome-card[_ngcontent-%COMP%]{background-color:#4b6cb7;padding:20px;width:100%;margin-top:50%;border-radius:12px;box-shadow:5px 5px 15px #0003,-5px -5px 15px #ffffff80;transition:transform .3s ease,box-shadow .3s ease;position:relative}.welcome-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:10px 10px 25px #0000004d,-10px -10px 25px #ffffff80}.logout-button[_ngcontent-%COMP%]{background-color:#082a7a;color:#fff;border:none;padding:10px;font-size:12px;border-radius:10px;transition:.5s}.logout-button[_ngcontent-%COMP%]:hover{background-color:#2854bb;color:#fff}.dashboard-card[_ngcontent-%COMP%]{background-color:#ccc;padding:20px;width:100%;border-radius:12px;box-shadow:5px 5px 15px #0003,-5px -5px 15px #ffffff80;transition:transform .3s ease,box-shadow .3s ease}.dashboard-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:10px 10px 25px #0000004d,-10px -10px 25px #ffffff80}.card[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(.8);opacity:0;width:50%;height:50vh;padding:20px;background:#fff;box-shadow:0 4px 10px #0003;border-radius:8px;transition:transform .3s ease-out,opacity .3s ease-out;z-index:-1;overflow-y:scroll}.card[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.card[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#efefef}.card[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#868686;border-radius:5px}.card.visible[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1);opacity:1;z-index:1000}.close-btn[_ngcontent-%COMP%]{margin-top:10px;padding:5px 10px;background:#8d8d8d;width:100px;color:#fff;border:none;border-radius:4px;cursor:pointer}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black;text-align:center}.card-container-pdf[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f9f9f9}.card-pdf[_ngcontent-%COMP%]{width:80%;max-width:600px;height:90%;background:#fff;border-radius:10px;box-shadow:0 4px 10px #0000001a;display:flex;flex-direction:column;overflow:hidden}.card-header-pdf[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:1rem;text-align:center;font-size:1.2rem}.popup-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.popup-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 5px 15px #0000004d;text-align:center;animation:popupFadeIn .3s ease;position:relative;overflow-y:auto;height:80vh}"]})};var is=Uint8Array,Zs=Uint16Array,mC=Int32Array,R1=new is([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),L1=new is([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),uC=new is([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$D=function(i,e){for(var t=new Zs(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var r=new mC(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)r[s]=s-t[n]<<5|n;return{b:t,r}},KD=$D(R1,2),ZD=KD.b,hC=KD.r;ZD[28]=258,hC[258]=28;var JD=$D(L1,0),nH=JD.b,qD=JD.r,pC=new Zs(32768);for(ii=0;ii<32768;++ii)rl=(ii&43690)>>1|(ii&21845)<<1,rl=(rl&52428)>>2|(rl&13107)<<2,rl=(rl&61680)>>4|(rl&3855)<<4,pC[ii]=((rl&65280)>>8|(rl&255)<<8)>>1;var rl,ii,vo=function(i,e,t){for(var n=i.length,r=0,s=new Zs(e);r<n;++r)i[r]&&++s[i[r]-1];var a=new Zs(e);for(r=1;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var o;if(t){o=new Zs(1<<e);var l=15-e;for(r=0;r<n;++r)if(i[r])for(var d=r<<4|i[r],p=e-i[r],f=a[i[r]-1]++<<p,g=f|(1<<p)-1;f<=g;++f)o[pC[f]>>l]=d}else for(o=new Zs(n),r=0;r<n;++r)i[r]&&(o[r]=pC[a[i[r]-1]++]>>15-i[r]);return o},_c=new is(288);for(ii=0;ii<144;++ii)_c[ii]=8;var ii;for(ii=144;ii<256;++ii)_c[ii]=9;var ii;for(ii=256;ii<280;++ii)_c[ii]=7;var ii;for(ii=280;ii<288;++ii)_c[ii]=8;var ii,ym=new is(32);for(ii=0;ii<32;++ii)ym[ii]=5;var ii,iH=vo(_c,9,0),rH=vo(_c,9,1),sH=vo(ym,5,0),aH=vo(ym,5,1),lC=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},Ha=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},cC=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},gC=function(i){return(i+7)/8|0},QD=function(i,e,t){return(e==null||e<0)&&(e=0),(t==null||t>i.length)&&(t=i.length),new is(i.subarray(e,t))};var oH=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Wa=function(i,e,t){var n=new Error(e||oH[i]);if(n.code=i,Error.captureStackTrace&&Error.captureStackTrace(n,Wa),!t)throw n;return n},lH=function(i,e,t,n){var r=i.length,s=n?n.length:0;if(!r||e.f&&!e.l)return t||new is(0);var a=!t,o=a||e.i!=2,l=e.i;a&&(t=new is(r*3));var d=function(ne){var ue=t.length;if(ne>ue){var _e=new is(Math.max(ue*2,ne));_e.set(t),t=_e}},p=e.f||0,f=e.p||0,g=e.b||0,m=e.l,x=e.d,y=e.m,S=e.n,b=r*8;do{if(!m){p=Ha(i,f,1);var M=Ha(i,f+1,3);if(f+=3,M)if(M==1)m=rH,x=aH,y=9,S=5;else if(M==2){var U=Ha(i,f,31)+257,N=Ha(i,f+10,15)+4,F=U+Ha(i,f+5,31)+1;f+=14;for(var O=new is(F),B=new is(19),P=0;P<N;++P)B[uC[P]]=Ha(i,f+P*3,7);f+=N*3;for(var V=lC(B),$=(1<<V)-1,K=vo(B,V,1),P=0;P<F;){var ct=K[Ha(i,f,$)];f+=ct&15;var T=ct>>4;if(T<16)O[P++]=T;else{var ot=0,st=0;for(T==16?(st=3+Ha(i,f,3),f+=2,ot=O[P-1]):T==17?(st=3+Ha(i,f,7),f+=3):T==18&&(st=11+Ha(i,f,127),f+=7);st--;)O[P++]=ot}}var Q=O.subarray(0,U),xt=O.subarray(U);y=lC(Q),S=lC(xt),m=vo(Q,y,1),x=vo(xt,S,1)}else Wa(1);else{var T=gC(f)+4,k=i[T-4]|i[T-3]<<8,L=T+k;if(L>r){l&&Wa(0);break}o&&d(g+k),t.set(i.subarray(T,L),g),e.b=g+=k,e.p=f=L*8,e.f=p;continue}if(f>b){l&&Wa(0);break}}o&&d(g+131072);for(var Mt=(1<<y)-1,qt=(1<<S)-1,z=f;;z=f){var ot=m[cC(i,f)&Mt],it=ot>>4;if(f+=ot&15,f>b){l&&Wa(0);break}if(ot||Wa(2),it<256)t[g++]=it;else if(it==256){z=f,m=null;break}else{var Z=it-254;if(it>264){var P=it-257,at=R1[P];Z=Ha(i,f,(1<<at)-1)+ZD[P],f+=at}var pt=x[cC(i,f)&qt],ft=pt>>4;pt||Wa(3),f+=pt&15;var xt=nH[ft];if(ft>3){var at=L1[ft];xt+=cC(i,f)&(1<<at)-1,f+=at}if(f>b){l&&Wa(0);break}o&&d(g+131072);var St=g+Z;if(g<xt){var kt=s-xt,Qt=Math.min(xt,St);for(kt+g<0&&Wa(3);g<Qt;++g)t[g]=n[kt+g]}for(;g<St;++g)t[g]=t[g-xt]}}e.l=m,e.p=z,e.b=g,e.f=p,m&&(p=1,e.m=y,e.d=x,e.n=S)}while(!p);return g!=t.length&&a?QD(t,0,g):t.subarray(0,g)},sl=function(i,e,t){t<<=e&7;var n=e/8|0;i[n]|=t,i[n+1]|=t>>8},xm=function(i,e,t){t<<=e&7;var n=e/8|0;i[n]|=t,i[n+1]|=t>>8,i[n+2]|=t>>16},dC=function(i,e){for(var t=[],n=0;n<i.length;++n)i[n]&&t.push({s:n,f:i[n]});var r=t.length,s=t.slice();if(!r)return{t:eP,l:0};if(r==1){var a=new is(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(L,U){return L.f-U.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],d=0,p=1,f=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};p!=r-1;)o=t[t[d].f<t[f].f?d++:f++],l=t[d!=p&&t[d].f<t[f].f?d++:f++],t[p++]={s:-1,f:o.f+l.f,l:o,r:l};for(var g=s[0].s,n=1;n<r;++n)s[n].s>g&&(g=s[n].s);var m=new Zs(g+1),x=fC(t[p-1],m,0);if(x>e){var n=0,y=0,S=x-e,b=1<<S;for(s.sort(function(U,N){return m[N.s]-m[U.s]||U.f-N.f});n<r;++n){var M=s[n].s;if(m[M]>e)y+=b-(1<<x-m[M]),m[M]=e;else break}for(y>>=S;y>0;){var T=s[n].s;m[T]<e?y-=1<<e-m[T]++-1:++n}for(;n>=0&&y;--n){var k=s[n].s;m[k]==e&&(--m[k],++y)}x=e}return{t:new is(m),l:x}},fC=function(i,e,t){return i.s==-1?Math.max(fC(i.l,e,t+1),fC(i.r,e,t+1)):e[i.s]=t},XD=function(i){for(var e=i.length;e&&!i[--e];);for(var t=new Zs(++e),n=0,r=i[0],s=1,a=function(l){t[n++]=l},o=1;o<=e;++o)if(i[o]==r&&o!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(r),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(r);s=1,r=i[o]}return{c:t.subarray(0,n),n:e}},bm=function(i,e){for(var t=0,n=0;n<e.length;++n)t+=i[n]*e[n];return t},tP=function(i,e,t){var n=t.length,r=gC(e+2);i[r]=n&255,i[r+1]=n>>8,i[r+2]=i[r]^255,i[r+3]=i[r+1]^255;for(var s=0;s<n;++s)i[r+s+4]=t[s];return(r+4+n)*8},YD=function(i,e,t,n,r,s,a,o,l,d,p){sl(e,p++,t),++r[256];for(var f=dC(r,15),g=f.t,m=f.l,x=dC(s,15),y=x.t,S=x.l,b=XD(g),M=b.c,T=b.n,k=XD(y),L=k.c,U=k.n,N=new Zs(19),F=0;F<M.length;++F)++N[M[F]&31];for(var F=0;F<L.length;++F)++N[L[F]&31];for(var O=dC(N,7),B=O.t,P=O.l,V=19;V>4&&!B[uC[V-1]];--V);var $=d+5<<3,K=bm(r,_c)+bm(s,ym)+a,ct=bm(r,g)+bm(s,y)+a+14+3*V+bm(N,B)+2*N[16]+3*N[17]+7*N[18];if(l>=0&&$<=K&&$<=ct)return tP(e,p,i.subarray(l,l+d));var ot,st,Q,xt;if(sl(e,p,1+(ct<K)),p+=2,ct<K){ot=vo(g,m,0),st=g,Q=vo(y,S,0),xt=y;var Mt=vo(B,P,0);sl(e,p,T-257),sl(e,p+5,U-1),sl(e,p+10,V-4),p+=14;for(var F=0;F<V;++F)sl(e,p+3*F,B[uC[F]]);p+=3*V;for(var qt=[M,L],z=0;z<2;++z)for(var it=qt[z],F=0;F<it.length;++F){var Z=it[F]&31;sl(e,p,Mt[Z]),p+=B[Z],Z>15&&(sl(e,p,it[F]>>5&127),p+=it[F]>>12)}}else ot=iH,st=_c,Q=sH,xt=ym;for(var F=0;F<o;++F){var at=n[F];if(at>255){var Z=at>>18&31;xm(e,p,ot[Z+257]),p+=st[Z+257],Z>7&&(sl(e,p,at>>23&31),p+=R1[Z]);var pt=at&31;xm(e,p,Q[pt]),p+=xt[pt],pt>3&&(xm(e,p,at>>5&8191),p+=L1[pt])}else xm(e,p,ot[at]),p+=st[at]}return xm(e,p,ot[256]),p+st[256]},cH=new mC([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),eP=new is(0),dH=function(i,e,t,n,r,s){var a=s.z||i.length,o=new is(n+a+5*(1+Math.ceil(a/7e3))+r),l=o.subarray(n,o.length-r),d=s.l,p=(s.r||0)&7;if(e){p&&(l[0]=s.r>>3);for(var f=cH[e-1],g=f>>13,m=f&8191,x=(1<<t)-1,y=s.p||new Zs(32768),S=s.h||new Zs(x+1),b=Math.ceil(t/3),M=2*b,T=function(mt){return(i[mt]^i[mt+1]<<b^i[mt+2]<<M)&x},k=new mC(25e3),L=new Zs(288),U=new Zs(32),N=0,F=0,O=s.i||0,B=0,P=s.w||0,V=0;O+2<a;++O){var $=T(O),K=O&32767,ct=S[$];if(y[K]=ct,S[$]=K,P<=O){var ot=a-O;if((N>7e3||B>24576)&&(ot>423||!d)){p=YD(i,l,0,k,L,U,F,B,V,O-V,p),B=N=F=0,V=O;for(var st=0;st<286;++st)L[st]=0;for(var st=0;st<30;++st)U[st]=0}var Q=2,xt=0,Mt=m,qt=K-ct&32767;if(ot>2&&$==T(O-qt))for(var z=Math.min(g,ot)-1,it=Math.min(32767,O),Z=Math.min(258,ot);qt<=it&&--Mt&&K!=ct;){if(i[O+Q]==i[O+Q-qt]){for(var at=0;at<Z&&i[O+at]==i[O+at-qt];++at);if(at>Q){if(Q=at,xt=qt,at>z)break;for(var pt=Math.min(qt,at-2),ft=0,st=0;st<pt;++st){var St=O-qt+st&32767,kt=y[St],Qt=St-kt&32767;Qt>ft&&(ft=Qt,ct=St)}}}K=ct,ct=y[K],qt+=K-ct&32767}if(xt){k[B++]=268435456|hC[Q]<<18|qD[xt];var ne=hC[Q]&31,ue=qD[xt]&31;F+=R1[ne]+L1[ue],++L[257+ne],++U[ue],P=O+Q,++N}else k[B++]=i[O],++L[i[O]]}}for(O=Math.max(O,P);O<a;++O)k[B++]=i[O],++L[i[O]];p=YD(i,l,d,k,L,U,F,B,V,O-V,p),d||(s.r=p&7|l[p/8|0]<<3,p-=7,s.h=S,s.p=y,s.i=O,s.w=P)}else{for(var O=s.w||0;O<a+d;O+=65535){var _e=O+65535;_e>=a&&(l[p/8|0]=d,_e=a),p=tP(l,p+1,i.subarray(O,_e))}s.i=a}return QD(o,0,n+gC(p)+r)};var nP=function(){var i=1,e=0;return{p:function(t){for(var n=i,r=e,s=t.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)r+=n+=t[a];n=(n&65535)+15*(n>>16),r=(r&65535)+15*(r>>16)}i=n,e=r},d:function(){return i%=65521,e%=65521,(i&255)<<24|(i&65280)<<8|(e&255)<<8|e>>8}}},uH=function(i,e,t,n,r){if(!r&&(r={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new is(s.length+i.length);a.set(s),a.set(i,s.length),i=a,r.w=s.length}return dH(i,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):20:12+e.mem,t,n,r)};var iP=function(i,e,t){for(;t;++e)i[e]=t,t>>>=8};var hH=function(i,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(i[0]=120,i[1]=n<<6|(e.dictionary&&32),i[1]|=31-(i[0]<<8|i[1])%31,e.dictionary){var r=nP();r.p(e.dictionary),iP(i,2,r.d())}},pH=function(i,e){return((i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31)&&Wa(6,"invalid zlib data"),(i[1]>>5&1)==+!e&&Wa(6,"invalid zlib data: "+(i[1]&32?"need":"unexpected")+" dictionary"),(i[1]>>3&4)+2};function O1(i,e){e||(e={});var t=nP();t.p(i);var n=uH(i,e,e.dictionary?6:2,4);return hH(n,e),iP(n,n.length-4,t.d()),n}function rP(i,e){return lH(i.subarray(pH(i,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var fH=typeof TextDecoder<"u"&&new TextDecoder,mH=0;try{fH.decode(eP,{stream:!0}),mH=1}catch{}var dn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function _C(){dn.console&&typeof dn.console.log=="function"&&dn.console.log.apply(dn.console,arguments)}var Ii={log:_C,warn:function(i){dn.console&&(typeof dn.console.warn=="function"?dn.console.warn.apply(dn.console,arguments):_C.call(null,arguments))},error:function(i){dn.console&&(typeof dn.console.error=="function"?dn.console.error.apply(dn.console,arguments):_C(i))}};function vC(i,e,t){var n=new XMLHttpRequest;n.open("GET",i),n.responseType="blob",n.onload=function(){Td(n.response,e,t)},n.onerror=function(){Ii.error("could not download file")},n.send()}function sP(i){var e=new XMLHttpRequest;e.open("HEAD",i,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function N1(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(e)}}var Sm,wC,Td=dn.saveAs||((typeof window>"u"?"undefined":xi(window))!=="object"||window!==dn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(i,e,t){var n=dn.URL||dn.webkitURL,r=document.createElement("a");e=e||i.name||"download",r.download=e,r.rel="noopener",typeof i=="string"?(r.href=i,r.origin!==location.origin?sP(r.href)?vC(i,e,t):N1(r,r.target="_blank"):N1(r)):(r.href=n.createObjectURL(i),setTimeout(function(){n.revokeObjectURL(r.href)},4e4),setTimeout(function(){N1(r)},0))}:"msSaveOrOpenBlob"in navigator?function(i,e,t){if(e=e||i.name||"download",typeof i=="string")if(sP(i))vC(i,e,t);else{var n=document.createElement("a");n.href=i,n.target="_blank",setTimeout(function(){N1(n)})}else navigator.msSaveOrOpenBlob(function(r,s){return s===void 0?s={autoBom:!1}:xi(s)!=="object"&&(Ii.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}(i,t),e)}:function(i,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof i=="string")return vC(i,e,t);var r=i.type==="application/octet-stream",s=/constructor/i.test(dn.HTMLElement)||dn.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||r&&s)&&(typeof FileReader>"u"?"undefined":xi(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var p=o.result;p=a?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=p:location=p,n=null},o.readAsDataURL(i)}else{var l=dn.URL||dn.webkitURL,d=l.createObjectURL(i);n?n.location=d:location.href=d,n=null,setTimeout(function(){l.revokeObjectURL(d)},4e4)}});function SP(i){var e;i=i||"",this.ok=!1,i.charAt(0)=="#"&&(i=i.substr(1,6)),i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[i=(i=i.replace(/ /g,"")).toLowerCase()]||i;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<t.length;n++){var r=t[n].re,s=t[n].process,a=r.exec(i);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),d=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),d.length==1&&(d="0"+d),"#"+o+l+d}}function xC(i,e){var t=i[0],n=i[1],r=i[2],s=i[3];t=rs(t,n,r,s,e[0],7,-680876936),s=rs(s,t,n,r,e[1],12,-389564586),r=rs(r,s,t,n,e[2],17,606105819),n=rs(n,r,s,t,e[3],22,-1044525330),t=rs(t,n,r,s,e[4],7,-176418897),s=rs(s,t,n,r,e[5],12,1200080426),r=rs(r,s,t,n,e[6],17,-1473231341),n=rs(n,r,s,t,e[7],22,-45705983),t=rs(t,n,r,s,e[8],7,1770035416),s=rs(s,t,n,r,e[9],12,-1958414417),r=rs(r,s,t,n,e[10],17,-42063),n=rs(n,r,s,t,e[11],22,-1990404162),t=rs(t,n,r,s,e[12],7,1804603682),s=rs(s,t,n,r,e[13],12,-40341101),r=rs(r,s,t,n,e[14],17,-1502002290),t=ss(t,n=rs(n,r,s,t,e[15],22,1236535329),r,s,e[1],5,-165796510),s=ss(s,t,n,r,e[6],9,-1069501632),r=ss(r,s,t,n,e[11],14,643717713),n=ss(n,r,s,t,e[0],20,-373897302),t=ss(t,n,r,s,e[5],5,-701558691),s=ss(s,t,n,r,e[10],9,38016083),r=ss(r,s,t,n,e[15],14,-660478335),n=ss(n,r,s,t,e[4],20,-405537848),t=ss(t,n,r,s,e[9],5,568446438),s=ss(s,t,n,r,e[14],9,-1019803690),r=ss(r,s,t,n,e[3],14,-187363961),n=ss(n,r,s,t,e[8],20,1163531501),t=ss(t,n,r,s,e[13],5,-1444681467),s=ss(s,t,n,r,e[2],9,-51403784),r=ss(r,s,t,n,e[7],14,1735328473),t=as(t,n=ss(n,r,s,t,e[12],20,-1926607734),r,s,e[5],4,-378558),s=as(s,t,n,r,e[8],11,-2022574463),r=as(r,s,t,n,e[11],16,1839030562),n=as(n,r,s,t,e[14],23,-35309556),t=as(t,n,r,s,e[1],4,-1530992060),s=as(s,t,n,r,e[4],11,1272893353),r=as(r,s,t,n,e[7],16,-155497632),n=as(n,r,s,t,e[10],23,-1094730640),t=as(t,n,r,s,e[13],4,681279174),s=as(s,t,n,r,e[0],11,-358537222),r=as(r,s,t,n,e[3],16,-722521979),n=as(n,r,s,t,e[6],23,76029189),t=as(t,n,r,s,e[9],4,-640364487),s=as(s,t,n,r,e[12],11,-421815835),r=as(r,s,t,n,e[15],16,530742520),t=os(t,n=as(n,r,s,t,e[2],23,-995338651),r,s,e[0],6,-198630844),s=os(s,t,n,r,e[7],10,1126891415),r=os(r,s,t,n,e[14],15,-1416354905),n=os(n,r,s,t,e[5],21,-57434055),t=os(t,n,r,s,e[12],6,1700485571),s=os(s,t,n,r,e[3],10,-1894986606),r=os(r,s,t,n,e[10],15,-1051523),n=os(n,r,s,t,e[1],21,-2054922799),t=os(t,n,r,s,e[8],6,1873313359),s=os(s,t,n,r,e[15],10,-30611744),r=os(r,s,t,n,e[6],15,-1560198380),n=os(n,r,s,t,e[13],21,1309151649),t=os(t,n,r,s,e[4],6,-145523070),s=os(s,t,n,r,e[11],10,-1120210379),r=os(r,s,t,n,e[2],15,718787259),n=os(n,r,s,t,e[9],21,-343485551),i[0]=xc(t,i[0]),i[1]=xc(n,i[1]),i[2]=xc(r,i[2]),i[3]=xc(s,i[3])}function q1(i,e,t,n,r,s){return e=xc(xc(e,i),xc(n,s)),xc(e<<r|e>>>32-r,t)}function rs(i,e,t,n,r,s,a){return q1(e&t|~e&n,i,e,r,s,a)}function ss(i,e,t,n,r,s,a){return q1(e&n|t&~n,i,e,r,s,a)}function as(i,e,t,n,r,s,a){return q1(e^t^n,i,e,r,s,a)}function os(i,e,t,n,r,s,a){return q1(t^(e|~n),i,e,r,s,a)}function wP(i){var e,t=i.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=i.length;e+=64)xC(n,gH(i.substring(e-64,e)));i=i.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i.length;e++)r[e>>2]|=i.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(xC(n,r),e=0;e<16;e++)r[e]=0;return r[14]=8*t,xC(n,r),n}function gH(i){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=i.charCodeAt(e)+(i.charCodeAt(e+1)<<8)+(i.charCodeAt(e+2)<<16)+(i.charCodeAt(e+3)<<24);return t}Sm=dn.atob.bind(dn),wC=dn.btoa.bind(dn);var aP="0123456789abcdef".split("");function _H(i){for(var e="",t=0;t<4;t++)e+=aP[i>>8*t+4&15]+aP[i>>8*t&15];return e}function vH(i){return String.fromCharCode((255&i)>>0,(65280&i)>>8,(16711680&i)>>16,(4278190080&i)>>24)}function CC(i){return wP(i).map(vH).join("")}var xH=function(i){for(var e=0;e<i.length;e++)i[e]=_H(i[e]);return i.join("")}(wP("hello"))!="5d41402abc4b2a76b9719d911017c592";function xc(i,e){if(xH){var t=(65535&i)+(65535&e);return(i>>16)+(e>>16)+(t>>16)<<16|65535&t}return i+e&4294967295}function MC(i,e){var t,n,r,s;if(i!==t){for(var a=(r=i,s=1+(256/i.length>>0),new Array(s+1).join(r)),o=[],l=0;l<256;l++)o[l]=l;var d=0;for(l=0;l<256;l++){var p=o[l];d=(d+p+a.charCodeAt(l))%256,o[l]=o[d],o[d]=p}t=i,n=o}else o=n;var f=e.length,g=0,m=0,x="";for(l=0;l<f;l++)m=(m+(p=o[g=(g+1)%256]))%256,o[g]=o[m],o[m]=p,a=o[(o[g]+o[m])%256],x+=String.fromCharCode(e.charCodeAt(l)^a);return x}var oP={print:4,modify:8,copy:16,"annot-forms":32};function yh(i,e,t,n){this.v=1,this.r=2;var r=192;i.forEach(function(o){if(oP.perm!==void 0)throw new Error("Invalid permission: "+o);r+=oP[o]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var s=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^r)),this.encryptionKey=CC(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=MC(this.encryptionKey,this.padding)}function Sh(i){if(/[^\u0000-\u00ff]/.test(i))throw new Error("Invalid PDF Name Object: "+i+", Only accept ASCII characters.");for(var e="",t=i.length,n=0;n<t;n++){var r=i.charCodeAt(n);r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?e+="#"+("0"+r.toString(16)).slice(-2):e+=i[n]}return e}function lP(i){if(xi(i)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,r){if(r=r||!1,typeof t!="string"||typeof n!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[n,!!r],s},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),r=[];for(var s in e[t]){var a=e[t][s];try{a[0].apply(i,n)}catch(o){dn.console&&Ii.error("jsPDF PubSub Error",o.message,o)}a[1]&&r.push(s)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function W1(i){if(!(this instanceof W1))return new W1(i);var e="opacity,stroke-opacity".split(",");for(var t in i)i.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=i[t]);this.id="",this.objectNumber=-1}function CP(i,e){this.gState=i,this.matrix=e,this.id="",this.objectNumber=-1}function kd(i,e,t,n,r){if(!(this instanceof kd))return new kd(i,e,t,n,r);this.type=i==="axial"?2:3,this.coords=e,this.colors=t,CP.call(this,n,r)}function wh(i,e,t,n,r){if(!(this instanceof wh))return new wh(i,e,t,n,r);this.boundingBox=i,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,CP.call(this,n,r)}function cn(i){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],r=arguments[2],s=arguments[3],a=[],o=1,l=16,d="S",p=null;xi(i=i||{})==="object"&&(t=i.orientation,n=i.unit||n,r=i.format||r,s=i.compress||i.compressPdf||s,(p=i.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),o=typeof i.userUnit=="number"?Math.abs(i.userUnit):1,i.precision!==void 0&&(e=i.precision),i.floatPrecision!==void 0&&(l=i.floatPrecision),d=i.defaultPathOperation||"S"),a=i.filters||(s===!0?["FlateEncode"]:a),n=n||"mm",t=(""+(t||"P")).toLowerCase();var f=i.putOnlyUsedFonts||!1,g={},m={internal:{},__private__:{}};m.__private__.PubSub=lP;var x="1.3",y=m.__private__.getPdfVersion=function(){return x};m.__private__.setPdfVersion=function(C){x=C};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return S};var b=m.__private__.getPageFormat=function(C){return S[C]};r=r||"a4";var M={COMPAT:"compat",ADVANCED:"advanced"},T=M.COMPAT;function k(){this.saveGraphicsState(),ut(new He(Ut,0,0,-Ut,0,Cl()*Ut).toString()+" cm"),this.setFontSize(this.getFontSize()/Ut),d="n",T=M.ADVANCED}function L(){this.restoreGraphicsState(),d="S",T=M.COMPAT}var U=m.__private__.combineFontStyleAndFontWeight=function(C,W){if(C=="bold"&&W=="normal"||C=="bold"&&W==400||C=="normal"&&W=="italic"||C=="bold"&&W=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return W&&(C=W==400||W==="normal"?C==="italic"?"italic":"normal":W!=700&&W!=="bold"||C!=="normal"?(W==700?"bold":W)+""+C:"bold"),C};m.advancedAPI=function(C){var W=T===M.COMPAT;return W&&k.call(this),typeof C!="function"||(C(this),W&&L.call(this)),this},m.compatAPI=function(C){var W=T===M.ADVANCED;return W&&L.call(this),typeof C!="function"||(C(this),W&&k.call(this)),this},m.isAdvancedAPI=function(){return T===M.ADVANCED};var N,F=function(C){if(T!==M.ADVANCED)throw new Error(C+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=m.roundToPrecision=m.__private__.roundToPrecision=function(C,W){var ht=e||W;if(isNaN(C)||isNaN(ht))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return C.toFixed(ht).replace(/0+$/,"")};N=m.hpf=m.__private__.hpf=typeof l=="number"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return O(C,l)}:l==="smart"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return O(C,C>-1&&C<1?16:5)}:function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return O(C,16)};var B=m.f2=m.__private__.f2=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f2");return O(C,2)},P=m.__private__.f3=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f3");return O(C,3)},V=m.scale=m.__private__.scale=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.scale");return T===M.COMPAT?C*Ut:T===M.ADVANCED?C:void 0},$=function(C){return T===M.COMPAT?Cl()-C:T===M.ADVANCED?C:void 0},K=function(C){return V($(C))};m.__private__.setPrecision=m.setPrecision=function(C){typeof parseInt(C,10)=="number"&&(e=parseInt(C,10))};var ct,ot="00000000000000000000000000000000",st=m.__private__.getFileId=function(){return ot},Q=m.__private__.setFileId=function(C){return ot=C!==void 0&&/^[a-fA-F0-9]{32}$/.test(C)?C.toUpperCase():ot.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Zr=new yh(p.userPermissions,p.userPassword,p.ownerPassword,ot)),ot};m.setFileId=function(C){return Q(C),this},m.getFileId=function(){return st()};var xt=m.__private__.convertDateToPDFDate=function(C){var W=C.getTimezoneOffset(),ht=W<0?"+":"-",bt=Math.floor(Math.abs(W/60)),Nt=Math.abs(W%60),Jt=[ht,Z(bt),"'",Z(Nt),"'"].join("");return["D:",C.getFullYear(),Z(C.getMonth()+1),Z(C.getDate()),Z(C.getHours()),Z(C.getMinutes()),Z(C.getSeconds()),Jt].join("")},Mt=m.__private__.convertPDFDateToDate=function(C){var W=parseInt(C.substr(2,4),10),ht=parseInt(C.substr(6,2),10)-1,bt=parseInt(C.substr(8,2),10),Nt=parseInt(C.substr(10,2),10),Jt=parseInt(C.substr(12,2),10),me=parseInt(C.substr(14,2),10);return new Date(W,ht,bt,Nt,Jt,me,0)},qt=m.__private__.setCreationDate=function(C){var W;if(C===void 0&&(C=new Date),C instanceof Date)W=xt(C);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(C))throw new Error("Invalid argument passed to jsPDF.setCreationDate");W=C}return ct=W},z=m.__private__.getCreationDate=function(C){var W=ct;return C==="jsDate"&&(W=Mt(ct)),W};m.setCreationDate=function(C){return qt(C),this},m.getCreationDate=function(C){return z(C)};var it,Z=m.__private__.padd2=function(C){return("0"+parseInt(C)).slice(-2)},at=m.__private__.padd2Hex=function(C){return("00"+(C=C.toString())).substr(C.length)},pt=0,ft=[],St=[],kt=0,Qt=[],ne=[],ue=!1,_e=St,mt=function(){pt=0,kt=0,St=[],ft=[],Qt=[],ia=Hi(),$r=Hi()};m.__private__.setCustomOutputDestination=function(C){ue=!0,_e=C};var Yt=function(C){ue||(_e=C)};m.__private__.resetCustomOutputDestination=function(){ue=!1,_e=St};var ut=m.__private__.out=function(C){return C=C.toString(),kt+=C.length+1,_e.push(C),_e},Te=m.__private__.write=function(C){return ut(arguments.length===1?C.toString():Array.prototype.join.call(arguments," "))},ae=m.__private__.getArrayBuffer=function(C){for(var W=C.length,ht=new ArrayBuffer(W),bt=new Uint8Array(ht);W--;)bt[W]=C.charCodeAt(W);return ht},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ee};var Zt=i.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(C){return Zt=T===M.ADVANCED?C/Ut:C,this};var tt,j=m.__private__.getFontSize=m.getFontSize=function(){return T===M.COMPAT?Zt:Zt*Ut},yt=i.R2L||!1;m.__private__.setR2L=m.setR2L=function(C){return yt=C,this},m.__private__.getR2L=m.getR2L=function(){return yt};var jt,Xt=m.__private__.setZoomMode=function(C){var W=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(C))tt=C;else if(isNaN(C)){if(W.indexOf(C)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+C+'" is not recognized.');tt=C}else tt=parseInt(C,10)};m.__private__.getZoomMode=function(){return tt};var Ht,we=m.__private__.setPageMode=function(C){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(C)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+C+'" is not recognized.');jt=C};m.__private__.getPageMode=function(){return jt};var ge=m.__private__.setLayoutMode=function(C){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(C)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+C+'" is not recognized.');Ht=C};m.__private__.getLayoutMode=function(){return Ht},m.__private__.setDisplayMode=m.setDisplayMode=function(C,W,ht){return Xt(C),ge(W),we(ht),this};var ce={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(C){if(Object.keys(ce).indexOf(C)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ce[C]},m.__private__.getDocumentProperties=function(){return ce},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(C){for(var W in ce)ce.hasOwnProperty(W)&&C[W]&&(ce[W]=C[W]);return this},m.__private__.setDocumentProperty=function(C,W){if(Object.keys(ce).indexOf(C)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ce[C]=W};var Re,Ut,Me,Ce,Xe,ye={},Ge={},nn=[],Ye={},It={},ve={},$t={},ie=null,be=0,se=[],Pe=new lP(m),ri=i.hotfixes||[],qn={},kn={},Yi=[],He=function C(W,ht,bt,Nt,Jt,me){if(!(this instanceof C))return new C(W,ht,bt,Nt,Jt,me);isNaN(W)&&(W=1),isNaN(ht)&&(ht=0),isNaN(bt)&&(bt=0),isNaN(Nt)&&(Nt=1),isNaN(Jt)&&(Jt=0),isNaN(me)&&(me=0),this._matrix=[W,ht,bt,Nt,Jt,me]};Object.defineProperty(He.prototype,"sx",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(He.prototype,"shy",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(He.prototype,"shx",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(He.prototype,"sy",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(He.prototype,"tx",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(He.prototype,"ty",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(He.prototype,"a",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(He.prototype,"b",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(He.prototype,"c",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(He.prototype,"d",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(He.prototype,"e",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(He.prototype,"f",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(He.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(He.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(He.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(He.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),He.prototype.join=function(C){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(C)},He.prototype.multiply=function(C){var W=C.sx*this.sx+C.shy*this.shx,ht=C.sx*this.shy+C.shy*this.sy,bt=C.shx*this.sx+C.sy*this.shx,Nt=C.shx*this.shy+C.sy*this.sy,Jt=C.tx*this.sx+C.ty*this.shx+this.tx,me=C.tx*this.shy+C.ty*this.sy+this.ty;return new He(W,ht,bt,Nt,Jt,me)},He.prototype.decompose=function(){var C=this.sx,W=this.shy,ht=this.shx,bt=this.sy,Nt=this.tx,Jt=this.ty,me=Math.sqrt(C*C+W*W),Le=(C/=me)*ht+(W/=me)*bt;ht-=C*Le,bt-=W*Le;var Je=Math.sqrt(ht*ht+bt*bt);return Le/=Je,C*(bt/=Je)<W*(ht/=Je)&&(C=-C,W=-W,Le=-Le,me=-me),{scale:new He(me,0,0,Je,0,0),translate:new He(1,0,0,1,Nt,Jt),rotate:new He(C,W,-W,C,0,0),skew:new He(1,0,Le,1,0,0)}},He.prototype.toString=function(C){return this.join(" ")},He.prototype.inversed=function(){var C=this.sx,W=this.shy,ht=this.shx,bt=this.sy,Nt=this.tx,Jt=this.ty,me=1/(C*bt-W*ht),Le=bt*me,Je=-W*me,bn=-ht*me,vn=C*me;return new He(Le,Je,bn,vn,-Le*Nt-bn*Jt,-Je*Nt-vn*Jt)},He.prototype.applyToPoint=function(C){var W=C.x*this.sx+C.y*this.shx+this.tx,ht=C.x*this.shy+C.y*this.sy+this.ty;return new ru(W,ht)},He.prototype.applyToRectangle=function(C){var W=this.applyToPoint(C),ht=this.applyToPoint(new ru(C.x+C.w,C.y+C.h));return new rp(W.x,W.y,ht.x-W.x,ht.y-W.y)},He.prototype.clone=function(){var C=this.sx,W=this.shy,ht=this.shx,bt=this.sy,Nt=this.tx,Jt=this.ty;return new He(C,W,ht,bt,Nt,Jt)},m.Matrix=He;var ys=m.matrixMult=function(C,W){return W.multiply(C)},Fs=new He(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Fs;var $i=function(C,W){if(!It[C]){var ht=(W instanceof kd?"Sh":"P")+(Object.keys(Ye).length+1).toString(10);W.id=ht,It[C]=ht,Ye[ht]=W,Pe.publish("addPattern",W)}};m.ShadingPattern=kd,m.TilingPattern=wh,m.addShadingPattern=function(C,W){return F("addShadingPattern()"),$i(C,W),this},m.beginTilingPattern=function(C){F("beginTilingPattern()"),h0(C.boundingBox[0],C.boundingBox[1],C.boundingBox[2]-C.boundingBox[0],C.boundingBox[3]-C.boundingBox[1],C.matrix)},m.endTilingPattern=function(C,W){F("endTilingPattern()"),W.stream=ne[it].join(`
`),$i(C,W),Pe.publish("endTilingPattern",W),Yi.pop().restore()};var ji=m.__private__.newObject=function(){var C=Hi();return Yr(C,!0),C},Hi=m.__private__.newObjectDeferred=function(){return pt++,ft[pt]=function(){return kt},pt},Yr=function(C,W){return W=typeof W=="boolean"&&W,ft[C]=kt,W&&ut(C+" 0 obj"),C},Ea=m.__private__.newAdditionalObject=function(){var C={objId:Hi(),content:""};return Qt.push(C),C},ia=Hi(),$r=Hi(),Ss=m.__private__.decodeColorString=function(C){var W=C.split(" ");if(W.length!==2||W[1]!=="g"&&W[1]!=="G")W.length===5&&(W[4]==="k"||W[4]==="K")&&(W=[(1-W[0])*(1-W[3]),(1-W[1])*(1-W[3]),(1-W[2])*(1-W[3]),"r"]);else{var ht=parseFloat(W[0]);W=[ht,ht,ht,"r"]}for(var bt="#",Nt=0;Nt<3;Nt++)bt+=("0"+Math.floor(255*parseFloat(W[Nt])).toString(16)).slice(-2);return bt},ws=m.__private__.encodeColorString=function(C){var W;typeof C=="string"&&(C={ch1:C});var ht=C.ch1,bt=C.ch2,Nt=C.ch3,Jt=C.ch4,me=C.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ht=="string"&&ht.charAt(0)!=="#"){var Le=new SP(ht);if(Le.ok)ht=Le.toHex();else if(!/^\d*\.?\d*$/.test(ht))throw new Error('Invalid color "'+ht+'" passed to jsPDF.encodeColorString.')}if(typeof ht=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ht)&&(ht="#"+ht[1]+ht[1]+ht[2]+ht[2]+ht[3]+ht[3]),typeof ht=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ht)){var Je=parseInt(ht.substr(1),16);ht=Je>>16&255,bt=Je>>8&255,Nt=255&Je}if(bt===void 0||Jt===void 0&&ht===bt&&bt===Nt)if(typeof ht=="string")W=ht+" "+me[0];else switch(C.precision){case 2:W=B(ht/255)+" "+me[0];break;case 3:default:W=P(ht/255)+" "+me[0]}else if(Jt===void 0||xi(Jt)==="object"){if(Jt&&!isNaN(Jt.a)&&Jt.a===0)return W=["1.","1.","1.",me[1]].join(" ");if(typeof ht=="string")W=[ht,bt,Nt,me[1]].join(" ");else switch(C.precision){case 2:W=[B(ht/255),B(bt/255),B(Nt/255),me[1]].join(" ");break;default:case 3:W=[P(ht/255),P(bt/255),P(Nt/255),me[1]].join(" ")}}else if(typeof ht=="string")W=[ht,bt,Nt,Jt,me[2]].join(" ");else switch(C.precision){case 2:W=[B(ht),B(bt),B(Nt),B(Jt),me[2]].join(" ");break;case 3:default:W=[P(ht),P(bt),P(Nt),P(Jt),me[2]].join(" ")}return W},ra=m.__private__.getFilters=function(){return a},Cs=m.__private__.putStream=function(C){var W=(C=C||{}).data||"",ht=C.filters||ra(),bt=C.alreadyAppliedFilters||[],Nt=C.addLength1||!1,Jt=W.length,me=C.objectId,Le=function(Jr){return Jr};if(p!==null&&me===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Le=Zr.encryptor(me,0));var Je={};ht===!0&&(ht=["FlateEncode"]);var bn=C.additionalKeyValues||[],vn=(Je=cn.API.processDataByFilters!==void 0?cn.API.processDataByFilters(W,ht):{data:W,reverseChain:[]}).reverseChain+(Array.isArray(bt)?bt.join(" "):bt.toString());if(Je.data.length!==0&&(bn.push({key:"Length",value:Je.data.length}),Nt===!0&&bn.push({key:"Length1",value:Jt})),vn.length!=0)if(vn.split("/").length-1==1)bn.push({key:"Filter",value:vn});else{bn.push({key:"Filter",value:"["+vn+"]"});for(var Xn=0;Xn<bn.length;Xn+=1)if(bn[Xn].key==="DecodeParms"){for(var Wi=[],Zi=0;Zi<Je.reverseChain.split("/").length-1;Zi+=1)Wi.push("null");Wi.push(bn[Xn].value),bn[Xn].value="["+Wi.join(" ")+"]"}}ut("<<");for(var mr=0;mr<bn.length;mr++)ut("/"+bn[mr].key+" "+bn[mr].value);ut(">>"),Je.data.length!==0&&(ut("stream"),ut(Le(Je.data)),ut("endstream"))},sa=m.__private__.putPage=function(C){var W=C.number,ht=C.data,bt=C.objId,Nt=C.contentsObjId;Yr(bt,!0),ut("<</Type /Page"),ut("/Parent "+C.rootDictionaryObjId+" 0 R"),ut("/Resources "+C.resourceDictionaryObjId+" 0 R"),ut("/MediaBox ["+parseFloat(N(C.mediaBox.bottomLeftX))+" "+parseFloat(N(C.mediaBox.bottomLeftY))+" "+N(C.mediaBox.topRightX)+" "+N(C.mediaBox.topRightY)+"]"),C.cropBox!==null&&ut("/CropBox ["+N(C.cropBox.bottomLeftX)+" "+N(C.cropBox.bottomLeftY)+" "+N(C.cropBox.topRightX)+" "+N(C.cropBox.topRightY)+"]"),C.bleedBox!==null&&ut("/BleedBox ["+N(C.bleedBox.bottomLeftX)+" "+N(C.bleedBox.bottomLeftY)+" "+N(C.bleedBox.topRightX)+" "+N(C.bleedBox.topRightY)+"]"),C.trimBox!==null&&ut("/TrimBox ["+N(C.trimBox.bottomLeftX)+" "+N(C.trimBox.bottomLeftY)+" "+N(C.trimBox.topRightX)+" "+N(C.trimBox.topRightY)+"]"),C.artBox!==null&&ut("/ArtBox ["+N(C.artBox.bottomLeftX)+" "+N(C.artBox.bottomLeftY)+" "+N(C.artBox.topRightX)+" "+N(C.artBox.topRightY)+"]"),typeof C.userUnit=="number"&&C.userUnit!==1&&ut("/UserUnit "+C.userUnit),Pe.publish("putPage",{objId:bt,pageContext:se[W],pageNumber:W,page:ht}),ut("/Contents "+Nt+" 0 R"),ut(">>"),ut("endobj");var Jt=ht.join(`
`);return T===M.ADVANCED&&(Jt+=`
Q`),Yr(Nt,!0),Cs({data:Jt,filters:ra(),objectId:Nt}),ut("endobj"),bt},Io=m.__private__.putPages=function(){var C,W,ht=[];for(C=1;C<=be;C++)se[C].objId=Hi(),se[C].contentsObjId=Hi();for(C=1;C<=be;C++)ht.push(sa({number:C,data:ne[C],objId:se[C].objId,contentsObjId:se[C].contentsObjId,mediaBox:se[C].mediaBox,cropBox:se[C].cropBox,bleedBox:se[C].bleedBox,trimBox:se[C].trimBox,artBox:se[C].artBox,userUnit:se[C].userUnit,rootDictionaryObjId:ia,resourceDictionaryObjId:$r}));Yr(ia,!0),ut("<</Type /Pages");var bt="/Kids [";for(W=0;W<be;W++)bt+=ht[W]+" 0 R ";ut(bt+"]"),ut("/Count "+be),ut(">>"),ut("endobj"),Pe.publish("postPutPages")},bl=function(C){Pe.publish("putFont",{font:C,out:ut,newObject:ji,putStream:Cs}),C.isAlreadyPutted!==!0&&(C.objectNumber=ji(),ut("<<"),ut("/Type /Font"),ut("/BaseFont /"+Sh(C.postScriptName)),ut("/Subtype /Type1"),typeof C.encoding=="string"&&ut("/Encoding /"+C.encoding),ut("/FirstChar 32"),ut("/LastChar 255"),ut(">>"),ut("endobj"))},et=function(){for(var C in ye)ye.hasOwnProperty(C)&&(f===!1||f===!0&&g.hasOwnProperty(C))&&bl(ye[C])},Dt=function(C){C.objectNumber=ji();var W=[];W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Form"}),W.push({key:"BBox",value:"["+[N(C.x),N(C.y),N(C.x+C.width),N(C.y+C.height)].join(" ")+"]"}),W.push({key:"Matrix",value:"["+C.matrix.toString()+"]"});var ht=C.pages[1].join(`
`);Cs({data:ht,additionalKeyValues:W,objectId:C.objectNumber}),ut("endobj")},Wt=function(){for(var C in qn)qn.hasOwnProperty(C)&&Dt(qn[C])},Gt=function(C,W){var ht,bt=[],Nt=1/(W-1);for(ht=0;ht<1;ht+=Nt)bt.push(ht);if(bt.push(1),C[0].offset!=0){var Jt={offset:0,color:C[0].color};C.unshift(Jt)}if(C[C.length-1].offset!=1){var me={offset:1,color:C[C.length-1].color};C.push(me)}for(var Le="",Je=0,bn=0;bn<bt.length;bn++){for(ht=bt[bn];ht>C[Je+1].offset;)Je++;var vn=C[Je].offset,Xn=(ht-vn)/(C[Je+1].offset-vn),Wi=C[Je].color,Zi=C[Je+1].color;Le+=at(Math.round((1-Xn)*Wi[0]+Xn*Zi[0]).toString(16))+at(Math.round((1-Xn)*Wi[1]+Xn*Zi[1]).toString(16))+at(Math.round((1-Xn)*Wi[2]+Xn*Zi[2]).toString(16))}return Le.trim()},Lt=function(C,W){W||(W=21);var ht=ji(),bt=Gt(C.colors,W),Nt=[];Nt.push({key:"FunctionType",value:"0"}),Nt.push({key:"Domain",value:"[0.0 1.0]"}),Nt.push({key:"Size",value:"["+W+"]"}),Nt.push({key:"BitsPerSample",value:"8"}),Nt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Nt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Cs({data:bt,additionalKeyValues:Nt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ht}),ut("endobj"),C.objectNumber=ji(),ut("<< /ShadingType "+C.type),ut("/ColorSpace /DeviceRGB");var Jt="/Coords ["+N(parseFloat(C.coords[0]))+" "+N(parseFloat(C.coords[1]))+" ";C.type===2?Jt+=N(parseFloat(C.coords[2]))+" "+N(parseFloat(C.coords[3])):Jt+=N(parseFloat(C.coords[2]))+" "+N(parseFloat(C.coords[3]))+" "+N(parseFloat(C.coords[4]))+" "+N(parseFloat(C.coords[5])),ut(Jt+="]"),C.matrix&&ut("/Matrix ["+C.matrix.toString()+"]"),ut("/Function "+ht+" 0 R"),ut("/Extend [true true]"),ut(">>"),ut("endobj")},xe=function(C,W){var ht=Hi(),bt=ji();W.push({resourcesOid:ht,objectOid:bt}),C.objectNumber=bt;var Nt=[];Nt.push({key:"Type",value:"/Pattern"}),Nt.push({key:"PatternType",value:"1"}),Nt.push({key:"PaintType",value:"1"}),Nt.push({key:"TilingType",value:"1"}),Nt.push({key:"BBox",value:"["+C.boundingBox.map(N).join(" ")+"]"}),Nt.push({key:"XStep",value:N(C.xStep)}),Nt.push({key:"YStep",value:N(C.yStep)}),Nt.push({key:"Resources",value:ht+" 0 R"}),C.matrix&&Nt.push({key:"Matrix",value:"["+C.matrix.toString()+"]"}),Cs({data:C.stream,additionalKeyValues:Nt,objectId:C.objectNumber}),ut("endobj")},Ee=function(C){var W;for(W in Ye)Ye.hasOwnProperty(W)&&(Ye[W]instanceof kd?Lt(Ye[W]):Ye[W]instanceof wh&&xe(Ye[W],C))},Ne=function(C){for(var W in C.objectNumber=ji(),ut("<<"),C)switch(W){case"opacity":ut("/ca "+B(C[W]));break;case"stroke-opacity":ut("/CA "+B(C[W]))}ut(">>"),ut("endobj")},Ue=function(){var C;for(C in ve)ve.hasOwnProperty(C)&&Ne(ve[C])},rn=function(){for(var C in ut("/XObject <<"),qn)qn.hasOwnProperty(C)&&qn[C].objectNumber>=0&&ut("/"+C+" "+qn[C].objectNumber+" 0 R");Pe.publish("putXobjectDict"),ut(">>")},un=function(){Zr.oid=ji(),ut("<<"),ut("/Filter /Standard"),ut("/V "+Zr.v),ut("/R "+Zr.r),ut("/U <"+Zr.toHexString(Zr.U)+">"),ut("/O <"+Zr.toHexString(Zr.O)+">"),ut("/P "+Zr.P),ut(">>"),ut("endobj")},$e=function(){for(var C in ut("/Font <<"),ye)ye.hasOwnProperty(C)&&(f===!1||f===!0&&g.hasOwnProperty(C))&&ut("/"+C+" "+ye[C].objectNumber+" 0 R");ut(">>")},On=function(){if(Object.keys(Ye).length>0){for(var C in ut("/Shading <<"),Ye)Ye.hasOwnProperty(C)&&Ye[C]instanceof kd&&Ye[C].objectNumber>=0&&ut("/"+C+" "+Ye[C].objectNumber+" 0 R");Pe.publish("putShadingPatternDict"),ut(">>")}},Nn=function(C){if(Object.keys(Ye).length>0){for(var W in ut("/Pattern <<"),Ye)Ye.hasOwnProperty(W)&&Ye[W]instanceof m.TilingPattern&&Ye[W].objectNumber>=0&&Ye[W].objectNumber<C&&ut("/"+W+" "+Ye[W].objectNumber+" 0 R");Pe.publish("putTilingPatternDict"),ut(">>")}},Fi=function(){if(Object.keys(ve).length>0){var C;for(C in ut("/ExtGState <<"),ve)ve.hasOwnProperty(C)&&ve[C].objectNumber>=0&&ut("/"+C+" "+ve[C].objectNumber+" 0 R");Pe.publish("putGStateDict"),ut(">>")}},_n=function(C){Yr(C.resourcesOid,!0),ut("<<"),ut("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),$e(),On(),Nn(C.objectOid),Fi(),rn(),ut(">>"),ut("endobj")},Fn=function(){var C=[];et(),Ue(),Wt(),Ee(C),Pe.publish("putResources"),C.forEach(_n),_n({resourcesOid:$r,objectOid:Number.MAX_SAFE_INTEGER}),Pe.publish("postPutResources")},Ke=function(){Pe.publish("putAdditionalObjects");for(var C=0;C<Qt.length;C++){var W=Qt[C];Yr(W.objId,!0),ut(W.content),ut("endobj")}Pe.publish("postPutAdditionalObjects")},Ki=function(C){Ge[C.fontName]=Ge[C.fontName]||{},Ge[C.fontName][C.fontStyle]=C.id},zn=function(C,W,ht,bt,Nt){var Jt={id:"F"+(Object.keys(ye).length+1).toString(10),postScriptName:C,fontName:W,fontStyle:ht,encoding:bt,isStandardFont:Nt||!1,metadata:{}};return Pe.publish("addFont",{font:Jt,instance:this}),ye[Jt.id]=Jt,Ki(Jt),Jt.id},hs=function(C){for(var W=0,ht=ee.length;W<ht;W++){var bt=zn.call(this,C[W][0],C[W][1],C[W][2],ee[W][3],!0);f===!1&&(g[bt]=!0);var Nt=C[W][0].split("-");Ki({id:bt,fontName:Nt[0],fontStyle:Nt[1]||""})}Pe.publish("addFonts",{fonts:ye,dictionary:Ge})},kr=function(C){return C.foo=function(){try{return C.apply(this,arguments)}catch(bt){var W=bt.stack||"";~W.indexOf(" at ")&&(W=W.split(" at ")[1]);var ht="Error in function "+W.split(`
`)[0].split("<")[0]+": "+bt.message;if(!dn.console)throw new Error(ht);dn.console.error(ht,bt),dn.alert&&alert(ht)}},C.foo.bar=C,C.foo},hr=function(C,W){var ht,bt,Nt,Jt,me,Le,Je,bn,vn;if(Nt=(W=W||{}).sourceEncoding||"Unicode",me=W.outputEncoding,(W.autoencode||me)&&ye[Re].metadata&&ye[Re].metadata[Nt]&&ye[Re].metadata[Nt].encoding&&(Jt=ye[Re].metadata[Nt].encoding,!me&&ye[Re].encoding&&(me=ye[Re].encoding),!me&&Jt.codePages&&(me=Jt.codePages[0]),typeof me=="string"&&(me=Jt[me]),me)){for(Je=!1,Le=[],ht=0,bt=C.length;ht<bt;ht++)(bn=me[C.charCodeAt(ht)])?Le.push(String.fromCharCode(bn)):Le.push(C[ht]),Le[ht].charCodeAt(0)>>8&&(Je=!0);C=Le.join("")}for(ht=C.length;Je===void 0&&ht!==0;)C.charCodeAt(ht-1)>>8&&(Je=!0),ht--;if(!Je)return C;for(Le=W.noBOM?[]:[254,255],ht=0,bt=C.length;ht<bt;ht++){if((vn=(bn=C.charCodeAt(ht))>>8)>>8)throw new Error("Character at position "+ht+" of string '"+C+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Le.push(vn),Le.push(bn-(vn<<8))}return String.fromCharCode.apply(void 0,Le)},pr=m.__private__.pdfEscape=m.pdfEscape=function(C,W){return hr(C,W).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},si=m.__private__.beginPage=function(C){ne[++be]=[],se[be]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(C[0]),topRightY:Number(C[1])}},fr(be),Yt(ne[it])},zr=function(C,W){var ht,bt,Nt;switch(t=W||t,typeof C=="string"&&(ht=b(C.toLowerCase()),Array.isArray(ht)&&(bt=ht[0],Nt=ht[1])),Array.isArray(C)&&(bt=C[0]*Ut,Nt=C[1]*Ut),isNaN(bt)&&(bt=r[0],Nt=r[1]),(bt>14400||Nt>14400)&&(Ii.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),bt=Math.min(14400,bt),Nt=Math.min(14400,Nt)),r=[bt,Nt],t.substr(0,1)){case"l":Nt>bt&&(r=[Nt,bt]);break;case"p":bt>Nt&&(r=[Nt,bt])}si(r),o0(tp),ut(Ta),np!==0&&ut(np+" J"),ip!==0&&ut(ip+" j"),Pe.publish("addPage",{pageNumber:be})},Kr=function(C){C>0&&C<=be&&(ne.splice(C,1),se.splice(C,1),be--,it>be&&(it=be),this.setPage(it))},fr=function(C){C>0&&C<=be&&(it=C)},Ir=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return ne.length-1},yl=function(C,W,ht){var bt,Nt=void 0;return ht=ht||{},C=C!==void 0?C:ye[Re].fontName,W=W!==void 0?W:ye[Re].fontStyle,bt=C.toLowerCase(),Ge[bt]!==void 0&&Ge[bt][W]!==void 0?Nt=Ge[bt][W]:Ge[C]!==void 0&&Ge[C][W]!==void 0?Nt=Ge[C][W]:ht.disableWarning===!1&&Ii.warn("Unable to look up font label for font '"+C+"', '"+W+"'. Refer to getFontList() for available fonts."),Nt||ht.noFallback||(Nt=Ge.times[W])==null&&(Nt=Ge.times.normal),Nt},Aa=m.__private__.putInfo=function(){var C=ji(),W=function(bt){return bt};for(var ht in p!==null&&(W=Zr.encryptor(C,0)),ut("<<"),ut("/Producer ("+pr(W("jsPDF "+cn.version))+")"),ce)ce.hasOwnProperty(ht)&&ce[ht]&&ut("/"+ht.substr(0,1).toUpperCase()+ht.substr(1)+" ("+pr(W(ce[ht]))+")");ut("/CreationDate ("+pr(W(ct))+")"),ut(">>"),ut("endobj")},Zh=m.__private__.putCatalog=function(C){var W=(C=C||{}).rootDictionaryObjId||ia;switch(ji(),ut("<<"),ut("/Type /Catalog"),ut("/Pages "+W+" 0 R"),tt||(tt="fullwidth"),tt){case"fullwidth":ut("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ut("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ut("/OpenAction [3 0 R /Fit]");break;case"original":ut("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ht=""+tt;ht.substr(ht.length-1)==="%"&&(tt=parseInt(tt)/100),typeof tt=="number"&&ut("/OpenAction [3 0 R /XYZ null null "+B(tt)+"]")}switch(Ht||(Ht="continuous"),Ht){case"continuous":ut("/PageLayout /OneColumn");break;case"single":ut("/PageLayout /SinglePage");break;case"two":case"twoleft":ut("/PageLayout /TwoColumnLeft");break;case"tworight":ut("/PageLayout /TwoColumnRight")}jt&&ut("/PageMode /"+jt),Pe.publish("putCatalog"),ut(">>"),ut("endobj")},db=m.__private__.putTrailer=function(){ut("trailer"),ut("<<"),ut("/Size "+(pt+1)),ut("/Root "+pt+" 0 R"),ut("/Info "+(pt-1)+" 0 R"),p!==null&&ut("/Encrypt "+Zr.oid+" 0 R"),ut("/ID [ <"+ot+"> <"+ot+"> ]"),ut(">>")},ub=m.__private__.putHeader=function(){ut("%PDF-"+x),ut("%\xBA\xDF\xAC\xE0")},hb=m.__private__.putXRef=function(){var C="0000000000";ut("xref"),ut("0 "+(pt+1)),ut("0000000000 65535 f ");for(var W=1;W<=pt;W++)typeof ft[W]=="function"?ut((C+ft[W]()).slice(-10)+" 00000 n "):ft[W]!==void 0?ut((C+ft[W]).slice(-10)+" 00000 n "):ut("0000000000 00000 n ")},Do=m.__private__.buildDocument=function(){mt(),Yt(St),Pe.publish("buildDocument"),ub(),Io(),Ke(),Fn(),p!==null&&un(),Aa(),Zh();var C=kt;return hb(),db(),ut("startxref"),ut(""+C),ut("%%EOF"),Yt(ne[it]),St.join(`
`)},Qd=m.__private__.getBlob=function(C){return new Blob([ae(C)],{type:"application/pdf"})},tu=m.output=m.__private__.output=kr(function(C,W){switch(typeof(W=W||{})=="string"?W={filename:W}:W.filename=W.filename||"generated.pdf",C){case void 0:return Do();case"save":m.save(W.filename);break;case"arraybuffer":return ae(Do());case"blob":return Qd(Do());case"bloburi":case"bloburl":if(dn.URL!==void 0&&typeof dn.URL.createObjectURL=="function")return dn.URL&&dn.URL.createObjectURL(Qd(Do()))||void 0;Ii.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ht="",bt=Do();try{ht=wC(bt)}catch{ht=wC(unescape(encodeURIComponent(bt)))}return"data:application/pdf;filename="+W.filename+";base64,"+ht;case"pdfobjectnewwindow":if(Object.prototype.toString.call(dn)==="[object Window]"){var Nt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Jt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';W.pdfObjectUrl&&(Nt=W.pdfObjectUrl,Jt="");var me='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Nt+'"'+Jt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(W)+");<\/script></body></html>",Le=dn.open();return Le!==null&&Le.document.write(me),Le}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(dn)==="[object Window]"){var Je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(W.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+W.filename+'" width="500px" height="400px" /></body></html>',bn=dn.open();if(bn!==null){bn.document.write(Je);var vn=this;bn.document.documentElement.querySelector("#pdfViewer").onload=function(){bn.document.title=W.filename,bn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(vn.output("bloburl"))}}return bn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(dn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Xn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",W)+'"></iframe></body></html>',Wi=dn.open();if(Wi!==null&&(Wi.document.write(Xn),Wi.document.title=W.filename),Wi||typeof safari>"u")return Wi;break;case"datauri":case"dataurl":return dn.document.location.href=this.output("datauristring",W);default:return null}}),i0=function(C){return Array.isArray(ri)===!0&&ri.indexOf(C)>-1};switch(n){case"pt":Ut=1;break;case"mm":Ut=72/25.4;break;case"cm":Ut=72/2.54;break;case"in":Ut=72;break;case"px":Ut=i0("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ut=12;break;case"ex":Ut=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ut=n}var Zr=null;qt(),Q();var pb=function(C){return p!==null?Zr.encryptor(C,0):function(W){return W}},r0=m.__private__.getPageInfo=m.getPageInfo=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:se[C].objId,pageNumber:C,pageContext:se[C]}},fn=m.__private__.getPageInfoByObjId=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var W in se)if(se[W].objId===C)break;return r0(W)},fb=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:se[it].objId,pageNumber:it,pageContext:se[it]}};m.addPage=function(){return zr.apply(this,arguments),this},m.setPage=function(){return fr.apply(this,arguments),Yt.call(this,ne[it]),this},m.insertPage=function(C){return this.addPage(),this.movePage(it,C),this},m.movePage=function(C,W){var ht,bt;if(C>W){ht=ne[C],bt=se[C];for(var Nt=C;Nt>W;Nt--)ne[Nt]=ne[Nt-1],se[Nt]=se[Nt-1];ne[W]=ht,se[W]=bt,this.setPage(W)}else if(C<W){ht=ne[C],bt=se[C];for(var Jt=C;Jt<W;Jt++)ne[Jt]=ne[Jt+1],se[Jt]=se[Jt+1];ne[W]=ht,se[W]=bt,this.setPage(W)}return this},m.deletePage=function(){return Kr.apply(this,arguments),this},m.__private__.text=m.text=function(C,W,ht,bt,Nt){var Jt,me,Le,Je,bn,vn,Xn,Wi,Zi,mr=(bt=bt||{}).scope||this;if(typeof C=="number"&&typeof W=="number"&&(typeof ht=="string"||Array.isArray(ht))){var Jr=ht;ht=W,W=C,C=Jr}if(arguments[3]instanceof He?(F("The transform parameter of text() with a Matrix value"),Zi=Nt):(Le=arguments[4],Je=arguments[5],xi(Xn=arguments[3])==="object"&&Xn!==null||(typeof Le=="string"&&(Je=Le,Le=null),typeof Xn=="string"&&(Je=Xn,Xn=null),typeof Xn=="number"&&(Le=Xn,Xn=null),bt={flags:Xn,angle:Le,align:Je})),isNaN(W)||isNaN(ht)||C==null)throw new Error("Invalid arguments passed to jsPDF.text");if(C.length===0)return mr;var Dr="",ka=!1,Bs=typeof bt.lineHeightFactor=="number"?bt.lineHeightFactor:zc,eo=mr.internal.scaleFactor;function p0(Di){return Di=Di.split("	").join(Array(bt.TabLen||9).join(" ")),pr(Di,Xn)}function lp(Di){for(var Pi,rr=Di.concat(),Cr=[],No=rr.length;No--;)typeof(Pi=rr.shift())=="string"?Cr.push(Pi):Array.isArray(Di)&&(Pi.length===1||Pi[1]===void 0&&Pi[2]===void 0)?Cr.push(Pi[0]):Cr.push([Pi[0],Pi[1],Pi[2]]);return Cr}function cp(Di,Pi){var rr;if(typeof Di=="string")rr=Pi(Di)[0];else if(Array.isArray(Di)){for(var Cr,No,_p=Di.concat(),mu=[],v0=_p.length;v0--;)typeof(Cr=_p.shift())=="string"?mu.push(Pi(Cr)[0]):Array.isArray(Cr)&&typeof Cr[0]=="string"&&(No=Pi(Cr[0],Cr[1],Cr[2]),mu.push([No[0],No[1],No[2]]));rr=mu}return rr}var au=!1,dp=!0;if(typeof C=="string")au=!0;else if(Array.isArray(C)){var up=C.concat();me=[];for(var ou,jr=up.length;jr--;)(typeof(ou=up.shift())!="string"||Array.isArray(ou)&&typeof ou[0]!="string")&&(dp=!1);au=dp}if(au===!1)throw new Error('Type of text must be string or Array. "'+C+'" is not recognized.');typeof C=="string"&&(C=C.match(/[\r?\n]/)?C.split(/\r\n|\r|\n/g):[C]);var lu=Zt/mr.internal.scaleFactor,cu=lu*(Bs-1);switch(bt.baseline){case"bottom":ht-=cu;break;case"top":ht+=lu-cu;break;case"hanging":ht+=lu-2*cu;break;case"middle":ht+=lu/2-cu}if((vn=bt.maxWidth||0)>0&&(typeof C=="string"?C=mr.splitTextToSize(C,vn):Object.prototype.toString.call(C)==="[object Array]"&&(C=C.reduce(function(Di,Pi){return Di.concat(mr.splitTextToSize(Pi,vn))},[]))),Jt={text:C,x:W,y:ht,options:bt,mutex:{pdfEscape:pr,activeFontKey:Re,fonts:ye,activeFontSize:Zt}},Pe.publish("preProcessText",Jt),C=Jt.text,Le=(bt=Jt.options).angle,!(Zi instanceof He)&&Le&&typeof Le=="number"){Le*=Math.PI/180,bt.rotationDirection===0&&(Le=-Le),T===M.ADVANCED&&(Le=-Le);var du=Math.cos(Le),hp=Math.sin(Le);Zi=new He(du,hp,-hp,du,0,0)}else Le&&Le instanceof He&&(Zi=Le);T!==M.ADVANCED||Zi||(Zi=Fs),(bn=bt.charSpace||iu)!==void 0&&(Dr+=N(V(bn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Wi=bt.horizontalScale)!==void 0&&(Dr+=N(100*Wi)+` Tz
`),bt.lang;var Ms=-1,Cb=bt.renderingMode!==void 0?bt.renderingMode:bt.stroke,pp=mr.internal.getCurrentPageInfo().pageContext;switch(Cb){case 0:case!1:case"fill":Ms=0;break;case 1:case!0:case"stroke":Ms=1;break;case 2:case"fillThenStroke":Ms=2;break;case 3:case"invisible":Ms=3;break;case 4:case"fillAndAddForClipping":Ms=4;break;case 5:case"strokeAndAddPathForClipping":Ms=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ms=6;break;case 7:case"addToPathForClipping":Ms=7}var f0=pp.usedRenderingMode!==void 0?pp.usedRenderingMode:-1;Ms!==-1?Dr+=Ms+` Tr
`:f0!==-1&&(Dr+=`0 Tr
`),Ms!==-1&&(pp.usedRenderingMode=Ms),Je=bt.align||"left";var aa,uu=Zt*Bs,m0=mr.internal.pageSize.getWidth(),g0=ye[Re];bn=bt.charSpace||iu,vn=bt.maxWidth||0,Xn=Object.assign({autoencode:!0,noBOM:!0},bt.flags);var Ml=[],Wc=function(Di){return mr.getStringUnitWidth(Di,{font:g0,charSpace:bn,fontSize:Zt,doKerning:!1})*Zt/eo};if(Object.prototype.toString.call(C)==="[object Array]"){var Es;me=lp(C),Je!=="left"&&(aa=me.map(Wc));var ps,El=0;if(Je==="right"){W-=aa[0],C=[],jr=me.length;for(var Ro=0;Ro<jr;Ro++)Ro===0?(ps=to(W),Es=Po(ht)):(ps=V(El-aa[Ro]),Es=-uu),C.push([me[Ro],ps,Es]),El=aa[Ro]}else if(Je==="center"){W-=aa[0]/2,C=[],jr=me.length;for(var Lo=0;Lo<jr;Lo++)Lo===0?(ps=to(W),Es=Po(ht)):(ps=V((El-aa[Lo])/2),Es=-uu),C.push([me[Lo],ps,Es]),El=aa[Lo]}else if(Je==="left"){C=[],jr=me.length;for(var hu=0;hu<jr;hu++)C.push(me[hu])}else if(Je==="justify"&&g0.encoding==="Identity-H"){C=[],jr=me.length,vn=vn!==0?vn:m0;for(var Oo=0,ir=0;ir<jr;ir++)if(Es=ir===0?Po(ht):-uu,ps=ir===0?to(W):Oo,ir<jr-1){var fp=V((vn-aa[ir])/(me[ir].split(" ").length-1)),fs=me[ir].split(" ");C.push([fs[0]+" ",ps,Es]),Oo=0;for(var oa=1;oa<fs.length;oa++){var pu=(Wc(fs[oa-1]+" "+fs[oa])-Wc(fs[oa]))*eo+fp;oa==fs.length-1?C.push([fs[oa],pu,0]):C.push([fs[oa]+" ",pu,0]),Oo-=pu}}else C.push([me[ir],ps,Es]);C.push(["",Oo,0])}else{if(Je!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(C=[],jr=me.length,vn=vn!==0?vn:m0,ir=0;ir<jr;ir++)Es=ir===0?Po(ht):-uu,ps=ir===0?to(W):0,ir<jr-1?Ml.push(N(V((vn-aa[ir])/(me[ir].split(" ").length-1)))):Ml.push(0),C.push([me[ir],ps,Es])}}var _0=typeof bt.R2L=="boolean"?bt.R2L:yt;_0===!0&&(C=cp(C,function(Di,Pi,rr){return[Di.split("").reverse().join(""),Pi,rr]})),Jt={text:C,x:W,y:ht,options:bt,mutex:{pdfEscape:pr,activeFontKey:Re,fonts:ye,activeFontSize:Zt}},Pe.publish("postProcessText",Jt),C=Jt.text,ka=Jt.mutex.isHex||!1;var mp=ye[Re].encoding;mp!=="WinAnsiEncoding"&&mp!=="StandardEncoding"||(C=cp(C,function(Di,Pi,rr){return[p0(Di),Pi,rr]})),me=lp(C),C=[];for(var Gc,qc,Al,Xc=0,fu=1,Yc=Array.isArray(me[0])?fu:Xc,Tl="",gp=function(Di,Pi,rr){var Cr="";return rr instanceof He?(rr=typeof bt.angle=="number"?ys(rr,new He(1,0,0,1,Di,Pi)):ys(new He(1,0,0,1,Di,Pi),rr),T===M.ADVANCED&&(rr=ys(new He(1,0,0,-1,0,0),rr)),Cr=rr.join(" ")+` Tm
`):Cr=N(Di)+" "+N(Pi)+` Td
`,Cr},la=0;la<me.length;la++){switch(Tl="",Yc){case fu:Al=(ka?"<":"(")+me[la][0]+(ka?">":")"),Gc=parseFloat(me[la][1]),qc=parseFloat(me[la][2]);break;case Xc:Al=(ka?"<":"(")+me[la]+(ka?">":")"),Gc=to(W),qc=Po(ht)}Ml!==void 0&&Ml[la]!==void 0&&(Tl=Ml[la]+` Tw
`),la===0?C.push(Tl+gp(Gc,qc,Zi)+Al):Yc===Xc?C.push(Tl+Al):Yc===fu&&C.push(Tl+gp(Gc,qc,Zi)+Al)}C=Yc===Xc?C.join(` Tj
T* `):C.join(` Tj
`),C+=` Tj
`;var ca=`BT
/`;return ca+=Re+" "+Zt+` Tf
`,ca+=N(Zt*Bs)+` TL
`,ca+=jc+`
`,ca+=Dr,ca+=C,ut(ca+="ET"),g[Re]=!0,mr};var mb=m.__private__.clip=m.clip=function(C){return ut(C==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return mb("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ut("n"),this};var Qa=m.__private__.isValidStyle=function(C){var W=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(C)!==-1&&(W=!0),W};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(C){return Qa(C)&&(d=C),this};var s0=m.__private__.getStyle=m.getStyle=function(C){var W=d;switch(C){case"D":case"S":W="S";break;case"F":W="f";break;case"FD":case"DF":W="B";break;case"f":case"f*":case"B":case"B*":W=C}return W},a0=m.close=function(){return ut("h"),this};m.stroke=function(){return ut("S"),this},m.fill=function(C){return eu("f",C),this},m.fillEvenOdd=function(C){return eu("f*",C),this},m.fillStroke=function(C){return eu("B",C),this},m.fillStrokeEvenOdd=function(C){return eu("B*",C),this};var eu=function(C,W){xi(W)==="object"?_b(W,C):ut(C)},Jh=function(C){C===null||T===M.ADVANCED&&C===void 0||(C=s0(C),ut(C))};function gb(C,W,ht,bt,Nt){var Jt=new wh(W||this.boundingBox,ht||this.xStep,bt||this.yStep,this.gState,Nt||this.matrix);Jt.stream=this.stream;var me=C+"$$"+this.cloneIndex+++"$$";return $i(me,Jt),Jt}var _b=function(C,W){var ht=It[C.key],bt=Ye[ht];if(bt instanceof kd)ut("q"),ut(vb(W)),bt.gState&&m.setGState(bt.gState),ut(C.matrix.toString()+" cm"),ut("/"+ht+" sh"),ut("Q");else if(bt instanceof wh){var Nt=new He(1,0,0,-1,0,Cl());C.matrix&&(Nt=Nt.multiply(C.matrix||Fs),ht=gb.call(bt,C.key,C.boundingBox,C.xStep,C.yStep,Nt).id),ut("q"),ut("/Pattern cs"),ut("/"+ht+" scn"),bt.gState&&m.setGState(bt.gState),ut(W),ut("Q")}},vb=function(C){switch(C){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Qh=m.moveTo=function(C,W){return ut(N(V(C))+" "+N(K(W))+" m"),this},Uc=m.lineTo=function(C,W){return ut(N(V(C))+" "+N(K(W))+" l"),this},Sl=m.curveTo=function(C,W,ht,bt,Nt,Jt){return ut([N(V(C)),N(K(W)),N(V(ht)),N(K(bt)),N(V(Nt)),N(K(Jt)),"c"].join(" ")),this};m.__private__.line=m.line=function(C,W,ht,bt,Nt){if(isNaN(C)||isNaN(W)||isNaN(ht)||isNaN(bt)||!Qa(Nt))throw new Error("Invalid arguments passed to jsPDF.line");return T===M.COMPAT?this.lines([[ht-C,bt-W]],C,W,[1,1],Nt||"S"):this.lines([[ht-C,bt-W]],C,W,[1,1]).stroke()},m.__private__.lines=m.lines=function(C,W,ht,bt,Nt,Jt){var me,Le,Je,bn,vn,Xn,Wi,Zi,mr,Jr,Dr,ka;if(typeof C=="number"&&(ka=ht,ht=W,W=C,C=ka),bt=bt||[1,1],Jt=Jt||!1,isNaN(W)||isNaN(ht)||!Array.isArray(C)||!Array.isArray(bt)||!Qa(Nt)||typeof Jt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Qh(W,ht),me=bt[0],Le=bt[1],bn=C.length,Jr=W,Dr=ht,Je=0;Je<bn;Je++)(vn=C[Je]).length===2?(Jr=vn[0]*me+Jr,Dr=vn[1]*Le+Dr,Uc(Jr,Dr)):(Xn=vn[0]*me+Jr,Wi=vn[1]*Le+Dr,Zi=vn[2]*me+Jr,mr=vn[3]*Le+Dr,Jr=vn[4]*me+Jr,Dr=vn[5]*Le+Dr,Sl(Xn,Wi,Zi,mr,Jr,Dr));return Jt&&a0(),Jh(Nt),this},m.path=function(C){for(var W=0;W<C.length;W++){var ht=C[W],bt=ht.c;switch(ht.op){case"m":Qh(bt[0],bt[1]);break;case"l":Uc(bt[0],bt[1]);break;case"c":Sl.apply(this,bt);break;case"h":a0()}}return this},m.__private__.rect=m.rect=function(C,W,ht,bt,Nt){if(isNaN(C)||isNaN(W)||isNaN(ht)||isNaN(bt)||!Qa(Nt))throw new Error("Invalid arguments passed to jsPDF.rect");return T===M.COMPAT&&(bt=-bt),ut([N(V(C)),N(K(W)),N(V(ht)),N(V(bt)),"re"].join(" ")),Jh(Nt),this},m.__private__.triangle=m.triangle=function(C,W,ht,bt,Nt,Jt,me){if(isNaN(C)||isNaN(W)||isNaN(ht)||isNaN(bt)||isNaN(Nt)||isNaN(Jt)||!Qa(me))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ht-C,bt-W],[Nt-ht,Jt-bt],[C-Nt,W-Jt]],C,W,[1,1],me,!0),this},m.__private__.roundedRect=m.roundedRect=function(C,W,ht,bt,Nt,Jt,me){if(isNaN(C)||isNaN(W)||isNaN(ht)||isNaN(bt)||isNaN(Nt)||isNaN(Jt)||!Qa(me))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Le=4/3*(Math.SQRT2-1);return Nt=Math.min(Nt,.5*ht),Jt=Math.min(Jt,.5*bt),this.lines([[ht-2*Nt,0],[Nt*Le,0,Nt,Jt-Jt*Le,Nt,Jt],[0,bt-2*Jt],[0,Jt*Le,-Nt*Le,Jt,-Nt,Jt],[2*Nt-ht,0],[-Nt*Le,0,-Nt,-Jt*Le,-Nt,-Jt],[0,2*Jt-bt],[0,-Jt*Le,Nt*Le,-Jt,Nt,-Jt]],C+Nt,W,[1,1],me,!0),this},m.__private__.ellipse=m.ellipse=function(C,W,ht,bt,Nt){if(isNaN(C)||isNaN(W)||isNaN(ht)||isNaN(bt)||!Qa(Nt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Jt=4/3*(Math.SQRT2-1)*ht,me=4/3*(Math.SQRT2-1)*bt;return Qh(C+ht,W),Sl(C+ht,W-me,C+Jt,W-bt,C,W-bt),Sl(C-Jt,W-bt,C-ht,W-me,C-ht,W),Sl(C-ht,W+me,C-Jt,W+bt,C,W+bt),Sl(C+Jt,W+bt,C+ht,W+me,C+ht,W),Jh(Nt),this},m.__private__.circle=m.circle=function(C,W,ht,bt){if(isNaN(C)||isNaN(W)||isNaN(ht)||!Qa(bt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(C,W,ht,ht,bt)},m.setFont=function(C,W,ht){return ht&&(W=U(W,ht)),Re=yl(C,W,{disableWarning:!1}),this};var xb=m.__private__.getFont=m.getFont=function(){return ye[yl.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var C,W,ht={};for(C in Ge)if(Ge.hasOwnProperty(C))for(W in ht[C]=[],Ge[C])Ge[C].hasOwnProperty(W)&&ht[C].push(W);return ht},m.addFont=function(C,W,ht,bt,Nt){var Jt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Jt.indexOf(arguments[3])!==-1?Nt=arguments[3]:arguments[3]&&Jt.indexOf(arguments[3])==-1&&(ht=U(ht,bt)),Nt=Nt||"Identity-H",zn.call(this,C,W,ht,Nt)};var zc,tp=i.lineWidth||.200025,nu=m.__private__.getLineWidth=m.getLineWidth=function(){return tp},o0=m.__private__.setLineWidth=m.setLineWidth=function(C){return tp=C,ut(N(V(C))+" w"),this};m.__private__.setLineDash=cn.API.setLineDash=cn.API.setLineDashPattern=function(C,W){if(C=C||[],W=W||0,isNaN(W)||!Array.isArray(C))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return C=C.map(function(ht){return N(V(ht))}).join(" "),W=N(V(W)),ut("["+C+"] "+W+" d"),this};var l0=m.__private__.getLineHeight=m.getLineHeight=function(){return Zt*zc};m.__private__.getLineHeight=m.getLineHeight=function(){return Zt*zc};var c0=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(C){return typeof(C=C||1.15)=="number"&&(zc=C),this},d0=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return zc};c0(i.lineHeight);var to=m.__private__.getHorizontalCoordinate=function(C){return V(C)},Po=m.__private__.getVerticalCoordinate=function(C){return T===M.ADVANCED?C:se[it].mediaBox.topRightY-se[it].mediaBox.bottomLeftY-V(C)},bb=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(C){return N(to(C))},wl=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(C){return N(Po(C))},Ta=i.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ss(Ta)},m.__private__.setStrokeColor=m.setDrawColor=function(C,W,ht,bt){return Ta=ws({ch1:C,ch2:W,ch3:ht,ch4:bt,pdfColorType:"draw",precision:2}),ut(Ta),this};var ep=i.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ss(ep)},m.__private__.setFillColor=m.setFillColor=function(C,W,ht,bt){return ep=ws({ch1:C,ch2:W,ch3:ht,ch4:bt,pdfColorType:"fill",precision:2}),ut(ep),this};var jc=i.textColor||"0 g",yb=m.__private__.getTextColor=m.getTextColor=function(){return Ss(jc)};m.__private__.setTextColor=m.setTextColor=function(C,W,ht,bt){return jc=ws({ch1:C,ch2:W,ch3:ht,ch4:bt,pdfColorType:"text",precision:3}),this};var iu=i.charSpace,Sb=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(iu||0)};m.__private__.setCharSpace=m.setCharSpace=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return iu=C,this};var np=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(C){var W=m.CapJoinStyles[C];if(W===void 0)throw new Error("Line cap style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return np=W,ut(W+" J"),this};var ip=0;m.__private__.setLineJoin=m.setLineJoin=function(C){var W=m.CapJoinStyles[C];if(W===void 0)throw new Error("Line join style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ip=W,ut(W+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(C){if(C=C||0,isNaN(C))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ut(N(V(C))+" M"),this},m.GState=W1,m.setGState=function(C){(C=typeof C=="string"?ve[$t[C]]:u0(null,C)).equals(ie)||(ut("/"+C.id+" gs"),ie=C)};var u0=function(C,W){if(!C||!$t[C]){var ht=!1;for(var bt in ve)if(ve.hasOwnProperty(bt)&&ve[bt].equals(W)){ht=!0;break}if(ht)W=ve[bt];else{var Nt="GS"+(Object.keys(ve).length+1).toString(10);ve[Nt]=W,W.id=Nt}return C&&($t[C]=W.id),Pe.publish("addGState",W),W}};m.addGState=function(C,W){return u0(C,W),this},m.saveGraphicsState=function(){return ut("q"),nn.push({key:Re,size:Zt,color:jc}),this},m.restoreGraphicsState=function(){ut("Q");var C=nn.pop();return Re=C.key,Zt=C.size,jc=C.color,ie=null,this},m.setCurrentTransformationMatrix=function(C){return ut(C.toString()+" cm"),this},m.comment=function(C){return ut("#"+C),this};var ru=function(C,W){var ht=C||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ht},set:function(Jt){isNaN(Jt)||(ht=parseFloat(Jt))}});var bt=W||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return bt},set:function(Jt){isNaN(Jt)||(bt=parseFloat(Jt))}});var Nt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Nt},set:function(Jt){Nt=Jt.toString()}}),this},rp=function(C,W,ht,bt){ru.call(this,C,W),this.type="rect";var Nt=ht||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Nt},set:function(me){isNaN(me)||(Nt=parseFloat(me))}});var Jt=bt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Jt},set:function(me){isNaN(me)||(Jt=parseFloat(me))}}),this},sp=function(){this.page=be,this.currentPage=it,this.pages=ne.slice(0),this.pagesContext=se.slice(0),this.x=Me,this.y=Ce,this.matrix=Xe,this.width=Hc(it),this.height=Cl(it),this.outputDestination=_e,this.id="",this.objectNumber=-1};sp.prototype.restore=function(){be=this.page,it=this.currentPage,se=this.pagesContext,ne=this.pages,Me=this.x,Ce=this.y,Xe=this.matrix,ap(it,this.width),op(it,this.height),_e=this.outputDestination};var h0=function(C,W,ht,bt,Nt){Yi.push(new sp),be=it=0,ne=[],Me=C,Ce=W,Xe=Nt,si([ht,bt])},wb=function(C){if(kn[C])Yi.pop().restore();else{var W=new sp,ht="Xo"+(Object.keys(qn).length+1).toString(10);W.id=ht,kn[C]=ht,qn[ht]=W,Pe.publish("addFormObject",W),Yi.pop().restore()}};for(var su in m.beginFormObject=function(C,W,ht,bt,Nt){return h0(C,W,ht,bt,Nt),this},m.endFormObject=function(C){return wb(C),this},m.doFormObject=function(C,W){var ht=qn[kn[C]];return ut("q"),ut(W.toString()+" cm"),ut("/"+ht.id+" Do"),ut("Q"),this},m.getFormObject=function(C){var W=qn[kn[C]];return{x:W.x,y:W.y,width:W.width,height:W.height,matrix:W.matrix}},m.save=function(C,W){return C=C||"generated.pdf",(W=W||{}).returnPromise=W.returnPromise||!1,W.returnPromise===!1?(Td(Qd(Do()),C),typeof Td.unload=="function"&&dn.setTimeout&&setTimeout(Td.unload,911),this):new Promise(function(ht,bt){try{var Nt=Td(Qd(Do()),C);typeof Td.unload=="function"&&dn.setTimeout&&setTimeout(Td.unload,911),ht(Nt)}catch(Jt){bt(Jt.message)}})},cn.API)cn.API.hasOwnProperty(su)&&(su==="events"&&cn.API.events.length?function(C,W){var ht,bt,Nt;for(Nt=W.length-1;Nt!==-1;Nt--)ht=W[Nt][0],bt=W[Nt][1],C.subscribe.apply(C,[ht].concat(typeof bt=="function"?[bt]:bt))}(Pe,cn.API.events):m[su]=cn.API[su]);var Hc=m.getPageWidth=function(C){return(se[C=C||it].mediaBox.topRightX-se[C].mediaBox.bottomLeftX)/Ut},ap=m.setPageWidth=function(C,W){se[C].mediaBox.topRightX=W*Ut+se[C].mediaBox.bottomLeftX},Cl=m.getPageHeight=function(C){return(se[C=C||it].mediaBox.topRightY-se[C].mediaBox.bottomLeftY)/Ut},op=m.setPageHeight=function(C,W){se[C].mediaBox.topRightY=W*Ut+se[C].mediaBox.bottomLeftY};return m.internal={pdfEscape:pr,getStyle:s0,getFont:xb,getFontSize:j,getCharSpace:Sb,getTextColor:yb,getLineHeight:l0,getLineHeightFactor:d0,getLineWidth:nu,write:Te,getHorizontalCoordinate:to,getVerticalCoordinate:Po,getCoordinateString:bb,getVerticalCoordinateString:wl,collections:{},newObject:ji,newAdditionalObject:Ea,newObjectDeferred:Hi,newObjectDeferredBegin:Yr,getFilters:ra,putStream:Cs,events:Pe,scaleFactor:Ut,pageSize:{getWidth:function(){return Hc(it)},setWidth:function(C){ap(it,C)},getHeight:function(){return Cl(it)},setHeight:function(C){op(it,C)}},encryptionOptions:p,encryption:Zr,getEncryptor:pb,output:tu,getNumberOfPages:Ir,pages:ne,out:ut,f2:B,f3:P,getPageInfo:r0,getPageInfoByObjId:fn,getCurrentPageInfo:fb,getPDFVersion:y,Point:ru,Rectangle:rp,Matrix:He,hasHotfix:i0},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Hc(it)},set:function(C){ap(it,C)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Cl(it)},set:function(C){op(it,C)},enumerable:!0,configurable:!0}),hs.call(m,ee),Re="F1",zr(r,t),Pe.publish("initialized"),m}yh.prototype.lsbFirstWord=function(i){return String.fromCharCode(i>>0&255,i>>8&255,i>>16&255,i>>24&255)},yh.prototype.toHexString=function(i){return i.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},yh.prototype.hexToBytes=function(i){for(var e=[],t=0;t<i.length;t+=2)e.push(String.fromCharCode(parseInt(i.substr(t,2),16)));return e.join("")},yh.prototype.processOwnerPassword=function(i,e){return MC(CC(e).substr(0,5),i)},yh.prototype.encryptor=function(i,e){var t=CC(this.encryptionKey+String.fromCharCode(255&i,i>>8&255,i>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return MC(t,n)}},W1.prototype.equals=function(i){var e,t="id,objectNumber,equals";if(!i||xi(i)!==xi(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!i.hasOwnProperty(e)||this[e]!==i[e])return!1;n++}for(e in i)i.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},cn.API={events:[]},cn.version="2.5.2";var er=cn.API,kC=1,Dd=function(i){return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xh=function(i){return i.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},xn=function(i){return i.toFixed(2)},vc=function(i){return i.toFixed(5)};er.__acroform__={};var Os=function(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i},cP=function(i){return i*kC},xo=function(i){var e=new EP,t=je.internal.getHeight(i)||0,n=je.internal.getWidth(i)||0;return e.BBox=[0,0,Number(xn(n)),Number(xn(t))],e},bH=er.__acroform__.setBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return i|=1<<e},yH=er.__acroform__.clearBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return i&=~(1<<e)},SH=er.__acroform__.getBit=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return i&1<<e?1:0},cr=er.__acroform__.getBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return SH(i,e-1)},dr=er.__acroform__.setBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return bH(i,e-1)},ur=er.__acroform__.clearBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return yH(i,e-1)},wH=er.__acroform__.calculateCoordinates=function(i,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,r=i[0],s=i[1],a=i[2],o=i[3],l={};return l.lowerLeft_X=t(r)||0,l.lowerLeft_Y=n(s+o)||0,l.upperRight_X=t(r+a)||0,l.upperRight_Y=n(s)||0,[Number(xn(l.lowerLeft_X)),Number(xn(l.lowerLeft_Y)),Number(xn(l.upperRight_X)),Number(xn(l.upperRight_Y))]},CH=function(i){if(i.appearanceStreamContent)return i.appearanceStreamContent;if(i.V||i.DV){var e=[],t=i._V||i.DV,n=EC(i,t),r=i.scope.internal.getFont(i.fontName,i.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(i.scope.__private__.encodeColorString(i.color)),e.push("/"+r+" "+xn(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=xo(i);return s.scope=i.scope,s.stream=e.join(`
`),s}},EC=function(i,e){var t=i.fontSize===0?i.maxFontSize:i.fontSize,n={text:"",fontSize:""},r=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");r=i.multiline?r.map(function(P){return P.split(`
`)}):r.map(function(P){return[P]});var s=t,a=je.internal.getHeight(i)||0;a=a<0?-a:a;var o=je.internal.getWidth(i)||0;o=o<0?-o:o;var l=function(P,V,$){if(P+1<r.length){var K=V+" "+r[P+1][0];return F1(K,i,$).width<=o-4}return!1};s++;t:for(;s>0;){e="",s--;var d,p,f=F1("3",i,s).height,g=i.multiline?a-s:(a-f)/2,m=g+=2,x=0,y=0,S=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+F1(e,i,s=12).width+", FieldWidth:"+o+`
`;break}for(var b="",M=0,T=0;T<r.length;T++)if(r.hasOwnProperty(T)){var k=!1;if(r[T].length!==1&&S!==r[T].length-1){if((f+2)*(M+2)+2>a)continue t;b+=r[T][S],k=!0,y=T,T--}else{b=(b+=r[T][S]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var L=parseInt(T),U=l(L,b,s),N=T>=r.length-1;if(U&&!N){b+=" ",S=0;continue}if(U||N){if(N)y=L;else if(i.multiline&&(f+2)*(M+2)+2>a)continue t}else{if(!i.multiline||(f+2)*(M+2)+2>a)continue t;y=L}}for(var F="",O=x;O<=y;O++){var B=r[O];if(i.multiline){if(O===y){F+=B[S]+" ",S=(S+1)%B.length;continue}if(O===x){F+=B[B.length-1]+" ";continue}}F+=B[0]+" "}switch(F=F.substr(F.length-1)==" "?F.substr(0,F.length-1):F,p=F1(F,i,s).width,i.textAlign){case"right":d=o-p-2;break;case"center":d=(o-p)/2;break;case"left":default:d=2}e+=xn(d)+" "+xn(m)+` Td
`,e+="("+Dd(F)+`) Tj
`,e+=-xn(d)+` 0 Td
`,m=-(s+2),p=0,x=k?y:y+1,M++,b=""}break}return n.text=e,n.fontSize=s,n},F1=function(i,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(i,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:r}},MH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},EH=function(i,e){var t={type:"reference",object:i};e.internal.getPageInfo(i.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(i.page).pageContext.annotations.push(t)},AH=function(i,e){for(var t in i)if(i.hasOwnProperty(t)){var n=t,r=i[t];e.internal.newObjectDeferredBegin(r.objId,!0),xi(r)==="object"&&typeof r.putStream=="function"&&r.putStream(),delete i[n]}},TH=function(i,e){if(e.scope=i,i.internal!==void 0&&(i.internal.acroformPlugin===void 0||i.internal.acroformPlugin.isInitialized===!1)){if(qa.FieldNum=0,i.internal.acroformPlugin=JSON.parse(JSON.stringify(MH)),i.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");kC=i.internal.scaleFactor,i.internal.acroformPlugin.acroFormDictionaryRoot=new AP,i.internal.acroformPlugin.acroFormDictionaryRoot.scope=i,i.internal.acroformPlugin.acroFormDictionaryRoot._eventID=i.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(i)}),i.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in n)if(n.hasOwnProperty(r)){var s=n[r];s.objId=void 0,s.hasAnnotation&&EH(s,t)}})(i)}),i.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(i)}),i.internal.events.subscribe("postPutPages",function(t){(function(n,r){var s=!n;for(var a in n||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],l=[],d=o.Rect;if(o.Rect&&(o.Rect=wH(o.Rect,r)),r.internal.newObjectDeferredBegin(o.objId,!0),o.DA=je.createDefaultAppearanceStream(o),xi(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=d,o.hasAppearanceStream&&!o.appearanceStreamContent){var p=CH(o);l.push({key:"AP",value:"<</N "+p+">>"}),r.internal.acroformPlugin.xForms.push(p)}if(o.appearanceStreamContent){var f="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var m=o.appearanceStreamContent[g];if(f+="/"+g+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var a in m)if(m.hasOwnProperty(a)){var x=m[a];typeof x=="function"&&(x=x.call(r,o)),f+="/"+a+" "+x+" ",r.internal.acroformPlugin.xForms.indexOf(x)>=0||r.internal.acroformPlugin.xForms.push(x)}}else typeof(x=m)=="function"&&(x=x.call(r,o)),f+="/"+a+" "+x,r.internal.acroformPlugin.xForms.indexOf(x)>=0||r.internal.acroformPlugin.xForms.push(x);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}r.internal.putStream({additionalKeyValues:l,objectId:o.objId}),r.internal.out("endobj")}s&&AH(r.internal.acroformPlugin.xForms,r)})(t,i)}),i.internal.acroformPlugin.isInitialized=!0}},MP=er.__acroform__.arrayToPdfArray=function(i,e,t){var n=function(a){return a};if(Array.isArray(i)){for(var r="[",s=0;s<i.length;s++)switch(s!==0&&(r+=" "),xi(i[s])){case"boolean":case"number":case"object":r+=i[s].toString();break;case"string":i[s].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),r+="("+Dd(n(i[s].toString()))+")"):r+=i[s].toString()}return r+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},bC=function(i,e,t){var n=function(r){return r};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(i=i||"").toString(),i="("+Dd(n(i))+")"},bo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(i){this._objId=i}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};bo.prototype.toString=function(){return this.objId+" 0 R"},bo.prototype.putStream=function(){var i=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:i,objectId:this.objId}),this.scope.internal.out("endobj")},bo.prototype.getKeyValueListForStream=function(){var i=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],r=this[n];r&&(Array.isArray(r)?i.push({key:n,value:MP(r,this.objId,this.scope)}):r instanceof bo?(r.scope=this.scope,i.push({key:n,value:r.objId+" 0 R"})):typeof r!="function"&&i.push({key:n,value:r}))}return i};var EP=function(){bo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var i,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){i=t.trim()},get:function(){return i||null}})};Os(EP,bo);var AP=function(){bo.call(this);var i,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(i){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Dd(t(i))+")"}},set:function(t){i=t}})};Os(AP,bo);var qa=function i(){bo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!cr(e,3)},set:function(b){b?this.F=dr(e,3):this.F=ur(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');t=b}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(b){n=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(b){n[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(b){n[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(b){n[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(b){n[3]=b}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof G1)return;s="FieldObject"+i.FieldNum++}var b=function(M){return M};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Dd(b(s))+")"},set:function(b){s=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(b){s=b}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/kC:d},set:function(b){d=b}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(b){p=b}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof G1||this instanceof Id))return bC(f,this.objId,this.scope)},set:function(b){b=b.toString(),f=b}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Vr?g:bC(g,this.objId,this.scope)},set:function(b){b=b.toString(),g=this instanceof Vr?b:b.substr(0,1)==="("?xh(b.substr(1,b.length-2)):xh(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vr?xh(g.substr(1,g.length-1)):g},set:function(b){b=b.toString(),g=this instanceof Vr?"/"+b:b}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Vr?m:bC(m,this.objId,this.scope)},set:function(b){b=b.toString(),m=this instanceof Vr?b:b.substr(0,1)==="("?xh(b.substr(1,b.length-2)):xh(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vr?xh(m.substr(1,m.length-1)):m},set:function(b){b=b.toString(),m=this instanceof Vr?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(b){b=!!b,y=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(b){x=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,1)},set:function(b){b?this.Ff=dr(this.Ff,1):this.Ff=ur(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,2)},set:function(b){b?this.Ff=dr(this.Ff,2):this.Ff=ur(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,3)},set:function(b){b?this.Ff=dr(this.Ff,3):this.Ff=ur(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');S=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(S){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};Os(qa,bo);var Ch=function(){qa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var i=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return i},set:function(t){i=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return MP(e,this.objId,this.scope)},set:function(t){var n,r;r=[],typeof(n=t)=="string"&&(r=function(s,a,o){o||(o=1);for(var l,d=[];l=a.exec(s);)d.push(l[o]);return d}(n,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,18)},set:function(t){t?this.Ff=dr(this.Ff,18):this.Ff=ur(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=dr(this.Ff,19):this.Ff=ur(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,20)},set:function(t){t?(this.Ff=dr(this.Ff,20),e.sort()):this.Ff=ur(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,22)},set:function(t){t?this.Ff=dr(this.Ff,22):this.Ff=ur(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,23)},set:function(t){t?this.Ff=dr(this.Ff,23):this.Ff=ur(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,27)},set:function(t){t?this.Ff=dr(this.Ff,27):this.Ff=ur(this.Ff,27)}}),this.hasAppearanceStream=!1};Os(Ch,qa);var Mh=function(){Ch.call(this),this.fontName="helvetica",this.combo=!1};Os(Mh,Ch);var Eh=function(){Mh.call(this),this.combo=!0};Os(Eh,Mh);var U1=function(){Eh.call(this),this.edit=!0};Os(U1,Eh);var Vr=function(){qa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,15)},set:function(t){t?this.Ff=dr(this.Ff,15):this.Ff=ur(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,16)},set:function(t){t?this.Ff=dr(this.Ff,16):this.Ff=ur(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,17)},set:function(t){t?this.Ff=dr(this.Ff,17):this.Ff=ur(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,26)},set:function(t){t?this.Ff=dr(this.Ff,26):this.Ff=ur(this.Ff,26)}});var i,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,r=[];for(n in r.push("<<"),e)r.push("/"+n+" ("+Dd(t(e[n]))+")");return r.push(">>"),r.join(`
`)}},set:function(t){xi(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(t){i="/"+t}})};Os(Vr,qa);var z1=function(){Vr.call(this),this.pushButton=!0};Os(z1,Vr);var Ah=function(){Vr.call(this),this.radio=!0,this.pushButton=!1;var i=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e!==void 0?e:[]}})};Os(Ah,Vr);var G1=function(){var i,e;qa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return i},set:function(r){i=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(r){e=r}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),n)a.push("/"+s+" ("+Dd(r(n[s]))+")");return a.push(">>"),a.join(`
`)},set:function(r){xi(r)==="object"&&(n=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(r){typeof r=="string"&&(n.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=je.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Os(G1,qa),Ah.prototype.setAppearance=function(i){if(!("createAppearanceStream"in i)||!("getCA"in i))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=i.createAppearanceStream(t.optionName),t.caption=i.getCA()}},Ah.prototype.createOption=function(i){var e=new G1;return e.Parent=this,e.optionName=i,this.Kids.push(e),kH.call(this.scope,e),e};var j1=function(){Vr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=je.CheckBox.createAppearanceStream()};Os(j1,Vr);var Id=function(){qa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,13)},set:function(e){e?this.Ff=dr(this.Ff,13):this.Ff=ur(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,21)},set:function(e){e?this.Ff=dr(this.Ff,21):this.Ff=ur(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,23)},set:function(e){e?this.Ff=dr(this.Ff,23):this.Ff=ur(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,24)},set:function(e){e?this.Ff=dr(this.Ff,24):this.Ff=ur(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,25)},set:function(e){e?this.Ff=dr(this.Ff,25):this.Ff=ur(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,26)},set:function(e){e?this.Ff=dr(this.Ff,26):this.Ff=ur(this.Ff,26)}});var i=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){Number.isInteger(e)&&(i=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Os(Id,qa);var H1=function(){Id.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,14)},set:function(i){i?this.Ff=dr(this.Ff,14):this.Ff=ur(this.Ff,14)}}),this.password=!0};Os(H1,Id);var je={CheckBox:{createAppearanceStream:function(){return{N:{On:je.CheckBox.YesNormal},D:{On:je.CheckBox.YesPushDown,Off:je.CheckBox.OffPushDown}}},YesPushDown:function(i){var e=xo(i);e.scope=i.scope;var t=[],n=i.scope.internal.getFont(i.fontName,i.fontStyle).id,r=i.scope.__private__.encodeColorString(i.color),s=EC(i,i.caption);return t.push("0.749023 g"),t.push("0 0 "+xn(je.internal.getWidth(i))+" "+xn(je.internal.getHeight(i))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+xn(s.fontSize)+" Tf "+r),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(i){var e=xo(i);e.scope=i.scope;var t=i.scope.internal.getFont(i.fontName,i.fontStyle).id,n=i.scope.__private__.encodeColorString(i.color),r=[],s=je.internal.getHeight(i),a=je.internal.getWidth(i),o=EC(i,i.caption);return r.push("1 g"),r.push("0 0 "+xn(a)+" "+xn(s)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+xn(a-1)+" "+xn(s-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+t+" "+xn(o.fontSize)+" Tf "+n),r.push(o.text),r.push("ET"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(i){var e=xo(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+xn(je.internal.getWidth(i))+" "+xn(je.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(i){var e={D:{Off:je.RadioButton.Circle.OffPushDown},N:{}};return e.N[i]=je.RadioButton.Circle.YesNormal,e.D[i]=je.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(i){var e=xo(i);e.scope=i.scope;var t=[],n=je.internal.getWidth(i)<=je.internal.getHeight(i)?je.internal.getWidth(i)/4:je.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var r=je.internal.Bezier_C,s=Number((n*r).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+vc(je.internal.getWidth(i)/2)+" "+vc(je.internal.getHeight(i)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),t.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),t.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),t.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=xo(i);e.scope=i.scope;var t=[],n=je.internal.getWidth(i)<=je.internal.getHeight(i)?je.internal.getWidth(i)/4:je.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),s=Number((r*je.internal.Bezier_C).toFixed(5)),a=Number((n*je.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+vc(je.internal.getWidth(i)/2)+" "+vc(je.internal.getHeight(i)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+vc(je.internal.getWidth(i)/2)+" "+vc(je.internal.getHeight(i)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),t.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),t.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),t.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(i){var e=xo(i);e.scope=i.scope;var t=[],n=je.internal.getWidth(i)<=je.internal.getHeight(i)?je.internal.getWidth(i)/4:je.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),s=Number((r*je.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+vc(je.internal.getWidth(i)/2)+" "+vc(je.internal.getHeight(i)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(i){var e={D:{Off:je.RadioButton.Cross.OffPushDown},N:{}};return e.N[i]=je.RadioButton.Cross.YesNormal,e.D[i]=je.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(i){var e=xo(i);e.scope=i.scope;var t=[],n=je.internal.calculateCross(i);return t.push("q"),t.push("1 1 "+xn(je.internal.getWidth(i)-2)+" "+xn(je.internal.getHeight(i)-2)+" re"),t.push("W"),t.push("n"),t.push(xn(n.x1.x)+" "+xn(n.x1.y)+" m"),t.push(xn(n.x2.x)+" "+xn(n.x2.y)+" l"),t.push(xn(n.x4.x)+" "+xn(n.x4.y)+" m"),t.push(xn(n.x3.x)+" "+xn(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=xo(i);e.scope=i.scope;var t=je.internal.calculateCross(i),n=[];return n.push("0.749023 g"),n.push("0 0 "+xn(je.internal.getWidth(i))+" "+xn(je.internal.getHeight(i))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+xn(je.internal.getWidth(i)-2)+" "+xn(je.internal.getHeight(i)-2)+" re"),n.push("W"),n.push("n"),n.push(xn(t.x1.x)+" "+xn(t.x1.y)+" m"),n.push(xn(t.x2.x)+" "+xn(t.x2.y)+" l"),n.push(xn(t.x4.x)+" "+xn(t.x4.y)+" m"),n.push(xn(t.x3.x)+" "+xn(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(i){var e=xo(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+xn(je.internal.getWidth(i))+" "+xn(je.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(i){var e=i.scope.internal.getFont(i.fontName,i.fontStyle).id,t=i.scope.__private__.encodeColorString(i.color);return"/"+e+" "+i.fontSize+" Tf "+t}};je.internal={Bezier_C:.551915024494,calculateCross:function(i){var e=je.internal.getWidth(i),t=je.internal.getHeight(i),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},je.internal.getWidth=function(i){var e=0;return xi(i)==="object"&&(e=cP(i.Rect[2])),e},je.internal.getHeight=function(i){var e=0;return xi(i)==="object"&&(e=cP(i.Rect[3])),e};var kH=er.addField=function(i){if(TH(this,i),!(i instanceof qa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=i).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),i.page=i.scope.internal.getCurrentPageInfo().pageNumber,this};er.AcroFormChoiceField=Ch,er.AcroFormListBox=Mh,er.AcroFormComboBox=Eh,er.AcroFormEditBox=U1,er.AcroFormButton=Vr,er.AcroFormPushButton=z1,er.AcroFormRadioButton=Ah,er.AcroFormCheckBox=j1,er.AcroFormTextField=Id,er.AcroFormPasswordField=H1,er.AcroFormAppearance=je,er.AcroForm={ChoiceField:Ch,ListBox:Mh,ComboBox:Eh,EditBox:U1,Button:Vr,PushButton:z1,RadioButton:Ah,CheckBox:j1,TextField:Id,PasswordField:H1,Appearance:je},cn.AcroForm={ChoiceField:Ch,ListBox:Mh,ComboBox:Eh,EditBox:U1,Button:Vr,PushButton:z1,RadioButton:Ah,CheckBox:j1,TextField:Id,PasswordField:H1,Appearance:je};var Nut=cn.AcroForm;function TP(i){return i.reduce(function(e,t,n){return e[t]=n,e},{})}(function(i){i.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=i.__addimage__.getImageFileTypeByImageData=function(P,V){var $,K,ct,ot,st,Q=e;if((V=V||e)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(U(P))for(st in t)for(ct=t[st],$=0;$<ct.length;$+=1){for(ot=!0,K=0;K<ct[$].length;K+=1)if(ct[$][K]!==void 0&&ct[$][K]!==P[K]){ot=!1;break}if(ot===!0){Q=st;break}}else for(st in t)for(ct=t[st],$=0;$<ct.length;$+=1){for(ot=!0,K=0;K<ct[$].length;K+=1)if(ct[$][K]!==void 0&&ct[$][K]!==P.charCodeAt(K)){ot=!1;break}if(ot===!0){Q=st;break}}return Q===e&&V!==e&&(Q=V),Q},r=function P(V){for(var $=this.internal.write,K=this.internal.putStream,ct=(0,this.internal.getFilters)();ct.indexOf("FlateEncode")!==-1;)ct.splice(ct.indexOf("FlateEncode"),1);V.objectId=this.internal.newObject();var ot=[];if(ot.push({key:"Type",value:"/XObject"}),ot.push({key:"Subtype",value:"/Image"}),ot.push({key:"Width",value:V.width}),ot.push({key:"Height",value:V.height}),V.colorSpace===S.INDEXED?ot.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(V.palette.length/3-1)+" "+("sMask"in V&&V.sMask!==void 0?V.objectId+2:V.objectId+1)+" 0 R]"}):(ot.push({key:"ColorSpace",value:"/"+V.colorSpace}),V.colorSpace===S.DEVICE_CMYK&&ot.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ot.push({key:"BitsPerComponent",value:V.bitsPerComponent}),"decodeParameters"in V&&V.decodeParameters!==void 0&&ot.push({key:"DecodeParms",value:"<<"+V.decodeParameters+">>"}),"transparency"in V&&Array.isArray(V.transparency)){for(var st="",Q=0,xt=V.transparency.length;Q<xt;Q++)st+=V.transparency[Q]+" "+V.transparency[Q]+" ";ot.push({key:"Mask",value:"["+st+"]"})}V.sMask!==void 0&&ot.push({key:"SMask",value:V.objectId+1+" 0 R"});var Mt=V.filter!==void 0?["/"+V.filter]:void 0;if(K({data:V.data,additionalKeyValues:ot,alreadyAppliedFilters:Mt,objectId:V.objectId}),$("endobj"),"sMask"in V&&V.sMask!==void 0){var qt="/Predictor "+V.predictor+" /Colors 1 /BitsPerComponent "+V.bitsPerComponent+" /Columns "+V.width,z={width:V.width,height:V.height,colorSpace:"DeviceGray",bitsPerComponent:V.bitsPerComponent,decodeParameters:qt,data:V.sMask};"filter"in V&&(z.filter=V.filter),P.call(this,z)}if(V.colorSpace===S.INDEXED){var it=this.internal.newObject();K({data:F(new Uint8Array(V.palette)),objectId:it}),$("endobj")}},s=function(){var P=this.internal.collections.addImage_images;for(var V in P)r.call(this,P[V])},a=function(){var P,V=this.internal.collections.addImage_images,$=this.internal.write;for(var K in V)$("/I"+(P=V[K]).index,P.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var P=this.internal.collections.addImage_images;return o.call(this),P},d=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(P){return typeof i["process"+P.toUpperCase()]=="function"},f=function(P){return xi(P)==="object"&&P.nodeType===1},g=function(P,V){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var $=""+P.getAttribute("src");if($.indexOf("data:image/")===0)return Sm(unescape($).split("base64,").pop());var K=i.loadFile($,!0);if(K!==void 0)return K}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var ct;switch(V){case"PNG":ct="image/png";break;case"WEBP":ct="image/webp";break;case"JPEG":case"JPG":default:ct="image/jpeg"}return Sm(P.toDataURL(ct,1).split("base64,").pop())}},m=function(P){var V=this.internal.collections.addImage_images;if(V){for(var $ in V)if(P===V[$].alias)return V[$]}},x=function(P,V,$){return P||V||(P=-96,V=-96),P<0&&(P=-1*$.width*72/P/this.internal.scaleFactor),V<0&&(V=-1*$.height*72/V/this.internal.scaleFactor),P===0&&(P=V*$.width/$.height),V===0&&(V=P*$.height/$.width),[P,V]},y=function(P,V,$,K,ct,ot){var st=x.call(this,$,K,ct),Q=this.internal.getCoordinateString,xt=this.internal.getVerticalCoordinateString,Mt=l.call(this);if($=st[0],K=st[1],Mt[ct.index]=ct,ot){ot*=Math.PI/180;var qt=Math.cos(ot),z=Math.sin(ot),it=function(at){return at.toFixed(4)},Z=[it(qt),it(z),it(-1*z),it(qt),0,0,"cm"]}this.internal.write("q"),ot?(this.internal.write([1,"0","0",1,Q(P),xt(V+K),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([Q($),"0","0",Q(K),"0","0","cm"].join(" "))):this.internal.write([Q($),"0","0",Q(K),Q(P),xt(V+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ct.index+" Do"),this.internal.write("Q")},S=i.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};i.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=i.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},M=i.__addimage__.sHashCode=function(P){var V,$,K=0;if(typeof P=="string")for($=P.length,V=0;V<$;V++)K=(K<<5)-K+P.charCodeAt(V),K|=0;else if(U(P))for($=P.byteLength/2,V=0;V<$;V++)K=(K<<5)-K+P[V],K|=0;return K},T=i.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var V=!0;return P.length===0&&(V=!1),P.length%4!=0&&(V=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(V=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(V=!1),V},k=i.__addimage__.extractImageFromDataUrl=function(P){var V=(P=P||"").split("base64,"),$=null;if(V.length===2){var K=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(V[0]);Array.isArray(K)&&($={mimeType:K[1],charset:K[2],data:V[1]})}return $},L=i.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};i.__addimage__.isArrayBuffer=function(P){return L()&&P instanceof ArrayBuffer};var U=i.__addimage__.isArrayBufferView=function(P){return L()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},N=i.__addimage__.binaryStringToUint8Array=function(P){for(var V=P.length,$=new Uint8Array(V),K=0;K<V;K++)$[K]=P.charCodeAt(K);return $},F=i.__addimage__.arrayBufferToBinaryString=function(P){for(var V="",$=U(P)?P:new Uint8Array(P),K=0;K<$.length;K+=8192)V+=String.fromCharCode.apply(null,$.subarray(K,K+8192));return V};i.addImage=function(){var P,V,$,K,ct,ot,st,Q,xt;if(typeof arguments[1]=="number"?(V=e,$=arguments[1],K=arguments[2],ct=arguments[3],ot=arguments[4],st=arguments[5],Q=arguments[6],xt=arguments[7]):(V=arguments[1],$=arguments[2],K=arguments[3],ct=arguments[4],ot=arguments[5],st=arguments[6],Q=arguments[7],xt=arguments[8]),xi(P=arguments[0])==="object"&&!f(P)&&"imageData"in P){var Mt=P;P=Mt.imageData,V=Mt.format||V||e,$=Mt.x||$||0,K=Mt.y||K||0,ct=Mt.w||Mt.width||ct,ot=Mt.h||Mt.height||ot,st=Mt.alias||st,Q=Mt.compression||Q,xt=Mt.rotation||Mt.angle||xt}var qt=this.internal.getFilters();if(Q===void 0&&qt.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN($)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var z=O.call(this,P,V,st,Q);return y.call(this,$,K,ct,ot,z,xt),this};var O=function(P,V,$,K){var ct,ot,st;if(typeof P=="string"&&n(P)===e){P=unescape(P);var Q=B(P,!1);(Q!==""||(Q=i.loadFile(P,!0))!==void 0)&&(P=Q)}if(f(P)&&(P=g(P,V)),V=n(P,V),!p(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(((st=$)==null||st.length===0)&&($=function(xt){return typeof xt=="string"||U(xt)?M(xt):U(xt.data)?M(xt.data):null}(P)),(ct=m.call(this,$))||(L()&&(P instanceof Uint8Array||V==="RGBA"||(ot=P,P=N(P))),ct=this["process"+V.toUpperCase()](P,d.call(this),$,function(xt){return xt&&typeof xt=="string"&&(xt=xt.toUpperCase()),xt in i.image_compression?xt:b.NONE}(K),ot)),!ct)throw new Error("An unknown error occurred whilst processing the image.");return ct},B=i.__addimage__.convertBase64ToBinaryString=function(P,V){var $;V=typeof V!="boolean"||V;var K,ct="";if(typeof P=="string"){K=($=k(P))!==null?$.data:P;try{ct=Sm(K)}catch(ot){if(V)throw T(K)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ot.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ct};i.getImageProperties=function(P){var V,$,K="";if(f(P)&&(P=g(P)),typeof P=="string"&&n(P)===e&&((K=B(P,!1))===""&&(K=i.loadFile(P)||""),P=K),$=n(P),!p($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(!L()||P instanceof Uint8Array||(P=N(P)),!(V=this["process"+$.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return V.fileType=$,V}})(cn.API),function(i){var e=function(t){if(t!==void 0&&t!="")return!0};cn.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),i.events.push(["putPage",function(t){for(var n,r,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,p=!1,f=0;f<d.length&&!p;f++)switch((n=d[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var g=0;g<d.length;g++){n=d[g];var m=this.internal.pdfEscape,x=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(y.objId),M=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(r="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+m(b(n.contents))+")",s+=" /Popup "+S.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(b(M))+") >>",y.content=s;var T=y.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+T,n.open&&(s+=" /Open true"),s+=" >>",S.content=s,this.internal.write(y.objId,"0 R",S.objId,"0 R");break;case"freetext":r="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var k=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+m(x(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var L=this.annotations._nameMap[n.options.name];n.options.pageNumber=L.page,n.options.top=L.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+m(x(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var U=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+U+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),i.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},i.link=function(t,n,r,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(t),y:d(n),w:l(t+r),h:d(n+s)},options:a,type:"link"})},i.textWithLink=function(t,n,r,s){var a,o,l=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var p=this.splitTextToSize(t,o).length;a=Math.ceil(d*p)}else o=l,a=d;return this.text(t,n,r,s),r+=.2*d,s.align==="center"&&(n-=l/2),s.align==="right"&&(n-=l),this.link(n,r-d,o,a,s),l},i.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}}(cn.API),function(i){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];i.__arabicParser__={};var s=i.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},a=i.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=i.__arabicParser__.isArabicEndLetter=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length<=2},l=i.__arabicParser__.isArabicAlfLetter=function(y){return a(y)&&r.indexOf(y.charCodeAt(0))>=0};i.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length>=1};var d=i.__arabicParser__.arabicLetterHasFinalForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length>=2};i.__arabicParser__.arabicLetterHasInitialForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length>=3};var p=i.__arabicParser__.arabicLetterHasMedialForm=function(y){return a(y)&&s(y)&&e[y.charCodeAt(0)].length==4},f=i.__arabicParser__.resolveLigatures=function(y){var S=0,b=t,M="",T=0;for(S=0;S<y.length;S+=1)b[y.charCodeAt(S)]!==void 0?(T++,typeof(b=b[y.charCodeAt(S)])=="number"&&(M+=String.fromCharCode(b),b=t,T=0),S===y.length-1&&(b=t,M+=y.charAt(S-(T-1)),S-=T-1,T=0)):(b=t,M+=y.charAt(S-T),S-=T,T=0);return M};i.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&n[y.charCodeAt(0)]!==void 0};var g=i.__arabicParser__.getCorrectForm=function(y,S,b){return a(y)?s(y)===!1?-1:!d(y)||!a(S)&&!a(b)||!a(b)&&o(S)||o(y)&&!a(S)||o(y)&&l(S)||o(y)&&o(S)?0:p(y)&&a(S)&&!o(S)&&a(b)&&d(b)?3:o(y)||!a(b)?1:2:-1},m=function(y){var S=0,b=0,M=0,T="",k="",L="",U=(y=y||"").split("\\s+"),N=[];for(S=0;S<U.length;S+=1){for(N.push(""),b=0;b<U[S].length;b+=1)T=U[S][b],k=U[S][b-1],L=U[S][b+1],a(T)?(M=g(T,k,L),N[S]+=M!==-1?String.fromCharCode(e[T.charCodeAt(0)][M]):T):N[S]+=T;N[S]=f(N[S])}return N.join(" ")},x=i.__arabicParser__.processArabic=i.processArabic=function(){var y,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(S)){var M=0;for(b=[],M=0;M<S.length;M+=1)Array.isArray(S[M])?b.push([m(S[M][0]),S[M][1],S[M][2]]):b.push([m(S[M])]);y=b}else y=m(S);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};i.events.push(["preProcessText",x])}(cn.API),cn.API.autoPrint=function(i){var e;switch((i=i||{}).variant=i.variant||"non-conform",i.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(i){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var r;if((t=t||"2d")!=="2d")return null;for(r in n)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=n[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(cn.API),function(i){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(y){x=y}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},i.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},i.getTextDimensions=function(l,d){n.call(this);var p=(d=d||{}).fontSize||this.getFontSize(),f=d.font||this.getFont(),g=d.scaleFactor||this.internal.scaleFactor,m=0,x=0,y=0,S=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var b=d.maxWidth;b>0?typeof l=="string"?l=this.splitTextToSize(l,b):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(T,k){return T.concat(S.splitTextToSize(k,b))},[])):l=Array.isArray(l)?l:[l];for(var M=0;M<l.length;M++)m<(y=this.getStringUnitWidth(l[M],{font:f})*p)&&(m=y);return m!==0&&(x=l.length),{w:m/=g,h:Math.max((x*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/g,0)}},i.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=i.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===l.lineNumber?(l.x=(d.x||0)+(d.width||0),l.y=d.y||0):d.y+d.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,m&&g&&(this.printHeaderRow(l.lineNumber,!0),l.y+=g[0].height)):l.y=d.y+d.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-p,l.y+p,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+p,{align:"center",baseline:"top",maxWidth:l.width-p-p}):this.text(l.text,l.x+p,l.y+p,{align:"left",baseline:"top",maxWidth:l.width-p-p})),this.internal.__cell__.lastCell=l,this};i.table=function(l,d,p,f,g){if(n.call(this),!p)throw new Error("No data for PDF table.");var m,x,y,S,b=[],M=[],T=[],k={},L={},U=[],N=[],F=(g=g||{}).autoSize||!1,O=g.printHeaders!==!1,B=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,P=g.margins||Object.assign({width:this.getPageWidth()},e),V=typeof g.padding=="number"?g.padding:3,$=g.headerBackgroundColor||"#c8c8c8",K=g.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=O,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=B,this.internal.__cell__.padding=V,this.internal.__cell__.headerBackgroundColor=$,this.internal.__cell__.headerTextColor=K,this.setFontSize(B),f==null)M=b=Object.keys(p[0]),T=b.map(function(){return"left"});else if(Array.isArray(f)&&xi(f[0])==="object")for(b=f.map(function(Mt){return Mt.name}),M=f.map(function(Mt){return Mt.prompt||Mt.name||""}),T=f.map(function(Mt){return Mt.align||"left"}),m=0;m<f.length;m+=1)L[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(M=b=f,T=b.map(function(){return"left"}));if(F||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<b.length;m+=1){for(k[S=b[m]]=p.map(function(Mt){return Mt[S]}),this.setFont(void 0,"bold"),U.push(this.getTextDimensions(M[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=k[S],this.setFont(void 0,"normal"),y=0;y<x.length;y+=1)U.push(this.getTextDimensions(x[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);L[S]=Math.max.apply(null,U)+V+V,U=[]}if(O){var ct={};for(m=0;m<b.length;m+=1)ct[b[m]]={},ct[b[m]].text=M[m],ct[b[m]].align=T[m];var ot=o.call(this,ct,L);N=b.map(function(Mt){return new s(l,d,L[Mt],ot,ct[Mt].text,void 0,ct[Mt].align)}),this.setTableHeaderRow(N),this.printHeaderRow(1,!1)}var st=f.reduce(function(Mt,qt){return Mt[qt.name]=qt.align,Mt},{});for(m=0;m<p.length;m+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:m,data:p[m]},this);var Q=o.call(this,p[m],L);for(y=0;y<b.length;y+=1){var xt=p[m][b[y]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:m,col:y,data:xt},this),a.call(this,new s(l,d,L[b[y]],Q,xt,m+2,st[b[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=d,this};var o=function(l,d){var p=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(l).map(function(m){var x=l[m];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,d[m]-p-p)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/g+p+p},this).reduce(function(m,x){return Math.max(m,x)},0)};i.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},i.printHeaderRow=function(l,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){p=this.internal.__cell__.tableHeaderRow[m].clone(),d&&(p.y=this.internal.__cell__.margins.top||0,g.push(p)),p.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,p),this.setTextColor(x)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),t=!1}}(cn.API);var kP={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},IP=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],AC=TP(IP),DP=[100,200,300,400,500,600,700,800,900],IH=TP(DP);function TC(i){var e=i.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return kP[s=s||"normal"]?s:"normal"}(i.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(i.weight),r=function(s){return typeof AC[s=s||"normal"]=="number"?s:"normal"}(i.stretch);return{family:e,style:t,weight:n,stretch:r,src:i.src||[],ref:i.ref||{name:e,style:[r,t,n].join(" ")}}}function dP(i,e,t,n){var r;for(r=t;r>=0&&r<e.length;r+=n)if(i[e[r]])return i[e[r]];for(r=t;r>=0&&r<e.length;r-=n)if(i[e[r]])return i[e[r]]}var DH={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},uP={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function hP(i){return[i.stretch,i.style,i.weight,i.family].join(" ")}function PH(i,e,t){for(var n=(t=t||{}).defaultFontFamily||"times",r=Object.assign({},DH,t.genericFontFamilies||{}),s=null,a=null,o=0;o<e.length;++o)if(r[(s=TC(e[o])).family]&&(s.family=r[s.family]),i.hasOwnProperty(s.family)){a=i[s.family];break}if(!(a=a||i[n]))throw new Error("Could not find a font-family for the rule '"+hP(s)+"' and default family '"+n+"'.");if(a=function(l,d){if(d[l])return d[l];var p=AC[l],f=p<=AC.normal?-1:1,g=dP(d,IP,p,f);if(!g)throw new Error("Could not find a matching font-stretch value for "+l);return g}(s.stretch,a),a=function(l,d){if(d[l])return d[l];for(var p=kP[l],f=0;f<p.length;++f)if(d[p[f]])return d[p[f]];throw new Error("Could not find a matching font-style for "+l)}(s.style,a),!(a=function(l,d){if(d[l])return d[l];if(l===400&&d[500])return d[500];if(l===500&&d[400])return d[400];var p=IH[l],f=dP(d,DP,p,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+hP(s)+"'.");return a}function pP(i){return i.trimLeft()}function RH(i,e){for(var t=0;t<i.length;){if(i.charAt(t)===e)return[i.substring(0,t),i.substring(t+1)];t+=1}return null}function LH(i){var e=i.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],i.substring(e[0].length)]}var B1,fP,mP,yC=["times"];(function(i){var e,t,n,r,s,a,o,l,d,p=function(z){return z=z||{},this.isStrokeTransparent=z.isStrokeTransparent||!1,this.strokeOpacity=z.strokeOpacity||1,this.strokeStyle=z.strokeStyle||"#000000",this.fillStyle=z.fillStyle||"#000000",this.isFillTransparent=z.isFillTransparent||!1,this.fillOpacity=z.fillOpacity||1,this.font=z.font||"10px sans-serif",this.textBaseline=z.textBaseline||"alphabetic",this.textAlign=z.textAlign||"left",this.lineWidth=z.lineWidth||1,this.lineJoin=z.lineJoin||"miter",this.lineCap=z.lineCap||"butt",this.path=z.path||[],this.transform=z.transform!==void 0?z.transform.clone():new l,this.globalCompositeOperation=z.globalCompositeOperation||"normal",this.globalAlpha=z.globalAlpha||1,this.clip_path=z.clip_path||[],this.currentPoint=z.currentPoint||new a,this.miterLimit=z.miterLimit||10,this.lastPoint=z.lastPoint||new a,this.lineDashOffset=z.lineDashOffset||0,this.lineDash=z.lineDash||[],this.margin=z.margin||[0,0,0,0],this.prevPageLastElemOffset=z.prevPageLastElemOffset||0,this.ignoreClearRect=typeof z.ignoreClearRect!="boolean"||z.ignoreClearRect,this};i.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,d=new p}]);var f=function(z){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var it=z;Object.defineProperty(this,"pdf",{get:function(){return it}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(Yt){Z=!!Yt}});var at=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return at},set:function(Yt){at=!!Yt}});var pt=0;Object.defineProperty(this,"posX",{get:function(){return pt},set:function(Yt){isNaN(Yt)||(pt=Yt)}});var ft=0;Object.defineProperty(this,"posY",{get:function(){return ft},set:function(Yt){isNaN(Yt)||(ft=Yt)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Yt){var ut;typeof Yt=="number"?ut=[Yt,Yt,Yt,Yt]:((ut=new Array(4))[0]=Yt[0],ut[1]=Yt.length>=2?Yt[1]:ut[0],ut[2]=Yt.length>=3?Yt[2]:ut[0],ut[3]=Yt.length>=4?Yt[3]:ut[1]),d.margin=ut}});var St=!1;Object.defineProperty(this,"autoPaging",{get:function(){return St},set:function(Yt){St=Yt}});var kt=0;Object.defineProperty(this,"lastBreak",{get:function(){return kt},set:function(Yt){kt=Yt}});var Qt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Qt},set:function(Yt){Qt=Yt}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Yt){Yt instanceof p&&(d=Yt)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Yt){d.path=Yt}});var ne=[];Object.defineProperty(this,"ctxStack",{get:function(){return ne},set:function(Yt){ne=Yt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Yt){var ut;ut=g(Yt),this.ctx.fillStyle=ut.style,this.ctx.isFillTransparent=ut.a===0,this.ctx.fillOpacity=ut.a,this.pdf.setFillColor(ut.r,ut.g,ut.b,{a:ut.a}),this.pdf.setTextColor(ut.r,ut.g,ut.b,{a:ut.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Yt){var ut=g(Yt);this.ctx.strokeStyle=ut.style,this.ctx.isStrokeTransparent=ut.a===0,this.ctx.strokeOpacity=ut.a,ut.a===0?this.pdf.setDrawColor(255,255,255):(ut.a,this.pdf.setDrawColor(ut.r,ut.g,ut.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Yt){["butt","round","square"].indexOf(Yt)!==-1&&(this.ctx.lineCap=Yt,this.pdf.setLineCap(Yt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Yt){isNaN(Yt)||(this.ctx.lineWidth=Yt,this.pdf.setLineWidth(Yt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Yt){["bevel","round","miter"].indexOf(Yt)!==-1&&(this.ctx.lineJoin=Yt,this.pdf.setLineJoin(Yt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Yt){isNaN(Yt)||(this.ctx.miterLimit=Yt,this.pdf.setMiterLimit(Yt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Yt){this.ctx.textBaseline=Yt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Yt){["right","end","center","left","start"].indexOf(Yt)!==-1&&(this.ctx.textAlign=Yt)}});var ue=null;function _e(Yt,ut){if(ue===null){var Te=function(ae){var ee=[];return Object.keys(ae).forEach(function(Zt){ae[Zt].forEach(function(tt){var j=null;switch(tt){case"bold":j={family:Zt,weight:"bold"};break;case"italic":j={family:Zt,style:"italic"};break;case"bolditalic":j={family:Zt,weight:"bold",style:"italic"};break;case"":case"normal":j={family:Zt}}j!==null&&(j.ref={name:Zt,style:tt},ee.push(j))})}),ee}(Yt.getFontList());ue=function(ae){for(var ee={},Zt=0;Zt<ae.length;++Zt){var tt=TC(ae[Zt]),j=tt.family,yt=tt.stretch,jt=tt.style,Xt=tt.weight;ee[j]=ee[j]||{},ee[j][yt]=ee[j][yt]||{},ee[j][yt][jt]=ee[j][yt][jt]||{},ee[j][yt][jt][Xt]=tt}return ee}(Te.concat(ut))}return ue}var mt=null;Object.defineProperty(this,"fontFaces",{get:function(){return mt},set:function(Yt){ue=null,mt=Yt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Yt){var ut;if(this.ctx.font=Yt,(ut=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Yt))!==null){var Te=ut[1],ae=(ut[2],ut[3]),ee=ut[4],Zt=(ut[5],ut[6]),tt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ee)[2];ee=Math.floor(tt==="px"?parseFloat(ee)*this.pdf.internal.scaleFactor:tt==="em"?parseFloat(ee)*this.pdf.getFontSize():parseFloat(ee)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ee);var j=function(ce){var Re,Ut,Me=[],Ce=ce.trim();if(Ce==="")return yC;if(Ce in uP)return[uP[Ce]];for(;Ce!=="";){switch(Ut=null,Re=(Ce=pP(Ce)).charAt(0)){case'"':case"'":Ut=RH(Ce.substring(1),Re);break;default:Ut=LH(Ce)}if(Ut===null||(Me.push(Ut[0]),(Ce=pP(Ut[1]))!==""&&Ce.charAt(0)!==","))return yC;Ce=Ce.replace(/^,/,"")}return Me}(Zt);if(this.fontFaces){var yt=PH(_e(this.pdf,this.fontFaces),j.map(function(ce){return{family:ce,stretch:"normal",weight:ae,style:Te}}));this.pdf.setFont(yt.ref.name,yt.ref.style)}else{var jt="";(ae==="bold"||parseInt(ae,10)>=700||Te==="bold")&&(jt="bold"),Te==="italic"&&(jt+="italic"),jt.length===0&&(jt="normal");for(var Xt="",Ht={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},we=0;we<j.length;we++){if(this.pdf.internal.getFont(j[we],jt,{noFallback:!0,disableWarning:!0})!==void 0){Xt=j[we];break}if(jt==="bolditalic"&&this.pdf.internal.getFont(j[we],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Xt=j[we],jt="bold";else if(this.pdf.internal.getFont(j[we],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Xt=j[we],jt="normal";break}}if(Xt===""){for(var ge=0;ge<j.length;ge++)if(Ht[j[ge]]){Xt=Ht[j[ge]];break}}Xt=Xt===""?"Times":Xt,this.pdf.setFont(Xt,jt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Yt){this.ctx.globalCompositeOperation=Yt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Yt){this.ctx.globalAlpha=Yt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Yt){this.ctx.lineDashOffset=Yt,qt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Yt){this.ctx.lineDash=Yt,qt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Yt){this.ctx.ignoreClearRect=!!Yt}})};f.prototype.setLineDash=function(z){this.lineDash=z},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){k.call(this,"fill",!1)},f.prototype.stroke=function(){k.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(z,it){if(isNaN(z)||isNaN(it))throw Ii.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new a(z,it));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(z,it)},f.prototype.closePath=function(){var z=new a(0,0),it=0;for(it=this.path.length-1;it!==-1;it--)if(this.path[it].type==="begin"&&xi(this.path[it+1])==="object"&&typeof this.path[it+1].x=="number"){z=new a(this.path[it+1].x,this.path[it+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(z.x,z.y)},f.prototype.lineTo=function(z,it){if(isNaN(z)||isNaN(it))throw Ii.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new a(z,it));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(Z.x,Z.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},f.prototype.quadraticCurveTo=function(z,it,Z,at){if(isNaN(Z)||isNaN(at)||isNaN(z)||isNaN(it))throw Ii.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var pt=this.ctx.transform.applyToPoint(new a(Z,at)),ft=this.ctx.transform.applyToPoint(new a(z,it));this.path.push({type:"qct",x1:ft.x,y1:ft.y,x:pt.x,y:pt.y}),this.ctx.lastPoint=new a(pt.x,pt.y)},f.prototype.bezierCurveTo=function(z,it,Z,at,pt,ft){if(isNaN(pt)||isNaN(ft)||isNaN(z)||isNaN(it)||isNaN(Z)||isNaN(at))throw Ii.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var St=this.ctx.transform.applyToPoint(new a(pt,ft)),kt=this.ctx.transform.applyToPoint(new a(z,it)),Qt=this.ctx.transform.applyToPoint(new a(Z,at));this.path.push({type:"bct",x1:kt.x,y1:kt.y,x2:Qt.x,y2:Qt.y,x:St.x,y:St.y}),this.ctx.lastPoint=new a(St.x,St.y)},f.prototype.arc=function(z,it,Z,at,pt,ft){if(isNaN(z)||isNaN(it)||isNaN(Z)||isNaN(at)||isNaN(pt))throw Ii.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ft=!!ft,!this.ctx.transform.isIdentity){var St=this.ctx.transform.applyToPoint(new a(z,it));z=St.x,it=St.y;var kt=this.ctx.transform.applyToPoint(new a(0,Z)),Qt=this.ctx.transform.applyToPoint(new a(0,0));Z=Math.sqrt(Math.pow(kt.x-Qt.x,2)+Math.pow(kt.y-Qt.y,2))}Math.abs(pt-at)>=2*Math.PI&&(at=0,pt=2*Math.PI),this.path.push({type:"arc",x:z,y:it,radius:Z,startAngle:at,endAngle:pt,counterclockwise:ft})},f.prototype.arcTo=function(z,it,Z,at,pt){throw new Error("arcTo not implemented.")},f.prototype.rect=function(z,it,Z,at){if(isNaN(z)||isNaN(it)||isNaN(Z)||isNaN(at))throw Ii.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(z,it),this.lineTo(z+Z,it),this.lineTo(z+Z,it+at),this.lineTo(z,it+at),this.lineTo(z,it),this.lineTo(z+Z,it),this.lineTo(z,it)},f.prototype.fillRect=function(z,it,Z,at){if(isNaN(z)||isNaN(it)||isNaN(Z)||isNaN(at))throw Ii.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var pt={};this.lineCap!=="butt"&&(pt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(pt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(z,it,Z,at),this.fill(),pt.hasOwnProperty("lineCap")&&(this.lineCap=pt.lineCap),pt.hasOwnProperty("lineJoin")&&(this.lineJoin=pt.lineJoin)}},f.prototype.strokeRect=function(z,it,Z,at){if(isNaN(z)||isNaN(it)||isNaN(Z)||isNaN(at))throw Ii.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(z,it,Z,at),this.stroke())},f.prototype.clearRect=function(z,it,Z,at){if(isNaN(z)||isNaN(it)||isNaN(Z)||isNaN(at))throw Ii.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(z,it,Z,at))},f.prototype.save=function(z){z=typeof z!="boolean"||z;for(var it=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(it),z){this.ctx.fontSize=this.pdf.internal.getFontSize();var at=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=at}},f.prototype.restore=function(z){z=typeof z!="boolean"||z;for(var it=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(it),z&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(z){var it,Z,at,pt;if(z.isCanvasGradient===!0&&(z=z.getColor()),!z)return{r:0,g:0,b:0,a:0,style:z};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(z))it=0,Z=0,at=0,pt=0;else{var ft=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(z);if(ft!==null)it=parseInt(ft[1]),Z=parseInt(ft[2]),at=parseInt(ft[3]),pt=1;else if((ft=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(z))!==null)it=parseInt(ft[1]),Z=parseInt(ft[2]),at=parseInt(ft[3]),pt=parseFloat(ft[4]);else{if(pt=1,typeof z=="string"&&z.charAt(0)!=="#"){var St=new SP(z);z=St.ok?St.toHex():"#000000"}z.length===4?(it=z.substring(1,2),it+=it,Z=z.substring(2,3),Z+=Z,at=z.substring(3,4),at+=at):(it=z.substring(1,3),Z=z.substring(3,5),at=z.substring(5,7)),it=parseInt(it,16),Z=parseInt(Z,16),at=parseInt(at,16)}}return{r:it,g:Z,b:at,a:pt,style:z}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(z,it,Z,at){if(isNaN(it)||isNaN(Z)||typeof z!="string")throw Ii.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(at=isNaN(at)?void 0:at,!m.call(this)){var pt=Q(this.ctx.transform.rotation),ft=this.ctx.transform.scaleX;V.call(this,{text:z,x:it,y:Z,scale:ft,angle:pt,align:this.textAlign,maxWidth:at})}},f.prototype.strokeText=function(z,it,Z,at){if(isNaN(it)||isNaN(Z)||typeof z!="string")throw Ii.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){at=isNaN(at)?void 0:at;var pt=Q(this.ctx.transform.rotation),ft=this.ctx.transform.scaleX;V.call(this,{text:z,x:it,y:Z,scale:ft,renderingMode:"stroke",angle:pt,align:this.textAlign,maxWidth:at})}},f.prototype.measureText=function(z){if(typeof z!="string")throw Ii.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var it=this.pdf,Z=this.pdf.internal.scaleFactor,at=it.internal.getFontSize(),pt=it.getStringUnitWidth(z)*at/it.internal.scaleFactor,ft=function(St){var kt=(St=St||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return kt}}),this};return new ft({width:pt*=Math.round(96*Z/72*1e4)/1e4})},f.prototype.scale=function(z,it){if(isNaN(z)||isNaN(it))throw Ii.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new l(z,0,0,it,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},f.prototype.rotate=function(z){if(isNaN(z))throw Ii.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var it=new l(Math.cos(z),Math.sin(z),-Math.sin(z),Math.cos(z),0,0);this.ctx.transform=this.ctx.transform.multiply(it)},f.prototype.translate=function(z,it){if(isNaN(z)||isNaN(it))throw Ii.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new l(1,0,0,1,z,it);this.ctx.transform=this.ctx.transform.multiply(Z)},f.prototype.transform=function(z,it,Z,at,pt,ft){if(isNaN(z)||isNaN(it)||isNaN(Z)||isNaN(at)||isNaN(pt)||isNaN(ft))throw Ii.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var St=new l(z,it,Z,at,pt,ft);this.ctx.transform=this.ctx.transform.multiply(St)},f.prototype.setTransform=function(z,it,Z,at,pt,ft){z=isNaN(z)?1:z,it=isNaN(it)?0:it,Z=isNaN(Z)?0:Z,at=isNaN(at)?1:at,pt=isNaN(pt)?0:pt,ft=isNaN(ft)?0:ft,this.ctx.transform=new l(z,it,Z,at,pt,ft)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(z,it,Z,at,pt,ft,St,kt,Qt){var ne=this.pdf.getImageProperties(z),ue=1,_e=1,mt=1,Yt=1;at!==void 0&&kt!==void 0&&(mt=kt/at,Yt=Qt/pt,ue=ne.width/at*kt/at,_e=ne.height/pt*Qt/pt),ft===void 0&&(ft=it,St=Z,it=0,Z=0),at!==void 0&&kt===void 0&&(kt=at,Qt=pt),at===void 0&&kt===void 0&&(kt=ne.width,Qt=ne.height);for(var ut,Te=this.ctx.transform.decompose(),ae=Q(Te.rotate.shx),ee=new l,Zt=(ee=(ee=(ee=ee.multiply(Te.translate)).multiply(Te.skew)).multiply(Te.scale)).applyToRectangle(new o(ft-it*mt,St-Z*Yt,at*ue,pt*_e)),tt=S.call(this,Zt),j=[],yt=0;yt<tt.length;yt+=1)j.indexOf(tt[yt])===-1&&j.push(tt[yt]);if(T(j),this.autoPaging)for(var jt=j[0],Xt=j[j.length-1],Ht=jt;Ht<Xt+1;Ht++){this.pdf.setPage(Ht);var we=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ge=Ht===1?this.posY+this.margin[0]:this.margin[0],ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Re=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ut=Ht===1?0:ce+(Ht-2)*Re;if(this.ctx.clip_path.length!==0){var Me=this.path;ut=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(ut,this.posX+this.margin[3],-Ut+ge+this.ctx.prevPageLastElemOffset),L.call(this,"fill",!0),this.path=Me}var Ce=JSON.parse(JSON.stringify(Zt));Ce=M([Ce],this.posX+this.margin[3],-Ut+ge+this.ctx.prevPageLastElemOffset)[0];var Xe=(Ht>jt||Ht<Xt)&&y.call(this);Xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],we,Re,null).clip().discardPath()),this.pdf.addImage(z,"JPEG",Ce.x,Ce.y,Ce.w,Ce.h,null,null,ae),Xe&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(z,"JPEG",Zt.x,Zt.y,Zt.w,Zt.h,null,null,ae)};var S=function(z,it,Z){var at=[];it=it||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var pt=this.posY+this.ctx.prevPageLastElemOffset;switch(z.type){default:case"mt":case"lt":at.push(Math.floor((z.y+pt)/Z)+1);break;case"arc":at.push(Math.floor((z.y+pt-z.radius)/Z)+1),at.push(Math.floor((z.y+pt+z.radius)/Z)+1);break;case"qct":var ft=xt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x,z.y);at.push(Math.floor((ft.y+pt)/Z)+1),at.push(Math.floor((ft.y+ft.h+pt)/Z)+1);break;case"bct":var St=Mt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x2,z.y2,z.x,z.y);at.push(Math.floor((St.y+pt)/Z)+1),at.push(Math.floor((St.y+St.h+pt)/Z)+1);break;case"rect":at.push(Math.floor((z.y+pt)/Z)+1),at.push(Math.floor((z.y+z.h+pt)/Z)+1)}for(var kt=0;kt<at.length;kt+=1)for(;this.pdf.internal.getNumberOfPages()<at[kt];)b.call(this);return at},b=function(){var z=this.fillStyle,it=this.strokeStyle,Z=this.font,at=this.lineCap,pt=this.lineWidth,ft=this.lineJoin;this.pdf.addPage(),this.fillStyle=z,this.strokeStyle=it,this.font=Z,this.lineCap=at,this.lineWidth=pt,this.lineJoin=ft},M=function(z,it,Z){for(var at=0;at<z.length;at++)switch(z[at].type){case"bct":z[at].x2+=it,z[at].y2+=Z;case"qct":z[at].x1+=it,z[at].y1+=Z;case"mt":case"lt":case"arc":default:z[at].x+=it,z[at].y+=Z}return z},T=function(z){return z.sort(function(it,Z){return it-Z})},k=function(z,it){for(var Z,at,pt=this.fillStyle,ft=this.strokeStyle,St=this.lineCap,kt=this.lineWidth,Qt=Math.abs(kt*this.ctx.transform.scaleX),ne=this.lineJoin,ue=JSON.parse(JSON.stringify(this.path)),_e=JSON.parse(JSON.stringify(this.path)),mt=[],Yt=0;Yt<_e.length;Yt++)if(_e[Yt].x!==void 0)for(var ut=S.call(this,_e[Yt]),Te=0;Te<ut.length;Te+=1)mt.indexOf(ut[Te])===-1&&mt.push(ut[Te]);for(var ae=0;ae<mt.length;ae++)for(;this.pdf.internal.getNumberOfPages()<mt[ae];)b.call(this);if(T(mt),this.autoPaging)for(var ee=mt[0],Zt=mt[mt.length-1],tt=ee;tt<Zt+1;tt++){this.pdf.setPage(tt),this.fillStyle=pt,this.strokeStyle=ft,this.lineCap=St,this.lineWidth=Qt,this.lineJoin=ne;var j=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yt=tt===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ht=tt===1?0:jt+(tt-2)*Xt;if(this.ctx.clip_path.length!==0){var we=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(Z,this.posX+this.margin[3],-Ht+yt+this.ctx.prevPageLastElemOffset),L.call(this,z,!0),this.path=we}if(at=JSON.parse(JSON.stringify(ue)),this.path=M(at,this.posX+this.margin[3],-Ht+yt+this.ctx.prevPageLastElemOffset),it===!1||tt===0){var ge=(tt>ee||tt<Zt)&&y.call(this);ge&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],j,Xt,null).clip().discardPath()),L.call(this,z,it),ge&&this.pdf.restoreGraphicsState()}this.lineWidth=kt}else this.lineWidth=Qt,L.call(this,z,it),this.lineWidth=kt;this.path=ue},L=function(z,it){if((z!=="stroke"||it||!x.call(this))&&(z==="stroke"||it||!m.call(this))){for(var Z,at,pt=[],ft=this.path,St=0;St<ft.length;St++){var kt=ft[St];switch(kt.type){case"begin":pt.push({begin:!0});break;case"close":pt.push({close:!0});break;case"mt":pt.push({start:kt,deltas:[],abs:[]});break;case"lt":var Qt=pt.length;if(ft[St-1]&&!isNaN(ft[St-1].x)&&(Z=[kt.x-ft[St-1].x,kt.y-ft[St-1].y],Qt>0)){for(;Qt>=0;Qt--)if(pt[Qt-1].close!==!0&&pt[Qt-1].begin!==!0){pt[Qt-1].deltas.push(Z),pt[Qt-1].abs.push(kt);break}}break;case"bct":Z=[kt.x1-ft[St-1].x,kt.y1-ft[St-1].y,kt.x2-ft[St-1].x,kt.y2-ft[St-1].y,kt.x-ft[St-1].x,kt.y-ft[St-1].y],pt[pt.length-1].deltas.push(Z);break;case"qct":var ne=ft[St-1].x+2/3*(kt.x1-ft[St-1].x),ue=ft[St-1].y+2/3*(kt.y1-ft[St-1].y),_e=kt.x+2/3*(kt.x1-kt.x),mt=kt.y+2/3*(kt.y1-kt.y),Yt=kt.x,ut=kt.y;Z=[ne-ft[St-1].x,ue-ft[St-1].y,_e-ft[St-1].x,mt-ft[St-1].y,Yt-ft[St-1].x,ut-ft[St-1].y],pt[pt.length-1].deltas.push(Z);break;case"arc":pt.push({deltas:[],abs:[],arc:!0}),Array.isArray(pt[pt.length-1].abs)&&pt[pt.length-1].abs.push(kt)}}at=it?null:z==="stroke"?"stroke":"fill";for(var Te=!1,ae=0;ae<pt.length;ae++)if(pt[ae].arc)for(var ee=pt[ae].abs,Zt=0;Zt<ee.length;Zt++){var tt=ee[Zt];tt.type==="arc"?F.call(this,tt.x,tt.y,tt.radius,tt.startAngle,tt.endAngle,tt.counterclockwise,void 0,it,!Te):$.call(this,tt.x,tt.y),Te=!0}else if(pt[ae].close===!0)this.pdf.internal.out("h"),Te=!1;else if(pt[ae].begin!==!0){var j=pt[ae].start.x,yt=pt[ae].start.y;K.call(this,pt[ae].deltas,j,yt),Te=!0}at&&O.call(this,at),it&&B.call(this)}},U=function(z){var it=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=it*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return z-Z;case"top":return z+it-Z;case"hanging":return z+it-2*Z;case"middle":return z+it/2-Z;case"ideographic":return z;case"alphabetic":default:return z}},N=function(z){return z+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var z=function(){};return z.colorStops=[],z.addColorStop=function(it,Z){this.colorStops.push([it,Z])},z.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},z.isCanvasGradient=!0,z},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var F=function(z,it,Z,at,pt,ft,St,kt,Qt){for(var ne=ot.call(this,Z,at,pt,ft),ue=0;ue<ne.length;ue++){var _e=ne[ue];ue===0&&(Qt?P.call(this,_e.x1+z,_e.y1+it):$.call(this,_e.x1+z,_e.y1+it)),ct.call(this,z,it,_e.x2,_e.y2,_e.x3,_e.y3,_e.x4,_e.y4)}kt?B.call(this):O.call(this,St)},O=function(z){switch(z){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},B=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(z,it){this.pdf.internal.out(t(z)+" "+n(it)+" m")},V=function(z){var it;switch(z.align){case"right":case"end":it="right";break;case"center":it="center";break;case"left":case"start":default:it="left"}var Z=this.pdf.getTextDimensions(z.text),at=U.call(this,z.y),pt=N.call(this,at)-Z.h,ft=this.ctx.transform.applyToPoint(new a(z.x,at)),St=this.ctx.transform.decompose(),kt=new l;kt=(kt=(kt=kt.multiply(St.translate)).multiply(St.skew)).multiply(St.scale);for(var Qt,ne,ue,_e=this.ctx.transform.applyToRectangle(new o(z.x,at,Z.w,Z.h)),mt=kt.applyToRectangle(new o(z.x,pt,Z.w,Z.h)),Yt=S.call(this,mt),ut=[],Te=0;Te<Yt.length;Te+=1)ut.indexOf(Yt[Te])===-1&&ut.push(Yt[Te]);if(T(ut),this.autoPaging)for(var ae=ut[0],ee=ut[ut.length-1],Zt=ae;Zt<ee+1;Zt++){this.pdf.setPage(Zt);var tt=Zt===1?this.posY+this.margin[0]:this.margin[0],j=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[2],jt=yt-this.margin[0],Xt=this.pdf.internal.pageSize.width-this.margin[1],Ht=Xt-this.margin[3],we=Zt===1?0:j+(Zt-2)*jt;if(this.ctx.clip_path.length!==0){var ge=this.path;Qt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(Qt,this.posX+this.margin[3],-1*we+tt),L.call(this,"fill",!0),this.path=ge}var ce=M([JSON.parse(JSON.stringify(mt))],this.posX+this.margin[3],-we+tt+this.ctx.prevPageLastElemOffset)[0];z.scale>=.01&&(ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ne*z.scale),ue=this.lineWidth,this.lineWidth=ue*z.scale);var Re=this.autoPaging!=="text";if(Re||ce.y+ce.h<=yt){if(Re||ce.y>=tt&&ce.x<=Xt){var Ut=Re?z.text:this.pdf.splitTextToSize(z.text,z.maxWidth||Xt-ce.x)[0],Me=M([JSON.parse(JSON.stringify(_e))],this.posX+this.margin[3],-we+tt+this.ctx.prevPageLastElemOffset)[0],Ce=Re&&(Zt>ae||Zt<ee)&&y.call(this);Ce&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ht,jt,null).clip().discardPath()),this.pdf.text(Ut,Me.x,Me.y,{angle:z.angle,align:it,renderingMode:z.renderingMode}),Ce&&this.pdf.restoreGraphicsState()}}else ce.y<yt&&(this.ctx.prevPageLastElemOffset+=yt-ce.y);z.scale>=.01&&(this.pdf.setFontSize(ne),this.lineWidth=ue)}else z.scale>=.01&&(ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ne*z.scale),ue=this.lineWidth,this.lineWidth=ue*z.scale),this.pdf.text(z.text,ft.x+this.posX,ft.y+this.posY,{angle:z.angle,align:it,renderingMode:z.renderingMode,maxWidth:z.maxWidth}),z.scale>=.01&&(this.pdf.setFontSize(ne),this.lineWidth=ue)},$=function(z,it,Z,at){Z=Z||0,at=at||0,this.pdf.internal.out(t(z+Z)+" "+n(it+at)+" l")},K=function(z,it,Z){return this.pdf.lines(z,it,Z,null,null)},ct=function(z,it,Z,at,pt,ft,St,kt){this.pdf.internal.out([e(r(Z+z)),e(s(at+it)),e(r(pt+z)),e(s(ft+it)),e(r(St+z)),e(s(kt+it)),"c"].join(" "))},ot=function(z,it,Z,at){for(var pt=2*Math.PI,ft=Math.PI/2;it>Z;)it-=pt;var St=Math.abs(Z-it);St<pt&&at&&(St=pt-St);for(var kt=[],Qt=at?-1:1,ne=it;St>1e-5;){var ue=ne+Qt*Math.min(St,ft);kt.push(st.call(this,z,ne,ue)),St-=Math.abs(ue-ne),ne=ue}return kt},st=function(z,it,Z){var at=(Z-it)/2,pt=z*Math.cos(at),ft=z*Math.sin(at),St=pt,kt=-ft,Qt=St*St+kt*kt,ne=Qt+St*pt+kt*ft,ue=4/3*(Math.sqrt(2*Qt*ne)-ne)/(St*ft-kt*pt),_e=St-ue*kt,mt=kt+ue*St,Yt=_e,ut=-mt,Te=at+it,ae=Math.cos(Te),ee=Math.sin(Te);return{x1:z*Math.cos(it),y1:z*Math.sin(it),x2:_e*ae-mt*ee,y2:_e*ee+mt*ae,x3:Yt*ae-ut*ee,y3:Yt*ee+ut*ae,x4:z*Math.cos(Z),y4:z*Math.sin(Z)}},Q=function(z){return 180*z/Math.PI},xt=function(z,it,Z,at,pt,ft){var St=z+.5*(Z-z),kt=it+.5*(at-it),Qt=pt+.5*(Z-pt),ne=ft+.5*(at-ft),ue=Math.min(z,pt,St,Qt),_e=Math.max(z,pt,St,Qt),mt=Math.min(it,ft,kt,ne),Yt=Math.max(it,ft,kt,ne);return new o(ue,mt,_e-ue,Yt-mt)},Mt=function(z,it,Z,at,pt,ft,St,kt){var Qt,ne,ue,_e,mt,Yt,ut,Te,ae,ee,Zt,tt,j,yt,jt=Z-z,Xt=at-it,Ht=pt-Z,we=ft-at,ge=St-pt,ce=kt-ft;for(ne=0;ne<41;ne++)ae=(ut=(ue=z+(Qt=ne/40)*jt)+Qt*((mt=Z+Qt*Ht)-ue))+Qt*(mt+Qt*(pt+Qt*ge-mt)-ut),ee=(Te=(_e=it+Qt*Xt)+Qt*((Yt=at+Qt*we)-_e))+Qt*(Yt+Qt*(ft+Qt*ce-Yt)-Te),ne==0?(Zt=ae,tt=ee,j=ae,yt=ee):(Zt=Math.min(Zt,ae),tt=Math.min(tt,ee),j=Math.max(j,ae),yt=Math.max(yt,ee));return new o(Math.round(Zt),Math.round(tt),Math.round(j-Zt),Math.round(yt-tt))},qt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var z,it,Z=(z=this.ctx.lineDash,it=this.ctx.lineDashOffset,JSON.stringify({lineDash:z,lineDashOffset:it}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(cn.API),function(i){var e=function(s){var a,o,l,d,p,f,g,m,x,y;for(/[^\x00-\xFF]/.test(s),o=[],l=0,d=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;d>l;l+=4)(p=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(f=(p=((p=((p=((p=(p-(y=p%85))/85)-(x=p%85))/85)-(m=p%85))/85)-(g=p%85))/85)%85,o.push(f+33,g+33,m+33,x+33,y+33)):o.push(122);return function(S,b){for(var M=b;M>0;M--)S.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},t=function(s){var a,o,l,d,p,f=String,g="length",m=255,x="charCodeAt",y="slice",S="replace";for(s[y](-2),s=s[y](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),l=[],d=0,p=(s+=a="uuuuu"[y](s[g]%5||5))[g];p>d;d+=5)o=52200625*(s[x](d)-33)+614125*(s[x](d+1)-33)+7225*(s[x](d+2)-33)+85*(s[x](d+3)-33)+(s[x](d+4)-33),l.push(m&o>>24,m&o>>16,m&o>>8,m&o);return function(b,M){for(var T=M;T>0;T--)b.pop()}(l,a[g]),f.fromCharCode.apply(f,l)},n=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},r=function(s){for(var a=new Uint8Array(s.length),o=s.length;o--;)a[o]=s.charCodeAt(o);return s=(a=O1(a)).reduce(function(l,d){return l+String.fromCharCode(d)},"")};i.processDataByFilters=function(s,a){var o=0,l=s||"",d=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=r(l),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:d.reverse().join(" ")}}}(cn.API),function(i){i.loadFile=function(e,t,n){return function(r,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,d,p){var f=new XMLHttpRequest,g=0,m=function(x){var y=x.length,S=[],b=String.fromCharCode;for(g=0;g<y;g+=1)S.push(b(255&x.charCodeAt(g)));return S.join("")};if(f.open("GET",l,!d),f.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(f.onload=function(){f.status===200?p(m(this.responseText)):p(void 0)}),f.send(null),d&&f.status===200)return m(f.responseText)}(r,s,a)}catch{}return o}(e,t,n)},i.loadImageFile=i.loadFile}(cn.API),function(i){function e(){return(dn.html2canvas?Promise.resolve(dn.html2canvas):import("./chunk-MGGNYBHL.js")).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(dn.DOMPurify?Promise.resolve(dn.DOMPurify):import("./chunk-XO7CODUH.js")).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var o=xi(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},r=function(a,o){var l=document.createElement(a);for(var d in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[d]=o.style[d];return l},s=function a(o){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),d=a.convert(Promise.resolve(),l);return d=(d=d.setProgress(1,a,1,[a])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,o){return a.__proto__=o||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(l){return this.set({src:r("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(d,p){for(var f=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),g=d.firstChild;g;g=g.nextSibling)p!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||f.appendChild(l(g,p));return d.nodeType===1&&(d.nodeName==="CANVAS"?(f.width=d.width,f.height=d.height,f.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(f.value=d.value),f.addEventListener("load",function(){f.scrollTop=d.scrollTop,f.scrollLeft=d.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=this.opt.jsPDF,d=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=d,d)for(var g=0;g<d.length;++g){var m=d[g],x=m.src.find(function(y){return y.format==="truetype"});x&&l.addFont(x.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},s.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(n(a)!=="object")return this;var o=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(a,o){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return o?o(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function o(l,d){return Math.floor(l*d/72*96)}return this.then(function(){(a=a||cn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,o,l,d){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,o,l,d){return this.setProgress(a?this.progress.val+a:null,o||null,l?this.progress.n+l:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(a,o){var l=this;return this.thenCore(a,o,function(d,p){return l.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(f){return l.updateProgress(null,d),f}).then(d,p).then(function(f){return l.updateProgress(1),f})})},s.prototype.thenCore=function(a,o,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),p=l.call(d,a,o);return s.convert(p,this.__proto__)},s.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},s.prototype.thenList=function(a){var o=this;return a.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return s.convert(o,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,cn.getPageSize=function(a,o,l){if(xi(a)==="object"){var d=a;a=d.orientation,o=d.unit||o,l=d.format||l}o=o||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var p,f=(""+l).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+o}var m,x=0,y=0;if(g.hasOwnProperty(f))x=g[f][1]/p,y=g[f][0]/p;else try{x=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",y>x&&(m=y,y=x,x=m);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",x>y&&(m=y,y=x,x=m)}return{width:y,height:x,unit:o,k:p,orientation:a}},i.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(TC):null;var l=new s(o);return o.worker?l:l.from(a).doCallback()}}(cn.API),cn.API.addJS=function(i){return mP=i,this.internal.events.subscribe("postPutResources",function(){B1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(B1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),fP=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+mP+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){B1!==void 0&&fP!==void 0&&this.internal.out("/Names <</JavaScript "+B1+" 0 R>>")}),this},function(i){var e;i.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=t.outline.render().split(/\r\n/),s=0;s<r.length;s++){var a=r[s],o=n.exec(a);if(o!=null){var l=o[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,p=[];for(s=0;s<d;s++){var f=t.internal.newObject();p.push(f);var g=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<p.length;s++)t.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),i.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),i.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,r,s){var a={title:r,options:s,children:[]};return n==null&&(n=this.root),n.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var r=0;r<n.children.length;r++)this.genIds_r(n.children[r])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var a=n.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,r){for(var s=0;s<r.children.length;s++)n.count++,this.count_r(n,r.children[s]);return n.count}}])}(cn.API),function(i){var e=[192,193,194,195,196,197,198,199];i.processJPEG=function(t,n,r,s,a,o){var l,d=this.decode.DCT_DECODE,p=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(f){for(var g,m=256*f.charCodeAt(4)+f.charCodeAt(5),x=f.length,y={width:0,height:0,numcomponents:1},S=4;S<x;S+=2){if(S+=m,e.indexOf(f.charCodeAt(S+1))!==-1){g=256*f.charCodeAt(S+5)+f.charCodeAt(S+6),y={width:256*f.charCodeAt(S+7)+f.charCodeAt(S+8),height:g,numcomponents:f.charCodeAt(S+9)};break}m=256*f.charCodeAt(S+2)+f.charCodeAt(S+3)}return y}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}p={data:t,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:d,index:n,alias:r}}return p}}(cn.API);var bh,V1,gP,_P,vP,OH=function(){var i,e,t;function n(s){var a,o,l,d,p,f,g,m,x,y,S,b,M,T;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(a=this.readUInt32(),x=(function(){var k,L;for(L=[],k=0;k<4;++k)L.push(String.fromCharCode(this.data[this.pos++]));return L}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),d=this.readUInt16()||100,f.delay=1e3*p/d,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,a-=4),s=f?.data||this.imgData,b=0;0<=a?b<a:b>a;0<=a?++b:--b)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(M=0;0<=y?M<y:M>y;0<=y?++M:--M)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":g=(S=this.read(a)).indexOf(0),m=String.fromCharCode.apply(String,S.slice(0,g)),this.text[m]=String.fromCharCode.apply(String,S.slice(g+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(T=this.colorType)===4||T===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var a,o;for(o=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),l=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function p(f,g,m,x){var y,S,b,M,T,k,L,U,N,F,O,B,P,V,$,K,ct,ot,st,Q,xt,Mt=Math.ceil((d.width-f)/m),qt=Math.ceil((d.height-g)/x),z=d.width==Mt&&d.height==qt;for(V=a*Mt,B=z?o:new Uint8Array(V*qt),k=s.length,P=0,S=0;P<qt&&l<k;){switch(s[l++]){case 0:for(M=ct=0;ct<V;M=ct+=1)B[S++]=s[l++];break;case 1:for(M=ot=0;ot<V;M=ot+=1)y=s[l++],T=M<a?0:B[S-a],B[S++]=(y+T)%256;break;case 2:for(M=st=0;st<V;M=st+=1)y=s[l++],b=(M-M%a)/a,$=P&&B[(P-1)*V+b*a+M%a],B[S++]=($+y)%256;break;case 3:for(M=Q=0;Q<V;M=Q+=1)y=s[l++],b=(M-M%a)/a,T=M<a?0:B[S-a],$=P&&B[(P-1)*V+b*a+M%a],B[S++]=(y+Math.floor((T+$)/2))%256;break;case 4:for(M=xt=0;xt<V;M=xt+=1)y=s[l++],b=(M-M%a)/a,T=M<a?0:B[S-a],P===0?$=K=0:($=B[(P-1)*V+b*a+M%a],K=b&&B[(P-1)*V+(b-1)*a+M%a]),L=T+$-K,U=Math.abs(L-T),F=Math.abs(L-$),O=Math.abs(L-K),N=U<=F&&U<=O?T:F<=O?$:K,B[S++]=(y+N)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!z){var it=((g+P*x)*d.width+f)*a,Z=P*V;for(M=0;M<Mt;M+=1){for(var at=0;at<a;at+=1)o[it++]=B[Z++];it+=(m-1)*a}}P++}}return s=rP(s),d.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),o},n.prototype.decodePalette=function(){var s,a,o,l,d,p,f,g,m;for(o=this.palette,p=this.transparency.indexed||[],d=new Uint8Array((p.length||0)+o.length),l=0,s=0,a=f=0,g=o.length;f<g;a=f+=3)d[l++]=o[a],d[l++]=o[a+1],d[l++]=o[a+2],d[l++]=(m=p[s++])!=null?m:255;return d},n.prototype.copyToImageData=function(s,a){var o,l,d,p,f,g,m,x,y,S,b;if(l=this.colors,y=null,o=this.hasAlphaChannel,this.palette.length&&(y=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),l=4,o=!0),x=(d=s.data||s).length,f=y||a,p=g=0,l===1)for(;p<x;)m=y?4*a[p/4]:g,S=f[m++],d[p++]=S,d[p++]=S,d[p++]=S,d[p++]=o?f[m++]:255,g=m;else for(;p<x;)m=y?4*a[p/4]:g,d[p++]=f[m++],d[p++]=f[m++],d[p++]=f[m++],d[p++]=o?f[m++]:255,g=m},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var r=function(){if(Object.prototype.toString.call(dn)==="[object Window]"){try{e=dn.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return r(),i=function(s){var a;if(r()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var a,o,l,d,p,f,g,m;if(this.animation){for(m=[],o=p=0,f=(g=this.animation.frames).length;p<f;o=++p)a=g[o],l=s.createImageData(a.width,a.height),d=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,d),a.imageData=l,m.push(a.image=i(l));return m}},n.prototype.renderFrame=function(s,a){var o,l,d;return o=(l=this.animation.frames)[a],d=l[a-1],a===0&&s.clearRect(0,0,this.width,this.height),d?.disposeOp===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):d?.disposeOp===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var a,o,l,d,p,f,g=this;return o=0,f=this.animation,d=f.numFrames,l=f.frames,p=f.numPlays,(a=function(){var m,x;if(m=o++%d,x=l[m],g.renderFrame(s,m),d>1&&o/d<p)return g.animation._timeout=setTimeout(a,x.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var a,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},n}();function NH(i){var e=0;if(i[e++]!==71||i[e++]!==73||i[e++]!==70||i[e++]!==56||(i[e++]+1&253)!=56||i[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=i[e++]|i[e++]<<8,n=i[e++]|i[e++]<<8,r=i[e++],s=r>>7,a=1<<(7&r)+1;i[e++],i[e++];var o=null,l=null;s&&(o=e,l=a,e+=3*a);var d=!0,p=[],f=0,g=null,m=0,x=null;for(this.width=t,this.height=n;d&&e<i.length;)switch(i[e++]){case 33:switch(i[e++]){case 255:if(i[e]!==11||i[e+1]==78&&i[e+2]==69&&i[e+3]==84&&i[e+4]==83&&i[e+5]==67&&i[e+6]==65&&i[e+7]==80&&i[e+8]==69&&i[e+9]==50&&i[e+10]==46&&i[e+11]==48&&i[e+12]==3&&i[e+13]==1&&i[e+16]==0)e+=14,x=i[e++]|i[e++]<<8,e++;else for(e+=12;;){if(!((P=i[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;case 249:if(i[e++]!==4||i[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=i[e++];f=i[e++]|i[e++]<<8,g=i[e++],!(1&y)&&(g=null),m=y>>2&7,e++;break;case 254:for(;;){if(!((P=i[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;default:throw new Error("Unknown graphic control label: 0x"+i[e-1].toString(16))}break;case 44:var S=i[e++]|i[e++]<<8,b=i[e++]|i[e++]<<8,M=i[e++]|i[e++]<<8,T=i[e++]|i[e++]<<8,k=i[e++],L=k>>6&1,U=1<<(7&k)+1,N=o,F=l,O=!1;k>>7&&(O=!0,N=e,F=U,e+=3*U);var B=e;for(e++;;){var P;if(!((P=i[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}p.push({x:S,y:b,width:M,height:T,has_local_palette:O,palette_offset:N,palette_size:F,data_offset:B,data_length:e-B,transparent_index:g,interlaced:!!L,delay:f,disposal:m});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+i[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return x},this.frameInfo=function(V){if(V<0||V>=p.length)throw new Error("Frame index out of range.");return p[V]},this.decodeAndBlitFrameBGRA=function(V,$){var K=this.frameInfo(V),ct=K.width*K.height,ot=new Uint8Array(ct);xP(i,K.data_offset,ot,ct);var st=K.palette_offset,Q=K.transparent_index;Q===null&&(Q=256);var xt=K.width,Mt=t-xt,qt=xt,z=4*(K.y*t+K.x),it=4*((K.y+K.height)*t+K.x),Z=z,at=4*Mt;K.interlaced===!0&&(at+=4*t*7);for(var pt=8,ft=0,St=ot.length;ft<St;++ft){var kt=ot[ft];if(qt===0&&(qt=xt,(Z+=at)>=it&&(at=4*Mt+4*t*(pt-1),Z=z+(xt+Mt)*(pt<<1),pt>>=1)),kt===Q)Z+=4;else{var Qt=i[st+3*kt],ne=i[st+3*kt+1],ue=i[st+3*kt+2];$[Z++]=ue,$[Z++]=ne,$[Z++]=Qt,$[Z++]=255}--qt}},this.decodeAndBlitFrameRGBA=function(V,$){var K=this.frameInfo(V),ct=K.width*K.height,ot=new Uint8Array(ct);xP(i,K.data_offset,ot,ct);var st=K.palette_offset,Q=K.transparent_index;Q===null&&(Q=256);var xt=K.width,Mt=t-xt,qt=xt,z=4*(K.y*t+K.x),it=4*((K.y+K.height)*t+K.x),Z=z,at=4*Mt;K.interlaced===!0&&(at+=4*t*7);for(var pt=8,ft=0,St=ot.length;ft<St;++ft){var kt=ot[ft];if(qt===0&&(qt=xt,(Z+=at)>=it&&(at=4*Mt+4*t*(pt-1),Z=z+(xt+Mt)*(pt<<1),pt>>=1)),kt===Q)Z+=4;else{var Qt=i[st+3*kt],ne=i[st+3*kt+1],ue=i[st+3*kt+2];$[Z++]=Qt,$[Z++]=ne,$[Z++]=ue,$[Z++]=255}--qt}}}function xP(i,e,t,n){for(var r=i[e++],s=1<<r,a=s+1,o=a+1,l=r+1,d=(1<<l)-1,p=0,f=0,g=0,m=i[e++],x=new Int32Array(4096),y=null;;){for(;p<16&&m!==0;)f|=i[e++]<<p,p+=8,m===1?m=i[e++]:--m;if(p<l)break;var S=f&d;if(f>>=l,p-=l,S!==s){if(S===a)break;for(var b=S<o?S:y,M=0,T=b;T>s;)T=x[T]>>8,++M;var k=T;if(g+M+(b!==S?1:0)>n)return void Ii.log("Warning, gif stream longer than expected.");t[g++]=k;var L=g+=M;for(b!==S&&(t[g++]=k),T=b;M--;)T=x[T],t[--L]=255&T,T>>=8;y!==null&&o<4096&&(x[o++]=y<<8|k,o>=d+1&&l<12&&(++l,d=d<<1|1)),y=S}else o=a+1,d=(1<<(l=r+1))-1,y=null}return g!==n&&Ii.log("Warning, gif stream shorter than expected."),t}function SC(i){var e,t,n,r,s,a=Math.floor,o=new Array(64),l=new Array(64),d=new Array(64),p=new Array(64),f=new Array(65535),g=new Array(65535),m=new Array(64),x=new Array(64),y=[],S=0,b=7,M=new Array(64),T=new Array(64),k=new Array(64),L=new Array(256),U=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],V=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ct=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ot(z,it){for(var Z=0,at=0,pt=new Array,ft=1;ft<=16;ft++){for(var St=1;St<=z[ft];St++)pt[it[at]]=[],pt[it[at]][0]=Z,pt[it[at]][1]=ft,at++,Z++;Z*=2}return pt}function st(z){for(var it=z[0],Z=z[1]-1;Z>=0;)it&1<<Z&&(S|=1<<b),Z--,--b<0&&(S==255?(Q(255),Q(0)):Q(S),b=7,S=0)}function Q(z){y.push(z)}function xt(z){Q(z>>8&255),Q(255&z)}function Mt(z,it,Z,at,pt){for(var ft,St=pt[0],kt=pt[240],Qt=function(ee,Zt){var tt,j,yt,jt,Xt,Ht,we,ge,ce,Re,Ut=0;for(ce=0;ce<8;++ce){tt=ee[Ut],j=ee[Ut+1],yt=ee[Ut+2],jt=ee[Ut+3],Xt=ee[Ut+4],Ht=ee[Ut+5],we=ee[Ut+6];var Me=tt+(ge=ee[Ut+7]),Ce=tt-ge,Xe=j+we,ye=j-we,Ge=yt+Ht,nn=yt-Ht,Ye=jt+Xt,It=jt-Xt,ve=Me+Ye,$t=Me-Ye,ie=Xe+Ge,be=Xe-Ge;ee[Ut]=ve+ie,ee[Ut+4]=ve-ie;var se=.707106781*(be+$t);ee[Ut+2]=$t+se,ee[Ut+6]=$t-se;var Pe=.382683433*((ve=It+nn)-(be=ye+Ce)),ri=.5411961*ve+Pe,qn=1.306562965*be+Pe,kn=.707106781*(ie=nn+ye),Yi=Ce+kn,He=Ce-kn;ee[Ut+5]=He+ri,ee[Ut+3]=He-ri,ee[Ut+1]=Yi+qn,ee[Ut+7]=Yi-qn,Ut+=8}for(Ut=0,ce=0;ce<8;++ce){tt=ee[Ut],j=ee[Ut+8],yt=ee[Ut+16],jt=ee[Ut+24],Xt=ee[Ut+32],Ht=ee[Ut+40],we=ee[Ut+48];var ys=tt+(ge=ee[Ut+56]),Fs=tt-ge,$i=j+we,ji=j-we,Hi=yt+Ht,Yr=yt-Ht,Ea=jt+Xt,ia=jt-Xt,$r=ys+Ea,Ss=ys-Ea,ws=$i+Hi,ra=$i-Hi;ee[Ut]=$r+ws,ee[Ut+32]=$r-ws;var Cs=.707106781*(ra+Ss);ee[Ut+16]=Ss+Cs,ee[Ut+48]=Ss-Cs;var sa=.382683433*(($r=ia+Yr)-(ra=ji+Fs)),Io=.5411961*$r+sa,bl=1.306562965*ra+sa,et=.707106781*(ws=Yr+ji),Dt=Fs+et,Wt=Fs-et;ee[Ut+40]=Wt+Io,ee[Ut+24]=Wt-Io,ee[Ut+8]=Dt+bl,ee[Ut+56]=Dt-bl,Ut++}for(ce=0;ce<64;++ce)Re=ee[ce]*Zt[ce],m[ce]=Re>0?Re+.5|0:Re-.5|0;return m}(z,it),ne=0;ne<64;++ne)x[N[ne]]=Qt[ne];var ue=x[0]-Z;Z=x[0],ue==0?st(at[0]):(st(at[g[ft=32767+ue]]),st(f[ft]));for(var _e=63;_e>0&&x[_e]==0;)_e--;if(_e==0)return st(St),Z;for(var mt,Yt=1;Yt<=_e;){for(var ut=Yt;x[Yt]==0&&Yt<=_e;)++Yt;var Te=Yt-ut;if(Te>=16){mt=Te>>4;for(var ae=1;ae<=mt;++ae)st(kt);Te&=15}ft=32767+x[Yt],st(pt[(Te<<4)+g[ft]]),st(f[ft]),Yt++}return _e!=63&&st(St),Z}function qt(z){z=Math.min(Math.max(z,1),100),s!=z&&(function(it){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],at=0;at<64;at++){var pt=a((Z[at]*it+50)/100);pt=Math.min(Math.max(pt,1),255),o[N[at]]=pt}for(var ft=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],St=0;St<64;St++){var kt=a((ft[St]*it+50)/100);kt=Math.min(Math.max(kt,1),255),l[N[St]]=kt}for(var Qt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ne=0,ue=0;ue<8;ue++)for(var _e=0;_e<8;_e++)d[ne]=1/(o[N[ne]]*Qt[ue]*Qt[_e]*8),p[ne]=1/(l[N[ne]]*Qt[ue]*Qt[_e]*8),ne++}(z<50?Math.floor(5e3/z):Math.floor(200-2*z)),s=z)}this.encode=function(z,it){it&&qt(it),y=new Array,S=0,b=7,xt(65496),xt(65504),xt(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),xt(1),xt(1),Q(0),Q(0),function(){xt(65499),xt(132),Q(0);for(var j=0;j<64;j++)Q(o[j]);Q(1);for(var yt=0;yt<64;yt++)Q(l[yt])}(),function(j,yt){xt(65472),xt(17),Q(8),xt(yt),xt(j),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(z.width,z.height),function(){xt(65476),xt(418),Q(0);for(var j=0;j<16;j++)Q(F[j+1]);for(var yt=0;yt<=11;yt++)Q(O[yt]);Q(16);for(var jt=0;jt<16;jt++)Q(B[jt+1]);for(var Xt=0;Xt<=161;Xt++)Q(P[Xt]);Q(1);for(var Ht=0;Ht<16;Ht++)Q(V[Ht+1]);for(var we=0;we<=11;we++)Q($[we]);Q(17);for(var ge=0;ge<16;ge++)Q(K[ge+1]);for(var ce=0;ce<=161;ce++)Q(ct[ce])}(),xt(65498),xt(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var Z=0,at=0,pt=0;S=0,b=7,this.encode.displayName="_encode_";for(var ft,St,kt,Qt,ne,ue,_e,mt,Yt,ut=z.data,Te=z.width,ae=z.height,ee=4*Te,Zt=0;Zt<ae;){for(ft=0;ft<ee;){for(ne=ee*Zt+ft,_e=-1,mt=0,Yt=0;Yt<64;Yt++)ue=ne+(mt=Yt>>3)*ee+(_e=4*(7&Yt)),Zt+mt>=ae&&(ue-=ee*(Zt+1+mt-ae)),ft+_e>=ee&&(ue-=ft+_e-ee+4),St=ut[ue++],kt=ut[ue++],Qt=ut[ue++],M[Yt]=(U[St]+U[kt+256>>0]+U[Qt+512>>0]>>16)-128,T[Yt]=(U[St+768>>0]+U[kt+1024>>0]+U[Qt+1280>>0]>>16)-128,k[Yt]=(U[St+1280>>0]+U[kt+1536>>0]+U[Qt+1792>>0]>>16)-128;Z=Mt(M,d,Z,e,n),at=Mt(T,p,at,t,r),pt=Mt(k,p,pt,t,r),ft+=32}Zt+=8}if(b>=0){var tt=[];tt[1]=b+1,tt[0]=(1<<b+1)-1,st(tt)}return xt(65497),new Uint8Array(y)},i=i||50,function(){for(var z=String.fromCharCode,it=0;it<256;it++)L[it]=z(it)}(),e=ot(F,O),t=ot(V,$),n=ot(B,P),r=ot(K,ct),function(){for(var z=1,it=2,Z=1;Z<=15;Z++){for(var at=z;at<it;at++)g[32767+at]=Z,f[32767+at]=[],f[32767+at][1]=Z,f[32767+at][0]=at;for(var pt=-(it-1);pt<=-z;pt++)g[32767+pt]=Z,f[32767+pt]=[],f[32767+pt][1]=Z,f[32767+pt][0]=it-1+pt;z<<=1,it<<=1}}(),function(){for(var z=0;z<256;z++)U[z]=19595*z,U[z+256>>0]=38470*z,U[z+512>>0]=7471*z+32768,U[z+768>>0]=-11059*z,U[z+1024>>0]=-21709*z,U[z+1280>>0]=32768*z+8421375,U[z+1536>>0]=-27439*z,U[z+1792>>0]=-5329*z}(),qt(i)}function Ga(i,e){if(this.pos=0,this.buffer=i,this.datav=new DataView(i.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function bP(i){function e(F){if(!F)throw Error("assert :P")}function t(F,O,B){for(var P=0;4>P;P++)if(F[O+P]!=B.charCodeAt(P))return!0;return!1}function n(F,O,B,P,V){for(var $=0;$<V;$++)F[O+$]=B[P+$]}function r(F,O,B,P){for(var V=0;V<P;V++)F[O+V]=B}function s(F){return new Int32Array(F)}function a(F,O){for(var B=[],P=0;P<F;P++)B.push(new O);return B}function o(F,O){var B=[];return function P(V,$,K){for(var ct=K[$],ot=0;ot<ct&&(V.push(K.length>$+1?[]:new O),!(K.length<$+1));ot++)P(V[ot],$+1,K)}(B,0,F),B}var l=function(){var F=this;function O(v,w){for(var E=1<<w-1>>>0;v&E;)E>>>=1;return E?(v&E-1)+E:v}function B(v,w,E,R,H){e(!(R%E));do v[w+(R-=E)]=H;while(0<R)}function P(v,w,E,R,H){if(e(2328>=H),512>=H)var X=s(512);else if((X=s(H))==null)return 0;return function(Y,J,nt,dt,wt,Bt){var Vt,Pt,le=J,Kt=1<<nt,Ct=s(16),Tt=s(16);for(e(wt!=0),e(dt!=null),e(Y!=null),e(0<nt),Pt=0;Pt<wt;++Pt){if(15<dt[Pt])return 0;++Ct[dt[Pt]]}if(Ct[0]==wt)return 0;for(Tt[1]=0,Vt=1;15>Vt;++Vt){if(Ct[Vt]>1<<Vt)return 0;Tt[Vt+1]=Tt[Vt]+Ct[Vt]}for(Pt=0;Pt<wt;++Pt)Vt=dt[Pt],0<dt[Pt]&&(Bt[Tt[Vt]++]=Pt);if(Tt[15]==1)return(dt=new V).g=0,dt.value=Bt[0],B(Y,le,1,Kt,dt),Kt;var re,he=-1,oe=Kt-1,Fe=0,Ae=1,tn=1,ke=1<<nt;for(Pt=0,Vt=1,wt=2;Vt<=nt;++Vt,wt<<=1){if(Ae+=tn<<=1,0>(tn-=Ct[Vt]))return 0;for(;0<Ct[Vt];--Ct[Vt])(dt=new V).g=Vt,dt.value=Bt[Pt++],B(Y,le+Fe,wt,ke,dt),Fe=O(Fe,Vt)}for(Vt=nt+1,wt=2;15>=Vt;++Vt,wt<<=1){if(Ae+=tn<<=1,0>(tn-=Ct[Vt]))return 0;for(;0<Ct[Vt];--Ct[Vt]){if(dt=new V,(Fe&oe)!=he){for(le+=ke,re=1<<(he=Vt)-nt;15>he&&!(0>=(re-=Ct[he]));)++he,re<<=1;Kt+=ke=1<<(re=he-nt),Y[J+(he=Fe&oe)].g=re+nt,Y[J+he].value=le-J-he}dt.g=Vt-nt,dt.value=Bt[Pt++],B(Y,le+(Fe>>nt),wt,ke,dt),Fe=O(Fe,Vt)}}return Ae!=2*Tt[15]-1?0:Kt}(v,w,E,R,H,X)}function V(){this.value=this.g=0}function $(){this.value=this.g=0}function K(){this.G=a(5,V),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(jr,$)}function ct(v,w,E,R){e(v!=null),e(w!=null),e(2147483648>R),v.Ca=254,v.I=0,v.b=-8,v.Ka=0,v.oa=w,v.pa=E,v.Jd=w,v.Yc=E+R,v.Zc=4<=R?E+R-4+1:E,ft(v)}function ot(v,w){for(var E=0;0<w--;)E|=kt(v,128)<<w;return E}function st(v,w){var E=ot(v,w);return St(v)?-E:E}function Q(v,w,E,R){var H,X=0;for(e(v!=null),e(w!=null),e(4294967288>R),v.Sb=R,v.Ra=0,v.u=0,v.h=0,4<R&&(R=4),H=0;H<R;++H)X+=w[E+H]<<8*H;v.Ra=X,v.bb=R,v.oa=w,v.pa=E}function xt(v){for(;8<=v.u&&v.bb<v.Sb;)v.Ra>>>=8,v.Ra+=v.oa[v.pa+v.bb]<<du-8>>>0,++v.bb,v.u-=8;Z(v)&&(v.h=1,v.u=0)}function Mt(v,w){if(e(0<=w),!v.h&&w<=cu){var E=it(v)&lu[w];return v.u+=w,xt(v),E}return v.h=1,v.u=0}function qt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function it(v){return v.Ra>>>(v.u&du-1)>>>0}function Z(v){return e(v.bb<=v.Sb),v.h||v.bb==v.Sb&&v.u>du}function at(v,w){v.u=w,v.h=Z(v)}function pt(v){v.u>=hp&&(e(v.u>=hp),xt(v))}function ft(v){e(v!=null&&v.oa!=null),v.pa<v.Zc?(v.I=(v.oa[v.pa++]|v.I<<8)>>>0,v.b+=8):(e(v!=null&&v.oa!=null),v.pa<v.Yc?(v.b+=8,v.I=v.oa[v.pa++]|v.I<<8):v.Ka?v.b=0:(v.I<<=8,v.b+=8,v.Ka=1))}function St(v){return ot(v,1)}function kt(v,w){var E=v.Ca;0>v.b&&ft(v);var R=v.b,H=E*w>>>8,X=(v.I>>>R>H)+0;for(X?(E-=H,v.I-=H+1<<R>>>0):E=H+1,R=E,H=0;256<=R;)H+=8,R>>=8;return R=7^H+Ms[R],v.b-=R,v.Ca=(E<<R)-1,X}function Qt(v,w,E){v[w+0]=E>>24&255,v[w+1]=E>>16&255,v[w+2]=E>>8&255,v[w+3]=E>>0&255}function ne(v,w){return v[w+0]<<0|v[w+1]<<8}function ue(v,w){return ne(v,w)|v[w+2]<<16}function _e(v,w){return ne(v,w)|ne(v,w+2)<<16}function mt(v,w){var E=1<<w;return e(v!=null),e(0<w),v.X=s(E),v.X==null?0:(v.Mb=32-w,v.Xa=w,1)}function Yt(v,w){e(v!=null),e(w!=null),e(v.Xa==w.Xa),n(w.X,0,v.X,0,1<<w.Xa)}function ut(){this.X=[],this.Xa=this.Mb=0}function Te(v,w,E,R){e(E!=null),e(R!=null);var H=E[0],X=R[0];return H==0&&(H=(v*X+w/2)/w),X==0&&(X=(w*H+v/2)/v),0>=H||0>=X?0:(E[0]=H,R[0]=X,1)}function ae(v,w){return v+(1<<w)-1>>>w}function ee(v,w){return((4278255360&v)+(4278255360&w)>>>0&4278255360)+((16711935&v)+(16711935&w)>>>0&16711935)>>>0}function Zt(v,w){F[w]=function(E,R,H,X,Y,J,nt){var dt;for(dt=0;dt<Y;++dt){var wt=F[v](J[nt+dt-1],H,X+dt);J[nt+dt]=ee(E[R+dt],wt)}}}function tt(){this.ud=this.hd=this.jd=0}function j(v,w){return((4278124286&(v^w))>>>1)+(v&w)>>>0}function yt(v){return 0<=v&&256>v?v:0>v?0:255<v?255:void 0}function jt(v,w){return yt(v+(v-w+.5>>1))}function Xt(v,w,E){return Math.abs(w-E)-Math.abs(v-E)}function Ht(v,w,E,R,H,X,Y){for(R=X[Y-1],E=0;E<H;++E)X[Y+E]=R=ee(v[w+E],R)}function we(v,w,E,R,H){var X;for(X=0;X<E;++X){var Y=v[w+X],J=Y>>8&255,nt=16711935&(nt=(nt=16711935&Y)+((J<<16)+J));R[H+X]=(4278255360&Y)+nt>>>0}}function ge(v,w){w.jd=v>>0&255,w.hd=v>>8&255,w.ud=v>>16&255}function ce(v,w,E,R,H,X){var Y;for(Y=0;Y<R;++Y){var J=w[E+Y],nt=J>>>8,dt=J,wt=255&(wt=(wt=J>>>16)+((v.jd<<24>>24)*(nt<<24>>24)>>>5));dt=255&(dt=(dt=dt+((v.hd<<24>>24)*(nt<<24>>24)>>>5))+((v.ud<<24>>24)*(wt<<24>>24)>>>5)),H[X+Y]=(4278255360&J)+(wt<<16)+dt}}function Re(v,w,E,R,H){F[w]=function(X,Y,J,nt,dt,wt,Bt,Vt,Pt){for(nt=Bt;nt<Vt;++nt)for(Bt=0;Bt<Pt;++Bt)dt[wt++]=H(J[R(X[Y++])])},F[v]=function(X,Y,J,nt,dt,wt,Bt){var Vt=8>>X.b,Pt=X.Ea,le=X.K[0],Kt=X.w;if(8>Vt)for(X=(1<<X.b)-1,Kt=(1<<Vt)-1;Y<J;++Y){var Ct,Tt=0;for(Ct=0;Ct<Pt;++Ct)Ct&X||(Tt=R(nt[dt++])),wt[Bt++]=H(le[Tt&Kt]),Tt>>=Vt}else F["VP8LMapColor"+E](nt,dt,le,Kt,wt,Bt,Y,J,Pt)}}function Ut(v,w,E,R,H){for(E=w+E;w<E;){var X=v[w++];R[H++]=X>>16&255,R[H++]=X>>8&255,R[H++]=X>>0&255}}function Me(v,w,E,R,H){for(E=w+E;w<E;){var X=v[w++];R[H++]=X>>16&255,R[H++]=X>>8&255,R[H++]=X>>0&255,R[H++]=X>>24&255}}function Ce(v,w,E,R,H){for(E=w+E;w<E;){var X=(Y=v[w++])>>16&240|Y>>12&15,Y=Y>>0&240|Y>>28&15;R[H++]=X,R[H++]=Y}}function Xe(v,w,E,R,H){for(E=w+E;w<E;){var X=(Y=v[w++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;R[H++]=X,R[H++]=Y}}function ye(v,w,E,R,H){for(E=w+E;w<E;){var X=v[w++];R[H++]=X>>0&255,R[H++]=X>>8&255,R[H++]=X>>16&255}}function Ge(v,w,E,R,H,X){if(X==0)for(E=w+E;w<E;)Qt(R,((X=v[w++])[0]>>24|X[1]>>8&65280|X[2]<<8&16711680|X[3]<<24)>>>0),H+=32;else n(R,H,v,w,E)}function nn(v,w){F[w][0]=F[v+"0"],F[w][1]=F[v+"1"],F[w][2]=F[v+"2"],F[w][3]=F[v+"3"],F[w][4]=F[v+"4"],F[w][5]=F[v+"5"],F[w][6]=F[v+"6"],F[w][7]=F[v+"7"],F[w][8]=F[v+"8"],F[w][9]=F[v+"9"],F[w][10]=F[v+"10"],F[w][11]=F[v+"11"],F[w][12]=F[v+"12"],F[w][13]=F[v+"13"],F[w][14]=F[v+"0"],F[w][15]=F[v+"0"]}function Ye(v){return v==Ab||v==Tb||v==C0||v==kb}function It(){this.eb=[],this.size=this.A=this.fb=0}function ve(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function $t(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new It,this.f.kb=new ve,this.sd=null}function ie(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function be(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function se(v){return alert("todo:WebPSamplerProcessPlane"),v.T}function Pe(v,w){var E=v.T,R=w.ba.f.RGBA,H=R.eb,X=R.fb+v.ka*R.A,Y=ua[w.ba.S],J=v.y,nt=v.O,dt=v.f,wt=v.N,Bt=v.ea,Vt=v.W,Pt=w.cc,le=w.dc,Kt=w.Mc,Ct=w.Nc,Tt=v.ka,re=v.ka+v.T,he=v.U,oe=he+1>>1;for(Tt==0?Y(J,nt,null,null,dt,wt,Bt,Vt,dt,wt,Bt,Vt,H,X,null,null,he):(Y(w.ec,w.fc,J,nt,Pt,le,Kt,Ct,dt,wt,Bt,Vt,H,X-R.A,H,X,he),++E);Tt+2<re;Tt+=2)Pt=dt,le=wt,Kt=Bt,Ct=Vt,wt+=v.Rc,Vt+=v.Rc,X+=2*R.A,Y(J,(nt+=2*v.fa)-v.fa,J,nt,Pt,le,Kt,Ct,dt,wt,Bt,Vt,H,X-R.A,H,X,he);return nt+=v.fa,v.j+re<v.o?(n(w.ec,w.fc,J,nt,he),n(w.cc,w.dc,dt,wt,oe),n(w.Mc,w.Nc,Bt,Vt,oe),E--):1&re||Y(J,nt,null,null,dt,wt,Bt,Vt,dt,wt,Bt,Vt,H,X+R.A,null,null,he),E}function ri(v,w,E){var R=v.F,H=[v.J];if(R!=null){var X=v.U,Y=w.ba.S,J=Y==w0||Y==C0;w=w.ba.f.RGBA;var nt=[0],dt=v.ka;nt[0]=v.T,v.Kb&&(dt==0?--nt[0]:(--dt,H[0]-=v.width),v.j+v.ka+v.T==v.o&&(nt[0]=v.o-v.j-dt));var wt=w.eb;dt=w.fb+dt*w.A,v=Pi(R,H[0],v.width,X,nt,wt,dt+(J?0:3),w.A),e(E==nt),v&&Ye(Y)&&ca(wt,dt,J,X,nt,w.A)}return 0}function qn(v){var w=v.ma,E=w.ba.S,R=11>E,H=E==y0||E==S0||E==w0||E==Eb||E==12||Ye(E);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!dp(w.Oa,v,H?11:12))return 0;if(H&&Ye(E)&&me(),v.da)alert("todo:use_scaling");else{if(R){if(w.Ib=se,v.Kb){if(E=v.U+1>>1,w.memory=s(v.U+2*E),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+v.U,w.Mc=w.cc,w.Nc=w.dc+E,w.Ib=Pe,me()}}else alert("todo:EmitYUV");H&&(w.Jb=ri,R&&Nt())}if(R&&!cE){for(v=0;256>v;++v)WR[v]=89858*(v-128)+E0>>M0,XR[v]=-22014*(v-128)+E0,qR[v]=-45773*(v-128),GR[v]=113618*(v-128)+E0>>M0;for(v=xp;v<Pb;++v)w=76283*(v-16)+E0>>M0,YR[v-xp]=Bs(w,255),$R[v-xp]=Bs(w+8>>4,15);cE=1}return 1}function kn(v){var w=v.ma,E=v.U,R=v.T;return e(!(1&v.ka)),0>=E||0>=R?0:(E=w.Ib(v,w),w.Jb!=null&&w.Jb(v,w,E),w.Dc+=E,1)}function Yi(v){v.ma.memory=null}function He(v,w,E,R){return Mt(v,8)!=47?0:(w[0]=Mt(v,14)+1,E[0]=Mt(v,14)+1,R[0]=Mt(v,1),Mt(v,3)!=0?0:!v.h)}function ys(v,w){if(4>v)return v+1;var E=v-2>>1;return(2+(1&v)<<E)+Mt(w,E)+1}function Fs(v,w){return 120<w?w-120:1<=(E=((E=IR[w-1])>>4)*v+(8-(15&E)))?E:1;var E}function $i(v,w,E){var R=it(E),H=v[w+=255&R].g-8;return 0<H&&(at(E,E.u+8),R=it(E),w+=v[w].value,w+=R&(1<<H)-1),at(E,E.u+v[w].g),v[w].value}function ji(v,w,E){return E.g+=v.g,E.value+=v.value<<w>>>0,e(8>=E.g),v.g}function Hi(v,w,E){var R=v.xc;return e((w=R==0?0:v.vc[v.md*(E>>R)+(w>>R)])<v.Wb),v.Ya[w]}function Yr(v,w,E,R){var H=v.ab,X=v.c*w,Y=v.C;w=Y+w;var J=E,nt=R;for(R=v.Ta,E=v.Ua;0<H--;){var dt=v.gc[H],wt=Y,Bt=w,Vt=J,Pt=nt,le=(nt=R,J=E,dt.Ea);switch(e(wt<Bt),e(Bt<=dt.nc),dt.hc){case 2:f0(Vt,Pt,(Bt-wt)*le,nt,J);break;case 0:var Kt=wt,Ct=Bt,Tt=nt,re=J,he=(ke=dt).Ea;Kt==0&&(Cb(Vt,Pt,null,null,1,Tt,re),Ht(Vt,Pt+1,0,0,he-1,Tt,re+1),Pt+=he,re+=he,++Kt);for(var oe=1<<ke.b,Fe=oe-1,Ae=ae(he,ke.b),tn=ke.K,ke=ke.w+(Kt>>ke.b)*Ae;Kt<Ct;){var ti=tn,hi=ke,Kn=1;for(pp(Vt,Pt,Tt,re-he,1,Tt,re);Kn<he;){var jn=(Kn&~Fe)+oe;jn>he&&(jn=he),(0,Ml[ti[hi++]>>8&15])(Vt,Pt+ +Kn,Tt,re+Kn-he,jn-Kn,Tt,re+Kn),Kn=jn}Pt+=he,re+=he,++Kt&Fe||(ke+=Ae)}Bt!=dt.nc&&n(nt,J-le,nt,J+(Bt-wt-1)*le,le);break;case 1:for(le=Vt,Ct=Pt,he=(Vt=dt.Ea)-(re=Vt&~(Tt=(Pt=1<<dt.b)-1)),Kt=ae(Vt,dt.b),oe=dt.K,dt=dt.w+(wt>>dt.b)*Kt;wt<Bt;){for(Fe=oe,Ae=dt,tn=new tt,ke=Ct+re,ti=Ct+Vt;Ct<ke;)ge(Fe[Ae++],tn),Wc(tn,le,Ct,Pt,nt,J),Ct+=Pt,J+=Pt;Ct<ti&&(ge(Fe[Ae++],tn),Wc(tn,le,Ct,he,nt,J),Ct+=he,J+=he),++wt&Tt||(dt+=Kt)}break;case 3:if(Vt==nt&&Pt==J&&0<dt.b){for(Ct=nt,Vt=le=J+(Bt-wt)*le-(re=(Bt-wt)*ae(dt.Ea,dt.b)),Pt=nt,Tt=J,Kt=[],re=(he=re)-1;0<=re;--re)Kt[re]=Pt[Tt+re];for(re=he-1;0<=re;--re)Ct[Vt+re]=Kt[re];aa(dt,wt,Bt,nt,le,nt,J)}else aa(dt,wt,Bt,Vt,Pt,nt,J)}J=R,nt=E}nt!=E&&n(R,E,J,nt,X)}function Ea(v,w){var E=v.V,R=v.Ba+v.c*v.C,H=w-v.C;if(e(w<=v.l.o),e(16>=H),0<H){var X=v.l,Y=v.Ta,J=v.Ua,nt=X.width;if(Yr(v,H,E,R),H=J=[J],e((E=v.C)<(R=w)),e(X.v<X.va),R>X.o&&(R=X.o),E<X.j){var dt=X.j-E;E=X.j,H[0]+=dt*nt}if(E>=R?E=0:(H[0]+=4*X.v,X.ka=E-X.j,X.U=X.va-X.v,X.T=R-E,E=1),E){if(J=J[0],11>(E=v.ca).S){var wt=E.f.RGBA,Bt=(R=E.S,H=X.U,X=X.T,dt=wt.eb,wt.A),Vt=X;for(wt=wt.fb+v.Ma*wt.A;0<Vt--;){var Pt=Y,le=J,Kt=H,Ct=dt,Tt=wt;switch(R){case b0:Es(Pt,le,Kt,Ct,Tt);break;case y0:ps(Pt,le,Kt,Ct,Tt);break;case Ab:ps(Pt,le,Kt,Ct,Tt),ca(Ct,Tt,0,Kt,1,0);break;case QM:Lo(Pt,le,Kt,Ct,Tt);break;case S0:Ge(Pt,le,Kt,Ct,Tt,1);break;case Tb:Ge(Pt,le,Kt,Ct,Tt,1),ca(Ct,Tt,0,Kt,1,0);break;case w0:Ge(Pt,le,Kt,Ct,Tt,0);break;case C0:Ge(Pt,le,Kt,Ct,Tt,0),ca(Ct,Tt,1,Kt,1,0);break;case Eb:El(Pt,le,Kt,Ct,Tt);break;case kb:El(Pt,le,Kt,Ct,Tt),Di(Ct,Tt,Kt,1,0);break;case tE:Ro(Pt,le,Kt,Ct,Tt);break;default:e(0)}J+=nt,wt+=Bt}v.Ma+=X}else alert("todo:EmitRescaledRowsYUVA");e(v.Ma<=E.height)}}v.C=w,e(v.C<=v.i)}function ia(v){var w;if(0<v.ua)return 0;for(w=0;w<v.Wb;++w){var E=v.Ya[w].G,R=v.Ya[w].H;if(0<E[1][R[1]+0].g||0<E[2][R[2]+0].g||0<E[3][R[3]+0].g)return 0}return 1}function $r(v,w,E,R,H,X){if(v.Z!=0){var Y=v.qd,J=v.rd;for(e(Il[v.Z]!=null);w<E;++w)Il[v.Z](Y,J,R,H,R,H,X),Y=R,J=H,H+=X;v.qd=Y,v.rd=J}}function Ss(v,w){var E=v.l.ma,R=E.Z==0||E.Z==1?v.l.j:v.C;if(R=v.C<R?R:v.C,e(w<=v.l.o),w>R){var H=v.l.width,X=E.ca,Y=E.tb+H*R,J=v.V,nt=v.Ba+v.c*R,dt=v.gc;e(v.ab==1),e(dt[0].hc==3),m0(dt[0],R,w,J,nt,X,Y),$r(E,R,w,X,Y,H)}v.C=v.Ma=w}function ws(v,w,E,R,H,X,Y){var J=v.$/R,nt=v.$%R,dt=v.m,wt=v.s,Bt=E+v.$,Vt=Bt;H=E+R*H;var Pt=E+R*X,le=280+wt.ua,Kt=v.Pb?J:16777216,Ct=0<wt.ua?wt.Wa:null,Tt=wt.wc,re=Bt<Pt?Hi(wt,nt,J):null;e(v.C<X),e(Pt<=H);var he=!1;t:for(;;){for(;he||Bt<Pt;){var oe=0;if(J>=Kt){var Fe=Bt-E;e((Kt=v).Pb),Kt.wd=Kt.m,Kt.xd=Fe,0<Kt.s.ua&&Yt(Kt.s.Wa,Kt.s.vb),Kt=J+PR}if(nt&Tt||(re=Hi(wt,nt,J)),e(re!=null),re.Qb&&(w[Bt]=re.qb,he=!0),!he)if(pt(dt),re.jc){oe=dt,Fe=w;var Ae=Bt,tn=re.pd[it(oe)&jr-1];e(re.jc),256>tn.g?(at(oe,oe.u+tn.g),Fe[Ae]=tn.value,oe=0):(at(oe,oe.u+tn.g-256),e(256<=tn.value),oe=tn.value),oe==0&&(he=!0)}else oe=$i(re.G[0],re.H[0],dt);if(dt.h)break;if(he||256>oe){if(!he)if(re.nd)w[Bt]=(re.qb|oe<<8)>>>0;else{if(pt(dt),he=$i(re.G[1],re.H[1],dt),pt(dt),Fe=$i(re.G[2],re.H[2],dt),Ae=$i(re.G[3],re.H[3],dt),dt.h)break;w[Bt]=(Ae<<24|he<<16|oe<<8|Fe)>>>0}if(he=!1,++Bt,++nt>=R&&(nt=0,++J,Y!=null&&J<=X&&!(J%16)&&Y(v,J),Ct!=null))for(;Vt<Bt;)oe=w[Vt++],Ct.X[(506832829*oe&4294967295)>>>Ct.Mb]=oe}else if(280>oe){if(oe=ys(oe-256,dt),Fe=$i(re.G[4],re.H[4],dt),pt(dt),Fe=Fs(R,Fe=ys(Fe,dt)),dt.h)break;if(Bt-E<Fe||H-Bt<oe)break t;for(Ae=0;Ae<oe;++Ae)w[Bt+Ae]=w[Bt+Ae-Fe];for(Bt+=oe,nt+=oe;nt>=R;)nt-=R,++J,Y!=null&&J<=X&&!(J%16)&&Y(v,J);if(e(Bt<=H),nt&Tt&&(re=Hi(wt,nt,J)),Ct!=null)for(;Vt<Bt;)oe=w[Vt++],Ct.X[(506832829*oe&4294967295)>>>Ct.Mb]=oe}else{if(!(oe<le))break t;for(he=oe-280,e(Ct!=null);Vt<Bt;)oe=w[Vt++],Ct.X[(506832829*oe&4294967295)>>>Ct.Mb]=oe;oe=Bt,e(!(he>>>(Fe=Ct).Xa)),w[oe]=Fe.X[he],he=!0}he||e(dt.h==Z(dt))}if(v.Pb&&dt.h&&Bt<H)e(v.m.h),v.a=5,v.m=v.wd,v.$=v.xd,0<v.s.ua&&Yt(v.s.vb,v.s.Wa);else{if(dt.h)break t;Y?.(v,J>X?X:J),v.a=0,v.$=Bt-E}return 1}return v.a=3,0}function ra(v){e(v!=null),v.vc=null,v.yc=null,v.Ya=null;var w=v.Wa;w!=null&&(w.X=null),v.vb=null,e(v!=null)}function Cs(){var v=new wb;return v==null?null:(v.a=0,v.xb=iE,nn("Predictor","VP8LPredictors"),nn("Predictor","VP8LPredictors_C"),nn("PredictorAdd","VP8LPredictorsAdd"),nn("PredictorAdd","VP8LPredictorsAdd_C"),f0=we,Wc=ce,Es=Ut,ps=Me,El=Ce,Ro=Xe,Lo=ye,F.VP8LMapColor32b=uu,F.VP8LMapColor8b=g0,v)}function sa(v,w,E,R,H){var X=1,Y=[v],J=[w],nt=R.m,dt=R.s,wt=null,Bt=0;t:for(;;){if(E)for(;X&&Mt(nt,1);){var Vt=Y,Pt=J,le=R,Kt=1,Ct=le.m,Tt=le.gc[le.ab],re=Mt(Ct,2);if(le.Oc&1<<re)X=0;else{switch(le.Oc|=1<<re,Tt.hc=re,Tt.Ea=Vt[0],Tt.nc=Pt[0],Tt.K=[null],++le.ab,e(4>=le.ab),re){case 0:case 1:Tt.b=Mt(Ct,3)+2,Kt=sa(ae(Tt.Ea,Tt.b),ae(Tt.nc,Tt.b),0,le,Tt.K),Tt.K=Tt.K[0];break;case 3:var he,oe=Mt(Ct,8)+1,Fe=16<oe?0:4<oe?1:2<oe?2:3;if(Vt[0]=ae(Tt.Ea,Fe),Tt.b=Fe,he=Kt=sa(oe,1,0,le,Tt.K)){var Ae,tn=oe,ke=Tt,ti=1<<(8>>ke.b),hi=s(ti);if(hi==null)he=0;else{var Kn=ke.K[0],jn=ke.w;for(hi[0]=ke.K[0][0],Ae=1;Ae<1*tn;++Ae)hi[Ae]=ee(Kn[jn+Ae],hi[Ae-1]);for(;Ae<4*ti;++Ae)hi[Ae]=0;ke.K[0]=null,ke.K[0]=hi,he=1}}Kt=he;break;case 2:break;default:e(0)}X=Kt}}if(Y=Y[0],J=J[0],X&&Mt(nt,1)&&!(X=1<=(Bt=Mt(nt,4))&&11>=Bt)){R.a=3;break t}var Ci;if(Ci=X)e:{var vi,yn,gr,As=R,_r=Y,Ts=J,pi=Bt,Us=E,zs=As.m,Pr=As.s,Hr=[null],ms=1,ha=0,no=DR[pi];n:for(;;){if(Us&&Mt(zs,1)){var Rr=Mt(zs,3)+2,Bo=ae(_r,Rr),$c=ae(Ts,Rr),gu=Bo*$c;if(!sa(Bo,$c,0,As,Hr))break n;for(Hr=Hr[0],Pr.xc=Rr,vi=0;vi<gu;++vi){var Dl=Hr[vi]>>8&65535;Hr[vi]=Dl,Dl>=ms&&(ms=Dl+1)}}if(zs.h)break n;for(yn=0;5>yn;++yn){var Ji=eE[yn];!yn&&0<pi&&(Ji+=1<<pi),ha<Ji&&(ha=Ji)}var Rb=a(ms*no,V),hE=ms,pE=a(hE,K);if(pE==null)var T0=null;else e(65536>=hE),T0=pE;var bp=s(ha);if(T0==null||bp==null||Rb==null){As.a=1;break n}var k0=Rb;for(vi=gr=0;vi<ms;++vi){var Da=T0[vi],_u=Da.G,vu=Da.H,fE=0,I0=1,mE=0;for(yn=0;5>yn;++yn){Ji=eE[yn],_u[yn]=k0,vu[yn]=gr,!yn&&0<pi&&(Ji+=1<<pi);r:{var D0,Lb=Ji,P0=As,yp=bp,JR=k0,QR=gr,Ob=0,Pl=P0.m,tL=Mt(Pl,1);if(r(yp,0,0,Lb),tL){var eL=Mt(Pl,1)+1,nL=Mt(Pl,1),gE=Mt(Pl,nL==0?1:8);yp[gE]=1,eL==2&&(yp[gE=Mt(Pl,8)]=1);var R0=1}else{var _E=s(19),vE=Mt(Pl,4)+4;if(19<vE){P0.a=3;var L0=0;break r}for(D0=0;D0<vE;++D0)_E[kR[D0]]=Mt(Pl,3);var Nb=void 0,Sp=void 0,xE=P0,iL=_E,O0=Lb,bE=yp,Fb=0,Rl=xE.m,yE=8,SE=a(128,V);i:for(;P(SE,0,7,iL,19);){if(Mt(Rl,1)){var rL=2+2*Mt(Rl,3);if((Nb=2+Mt(Rl,rL))>O0)break i}else Nb=O0;for(Sp=0;Sp<O0&&Nb--;){pt(Rl);var wE=SE[0+(127&it(Rl))];at(Rl,Rl.u+wE.g);var xu=wE.value;if(16>xu)bE[Sp++]=xu,xu!=0&&(yE=xu);else{var sL=xu==16,CE=xu-16,aL=AR[CE],ME=Mt(Rl,ER[CE])+aL;if(Sp+ME>O0)break i;for(var oL=sL?yE:0;0<ME--;)bE[Sp++]=oL}}Fb=1;break i}Fb||(xE.a=3),R0=Fb}(R0=R0&&!Pl.h)&&(Ob=P(JR,QR,8,yp,Lb)),R0&&Ob!=0?L0=Ob:(P0.a=3,L0=0)}if(L0==0)break n;if(I0&&TR[yn]==1&&(I0=k0[gr].g==0),fE+=k0[gr].g,gr+=L0,3>=yn){var wp,Bb=bp[0];for(wp=1;wp<Ji;++wp)bp[wp]>Bb&&(Bb=bp[wp]);mE+=Bb}}if(Da.nd=I0,Da.Qb=0,I0&&(Da.qb=(_u[3][vu[3]+0].value<<24|_u[1][vu[1]+0].value<<16|_u[2][vu[2]+0].value)>>>0,fE==0&&256>_u[0][vu[0]+0].value&&(Da.Qb=1,Da.qb+=_u[0][vu[0]+0].value<<8)),Da.jc=!Da.Qb&&6>mE,Da.jc){var N0,Vo=Da;for(N0=0;N0<jr;++N0){var Ll=N0,Ol=Vo.pd[Ll],F0=Vo.G[0][Vo.H[0]+Ll];256<=F0.value?(Ol.g=F0.g+256,Ol.value=F0.value):(Ol.g=0,Ol.value=0,Ll>>=ji(F0,8,Ol),Ll>>=ji(Vo.G[1][Vo.H[1]+Ll],16,Ol),Ll>>=ji(Vo.G[2][Vo.H[2]+Ll],0,Ol),ji(Vo.G[3][Vo.H[3]+Ll],24,Ol))}}}Pr.vc=Hr,Pr.Wb=ms,Pr.Ya=T0,Pr.yc=Rb,Ci=1;break e}Ci=0}if(!(X=Ci)){R.a=3;break t}if(0<Bt){if(dt.ua=1<<Bt,!mt(dt.Wa,Bt)){R.a=1,X=0;break t}}else dt.ua=0;var Vb=R,EE=Y,lL=J,Ub=Vb.s,zb=Ub.xc;if(Vb.c=EE,Vb.i=lL,Ub.md=ae(EE,zb),Ub.wc=zb==0?-1:(1<<zb)-1,E){R.xb=VR;break t}if((wt=s(Y*J))==null){R.a=1,X=0;break t}X=(X=ws(R,wt,0,Y,J,J,null))&&!nt.h;break t}return X?(H!=null?H[0]=wt:(e(wt==null),e(E)),R.$=0,E||ra(dt)):ra(dt),X}function Io(v,w){var E=v.c*v.i,R=E+w+16*w;return e(v.c<=w),v.V=s(R),v.V==null?(v.Ta=null,v.Ua=0,v.a=1,0):(v.Ta=v.V,v.Ua=v.Ba+E+w,1)}function bl(v,w){var E=v.C,R=w-E,H=v.V,X=v.Ba+v.c*E;for(e(w<=v.l.o);0<R;){var Y=16<R?16:R,J=v.l.ma,nt=v.l.width,dt=nt*Y,wt=J.ca,Bt=J.tb+nt*E,Vt=v.Ta,Pt=v.Ua;Yr(v,Y,H,X),rr(Vt,Pt,wt,Bt,dt),$r(J,E,E+Y,wt,Bt,nt),R-=Y,H+=Y*v.c,E+=Y}e(E==w),v.C=v.Ma=w}function et(){this.ub=this.yd=this.td=this.Rb=0}function Dt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Wt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Gt(){this.Yb=function(){var v=[];return function w(E,R,H){for(var X=H[R],Y=0;Y<X&&(E.push(H.length>R+1?[]:0),!(H.length<R+1));Y++)w(E[Y],R+1,H)}(v,0,[3,11]),v}()}function Lt(){this.jb=s(3),this.Wc=o([4,8],Gt),this.Xc=o([4,17],Gt)}function xe(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ee(){this.ld=this.La=this.dd=this.tc=0}function Ne(){this.Na=this.la=0}function Ue(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function rn(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function un(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ee),this.Y=0,this.ya=Array(new rn),this.aa=0,this.l=new Nn}function $e(){this.y=s(16),this.f=s(8),this.ea=s(8)}function On(){this.cb=this.a=0,this.sc="",this.m=new qt,this.Od=new et,this.Kc=new Dt,this.ed=new xe,this.Qa=new Wt,this.Ic=this.$c=this.Aa=0,this.D=new un,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,qt),this.ia=0,this.pb=a(4,Ue),this.Pa=new Lt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new $e),this.Hd=0,this.rb=Array(new Ne),this.sb=0,this.wa=Array(new Ee),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new rn),this.L=this.aa=0,this.gd=o([4,2],Ee),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Nn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fi(){var v=new On;return v!=null&&(v.a=0,v.sc="OK",v.cb=0,v.Xb=0,vp||(vp=Ki)),v}function _n(v,w,E){return v.a==0&&(v.a=w,v.sc=E,v.cb=0),0}function Fn(v,w,E){return 3<=E&&v[w+0]==157&&v[w+1]==1&&v[w+2]==42}function Ke(v,w){if(v==null)return 0;if(v.a=0,v.sc="OK",w==null)return _n(v,2,"null VP8Io passed to VP8GetHeaders()");var E=w.data,R=w.w,H=w.ha;if(4>H)return _n(v,7,"Truncated header.");var X=E[R+0]|E[R+1]<<8|E[R+2]<<16,Y=v.Od;if(Y.Rb=!(1&X),Y.td=X>>1&7,Y.yd=X>>4&1,Y.ub=X>>5,3<Y.td)return _n(v,3,"Incorrect keyframe parameters.");if(!Y.yd)return _n(v,4,"Frame not displayable.");R+=3,H-=3;var J=v.Kc;if(Y.Rb){if(7>H)return _n(v,7,"cannot parse picture header");if(!Fn(E,R,H))return _n(v,3,"Bad code word");J.c=16383&(E[R+4]<<8|E[R+3]),J.Td=E[R+4]>>6,J.i=16383&(E[R+6]<<8|E[R+5]),J.Ud=E[R+6]>>6,R+=7,H-=7,v.za=J.c+15>>4,v.Ub=J.i+15>>4,w.width=J.c,w.height=J.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,r((X=v.Pa).jb,0,255,X.jb.length),e((X=v.Qa)!=null),X.Cb=0,X.Bb=0,X.Fb=1,r(X.Zb,0,0,X.Zb.length),r(X.Lb,0,0,X.Lb)}if(Y.ub>H)return _n(v,7,"bad partition length");ct(X=v.m,E,R,Y.ub),R+=Y.ub,H-=Y.ub,Y.Rb&&(J.Ld=St(X),J.Kd=St(X)),J=v.Qa;var nt,dt=v.Pa;if(e(X!=null),e(J!=null),J.Cb=St(X),J.Cb){if(J.Bb=St(X),St(X)){for(J.Fb=St(X),nt=0;4>nt;++nt)J.Zb[nt]=St(X)?st(X,7):0;for(nt=0;4>nt;++nt)J.Lb[nt]=St(X)?st(X,6):0}if(J.Bb)for(nt=0;3>nt;++nt)dt.jb[nt]=St(X)?ot(X,8):255}else J.Bb=0;if(X.Ka)return _n(v,3,"cannot parse segment header");if((J=v.ed).zd=St(X),J.Tb=ot(X,6),J.wb=ot(X,3),J.Pc=St(X),J.Pc&&St(X)){for(dt=0;4>dt;++dt)St(X)&&(J.vd[dt]=st(X,6));for(dt=0;4>dt;++dt)St(X)&&(J.od[dt]=st(X,6))}if(v.L=J.Tb==0?0:J.zd?1:2,X.Ka)return _n(v,3,"cannot parse filter header");var wt=H;if(H=nt=R,R=nt+wt,J=wt,v.Xb=(1<<ot(v.m,2))-1,wt<3*(dt=v.Xb))E=7;else{for(nt+=3*dt,J-=3*dt,wt=0;wt<dt;++wt){var Bt=E[H+0]|E[H+1]<<8|E[H+2]<<16;Bt>J&&(Bt=J),ct(v.Jc[+wt],E,nt,Bt),nt+=Bt,J-=Bt,H+=3}ct(v.Jc[+dt],E,nt,J),E=nt<R?0:5}if(E!=0)return _n(v,E,"cannot parse partitions");for(E=ot(nt=v.m,7),H=St(nt)?st(nt,4):0,R=St(nt)?st(nt,4):0,J=St(nt)?st(nt,4):0,dt=St(nt)?st(nt,4):0,nt=St(nt)?st(nt,4):0,wt=v.Qa,Bt=0;4>Bt;++Bt){if(wt.Cb){var Vt=wt.Zb[Bt];wt.Fb||(Vt+=E)}else{if(0<Bt){v.pb[Bt]=v.pb[0];continue}Vt=E}var Pt=v.pb[Bt];Pt.Sc[0]=Ib[Bs(Vt+H,127)],Pt.Sc[1]=Db[Bs(Vt+0,127)],Pt.Eb[0]=2*Ib[Bs(Vt+R,127)],Pt.Eb[1]=101581*Db[Bs(Vt+J,127)]>>16,8>Pt.Eb[1]&&(Pt.Eb[1]=8),Pt.Qc[0]=Ib[Bs(Vt+dt,117)],Pt.Qc[1]=Db[Bs(Vt+nt,127)],Pt.lc=Vt+nt}if(!Y.Rb)return _n(v,4,"Not a key frame.");for(St(X),Y=v.Pa,E=0;4>E;++E){for(H=0;8>H;++H)for(R=0;3>R;++R)for(J=0;11>J;++J)dt=kt(X,FR[E][H][R][J])?ot(X,8):OR[E][H][R][J],Y.Wc[E][H].Yb[R][J]=dt;for(H=0;17>H;++H)Y.Xc[E][H]=Y.Wc[E][BR[H]]}return v.kc=St(X),v.kc&&(v.Bd=ot(X,8)),v.cb=1}function Ki(v,w,E,R,H,X,Y){var J=w[H].Yb[E];for(E=0;16>H;++H){if(!kt(v,J[E+0]))return H;for(;!kt(v,J[E+1]);)if(J=w[++H].Yb[0],E=0,H==16)return 16;var nt=w[H+1].Yb;if(kt(v,J[E+2])){var dt=v,wt=0;if(kt(dt,(Vt=J)[(Bt=E)+3]))if(kt(dt,Vt[Bt+6])){for(J=0,Bt=2*(wt=kt(dt,Vt[Bt+8]))+(Vt=kt(dt,Vt[Bt+9+wt])),wt=0,Vt=RR[Bt];Vt[J];++J)wt+=wt+kt(dt,Vt[J]);wt+=3+(8<<Bt)}else kt(dt,Vt[Bt+7])?(wt=7+2*kt(dt,165),wt+=kt(dt,145)):wt=5+kt(dt,159);else wt=kt(dt,Vt[Bt+4])?3+kt(dt,Vt[Bt+5]):2;J=nt[2]}else wt=1,J=nt[1];nt=Y+LR[H],0>(dt=v).b&&ft(dt);var Bt,Vt=dt.b,Pt=(Bt=dt.Ca>>1)-(dt.I>>Vt)>>31;--dt.b,dt.Ca+=Pt,dt.Ca|=1,dt.I-=(Bt+1&Pt)<<Vt,X[nt]=((wt^Pt)-Pt)*R[(0<H)+0]}return 16}function zn(v){var w=v.rb[v.sb-1];w.la=0,w.Na=0,r(v.zc,0,0,v.zc.length),v.ja=0}function hs(v,w){if(v==null)return 0;if(w==null)return _n(v,2,"NULL VP8Io parameter in VP8Decode().");if(!v.cb&&!Ke(v,w))return 0;if(e(v.cb),w.ac==null||w.ac(w)){w.ob&&(v.L=0);var E=A0[v.L];if(v.L==2?(v.yb=0,v.zb=0):(v.yb=w.v-E>>4,v.zb=w.j-E>>4,0>v.yb&&(v.yb=0),0>v.zb&&(v.zb=0)),v.Va=w.o+15+E>>4,v.Hb=w.va+15+E>>4,v.Hb>v.za&&(v.Hb=v.za),v.Va>v.Ub&&(v.Va=v.Ub),0<v.L){var R=v.ed;for(E=0;4>E;++E){var H;if(v.Qa.Cb){var X=v.Qa.Lb[E];v.Qa.Fb||(X+=R.Tb)}else X=R.Tb;for(H=0;1>=H;++H){var Y=v.gd[E][H],J=X;if(R.Pc&&(J+=R.vd[0],H&&(J+=R.od[0])),0<(J=0>J?0:63<J?63:J)){var nt=J;0<R.wb&&(nt=4<R.wb?nt>>2:nt>>1)>9-R.wb&&(nt=9-R.wb),1>nt&&(nt=1),Y.dd=nt,Y.tc=2*J+nt,Y.ld=40<=J?2:15<=J?1:0}else Y.tc=0;Y.La=H}}}E=0}else _n(v,6,"Frame setup failed"),E=v.a;if(E=E==0){if(E){v.$c=0,0<v.Aa||(v.Ic=ZR);t:{E=v.Ic,R=4*(nt=v.za);var dt=32*nt,wt=nt+1,Bt=0<v.L?nt*(0<v.Aa?2:1):0,Vt=(v.Aa==2?2:1)*nt;if((Y=R+832+(H=3*(16*E+A0[v.L])/2*dt)+(X=v.Fa!=null&&0<v.Fa.length?v.Kc.c*v.Kc.i:0))!=Y)E=0;else{if(Y>v.Vb){if(v.Vb=0,v.Ec=s(Y),v.Fc=0,v.Ec==null){E=_n(v,1,"no memory during frame initialization.");break t}v.Vb=Y}Y=v.Ec,J=v.Fc,v.Ac=Y,v.Bc=J,J+=R,v.Gd=a(dt,$e),v.Hd=0,v.rb=a(wt+1,Ne),v.sb=1,v.wa=Bt?a(Bt,Ee):null,v.Y=0,v.D.Nb=0,v.D.wa=v.wa,v.D.Y=v.Y,0<v.Aa&&(v.D.Y+=nt),e(!0),v.oc=Y,v.pc=J,J+=832,v.ya=a(Vt,rn),v.aa=0,v.D.ya=v.ya,v.D.aa=v.aa,v.Aa==2&&(v.D.aa+=nt),v.R=16*nt,v.B=8*nt,nt=(dt=A0[v.L])*v.R,dt=dt/2*v.B,v.sa=Y,v.ta=J+nt,v.qa=v.sa,v.ra=v.ta+16*E*v.R+dt,v.Ha=v.qa,v.Ia=v.ra+8*E*v.B+dt,v.$c=0,J+=H,v.mb=X?Y:null,v.nb=X?J:null,e(J+X<=v.Fc+v.Vb),zn(v),r(v.Ac,v.Bc,0,R),E=1}}if(E){if(w.ka=0,w.y=v.sa,w.O=v.ta,w.f=v.qa,w.N=v.ra,w.ea=v.Ha,w.Vd=v.Ia,w.fa=v.R,w.Rc=v.B,w.F=null,w.J=0,!v0){for(E=-255;255>=E;++E)Cr[255+E]=0>E?-E:E;for(E=-1020;1020>=E;++E)No[1020+E]=-128>E?-128:127<E?127:E;for(E=-112;112>=E;++E)_p[112+E]=-16>E?-16:15<E?15:E;for(E=-255;510>=E;++E)mu[255+E]=0>E?0:255<E?255:E;v0=1}hu=Aa,Oo=Kr,fp=fr,fs=Ir,oa=yl,ir=zr,pu=ep,_0=jc,mp=Sb,Gc=np,qc=yb,Al=iu,Xc=ip,fu=u0,Yc=d0,Tl=to,gp=Po,la=bb,Ia[0]=Qa,Ia[1]=db,Ia[2]=fb,Ia[3]=mb,Ia[4]=s0,Ia[5]=eu,Ia[6]=a0,Ia[7]=Jh,Ia[8]=_b,Ia[9]=gb,kl[0]=i0,kl[1]=hb,kl[2]=Do,kl[3]=Qd,kl[4]=Zr,kl[5]=pb,kl[6]=r0,Fo[0]=Sl,Fo[1]=ub,Fo[2]=vb,Fo[3]=Qh,Fo[4]=zc,Fo[5]=xb,Fo[6]=tp,E=1}else E=0}E&&(E=function(Pt,le){for(Pt.M=0;Pt.M<Pt.Va;++Pt.M){var Kt,Ct=Pt.Jc[Pt.M&Pt.Xb],Tt=Pt.m,re=Pt;for(Kt=0;Kt<re.za;++Kt){var he=Tt,oe=re,Fe=oe.Ac,Ae=oe.Bc+4*Kt,tn=oe.zc,ke=oe.ya[oe.aa+Kt];if(oe.Qa.Bb?ke.$b=kt(he,oe.Pa.jb[0])?2+kt(he,oe.Pa.jb[2]):kt(he,oe.Pa.jb[1]):ke.$b=0,oe.kc&&(ke.Ad=kt(he,oe.Bd)),ke.Za=!kt(he,145)+0,ke.Za){var ti=ke.Ob,hi=0;for(oe=0;4>oe;++oe){var Kn,jn=tn[0+oe];for(Kn=0;4>Kn;++Kn){jn=NR[Fe[Ae+Kn]][jn];for(var Ci=nE[kt(he,jn[0])];0<Ci;)Ci=nE[2*Ci+kt(he,jn[Ci])];jn=-Ci,Fe[Ae+Kn]=jn}n(ti,hi,Fe,Ae,4),hi+=4,tn[0+oe]=jn}}else jn=kt(he,156)?kt(he,128)?1:3:kt(he,163)?2:0,ke.Ob[0]=jn,r(Fe,Ae,jn,4),r(tn,0,jn,4);ke.Dd=kt(he,142)?kt(he,114)?kt(he,183)?1:3:2:0}if(re.m.Ka)return _n(Pt,7,"Premature end-of-partition0 encountered.");for(;Pt.ja<Pt.za;++Pt.ja){if(re=Ct,he=(Tt=Pt).rb[Tt.sb-1],Fe=Tt.rb[Tt.sb+Tt.ja],Kt=Tt.ya[Tt.aa+Tt.ja],Ae=Tt.kc?Kt.Ad:0)he.la=Fe.la=0,Kt.Za||(he.Na=Fe.Na=0),Kt.Hc=0,Kt.Gc=0,Kt.ia=0;else{var vi,yn;if(he=Fe,Fe=re,Ae=Tt.Pa.Xc,tn=Tt.ya[Tt.aa+Tt.ja],ke=Tt.pb[tn.$b],oe=tn.ad,ti=0,hi=Tt.rb[Tt.sb-1],jn=Kn=0,r(oe,ti,0,384),tn.Za)var gr=0,As=Ae[3];else{Ci=s(16);var _r=he.Na+hi.Na;if(_r=vp(Fe,Ae[1],_r,ke.Eb,0,Ci,0),he.Na=hi.Na=(0<_r)+0,1<_r)hu(Ci,0,oe,ti);else{var Ts=Ci[0]+3>>3;for(Ci=0;256>Ci;Ci+=16)oe[ti+Ci]=Ts}gr=1,As=Ae[0]}var pi=15&he.la,Us=15&hi.la;for(Ci=0;4>Ci;++Ci){var zs=1&Us;for(Ts=yn=0;4>Ts;++Ts)pi=pi>>1|(zs=(_r=vp(Fe,As,_r=zs+(1&pi),ke.Sc,gr,oe,ti))>gr)<<7,yn=yn<<2|(3<_r?3:1<_r?2:oe[ti+0]!=0),ti+=16;pi>>=4,Us=Us>>1|zs<<7,Kn=(Kn<<8|yn)>>>0}for(As=pi,gr=Us>>4,vi=0;4>vi;vi+=2){for(yn=0,pi=he.la>>4+vi,Us=hi.la>>4+vi,Ci=0;2>Ci;++Ci){for(zs=1&Us,Ts=0;2>Ts;++Ts)_r=zs+(1&pi),pi=pi>>1|(zs=0<(_r=vp(Fe,Ae[2],_r,ke.Qc,0,oe,ti)))<<3,yn=yn<<2|(3<_r?3:1<_r?2:oe[ti+0]!=0),ti+=16;pi>>=2,Us=Us>>1|zs<<5}jn|=yn<<4*vi,As|=pi<<4<<vi,gr|=(240&Us)<<vi}he.la=As,hi.la=gr,tn.Hc=Kn,tn.Gc=jn,tn.ia=43690&jn?0:ke.ia,Ae=!(Kn|jn)}if(0<Tt.L&&(Tt.wa[Tt.Y+Tt.ja]=Tt.gd[Kt.$b][Kt.Za],Tt.wa[Tt.Y+Tt.ja].La|=!Ae),re.Ka)return _n(Pt,7,"Premature end-of-file encountered.")}if(zn(Pt),Tt=le,re=1,Kt=(Ct=Pt).D,he=0<Ct.L&&Ct.M>=Ct.zb&&Ct.M<=Ct.Va,Ct.Aa==0)t:{if(Kt.M=Ct.M,Kt.uc=he,cp(Ct,Kt),re=1,Kt=(yn=Ct.D).Nb,he=(jn=A0[Ct.L])*Ct.R,Fe=jn/2*Ct.B,Ci=16*Kt*Ct.R,Ts=8*Kt*Ct.B,Ae=Ct.sa,tn=Ct.ta-he+Ci,ke=Ct.qa,oe=Ct.ra-Fe+Ts,ti=Ct.Ha,hi=Ct.Ia-Fe+Ts,Us=(pi=yn.M)==0,Kn=pi>=Ct.Va-1,Ct.Aa==2&&cp(Ct,yn),yn.uc)for(zs=(_r=Ct).D.M,e(_r.D.uc),yn=_r.yb;yn<_r.Hb;++yn){gr=yn,As=zs;var Pr=(Hr=(Ji=_r).D).Nb;vi=Ji.R;var Hr=Hr.wa[Hr.Y+gr],ms=Ji.sa,ha=Ji.ta+16*Pr*vi+16*gr,no=Hr.dd,Rr=Hr.tc;if(Rr!=0)if(e(3<=Rr),Ji.L==1)0<gr&&Tl(ms,ha,vi,Rr+4),Hr.La&&la(ms,ha,vi,Rr),0<As&&Yc(ms,ha,vi,Rr+4),Hr.La&&gp(ms,ha,vi,Rr);else{var Bo=Ji.B,$c=Ji.qa,gu=Ji.ra+8*Pr*Bo+8*gr,Dl=Ji.Ha,Ji=Ji.Ia+8*Pr*Bo+8*gr;Pr=Hr.ld,0<gr&&(_0(ms,ha,vi,Rr+4,no,Pr),Gc($c,gu,Dl,Ji,Bo,Rr+4,no,Pr)),Hr.La&&(Al(ms,ha,vi,Rr,no,Pr),fu($c,gu,Dl,Ji,Bo,Rr,no,Pr)),0<As&&(pu(ms,ha,vi,Rr+4,no,Pr),mp($c,gu,Dl,Ji,Bo,Rr+4,no,Pr)),Hr.La&&(qc(ms,ha,vi,Rr,no,Pr),Xc($c,gu,Dl,Ji,Bo,Rr,no,Pr))}}if(Ct.ia&&alert("todo:DitherRow"),Tt.put!=null){if(yn=16*pi,pi=16*(pi+1),Us?(Tt.y=Ct.sa,Tt.O=Ct.ta+Ci,Tt.f=Ct.qa,Tt.N=Ct.ra+Ts,Tt.ea=Ct.Ha,Tt.W=Ct.Ia+Ts):(yn-=jn,Tt.y=Ae,Tt.O=tn,Tt.f=ke,Tt.N=oe,Tt.ea=ti,Tt.W=hi),Kn||(pi-=jn),pi>Tt.o&&(pi=Tt.o),Tt.F=null,Tt.J=null,Ct.Fa!=null&&0<Ct.Fa.length&&yn<pi&&(Tt.J=op(Ct,Tt,yn,pi-yn),Tt.F=Ct.mb,Tt.F==null&&Tt.F.length==0)){re=_n(Ct,3,"Could not decode alpha data.");break t}yn<Tt.j&&(jn=Tt.j-yn,yn=Tt.j,e(!(1&jn)),Tt.O+=Ct.R*jn,Tt.N+=Ct.B*(jn>>1),Tt.W+=Ct.B*(jn>>1),Tt.F!=null&&(Tt.J+=Tt.width*jn)),yn<pi&&(Tt.O+=Tt.v,Tt.N+=Tt.v>>1,Tt.W+=Tt.v>>1,Tt.F!=null&&(Tt.J+=Tt.v),Tt.ka=yn-Tt.j,Tt.U=Tt.va-Tt.v,Tt.T=pi-yn,re=Tt.put(Tt))}Kt+1!=Ct.Ic||Kn||(n(Ct.sa,Ct.ta-he,Ae,tn+16*Ct.R,he),n(Ct.qa,Ct.ra-Fe,ke,oe+8*Ct.B,Fe),n(Ct.Ha,Ct.Ia-Fe,ti,hi+8*Ct.B,Fe))}if(!re)return _n(Pt,6,"Output aborted.")}return 1}(v,w)),w.bc!=null&&w.bc(w),E&=1}return E?(v.cb=0,E):0}function kr(v,w,E,R,H){H=v[w+E+32*R]+(H>>3),v[w+E+32*R]=-256&H?0>H?0:255:H}function hr(v,w,E,R,H,X){kr(v,w,0,E,R+H),kr(v,w,1,E,R+X),kr(v,w,2,E,R-X),kr(v,w,3,E,R-H)}function pr(v){return(20091*v>>16)+v}function si(v,w,E,R){var H,X=0,Y=s(16);for(H=0;4>H;++H){var J=v[w+0]+v[w+8],nt=v[w+0]-v[w+8],dt=(35468*v[w+4]>>16)-pr(v[w+12]),wt=pr(v[w+4])+(35468*v[w+12]>>16);Y[X+0]=J+wt,Y[X+1]=nt+dt,Y[X+2]=nt-dt,Y[X+3]=J-wt,X+=4,w++}for(H=X=0;4>H;++H)J=(v=Y[X+0]+4)+Y[X+8],nt=v-Y[X+8],dt=(35468*Y[X+4]>>16)-pr(Y[X+12]),kr(E,R,0,0,J+(wt=pr(Y[X+4])+(35468*Y[X+12]>>16))),kr(E,R,1,0,nt+dt),kr(E,R,2,0,nt-dt),kr(E,R,3,0,J-wt),X++,R+=32}function zr(v,w,E,R){var H=v[w+0]+4,X=35468*v[w+4]>>16,Y=pr(v[w+4]),J=35468*v[w+1]>>16;hr(E,R,0,H+Y,v=pr(v[w+1]),J),hr(E,R,1,H+X,v,J),hr(E,R,2,H-X,v,J),hr(E,R,3,H-Y,v,J)}function Kr(v,w,E,R,H){si(v,w,E,R),H&&si(v,w+16,E,R+4)}function fr(v,w,E,R){Oo(v,w+0,E,R,1),Oo(v,w+32,E,R+128,1)}function Ir(v,w,E,R){var H;for(v=v[w+0]+4,H=0;4>H;++H)for(w=0;4>w;++w)kr(E,R,w,H,v)}function yl(v,w,E,R){v[w+0]&&fs(v,w+0,E,R),v[w+16]&&fs(v,w+16,E,R+4),v[w+32]&&fs(v,w+32,E,R+128),v[w+48]&&fs(v,w+48,E,R+128+4)}function Aa(v,w,E,R){var H,X=s(16);for(H=0;4>H;++H){var Y=v[w+0+H]+v[w+12+H],J=v[w+4+H]+v[w+8+H],nt=v[w+4+H]-v[w+8+H],dt=v[w+0+H]-v[w+12+H];X[0+H]=Y+J,X[8+H]=Y-J,X[4+H]=dt+nt,X[12+H]=dt-nt}for(H=0;4>H;++H)Y=(v=X[0+4*H]+3)+X[3+4*H],J=X[1+4*H]+X[2+4*H],nt=X[1+4*H]-X[2+4*H],dt=v-X[3+4*H],E[R+0]=Y+J>>3,E[R+16]=dt+nt>>3,E[R+32]=Y-J>>3,E[R+48]=dt-nt>>3,R+=64}function Zh(v,w,E){var R,H=w-32,X=Vs,Y=255-v[H-1];for(R=0;R<E;++R){var J,nt=X,dt=Y+v[w-1];for(J=0;J<E;++J)v[w+J]=nt[dt+v[H+J]];w+=32}}function db(v,w){Zh(v,w,4)}function ub(v,w){Zh(v,w,8)}function hb(v,w){Zh(v,w,16)}function Do(v,w){var E;for(E=0;16>E;++E)n(v,w+32*E,v,w-32,16)}function Qd(v,w){var E;for(E=16;0<E;--E)r(v,w,v[w-1],16),w+=32}function tu(v,w,E){var R;for(R=0;16>R;++R)r(w,E+32*R,v,16)}function i0(v,w){var E,R=16;for(E=0;16>E;++E)R+=v[w-1+32*E]+v[w+E-32];tu(R>>5,v,w)}function Zr(v,w){var E,R=8;for(E=0;16>E;++E)R+=v[w-1+32*E];tu(R>>4,v,w)}function pb(v,w){var E,R=8;for(E=0;16>E;++E)R+=v[w+E-32];tu(R>>4,v,w)}function r0(v,w){tu(128,v,w)}function fn(v,w,E){return v+2*w+E+2>>2}function fb(v,w){var E,R=w-32;for(R=new Uint8Array([fn(v[R-1],v[R+0],v[R+1]),fn(v[R+0],v[R+1],v[R+2]),fn(v[R+1],v[R+2],v[R+3]),fn(v[R+2],v[R+3],v[R+4])]),E=0;4>E;++E)n(v,w+32*E,R,0,R.length)}function mb(v,w){var E=v[w-1],R=v[w-1+32],H=v[w-1+64],X=v[w-1+96];Qt(v,w+0,16843009*fn(v[w-1-32],E,R)),Qt(v,w+32,16843009*fn(E,R,H)),Qt(v,w+64,16843009*fn(R,H,X)),Qt(v,w+96,16843009*fn(H,X,X))}function Qa(v,w){var E,R=4;for(E=0;4>E;++E)R+=v[w+E-32]+v[w-1+32*E];for(R>>=3,E=0;4>E;++E)r(v,w+32*E,R,4)}function s0(v,w){var E=v[w-1+0],R=v[w-1+32],H=v[w-1+64],X=v[w-1-32],Y=v[w+0-32],J=v[w+1-32],nt=v[w+2-32],dt=v[w+3-32];v[w+0+96]=fn(R,H,v[w-1+96]),v[w+1+96]=v[w+0+64]=fn(E,R,H),v[w+2+96]=v[w+1+64]=v[w+0+32]=fn(X,E,R),v[w+3+96]=v[w+2+64]=v[w+1+32]=v[w+0+0]=fn(Y,X,E),v[w+3+64]=v[w+2+32]=v[w+1+0]=fn(J,Y,X),v[w+3+32]=v[w+2+0]=fn(nt,J,Y),v[w+3+0]=fn(dt,nt,J)}function a0(v,w){var E=v[w+1-32],R=v[w+2-32],H=v[w+3-32],X=v[w+4-32],Y=v[w+5-32],J=v[w+6-32],nt=v[w+7-32];v[w+0+0]=fn(v[w+0-32],E,R),v[w+1+0]=v[w+0+32]=fn(E,R,H),v[w+2+0]=v[w+1+32]=v[w+0+64]=fn(R,H,X),v[w+3+0]=v[w+2+32]=v[w+1+64]=v[w+0+96]=fn(H,X,Y),v[w+3+32]=v[w+2+64]=v[w+1+96]=fn(X,Y,J),v[w+3+64]=v[w+2+96]=fn(Y,J,nt),v[w+3+96]=fn(J,nt,nt)}function eu(v,w){var E=v[w-1+0],R=v[w-1+32],H=v[w-1+64],X=v[w-1-32],Y=v[w+0-32],J=v[w+1-32],nt=v[w+2-32],dt=v[w+3-32];v[w+0+0]=v[w+1+64]=X+Y+1>>1,v[w+1+0]=v[w+2+64]=Y+J+1>>1,v[w+2+0]=v[w+3+64]=J+nt+1>>1,v[w+3+0]=nt+dt+1>>1,v[w+0+96]=fn(H,R,E),v[w+0+64]=fn(R,E,X),v[w+0+32]=v[w+1+96]=fn(E,X,Y),v[w+1+32]=v[w+2+96]=fn(X,Y,J),v[w+2+32]=v[w+3+96]=fn(Y,J,nt),v[w+3+32]=fn(J,nt,dt)}function Jh(v,w){var E=v[w+0-32],R=v[w+1-32],H=v[w+2-32],X=v[w+3-32],Y=v[w+4-32],J=v[w+5-32],nt=v[w+6-32],dt=v[w+7-32];v[w+0+0]=E+R+1>>1,v[w+1+0]=v[w+0+64]=R+H+1>>1,v[w+2+0]=v[w+1+64]=H+X+1>>1,v[w+3+0]=v[w+2+64]=X+Y+1>>1,v[w+0+32]=fn(E,R,H),v[w+1+32]=v[w+0+96]=fn(R,H,X),v[w+2+32]=v[w+1+96]=fn(H,X,Y),v[w+3+32]=v[w+2+96]=fn(X,Y,J),v[w+3+64]=fn(Y,J,nt),v[w+3+96]=fn(J,nt,dt)}function gb(v,w){var E=v[w-1+0],R=v[w-1+32],H=v[w-1+64],X=v[w-1+96];v[w+0+0]=E+R+1>>1,v[w+2+0]=v[w+0+32]=R+H+1>>1,v[w+2+32]=v[w+0+64]=H+X+1>>1,v[w+1+0]=fn(E,R,H),v[w+3+0]=v[w+1+32]=fn(R,H,X),v[w+3+32]=v[w+1+64]=fn(H,X,X),v[w+3+64]=v[w+2+64]=v[w+0+96]=v[w+1+96]=v[w+2+96]=v[w+3+96]=X}function _b(v,w){var E=v[w-1+0],R=v[w-1+32],H=v[w-1+64],X=v[w-1+96],Y=v[w-1-32],J=v[w+0-32],nt=v[w+1-32],dt=v[w+2-32];v[w+0+0]=v[w+2+32]=E+Y+1>>1,v[w+0+32]=v[w+2+64]=R+E+1>>1,v[w+0+64]=v[w+2+96]=H+R+1>>1,v[w+0+96]=X+H+1>>1,v[w+3+0]=fn(J,nt,dt),v[w+2+0]=fn(Y,J,nt),v[w+1+0]=v[w+3+32]=fn(E,Y,J),v[w+1+32]=v[w+3+64]=fn(R,E,Y),v[w+1+64]=v[w+3+96]=fn(H,R,E),v[w+1+96]=fn(X,H,R)}function vb(v,w){var E;for(E=0;8>E;++E)n(v,w+32*E,v,w-32,8)}function Qh(v,w){var E;for(E=0;8>E;++E)r(v,w,v[w-1],8),w+=32}function Uc(v,w,E){var R;for(R=0;8>R;++R)r(w,E+32*R,v,8)}function Sl(v,w){var E,R=8;for(E=0;8>E;++E)R+=v[w+E-32]+v[w-1+32*E];Uc(R>>4,v,w)}function xb(v,w){var E,R=4;for(E=0;8>E;++E)R+=v[w+E-32];Uc(R>>3,v,w)}function zc(v,w){var E,R=4;for(E=0;8>E;++E)R+=v[w-1+32*E];Uc(R>>3,v,w)}function tp(v,w){Uc(128,v,w)}function nu(v,w,E){var R=v[w-E],H=v[w+0],X=3*(H-R)+Mb[1020+v[w-2*E]-v[w+E]],Y=x0[112+(X+4>>3)];v[w-E]=Vs[255+R+x0[112+(X+3>>3)]],v[w+0]=Vs[255+H-Y]}function o0(v,w,E,R){var H=v[w+0],X=v[w+E];return da[255+v[w-2*E]-v[w-E]]>R||da[255+X-H]>R}function l0(v,w,E,R){return 4*da[255+v[w-E]-v[w+0]]+da[255+v[w-2*E]-v[w+E]]<=R}function c0(v,w,E,R,H){var X=v[w-3*E],Y=v[w-2*E],J=v[w-E],nt=v[w+0],dt=v[w+E],wt=v[w+2*E],Bt=v[w+3*E];return 4*da[255+J-nt]+da[255+Y-dt]>R?0:da[255+v[w-4*E]-X]<=H&&da[255+X-Y]<=H&&da[255+Y-J]<=H&&da[255+Bt-wt]<=H&&da[255+wt-dt]<=H&&da[255+dt-nt]<=H}function d0(v,w,E,R){var H=2*R+1;for(R=0;16>R;++R)l0(v,w+R,E,H)&&nu(v,w+R,E)}function to(v,w,E,R){var H=2*R+1;for(R=0;16>R;++R)l0(v,w+R*E,1,H)&&nu(v,w+R*E,1)}function Po(v,w,E,R){var H;for(H=3;0<H;--H)d0(v,w+=4*E,E,R)}function bb(v,w,E,R){var H;for(H=3;0<H;--H)to(v,w+=4,E,R)}function wl(v,w,E,R,H,X,Y,J){for(X=2*X+1;0<H--;){if(c0(v,w,E,X,Y))if(o0(v,w,E,J))nu(v,w,E);else{var nt=v,dt=w,wt=E,Bt=nt[dt-2*wt],Vt=nt[dt-wt],Pt=nt[dt+0],le=nt[dt+wt],Kt=nt[dt+2*wt],Ct=27*(re=Mb[1020+3*(Pt-Vt)+Mb[1020+Bt-le]])+63>>7,Tt=18*re+63>>7,re=9*re+63>>7;nt[dt-3*wt]=Vs[255+nt[dt-3*wt]+re],nt[dt-2*wt]=Vs[255+Bt+Tt],nt[dt-wt]=Vs[255+Vt+Ct],nt[dt+0]=Vs[255+Pt-Ct],nt[dt+wt]=Vs[255+le-Tt],nt[dt+2*wt]=Vs[255+Kt-re]}w+=R}}function Ta(v,w,E,R,H,X,Y,J){for(X=2*X+1;0<H--;){if(c0(v,w,E,X,Y))if(o0(v,w,E,J))nu(v,w,E);else{var nt=v,dt=w,wt=E,Bt=nt[dt-wt],Vt=nt[dt+0],Pt=nt[dt+wt],le=x0[112+((Kt=3*(Vt-Bt))+4>>3)],Kt=x0[112+(Kt+3>>3)],Ct=le+1>>1;nt[dt-2*wt]=Vs[255+nt[dt-2*wt]+Ct],nt[dt-wt]=Vs[255+Bt+Kt],nt[dt+0]=Vs[255+Vt-le],nt[dt+wt]=Vs[255+Pt-Ct]}w+=R}}function ep(v,w,E,R,H,X){wl(v,w,E,1,16,R,H,X)}function jc(v,w,E,R,H,X){wl(v,w,1,E,16,R,H,X)}function yb(v,w,E,R,H,X){var Y;for(Y=3;0<Y;--Y)Ta(v,w+=4*E,E,1,16,R,H,X)}function iu(v,w,E,R,H,X){var Y;for(Y=3;0<Y;--Y)Ta(v,w+=4,1,E,16,R,H,X)}function Sb(v,w,E,R,H,X,Y,J){wl(v,w,H,1,8,X,Y,J),wl(E,R,H,1,8,X,Y,J)}function np(v,w,E,R,H,X,Y,J){wl(v,w,1,H,8,X,Y,J),wl(E,R,1,H,8,X,Y,J)}function ip(v,w,E,R,H,X,Y,J){Ta(v,w+4*H,H,1,8,X,Y,J),Ta(E,R+4*H,H,1,8,X,Y,J)}function u0(v,w,E,R,H,X,Y,J){Ta(v,w+4,1,H,8,X,Y,J),Ta(E,R+4,1,H,8,X,Y,J)}function ru(){this.ba=new $t,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new be,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rp(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function sp(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function h0(){this.ua=0,this.Wa=new ut,this.vb=new ut,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new K,this.yc=new V}function wb(){this.xb=this.a=0,this.l=new Nn,this.ca=new $t,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new h0,this.ab=0,this.gc=a(4,sp),this.Oc=0}function su(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Nn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Hc(v,w,E,R,H,X,Y){for(v=v==null?0:v[w+0],w=0;w<Y;++w)H[X+w]=v+E[R+w]&255,v=H[X+w]}function ap(v,w,E,R,H,X,Y){var J;if(v==null)Hc(null,null,E,R,H,X,Y);else for(J=0;J<Y;++J)H[X+J]=v[w+J]+E[R+J]&255}function Cl(v,w,E,R,H,X,Y){if(v==null)Hc(null,null,E,R,H,X,Y);else{var J,nt=v[w+0],dt=nt,wt=nt;for(J=0;J<Y;++J)dt=wt+(nt=v[w+J])-dt,wt=E[R+J]+(-256&dt?0>dt?0:255:dt)&255,dt=nt,H[X+J]=wt}}function op(v,w,E,R){var H=w.width,X=w.o;if(e(v!=null&&w!=null),0>E||0>=R||E+R>X)return null;if(!v.Cc){if(v.ga==null){var Y;if(v.ga=new su,(Y=v.ga==null)||(Y=w.width*w.o,e(v.Gb.length==0),v.Gb=s(Y),v.Uc=0,v.Gb==null?Y=0:(v.mb=v.Gb,v.nb=v.Uc,v.rc=null,Y=1),Y=!Y),!Y){Y=v.ga;var J=v.Fa,nt=v.P,dt=v.qc,wt=v.mb,Bt=v.nb,Vt=nt+1,Pt=dt-1,le=Y.l;if(e(J!=null&&wt!=null&&w!=null),Il[0]=null,Il[1]=Hc,Il[2]=ap,Il[3]=Cl,Y.ca=wt,Y.tb=Bt,Y.c=w.width,Y.i=w.height,e(0<Y.c&&0<Y.i),1>=dt)w=0;else if(Y.$a=J[nt+0]>>0&3,Y.Z=J[nt+0]>>2&3,Y.Lc=J[nt+0]>>4&3,nt=J[nt+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||nt)w=0;else if(le.put=kn,le.ac=qn,le.bc=Yi,le.ma=Y,le.width=w.width,le.height=w.height,le.Da=w.Da,le.v=w.v,le.va=w.va,le.j=w.j,le.o=w.o,Y.$a)t:{e(Y.$a==1),w=Cs();e:for(;;){if(w==null){w=0;break t}if(e(Y!=null),Y.mc=w,w.c=Y.c,w.i=Y.i,w.l=Y.l,w.l.ma=Y,w.l.width=Y.c,w.l.height=Y.i,w.a=0,Q(w.m,J,Vt,Pt),!sa(Y.c,Y.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&ia(w.s)?(Y.ic=1,J=w.c*w.i,w.Ta=null,w.Ua=0,w.V=s(J),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(Y.ic=0,w=Io(w,Y.c)),!w))break e;w=1;break t}Y.mc=null,w=0}else w=Pt>=Y.c*Y.i;Y=!w}if(Y)return null;v.ga.Lc!=1?v.Ga=0:R=X-E}e(v.ga!=null),e(E+R<=X);t:{if(w=(J=v.ga).c,X=J.l.o,J.$a==0){if(Vt=v.rc,Pt=v.Vc,le=v.Fa,nt=v.P+1+E*w,dt=v.mb,wt=v.nb+E*w,e(nt<=v.P+v.qc),J.Z!=0)for(e(Il[J.Z]!=null),Y=0;Y<R;++Y)Il[J.Z](Vt,Pt,le,nt,dt,wt,w),Vt=dt,Pt=wt,wt+=w,nt+=w;else for(Y=0;Y<R;++Y)n(dt,wt,le,nt,w),Vt=dt,Pt=wt,wt+=w,nt+=w;v.rc=Vt,v.Vc=Pt}else{if(e(J.mc!=null),w=E+R,e((Y=J.mc)!=null),e(w<=Y.i),Y.C>=w)w=1;else if(J.ic||Nt(),J.ic){J=Y.V,Vt=Y.Ba,Pt=Y.c;var Kt=Y.i,Ct=(le=1,nt=Y.$/Pt,dt=Y.$%Pt,wt=Y.m,Bt=Y.s,Y.$),Tt=Pt*Kt,re=Pt*w,he=Bt.wc,oe=Ct<re?Hi(Bt,dt,nt):null;e(Ct<=Tt),e(w<=Kt),e(ia(Bt));e:for(;;){for(;!wt.h&&Ct<re;){if(dt&he||(oe=Hi(Bt,dt,nt)),e(oe!=null),pt(wt),256>(Kt=$i(oe.G[0],oe.H[0],wt)))J[Vt+Ct]=Kt,++Ct,++dt>=Pt&&(dt=0,++nt<=w&&!(nt%16)&&Ss(Y,nt));else{if(!(280>Kt)){le=0;break e}Kt=ys(Kt-256,wt);var Fe,Ae=$i(oe.G[4],oe.H[4],wt);if(pt(wt),!(Ct>=(Ae=Fs(Pt,Ae=ys(Ae,wt)))&&Tt-Ct>=Kt)){le=0;break e}for(Fe=0;Fe<Kt;++Fe)J[Vt+Ct+Fe]=J[Vt+Ct+Fe-Ae];for(Ct+=Kt,dt+=Kt;dt>=Pt;)dt-=Pt,++nt<=w&&!(nt%16)&&Ss(Y,nt);Ct<re&&dt&he&&(oe=Hi(Bt,dt,nt))}e(wt.h==Z(wt))}Ss(Y,nt>w?w:nt);break e}!le||wt.h&&Ct<Tt?(le=0,Y.a=wt.h?5:3):Y.$=Ct,w=le}else w=ws(Y,Y.V,Y.Ba,Y.c,Y.i,w,bl);if(!w){R=0;break t}}E+R>=X&&(v.Cc=1),R=1}if(!R)return null;if(v.Cc&&((R=v.ga)!=null&&(R.mc=null),v.ga=null,0<v.Ga))return alert("todo:WebPDequantizeLevels"),null}return v.nb+E*H}function C(v,w,E,R,H,X){for(;0<H--;){var Y,J=v,nt=w+(E?1:0),dt=v,wt=w+(E?0:3);for(Y=0;Y<R;++Y){var Bt=dt[wt+4*Y];Bt!=255&&(Bt*=32897,J[nt+4*Y+0]=J[nt+4*Y+0]*Bt>>23,J[nt+4*Y+1]=J[nt+4*Y+1]*Bt>>23,J[nt+4*Y+2]=J[nt+4*Y+2]*Bt>>23)}w+=X}}function W(v,w,E,R,H){for(;0<R--;){var X;for(X=0;X<E;++X){var Y=v[w+2*X+0],J=15&(dt=v[w+2*X+1]),nt=4369*J,dt=(240&dt|dt>>4)*nt>>16;v[w+2*X+0]=(240&Y|Y>>4)*nt>>16&240|(15&Y|Y<<4)*nt>>16>>4&15,v[w+2*X+1]=240&dt|J}w+=H}}function ht(v,w,E,R,H,X,Y,J){var nt,dt,wt=255;for(dt=0;dt<H;++dt){for(nt=0;nt<R;++nt){var Bt=v[w+nt];X[Y+4*nt]=Bt,wt&=Bt}w+=E,Y+=J}return wt!=255}function bt(v,w,E,R,H){var X;for(X=0;X<H;++X)E[R+X]=v[w+X]>>8}function Nt(){ca=C,Di=W,Pi=ht,rr=bt}function Jt(v,w,E){F[v]=function(R,H,X,Y,J,nt,dt,wt,Bt,Vt,Pt,le,Kt,Ct,Tt,re,he){var oe,Fe=he-1>>1,Ae=J[nt+0]|dt[wt+0]<<16,tn=Bt[Vt+0]|Pt[le+0]<<16;e(R!=null);var ke=3*Ae+tn+131074>>2;for(w(R[H+0],255&ke,ke>>16,Kt,Ct),X!=null&&(ke=3*tn+Ae+131074>>2,w(X[Y+0],255&ke,ke>>16,Tt,re)),oe=1;oe<=Fe;++oe){var ti=J[nt+oe]|dt[wt+oe]<<16,hi=Bt[Vt+oe]|Pt[le+oe]<<16,Kn=Ae+ti+tn+hi+524296,jn=Kn+2*(ti+tn)>>3;ke=jn+Ae>>1,Ae=(Kn=Kn+2*(Ae+hi)>>3)+ti>>1,w(R[H+2*oe-1],255&ke,ke>>16,Kt,Ct+(2*oe-1)*E),w(R[H+2*oe-0],255&Ae,Ae>>16,Kt,Ct+(2*oe-0)*E),X!=null&&(ke=Kn+tn>>1,Ae=jn+hi>>1,w(X[Y+2*oe-1],255&ke,ke>>16,Tt,re+(2*oe-1)*E),w(X[Y+2*oe+0],255&Ae,Ae>>16,Tt,re+(2*oe+0)*E)),Ae=ti,tn=hi}1&he||(ke=3*Ae+tn+131074>>2,w(R[H+he-1],255&ke,ke>>16,Kt,Ct+(he-1)*E),X!=null&&(ke=3*tn+Ae+131074>>2,w(X[Y+he-1],255&ke,ke>>16,Tt,re+(he-1)*E)))}}function me(){ua[b0]=UR,ua[y0]=rE,ua[QM]=zR,ua[S0]=sE,ua[w0]=aE,ua[Eb]=oE,ua[tE]=jR,ua[Ab]=rE,ua[Tb]=sE,ua[C0]=aE,ua[kb]=oE}function Le(v){return v&~HR?0>v?0:255:v>>lE}function Je(v,w){return Le((19077*v>>8)+(26149*w>>8)-14234)}function bn(v,w,E){return Le((19077*v>>8)-(6419*w>>8)-(13320*E>>8)+8708)}function vn(v,w){return Le((19077*v>>8)+(33050*w>>8)-17685)}function Xn(v,w,E,R,H){R[H+0]=Je(v,E),R[H+1]=bn(v,w,E),R[H+2]=vn(v,w)}function Wi(v,w,E,R,H){R[H+0]=vn(v,w),R[H+1]=bn(v,w,E),R[H+2]=Je(v,E)}function Zi(v,w,E,R,H){var X=bn(v,w,E);w=X<<3&224|vn(v,w)>>3,R[H+0]=248&Je(v,E)|X>>5,R[H+1]=w}function mr(v,w,E,R,H){var X=240&vn(v,w)|15;R[H+0]=240&Je(v,E)|bn(v,w,E)>>4,R[H+1]=X}function Jr(v,w,E,R,H){R[H+0]=255,Xn(v,w,E,R,H+1)}function Dr(v,w,E,R,H){Wi(v,w,E,R,H),R[H+3]=255}function ka(v,w,E,R,H){Xn(v,w,E,R,H),R[H+3]=255}function Bs(v,w){return 0>v?0:v>w?w:v}function eo(v,w,E){F[v]=function(R,H,X,Y,J,nt,dt,wt,Bt){for(var Vt=wt+(-2&Bt)*E;wt!=Vt;)w(R[H+0],X[Y+0],J[nt+0],dt,wt),w(R[H+1],X[Y+0],J[nt+0],dt,wt+E),H+=2,++Y,++nt,wt+=2*E;1&Bt&&w(R[H+0],X[Y+0],J[nt+0],dt,wt)}}function p0(v,w,E){return E==0?v==0?w==0?6:5:w==0?4:0:E}function lp(v,w,E,R,H){switch(v>>>30){case 3:Oo(w,E,R,H,0);break;case 2:ir(w,E,R,H);break;case 1:fs(w,E,R,H)}}function cp(v,w){var E,R,H=w.M,X=w.Nb,Y=v.oc,J=v.pc+40,nt=v.oc,dt=v.pc+584,wt=v.oc,Bt=v.pc+600;for(E=0;16>E;++E)Y[J+32*E-1]=129;for(E=0;8>E;++E)nt[dt+32*E-1]=129,wt[Bt+32*E-1]=129;for(0<H?Y[J-1-32]=nt[dt-1-32]=wt[Bt-1-32]=129:(r(Y,J-32-1,127,21),r(nt,dt-32-1,127,9),r(wt,Bt-32-1,127,9)),R=0;R<v.za;++R){var Vt=w.ya[w.aa+R];if(0<R){for(E=-1;16>E;++E)n(Y,J+32*E-4,Y,J+32*E+12,4);for(E=-1;8>E;++E)n(nt,dt+32*E-4,nt,dt+32*E+4,4),n(wt,Bt+32*E-4,wt,Bt+32*E+4,4)}var Pt=v.Gd,le=v.Hd+R,Kt=Vt.ad,Ct=Vt.Hc;if(0<H&&(n(Y,J-32,Pt[le].y,0,16),n(nt,dt-32,Pt[le].f,0,8),n(wt,Bt-32,Pt[le].ea,0,8)),Vt.Za){var Tt=Y,re=J-32+16;for(0<H&&(R>=v.za-1?r(Tt,re,Pt[le].y[15],4):n(Tt,re,Pt[le+1].y,0,4)),E=0;4>E;E++)Tt[re+128+E]=Tt[re+256+E]=Tt[re+384+E]=Tt[re+0+E];for(E=0;16>E;++E,Ct<<=2)Tt=Y,re=J+dE[E],Ia[Vt.Ob[E]](Tt,re),lp(Ct,Kt,16*+E,Tt,re)}else if(Tt=p0(R,H,Vt.Ob[0]),kl[Tt](Y,J),Ct!=0)for(E=0;16>E;++E,Ct<<=2)lp(Ct,Kt,16*+E,Y,J+dE[E]);for(E=Vt.Gc,Tt=p0(R,H,Vt.Dd),Fo[Tt](nt,dt),Fo[Tt](wt,Bt),Ct=Kt,Tt=nt,re=dt,255&(Vt=E>>0)&&(170&Vt?fp(Ct,256,Tt,re):oa(Ct,256,Tt,re)),Vt=wt,Ct=Bt,255&(E>>=8)&&(170&E?fp(Kt,320,Vt,Ct):oa(Kt,320,Vt,Ct)),H<v.Ub-1&&(n(Pt[le].y,0,Y,J+480,16),n(Pt[le].f,0,nt,dt+224,8),n(Pt[le].ea,0,wt,Bt+224,8)),E=8*X*v.B,Pt=v.sa,le=v.ta+16*R+16*X*v.R,Kt=v.qa,Vt=v.ra+8*R+E,Ct=v.Ha,Tt=v.Ia+8*R+E,E=0;16>E;++E)n(Pt,le+E*v.R,Y,J+32*E,16);for(E=0;8>E;++E)n(Kt,Vt+E*v.B,nt,dt+32*E,8),n(Ct,Tt+E*v.B,wt,Bt+32*E,8)}}function au(v,w,E,R,H,X,Y,J,nt){var dt=[0],wt=[0],Bt=0,Vt=nt!=null?nt.kd:0,Pt=nt??new rp;if(v==null||12>E)return 7;Pt.data=v,Pt.w=w,Pt.ha=E,w=[w],E=[E],Pt.gb=[Pt.gb];t:{var le=w,Kt=E,Ct=Pt.gb;if(e(v!=null),e(Kt!=null),e(Ct!=null),Ct[0]=0,12<=Kt[0]&&!t(v,le[0],"RIFF")){if(t(v,le[0]+8,"WEBP")){Ct=3;break t}var Tt=_e(v,le[0]+4);if(12>Tt||4294967286<Tt){Ct=3;break t}if(Vt&&Tt>Kt[0]-8){Ct=7;break t}Ct[0]=Tt,le[0]+=12,Kt[0]-=12}Ct=0}if(Ct!=0)return Ct;for(Tt=0<Pt.gb[0],E=E[0];;){t:{var re=v;Kt=w,Ct=E;var he=dt,oe=wt,Fe=le=[0];if((ke=Bt=[Bt])[0]=0,8>Ct[0])Ct=7;else{if(!t(re,Kt[0],"VP8X")){if(_e(re,Kt[0]+4)!=10){Ct=3;break t}if(18>Ct[0]){Ct=7;break t}var Ae=_e(re,Kt[0]+8),tn=1+ue(re,Kt[0]+12);if(2147483648<=tn*(re=1+ue(re,Kt[0]+15))){Ct=3;break t}Fe!=null&&(Fe[0]=Ae),he!=null&&(he[0]=tn),oe!=null&&(oe[0]=re),Kt[0]+=18,Ct[0]-=18,ke[0]=1}Ct=0}}if(Bt=Bt[0],le=le[0],Ct!=0)return Ct;if(Kt=!!(2&le),!Tt&&Bt)return 3;if(X!=null&&(X[0]=!!(16&le)),Y!=null&&(Y[0]=Kt),J!=null&&(J[0]=0),Y=dt[0],le=wt[0],Bt&&Kt&&nt==null){Ct=0;break}if(4>E){Ct=7;break}if(Tt&&Bt||!Tt&&!Bt&&!t(v,w[0],"ALPH")){E=[E],Pt.na=[Pt.na],Pt.P=[Pt.P],Pt.Sa=[Pt.Sa];t:{Ae=v,Ct=w,Tt=E;var ke=Pt.gb;he=Pt.na,oe=Pt.P,Fe=Pt.Sa,tn=22,e(Ae!=null),e(Tt!=null),re=Ct[0];var ti=Tt[0];for(e(he!=null),e(Fe!=null),he[0]=null,oe[0]=null,Fe[0]=0;;){if(Ct[0]=re,Tt[0]=ti,8>ti){Ct=7;break t}var hi=_e(Ae,re+4);if(4294967286<hi){Ct=3;break t}var Kn=8+hi+1&-2;if(tn+=Kn,0<ke&&tn>ke){Ct=3;break t}if(!t(Ae,re,"VP8 ")||!t(Ae,re,"VP8L")){Ct=0;break t}if(ti[0]<Kn){Ct=7;break t}t(Ae,re,"ALPH")||(he[0]=Ae,oe[0]=re+8,Fe[0]=hi),re+=Kn,ti-=Kn}}if(E=E[0],Pt.na=Pt.na[0],Pt.P=Pt.P[0],Pt.Sa=Pt.Sa[0],Ct!=0)break}E=[E],Pt.Ja=[Pt.Ja],Pt.xa=[Pt.xa];t:if(ke=v,Ct=w,Tt=E,he=Pt.gb[0],oe=Pt.Ja,Fe=Pt.xa,Ae=Ct[0],re=!t(ke,Ae,"VP8 "),tn=!t(ke,Ae,"VP8L"),e(ke!=null),e(Tt!=null),e(oe!=null),e(Fe!=null),8>Tt[0])Ct=7;else{if(re||tn){if(ke=_e(ke,Ae+4),12<=he&&ke>he-12){Ct=3;break t}if(Vt&&ke>Tt[0]-8){Ct=7;break t}oe[0]=ke,Ct[0]+=8,Tt[0]-=8,Fe[0]=tn}else Fe[0]=5<=Tt[0]&&ke[Ae+0]==47&&!(ke[Ae+4]>>5),oe[0]=Tt[0];Ct=0}if(E=E[0],Pt.Ja=Pt.Ja[0],Pt.xa=Pt.xa[0],w=w[0],Ct!=0)break;if(4294967286<Pt.Ja)return 3;if(J==null||Kt||(J[0]=Pt.xa?2:1),Y=[Y],le=[le],Pt.xa){if(5>E){Ct=7;break}J=Y,Vt=le,Kt=X,v==null||5>E?v=0:5<=E&&v[w+0]==47&&!(v[w+4]>>5)?(Tt=[0],ke=[0],he=[0],Q(oe=new z,v,w,E),He(oe,Tt,ke,he)?(J!=null&&(J[0]=Tt[0]),Vt!=null&&(Vt[0]=ke[0]),Kt!=null&&(Kt[0]=he[0]),v=1):v=0):v=0}else{if(10>E){Ct=7;break}J=le,v==null||10>E||!Fn(v,w+3,E-3)?v=0:(Vt=v[w+0]|v[w+1]<<8|v[w+2]<<16,Kt=16383&(v[w+7]<<8|v[w+6]),v=16383&(v[w+9]<<8|v[w+8]),1&Vt||3<(Vt>>1&7)||!(Vt>>4&1)||Vt>>5>=Pt.Ja||!Kt||!v?v=0:(Y&&(Y[0]=Kt),J&&(J[0]=v),v=1))}if(!v||(Y=Y[0],le=le[0],Bt&&(dt[0]!=Y||wt[0]!=le)))return 3;nt!=null&&(nt[0]=Pt,nt.offset=w-nt.w,e(4294967286>w-nt.w),e(nt.offset==nt.ha-E));break}return Ct==0||Ct==7&&Bt&&nt==null?(X!=null&&(X[0]|=Pt.na!=null&&0<Pt.na.length),R!=null&&(R[0]=Y),H!=null&&(H[0]=le),0):Ct}function dp(v,w,E){var R=w.width,H=w.height,X=0,Y=0,J=R,nt=H;if(w.Da=v!=null&&0<v.Da,w.Da&&(J=v.cd,nt=v.bd,X=v.v,Y=v.j,11>E||(X&=-2,Y&=-2),0>X||0>Y||0>=J||0>=nt||X+J>R||Y+nt>H))return 0;if(w.v=X,w.j=Y,w.va=X+J,w.o=Y+nt,w.U=J,w.T=nt,w.da=v!=null&&0<v.da,w.da){if(!Te(J,nt,E=[v.ib],X=[v.hb]))return 0;w.ib=E[0],w.hb=X[0]}return w.ob=v!=null&&v.ob,w.Kb=v==null||!v.Sd,w.da&&(w.ob=w.ib<3*R/4&&w.hb<3*H/4,w.Kb=0),1}function up(v){if(v==null)return 2;if(11>v.S){var w=v.f.RGBA;w.fb+=(v.height-1)*w.A,w.A=-w.A}else w=v.f.kb,v=v.height,w.O+=(v-1)*w.fa,w.fa=-w.fa,w.N+=(v-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(v-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(v-1)*w.lb,w.lb=-w.lb);return 0}function ou(v,w,E,R){if(R==null||0>=v||0>=w)return 2;if(E!=null){if(E.Da){var H=E.cd,X=E.bd,Y=-2&E.v,J=-2&E.j;if(0>Y||0>J||0>=H||0>=X||Y+H>v||J+X>w)return 2;v=H,w=X}if(E.da){if(!Te(v,w,H=[E.ib],X=[E.hb]))return 2;v=H[0],w=X[0]}}R.width=v,R.height=w;t:{var nt=R.width,dt=R.height;if(v=R.S,0>=nt||0>=dt||!(v>=b0&&13>v))v=2;else{if(0>=R.Rd&&R.sd==null){Y=X=H=w=0;var wt=(J=nt*uE[v])*dt;if(11>v||(X=(dt+1)/2*(w=(nt+1)/2),v==12&&(Y=(H=nt)*dt)),(dt=s(wt+2*X+Y))==null){v=1;break t}R.sd=dt,11>v?((nt=R.f.RGBA).eb=dt,nt.fb=0,nt.A=J,nt.size=wt):((nt=R.f.kb).y=dt,nt.O=0,nt.fa=J,nt.Fd=wt,nt.f=dt,nt.N=0+wt,nt.Ab=w,nt.Cd=X,nt.ea=dt,nt.W=0+wt+X,nt.Db=w,nt.Ed=X,v==12&&(nt.F=dt,nt.J=0+wt+2*X),nt.Tc=Y,nt.lb=H)}if(w=1,H=R.S,X=R.width,Y=R.height,H>=b0&&13>H)if(11>H)v=R.f.RGBA,w&=(J=Math.abs(v.A))*(Y-1)+X<=v.size,w&=J>=X*uE[H],w&=v.eb!=null;else{v=R.f.kb,J=(X+1)/2,wt=(Y+1)/2,nt=Math.abs(v.fa),dt=Math.abs(v.Ab);var Bt=Math.abs(v.Db),Vt=Math.abs(v.lb),Pt=Vt*(Y-1)+X;w&=nt*(Y-1)+X<=v.Fd,w&=dt*(wt-1)+J<=v.Cd,w=(w&=Bt*(wt-1)+J<=v.Ed)&nt>=X&dt>=J&Bt>=J,w&=v.y!=null,w&=v.f!=null,w&=v.ea!=null,H==12&&(w&=Vt>=X,w&=Pt<=v.Tc,w&=v.F!=null)}else w=0;v=w?0:2}}return v!=0||E!=null&&E.fd&&(v=up(R)),v}var jr=64,lu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cu=24,du=32,hp=8,Ms=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Zt("Predictor0","PredictorAdd0"),F.Predictor0=function(){return 4278190080},F.Predictor1=function(v){return v},F.Predictor2=function(v,w,E){return w[E+0]},F.Predictor3=function(v,w,E){return w[E+1]},F.Predictor4=function(v,w,E){return w[E-1]},F.Predictor5=function(v,w,E){return j(j(v,w[E+1]),w[E+0])},F.Predictor6=function(v,w,E){return j(v,w[E-1])},F.Predictor7=function(v,w,E){return j(v,w[E+0])},F.Predictor8=function(v,w,E){return j(w[E-1],w[E+0])},F.Predictor9=function(v,w,E){return j(w[E+0],w[E+1])},F.Predictor10=function(v,w,E){return j(j(v,w[E-1]),j(w[E+0],w[E+1]))},F.Predictor11=function(v,w,E){var R=w[E+0];return 0>=Xt(R>>24&255,v>>24&255,(w=w[E-1])>>24&255)+Xt(R>>16&255,v>>16&255,w>>16&255)+Xt(R>>8&255,v>>8&255,w>>8&255)+Xt(255&R,255&v,255&w)?R:v},F.Predictor12=function(v,w,E){var R=w[E+0];return(yt((v>>24&255)+(R>>24&255)-((w=w[E-1])>>24&255))<<24|yt((v>>16&255)+(R>>16&255)-(w>>16&255))<<16|yt((v>>8&255)+(R>>8&255)-(w>>8&255))<<8|yt((255&v)+(255&R)-(255&w)))>>>0},F.Predictor13=function(v,w,E){var R=w[E-1];return(jt((v=j(v,w[E+0]))>>24&255,R>>24&255)<<24|jt(v>>16&255,R>>16&255)<<16|jt(v>>8&255,R>>8&255)<<8|jt(v>>0&255,R>>0&255))>>>0};var Cb=F.PredictorAdd0;F.PredictorAdd1=Ht,Zt("Predictor2","PredictorAdd2"),Zt("Predictor3","PredictorAdd3"),Zt("Predictor4","PredictorAdd4"),Zt("Predictor5","PredictorAdd5"),Zt("Predictor6","PredictorAdd6"),Zt("Predictor7","PredictorAdd7"),Zt("Predictor8","PredictorAdd8"),Zt("Predictor9","PredictorAdd9"),Zt("Predictor10","PredictorAdd10"),Zt("Predictor11","PredictorAdd11"),Zt("Predictor12","PredictorAdd12"),Zt("Predictor13","PredictorAdd13");var pp=F.PredictorAdd2;Re("ColorIndexInverseTransform","MapARGB","32b",function(v){return v>>8&255},function(v){return v}),Re("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(v){return v},function(v){return v>>8&255});var f0,aa=F.ColorIndexInverseTransform,uu=F.MapARGB,m0=F.VP8LColorIndexInverseTransformAlpha,g0=F.MapAlpha,Ml=F.VP8LPredictorsAdd=[];Ml.length=16,(F.VP8LPredictors=[]).length=16,(F.VP8LPredictorsAdd_C=[]).length=16,(F.VP8LPredictors_C=[]).length=16;var Wc,Es,ps,El,Ro,Lo,hu,Oo,ir,fp,fs,oa,pu,_0,mp,Gc,qc,Al,Xc,fu,Yc,Tl,gp,la,ca,Di,Pi,rr,Cr=s(511),No=s(2041),_p=s(225),mu=s(767),v0=0,Mb=No,x0=_p,Vs=mu,da=Cr,b0=0,y0=1,QM=2,S0=3,w0=4,Eb=5,tE=6,Ab=7,Tb=8,C0=9,kb=10,ER=[2,3,7],AR=[3,3,11],eE=[280,256,256,256,40],TR=[0,1,1,1,0],kR=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],IR=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],DR=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],PR=8,Ib=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Db=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],vp=null,RR=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],LR=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],nE=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],OR=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],NR=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],FR=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],BR=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],kl=[],Ia=[],Fo=[],VR=1,iE=2,Il=[],ua=[];Jt("UpsampleRgbLinePair",Xn,3),Jt("UpsampleBgrLinePair",Wi,3),Jt("UpsampleRgbaLinePair",ka,4),Jt("UpsampleBgraLinePair",Dr,4),Jt("UpsampleArgbLinePair",Jr,4),Jt("UpsampleRgba4444LinePair",mr,2),Jt("UpsampleRgb565LinePair",Zi,2);var UR=F.UpsampleRgbLinePair,zR=F.UpsampleBgrLinePair,rE=F.UpsampleRgbaLinePair,sE=F.UpsampleBgraLinePair,aE=F.UpsampleArgbLinePair,oE=F.UpsampleRgba4444LinePair,jR=F.UpsampleRgb565LinePair,M0=16,E0=1<<M0-1,xp=-227,Pb=482,lE=6,HR=(256<<lE)-1,cE=0,WR=s(256),GR=s(256),qR=s(256),XR=s(256),YR=s(Pb-xp),$R=s(Pb-xp);eo("YuvToRgbRow",Xn,3),eo("YuvToBgrRow",Wi,3),eo("YuvToRgbaRow",ka,4),eo("YuvToBgraRow",Dr,4),eo("YuvToArgbRow",Jr,4),eo("YuvToRgba4444Row",mr,2),eo("YuvToRgb565Row",Zi,2);var dE=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],A0=[0,2,8],KR=[8,7,6,4,4,2,2,2,1,1,1,1],ZR=1;this.WebPDecodeRGBA=function(v,w,E,R,H){var X=y0,Y=new ru,J=new $t;Y.ba=J,J.S=X,J.width=[J.width],J.height=[J.height];var nt=J.width,dt=J.height,wt=new ie;if(wt==null||v==null)var Bt=2;else e(wt!=null),Bt=au(v,w,E,wt.width,wt.height,wt.Pd,wt.Qd,wt.format,null);if(Bt!=0?nt=0:(nt!=null&&(nt[0]=wt.width[0]),dt!=null&&(dt[0]=wt.height[0]),nt=1),nt){J.width=J.width[0],J.height=J.height[0],R!=null&&(R[0]=J.width),H!=null&&(H[0]=J.height);t:{if(R=new Nn,(H=new rp).data=v,H.w=w,H.ha=E,H.kd=1,w=[0],e(H!=null),((v=au(H.data,H.w,H.ha,null,null,null,w,null,H))==0||v==7)&&w[0]&&(v=4),(w=v)==0){if(e(Y!=null),R.data=H.data,R.w=H.w+H.offset,R.ha=H.ha-H.offset,R.put=kn,R.ac=qn,R.bc=Yi,R.ma=Y,H.xa){if((v=Cs())==null){Y=1;break t}if(function(Vt,Pt){var le=[0],Kt=[0],Ct=[0];e:for(;;){if(Vt==null)return 0;if(Pt==null)return Vt.a=2,0;if(Vt.l=Pt,Vt.a=0,Q(Vt.m,Pt.data,Pt.w,Pt.ha),!He(Vt.m,le,Kt,Ct)){Vt.a=3;break e}if(Vt.xb=iE,Pt.width=le[0],Pt.height=Kt[0],!sa(le[0],Kt[0],1,Vt,null))break e;return 1}return e(Vt.a!=0),0}(v,R)){if(R=(w=ou(R.width,R.height,Y.Oa,Y.ba))==0){e:{R=v;n:for(;;){if(R==null){R=0;break e}if(e(R.s.yc!=null),e(R.s.Ya!=null),e(0<R.s.Wb),e((E=R.l)!=null),e((H=E.ma)!=null),R.xb!=0){if(R.ca=H.ba,R.tb=H.tb,e(R.ca!=null),!dp(H.Oa,E,S0)){R.a=2;break n}if(!Io(R,E.width)||E.da)break n;if((E.da||Ye(R.ca.S))&&Nt(),11>R.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),R.ca.f.kb.F!=null&&Nt()),R.Pb&&0<R.s.ua&&R.s.vb.X==null&&!mt(R.s.vb,R.s.Wa.Xa)){R.a=1;break n}R.xb=0}if(!ws(R,R.V,R.Ba,R.c,R.i,E.o,Ea))break n;H.Dc=R.Ma,R=1;break e}e(R.a!=0),R=0}R=!R}R&&(w=v.a)}else w=v.a}else{if((v=new Fi)==null){Y=1;break t}if(v.Fa=H.na,v.P=H.P,v.qc=H.Sa,Ke(v,R)){if((w=ou(R.width,R.height,Y.Oa,Y.ba))==0){if(v.Aa=0,E=Y.Oa,e((H=v)!=null),E!=null){if(0<(nt=0>(nt=E.Md)?0:100<nt?255:255*nt/100)){for(dt=wt=0;4>dt;++dt)12>(Bt=H.pb[dt]).lc&&(Bt.ia=nt*KR[0>Bt.lc?0:Bt.lc]>>3),wt|=Bt.ia;wt&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=E.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}hs(v,R)||(w=v.a)}}else w=v.a}w==0&&Y.Oa!=null&&Y.Oa.fd&&(w=up(Y.ba))}Y=w}X=Y!=0?null:11>X?J.f.RGBA.eb:J.f.kb.y}else X=null;return X};var uE=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(F,O){for(var B="",P=0;P<4;P++)B+=String.fromCharCode(F[O++]);return B}function p(F,O){return(F[O+0]<<0|F[O+1]<<8|F[O+2]<<16)>>>0}function f(F,O){return(F[O+0]<<0|F[O+1]<<8|F[O+2]<<16|F[O+3]<<24)>>>0}new l;var g=[0],m=[0],x=[],y=new l,S=i,b=function(F,O){var B={},P=0,V=!1,$=0,K=0;if(B.frames=[],!function(it,Z,at,pt){for(var ft=0;ft<pt;ft++)if(it[Z+ft]!=at.charCodeAt(ft))return!0;return!1}(F,O,"RIFF",4)){var ct,ot;for(f(F,O+=4),O+=8;O<F.length;){var st=d(F,O),Q=f(F,O+=4);O+=4;var xt=Q+(1&Q);switch(st){case"VP8 ":case"VP8L":B.frames[P]===void 0&&(B.frames[P]={}),(z=B.frames[P]).src_off=V?K:O-8,z.src_size=$+Q+8,P++,V&&(V=!1,$=0,K=0);break;case"VP8X":(z=B.header={}).feature_flags=F[O];var Mt=O+4;z.canvas_width=1+p(F,Mt),Mt+=3,z.canvas_height=1+p(F,Mt),Mt+=3;break;case"ALPH":V=!0,$=xt+8,K=O-8;break;case"ANIM":(z=B.header).bgcolor=f(F,O),Mt=O+4,z.loop_count=(ct=F)[(ot=Mt)+0]<<0|ct[ot+1]<<8,Mt+=2;break;case"ANMF":var qt,z;(z=B.frames[P]={}).offset_x=2*p(F,O),O+=3,z.offset_y=2*p(F,O),O+=3,z.width=1+p(F,O),O+=3,z.height=1+p(F,O),O+=3,z.duration=p(F,O),O+=3,qt=F[O++],z.dispose=1&qt,z.blend=qt>>1&1}st!="ANMF"&&(O+=xt)}return B}}(S,0);b.response=S,b.rgbaoutput=!0,b.dataurl=!1;var M=b.header?b.header:null,T=b.frames?b.frames:null;if(M){M.loop_counter=M.loop_count,g=[M.canvas_height],m=[M.canvas_width];for(var k=0;k<T.length&&T[k].blend!=0;k++);}var L=T[0],U=y.WebPDecodeRGBA(S,L.src_off,L.src_size,m,g);L.rgba=U,L.imgwidth=m[0],L.imgheight=g[0];for(var N=0;N<m[0]*g[0]*4;N++)x[N]=U[N];return this.width=m,this.height=g,this.data=x,this}(function(i){var e=function(){return typeof O1=="function"},t=function(g,m,x,y){var S=4,b=a;switch(y){case i.image_compression.FAST:S=1,b=s;break;case i.image_compression.MEDIUM:S=6,b=o;break;case i.image_compression.SLOW:S=9,b=l}g=n(g,m,x,b);var M=O1(g,{level:S});return i.__addimage__.arrayBufferToBinaryString(M)},n=function(g,m,x,y){for(var S,b,M,T=g.length/m,k=new Uint8Array(g.length+T),L=p(),U=0;U<T;U+=1){if(M=U*m,S=g.subarray(M,M+m),y)k.set(y(S,x,b),M+U);else{for(var N,F=L.length,O=[];N<F;N+=1)O[N]=L[N](S,x,b);var B=f(O.concat());k.set(O[B],M+U)}b=S}return k},r=function(g){var m=Array.apply([],g);return m.unshift(0),m},s=function(g,m){var x,y=[],S=g.length;y[0]=1;for(var b=0;b<S;b+=1)x=g[b-m]||0,y[b+1]=g[b]-x+256&255;return y},a=function(g,m,x){var y,S=[],b=g.length;S[0]=2;for(var M=0;M<b;M+=1)y=x&&x[M]||0,S[M+1]=g[M]-y+256&255;return S},o=function(g,m,x){var y,S,b=[],M=g.length;b[0]=3;for(var T=0;T<M;T+=1)y=g[T-m]||0,S=x&&x[T]||0,b[T+1]=g[T]+256-(y+S>>>1)&255;return b},l=function(g,m,x){var y,S,b,M,T=[],k=g.length;T[0]=4;for(var L=0;L<k;L+=1)y=g[L-m]||0,S=x&&x[L]||0,b=x&&x[L-m]||0,M=d(y,S,b),T[L+1]=g[L]-M+256&255;return T},d=function(g,m,x){if(g===m&&m===x)return g;var y=Math.abs(m-x),S=Math.abs(g-x),b=Math.abs(g+m-x-x);return y<=S&&y<=b?g:S<=b?m:x},p=function(){return[r,s,a,o,l]},f=function(g){var m=g.map(function(x){return x.reduce(function(y,S){return y+Math.abs(S)},0)});return m.indexOf(Math.min.apply(null,m))};i.processPNG=function(g,m,x,y){var S,b,M,T,k,L,U,N,F,O,B,P,V,$,K,ct=this.decode.FLATE_DECODE,ot="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(M=new OH(g)).imgData,b=M.bits,S=M.colorSpace,k=M.colors,[4,6].indexOf(M.colorType)!==-1){if(M.bits===8){F=(N=M.pixelBitlength==32?new Uint32Array(M.decodePixels().buffer):M.pixelBitlength==16?new Uint16Array(M.decodePixels().buffer):new Uint8Array(M.decodePixels().buffer)).length,B=new Uint8Array(F*M.colors),O=new Uint8Array(F);var st,Q=M.pixelBitlength-M.bits;for($=0,K=0;$<F;$++){for(V=N[$],st=0;st<Q;)B[K++]=V>>>st&255,st+=M.bits;O[$]=V>>>st&255}}if(M.bits===16){F=(N=new Uint32Array(M.decodePixels().buffer)).length,B=new Uint8Array(F*(32/M.pixelBitlength)*M.colors),O=new Uint8Array(F*(32/M.pixelBitlength)),P=M.colors>1,$=0,K=0;for(var xt=0;$<F;)V=N[$++],B[K++]=V>>>0&255,P&&(B[K++]=V>>>16&255,V=N[$++],B[K++]=V>>>0&255),O[xt++]=V>>>16&255;b=8}y!==i.image_compression.NONE&&e()?(g=t(B,M.width*M.colors,M.colors,y),U=t(O,M.width,1,y)):(g=B,U=O,ct=void 0)}if(M.colorType===3&&(S=this.color_spaces.INDEXED,L=M.palette,M.transparency.indexed)){var Mt=M.transparency.indexed,qt=0;for($=0,F=Mt.length;$<F;++$)qt+=Mt[$];if((qt/=255)===F-1&&Mt.indexOf(0)!==-1)T=[Mt.indexOf(0)];else if(qt!==F){for(N=M.decodePixels(),O=new Uint8Array(N.length),$=0,F=N.length;$<F;$++)O[$]=Mt[N[$]];U=t(O,M.width,1)}}var z=function(it){var Z;switch(it){case i.image_compression.FAST:Z=11;break;case i.image_compression.MEDIUM:Z=13;break;case i.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(y);return ct===this.decode.FLATE_DECODE&&(ot="/Predictor "+z+" "),ot+="/Colors "+k+" /BitsPerComponent "+b+" /Columns "+M.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(U&&this.__addimage__.isArrayBuffer(U)||this.__addimage__.isArrayBufferView(U))&&(U=this.__addimage__.arrayBufferToBinaryString(U)),{alias:x,data:g,index:m,filter:ct,decodeParameters:ot,transparency:T,palette:L,sMask:U,predictor:z,width:M.width,height:M.height,bitsPerComponent:b,colorSpace:S}}}})(cn.API),function(i){i.processGIF89A=function(e,t,n,r){var s=new NH(e),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var d={data:l,width:a,height:o},p=new SC(100).encode(d,100);return i.processJPEG.call(this,p,t,n,r)},i.processGIF87A=i.processGIF89A}(cn.API),Ga.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var e=0;e<i;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:n,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ga.prototype.parseBGR=function(){this.pos=this.offset;try{var i="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[i]()}catch(t){Ii.log("bit decode error:"+t)}},Ga.prototype.bit1=function(){var i,e=Math.ceil(this.width/8),t=e%4;for(i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,r=0;r<e;r++)for(var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*r*4,o=0;o<8&&8*r+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}t!==0&&(this.pos+=4-t)}},Ga.prototype.bit4=function(){for(var i=Math.ceil(this.width/2),e=i%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<i;r++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*r*4,o=s>>4,l=15&s,d=this.palette[o];if(this.data[a]=d.blue,this.data[a+1]=d.green,this.data[a+2]=d.red,this.data[a+3]=255,2*r+1>=this.width)break;d=this.palette[l],this.data[a+4]=d.blue,this.data[a+4+1]=d.green,this.data[a+4+2]=d.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Ga.prototype.bit8=function(){for(var i=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;if(r<this.palette.length){var a=this.palette[r];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}i!==0&&(this.pos+=4-i)}},Ga.prototype.bit15=function(){for(var i=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,d=s>>15?255:0,p=n*this.width*4+4*r;this.data[p]=l,this.data[p+1]=o,this.data[p+2]=a,this.data[p+3]=d}this.pos+=i}},Ga.prototype.bit16=function(){for(var i=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&t)/t*255|0,d=(a>>11)/e*255|0,p=r*this.width*4+4*s;this.data[p]=d,this.data[p+1]=l,this.data[p+2]=o,this.data[p+3]=255}this.pos+=i}},Ga.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=r,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},Ga.prototype.bit32=function(){for(var i=this.height-1;i>=0;i--)for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=r,this.data[o+2]=n,this.data[o+3]=a}},Ga.prototype.getData=function(){return this.data},function(i){i.processBMP=function(e,t,n,r){var s=new Ga(e,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},d=new SC(100).encode(l,100);return i.processJPEG.call(this,d,t,n,r)}}(cn.API),bP.prototype.getData=function(){return this.data},function(i){i.processWEBP=function(e,t,n,r){var s=new bP(e,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},d=new SC(100).encode(l,100);return i.processJPEG.call(this,d,t,n,r)}}(cn.API),cn.API.processRGBA=function(i,e,t){for(var n=i.data,r=n.length,s=new Uint8Array(r/4*3),a=new Uint8Array(r/4),o=0,l=0,d=0;d<r;d+=4){var p=n[d],f=n[d+1],g=n[d+2],m=n[d+3];s[o++]=p,s[o++]=f,s[o++]=g,a[l++]=m}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:x,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:i.width,height:i.height}},cn.API.setLanguage=function(i){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[i]!==void 0&&(this.internal.languageSettings.languageCode=i,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},bh=cn.API,V1=bh.getCharWidthsArray=function(i,e){var t,n,r=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:r.metadata.Unicode.widths,l=o.fof?o.fof:1,d=e.kerning?e.kerning:r.metadata.Unicode.kerning,p=d.fof?d.fof:1,f=e.doKerning!==!1,g=0,m=i.length,x=0,y=o[0]||l,S=[];for(t=0;t<m;t++)n=i.charCodeAt(t),typeof r.metadata.widthOfString=="function"?S.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(n))+a*(1e3/s)||0)/1e3):(g=f&&xi(d[n])==="object"&&!isNaN(parseInt(d[n][x],10))?d[n][x]/p:0,S.push((o[n]||y)/l+g)),x=n;return S},gP=bh.getStringUnitWidth=function(i,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return bh.processArabic&&(i=bh.processArabic(i)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(i,t,r)/t:V1.apply(this,arguments).reduce(function(s,a){return s+a},0)},_P=function(i,e,t,n){for(var r=[],s=0,a=i.length,o=0;s!==a&&o+e[s]<t;)o+=e[s],s++;r.push(i.slice(0,s));var l=s;for(o=0;s!==a;)o+e[s]>n&&(r.push(i.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&r.push(i.slice(l,s)),r},vP=function(i,e,t){t||(t={});var n,r,s,a,o,l,d,p=[],f=[p],g=t.textIndent||0,m=0,x=0,y=i.split(" "),S=V1.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?y[0].length+2:t.lineIndent||0){var b=Array(l).join(" "),M=[];y.map(function(k){(k=k.split(/\s*\n/)).length>1?M=M.concat(k.map(function(L,U){return(U&&L.length?`
`:"")+L})):M.push(k[0])}),y=M,l=gP.apply(this,[b,t])}for(s=0,a=y.length;s<a;s++){var T=0;if(n=y[s],l&&n[0]==`
`&&(n=n.substr(1),T=1),g+m+(x=(r=V1.apply(this,[n,t])).reduce(function(k,L){return k+L},0))>e||T){if(x>e){for(o=_P.apply(this,[n,r,e-(g+m),e]),p.push(o.shift()),p=[o.pop()];o.length;)f.push([o.shift()]);x=r.slice(n.length-(p[0]?p[0].length:0)).reduce(function(k,L){return k+L},0)}else p=[n];f.push(p),g=x+l,m=S}else p.push(n),g+=m+x,m=S}return d=l?function(k,L){return(L?b:"")+k.join(" ")}:function(k){return k.join(" ")},f.map(d)},bh.splitTextToSize=function(i,e,t){var n,r=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var f=this.internal.getFont(p.fontName,p.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(i)?i:String(i).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/r;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/r:0,s.lineIndent=t.lineIndent;var o,l,d=[];for(o=0,l=n.length;o<l;o++)d=d.concat(vP.apply(this,[n[o],a,s]));return d},function(i){i.__fontmetrics__=i.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},n={},r=0;r<e.length;r++)t[e[r]]="0123456789abcdef"[r],n["0123456789abcdef"[r]]=e[r];var s=function(f){return"0x"+parseInt(f,10).toString(16)},a=i.__fontmetrics__.compress=function(f){var g,m,x,y,S=["{"];for(var b in f){if(g=f[b],isNaN(parseInt(b,10))?m="'"+b+"'":(b=parseInt(b,10),m=(m=s(b).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof g=="number")g<0?(x=s(g).slice(3),y="-"):(x=s(g).slice(2),y=""),x=y+x.slice(0,-1)+n[x.slice(-1)];else{if(xi(g)!=="object")throw new Error("Don't know what to do with value type "+xi(g)+".");x=a(g)}S.push(m+x)}return S.push("}"),S.join("")},o=i.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,m,x,y,S={},b=1,M=S,T=[],k="",L="",U=f.length-1,N=1;N<U;N+=1)(y=f[N])=="'"?g?(x=g.join(""),g=void 0):g=[]:g?g.push(y):y=="{"?(T.push([M,x]),M={},x=void 0):y=="}"?((m=T.pop())[0][m[1]]=M,x=void 0,M=m[0]):y=="-"?b=-1:x===void 0?t.hasOwnProperty(y)?(k+=t[y],x=parseInt(k,16)*b,b=1,k=""):k+=y:t.hasOwnProperty(y)?(L+=t[y],M[x]=parseInt(L,16)*b,b=1,x=void 0,L=""):L+=y;return S},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},p={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};i.events.push(["addFont",function(f){var g=f.font,m=p.Unicode[g.postScriptName];m&&(g.metadata.Unicode={},g.metadata.Unicode.widths=m.widths,g.metadata.Unicode.kerning=m.kerning);var x=d.Unicode[g.postScriptName];x&&(g.metadata.Unicode.encoding=x,g.encoding=x.codePages[0])}])}(cn.API),function(i){var e=function(t){for(var n=t.length,r=new Uint8Array(n),s=0;s<n;s++)r[s]=t.charCodeAt(s);return r};i.API.events.push(["addFont",function(t){var n=void 0,r=t.font,s=t.instance;if(!r.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(n=s.existsFileInVFS(r.postScriptName)===!1?s.loadFile(r.postScriptName):s.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Sm(o)),a.metadata=i.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(r,n)}}])}(cn),function(i){function e(){return(dn.canvg?Promise.resolve(dn.canvg):import("./chunk-R6QUY4SU.js")).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}cn.API.addSvgAsImage=function(t,n,r,s,a,o,l,d){if(isNaN(n)||isNaN(r))throw Ii.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Ii.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=s,p.height=a;var f=p.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,p.width,p.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(x){return x.fromString(f,t,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(g)}).then(function(){m.addImage(p.toDataURL("image/jpeg",1),n,r,s,a,l,d)})}}(),cn.API.putTotalPages=function(i){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(i,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(i,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var r=0;r<this.internal.pages[n].length;r++)this.internal.pages[n][r]=this.internal.pages[n][r].replace(e,t);return this},cn.API.viewerPreferences=function(i,e){var t;i=i||{},e=e||!1;var n,r,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],d=0,p=0,f=0;function g(x,y){var S,b=!1;for(S=0;S<x.length;S+=1)x[S]===y&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,i==="reset"||e===!0){var m=o.length;for(f=0;f<m;f+=1)t[o[f]].value=t[o[f]].defaultValue,t[o[f]].explicitSet=!1}if(xi(i)==="object"){for(r in i)if(s=i[r],g(o,r)&&s!==void 0){if(t[r].type==="boolean"&&typeof s=="boolean")t[r].value=s;else if(t[r].type==="name"&&g(t[r].valueSet,s))t[r].value=s;else if(t[r].type==="integer"&&Number.isInteger(s))t[r].value=s;else if(t[r].type==="array"){for(d=0;d<s.length;d+=1)if(n=!0,s[d].length===1&&typeof s[d][0]=="number")l.push(String(s[d]-1));else if(s[d].length>1){for(p=0;p<s[d].length;p+=1)typeof s[d][p]!="number"&&(n=!1);n===!0&&l.push([s[d][0]-1,s[d][1]-1].join(" "))}t[r].value="["+l.join(" ")+"]"}else t[r].value=t[r].defaultValue;t[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,y=[];for(x in t)t[x].explicitSet===!0&&(t[x].type==="name"?y.push("/"+x+" /"+t[x].value):y.push("/"+x+" "+t[x].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(i){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+a.length+o.length+r.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(r+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};i.addMetadata=function(n,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(cn.API),function(i){var e=i.API,t=e.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,d=["","0","00","000","0000"],p=[""],f=0,g=s.length;f<g;++f){if(o=a.metadata.characterToGlyph(s.charCodeAt(f)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(f),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return p.join("");o=o.toString(16),p.push(d[4-o.length],o)}return p.join("")},n=function(s){var a,o,l,d,p,f,g;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,g=(o=Object.keys(s).sort(function(m,x){return m-x})).length;f<g;f++)a=o[f],l.length>=100&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(d=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+d+">"));return l.length&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,d=a.newObject,p=a.putStream;if(o.metadata instanceof i.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),m="",x=0;x<g.length;x++)m+=String.fromCharCode(g[x]);var y=d();p({data:m,addLength1:!0,objectId:y}),l("endobj");var S=d();p({data:n(o.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var b=d();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Sh(o.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+i.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var M=d();l("<<"),l("/Type /Font"),l("/BaseFont /"+Sh(o.fontName)),l("/FontDescriptor "+b+" 0 R"),l("/W "+i.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=d(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+S+" 0 R"),l("/BaseFont /"+Sh(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+M+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,d=a.newObject,p=a.putStream;if(o.metadata instanceof i.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,g="",m=0;m<f.length;m++)g+=String.fromCharCode(f[m]);var x=d();p({data:g,addLength1:!0,objectId:x}),l("endobj");var y=d();p({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var S=d();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+i.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Sh(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=d();for(var b=0;b<o.metadata.hmtx.widths.length;b++)o.metadata.hmtx.widths[b]=parseInt(o.metadata.hmtx.widths[b]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+Sh(o.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+i.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var r=function(s){var a,o=s.text||"",l=s.x,d=s.y,p=s.options||{},f=s.mutex||{},g=f.pdfEscape,m=f.activeFontKey,x=f.fonts,y=m,S="",b=0,M="",T=x[y].encoding;if(x[y].encoding!=="Identity-H")return{text:o,x:l,y:d,options:p,mutex:f};for(M=o,y=m,Array.isArray(o)&&(M=o[0]),b=0;b<M.length;b+=1)x[y].metadata.hasOwnProperty("cmap")&&(a=x[y].metadata.cmap.unicode.codeMap[M[b].charCodeAt(0)]),a||M[b].charCodeAt(0)<256&&x[y].metadata.hasOwnProperty("Unicode")?S+=M[b]:S+="";var k="";return parseInt(y.slice(1))<14||T==="WinAnsiEncoding"?k=g(S,y).split("").map(function(L){return L.charCodeAt(0).toString(16)}).join(""):T==="Identity-H"&&(k=t(S,x[y])),f.isHex=!0,{text:k,x:l,y:d,options:p,mutex:f}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var d=0;for(d=0;d<a.length;d+=1)Array.isArray(a[d])&&a[d].length===3?o.push([r(Object.assign({},l,{text:a[d][0]})).text,a[d][1],a[d][2]]):o.push(r(Object.assign({},l,{text:a[d]})).text);s.text=o}else s.text=r(Object.assign({},l,{text:a})).text}])}(cn),function(i){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};i.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},i.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},i.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(cn.API),function(i){i.__bidiEngine__=i.prototype.__bidiEngine__=function(n){var r,s,a,o,l,d,p,f=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),M=!1,T=0;this.__bidiEngine__={};var k=function(P){var V=P.charCodeAt(),$=V>>8,K=y[$];return K!==void 0?f[256*K+(255&V)]:$===252||$===253?"AL":b.test($)?"L":$===8?"R":"N"},L=function(P){for(var V,$=0;$<P.length;$++){if((V=k(P.charAt($)))==="L")return!1;if(V==="R")return!0}return!1},U=function(P,V,$,K){var ct,ot,st,Q,xt=V[K];switch(xt){case"L":case"R":M=!1;break;case"N":case"AN":break;case"EN":M&&(xt="AN");break;case"AL":M=!0,xt="R";break;case"WS":xt="N";break;case"CS":K<1||K+1>=V.length||(ct=$[K-1])!=="EN"&&ct!=="AN"||(ot=V[K+1])!=="EN"&&ot!=="AN"?xt="N":M&&(ot="AN"),xt=ot===ct?ot:"N";break;case"ES":xt=(ct=K>0?$[K-1]:"B")==="EN"&&K+1<V.length&&V[K+1]==="EN"?"EN":"N";break;case"ET":if(K>0&&$[K-1]==="EN"){xt="EN";break}if(M){xt="N";break}for(st=K+1,Q=V.length;st<Q&&V[st]==="ET";)st++;xt=st<Q&&V[st]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(Q=V.length,st=K+1;st<Q&&V[st]==="NSM";)st++;if(st<Q){var Mt=P[K],qt=Mt>=1425&&Mt<=2303||Mt===64286;if(ct=V[st],qt&&(ct==="R"||ct==="AL")){xt="R";break}}}xt=K<1||(ct=V[K-1])==="B"?"N":$[K-1];break;case"B":M=!1,r=!0,xt=T;break;case"S":s=!0,xt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":M=!1;break;case"BN":xt="N"}return xt},N=function(P,V,$){var K=P.split("");return $&&F(K,$,{hiLevel:T}),K.reverse(),V&&V.reverse(),K.join("")},F=function(P,V,$){var K,ct,ot,st,Q,xt=-1,Mt=P.length,qt=0,z=[],it=T?m:g,Z=[];for(M=!1,r=!1,s=!1,ct=0;ct<Mt;ct++)Z[ct]=k(P[ct]);for(ot=0;ot<Mt;ot++){if(Q=qt,z[ot]=U(P,Z,z,ot),K=240&(qt=it[Q][x[z[ot]]]),qt&=15,V[ot]=st=it[qt][5],K>0)if(K===16){for(ct=xt;ct<ot;ct++)V[ct]=1;xt=-1}else xt=-1;if(it[qt][6])xt===-1&&(xt=ot);else if(xt>-1){for(ct=xt;ct<ot;ct++)V[ct]=st;xt=-1}Z[ot]==="B"&&(V[ot]=0),$.hiLevel|=st}s&&function(at,pt,ft){for(var St=0;St<ft;St++)if(at[St]==="S"){pt[St]=T;for(var kt=St-1;kt>=0&&at[kt]==="WS";kt--)pt[kt]=T}}(Z,V,Mt)},O=function(P,V,$,K,ct){if(!(ct.hiLevel<P)){if(P===1&&T===1&&!r)return V.reverse(),void($&&$.reverse());for(var ot,st,Q,xt,Mt=V.length,qt=0;qt<Mt;){if(K[qt]>=P){for(Q=qt+1;Q<Mt&&K[Q]>=P;)Q++;for(xt=qt,st=Q-1;xt<st;xt++,st--)ot=V[xt],V[xt]=V[st],V[st]=ot,$&&(ot=$[xt],$[xt]=$[st],$[st]=ot);qt=Q}qt++}}},B=function(P,V,$){var K=P.split(""),ct={hiLevel:T};return $||($=[]),F(K,$,ct),function(ot,st,Q){if(Q.hiLevel!==0&&p)for(var xt,Mt=0;Mt<ot.length;Mt++)st[Mt]===1&&(xt=S.indexOf(ot[Mt]))>=0&&(ot[Mt]=S[xt+1])}(K,$,ct),O(2,K,V,$,ct),O(1,K,V,$,ct),K.join("")};return this.__bidiEngine__.doBidiReorder=function(P,V,$){if(function(ct,ot){if(ot)for(var st=0;st<ct.length;st++)ot[st]=st;o===void 0&&(o=L(ct)),d===void 0&&(d=L(ct))}(P,V),a||!l||d)if(a&&l&&o^d)T=o?1:0,P=N(P,V,$);else if(!a&&l&&d)T=o?1:0,P=B(P,V,$),P=N(P,V);else if(!a||o||l||d){if(a&&!l&&o^d)P=N(P,V),o?(T=0,P=B(P,V,$)):(T=1,P=B(P,V,$),P=N(P,V));else if(a&&o&&!l&&d)T=1,P=B(P,V,$),P=N(P,V);else if(!a&&!l&&o^d){var K=p;o?(T=1,P=B(P,V,$),T=0,p=!1,P=B(P,V,$),p=K):(T=0,P=B(P,V,$),P=N(P,V),T=1,p=!1,P=B(P,V,$),p=K,P=N(P,V))}}else T=0,P=B(P,V,$);else T=o?1:0,P=B(P,V,$);return P},this.__bidiEngine__.setOptions=function(P){P&&(a=P.isInputVisual,l=P.isOutputVisual,o=P.isInputRtl,d=P.isOutputRtl,p=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new i.__bidiEngine__({isInputVisual:!0});i.API.events.push(["postProcessText",function(n){var r=n.text,s=(n.x,n.y,n.options||{}),a=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(r)==="[object Array]"){var o=0;for(a=[],o=0;o<r.length;o+=1)Object.prototype.toString.call(r[o])==="[object Array]"?a.push([t.doBidiReorder(r[o][0]),r[o][1],r[o][2]]):a.push([t.doBidiReorder(r[o])]);n.text=a}else n.text=t.doBidiReorder(r);t.setOptions({isInputVisual:!0})}])}(cn),cn.API.TTFFont=function(){function i(e){var t;if(this.rawData=e,t=this.contents=new bc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new ZH(this),this.registerTTF()}return i.open=function(e){return new i(e)},i.prototype.parse=function(){return this.directory=new FH(this.contents),this.head=new VH(this),this.name=new WH(this),this.cmap=new PP(this),this.toUnicode={},this.hhea=new UH(this),this.maxp=new GH(this),this.hmtx=new qH(this),this.post=new jH(this),this.os2=new zH(this),this.loca=new KH(this),this.glyf=new XH(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},i.prototype.registerTTF=function(){var e,t,n,r,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,d;for(d=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),32768&(t=r>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},i.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},i.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},i.prototype.widthOfString=function(e,t,n){var r,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)r=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return a*(t/1e3)},i.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},i}();var Xa,bc=function(){function i(e){this.data=e??[],this.pos=0,this.length=this.data.length}return i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(e){return this.data[this.pos++]=e},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},i.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},i.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},i.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},i.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(e){return this.writeInt16(e)},i.prototype.readLongLong=function(){var e,t,n,r,s,a,o,l;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*s+65536*a+256*o+l},i.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(e){return this.writeInt32(e)},i.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},i.prototype.write=function(e){var t,n,r,s;for(s=[],n=0,r=e.length;n<r;n++)t=e[n],s.push(this.writeByte(t));return s},i}(),FH=function(){var i;function e(t){var n,r,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},r=0,s=this.tableCount;0<=s?r<s:r>s;r=0<=s?++r:--r)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,r,s,a,o,l,d,p,f,g,m,x,y;for(y in m=Object.keys(t).length,l=Math.log(2),f=16*Math.floor(Math.log(m)/l),a=Math.floor(f/l),p=16*m-f,(r=new bc).writeInt(this.scalarType),r.writeShort(m),r.writeShort(f),r.writeShort(a),r.writeShort(p),s=16*m,d=r.pos+s,o=null,x=[],t)for(g=t[y],r.writeString(y),r.writeInt(i(g)),r.writeInt(d),r.writeInt(g.length),x=x.concat(g),y==="head"&&(o=d),d+=g.length;d%4;)x.push(0),d++;return r.write(x),n=2981146554-i(r.data),r.pos=o+8,r.writeUInt32(n),r.data},i=function(t){var n,r,s,a;for(t=RP.call(t);t.length%4;)t.push(0);for(s=new bc(t),r=0,n=0,a=t.length;n<a;n=n+=4)r+=s.readUInt32();return 4294967295&r},e}(),BH={}.hasOwnProperty,yo=function(i,e){for(var t in e)BH.call(e,t)&&(i[t]=e[t]);function n(){this.constructor=i}return n.prototype=e.prototype,i.prototype=new n,i.__super__=e.prototype,i};Xa=function(){function i(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return i.prototype.parse=function(){},i.prototype.encode=function(){},i.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},i}();var VH=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return yo(e,Xa),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new bc).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),yP=function(){function i(e,t){var n,r,s,a,o,l,d,p,f,g,m,x,y,S,b,M,T;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),g=m/2,e.pos+=6,s=function(){var k,L;for(L=[],l=k=0;0<=g?k<g:k>g;l=0<=g?++k:--k)L.push(e.readUInt16());return L}(),e.pos+=2,y=function(){var k,L;for(L=[],l=k=0;0<=g?k<g:k>g;l=0<=g?++k:--k)L.push(e.readUInt16());return L}(),d=function(){var k,L;for(L=[],l=k=0;0<=g?k<g:k>g;l=0<=g?++k:--k)L.push(e.readUInt16());return L}(),p=function(){var k,L;for(L=[],l=k=0;0<=g?k<g:k>g;l=0<=g?++k:--k)L.push(e.readUInt16());return L}(),r=(this.length-e.pos+this.offset)/2,o=function(){var k,L;for(L=[],l=k=0;0<=r?k<r:k>r;l=0<=r?++k:--k)L.push(e.readUInt16());return L}(),l=b=0,T=s.length;b<T;l=++b)for(S=s[l],n=M=x=y[l];x<=S?M<=S:M>=S;n=x<=S?++M:--M)p[l]===0?a=n+d[l]:(a=o[p[l]/2+(n-x)-(g-l)]||0)!==0&&(a+=d[l]),this.codeMap[n]=65535&a}e.pos=f}return i.encode=function(e,t){var n,r,s,a,o,l,d,p,f,g,m,x,y,S,b,M,T,k,L,U,N,F,O,B,P,V,$,K,ct,ot,st,Q,xt,Mt,qt,z,it,Z,at,pt,ft,St,kt,Qt,ne,ue;switch(K=new bc,a=Object.keys(e).sort(function(_e,mt){return _e-mt}),t){case"macroman":for(y=0,S=function(){var _e=[];for(x=0;x<256;++x)_e.push(0);return _e}(),M={0:0},s={},ct=0,xt=a.length;ct<xt;ct++)M[kt=e[r=a[ct]]]==null&&(M[kt]=++y),s[r]={old:e[r],new:M[e[r]]},S[r]=M[e[r]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(S),{charMap:s,subtable:K.data,maxGlyphID:y+1};case"unicode":for(V=[],f=[],T=0,M={},n={},b=d=null,ot=0,Mt=a.length;ot<Mt;ot++)M[L=e[r=a[ot]]]==null&&(M[L]=++T),n[r]={old:L,new:M[L]},o=M[L]-r,b!=null&&o===d||(b&&f.push(b),V.push(r),d=o),b=r;for(b&&f.push(b),f.push(65535),V.push(65535),B=2*(O=V.length),F=2*Math.pow(Math.log(O)/Math.LN2,2),g=Math.log(F/2)/Math.LN2,N=2*O-F,l=[],U=[],m=[],x=st=0,qt=V.length;st<qt;x=++st){if(P=V[x],p=f[x],P===65535){l.push(0),U.push(0);break}if(P-($=n[P].new)>=32768)for(l.push(0),U.push(2*(m.length+O-x)),r=Q=P;P<=p?Q<=p:Q>=p;r=P<=p?++Q:--Q)m.push(n[r].new);else l.push($-P),U.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*O+2*m.length),K.writeUInt16(0),K.writeUInt16(B),K.writeUInt16(F),K.writeUInt16(g),K.writeUInt16(N),ft=0,z=f.length;ft<z;ft++)r=f[ft],K.writeUInt16(r);for(K.writeUInt16(0),St=0,it=V.length;St<it;St++)r=V[St],K.writeUInt16(r);for(Qt=0,Z=l.length;Qt<Z;Qt++)o=l[Qt],K.writeUInt16(o);for(ne=0,at=U.length;ne<at;ne++)k=U[ne],K.writeUInt16(k);for(ue=0,pt=m.length;ue<pt;ue++)y=m[ue],K.writeUInt16(y);return{charMap:n,subtable:K.data,maxGlyphID:T+1}}},i}(),PP=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return yo(e,Xa),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,r,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)n=new yP(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var r,s;return n==null&&(n="macroman"),r=yP.encode(t,n),(s=new bc).writeUInt16(0),s.writeUInt16(1),r.table=s.data.concat(r.subtable),r},e}(),UH=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return yo(e,Xa),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),zH=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return yo(e,Xa),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(t.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),jH=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return yo(e,Xa),e.prototype.tag="post",e.prototype.parse=function(t){var n,r,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(r=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)n=t.readByte(),s.push(this.names.push(t.readString(n)));return s;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 196608:break;case 262144:return this.map=(function(){var o,l,d;for(d=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)d.push(t.readUInt32());return d}).call(this)}},e}(),HH=function(i,e){this.raw=i,this.length=i.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},WH=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return yo(e,Xa),e.prototype.tag="name",e.prototype.parse=function(t){var n,r,s,a,o,l,d,p,f,g,m;for(t.pos=this.offset,t.readShort(),n=t.readShort(),l=t.readShort(),r=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(d={},a=f=0,g=r.length;f<g;a=++f)s=r[a],t.pos=s.offset,p=t.readString(s.length),o=new HH(p,s),d[m=s.nameID]==null&&(d[m]=[]),d[s.nameID].push(o);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),GH=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return yo(e,Xa),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),qH=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return yo(e,Xa),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,r,s,a,o,l,d;for(t.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,f;for(f=[],n=p=0;0<=s?p<s:p>s;n=0<=s?++p:--p)f.push(t.readInt16());return f}(),this.widths=(function(){var p,f,g,m;for(m=[],p=0,f=(g=this.metrics).length;p<f;p++)a=g[p],m.push(a.advance);return m}).call(this),r=this.widths[this.widths.length-1],d=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)d.push(this.widths.push(r));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),RP=[].slice,XH=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return yo(e,Xa),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,r,s,a,o,l,d,p,f,g;return t in this.cache?this.cache[t]:(a=this.file.loca,n=this.file.contents,r=a.indexOf(t),(s=a.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+r,o=(l=new bc(n.read(s))).readShort(),p=l.readShort(),g=l.readShort(),d=l.readShort(),f=l.readShort(),this.cache[t]=o===-1?new $H(l,p,g,d,f):new YH(l,o,p,g,d,f),this.cache[t]))},e.prototype.encode=function(t,n,r){var s,a,o,l,d;for(o=[],a=[],l=0,d=n.length;l<d;l++)s=t[n[l]],a.push(o.length),s&&(o=o.concat(s.encode(r)));return a.push(o.length),{table:o,offsets:a}},e}(),YH=function(){function i(e,t,n,r,s,a){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=a,this.compound=!1}return i.prototype.encode=function(){return this.raw.data},i}(),$H=function(){function i(e,t,n,r,s){var a,o;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return i.prototype.encode=function(){var e,t,n;for(t=new bc(RP.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},i}(),KH=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return yo(e,Xa),e.prototype.tag="loca",e.prototype.parse=function(t){var n,r;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,a;for(a=[],r=0,s=this.length;r<s;r+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],r=0,s=this.length;r<s;r+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var r=new Uint32Array(this.offsets.length),s=0,a=0,o=0;o<r.length;++o)if(r[o]=s,a<n.length&&n[a]==o){++a,r[o]=s;var l=this.offsets[o],d=this.offsets[o+1]-l;d>0&&(s+=d)}for(var p=new Array(4*r.length),f=0;f<r.length;++f)p[4*f+3]=255&r[f],p[4*f+2]=(65280&r[f])>>8,p[4*f+1]=(16711680&r[f])>>16,p[4*f]=(4278190080&r[f])>>24;return p},e}(),ZH=function(){function i(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return i.prototype.generateCmap=function(){var e,t,n,r,s;for(t in r=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[t],e[t]=r[n];return e},i.prototype.glyphsFor=function(e){var t,n,r,s,a,o,l;for(r={},a=0,o=e.length;a<o;a++)r[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],r)(n=r[s])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(s in l=this.glyphsFor(t))n=l[s],r[s]=n;return r},i.prototype.encode=function(e,t){var n,r,s,a,o,l,d,p,f,g,m,x,y,S,b;for(r in n=PP.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),m={0:0},b=n.charMap)m[(l=b[r]).old]=l.new;for(x in g=n.maxGlyphID,a)x in m||(m[x]=g++);return p=function(M){var T,k;for(T in k={},M)k[M[T]]=T;return k}(m),f=Object.keys(p).sort(function(M,T){return M-T}),y=function(){var M,T,k;for(k=[],M=0,T=f.length;M<T;M++)o=f[M],k.push(p[o]);return k}(),s=this.font.glyf.encode(a,y,m),d=this.font.loca.encode(s.offsets,y),S={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},i}();cn.API.PDFObject=function(){var i;function e(){}return i=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,r,s,a;if(Array.isArray(t))return"["+function(){var o,l,d;for(d=[],o=0,l=t.length;o<l;o++)n=t[o],d.push(e.convert(n));return d}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+i(t.getUTCFullYear(),4)+i(t.getUTCMonth(),2)+i(t.getUTCDate(),2)+i(t.getUTCHours(),2)+i(t.getUTCMinutes(),2)+i(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(r in s=["<<"],t)a=t[r],s.push("/"+r+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+t},e}();var LP=cn;var OP=cL(dL());var X1=class i{barChartData={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Cost (\u20B9)",data:[25e4,22e4,2e5,3e5,28e4,26e4,32e4,31e4,29e4,27e4,25e4,24e4],backgroundColor:"#FF6384",barThickness:30,yAxisID:"y"},{label:"Leads",data:[100,120,150,180,130,160,200,190,170,140,150,130],backgroundColor:"#36A2EB",barThickness:30,yAxisID:"y1"},{label:"Conversions",data:[70,80,90,100,85,95,110,105,95,85,90,80],backgroundColor:"#FFCE56",barThickness:30,yAxisID:"y"}]};barChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:e=>`${e.dataset.label}: ${e.raw}`}}},scales:{x:{beginAtZero:!0,title:{display:!0,text:"Months"}},y:{beginAtZero:!0,type:"linear",display:!0,position:"left",ticks:{callback:e=>`${e.toLocaleString()}`,maxTicksLimit:5},title:{display:!0,text:"Leads & Conversions"}},y1:{beginAtZero:!0,type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},ticks:{callback:e=>`\u20B9${e.toLocaleString()}`,maxTicksLimit:5},title:{display:!0,text:"Cost (\u20B9)"}}}};barChartPlugins=[{id:"insideDataPlugin",afterDatasetsDraw(e){let t=e.ctx;e.data.datasets.forEach((r,s)=>{e.getDatasetMeta(s).data.forEach((o,l)=>{let p=r.data[l].toLocaleString(),f=o.x,g=o.y;t.save(),t.fillStyle="white",t.font="12px Arial",t.textAlign="center",t.textBaseline="middle",t.translate(f,g),t.rotate(-Math.PI/2),t.fillText(p,0,0),t.resetTransform(),t.restore()})})}}];static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Ve({type:i,selectors:[["app-marketing-bar-chart"]],decls:2,vars:5,consts:[[2,"width","100%","height","400px"],["baseChart","",3,"datasets","labels","options","type","plugins"]],template:function(t,n){t&1&&(c(0,"div",0),Rt(1,"canvas",1),u()),t&2&&(_(),D("datasets",n.barChartData.datasets)("labels",n.barChartData.labels)("options",n.barChartOptions)("type","bar")("plugins",n.barChartPlugins))},dependencies:[CI],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}"]})};var QH=i=>({"full-width":i}),Th=i=>({show:i}),tW=i=>({"active-module":i});function eW(i,e){if(i&1&&(c(0,"option",26),h(1),u()),i&2){let t=e.$implicit;D("value",t),_(),A(t)}}function nW(i,e){if(i&1){let t=Ft();c(0,"li",27),lt("click",function(){let r=G(t).$implicit,s=I();return q(s.selectModule(r))}),h(1),u()}if(i&2){let t=e.$implicit,n=I();D("ngClass",te(2,tW,t===n.selectedModule)),_(),de(" ",t," ")}}function iW(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),u(),c(4,"td",42),h(5),u(),c(6,"td",43),h(7),u(),c(8,"td",43),h(9),u(),c(10,"td",43),h(11),Et(12,"date"),u(),c(13,"td",43),h(14),Et(15,"date"),u(),c(16,"td",43),h(17),u(),c(18,"td",42),h(19),u(),c(20,"td",42),h(21),u()(),c(22,"tr")(23,"td",44),h(24),u(),c(25,"td",44),h(26),u(),c(27,"td",44),h(28),Et(29,"date"),u(),c(30,"td",44),h(31),Et(32,"date"),u(),c(33,"td",44),h(34),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.cont_Task_name),_(2),A(t.cont_goal_quantity),_(2),A(t.cont_goal_quality),_(2),A(At(12,14,t.cont_goal_start_date,"d MMM")),_(3),A(At(15,17,t.cont_goal_end_date,"d MMM")),_(3),A(t.cont_goal_no_of_days),_(2),A(t.cont_status),_(2),A(t.cont_assigned_to),_(3),A(t.cont_actual_quantity),_(2),A(t.cont_actual_quality),_(2),A(At(29,20,t.cont_actual_start_date,"d MMM")),_(3),A(At(32,23,t.cont_actual_end_date,"d MMM")),_(3),A(t.cont_actual_no_of_days)}}function rW(i,e){if(i&1&&(pe(0),rt(1,iW,35,26,"ng-container",41),fe()),i&2){let t=I(2);_(),D("ngForOf",t.filtered_content)}}function sW(i,e){i&1&&(c(0,"tr")(1,"td",45),h(2,"No task found"),u()())}function aW(i,e){if(i&1){let t=Ft();c(0,"div",28)(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"p"),h(6,"Slect From and To date"),u()(),c(7,"div",19)(8,"div",29)(9,"div",30)(10,"label",31),h(11,"From date"),u(),c(12,"input",32),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.startDate_content,r)||(s.startDate_content=r),q(r)}),u()(),c(13,"div",30)(14,"label",31),h(15,"To date"),u(),c(16,"input",33),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.endDate_content,r)||(s.endDate_content=r),q(r)}),u()()()(),c(17,"div",21)(18,"button",22),lt("click",function(){G(t);let r=I();return q(r.filterByDate_content())}),h(19,"Filter"),u(),c(20,"button",22),lt("click",function(){G(t);let r=I();return q(r.reset_filter_content())}),h(21,"Reset"),u()()()()(),c(22,"button",20),lt("click",function(){G(t);let r=I();return q(r.openModal())}),h(23,"Download"),u(),c(24,"button",34),lt("click",function(){G(t);let r=I();return q(r.filter_card_open())}),h(25,"Filter"),u(),c(26,"div",35)(27,"table",36)(28,"thead")(29,"tr")(30,"th",37),h(31,"Content Tracker (Content Creations)"),u()(),c(32,"tr",38)(33,"th"),h(34,"S.No"),u(),c(35,"th"),h(36,"Tasks"),u(),c(37,"th",39),h(38,"Quantity"),u(),c(39,"th",39),h(40,"Quality"),u(),c(41,"th",39),h(42,"Start Date"),u(),c(43,"th",39),h(44,"End Date"),u(),c(45,"th",39),h(46,"No of Days"),u(),c(47,"th"),h(48,"Status"),u(),c(49,"th"),h(50,"Assigned To"),u()()(),c(51,"tbody"),rt(52,rW,2,1,"ng-container",40),u(),rt(53,sW,3,0,"ng-template",null,0,De),u()()()}if(i&2){let t=an(54),n=I();_(),ed("display",n.filter_card_marketing?"block":"none"),D("ngClass",te(7,Th,n.filter_card_marketing)),_(11),gt("ngModel",n.startDate_content),_(4),gt("ngModel",n.endDate_content),_(36),D("ngIf",n.filtered_content&&n.filtered_content.length>0)("ngIfElse",t)}}function oW(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),u(),c(4,"td",42),h(5),u(),c(6,"td",43),h(7),u(),c(8,"td",43),h(9),u(),c(10,"td",43),h(11),u(),c(12,"td",43),h(13),Et(14,"date"),u(),c(15,"td",43),h(16),Et(17,"date"),u(),c(18,"td",43),h(19),u(),c(20,"td",42),h(21),u(),c(22,"td",42),h(23),u()(),c(24,"tr")(25,"td",44),h(26),u(),c(27,"td",44),h(28),u(),c(29,"td",44),h(30),u(),c(31,"td",44),h(32),Et(33,"date"),u(),c(34,"td",44),h(35),Et(36,"date"),u(),c(37,"td",44),h(38),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Col_Task_name),_(2),A(t.Col_goal_quantity),_(2),A(t.Col_goal_quality),_(2),A(t.Cal_goal_cost),_(2),A(At(14,16,t.Col_goal_start_date,"d MMM")),_(3),A(At(17,19,t.Col_goal_end_date,"d MMM")),_(3),A(t.Col_goal_no_of_days),_(2),A(t.Col_status),_(2),A(t.Col_assigned_to),_(3),A(t.Col_actual_quantity),_(2),A(t.Col_actual_quality),_(2),A(t.Cal_actual_cost),_(2),A(At(33,22,t.Col_actual_start_date,"d MMM")),_(3),A(At(36,25,t.Col_actual_end_date,"d MMM")),_(3),A(t.Col_actual_no_of_days)}}function lW(i,e){if(i&1&&(pe(0),rt(1,oW,39,28,"ng-container",41),fe()),i&2){let t=I(2);_(),D("ngForOf",t.filtered_collateral)}}function cW(i,e){i&1&&(c(0,"tr")(1,"td",45),h(2,"No task found"),u()())}function dW(i,e){if(i&1){let t=Ft();c(0,"div",28)(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"p"),h(6,"Slect From and To date"),u()(),c(7,"div",19)(8,"div",29)(9,"div",30)(10,"label",31),h(11,"From date"),u(),c(12,"input",32),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.startDate_collateral,r)||(s.startDate_collateral=r),q(r)}),u()(),c(13,"div",30)(14,"label",31),h(15,"To date"),u(),c(16,"input",33),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.endDate_collateral,r)||(s.endDate_collateral=r),q(r)}),u()()()(),c(17,"div",21)(18,"button",22),lt("click",function(){G(t);let r=I();return q(r.filterByDate_collateral())}),h(19,"Filter"),u(),c(20,"button",22),lt("click",function(){G(t);let r=I();return q(r.reset_filter_collateral())}),h(21,"Reset"),u()()()()(),c(22,"button",20),lt("click",function(){G(t);let r=I();return q(r.openModal())}),h(23,"Download"),u(),c(24,"button",34),lt("click",function(){G(t);let r=I();return q(r.filter_card_open())}),h(25,"Filter"),u(),c(26,"div",35)(27,"table",36)(28,"thead")(29,"tr")(30,"th",46),h(31,"Collateral Tracker (Collateral Designs & Video Making)"),u()(),c(32,"tr",38)(33,"th"),h(34,"S.No"),u(),c(35,"th"),h(36,"Tasks"),u(),c(37,"th",39),h(38,"Quantity"),u(),c(39,"th",39),h(40,"Quality"),u(),c(41,"th",39),h(42,"Cost"),u(),c(43,"th",39),h(44,"Start Date"),u(),c(45,"th",39),h(46,"End Date"),u(),c(47,"th",39),h(48,"No of Days"),u(),c(49,"th"),h(50,"Status"),u(),c(51,"th"),h(52,"Assigned To"),u()()(),c(53,"tbody"),rt(54,lW,2,1,"ng-container",40),u(),rt(55,cW,3,0,"ng-template",null,0,De),u()()()}if(i&2){let t=an(56),n=I();_(),ed("display",n.filter_card_marketing?"block":"none"),D("ngClass",te(7,Th,n.filter_card_marketing)),_(11),gt("ngModel",n.startDate_collateral),_(4),gt("ngModel",n.endDate_collateral),_(38),D("ngIf",n.filtered_collateral&&n.filtered_collateral.length>0)("ngIfElse",t)}}function uW(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),u(),c(4,"td",42),h(5),u(),c(6,"td",43),h(7),u(),c(8,"td",43),h(9),u(),c(10,"td",43),h(11),Et(12,"date"),u(),c(13,"td",43),h(14),Et(15,"date"),u(),c(16,"td",43),h(17),u(),c(18,"td",42),h(19),u(),c(20,"td",42),h(21),u()(),c(22,"tr")(23,"td",44),h(24),u(),c(25,"td",44),h(26),u(),c(27,"td",44),h(28),Et(29,"date"),u(),c(30,"td",44),h(31),Et(32,"date"),u(),c(33,"td",44),h(34),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Cal_Task_name),_(2),A(t.Cal_goal_quantity),_(2),A(t.Cal_goal_cost),_(2),A(At(12,14,t.Cal_goal_start_date,"d MMM")),_(3),A(At(15,17,t.Cal_goal_end_date,"d MMM")),_(3),A(t.Cal_goal_Frequency),_(2),A(t.Cal_status),_(2),A(t.Cal_assigned_to),_(3),A(t.Cal_actual_quantity),_(2),A(t.Cal_actual_cost),_(2),A(At(29,20,t.Cal_actual_start_date,"d MMM")),_(3),A(At(32,23,t.Cal_actual_end_date,"d MMM")),_(3),A(t.Cal_actual_Frequency)}}function hW(i,e){if(i&1&&(pe(0),rt(1,uW,35,26,"ng-container",41),fe()),i&2){let t=I(2);_(),D("ngForOf",t.filtered_calender)}}function pW(i,e){if(i&1&&(c(0,"tbody")(1,"tr")(2,"td",47),h(3,"Total Cost"),u(),c(4,"td",48),h(5),u(),Rt(6,"td",49),u(),c(7,"tr")(8,"td",50),h(9),u()()()),i&2){let t=I(2);_(5),A(t.Total_Goal_Cost),_(4),A(t.Total_Actual_Cost)}}function fW(i,e){i&1&&(c(0,"tr")(1,"td",45),h(2,"No task found"),u()())}function mW(i,e){if(i&1){let t=Ft();c(0,"div",28)(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"p"),h(6,"Slect From and To date"),u()(),c(7,"div",19)(8,"div",29)(9,"div",30)(10,"label",31),h(11,"From date"),u(),c(12,"input",32),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.startDate_calender,r)||(s.startDate_calender=r),q(r)}),u()(),c(13,"div",30)(14,"label",31),h(15,"To date"),u(),c(16,"input",33),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.endDate_calender,r)||(s.endDate_calender=r),q(r)}),u()()()(),c(17,"div",21)(18,"button",22),lt("click",function(){G(t);let r=I();return q(r.filterByDate_calender())}),h(19,"Filter"),u(),c(20,"button",22),lt("click",function(){G(t);let r=I();return q(r.reset_filter_calender())}),h(21,"Reset"),u()()()()(),c(22,"button",20),lt("click",function(){G(t);let r=I();return q(r.openModal())}),h(23,"Download"),u(),c(24,"button",34),lt("click",function(){G(t);let r=I();return q(r.filter_card_open())}),h(25,"Filter"),u(),c(26,"div",35)(27,"table",36)(28,"thead")(29,"tr")(30,"th",46),h(31,"Marketing Calender (Online & Offline Activites)"),u()(),c(32,"tr",38)(33,"th"),h(34,"S.No"),u(),c(35,"th"),h(36,"Tasks"),u(),c(37,"th",39),h(38,"Quantity"),u(),c(39,"th",39),h(40,"Cost"),u(),c(41,"th",39),h(42,"Start Date"),u(),c(43,"th",39),h(44,"End Date"),u(),c(45,"th",39),h(46,"Frequency"),u(),c(47,"th"),h(48,"Status"),u(),c(49,"th"),h(50,"Assigned To"),u()()(),c(51,"tbody"),rt(52,hW,2,1,"ng-container",40),u(),rt(53,pW,10,2,"tbody",25)(54,fW,3,0,"ng-template",null,0,De),u()()()}if(i&2){let t=an(55),n=I();_(),ed("display",n.filter_card_marketing?"block":"none"),D("ngClass",te(8,Th,n.filter_card_marketing)),_(11),gt("ngModel",n.startDate_calender),_(4),gt("ngModel",n.endDate_calender),_(36),D("ngIf",n.filtered_calender&&n.filtered_calender.length>0)("ngIfElse",t),_(),D("ngIf",n.get_marketing_calender&&n.get_marketing_calender.length>0)}}function gW(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),u(),c(4,"td",42),h(5),u(),c(6,"td",43),h(7),u(),c(8,"td",43),h(9),u(),c(10,"td",43),h(11),u(),c(12,"td",43),h(13),Et(14,"date"),u(),c(15,"td",43),h(16),Et(17,"date"),u(),c(18,"td",42),h(19),u()(),c(20,"tr")(21,"td",44),h(22),u(),c(23,"td",44),h(24),u(),c(25,"td",44),h(26),u(),c(27,"td",44),h(28),Et(29,"date"),u(),c(30,"td",44),h(31),Et(32,"date"),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Eng_Task_name),_(2),A(t.Eng_goal_like),_(2),A(t.Eng_goal_followers),_(2),A(t.Eng_goal_Views),_(2),A(At(14,13,t.Eng_goal_start_date,"d MMM")),_(3),A(At(17,16,t.Eng_goal_end_date,"d MMM")),_(3),A(t.Eng_status),_(3),A(t.Eng_actual_like),_(2),A(t.Eng_actual_followers),_(2),A(t.Eng_actual_Views),_(2),A(At(29,19,t.Eng_actual_start_date,"d MMM")),_(3),A(At(32,22,t.Eng_actual_end_date,"d MMM"))}}function _W(i,e){if(i&1&&(pe(0),rt(1,gW,33,25,"ng-container",41),fe()),i&2){let t=I(2);_(),D("ngForOf",t.filtered_engagement)}}function vW(i,e){i&1&&(c(0,"tr")(1,"td",51),h(2,"No task found"),u()())}function xW(i,e){if(i&1){let t=Ft();c(0,"div",28)(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"p"),h(6,"Slect From and To date"),u()(),c(7,"div",19)(8,"div",29)(9,"div",30)(10,"label",31),h(11,"From date"),u(),c(12,"input",32),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.startDate_engagement,r)||(s.startDate_engagement=r),q(r)}),u()(),c(13,"div",30)(14,"label",31),h(15,"To date"),u(),c(16,"input",33),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.endDate_engagement,r)||(s.endDate_engagement=r),q(r)}),u()()()(),c(17,"div",21)(18,"button",22),lt("click",function(){G(t);let r=I();return q(r.filterByDate_engagement())}),h(19,"Filter"),u(),c(20,"button",22),lt("click",function(){G(t);let r=I();return q(r.reset_filter_engagement())}),h(21,"Reset"),u()()()()(),c(22,"button",20),lt("click",function(){G(t);let r=I();return q(r.openModal())}),h(23,"Download"),u(),c(24,"button",34),lt("click",function(){G(t);let r=I();return q(r.filter_card_open())}),h(25,"Filter"),u(),c(26,"div",35)(27,"table",36)(28,"thead")(29,"tr")(30,"th",46),h(31,"Engagement Analyzing Tracker (Engagement for Online Activites)"),u()(),c(32,"tr",38)(33,"th"),h(34,"S.No"),u(),c(35,"th"),h(36,"Tasks"),u(),c(37,"th",39),h(38,"Likes"),u(),c(39,"th",39),h(40,"Followers"),u(),c(41,"th",39),h(42,"Views\\Reach"),u(),c(43,"th",39),h(44,"Start Date"),u(),c(45,"th",39),h(46,"End Date"),u(),c(47,"th"),h(48,"Status"),u()()(),c(49,"tbody"),rt(50,_W,2,1,"ng-container",40),u(),rt(51,vW,3,0,"ng-template",null,0,De),u()()()}if(i&2){let t=an(52),n=I();_(),ed("display",n.filter_card_marketing?"block":"none"),D("ngClass",te(7,Th,n.filter_card_marketing)),_(11),gt("ngModel",n.startDate_engagement),_(4),gt("ngModel",n.endDate_engagement),_(34),D("ngIf",n.filtered_engagement&&n.filtered_engagement.length>0)("ngIfElse",t)}}function bW(i,e){if(i&1&&(pe(0),c(1,"td",61),h(2),u(),fe()),i&2){let t=I(4);_(),Ra("rowspan",t.get_total_leads.length),_(),de(" ",t.totalGoal," ")}}function yW(i,e){if(i&1&&(c(0,"tr",59)(1,"td",60),h(2),u(),c(3,"td",60),h(4),u(),rt(5,bW,3,2,"ng-container",25),c(6,"td",60),h(7),u()()),i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.SourceName),_(),D("ngIf",n===0),_(2),A(t.NumberOfLeads)}}function SW(i,e){if(i&1&&(pe(0),rt(1,yW,8,4,"tr",58),fe()),i&2){let t=I(2);_(),D("ngForOf",t.get_total_leads)}}function wW(i,e){if(i&1&&(c(0,"tbody")(1,"tr")(2,"td",62),h(3,"Total"),u(),c(4,"td"),h(5),u()()()),i&2){let t=I(2);_(5),A(t.totalActual)}}function CW(i,e){i&1&&(c(0,"tbody")(1,"tr")(2,"td",63),h(3,"No task found"),u()()())}function MW(i,e){if(i&1){let t=Ft();c(0,"div",52)(1,"button",20),lt("click",function(){G(t);let r=I();return q(r.openModal())}),h(2,"Download"),u(),c(3,"div",35)(4,"table",53)(5,"thead",54)(6,"tr")(7,"th",55),h(8,"Results - Total Leads"),u()(),c(9,"tr")(10,"th"),h(11,"S.No"),u(),c(12,"th"),h(13,"Source"),u(),c(14,"th",56),h(15,"Goal"),u(),c(16,"th",57),h(17,"Actual"),u()()(),c(18,"tbody"),rt(19,SW,2,1,"ng-container",40),u(),rt(20,wW,6,1,"tbody",25)(21,CW,4,0,"ng-template",null,0,De),u()()()}if(i&2){let t=an(22),n=I();_(19),D("ngIf",n.get_total_leads&&n.get_total_leads.length>0)("ngIfElse",t),_(),D("ngIf",n.get_total_leads&&n.get_total_leads.length>0)}}function EW(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),u(),c(4,"td",42),h(5),u(),c(6,"td",43),h(7),Et(8,"date"),u(),c(9,"td",43),h(10),Et(11,"date"),u(),c(12,"td",43),h(13),u(),c(14,"td",42),h(15),u(),c(16,"td",42),h(17),u()(),c(18,"tr")(19,"td",44),h(20),Et(21,"date"),u(),c(22,"td",44),h(23),Et(24,"date"),u(),c(25,"td",44),h(26),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Mls_description),_(2),A(At(8,10,t.Mls_goal_start_date,"d MMM")),_(3),A(At(11,13,t.Mls_goal_end_date,"d MMM")),_(3),A(t.Mls_goal_no_of_days),_(2),A(t.Mls_status),_(2),A(t.Mls_assigned_to),_(3),A(At(21,16,t.Mls_actual_start_date,"d MMM")),_(3),A(At(24,19,t.Mls_actual_end_date,"d MMM")),_(3),A(t.Mls_actual_no_of_days)}}function AW(i,e){if(i&1&&(pe(0),rt(1,EW,27,22,"ng-container",41),fe()),i&2){let t=I(2);_(),D("ngForOf",t.filtered_task_progress)}}function TW(i,e){i&1&&(c(0,"tr")(1,"td",51),h(2,"No task found"),u()())}function kW(i,e){if(i&1){let t=Ft();c(0,"div",28)(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"p"),h(6,"Slect From and To date"),u()(),c(7,"div",19)(8,"div",29)(9,"div",30)(10,"label",31),h(11,"From date"),u(),c(12,"input",32),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.startDate_task_progress,r)||(s.startDate_task_progress=r),q(r)}),u()(),c(13,"div",30)(14,"label",31),h(15,"To date"),u(),c(16,"input",33),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.endDate_task_progress,r)||(s.endDate_task_progress=r),q(r)}),u()()()(),c(17,"div",21)(18,"button",22),lt("click",function(){G(t);let r=I();return q(r.filterByDate_miscellaneous())}),h(19,"Filter"),u(),c(20,"button",22),lt("click",function(){G(t);let r=I();return q(r.reset_filter_miscellaneous())}),h(21,"Reset"),u()()()()(),c(22,"button",20),lt("click",function(){G(t);let r=I();return q(r.openModal())}),h(23,"Download"),u(),c(24,"button",34),lt("click",function(){G(t);let r=I();return q(r.filter_card_open())}),h(25,"Filter"),u(),c(26,"div",35)(27,"table",36)(28,"thead")(29,"tr")(30,"th",64),h(31,"Task Progress"),u()(),c(32,"tr",38)(33,"th"),h(34,"S.No"),u(),c(35,"th"),h(36,"Tasks"),u(),c(37,"th",39),h(38,"Start Date"),u(),c(39,"th",39),h(40,"End Date"),u(),c(41,"th",39),h(42,"Number of Days"),u(),c(43,"th"),h(44,"Status"),u(),c(45,"th"),h(46,"Assigned To"),u()()(),c(47,"tbody"),rt(48,AW,2,1,"ng-container",40),u(),rt(49,TW,3,0,"ng-template",null,0,De),u()()()}if(i&2){let t=an(50),n=I();_(),ed("display",n.filter_card_marketing?"block":"none"),D("ngClass",te(7,Th,n.filter_card_marketing)),_(11),gt("ngModel",n.startDate_task_progress),_(4),gt("ngModel",n.endDate_task_progress),_(32),D("ngIf",n.filtered_task_progress&&n.filtered_task_progress.length>0)("ngIfElse",t)}}function IW(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),u(),c(4,"td",42),h(5),u(),c(6,"td",43),h(7),u(),c(8,"td",43),h(9),u(),c(10,"td",43),h(11),Et(12,"date"),u(),c(13,"td",43),h(14),Et(15,"date"),u(),c(16,"td",43),h(17),u(),c(18,"td",42),h(19),u(),c(20,"td",42),h(21),u()(),c(22,"tr")(23,"td",44),h(24),u(),c(25,"td",44),h(26),u(),c(27,"td",44),h(28),Et(29,"date"),u(),c(30,"td",44),h(31),Et(32,"date"),u(),c(33,"td",44),h(34),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.cont_Task_name),_(2),A(t.cont_goal_quantity),_(2),A(t.cont_goal_quality),_(2),A(At(12,14,t.cont_goal_start_date,"d MMM")),_(3),A(At(15,17,t.cont_goal_end_date,"d MMM")),_(3),A(t.cont_goal_no_of_days),_(2),A(t.cont_status),_(2),A(t.cont_assigned_to),_(3),A(t.cont_actual_quantity),_(2),A(t.cont_actual_quality),_(2),A(At(29,20,t.cont_actual_start_date,"d MMM")),_(3),A(At(32,23,t.cont_actual_end_date,"d MMM")),_(3),A(t.cont_actual_no_of_days)}}function DW(i,e){if(i&1&&(pe(0),rt(1,IW,35,26,"ng-container",41),fe()),i&2){let t=I(3);_(),D("ngForOf",t.tactical_content)}}function PW(i,e){i&1&&(c(0,"tr")(1,"td",45),h(2,"No task found"),u()())}function RW(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),u(),c(4,"td",42),h(5),u(),c(6,"td",43),h(7),u(),c(8,"td",43),h(9),u(),c(10,"td",43),h(11),u(),c(12,"td",43),h(13),Et(14,"date"),u(),c(15,"td",43),h(16),Et(17,"date"),u(),c(18,"td",43),h(19),u(),c(20,"td",42),h(21),u(),c(22,"td",42),h(23),u()(),c(24,"tr")(25,"td",44),h(26),u(),c(27,"td",44),h(28),u(),c(29,"td",44),h(30),u(),c(31,"td",44),h(32),Et(33,"date"),u(),c(34,"td",44),h(35),Et(36,"date"),u(),c(37,"td",44),h(38),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Col_Task_name),_(2),A(t.Col_goal_quantity),_(2),A(t.Col_goal_quality),_(2),A(t.Cal_goal_cost),_(2),A(At(14,16,t.Col_goal_start_date,"d MMM")),_(3),A(At(17,19,t.Col_goal_end_date,"d MMM")),_(3),A(t.Col_goal_no_of_days),_(2),A(t.Col_status),_(2),A(t.Col_assigned_to),_(3),A(t.Col_actual_quantity),_(2),A(t.Col_actual_quality),_(2),A(t.Cal_actual_cost),_(2),A(At(33,22,t.Col_actual_start_date,"d MMM")),_(3),A(At(36,25,t.Col_actual_end_date,"d MMM")),_(3),A(t.Col_actual_no_of_days)}}function LW(i,e){if(i&1&&(pe(0),rt(1,RW,39,28,"ng-container",41),fe()),i&2){let t=I(3);_(),D("ngForOf",t.tactical_colletrel)}}function OW(i,e){i&1&&(c(0,"tr")(1,"td",68),h(2,"No task found"),u()())}function NW(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),u(),c(4,"td",42),h(5),u(),c(6,"td",43),h(7),u(),c(8,"td",43),h(9),u(),c(10,"td",43),h(11),Et(12,"date"),u(),c(13,"td",43),h(14),Et(15,"date"),u(),c(16,"td",43),h(17),u(),c(18,"td",42),h(19),u(),c(20,"td",42),h(21),u()(),c(22,"tr")(23,"td",44),h(24),u(),c(25,"td",44),h(26),u(),c(27,"td",44),h(28),Et(29,"date"),u(),c(30,"td",44),h(31),Et(32,"date"),u(),c(33,"td",44),h(34),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Cal_Task_name),_(2),A(t.Cal_goal_quantity),_(2),A(t.Cal_goal_cost),_(2),A(At(12,14,t.Cal_goal_start_date,"d MMM")),_(3),A(At(15,17,t.Cal_goal_end_date,"d MMM")),_(3),A(t.Cal_goal_Frequency),_(2),A(t.Cal_status),_(2),A(t.Cal_assigned_to),_(3),A(t.Cal_actual_quantity),_(2),A(t.Cal_actual_cost),_(2),A(At(29,20,t.Cal_actual_start_date,"d MMM")),_(3),A(At(32,23,t.Cal_actual_end_date,"d MMM")),_(3),A(t.Cal_actual_Frequency)}}function FW(i,e){if(i&1&&(pe(0),rt(1,NW,35,26,"ng-container",41),fe()),i&2){let t=I(3);_(),D("ngForOf",t.tactical_calender)}}function BW(i,e){if(i&1&&(c(0,"tbody")(1,"tr")(2,"td",47),h(3,"Total Cost"),u(),c(4,"td",48),h(5),u(),Rt(6,"td",49),u(),c(7,"tr")(8,"td",50),h(9),u()()()),i&2){let t=I(3);_(5),A(t.Strategic_Goal_Cost),_(4),A(t.Strategic_Actual_Cost)}}function VW(i,e){i&1&&(c(0,"tr")(1,"td",45),h(2,"No task found"),u()())}function UW(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),u(),c(4,"td",42),h(5),u(),c(6,"td",43),h(7),u(),c(8,"td",43),h(9),u(),c(10,"td",43),h(11),u(),c(12,"td",43),h(13),Et(14,"date"),u(),c(15,"td",43),h(16),Et(17,"date"),u(),c(18,"td",42),h(19),u()(),c(20,"tr")(21,"td",44),h(22),u(),c(23,"td",44),h(24),u(),c(25,"td",44),h(26),u(),c(27,"td",44),h(28),Et(29,"date"),u(),c(30,"td",44),h(31),Et(32,"date"),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Eng_Task_name),_(2),A(t.Eng_goal_like),_(2),A(t.Eng_goal_followers),_(2),A(t.Eng_goal_Views),_(2),A(At(14,13,t.Eng_goal_start_date,"d MMM")),_(3),A(At(17,16,t.Eng_goal_end_date,"d MMM")),_(3),A(t.Eng_status),_(3),A(t.Eng_actual_like),_(2),A(t.Eng_actual_followers),_(2),A(t.Eng_actual_Views),_(2),A(At(29,19,t.Eng_actual_start_date,"d MMM")),_(3),A(At(32,22,t.Eng_actual_end_date,"d MMM"))}}function zW(i,e){if(i&1&&(pe(0),rt(1,UW,33,25,"ng-container",41),fe()),i&2){let t=I(3);_(),D("ngForOf",t.tactical_engagement)}}function jW(i,e){i&1&&(c(0,"tr")(1,"td",51),h(2,"No task found"),u()())}function HW(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),u(),c(4,"td",42),h(5),u(),c(6,"td",43),h(7),Et(8,"date"),u(),c(9,"td",43),h(10),Et(11,"date"),u(),c(12,"td",43),h(13),u(),c(14,"td",42),h(15),u(),c(16,"td",42),h(17),u()(),c(18,"tr")(19,"td",44),h(20),Et(21,"date"),u(),c(22,"td",44),h(23),Et(24,"date"),u(),c(25,"td",44),h(26),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Mls_description),_(2),A(At(8,10,t.Mls_goal_start_date,"d MMM")),_(3),A(At(11,13,t.Mls_goal_end_date,"d MMM")),_(3),A(t.Mls_goal_no_of_days),_(2),A(t.Mls_status),_(2),A(t.Mls_assigned_to),_(3),A(At(21,16,t.Mls_actual_start_date,"d MMM")),_(3),A(At(24,19,t.Mls_actual_end_date,"d MMM")),_(3),A(t.Mls_actual_no_of_days)}}function WW(i,e){if(i&1&&(pe(0),rt(1,HW,27,22,"ng-container",41),fe()),i&2){let t=I(3);_(),D("ngForOf",t.tactical_task_progress)}}function GW(i,e){i&1&&(c(0,"tr")(1,"td",51),h(2,"No task found"),u()())}function qW(i,e){if(i&1&&(pe(0),c(1,"td",61),h(2),u(),fe()),i&2){let t=I(5);_(),Ra("rowspan",t.get_total_leads.length),_(),de(" ",t.totalTolGoal," ")}}function XW(i,e){if(i&1&&(c(0,"tr",59)(1,"td",60),h(2),u(),c(3,"td",60),h(4),u(),rt(5,qW,3,2,"ng-container",25),c(6,"td",60),h(7),u()()),i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.Tol_Task_Name),_(),D("ngIf",n===0),_(2),A(t.Tol_actual)}}function YW(i,e){if(i&1&&(pe(0),rt(1,XW,8,4,"tr",58),fe()),i&2){let t=I(3);_(),D("ngForOf",t.get_total_leads)}}function $W(i,e){if(i&1&&(c(0,"tbody")(1,"tr")(2,"td",62),h(3,"Total"),u(),c(4,"td"),h(5),u()()()),i&2){let t=I(3);_(5),A(t.totalActual)}}function KW(i,e){i&1&&(c(0,"tbody")(1,"tr")(2,"td",63),h(3,"No task found"),u()()())}function ZW(i,e){if(i&1&&(c(0,"div")(1,"div",66)(2,"h6"),h(3,"Tactical Meeting"),u()(),c(4,"div")(5,"div",67)(6,"table",36)(7,"thead")(8,"tr")(9,"th",37),h(10,"Content Tracker (Content Creations)"),u()(),c(11,"tr",38)(12,"th"),h(13,"S.No"),u(),c(14,"th"),h(15,"Tasks"),u(),c(16,"th",39),h(17,"Quantity"),u(),c(18,"th",39),h(19,"Quality"),u(),c(20,"th",39),h(21,"Start Date"),u(),c(22,"th",39),h(23,"End Date"),u(),c(24,"th",39),h(25,"No of Days"),u(),c(26,"th"),h(27,"Status"),u(),c(28,"th"),h(29,"Assigned To"),u()()(),c(30,"tbody"),rt(31,DW,2,1,"ng-container",40),u(),rt(32,PW,3,0,"ng-template",null,0,De),u()(),c(34,"div",67)(35,"table",36)(36,"thead")(37,"tr")(38,"th",46),h(39,"Collateral Tracker (Collateral Designs & Video Making)"),u()(),c(40,"tr",38)(41,"th"),h(42,"S.No"),u(),c(43,"th"),h(44,"Tasks"),u(),c(45,"th",39),h(46,"Quantity"),u(),c(47,"th",39),h(48,"Quality"),u(),c(49,"th",39),h(50,"Cost"),u(),c(51,"th",39),h(52,"Start Date"),u(),c(53,"th",39),h(54,"End Date"),u(),c(55,"th",39),h(56,"No of Days"),u(),c(57,"th"),h(58,"Status"),u(),c(59,"th"),h(60,"Assigned To"),u()()(),c(61,"tbody"),rt(62,LW,2,1,"ng-container",40),u(),rt(63,OW,3,0,"ng-template",null,0,De),u()(),c(65,"div",67)(66,"table",36)(67,"thead")(68,"tr")(69,"th",46),h(70,"Marketing Calender (Online & Offline Activites)"),u()(),c(71,"tr",38)(72,"th"),h(73,"S.No"),u(),c(74,"th"),h(75,"Tasks"),u(),c(76,"th",39),h(77,"Quantity"),u(),c(78,"th",39),h(79,"Cost"),u(),c(80,"th",39),h(81,"Start Date"),u(),c(82,"th",39),h(83,"End Date"),u(),c(84,"th",39),h(85,"Frequency"),u(),c(86,"th"),h(87,"Status"),u(),c(88,"th"),h(89,"Assigned To"),u()()(),c(90,"tbody"),rt(91,FW,2,1,"ng-container",40),u(),rt(92,BW,10,2,"tbody",25)(93,VW,3,0,"ng-template",null,0,De),u()(),c(95,"div",67)(96,"table",36)(97,"thead")(98,"tr")(99,"th",46),h(100,"Engagement Analyzing Tracker (Engagement for Online Activites) "),u()(),c(101,"tr",38)(102,"th"),h(103,"S.No"),u(),c(104,"th"),h(105,"Tasks"),u(),c(106,"th",39),h(107,"Likes"),u(),c(108,"th",39),h(109,"Followers"),u(),c(110,"th",39),h(111,"Views\\Reach"),u(),c(112,"th",39),h(113,"Start Date"),u(),c(114,"th",39),h(115,"End Date"),u(),c(116,"th"),h(117,"Status"),u()()(),c(118,"tbody"),rt(119,zW,2,1,"ng-container",40),u(),rt(120,jW,3,0,"ng-template",null,0,De),u()(),c(122,"div",67)(123,"table",36)(124,"thead")(125,"tr")(126,"th",64),h(127,"Task Progress"),u()(),c(128,"tr",38)(129,"th"),h(130,"S.No"),u(),c(131,"th"),h(132,"Tasks"),u(),c(133,"th",39),h(134,"Start Date"),u(),c(135,"th",39),h(136,"End Date"),u(),c(137,"th",39),h(138,"Number of Days"),u(),c(139,"th"),h(140,"Status"),u(),c(141,"th"),h(142,"Assigned To"),u()()(),c(143,"tbody"),rt(144,WW,2,1,"ng-container",40),u(),rt(145,GW,3,0,"ng-template",null,0,De),u()(),c(147,"div",67)(148,"table",53)(149,"thead",54)(150,"tr")(151,"th",55),h(152,"Results - Total Leads"),u()(),c(153,"tr")(154,"th"),h(155,"S.No"),u(),c(156,"th"),h(157,"Source"),u(),c(158,"th",56),h(159,"Goal"),u(),c(160,"th",57),h(161,"Actual"),u()()(),c(162,"tbody"),rt(163,YW,2,1,"ng-container",40),u(),rt(164,$W,6,1,"tbody",25)(165,KW,4,0,"ng-template",null,0,De),u()()()()),i&2){let t=an(33),n=I(2);_(31),D("ngIf",n.tactical_content&&n.tactical_content.length>0)("ngIfElse",t),_(31),D("ngIf",n.tactical_colletrel&&n.tactical_colletrel.length>0)("ngIfElse",t),_(29),D("ngIf",n.tactical_calender&&n.tactical_calender.length>0)("ngIfElse",t),_(),D("ngIf",n.strategic_calender&&n.strategic_calender.length>0),_(27),D("ngIf",n.tactical_engagement&&n.tactical_engagement.length>0)("ngIfElse",t),_(25),D("ngIf",n.tactical_task_progress&&n.tactical_task_progress.length>0)("ngIfElse",t),_(19),D("ngIf",n.get_total_leads&&n.get_total_leads.length>0)("ngIfElse",t),_(),D("ngIf",n.get_total_leads&&n.get_total_leads.length>0)}}function JW(i,e){if(i&1&&(c(0,"option",26),h(1),u()),i&2){let t=e.$implicit;D("value",t.value),_(),A(t.name)}}function QW(i,e){if(i&1&&(c(0,"option",26),h(1),u()),i&2){let t=e.$implicit;D("value",t),_(),A(t)}}function tG(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),u(),c(4,"td",42),h(5),u(),c(6,"td",43),h(7),u(),c(8,"td",43),h(9),u(),c(10,"td",43),h(11),Et(12,"date"),u(),c(13,"td",43),h(14),Et(15,"date"),u(),c(16,"td",43),h(17),u(),c(18,"td",42),h(19),u(),c(20,"td",42),h(21),u()(),c(22,"tr")(23,"td",44),h(24),u(),c(25,"td",44),h(26),u(),c(27,"td",44),h(28),Et(29,"date"),u(),c(30,"td",44),h(31),Et(32,"date"),u(),c(33,"td",44),h(34),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.cont_Task_name),_(2),A(t.cont_goal_quantity),_(2),A(t.cont_goal_quality),_(2),A(At(12,14,t.cont_goal_start_date,"d MMM")),_(3),A(At(15,17,t.cont_goal_end_date,"d MMM")),_(3),A(t.cont_goal_no_of_days),_(2),A(t.cont_status),_(2),A(t.cont_assigned_to),_(3),A(t.cont_actual_quantity),_(2),A(t.cont_actual_quality),_(2),A(At(29,20,t.cont_actual_start_date,"d MMM")),_(3),A(At(32,23,t.cont_actual_end_date,"d MMM")),_(3),A(t.cont_actual_no_of_days)}}function eG(i,e){if(i&1&&(pe(0),rt(1,tG,35,26,"ng-container",41),fe()),i&2){let t=I(3);_(),D("ngForOf",t.strategic_content)}}function nG(i,e){i&1&&(c(0,"tr")(1,"td",45),h(2,"No task found"),u()())}function iG(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),u(),c(4,"td",42),h(5),u(),c(6,"td",43),h(7),u(),c(8,"td",43),h(9),u(),c(10,"td",43),h(11),u(),c(12,"td",43),h(13),Et(14,"date"),u(),c(15,"td",43),h(16),Et(17,"date"),u(),c(18,"td",43),h(19),u(),c(20,"td",42),h(21),u(),c(22,"td",42),h(23),u()(),c(24,"tr")(25,"td",44),h(26),u(),c(27,"td",44),h(28),u(),c(29,"td",44),h(30),u(),c(31,"td",44),h(32),Et(33,"date"),u(),c(34,"td",44),h(35),Et(36,"date"),u(),c(37,"td",44),h(38),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Col_Task_name),_(2),A(t.Col_goal_quantity),_(2),A(t.Col_goal_quality),_(2),A(t.Cal_goal_cost),_(2),A(At(14,16,t.Col_goal_start_date,"d MMM")),_(3),A(At(17,19,t.Col_goal_end_date,"d MMM")),_(3),A(t.Col_goal_no_of_days),_(2),A(t.Col_status),_(2),A(t.Col_assigned_to),_(3),A(t.Col_actual_quantity),_(2),A(t.Col_actual_quality),_(2),A(t.Cal_actual_cost),_(2),A(At(33,22,t.Col_actual_start_date,"d MMM")),_(3),A(At(36,25,t.Col_actual_end_date,"d MMM")),_(3),A(t.Col_actual_no_of_days)}}function rG(i,e){if(i&1&&(pe(0),rt(1,iG,39,28,"ng-container",41),fe()),i&2){let t=I(3);_(),D("ngForOf",t.strategic_colletrel)}}function sG(i,e){i&1&&(c(0,"tr")(1,"td",45),h(2,"No task found"),u()())}function aG(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),u(),c(4,"td",42),h(5),u(),c(6,"td",43),h(7),u(),c(8,"td",43),h(9),u(),c(10,"td",43),h(11),Et(12,"date"),u(),c(13,"td",43),h(14),Et(15,"date"),u(),c(16,"td",43),h(17),u(),c(18,"td",42),h(19),u(),c(20,"td",42),h(21),u()(),c(22,"tr")(23,"td",44),h(24),u(),c(25,"td",44),h(26),u(),c(27,"td",44),h(28),Et(29,"date"),u(),c(30,"td",44),h(31),Et(32,"date"),u(),c(33,"td",44),h(34),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Cal_Task_name),_(2),A(t.Cal_goal_quantity),_(2),A(t.Cal_goal_cost),_(2),A(At(12,14,t.Cal_goal_start_date,"d MMM")),_(3),A(At(15,17,t.Cal_goal_end_date,"d MMM")),_(3),A(t.Cal_goal_Frequency),_(2),A(t.Cal_status),_(2),A(t.Cal_assigned_to),_(3),A(t.Cal_actual_quantity),_(2),A(t.Cal_actual_cost),_(2),A(At(29,20,t.Cal_actual_start_date,"d MMM")),_(3),A(At(32,23,t.Cal_actual_end_date,"d MMM")),_(3),A(t.Cal_actual_Frequency)}}function oG(i,e){if(i&1&&(pe(0),rt(1,aG,35,26,"ng-container",41),fe()),i&2){let t=I(3);_(),D("ngForOf",t.strategic_calender)}}function lG(i,e){if(i&1&&(c(0,"tbody")(1,"tr")(2,"td",47),h(3,"Total Cost"),u(),c(4,"td",48),h(5),u(),Rt(6,"td",49),u(),c(7,"tr")(8,"td",50),h(9),u()()()),i&2){let t=I(3);_(5),A(t.Strategic_Goal_Cost),_(4),A(t.Strategic_Actual_Cost)}}function cG(i,e){i&1&&(c(0,"tr")(1,"td",45),h(2,"No task found"),u()())}function dG(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),u(),c(4,"td",42),h(5),u(),c(6,"td",43),h(7),u(),c(8,"td",43),h(9),u(),c(10,"td",43),h(11),u(),c(12,"td",43),h(13),Et(14,"date"),u(),c(15,"td",43),h(16),Et(17,"date"),u(),c(18,"td",42),h(19),u()(),c(20,"tr")(21,"td",44),h(22),u(),c(23,"td",44),h(24),u(),c(25,"td",44),h(26),u(),c(27,"td",44),h(28),Et(29,"date"),u(),c(30,"td",44),h(31),Et(32,"date"),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Eng_Task_name),_(2),A(t.Eng_goal_like),_(2),A(t.Eng_goal_followers),_(2),A(t.Eng_goal_Views),_(2),A(At(14,13,t.Eng_goal_start_date,"d MMM")),_(3),A(At(17,16,t.Eng_goal_end_date,"d MMM")),_(3),A(t.Eng_status),_(3),A(t.Eng_actual_like),_(2),A(t.Eng_actual_followers),_(2),A(t.Eng_actual_Views),_(2),A(At(29,19,t.Eng_actual_start_date,"d MMM")),_(3),A(At(32,22,t.Eng_actual_end_date,"d MMM"))}}function uG(i,e){if(i&1&&(pe(0),rt(1,dG,33,25,"ng-container",41),fe()),i&2){let t=I(3);_(),D("ngForOf",t.strategic_engagement)}}function hG(i,e){i&1&&(c(0,"tr")(1,"td",51),h(2,"No task found"),u()())}function pG(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),u(),c(4,"td",42),h(5),u(),c(6,"td",43),h(7),Et(8,"date"),u(),c(9,"td",43),h(10),Et(11,"date"),u(),c(12,"td",43),h(13),u(),c(14,"td",42),h(15),u(),c(16,"td",42),h(17),u()(),c(18,"tr")(19,"td",44),h(20),Et(21,"date"),u(),c(22,"td",44),h(23),Et(24,"date"),u(),c(25,"td",44),h(26),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Mls_description),_(2),A(At(8,10,t.Mls_goal_start_date,"d MMM")),_(3),A(At(11,13,t.Mls_goal_end_date,"d MMM")),_(3),A(t.Mls_goal_no_of_days),_(2),A(t.Mls_status),_(2),A(t.Mls_assigned_to),_(3),A(At(21,16,t.Mls_actual_start_date,"d MMM")),_(3),A(At(24,19,t.Mls_actual_end_date,"d MMM")),_(3),A(t.Mls_actual_no_of_days)}}function fG(i,e){if(i&1&&(pe(0),rt(1,pG,27,22,"ng-container",41),fe()),i&2){let t=I(3);_(),D("ngForOf",t.strategic_task_progress)}}function mG(i,e){i&1&&(c(0,"tr")(1,"td",51),h(2,"No task found"),u()())}function gG(i,e){if(i&1&&(pe(0),c(1,"td",61),h(2),u(),fe()),i&2){let t=I(5);_(),Ra("rowspan",t.strategic_total_leads.length),_(),de(" ",t.strategic_total_Goal," ")}}function _G(i,e){if(i&1&&(c(0,"tr",59)(1,"td",60),h(2),u(),c(3,"td",60),h(4),u(),rt(5,gG,3,2,"ng-container",25),c(6,"td",60),h(7),u()()),i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.Tol_Task_Name),_(),D("ngIf",n===0),_(2),A(t.Tol_actual)}}function vG(i,e){if(i&1&&(pe(0),rt(1,_G,8,4,"tr",58),fe()),i&2){let t=I(3);_(),D("ngForOf",t.strategic_total_leads)}}function xG(i,e){if(i&1&&(c(0,"tbody")(1,"tr")(2,"td",62),h(3,"Total"),u(),c(4,"td"),h(5),u()()()),i&2){let t=I(3);_(5),A(t.strategic_total_actual)}}function bG(i,e){i&1&&(c(0,"tbody")(1,"tr")(2,"td",63),h(3,"No task found"),u()()())}function yG(i,e){if(i&1){let t=Ft();c(0,"div")(1,"div",66)(2,"h6"),h(3,"Strategic Meeting"),u()(),c(4,"div",69)(5,"label",70),h(6,"Select Month:"),u(),c(7,"select",71),vt("ngModelChange",function(r){G(t);let s=I(2);return _t(s.selectedMonth,r)||(s.selectedMonth=r),q(r)}),lt("change",function(){G(t);let r=I(2);return q(r.get_strategic_data())}),rt(8,JW,2,2,"option",11),u(),c(9,"label",72),h(10,"Select Year:"),u(),c(11,"select",73),vt("ngModelChange",function(r){G(t);let s=I(2);return _t(s.selected_Year,r)||(s.selected_Year=r),q(r)}),lt("change",function(){G(t);let r=I(2);return q(r.get_strategic_data())}),rt(12,QW,2,2,"option",11),u()(),c(13,"div")(14,"div",74)(15,"table",36)(16,"thead")(17,"tr")(18,"th",37),h(19,"Content Tracker (Content Creations)"),u()(),c(20,"tr",38)(21,"th"),h(22,"S.No"),u(),c(23,"th"),h(24,"Tasks"),u(),c(25,"th",39),h(26,"Quantity"),u(),c(27,"th",39),h(28,"Quality"),u(),c(29,"th",39),h(30,"Start Date"),u(),c(31,"th",39),h(32,"End Date"),u(),c(33,"th",39),h(34,"No of Days"),u(),c(35,"th"),h(36,"Status"),u(),c(37,"th"),h(38,"Assigned To"),u()()(),c(39,"tbody"),rt(40,eG,2,1,"ng-container",40),u(),rt(41,nG,3,0,"ng-template",null,0,De),u()(),c(43,"div",74)(44,"table",36)(45,"thead")(46,"tr")(47,"th",46),h(48,"Collateral Tracker (Collateral Designs & Video Making)"),u()(),c(49,"tr",38)(50,"th"),h(51,"S.No"),u(),c(52,"th"),h(53,"Tasks"),u(),c(54,"th",39),h(55,"Quantity"),u(),c(56,"th",39),h(57,"Quality"),u(),c(58,"th",39),h(59,"Cost"),u(),c(60,"th",39),h(61,"Start Date"),u(),c(62,"th",39),h(63,"End Date"),u(),c(64,"th",39),h(65,"No of Days"),u(),c(66,"th"),h(67,"Status"),u(),c(68,"th"),h(69,"Assigned To"),u()()(),c(70,"tbody"),rt(71,rG,2,1,"ng-container",40),u(),rt(72,sG,3,0,"ng-template",null,0,De),u()(),c(74,"div",74)(75,"table",36)(76,"thead")(77,"tr")(78,"th",46),h(79,"Marketing Calender (Online & Offline Activites)"),u()(),c(80,"tr",38)(81,"th"),h(82,"S.No"),u(),c(83,"th"),h(84,"Tasks"),u(),c(85,"th",39),h(86,"Quantity"),u(),c(87,"th",39),h(88,"Cost"),u(),c(89,"th",39),h(90,"Start Date"),u(),c(91,"th",39),h(92,"End Date"),u(),c(93,"th",39),h(94,"Frequency"),u(),c(95,"th"),h(96,"Status"),u(),c(97,"th"),h(98,"Assigned To"),u()()(),c(99,"tbody"),rt(100,oG,2,1,"ng-container",40),u(),rt(101,lG,10,2,"tbody",25)(102,cG,3,0,"ng-template",null,0,De),u()(),c(104,"div",74)(105,"table",36)(106,"thead")(107,"tr")(108,"th",46),h(109,"Engagement Analyzing Tracker (Engagement for Online Activites) "),u()(),c(110,"tr",38)(111,"th"),h(112,"S.No"),u(),c(113,"th"),h(114,"Tasks"),u(),c(115,"th",39),h(116,"Likes"),u(),c(117,"th",39),h(118,"Followers"),u(),c(119,"th",39),h(120,"Views\\Reach"),u(),c(121,"th",39),h(122,"Start Date"),u(),c(123,"th",39),h(124,"End Date"),u(),c(125,"th"),h(126,"Status"),u()()(),c(127,"tbody"),rt(128,uG,2,1,"ng-container",40),u(),rt(129,hG,3,0,"ng-template",null,0,De),u()(),c(131,"div",74)(132,"table",36)(133,"thead")(134,"tr")(135,"th",64),h(136,"Task Progress"),u()(),c(137,"tr",38)(138,"th"),h(139,"S.No"),u(),c(140,"th"),h(141,"Tasks"),u(),c(142,"th",39),h(143,"Start Date"),u(),c(144,"th",39),h(145,"End Date"),u(),c(146,"th",39),h(147,"Number of Days"),u(),c(148,"th"),h(149,"Status"),u(),c(150,"th"),h(151,"Assigned To"),u()()(),c(152,"tbody"),rt(153,fG,2,1,"ng-container",40),u(),rt(154,mG,3,0,"ng-template",null,0,De),u()(),c(156,"div",74)(157,"table",53)(158,"thead",54)(159,"tr")(160,"th",55),h(161,"Results - Total Leads"),u()(),c(162,"tr")(163,"th"),h(164,"S.No"),u(),c(165,"th"),h(166,"Source"),u(),c(167,"th",56),h(168,"Goal"),u(),c(169,"th",57),h(170,"Actual"),u()()(),c(171,"tbody"),rt(172,vG,2,1,"ng-container",40),u(),rt(173,xG,6,1,"tbody",25)(174,bG,4,0,"ng-template",null,0,De),u()()()()}if(i&2){let t=an(42),n=I(2);_(7),gt("ngModel",n.selectedMonth),_(),D("ngForOf",n.months),_(3),gt("ngModel",n.selected_Year),_(),D("ngForOf",n.years),_(28),D("ngIf",n.strategic_content&&n.strategic_content.length>0)("ngIfElse",t),_(31),D("ngIf",n.strategic_colletrel&&n.strategic_colletrel.length>0)("ngIfElse",t),_(29),D("ngIf",n.strategic_calender&&n.strategic_calender.length>0)("ngIfElse",t),_(),D("ngIf",n.strategic_calender&&n.strategic_calender.length>0),_(27),D("ngIf",n.strategic_engagement&&n.strategic_engagement.length>0)("ngIfElse",t),_(25),D("ngIf",n.strategic_task_progress&&n.strategic_task_progress.length>0)("ngIfElse",t),_(19),D("ngIf",n.strategic_total_leads&&n.strategic_total_leads.length>0)("ngIfElse",t),_(),D("ngIf",n.strategic_total_leads&&n.strategic_total_leads.length>0)}}function SG(i,e){if(i&1){let t=Ft();c(0,"div")(1,"div",52)(2,"button",65),lt("click",function(){G(t);let r=I();return q(r.tactical_meeting())}),h(3,"Tactical"),u(),c(4,"button",65),lt("click",function(){G(t);let r=I();return q(r.strategic_meeting())}),h(5,"Strategic"),u()(),rt(6,ZW,167,14,"div",25)(7,yG,176,18,"div",25),u()}if(i&2){let t=I();_(6),D("ngIf",t.is_tactical),_(),D("ngIf",t.is_strategic)}}function wG(i,e){i&1&&(c(0,"div",79)(1,"p",80),h(2,"Leads"),u(),Rt(3,"app-marketing-bar-chart"),u())}function CG(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td"),h(3),u(),c(4,"td"),h(5),u(),c(6,"td"),h(7),u(),c(8,"td"),h(9),u(),c(10,"td"),h(11),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.SourceName),_(2),A(t.ActualTotalCost),_(2),A(t.NumberOfLeads),_(2),A(t.Completed_SiteVisits)}}function MG(i,e){if(i&1&&(pe(0),rt(1,CG,12,5,"ng-container",41),fe()),i&2){let t=I(3);_(),D("ngForOf",t.Statistics_table_data)}}function EG(i,e){i&1&&(c(0,"tr")(1,"td",82),h(2,"No task found"),u()())}function AG(i,e){if(i&1&&(c(0,"div",81)(1,"table")(2,"thead")(3,"tr")(4,"th"),h(5,"S.No"),u(),c(6,"th"),h(7,"Task"),u(),c(8,"th"),h(9,"Cost"),u(),c(10,"th"),h(11,"Leads"),u(),c(12,"th"),h(13,"Conversion"),u()()(),c(14,"tbody"),rt(15,MG,2,1,"ng-container",40),u(),rt(16,EG,3,0,"ng-template",null,0,De),u()()),i&2){let t=an(17),n=I(2);_(15),D("ngIf",n.Statistics_table_data&&n.Statistics_table_data.length>0)("ngIfElse",t)}}function TG(i,e){if(i&1){let t=Ft();c(0,"div")(1,"div",75)(2,"button",76),lt("click",function(){G(t);let r=I();return q(r.Statistics_chart())}),h(3,"Chart"),u(),c(4,"button",76),lt("click",function(){G(t);let r=I();return q(r.Statistics_table())}),h(5,"Table"),u()(),rt(6,wG,4,0,"div",77)(7,AG,18,2,"div",78),u()}if(i&2){let t=I();_(6),D("ngIf",t.is_Statistics_chart),_(),D("ngIf",t.is_Statistics_table)}}var Y1=class i{constructor(e,t,n,r,s){this.route=e;this.apiService=t;this.http=n;this.router=r;this.userService=s;this.route.params.subscribe(a=>{this.current_task=a.taskName,this.project_id=parseInt(a.projectid)}),this.project_id==1?this.project_names="ANBU AVENUE":this.project_id==2?this.project_names="RVS AVENUE":this.project_id==3?this.project_names="AGASTHYA PRIME":this.project_id==4&&(this.project_names="AGASTHYA DEVELOPER")}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}project_names="";current_task=null;updatetask=null;project_id=null;ngOnInit(){this.get_data();let e=new Date().getFullYear();this.years=Array.from({length:e-1999},(t,n)=>2e3+n),this.get_content_task(),this.get_collateral_task(),this.get_marketing_calender_api(),this.get_engagement_analyzing_api(),this.get_total_leads_api(),this.setTacticalDateRange(),this.get_Statistics_table()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}ngAfterViewInit(){this.get_task_progress()}selectedModule="";modules=["Content Tracker","Collateral Tracker","Marketing Calender","Engagement Analyzing","Total leads","Task Progress","Meeting","Statistics"];selectModule(e){this.selectedModule=e}downloadCSV(){let t=document.querySelector("table")?.querySelectorAll("tr"),n="";t?.forEach(a=>{let o=a.querySelectorAll("th, td"),l=[];o.forEach(d=>{let p=d.textContent?.trim().replace(/"/g,'""');l.push(`"${p}"`)}),n+=l.join(",")+`
`});let r=new Blob([n],{type:"text/csv"}),s=document.createElement("a");s.href=URL.createObjectURL(r),s.download="table_data.csv",s.click()}downloadPDF(){let e=document.getElementById("content-to-pdf");e&&(0,OP.default)(e).then(t=>{let s=t.height*210/t.width,a=s,o=0,l=t.toDataURL("image/png"),d=new LP("p","mm","a4");for(d.addImage(l,"PNG",0,o,210,s),a-=295;a>=0;)o=a-s,d.addPage(),d.addImage(l,"PNG",0,o,210,s),a-=295;d.save("content-tracker.pdf")})}isModalOpen=!1;openModal(){this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}filter_card_marketing=!1;filter_card_open(){this.filter_card_marketing=!0}startDate_content=null;endDate_content=null;get_content=[];filtered_content=[];get_content_task(){this.http.get(this.apiService.marketing_content_tracker_api()).subscribe(e=>{this.get_content=e.filter(t=>t.Project_id===this.project_id),this.filtered_content=this.get_content},e=>{console.error("Error fetching items",e)})}filterByDate_content(){if(this.startDate_content&&this.endDate_content){let e=new Date(this.startDate_content),t=new Date(this.endDate_content);this.filtered_content=this.get_content.filter(n=>{let r=new Date(n.cont_actual_start_date);return r>=e&&r<=t})}else this.filtered_content=this.get_content;this.filter_card_marketing=!1}reset_filter_content(){this.filtered_content=this.get_content,this.filter_card_marketing=!1}startDate_collateral=null;endDate_collateral=null;get_collateral=[];filtered_collateral=[];get_collateral_task(){this.http.get(this.apiService.Collateraltrackerapi()).subscribe(e=>{this.get_collateral=e.filter(t=>t.Project_id===this.project_id),this.filtered_collateral=this.get_collateral},e=>{console.error("Error fetching items",e)})}filterByDate_collateral(){if(this.startDate_collateral&&this.endDate_collateral){let e=new Date(this.startDate_collateral),t=new Date(this.endDate_collateral);this.filtered_collateral=this.get_collateral.filter(n=>{let r=new Date(n.Col_actual_start_date);return r>=e&&r<=t})}else this.filtered_collateral=this.get_collateral;this.filter_card_marketing=!1}reset_filter_collateral(){this.filtered_collateral=this.get_collateral,this.filter_card_marketing=!1,this.startDate_collateral="",this.endDate_collateral=""}startDate_calender=null;endDate_calender=null;get_marketing_calender=[];filtered_calender=[];Total_Actual_Cost;Total_Goal_Cost;get_marketing_calender_api(){this.http.get(this.apiService.marketingcalenderapi()).subscribe(e=>{this.get_marketing_calender=e.filter(t=>t.Project_id===this.project_id),this.filtered_calender=this.get_marketing_calender,this.Total_Goal_Cost=this.filtered_calender.reduce((t,n)=>t+n.Cal_goal_cost,0),this.Total_Actual_Cost=this.filtered_calender.reduce((t,n)=>t+n.Cal_actual_cost,0)},e=>{console.error("Error fetching items",e)})}filterByDate_calender(){if(this.startDate_calender&&this.endDate_calender){let e=new Date(this.startDate_calender),t=new Date(this.endDate_calender);this.filtered_calender=this.get_marketing_calender.filter(n=>{let r=new Date(n.Cal_actual_start_date);return r>=e&&r<=t})}else this.filtered_calender=this.get_marketing_calender;this.filter_card_marketing=!1}reset_filter_calender(){this.filtered_calender=this.get_marketing_calender,this.filter_card_marketing=!1,this.startDate_calender="",this.endDate_calender=""}startDate_engagement=null;endDate_engagement=null;filtered_engagement=[];get_engagement_analyzing=[];get_engagement_analyzing_api(){this.http.get(this.apiService.engagementanalyzingapi()).subscribe(e=>{this.get_engagement_analyzing=e.filter(t=>t.Project_id===this.project_id),this.get_engagement_analyzing.sort((t,n)=>{let r={Completed:1,"On Going":2,Pending:3},s=t.Eng_status,a=n.Eng_status;return(r[s]||4)-(r[a]||4)}),this.filtered_engagement=this.get_engagement_analyzing},e=>{console.error("Error fetching items",e)})}filterByDate_engagement(){if(this.startDate_engagement&&this.endDate_engagement){let e=new Date(this.startDate_engagement),t=new Date(this.endDate_engagement);this.filtered_engagement=this.get_engagement_analyzing.filter(n=>{let r=new Date(n.Eng_actual_start_date);return r>=e&&r<=t})}else this.filtered_engagement=this.get_engagement_analyzing;this.filter_card_marketing=!1}reset_filter_engagement(){this.filtered_engagement=this.get_engagement_analyzing,this.filter_card_marketing=!1,this.startDate_engagement="",this.endDate_engagement=""}startDate_task_progress=null;endDate_task_progress=null;filtered_task_progress=[];get_task_progress_data=[];get_task_progress(){this.http.get(this.apiService.marketingmiscellaneousapi()).subscribe(e=>{this.get_task_progress_data=e.filter(t=>t.Project_id===this.project_id),this.filtered_task_progress=this.get_task_progress_data},e=>{console.error("Error fetching items",e)})}filterByDate_miscellaneous(){if(this.startDate_task_progress&&this.endDate_task_progress){let e=new Date(this.startDate_task_progress),t=new Date(this.endDate_task_progress);this.filtered_task_progress=this.get_task_progress_data.filter(n=>{let r=new Date(n.Mls_actual_start_date);return r>=e&&r<=t})}else this.filtered_task_progress=this.get_task_progress_data;this.filter_card_marketing=!1}reset_filter_miscellaneous(){this.filtered_task_progress=this.get_task_progress_data,this.filter_card_marketing=!1,this.startDate_engagement="",this.endDate_engagement=""}formatDate(e){let t=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0");return`${t}-${n}-${r}`}is_tactical=!1;tactical_start_date=null;tactical_end_date=null;setTacticalDateRange(){let e=new Date,t=e.getFullYear(),n=e.getMonth(),a=1+(7-new Date(t,n,1).getDay()+2)%7,o=new Date(t,n,a+14),l=new Date(t,n,1);this.tactical_start_date=this.formatDate(l),this.tactical_end_date=this.formatDate(o)}tactical_content=[];tactical_colletrel=[];tactical_calender=[];tactical_engagement=[];tactical_task_progress=[];tactical_meeting(){this.is_tactical=!0,this.tactical_content=this.get_content.filter(e=>{let t=new Date(e.cont_actual_start_date),n=this.tactical_start_date?new Date(this.tactical_start_date):null,r=this.tactical_end_date?new Date(this.tactical_end_date):null;return n&&r?t>=n&&t<=r:!1}),this.tactical_colletrel=this.get_collateral.filter(e=>{let t=new Date(e.Col_actual_start_date),n=this.tactical_start_date?new Date(this.tactical_start_date):null,r=this.tactical_end_date?new Date(this.tactical_end_date):null;return n&&r?t>=n&&t<=r:!1}),this.tactical_calender=this.get_marketing_calender.filter(e=>{let t=new Date(e.Cal_actual_start_date),n=this.tactical_start_date?new Date(this.tactical_start_date):null,r=this.tactical_end_date?new Date(this.tactical_end_date):null;return n&&r?t>=n&&t<=r:!1}),this.tactical_engagement=this.get_engagement_analyzing.filter(e=>{let t=new Date(e.Eng_actual_start_date),n=this.tactical_start_date?new Date(this.tactical_start_date):null,r=this.tactical_end_date?new Date(this.tactical_end_date):null;return n&&r?t>=n&&t<=r:!1}),this.tactical_task_progress=this.get_task_progress_data.filter(e=>{let t=new Date(e.Mls_actual_start_date),n=this.tactical_start_date?new Date(this.tactical_start_date):null,r=this.tactical_end_date?new Date(this.tactical_end_date):null;return n&&r?t>=n&&t<=r:!1}),this.is_strategic=!1}selectedMonth=new Date().getMonth()+1;selected_month;selected_Year=new Date().getFullYear();months=[{name:"January",value:1},{name:"February",value:2},{name:"March",value:3},{name:"April",value:4},{name:"May",value:5},{name:"June",value:6},{name:"July",value:7},{name:"August",value:8},{name:"September",value:9},{name:"October",value:10},{name:"November",value:11},{name:"December",value:12}];years=[];strategic_content=[];strategic_colletrel=[];strategic_calender=[];strategic_engagement=[];strategic_task_progress=[];strategic_total_leads=[];strategic_total_Goal=null;strategic_total_actual=null;Strategic_Goal_Cost=null;Strategic_Actual_Cost=null;is_strategic=!1;strategic_meeting(){this.is_strategic=!0,this.is_tactical=!1,setTimeout(()=>{this.get_strategic_data()},100)}get_strategic_data(){this.selected_month=this.selectedMonth,this.strategic_content=this.get_content.filter(e=>{let t=new Date(e.cont_actual_start_date);return t.getMonth()+1===parseInt(this.selected_month)&&t.getFullYear()===this.selected_Year}),this.strategic_colletrel=this.get_collateral.filter(e=>{let t=new Date(e.Col_actual_start_date);return t.getMonth()+1===parseInt(this.selected_month)&&t.getFullYear()===this.selected_Year}),this.strategic_calender=this.get_marketing_calender.filter(e=>{let t=new Date(e.Cal_actual_start_date);return t.getMonth()+1===parseInt(this.selected_month)&&t.getFullYear()===this.selected_Year}),this.Strategic_Goal_Cost=this.strategic_calender.reduce((e,t)=>e+t.Cal_goal_cost,0),this.Strategic_Actual_Cost=this.strategic_calender.reduce((e,t)=>e+t.Cal_actual_cost,0),this.strategic_engagement=this.get_engagement_analyzing.filter(e=>{let t=new Date(e.Eng_actual_start_date);return t.getMonth()+1===parseInt(this.selected_month)&&t.getFullYear()===this.selected_Year}),this.strategic_task_progress=this.get_task_progress_data.filter(e=>{let t=new Date(e.Mls_actual_start_date);return t.getMonth()+1===parseInt(this.selected_month)&&t.getFullYear()===this.selected_Year}),this.strategic_total_leads=this.get_total_leads.filter(e=>{let t=new Date(e.Tol_actual_date);return t.getMonth()+1===parseInt(this.selected_month)&&t.getFullYear()===this.selected_Year}),this.strategic_total_Goal=this.strategic_total_leads.reduce((e,t)=>e+t.Tol_goal,0),this.strategic_total_actual=this.strategic_total_leads.reduce((e,t)=>e+t.Tol_actual,0)}is_Statistics_chart=!1;Statistics_chart(){this.is_Statistics_chart=!0,this.is_Statistics_table=!1}is_Statistics_table=!1;Statistics_table(){this.is_Statistics_table=!0,this.is_Statistics_chart=!1}Statistics_table_data=[];get_Statistics_table(){let e=`${this.apiService.marketing_meeting_data_api()}?ProjectID=${this.project_id}`;this.http.get(e).subscribe(t=>{this.Statistics_table_data=t.data,console.log(this.Statistics_table_data,"Here is meeting values")},t=>{console.error("Error fetching items",t)})}get_total_leads=[];totalActual;totalGoal;totalTolGoal=0;get_total_leads_api(){let e=`${this.apiService.marketing_meeting_data_api()}?ProjectID=${this.project_id}`;this.http.get(e).subscribe(t=>{this.get_total_leads=t.data,this.get_total_leads&&this.get_total_leads.length>0&&(this.totalTolGoal=this.get_total_leads.reduce((n,r)=>n+r.Tol_goal,0)),this.totalGoal=this.get_total_leads.reduce((n,r)=>n+r.GoalLeads,0),this.totalActual=this.get_total_leads.reduce((n,r)=>n+r.NumberOfLeads,0),console.log(this.Statistics_table_data,"Here is meeting values")},t=>{console.error("Error fetching items",t)})}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(Vn),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-marketing-status"]],decls:40,vars:21,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"bradcrumb-card"],[1,"container","my-4"],[1,"form-group","module-dropdown"],["for","moduleSelect"],["id","moduleSelect",1,"custom-input",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"module-card",2,"width","100%"],[1,"module-list"],[3,"ngClass","click",4,"ngFor","ngForOf"],["tabindex","-1","role","dialog",1,"modal",3,"ngClass"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-body"],[1,"download-btn",3,"click"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["class","container my-5",4,"ngIf"],["class","mt-5",4,"ngIf"],[4,"ngIf"],[3,"value"],[3,"click","ngClass"],[1,"container","my-5"],[1,"row"],[1,"col"],["for",""],["id","fromDate","type","date",1,"custom-input",3,"ngModelChange","ngModel"],["id","toDate","type","date",1,"custom-input",3,"ngModelChange","ngModel"],[1,"filter-btn",3,"click"],["id","content-to-pdf",1,"table-responsive"],[1,"table","table-responsive","table-bordered","content-table"],["colspan","9",1,"main-header"],[1,"header-row"],[1,"headers-title"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["rowspan","2",1,"vertical-center"],[1,"goal-color"],[1,"actual-color"],["colspan","9",2,"text-align","center"],["colspan","13",1,"main-header"],["rowspan","2","colspan","2",1,"vertical-center"],["colspan","5",1,"goal-color"],["rowspan","2","colspan","2"],["colspan","5",1,"actual-color"],["colspan","8",2,"text-align","center"],[1,"mt-5"],[1,"table","table-bordered","table-striped"],[1,"table-header"],["colspan","14",1,"main-header"],[1,"goal"],[1,"actual"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[1,"table-cell"],[1,"table-cell","goal-cell"],["colspan","3"],["colspan","4",2,"text-align","center"],["colspan","7",1,"main-header"],[1,"btn","btn-secondary",3,"click"],[1,"meeting-header"],["id","content-to-pdf",1,"table-responsive","mt-5","table-size"],["colspan","10",2,"text-align","center"],[1,"filter-container"],["for","month"],["id","month",3,"ngModelChange","change","ngModel"],["for","year"],["id","year",3,"ngModelChange","change","ngModel"],[1,"table-responsive","mt-5","table-size"],[1,"mt-3"],[1,"submit-btn",3,"click"],["class","task-chart-card",4,"ngIf"],["class","table-cards",4,"ngIf"],[1,"task-chart-card"],[2,"color","#6f6f90"],[1,"table-cards"],["colspan","5",2,"text-align","center"]],template:function(t,n){t&1&&(c(0,"app-header",1),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"p"),h(6),u()(),c(7,"div",6)(8,"div",7)(9,"label",8),h(10,"Select Module"),u(),c(11,"select",9),vt("ngModelChange",function(s){return _t(n.selectedModule,s)||(n.selectedModule=s),s}),c(12,"option",10),h(13,"Select a Module"),u(),rt(14,eW,2,2,"option",11),u()(),c(15,"div",12)(16,"ul",13),rt(17,nW,2,4,"li",14),u()(),c(18,"div",15)(19,"div",16)(20,"div",17)(21,"div",18)(22,"p"),h(23,"Slect Format"),u()(),c(24,"div",19)(25,"button",20),lt("click",function(){return n.downloadPDF()}),h(26,"PDF"),u(),c(27,"button",20),lt("click",function(){return n.downloadCSV()}),h(28,"CSV"),u()(),c(29,"div",21)(30,"button",22),lt("click",function(){return n.closeModal()}),h(31,"Close"),u()()()()(),rt(32,aW,55,9,"div",23)(33,dW,57,9,"div",23)(34,mW,56,10,"div",23)(35,xW,53,9,"div",23)(36,MW,23,3,"div",24)(37,kW,51,9,"div",23)(38,SG,8,2,"div",25)(39,TG,8,2,"div",25),u()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(17,QH,!n.isSidebarOpen)),_(4),A(n.project_names),_(5),gt("ngModel",n.selectedModule),_(3),D("ngForOf",n.modules),_(3),D("ngForOf",n.modules),_(),ed("display",n.isModalOpen?"block":"none"),D("ngClass",te(19,Th,n.isModalOpen)),_(14),D("ngIf",n.selectedModule==="Content Tracker"),_(),D("ngIf",n.selectedModule==="Collateral Tracker"),_(),D("ngIf",n.selectedModule==="Marketing Calender"),_(),D("ngIf",n.selectedModule==="Engagement Analyzing"),_(),D("ngIf",n.selectedModule==="Total leads"),_(),D("ngIf",n.selectedModule==="Task Progress"),_(),D("ngIf",n.selectedModule==="Meeting"),_(),D("ngIf",n.selectedModule==="Statistics"))},dependencies:[en,Jn,Sn,Ri,Li,yi,Si,oi,ni,on,ln,X1,Qr],styles:[".sts-complete[_ngcontent-%COMP%]{background-color:green;color:#fff}.not-planed[_ngcontent-%COMP%]{background-color:#e7cef3;color:#5b3283}.team[_ngcontent-%COMP%]{background-color:#5b3283;color:#e7cef3}.not-assigned[_ngcontent-%COMP%]{background-color:#b00200;color:#fff}.goal[_ngcontent-%COMP%]{background-color:#d6a6be;text-align:center}.actual[_ngcontent-%COMP%]{background-color:#92c47d;text-align:center}.sts-all[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{text-align:center;transition:all .3s ease}tr[_ngcontent-%COMP%]{text-align:center}.main-header[_ngcontent-%COMP%]{background-color:#741b48;color:#fff}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;transition:opacity .3s ease;opacity:0;visibility:hidden}.modal.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-dialog[_ngcontent-%COMP%]{max-width:500px;margin:auto}.filter_card[_ngcontent-%COMP%]{margin:5%}.table-size[_ngcontent-%COMP%]{width:105%}.bg-green[_ngcontent-%COMP%]{background-color:green;color:#fff}.bg-orange[_ngcontent-%COMP%]{background-color:orange;color:#fff}.bg-red[_ngcontent-%COMP%]{background-color:red;color:#fff}.meeting-header[_ngcontent-%COMP%]{background-color:#5b3283;color:#fff;font-size:18px;padding:5px;margin-top:5%;text-align:center}.barchart-card[_ngcontent-%COMP%]{background-color:#fff;padding:3%;border-radius:12px;box-shadow:0 4px 12px #0000001a;transition:transform .3s ease,box-shadow .3s ease}.barchart-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 20px #0003;transform:translateY(-5px)}.barchart-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0}.filter-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:10px;background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 8px #0000001a;max-width:600px;margin:20px auto}.filter-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#555;font-size:14px}.filter-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 12px;font-size:14px;color:#333;border:1px solid #ccc;border-radius:5px;background-color:#fff;transition:border-color .3s,box-shadow .3s}.filter-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d}.filter-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:10px}.goal-cell[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}.content-table[_ngcontent-%COMP%]{margin:20px 0;font-size:16px;text-align:center}.header-row[_ngcontent-%COMP%]{background-color:#6a1b47;color:#fff}.goal-header[_ngcontent-%COMP%], .actual-header[_ngcontent-%COMP%]{color:#000;font-weight:700}.goal-header[_ngcontent-%COMP%]{background-color:#d7a0b1}.actual-header[_ngcontent-%COMP%]{background-color:#a3d5a6}.update-icon[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#6a1b47;font-size:18px;text-decoration:none}.goal-color[_ngcontent-%COMP%]{background-color:#d6a6be}.actual-color[_ngcontent-%COMP%]{background-color:#92c47d}.vertical-center[_ngcontent-%COMP%], .table-custom[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}.bg-light-pink[_ngcontent-%COMP%]{background-color:#e7c4c4}.bg-light-green[_ngcontent-%COMP%]{background-color:#98d98e}.headers-clr[_ngcontent-%COMP%]{background-color:#b9f1fe}.headers-title[_ngcontent-%COMP%]{background-color:#ffefe5}.task-chart-card[_ngcontent-%COMP%]{background-color:#ccc;padding:20px;width:100%;margin-top:5%;border-radius:12px;box-shadow:5px 5px 15px #0003,-5px -5px 15px #ffffff80;transition:transform .3s ease,box-shadow .3s ease}.task-chart-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:10px 10px 25px #0000004d,-10px -10px 25px #ffffff80}.table-cards[_ngcontent-%COMP%]{background-color:#ccc;padding:20px;width:100%;margin:50px auto;border-radius:12px;box-shadow:5px 5px 15px #0003,-5px -5px 15px #ffffff80;transition:transform .3s ease,box-shadow .3s ease}.table-cards[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:10px 10px 25px #0000004d,-10px -10px 25px #ffffff80}.table-cards[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-cards[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-cards[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 20px;text-align:center;font-size:16px;border-bottom:1px solid #ddd}.table-cards[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#3b3b3b;color:#fff;font-weight:600;text-transform:uppercase}.table-cards[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e9f5ff}.table-cards[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f1f1f1}.table-cards[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:15px;color:#333}.table-cards[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{transition:background-color .2s ease}.table-cards[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.button-container[_ngcontent-%COMP%]{text-align:center}"]})};var kG=i=>({"full-width":i}),$1=i=>["/view-goals",i],K1=i=>["/Actual-task",i],Z1=i=>["/marketing-status",i],J1=class i{constructor(e){this.userService=e}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}ngOnInit(){this.get_data()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}project1=1;project2=2;project3=3;project4=4;static \u0275fac=function(t){return new(t||i)(Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-project-marketing"]],decls:70,vars:40,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container",2,"margin-top","10%"],[1,"row"],[1,"col","mt-5"],[1,"projects-card"],["src","/assets/images/Anbu-Avenue.jpg","alt","",1,"project-img"],[1,"projects-card-txt"],[2,"margin-bottom","5px"],[1,"banner-btn"],[3,"routerLink"],["src","/assets/images/RVS.jpg","alt","",1,"project-img"],["src","/assets/images/agasthya-prime.png","alt","",1,"project-img"],["src","/assets/images/loginimg.jpg","alt","",1,"project-img"]],template:function(t,n){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),Rt(7,"img",7),c(8,"div",8)(9,"h4",9),h(10,"Komarapalayam"),u()(),c(11,"div",10)(12,"a",11),Rt(13,"span"),h(14,"Add Goal"),u(),c(15,"a",11),Rt(16,"span"),h(17,"Update Actual"),u(),c(18,"a",11),Rt(19,"span"),h(20,"Status"),u()()()(),c(21,"div",5)(22,"div",6),Rt(23,"img",12),c(24,"div",8)(25,"h4",9),h(26,"Sangagiri"),u()(),c(27,"div",10)(28,"a",11),Rt(29,"span"),h(30,"Add Goal"),u(),c(31,"a",11),Rt(32,"span"),h(33,"Update Actual"),u(),c(34,"a",11),Rt(35,"span"),h(36,"Status"),u()()()()(),c(37,"div",4)(38,"div",5)(39,"div",6),Rt(40,"img",13),c(41,"div",8)(42,"h4",9),h(43,"Appakudal"),u()(),c(44,"div",10)(45,"a",11),Rt(46,"span"),h(47,"Add Goal"),u(),c(48,"a",11),Rt(49,"span"),h(50,"Update Actual"),u(),c(51,"a",11),Rt(52,"span"),h(53,"Status"),u()()()(),c(54,"div",5)(55,"div",6),Rt(56,"img",14),c(57,"div",8)(58,"h4",9),h(59,"Agasthya Developer"),u()(),c(60,"div",10)(61,"a",11),Rt(62,"span"),h(63,"Add Goal"),u(),c(64,"a",11),Rt(65,"span"),h(66,"Update Actual"),u(),c(67,"a",11),Rt(68,"span"),h(69,"Status"),u()()()()()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(14,kG,!n.isSidebarOpen)),_(10),D("routerLink",te(16,$1,n.project1)),_(3),D("routerLink",te(18,K1,n.project1)),_(3),D("routerLink",te(20,Z1,n.project1)),_(10),D("routerLink",te(22,$1,n.project2)),_(3),D("routerLink",te(24,K1,n.project2)),_(3),D("routerLink",te(26,Z1,n.project2)),_(11),D("routerLink",te(28,$1,n.project3)),_(3),D("routerLink",te(30,K1,n.project3)),_(3),D("routerLink",te(32,Z1,n.project3)),_(10),D("routerLink",te(34,$1,n.project4)),_(3),D("routerLink",te(36,K1,n.project4)),_(3),D("routerLink",te(38,Z1,n.project4)))},dependencies:[en,di,on,ln],styles:[".project-img[_ngcontent-%COMP%]{height:150px;width:100%}.projects-card[_ngcontent-%COMP%]{background-color:#5e0f80;border-radius:10px;display:flex;display:inline-block;padding:10px;color:#fff;cursor:pointer;transition:transform .3s ease,color .3s ease}.projects-card[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.projects-card-txt[_ngcontent-%COMP%]{text-align:center;border:1px solid white;padding:5px}.banner-btn[_ngcontent-%COMP%]{margin:10px auto 0}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:inline-block;margin:0 10px;color:#fff;border:.5px solid #fff;position:relative;z-index:1;transition:color .5s;padding:10px}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:0;height:100%;position:absolute;top:0;left:0;background:#fff;z-index:-1;transition:.5s}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{width:100%;color:#000}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000}"]})};var IG=i=>({"full-width":i});function DG(i,e){if(i&1){let t=Ft();c(0,"div",26)(1,"div",27)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",28),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function PG(i,e){if(i&1){let t=Ft();c(0,"li",31),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.selectTask_content(r))}),h(1),u()}if(i&2){let t=e.$implicit;_(),de(" ",t.Marketing_task_name," ")}}function RG(i,e){if(i&1&&(c(0,"div",29)(1,"ul"),rt(2,PG,2,1,"li",30),u()()),i&2){let t=I(2);_(2),D("ngForOf",t.filteredTasks)}}function LG(i,e){if(i&1){let t=Ft();c(0,"div",6),rt(1,DG,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Content Tracker"),u()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"div",13)(10,"label"),h(11,"Task Name:"),u(),c(12,"input",14),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.cont_Task_name,r)||(s.cont_Task_name=r),q(r)}),lt("input",function(r){G(t);let s=I();return q(s.onSearch_content(r))}),u(),rt(13,RG,3,1,"div",15),u()(),c(14,"div",12)(15,"label"),h(16,"Task Quantity:"),u(),c(17,"input",16),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.cont_goal_quantity,r)||(s.cont_goal_quantity=r),q(r)}),u()()(),c(18,"div",11)(19,"div",12)(20,"label"),h(21,"Task Quality:"),u(),c(22,"input",17),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.cont_goal_quality,r)||(s.cont_goal_quality=r),q(r)}),u()(),c(23,"div",12)(24,"label"),h(25,"Start Date:"),u(),c(26,"input",18),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.goal_start_date,r)||(s.goal_start_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.updateEndDateLimit())}),u()()(),c(27,"div",11)(28,"div",12)(29,"label"),h(30,"End Date "),c(31,"span",19),h(32,"(End date cannot be before start date)"),u(),h(33," :"),u(),c(34,"input",20),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.goal_end_date,r)||(s.goal_end_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.calculateNumberOfDays())}),u()(),c(35,"div",12)(36,"label"),h(37,"Number of Days:"),u(),c(38,"input",21),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.goal_no_of_days,r)||(s.goal_no_of_days=r),q(r)}),u()()(),c(39,"div",11)(40,"div",12)(41,"label"),h(42,"Assign to:"),u(),c(43,"input",22),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.cont_assigned_to,r)||(s.cont_assigned_to=r),q(r)}),u()(),c(44,"div",12)(45,"label"),h(46,"Designation:"),u(),c(47,"select",23)(48,"option",24),h(49,"Select Designation"),u(),c(50,"option",24),h(51,"Marketing Head"),u(),c(52,"option",24),h(53,"Marketing Executive"),u(),c(54,"option",24),h(55,"Digital Marketing Executive"),u()()(),Rt(56,"div",12),u(),c(57,"button",25),lt("click",function(){G(t);let r=I();return q(r.create_content_task())}),h(58,"Create"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(11),gt("ngModel",t.cont_Task_name),_(),D("ngIf",t.cont_Task_name.length>0),_(4),gt("ngModel",t.cont_goal_quantity),_(5),gt("ngModel",t.cont_goal_quality),_(4),gt("ngModel",t.goal_start_date),_(8),gt("ngModel",t.goal_end_date),D("min",t.minEndDate),_(4),gt("ngModel",t.goal_no_of_days),_(5),gt("ngModel",t.cont_assigned_to)}}function OG(i,e){if(i&1){let t=Ft();c(0,"div",26)(1,"div",27)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",28),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function NG(i,e){if(i&1){let t=Ft();c(0,"li",31),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.selectTask_Collateral(r))}),h(1),u()}if(i&2){let t=e.$implicit;_(),de(" ",t.Marketing_task_name," ")}}function FG(i,e){if(i&1&&(c(0,"div",29)(1,"ul"),rt(2,NG,2,1,"li",30),u()()),i&2){let t=I(2);_(2),D("ngForOf",t.filteredTasks)}}function BG(i,e){if(i&1){let t=Ft();c(0,"div",32),rt(1,OG,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Collateral Tracker"),u()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Task Name:"),u(),c(11,"input",14),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.col_Task_name,r)||(s.col_Task_name=r),q(r)}),lt("input",function(r){G(t);let s=I();return q(s.onSearch_Collateral(r))}),u(),rt(12,FG,3,1,"div",15),u(),c(13,"div",12)(14,"label"),h(15,"Task Quantity:"),u(),c(16,"input",16),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.col_goal_quantity,r)||(s.col_goal_quantity=r),q(r)}),u()()(),c(17,"div",11)(18,"div",12)(19,"label"),h(20,"Task Quality:"),u(),c(21,"input",17),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.col_goal_quality,r)||(s.col_goal_quality=r),q(r)}),u()(),c(22,"div",12)(23,"label"),h(24,"Cost:"),u(),c(25,"input",33),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Col_goal_cost,r)||(s.Col_goal_cost=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.updateEndDateLimit())}),u()()(),c(26,"div",11)(27,"div",12)(28,"label"),h(29,"Start Date:"),u(),c(30,"input",18),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.goal_start_date,r)||(s.goal_start_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.updateEndDateLimit())}),u()(),c(31,"div",12)(32,"label"),h(33,"End Date "),c(34,"span",19),h(35,"(End date cannot be before start date)"),u(),h(36," :"),u(),c(37,"input",20),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.goal_end_date,r)||(s.goal_end_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.calculateNumberOfDays())}),u()()(),c(38,"div",11)(39,"div",12)(40,"label"),h(41,"Number of Days:"),u(),c(42,"input",34),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.goal_no_of_days,r)||(s.goal_no_of_days=r),q(r)}),u()(),c(43,"div",12)(44,"label"),h(45,"Assign to:"),u(),c(46,"input",22),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.col_assigned_to,r)||(s.col_assigned_to=r),q(r)}),u()()(),c(47,"button",25),lt("click",function(){G(t);let r=I();return q(r.create_collateral_task())}),h(48,"Create"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.col_Task_name),_(),D("ngIf",t.col_Task_name.length>0),_(4),gt("ngModel",t.col_goal_quantity),_(5),gt("ngModel",t.col_goal_quality),_(4),gt("ngModel",t.Col_goal_cost),_(5),gt("ngModel",t.goal_start_date),_(7),gt("ngModel",t.goal_end_date),D("min",t.minEndDate),_(5),gt("ngModel",t.goal_no_of_days),_(4),gt("ngModel",t.col_assigned_to)}}function VG(i,e){if(i&1){let t=Ft();c(0,"div",26)(1,"div",27)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",28),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function UG(i,e){if(i&1&&(c(0,"option",41),h(1),u()),i&2){let t=e.$implicit;D("ngValue",t),_(),A(t.Marketing_task_name)}}function zG(i,e){if(i&1){let t=Ft();c(0,"div",32),rt(1,VG,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Marketing Calender (Online & Offline Activites)"),u()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Task Name:"),u(),c(11,"select",35),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.cal_selected_task,r)||(s.cal_selected_task=r),q(r)}),rt(12,UG,2,2,"option",36),u()(),c(13,"div",12)(14,"label"),h(15,"Task Quantity:"),u(),c(16,"input",16),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.cal_goal_quantity,r)||(s.cal_goal_quantity=r),q(r)}),u()()(),c(17,"div",11)(18,"div",12)(19,"label"),h(20,"Cost:"),u(),c(21,"input",37),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.cal_goal_cost,r)||(s.cal_goal_cost=r),q(r)}),u()(),c(22,"div",12)(23,"label"),h(24,"Start Date:"),u(),c(25,"input",18),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.goal_start_date,r)||(s.goal_start_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.updateEndDateLimit())}),u()()(),c(26,"div",11)(27,"div",12)(28,"label"),h(29,"End Date "),c(30,"span",19),h(31,"(End date cannot be before start date)"),u(),h(32," :"),u(),c(33,"input",20),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.goal_end_date,r)||(s.goal_end_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.calculateNumberOfDays())}),u()(),c(34,"div",12)(35,"label"),h(36,"Frequency:"),u(),c(37,"input",38),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Cal_goal_Frequency,r)||(s.Cal_goal_Frequency=r),q(r)}),u()()(),c(38,"div",11)(39,"div",12)(40,"label"),h(41,"Assign To:"),u(),c(42,"input",22),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.cal_assigned_to,r)||(s.cal_assigned_to=r),q(r)}),u()(),c(43,"div",12)(44,"label",39),h(45,"Select Mode"),u(),c(46,"select",40),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Cal_goal_mode,r)||(s.Cal_goal_mode=r),q(r)}),c(47,"option",24),h(48,"Select a Mode"),u(),c(49,"option"),h(50,"Online"),u(),c(51,"option"),h(52,"Offline"),u()()()(),c(53,"button",25),lt("click",function(){G(t);let r=I();return q(r.create_marketing_task())}),h(54,"Create"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.cal_selected_task),_(),D("ngForOf",t.get_manage_task),_(4),gt("ngModel",t.cal_goal_quantity),_(5),gt("ngModel",t.cal_goal_cost),_(4),gt("ngModel",t.goal_start_date),_(8),gt("ngModel",t.goal_end_date),D("min",t.minEndDate),_(4),gt("ngModel",t.Cal_goal_Frequency),_(5),gt("ngModel",t.cal_assigned_to),_(4),gt("ngModel",t.Cal_goal_mode)}}function jG(i,e){if(i&1){let t=Ft();c(0,"div",26)(1,"div",27)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",28),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function HG(i,e){if(i&1){let t=Ft();c(0,"li",31),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.selectTask_engagement(r))}),h(1),u()}if(i&2){let t=e.$implicit;_(),de(" ",t.Marketing_task_name," ")}}function WG(i,e){if(i&1&&(c(0,"div",29)(1,"ul"),rt(2,HG,2,1,"li",30),u()()),i&2){let t=I(2);_(2),D("ngForOf",t.filteredTasks)}}function GG(i,e){if(i&1){let t=Ft();c(0,"div",32),rt(1,jG,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Engagement Analyzing Tracker (Engagement for Online Activites)"),u()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Task Name:"),u(),c(11,"input",14),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.eng_Task_name,r)||(s.eng_Task_name=r),q(r)}),lt("input",function(r){G(t);let s=I();return q(s.onSearch_engagement(r))}),u(),rt(12,WG,3,1,"div",15),u(),c(13,"div",12)(14,"label"),h(15,"Likes:"),u(),c(16,"input",42),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.eng_goal_like,r)||(s.eng_goal_like=r),q(r)}),u()()(),c(17,"div",11)(18,"div",12)(19,"label"),h(20,"Followers"),u(),c(21,"input",43),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.eng_goal_followers,r)||(s.eng_goal_followers=r),q(r)}),u()(),c(22,"div",12)(23,"label"),h(24,"Views\\Reach"),u(),c(25,"input",44),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Eng_goal_Views,r)||(s.Eng_goal_Views=r),q(r)}),u()()(),c(26,"div",11)(27,"div",12)(28,"label"),h(29,"Start Date:"),u(),c(30,"input",18),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.goal_start_date,r)||(s.goal_start_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.updateEndDateLimit())}),u()(),c(31,"div",12)(32,"label"),h(33,"End Date "),c(34,"span",19),h(35,"(End date cannot be before start date)"),u(),h(36," :"),u(),c(37,"input",20),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.goal_end_date,r)||(s.goal_end_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.calculateNumberOfDays())}),u()()(),c(38,"div",11)(39,"div",12)(40,"label"),h(41,"Number of Days:"),u(),c(42,"input",21),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.goal_no_of_days,r)||(s.goal_no_of_days=r),q(r)}),u()()(),c(43,"button",25),lt("click",function(){G(t);let r=I();return q(r.create_Engagement())}),h(44,"Create"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.eng_Task_name),_(),D("ngIf",t.eng_Task_name.length>0),_(4),gt("ngModel",t.eng_goal_like),_(5),gt("ngModel",t.eng_goal_followers),_(4),gt("ngModel",t.Eng_goal_Views),_(5),gt("ngModel",t.goal_start_date),_(7),gt("ngModel",t.goal_end_date),D("min",t.minEndDate),_(5),gt("ngModel",t.goal_no_of_days)}}function qG(i,e){if(i&1){let t=Ft();c(0,"div",26)(1,"div",27)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",28),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function XG(i,e){if(i&1&&(c(0,"option",41),h(1),u()),i&2){let t=e.$implicit;D("ngValue",t),_(),A(t.Marketing_task_name)}}function YG(i,e){if(i&1){let t=Ft();c(0,"div",32),rt(1,qG,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Results - Total Leads"),u()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Task Name:"),u(),c(11,"select",35),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.selected_task,r)||(s.selected_task=r),q(r)}),rt(12,XG,2,2,"option",36),u()(),c(13,"div",12)(14,"label"),h(15,"Goal Leads:"),u(),c(16,"input",45),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Tol_goal_leads,r)||(s.Tol_goal_leads=r),q(r)}),u()()(),c(17,"div",11)(18,"div",12)(19,"label",46),h(20,"Goal Conversion"),u(),c(21,"input",47),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Tol_goal_conversion,r)||(s.Tol_goal_conversion=r),q(r)}),u()(),c(22,"div",12)(23,"label",46),h(24,"Goal Registration"),u(),c(25,"input",47),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Tol_goal_registration,r)||(s.Tol_goal_registration=r),q(r)}),u()()(),c(26,"button",25),lt("click",function(){G(t);let r=I();return q(r.create_total_lead())}),h(27,"Create"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.selected_task),_(),D("ngForOf",t.get_manage_task),_(4),gt("ngModel",t.Tol_goal_leads),_(5),gt("ngModel",t.Tol_goal_conversion),_(4),gt("ngModel",t.Tol_goal_registration)}}function $G(i,e){if(i&1){let t=Ft();c(0,"div",26)(1,"div",27)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",28),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function KG(i,e){if(i&1){let t=Ft();c(0,"div",32),rt(1,$G,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Task Progress"),u()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Description:"),u(),c(11,"input",48),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Mls_description,r)||(s.Mls_description=r),q(r)}),u()(),c(12,"div",12)(13,"label"),h(14,"Start Date:"),u(),c(15,"input",18),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.goal_start_date,r)||(s.goal_start_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.updateEndDateLimit())}),u()()(),c(16,"div",11)(17,"div",12)(18,"label"),h(19,"End Date "),c(20,"span",19),h(21,"(End date cannot be before start date)"),u(),h(22," :"),u(),c(23,"input",20),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.goal_end_date,r)||(s.goal_end_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.calculateNumberOfDays())}),u()(),c(24,"div",12)(25,"label"),h(26,"Number of Days:"),u(),c(27,"input",49),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.goal_no_of_days,r)||(s.goal_no_of_days=r),q(r)}),u()()(),c(28,"div",11)(29,"div",12)(30,"label"),h(31,"Asign to:"),u(),c(32,"input",50),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Mls_assigned_to,r)||(s.Mls_assigned_to=r),q(r)}),u()()(),c(33,"button",25),lt("click",function(){G(t);let r=I();return q(r.create_miscellanous())}),h(34,"Create"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.Mls_description),_(4),gt("ngModel",t.goal_start_date),_(8),gt("ngModel",t.goal_end_date),D("min",t.minEndDate),_(4),gt("ngModel",t.goal_no_of_days),_(5),gt("ngModel",t.Mls_assigned_to)}}function ZG(i,e){if(i&1){let t=Ft();c(0,"div",26)(1,"div",27)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",28),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function JG(i,e){if(i&1){let t=Ft();c(0,"div",56)(1,"div",27)(2,"strong"),h(3,"Error!"),u(),h(4),c(5,"button",28),lt("click",function(){G(t);let r=I(2);return q(r.error_mgs_card=!1)}),h(6,"\xD7"),u()()()}if(i&2){let t=I(2);_(4),de(" ",t.error_message," ")}}function QG(i,e){if(i&1){let t=Ft();c(0,"li",31),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.selectTask_dbsource(r))}),h(1),u()}if(i&2){let t=e.$implicit;_(),de(" ",t.Marketing_task_name," ")}}function tq(i,e){if(i&1&&(c(0,"div",29)(1,"ul"),rt(2,QG,2,1,"li",30),u()()),i&2){let t=I(2);_(2),D("ngForOf",t.filteredTasks)}}function eq(i,e){if(i&1){let t=Ft();c(0,"div",32),rt(1,ZG,7,0,"div",7)(2,JG,7,1,"div",51),c(3,"div",8)(4,"div",9)(5,"label"),h(6,"DataBase Tracker"),u()(),c(7,"div",10)(8,"div",11)(9,"div",12)(10,"label"),h(11,"Name:"),u(),c(12,"input",50),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Db_name_client,r)||(s.Db_name_client=r),q(r)}),u()(),c(13,"div",12)(14,"label"),h(15,"Date:"),u(),c(16,"input",52),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Db_date,r)||(s.Db_date=r),q(r)}),u()()(),c(17,"div",11)(18,"div",12)(19,"div",13)(20,"label"),h(21,"Source:"),u(),c(22,"input",53),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Db_source,r)||(s.Db_source=r),q(r)}),lt("input",function(r){G(t);let s=I();return q(s.onSearch_dbsource(r))}),u(),rt(23,tq,3,1,"div",15),u()(),c(24,"div",12)(25,"label"),h(26,"Location"),u(),c(27,"input",54),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Db_location,r)||(s.Db_location=r),q(r)}),u()()(),c(28,"div",11)(29,"div",12)(30,"label"),h(31,"Contact"),u(),c(32,"input",55),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Db_contact,r)||(s.Db_contact=r),q(r)}),u()()(),c(33,"button",25),lt("click",function(){G(t);let r=I();return q(r.create_dbtracker())}),h(34,"Create"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(),D("ngIf",t.error_mgs_card),_(10),gt("ngModel",t.Db_name_client),_(4),gt("ngModel",t.Db_date),_(6),gt("ngModel",t.Db_source),_(),D("ngIf",t.Db_source.length>0),_(4),gt("ngModel",t.Db_location),_(5),gt("ngModel",t.Db_contact)}}var kh=class i{constructor(e,t,n,r,s){this.route=e;this.apiService=t;this.http=n;this.router=r;this.userService=s}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}current_task=null;updatetask=null;project_id=null;ngOnInit(){this.get_data(),this.route.params.subscribe(e=>{this.current_task=e.taskName,this.updatetask=e.updatetask,this.project_id=parseInt(e.projectid)}),this.apifromservice(),this.get_task(),this.get_task_date()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}postcontenttracker="";createCollateraltracker="";createmarketingcalender="";engagementanalyzingtracker="";marketingtotallead="";miscellaneousurl="";marketing_manage_task="";db_tracker_url="";apifromservice(){this.postcontenttracker=this.apiService.marketing_content_tracker_api(),this.createCollateraltracker=this.apiService.Collateraltrackerapi(),this.createmarketingcalender=this.apiService.marketingcalenderapi(),this.engagementanalyzingtracker=this.apiService.engagementanalyzingapi(),this.marketingtotallead=this.apiService.marketingtotalleadapi(),this.miscellaneousurl=this.apiService.marketingmiscellaneousapi(),this.marketing_manage_task=this.apiService.marketing_manage_task_api(),this.db_tracker_url=this.apiService.sales_dbtracker_api()}filter_task_names;filteredTasks=[];query="";get_task(){this.http.get(this.marketing_manage_task).subscribe(e=>{this.filter_task_names=e})}get_manage_task=[];get_task_date(){this.http.get(this.marketing_manage_task).subscribe(e=>{this.get_manage_task=e},e=>{console.error("Error fetching items",e)})}onSearch_content(e){this.cont_Task_name=e.target.value.toLowerCase(),this.filteredTasks=this.filter_task_names.filter(t=>t.Marketing_task_name.toLowerCase().includes(this.cont_Task_name)),this.cont_Task_name.length===0&&(this.filteredTasks=[])}selectTask_content(e){this.cont_Task_name=e.Marketing_task_name,this.filteredTasks=[]}onSearch_Collateral(e){this.col_Task_name=e.target.value.toLowerCase(),this.filteredTasks=this.filter_task_names.filter(t=>t.Marketing_task_name.toLowerCase().includes(this.col_Task_name)),this.col_Task_name.length===0&&(this.filteredTasks=[])}selectTask_Collateral(e){this.col_Task_name=e.Marketing_task_name,this.filteredTasks=[]}onSearch_Calender(e){this.cal_Task_name=e.target.value.toLowerCase(),this.filteredTasks=this.filter_task_names.filter(t=>t.Marketing_task_name.toLowerCase().includes(this.cal_Task_name)),this.cal_Task_name.length===0&&(this.filteredTasks=[])}selectTask_Calender(e){this.cal_Task_name=e.Marketing_task_name,this.Cal_Task_id=e.Marketing_Task_id,this.filteredTasks=[]}onSearch_engagement(e){this.eng_Task_name=e.target.value.toLowerCase(),this.filteredTasks=this.filter_task_names.filter(t=>t.Marketing_task_name.toLowerCase().includes(this.eng_Task_name)),this.eng_Task_name.length===0&&(this.filteredTasks=[])}selectTask_engagement(e){this.eng_Task_name=e.Marketing_task_name,this.filteredTasks=[]}onSearch_miscellanous(e){this.eng_Task_name=e.target.value.toLowerCase(),this.filteredTasks=this.filter_task_names.filter(t=>t.Marketing_task_name.toLowerCase().includes(this.eng_Task_name)),this.eng_Task_name.length===0&&(this.filteredTasks=[])}selectTask_miscellanous(e){this.eng_Task_name=e.Marketing_task_name,this.filteredTasks=[]}onSearch_dbsource(e){this.Db_source=e.target.value.toLowerCase(),this.filteredTasks=this.filter_task_names.filter(t=>t.Marketing_task_name.toLowerCase().includes(this.Db_source)),this.Db_source.length===0&&(this.filteredTasks=[])}selectTask_dbsource(e){this.Db_source=e.Marketing_task_name,this.task_id=e.Marketing_Task_id,this.filteredTasks=[]}cont_Task_name="";cont_goal_quality;cont_goal_quantity;cont_assigned_by="yoganandhan";cont_assigned_to=null;successmgs=!1;create_content_task(){let e=this.postcontenttracker,t={cont_Task_name:this.cont_Task_name,cont_goal_start_date:this.goal_start_date,cont_goal_end_date:this.goal_end_date,cont_goal_no_of_days:this.goal_no_of_days,cont_goal_quality:this.cont_goal_quality,cont_goal_quantity:this.cont_goal_quantity,cont_assigned_by:this.cont_assigned_by,cont_assigned_to:this.cont_assigned_to,cont_status:"New",Model_name:this.current_task,Project_id:this.project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Content Tracker"),this.router.navigate(["/view-goals",this.project_id])},1e3)},r=>{console.log("Post request failed",r)})}col_Task_name="";col_goal_quality;col_goal_quantity;col_assigned_by="yoganandhan";col_assigned_to=null;Col_goal_cost;create_collateral_task(){let e=this.createCollateraltracker,t={Col_Task_name:this.col_Task_name,Col_goal_start_date:this.goal_start_date,Col_goal_end_date:this.goal_end_date,Col_goal_no_of_days:this.goal_no_of_days,Col_goal_quality:this.col_goal_quality,Col_goal_quantity:this.col_goal_quantity,Col_goal_cost:this.Col_goal_cost,Col_assigned_by:this.col_assigned_by,Col_assigned_to:this.col_assigned_to,Col_status:"New",Model_name:this.current_task,Project_id:this.project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Collateral Tracker"),this.router.navigate(["/view-goals",this.project_id])},1e3)},r=>{console.log("Post request failed",r)})}cal_Task_name="";Cal_Task_id=null;Cal_goal_mode=null;cal_goal_quantity;cal_goal_cost;Cal_goal_Frequency=null;cal_assigned_by="yoganandhan";cal_assigned_to=null;cal_selected_task;create_marketing_task(){let e=this.createmarketingcalender,t={Cal_Task_name:this.cal_selected_task.Marketing_task_name,Cal_Task_id:this.cal_selected_task.Marketing_Task_id,Cal_goal_start_date:this.goal_start_date,Cal_goal_end_date:this.goal_end_date,Cal_goal_Frequency:this.Cal_goal_Frequency,Cal_goal_cost:this.cal_goal_cost,Cal_goal_quantity:this.cal_goal_quantity,Cal_assigned_by:this.cal_assigned_by,Cal_assigned_to:this.cal_assigned_to,Cal_goal_mode:this.Cal_goal_mode,Cal_status:"New",Model_name:this.current_task,Project_id:this.project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Marketing Calender"),this.router.navigate(["/view-goals",this.project_id])},1e3)},r=>{console.log("Post request failed",r)})}eng_Task_name="";eng_goal_like=null;eng_goal_followers=null;Eng_goal_Views=null;create_Engagement(){let e=this.engagementanalyzingtracker,t={Eng_Task_name:this.eng_Task_name,Eng_goal_like:this.eng_goal_like,Eng_goal_followers:this.eng_goal_followers,Eng_goal_Views:this.Eng_goal_Views,Eng_goal_start_date:this.goal_start_date,Eng_goal_end_date:this.goal_end_date,Eng_end_date:this.goal_end_date,Eng_goal_no_of_days:this.goal_no_of_days,Eng_status:"New",Model_name:this.current_task,Project_id:this.project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Engagement Analyzing"),this.router.navigate(["/view-goals",this.project_id])},1e3)},r=>{console.log("Post request failed",r)})}Task_Name=null;Tol_goal_leads=null;Tol_goal_conversion=null;Tol_goal_registration=null;Tol_goal_date=null;selected_task;create_total_lead(){let e=this.marketingtotallead,t={Task_Name:this.selected_task.Marketing_task_name,Task_id:this.selected_task.Marketing_Task_id,Tol_goal_leads:this.Tol_goal_leads,Tol_goal_conversion:this.Tol_goal_conversion,Tol_goal_registration:this.Tol_goal_registration,Project_id:this.project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Total leads"),this.router.navigate(["/view-goals",this.project_id])},1e3)},r=>{console.log("Post request failed",r)})}Db_date=null;Db_source="";task_id=null;Db_name_client="";Db_location="";Db_contact="";error_message="";error_mgs_card=!1;create_dbtracker(){let e=this.db_tracker_url,t={Db_date:this.Db_date,Db_source:this.Db_source,task_id:this.task_id,Db_name_client:this.Db_name_client,Db_location:this.Db_location,Db_contact:this.Db_contact,project_id:this.project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("DataBase Tracker"),this.router.navigate(["/Actual-task",this.project_id])},3e3)},r=>{r.error.Db_contact=="sales_database_tracker with this Db contact already exists."&&(this.error_message="Contact Already exist",setTimeout(()=>{this.error_mgs_card=!0},100)),console.log("Post request error",r)})}Mls_description=null;Mls_goal_no_of_days=null;Mls_assigned_to=null;Mls_assigned_by=null;Mls_status=null;create_miscellanous(){let e=this.miscellaneousurl,t={Mls_description:this.Mls_description,Mls_goal_start_date:this.goal_start_date,Mls_goal_end_date:this.goal_end_date,Mls_goal_no_of_days:this.goal_no_of_days,Mls_assigned_by:"Yoganandhan",Mls_assigned_to:this.Mls_assigned_to,Project_id:this.project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Task Progress"),this.router.navigate(["/view-goals",this.project_id])},1e3)},r=>{console.log("Post request failed",r)})}goal_start_date=null;goal_end_date=null;minEndDate=null;goal_no_of_days=null;updateEndDateLimit(){this.goal_start_date&&(this.minEndDate=this.goal_start_date,this.calculateNumberOfDays())}calculateNumberOfDays(){if(this.goal_start_date&&this.goal_end_date){let e=new Date(this.goal_start_date),n=new Date(this.goal_end_date).getTime()-e.getTime(),r=n>=0?Math.ceil(n/(1e3*3600*24))+1:0;r===1?this.goal_no_of_days=`${r} day`:this.goal_no_of_days=`${r} days`}else this.goal_no_of_days="0 day"}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(Vn),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-add-goals"]],decls:11,vars:11,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mob-res"],["class","container mb-3 card-margin",4,"ngIf"],["class","container card-margin",4,"ngIf"],[1,"container","mb-3","card-margin"],["class","alert-card fade-in",4,"ngIf"],[1,"card","shadow"],[1,"heading-card"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-6"],[1,"search-container"],["type","text","placeholder","Search tasks...",1,"custom-input",3,"ngModelChange","input","ngModel"],["class","task-list",4,"ngIf"],["type","number","placeholder","Enter Quantity",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter Quality",1,"custom-input",3,"ngModelChange","ngModel"],["type","date","name","startDate",1,"custom-input",3,"ngModelChange","change","ngModel"],[2,"font-size","10px","color","red"],["type","date","name","endDate",1,"custom-input",3,"ngModelChange","change","ngModel","min"],["type","text","placeholder","Number of Days","name","numberOfDaysText","readonly","",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter name",1,"custom-input",3,"ngModelChange","ngModel"],["name","","id","",1,"custom-input"],["value",""],[1,"submit-btn",3,"click"],[1,"alert-card","fade-in"],[1,"alert-content"],[1,"close-btn",3,"click"],[1,"task-list"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"container","card-margin"],["type","number","placeholder","Enter Cost","name","startDate",1,"custom-input",3,"ngModelChange","change","ngModel"],["placeholder","Number of Days","type","text","name","numberOfDaysText","readonly","",1,"custom-input",3,"ngModelChange","ngModel"],[1,"custom-input",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],["type","number","placeholder","Enter Cost",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter Frequency",1,"custom-input",3,"ngModelChange","ngModel"],["for","modeSelect"],["id","modeSelect",1,"custom-input",3,"ngModelChange","ngModel"],[3,"ngValue"],["type","number","placeholder","Enter likes",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter Followers",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter Views",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","number","placeholder","Enter Goal Leads",1,"custom-input",3,"ngModelChange","ngModel"],["for",""],["required","","type","number","placeholder","Enter Goal Conversion",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter Description",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Number of Days",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter Name",1,"custom-input",3,"ngModelChange","ngModel"],["class","alert-card-error fade-in",4,"ngIf"],["type","date","name","sDate",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Search Source...",1,"custom-input",3,"ngModelChange","input","ngModel"],["placeholder","Enter Location","type","text","name","Location",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter Contact",1,"custom-input",3,"ngModelChange","ngModel"],[1,"alert-card-error","fade-in"]],template:function(t,n){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3),rt(4,LG,59,10,"div",4)(5,BG,49,11,"div",5)(6,zG,55,11,"div",5)(7,GG,45,10,"div",5)(8,YG,28,6,"div",5)(9,KG,35,7,"div",5)(10,eq,35,8,"div",5),u()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(9,IG,!n.isSidebarOpen)),_(2),D("ngIf",n.current_task==="Content Tracker"),_(),D("ngIf",n.current_task==="Collateral Tracker"),_(),D("ngIf",n.current_task==="Marketing Calender"),_(),D("ngIf",n.current_task==="Engagement Analyzing"),_(),D("ngIf",n.current_task==="Total leads"),_(),D("ngIf",n.current_task==="Task Progress"),_(),D("ngIf",n.current_task==="DataBase Tracker"))},dependencies:[en,Jn,Sn,Ri,Li,yi,Ho,Si,oi,Na,ni,on,ln],styles:[".card-margin[_ngcontent-%COMP%]{margin-top:3%}.custom-input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:5px;font-size:16px;transition:border-color .3s ease}.custom-input[_ngcontent-%COMP%]:focus{border-color:#5e1080;outline:none;box-shadow:0 0 5px #5d1285ad}.custom-label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px;display:block}label[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif}.heading-card[_ngcontent-%COMP%]{background-color:#639;color:#fff;border-top-right-radius:5px;border-top-left-radius:5px;padding:3%;text-align:center;font-size:20px}.mob-res[_ngcontent-%COMP%]{margin-top:5%}@media screen and (max-width: 768px){.mob-res[_ngcontent-%COMP%]{margin-top:20%}}.search-container[_ngcontent-%COMP%]{margin-bottom:20px}.task-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;margin-top:10px;background-color:#fff;box-shadow:0 2px 5px #0000001a;position:fixed}.task-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.task-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px;cursor:pointer;transition:background-color .3s}.task-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.content-below[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border:1px solid #ddd;border-radius:4px}"]})};var nq=i=>({"full-width":i}),iq=i=>({"active-module":i}),tv=i=>["/new-goal",i],rq=i=>["/add-task","Content Tracker",i],sq=i=>["/add-task","Collateral Tracker",i],aq=i=>["/add-task","Marketing Calender",i],oq=i=>["/add-task","Engagement Analyzing",i],lq=i=>["/add-task","Total leads",i],cq=i=>["/add-task","Task Progress",i];function dq(i,e){if(i&1&&(c(0,"option",16),h(1),u()),i&2){let t=e.$implicit;D("value",t),_(),A(t)}}function uq(i,e){if(i&1){let t=Ft();c(0,"li",17),lt("click",function(){let r=G(t).$implicit,s=I();return q(s.selectModule(r))}),h(1),u()}if(i&2){let t=e.$implicit,n=I();D("ngClass",te(2,iq,t===n.selectedModule)),_(),de(" ",t," ")}}function hq(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td"),h(10),Et(11,"date"),u(),c(12,"td"),h(13),Et(14,"date"),u(),c(15,"td"),h(16),u()()),i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.cont_Task_name),_(2),A(t.cont_goal_quantity),_(2),A(t.cont_goal_quality),_(2),A(At(11,7,t.cont_goal_start_date,"dd MMM yy")),_(3),A(At(14,10,t.cont_goal_end_date,"dd MMM yy")),_(3),A(t.cont_goal_no_of_days)}}function pq(i,e){if(i&1&&(pe(0),rt(1,hq,17,13,"tr",25),fe()),i&2){let t=I(2);_(),D("ngForOf",t.getcontent)}}function fq(i,e){i&1&&(c(0,"tr")(1,"td",26),h(2,"No task found"),u()())}function mq(i,e){if(i&1&&(c(0,"div",18)(1,"button",19),h(2,"New Task"),u(),c(3,"button",19),h(4,"Add Task"),u(),c(5,"div",20)(6,"table")(7,"thead")(8,"tr")(9,"th",21),h(10,"Content Tracker (Content Creations)"),u()(),c(11,"tr")(12,"th",22),h(13,"S.No"),u(),c(14,"th",22),h(15,"Tasks"),u(),c(16,"th",23),h(17,"Goal"),u()(),c(18,"tr")(19,"th"),h(20,"Quantity"),u(),c(21,"th"),h(22,"Quality"),u(),c(23,"th"),h(24,"Start Date"),u(),c(25,"th"),h(26,"End Date"),u(),c(27,"th"),h(28,"No of Days"),u()()(),c(29,"tbody"),rt(30,pq,2,1,"ng-container",24)(31,fq,3,0,"ng-template",null,0,De),u()()()()),i&2){let t=an(32),n=I();_(),D("routerLink",te(4,tv,n.project_id)),_(2),D("routerLink",te(6,rq,n.project_id)),_(27),D("ngIf",n.getcontent&&n.getcontent.length>0)("ngIfElse",t)}}function gq(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td"),h(10),Et(11,"date"),u(),c(12,"td"),h(13),Et(14,"date"),u(),c(15,"td"),h(16),u()()),i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.Col_Task_name),_(2),A(t.Col_goal_quantity),_(2),A(t.Col_goal_quality),_(2),A(At(11,7,t.Col_goal_start_date,"dd MMM yy")),_(3),A(At(14,10,t.Col_goal_end_date,"dd MMM yy")),_(3),A(t.Col_goal_no_of_days)}}function _q(i,e){if(i&1&&(pe(0),rt(1,gq,17,13,"tr",25),fe()),i&2){let t=I(2);_(),D("ngForOf",t.getcollateraltask)}}function vq(i,e){i&1&&(c(0,"tr")(1,"td",26),h(2,"No task found"),u()())}function xq(i,e){if(i&1&&(c(0,"div",18)(1,"button",19),h(2,"New Task"),u(),c(3,"button",19),h(4,"Add Task"),u(),c(5,"div",20)(6,"table",27)(7,"thead",28)(8,"tr")(9,"th",29),h(10,"Collateral Tracker (Collateral Designs & Video Making) "),u()(),c(11,"tr")(12,"th",22),h(13,"S.No"),u(),c(14,"th",22),h(15,"Tasks"),u(),c(16,"th",23),h(17,"Goal"),u()(),c(18,"tr")(19,"th"),h(20,"Quantity"),u(),c(21,"th"),h(22,"Quality"),u(),c(23,"th"),h(24,"Start Date"),u(),c(25,"th"),h(26,"End Date"),u(),c(27,"th"),h(28,"No of Days"),u()()(),c(29,"tbody"),rt(30,_q,2,1,"ng-container",24)(31,vq,3,0,"ng-template",null,0,De),u()()()()),i&2){let t=an(32),n=I();_(),D("routerLink",te(4,tv,n.project_id)),_(2),D("routerLink",te(6,sq,n.project_id)),_(27),D("ngIf",n.getcollateraltask&&n.getcollateraltask.length>0)("ngIfElse",t)}}function bq(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td"),h(10),Et(11,"date"),u(),c(12,"td"),h(13),Et(14,"date"),u(),c(15,"td"),h(16),u(),c(17,"td"),h(18),u()()),i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.Cal_Task_name),_(2),A(t.Cal_goal_quantity),_(2),A(t.Cal_goal_cost),_(2),A(At(11,8,t.Cal_goal_start_date,"dd MMM yy")),_(3),A(At(14,11,t.Cal_goal_end_date,"dd MMM yy")),_(3),A(t.Cal_goal_Frequency),_(2),A(t.Cal_goal_mode)}}function yq(i,e){if(i&1&&(pe(0),rt(1,bq,19,14,"tr",25),fe()),i&2){let t=I(2);_(),D("ngForOf",t.getcalendertask)}}function Sq(i,e){i&1&&(c(0,"tr")(1,"td",26),h(2,"No task found"),u()())}function wq(i,e){if(i&1&&(c(0,"div",18)(1,"button",19),h(2,"New Task"),u(),c(3,"button",19),h(4,"Add Task"),u(),c(5,"div",20)(6,"table",27)(7,"thead",28)(8,"tr")(9,"th",30),h(10,"Marketing Calender (Online & Offline Activites) "),u()(),c(11,"tr")(12,"th",22),h(13,"S.No"),u(),c(14,"th",22),h(15,"Tasks"),u(),c(16,"th",31),h(17,"Goal"),u()(),c(18,"tr")(19,"th"),h(20,"Quantity"),u(),c(21,"th"),h(22,"Cost"),u(),c(23,"th"),h(24,"Start Date"),u(),c(25,"th"),h(26,"End Date"),u(),c(27,"th"),h(28,"Frequency"),u(),c(29,"th"),h(30,"Online/Ofline"),u()()(),c(31,"tbody"),rt(32,yq,2,1,"ng-container",24)(33,Sq,3,0,"ng-template",null,0,De),u()()()()),i&2){let t=an(34),n=I();_(),D("routerLink",te(4,tv,n.project_id)),_(2),D("routerLink",te(6,aq,n.project_id)),_(29),D("ngIf",n.getcalendertask&&n.getcalendertask.length>0)("ngIfElse",t)}}function Cq(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td"),h(10),Et(11,"date"),u(),c(12,"td"),h(13),Et(14,"date"),u(),c(15,"td"),h(16),u()()),i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.Eng_Task_name),_(2),A(t.Eng_goal_like),_(2),A(t.Eng_goal_followers),_(2),A(At(11,7,t.Eng_goal_start_date,"dd MMM yy")),_(3),A(At(14,10,t.Eng_goal_end_date,"dd MMM yy")),_(3),A(t.Eng_goal_no_of_days)}}function Mq(i,e){if(i&1&&(pe(0),rt(1,Cq,17,13,"tr",25),fe()),i&2){let t=I(2);_(),D("ngForOf",t.getengagementtask)}}function Eq(i,e){i&1&&(c(0,"tr")(1,"td",32),h(2,"No task found"),u()())}function Aq(i,e){if(i&1&&(c(0,"div",18)(1,"button",19),h(2,"New Task"),u(),c(3,"button",19),h(4,"Add Task"),u(),c(5,"div",20)(6,"table",27)(7,"thead",28)(8,"tr")(9,"th",29),h(10,"Engagement Analyzing Tracker (Engagement for Online Activites)"),u()(),c(11,"tr")(12,"th",22),h(13,"S.No"),u(),c(14,"th",22),h(15,"Tasks"),u(),c(16,"th",23),h(17,"Goal"),u()(),c(18,"tr")(19,"th"),h(20,"Likes"),u(),c(21,"th"),h(22,"Followers"),u(),c(23,"th"),h(24,"Start Date"),u(),c(25,"th"),h(26,"End Date"),u(),c(27,"th"),h(28,"Number of days"),u()()(),c(29,"tbody"),rt(30,Mq,2,1,"ng-container",24)(31,Eq,3,0,"ng-template",null,0,De),u()()()()),i&2){let t=an(32),n=I();_(),D("routerLink",te(4,tv,n.project_id)),_(2),D("routerLink",te(6,oq,n.project_id)),_(27),D("ngIf",n.getengagementtask&&n.getengagementtask.length>0)("ngIfElse",t)}}function Tq(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u()()),i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.Task_Name),_(2),A(t.Tol_goal_leads)}}function kq(i,e){if(i&1&&(pe(0),rt(1,Tq,7,3,"tr",25),fe()),i&2){let t=I(2);_(),D("ngForOf",t.gettotalleads)}}function Iq(i,e){i&1&&(c(0,"tr")(1,"td",32),h(2,"No task found"),u()())}function Dq(i,e){if(i&1&&(c(0,"div",18)(1,"button",19),h(2,"Add Task"),u(),c(3,"div",20)(4,"table",27)(5,"thead",28)(6,"tr")(7,"th",30),h(8,"Results - Total Leads"),u()(),c(9,"tr")(10,"th"),h(11,"S.No"),u(),c(12,"th"),h(13,"Source"),u(),c(14,"th"),h(15,"Goal"),u()()(),c(16,"tbody"),rt(17,kq,2,1,"ng-container",24)(18,Iq,3,0,"ng-template",null,0,De),u()()()()),i&2){let t=an(19),n=I();_(),D("routerLink",te(3,lq,n.project_id)),_(16),D("ngIf",n.gettotalleads&&n.gettotalleads.length>0)("ngIfElse",t)}}function Pq(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),Et(7,"date"),u(),c(8,"td"),h(9),Et(10,"date"),u(),c(11,"td"),h(12),u()()),i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.Mls_description),_(2),A(At(7,5,t.Mls_goal_start_date,"dd MMM yy")),_(3),A(At(10,8,t.Mls_goal_end_date,"dd MMM yy")),_(3),A(t.Mls_goal_no_of_days)}}function Rq(i,e){if(i&1&&(pe(0),rt(1,Pq,13,11,"tr",25),fe()),i&2){let t=I(2);_(),D("ngForOf",t.getmiscellaneousdata)}}function Lq(i,e){i&1&&(c(0,"tr")(1,"td",32),h(2,"No task found"),u()())}function Oq(i,e){if(i&1&&(c(0,"div",18)(1,"button",19),h(2,"Add Task"),u(),c(3,"div",20)(4,"table",27)(5,"thead",28)(6,"tr")(7,"th",30),h(8,"Task Progress"),u()(),c(9,"tr")(10,"th"),h(11,"S.No"),u(),c(12,"th"),h(13,"Description"),u(),c(14,"th"),h(15,"Start Date"),u(),c(16,"th"),h(17,"End Date"),u(),c(18,"th"),h(19,"Number of Days"),u()()(),c(20,"tbody"),rt(21,Rq,2,1,"ng-container",24)(22,Lq,3,0,"ng-template",null,0,De),u()()()()),i&2){let t=an(23),n=I();_(),D("routerLink",te(3,cq,n.project_id)),_(20),D("ngIf",n.getmiscellaneousdata&&n.getmiscellaneousdata.length>0)("ngIfElse",t)}}var Q1=class i{constructor(e,t,n,r){this.route=e;this.apiService=t;this.http=n;this.userService=r}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}selectedModule="";modules=["Content Tracker","Collateral Tracker","Marketing Calender","Engagement Analyzing","Total leads","Task Progress"];selectModule(e){this.selectedModule=e}currentCard=null;project_id=null;card_name="";retrive_data(){this.card_name=this.apiService.get_redirect_card(),this.selectedModule=this.card_name}ngOnInit(){this.get_data(),this.route.params.subscribe(e=>{this.project_id=parseInt(e.projectid)}),this.getcontenttask(),this.getcollateral(),this.getmarketingcalender(),this.getengagement(),this.gettotallead(),this.getmiscellaneous(),this.project_name(),this.retrive_data()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}project_names="";project_name(){this.project_id==1?this.project_names="ANBU AVENUE":this.project_id==2?this.project_names="RVS AVENUE":this.project_id==3?this.project_names="AGASTHYA PRIME":this.project_id==4&&(this.project_names="AGASTHYA DEVELOPER")}getcontent=[];getcontenttask(){this.http.get(this.apiService.marketing_content_tracker_api()).subscribe(e=>{this.getcontent=e.filter(t=>t.Project_id===this.project_id)},e=>{console.error("Error fetching items",e)})}getcollateraltask=[];getcollateral(){this.http.get(this.apiService.Collateraltrackerapi()).subscribe(e=>{this.getcollateraltask=e.filter(t=>t.Project_id===this.project_id)},e=>{console.error("Error fetching items",e)})}getcalendertask=[];getmarketingcalender(){this.http.get(this.apiService.marketingcalenderapi()).subscribe(e=>{this.getcalendertask=e.filter(t=>t.Project_id===this.project_id)},e=>{console.error("Error fetching items",e)})}getengagementtask=[];getengagement(){this.http.get(this.apiService.engagementanalyzingapi()).subscribe(e=>{this.getengagementtask=e.filter(t=>t.Project_id===this.project_id)},e=>{console.error("Error fetching items",e)})}gettotalleads=[];gettotallead(){this.http.get(this.apiService.marketingtotalleadapi()).subscribe(e=>{this.gettotalleads=e.filter(t=>t.Project_id===this.project_id)},e=>{console.error("Error fetching items",e)})}getmiscellaneousdata=[];getmiscellaneous(){this.http.get(this.apiService.marketingmiscellaneousapi()).subscribe(e=>{this.getmiscellaneousdata=e.filter(t=>t.Project_id===this.project_id)},e=>{console.error("Error fetching items",e)})}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-view-goals"]],decls:24,vars:14,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"bradcrumb-card"],[1,"container","my-4"],[1,"form-group","module-dropdown"],["for","moduleSelect"],["id","moduleSelect",1,"custom-input",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"module-card"],[1,"module-list"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","card-margin",4,"ngIf"],[3,"value"],[3,"click","ngClass"],[1,"card-margin"],[1,"submit-btn",3,"routerLink"],[1,"table-responsive"],["colspan","14"],["rowspan","2"],["colspan","5"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["colspan","8",2,"text-align","center"],[1,"table","table-bordered","table-striped"],[1,"table-header"],["colspan","14",1,"main-header"],["colspan","13",1,"main-header"],["colspan","6"],["colspan","9",2,"text-align","center"]],template:function(t,n){t&1&&(c(0,"app-header",1),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"p"),h(6),u()(),c(7,"div",6)(8,"div",7)(9,"label",8),h(10,"Select Module"),u(),c(11,"select",9),vt("ngModelChange",function(s){return _t(n.selectedModule,s)||(n.selectedModule=s),s}),c(12,"option",10),h(13,"Select a Module"),u(),rt(14,dq,2,2,"option",11),u()(),c(15,"div",12)(16,"ul",13),rt(17,uq,2,4,"li",14),u()(),rt(18,mq,33,8,"div",15)(19,xq,33,8,"div",15)(20,wq,35,8,"div",15)(21,Aq,33,8,"div",15)(22,Dq,20,5,"div",15)(23,Oq,24,5,"div",15),u()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(12,nq,!n.isSidebarOpen)),_(4),A(n.project_names),_(5),gt("ngModel",n.selectedModule),_(3),D("ngForOf",n.modules),_(3),D("ngForOf",n.modules),_(),D("ngIf",n.selectedModule==="Content Tracker"),_(),D("ngIf",n.selectedModule==="Collateral Tracker"),_(),D("ngIf",n.selectedModule==="Marketing Calender"),_(),D("ngIf",n.selectedModule==="Engagement Analyzing"),_(),D("ngIf",n.selectedModule==="Total leads"),_(),D("ngIf",n.selectedModule==="Task Progress"))},dependencies:[en,Jn,Sn,di,Ri,Li,Si,oi,ni,on,ln,Qr],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-family:Poppins,sans-serif;margin:30px 0;background:linear-gradient(to bottom,#fff,#f0f0f5);box-shadow:0 4px 12px #0000001a;border-radius:8px;overflow:hidden}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5945c;color:#000;font-size:20px;text-transform:uppercase;padding:16px;border:1px solid;letter-spacing:1px;text-align:center}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{font-size:24px;background:#741b48;color:#fff;border-bottom:2px solid white}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease;font-size:16px;border:1px solid}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f0f0f5}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#a29bfe;color:#fff;box-shadow:0 6px 15px #0000001a;transform:scale(1.01)}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px;text-align:center;color:#333;border:none;border:1px solid;table-layout:fixed}i[_ngcontent-%COMP%]{color:gray;font-size:18px;transition:color .3s ease,transform .3s ease;margin-left:45%;cursor:pointer}i.far.fa-edit[_ngcontent-%COMP%]:hover{color:#741b48;transform:scale(1.2);cursor:pointer}.card-margin[_ngcontent-%COMP%]{margin-top:4%}.select-mt[_ngcontent-%COMP%]{margin-top:5%}"]})};var Nq=i=>({"full-width":i});function Fq(i,e){if(i&1){let t=Ft();c(0,"div",27)(1,"div",28)(2,"strong"),h(3,"Success!"),u(),h(4," Updated Successfully. "),c(5,"button",29),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function Bq(i,e){if(i&1){let t=Ft();c(0,"div",6),rt(1,Fq,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Content Tracker"),u()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Task Name:"),u(),c(11,"input",13),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_content.cont_Task_name,r)||(s.get_content.cont_Task_name=r),q(r)}),u()(),c(12,"div",12)(13,"label"),h(14,"Task Quantity:"),u(),c(15,"input",14),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_content.cont_actual_quantity,r)||(s.get_content.cont_actual_quantity=r),q(r)}),u()()(),c(16,"div",11)(17,"div",12)(18,"label"),h(19,"Task Quality:"),u(),c(20,"input",15),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_content.cont_actual_quality,r)||(s.get_content.cont_actual_quality=r),q(r)}),u()(),c(21,"div",12)(22,"label"),h(23,"Cost:"),u(),c(24,"input",16),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_content.Col_actual_cost,r)||(s.get_content.Col_actual_cost=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.updateEndDateLimit())}),u()()(),c(25,"div",11)(26,"div",12)(27,"label"),h(28,"Start Date:"),u(),c(29,"input",17),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_content.cont_actual_start_date,r)||(s.get_content.cont_actual_start_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.updateEndDateLimit())}),u()(),c(30,"div",12)(31,"label"),h(32,"End Date "),c(33,"span",18),h(34,"(End date cannot be before start date)"),u(),h(35," :"),u(),c(36,"input",19),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_content.cont_actual_end_date,r)||(s.get_content.cont_actual_end_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.calculate_No_Days())}),u()()(),c(37,"div",11)(38,"div",12)(39,"label"),h(40,"Number of Dates:"),u(),c(41,"input",20),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_content.cont_actual_no_of_days,r)||(s.get_content.cont_actual_no_of_days=r),q(r)}),u()(),c(42,"div",12)(43,"label"),h(44,"Status:"),u(),c(45,"select",21),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_content.cont_status,r)||(s.get_content.cont_status=r),q(r)}),c(46,"option",22),h(47,"Select Status"),u(),c(48,"option",23),h(49,"Completed"),u(),c(50,"option",24),h(51,"On Going"),u(),c(52,"option",25),h(53,"Pending"),u()()()(),c(54,"button",26),lt("click",function(){G(t);let r=I();return q(r.update_content_task())}),h(55,"Create"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.get_content.cont_Task_name),_(4),gt("ngModel",t.get_content.cont_actual_quantity),_(5),gt("ngModel",t.get_content.cont_actual_quality),_(4),gt("ngModel",t.get_content.Col_actual_cost),_(5),gt("ngModel",t.get_content.cont_actual_start_date),_(7),gt("ngModel",t.get_content.cont_actual_end_date),D("min",t.minEndDate),_(5),gt("ngModel",t.get_content.cont_actual_no_of_days),_(4),gt("ngModel",t.get_content.cont_status),D("value",t.get_content.cont_status)}}function Vq(i,e){if(i&1){let t=Ft();c(0,"div",27)(1,"div",28)(2,"strong"),h(3,"Success!"),u(),h(4," Updated Successfully. "),c(5,"button",29),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function Uq(i,e){if(i&1){let t=Ft();c(0,"div",30),rt(1,Vq,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Collateral Tracker"),u()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Task Name:"),u(),c(11,"input",31),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_collateral.Col_Task_name,r)||(s.get_collateral.Col_Task_name=r),q(r)}),u()(),c(12,"div",12)(13,"label"),h(14,"Task Quantity:"),u(),c(15,"input",14),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_collateral.Col_actual_quantity,r)||(s.get_collateral.Col_actual_quantity=r),q(r)}),u()()(),c(16,"div",11)(17,"div",12)(18,"label"),h(19,"Task Quality:"),u(),c(20,"input",15),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_collateral.Col_actual_quality,r)||(s.get_collateral.Col_actual_quality=r),q(r)}),u()(),c(21,"div",12)(22,"label"),h(23,"Cost:"),u(),c(24,"input",32),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_collateral.Col_actual_cost,r)||(s.get_collateral.Col_actual_cost=r),q(r)}),u()()(),c(25,"div",11)(26,"div",12)(27,"label"),h(28,"Start Date:"),u(),c(29,"input",17),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_collateral.Col_actual_start_date,r)||(s.get_collateral.Col_actual_start_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.End_Date_Limit_collateral())}),u()(),c(30,"div",12)(31,"label"),h(32,"End Date "),c(33,"span",18),h(34,"(End date cannot be before start date)"),u(),h(35," :"),u(),c(36,"input",19),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_collateral.Col_actual_end_date,r)||(s.get_collateral.Col_actual_end_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.calculate_No_Days_collateral())}),u()()(),c(37,"div",11)(38,"div",12)(39,"label"),h(40,"Number of Dates:"),u(),c(41,"input",20),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_collateral.Col_actual_no_of_days,r)||(s.get_collateral.Col_actual_no_of_days=r),q(r)}),u()(),c(42,"div",12)(43,"label"),h(44,"Status:"),u(),c(45,"select",21),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_collateral.Col_status,r)||(s.get_collateral.Col_status=r),q(r)}),c(46,"option",22),h(47,"Select Status"),u(),c(48,"option",23),h(49,"Completed"),u(),c(50,"option",24),h(51,"On Going"),u(),c(52,"option",25),h(53,"Pending"),u()()(),Rt(54,"div",12),u(),c(55,"button",26),lt("click",function(){G(t);let r=I();return q(r.update_collateral_task())}),h(56,"Create"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),D("value",t.cont_Task_name),gt("ngModel",t.get_collateral.Col_Task_name),_(4),gt("ngModel",t.get_collateral.Col_actual_quantity),_(5),gt("ngModel",t.get_collateral.Col_actual_quality),_(4),gt("ngModel",t.get_collateral.Col_actual_cost),_(5),gt("ngModel",t.get_collateral.Col_actual_start_date),_(7),gt("ngModel",t.get_collateral.Col_actual_end_date),D("min",t.minEndDate),_(5),gt("ngModel",t.get_collateral.Col_actual_no_of_days),_(4),gt("ngModel",t.get_collateral.Col_status),D("value",t.get_collateral.Col_status)}}function zq(i,e){if(i&1){let t=Ft();c(0,"div",27)(1,"div",28)(2,"strong"),h(3,"Success!"),u(),h(4," Updated Successfully. "),c(5,"button",29),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function jq(i,e){if(i&1){let t=Ft();c(0,"div",30),rt(1,zq,7,0,"div",7),c(2,"div",33)(3,"table",34)(4,"thead",35)(5,"tr")(6,"th",36),h(7,"Goal"),u()(),c(8,"tr")(9,"th"),h(10,"Tasks"),u(),c(11,"th"),h(12,"Quantity"),u(),c(13,"th"),h(14,"Cost"),u(),c(15,"th"),h(16,"Start Date"),u(),c(17,"th"),h(18,"End Date"),u(),c(19,"th"),h(20,"Frequency"),u(),c(21,"th"),h(22,"Online/Ofline"),u()()(),c(23,"tbody")(24,"tr")(25,"td"),h(26),u(),c(27,"td"),h(28),u(),c(29,"td"),h(30),u(),c(31,"td"),h(32),Et(33,"date"),u(),c(34,"td"),h(35),Et(36,"date"),u(),c(37,"td"),h(38),u(),c(39,"td"),h(40),u()()()()(),c(41,"div",8)(42,"div",9)(43,"label"),h(44,"Marketing Calender (Online & Offline Activites)"),u()(),c(45,"div",10)(46,"div",11)(47,"div",12)(48,"label"),h(49,"Task Name:"),u(),c(50,"input",37),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_calender_task.Cal_Task_name,r)||(s.get_calender_task.Cal_Task_name=r),q(r)}),u()(),c(51,"div",12)(52,"label"),h(53,"Task Quantity:"),u(),c(54,"input",14),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_calender_task.Cal_actual_quantity,r)||(s.get_calender_task.Cal_actual_quantity=r),q(r)}),u()()(),c(55,"div",11)(56,"div",12)(57,"label"),h(58,"Cost:"),u(),c(59,"input",15),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_calender_task.Cal_actual_cost,r)||(s.get_calender_task.Cal_actual_cost=r),q(r)}),u()(),c(60,"div",12)(61,"label"),h(62,"Start Date:"),u(),c(63,"input",17),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_calender_task.Cal_actual_start_date,r)||(s.get_calender_task.Cal_actual_start_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.End_Date_Limit_calender())}),u()()(),c(64,"div",11)(65,"div",12)(66,"label"),h(67,"End Date "),c(68,"span",18),h(69,"(End date cannot be before start date)"),u(),h(70," :"),u(),c(71,"input",19),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_calender_task.Cal_actual_end_date,r)||(s.get_calender_task.Cal_actual_end_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.calculate_No_Days_calender())}),u()(),c(72,"div",12)(73,"label"),h(74,"Frequency:"),u(),c(75,"input",38),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_calender_task.Cal_actual_Frequency,r)||(s.get_calender_task.Cal_actual_Frequency=r),q(r)}),u()()(),c(76,"div",11)(77,"div",12)(78,"label"),h(79,"Status:"),u(),c(80,"select",21),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_calender_task.Cal_status,r)||(s.get_calender_task.Cal_status=r),q(r)}),c(81,"option",22),h(82,"Select Status"),u(),c(83,"option",23),h(84,"Completed"),u(),c(85,"option",24),h(86,"On Going"),u(),c(87,"option",25),h(88,"Pending"),u()()(),c(89,"div",12)(90,"label",39),h(91,"Select Mode"),u(),c(92,"select",40),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Cal_actual_mode,r)||(s.Cal_actual_mode=r),q(r)}),c(93,"option",22),h(94,"Select a Mode"),u(),c(95,"option"),h(96,"Online"),u(),c(97,"option"),h(98,"Offline"),u()()()(),c(99,"button",26),lt("click",function(){G(t);let r=I();return q(r.update_marketing_task())}),h(100,"Create"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(25),A(t.getcalendertask.Cal_Task_name),_(2),A(t.getcalendertask.Cal_goal_quantity),_(2),A(t.getcalendertask.Cal_goal_cost),_(2),A(At(33,18,t.getcalendertask.Cal_goal_start_date,"dd MMM yy")),_(3),A(At(36,21,t.getcalendertask.Cal_goal_end_date,"dd MMM yy")),_(3),A(t.getcalendertask.Cal_goal_Frequency),_(2),A(t.getcalendertask.Cal_goal_mode),_(10),gt("ngModel",t.get_calender_task.Cal_Task_name),_(4),gt("ngModel",t.get_calender_task.Cal_actual_quantity),_(5),gt("ngModel",t.get_calender_task.Cal_actual_cost),_(4),gt("ngModel",t.get_calender_task.Cal_actual_start_date),_(8),gt("ngModel",t.get_calender_task.Cal_actual_end_date),D("min",t.minEndDate),_(4),gt("ngModel",t.get_calender_task.Cal_actual_Frequency),_(5),gt("ngModel",t.get_calender_task.Cal_status),D("value",t.get_calender_task.Cal_status),_(12),gt("ngModel",t.Cal_actual_mode)}}function Hq(i,e){if(i&1){let t=Ft();c(0,"div",27)(1,"div",28)(2,"strong"),h(3,"Success!"),u(),h(4," Updated Successfully. "),c(5,"button",29),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function Wq(i,e){if(i&1){let t=Ft();c(0,"div",30),rt(1,Hq,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Engagement Analyzing Tracker (Engagement for Online Activites)"),u()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Source:"),u(),c(11,"input",41),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_engagement_task.Eng_Task_name,r)||(s.get_engagement_task.Eng_Task_name=r),q(r)}),u()(),c(12,"div",12)(13,"label"),h(14,"Likes:"),u(),c(15,"input",42),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_engagement_task.Eng_actual_like,r)||(s.get_engagement_task.Eng_actual_like=r),q(r)}),u()()(),c(16,"div",11)(17,"div",12)(18,"label"),h(19,"Followers"),u(),c(20,"input",43),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_engagement_task.Eng_actual_followers,r)||(s.get_engagement_task.Eng_actual_followers=r),q(r)}),u()(),c(21,"div",12)(22,"label"),h(23,"Views\\Reach"),u(),c(24,"input",43),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_engagement_task.Eng_actual_Views,r)||(s.get_engagement_task.Eng_actual_Views=r),q(r)}),u()()(),c(25,"div",11)(26,"div",12)(27,"label"),h(28,"Start Date:"),u(),c(29,"input",17),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_engagement_task.Eng_actual_start_date,r)||(s.get_engagement_task.Eng_actual_start_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.End_Date_Limit_engagement())}),u()(),c(30,"div",12)(31,"label"),h(32,"End Date "),c(33,"span",18),h(34,"(End date cannot be before start date)"),u(),h(35," :"),u(),c(36,"input",19),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_engagement_task.Eng_actual_end_date,r)||(s.get_engagement_task.Eng_actual_end_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.calculate_No_Days_engagement())}),u()(),c(37,"div",44)(38,"div",12)(39,"label"),h(40,"Number of Days:"),u(),c(41,"input",45),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_engagement_task.Eng_actual_no_of_days,r)||(s.get_engagement_task.Eng_actual_no_of_days=r),q(r)}),u()(),c(42,"div",12)(43,"label"),h(44,"Status:"),u(),c(45,"select",46),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_engagement_task.Eng_status,r)||(s.get_engagement_task.Eng_status=r),q(r)}),c(46,"option",22),h(47,"Select Status"),u(),c(48,"option"),h(49,"Completed"),u(),c(50,"option"),h(51,"Pending"),u(),c(52,"option"),h(53,"On Going"),u()()()()(),c(54,"button",26),lt("click",function(){G(t);let r=I();return q(r.update_Engagement())}),h(55,"Add"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.get_engagement_task.Eng_Task_name),_(4),gt("ngModel",t.get_engagement_task.Eng_actual_like),_(5),gt("ngModel",t.get_engagement_task.Eng_actual_followers),_(4),gt("ngModel",t.get_engagement_task.Eng_actual_Views),_(5),gt("ngModel",t.get_engagement_task.Eng_actual_start_date),_(7),gt("ngModel",t.get_engagement_task.Eng_actual_end_date),D("min",t.minEndDate),_(5),gt("ngModel",t.get_engagement_task.Eng_actual_no_of_days),_(4),gt("ngModel",t.get_engagement_task.Eng_status)}}function Gq(i,e){if(i&1){let t=Ft();c(0,"div",27)(1,"div",28)(2,"strong"),h(3,"Success!"),u(),h(4," Updated Successfully. "),c(5,"button",29),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function qq(i,e){if(i&1){let t=Ft();c(0,"div",30),rt(1,Gq,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Results - Total Leads"),u()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Source:"),u(),c(11,"input",47),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_total_leads.Tol_Task_Name,r)||(s.get_total_leads.Tol_Task_Name=r),q(r)}),u()(),c(12,"div",12)(13,"label"),h(14,"Actual:"),u(),c(15,"input",48),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_total_leads.Tol_actual,r)||(s.get_total_leads.Tol_actual=r),q(r)}),u()()(),c(16,"div",11)(17,"div",12)(18,"label"),h(19,"Lead Date:"),u(),c(20,"input",49),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_total_leads.Tol_actual_date,r)||(s.get_total_leads.Tol_actual_date=r),q(r)}),u()()(),c(21,"button",26),lt("click",function(){G(t);let r=I();return q(r.update_total_lead())}),h(22,"Add"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.get_total_leads.Tol_Task_Name),_(4),gt("ngModel",t.get_total_leads.Tol_actual),_(5),gt("ngModel",t.get_total_leads.Tol_actual_date)}}function Xq(i,e){if(i&1){let t=Ft();c(0,"div",27)(1,"div",28)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",29),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function Yq(i,e){if(i&1){let t=Ft();c(0,"div",30),rt(1,Xq,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Task Progress"),u()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Description:"),u(),c(11,"input",50),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_Miscellaneous_Works.Mls_description,r)||(s.get_Miscellaneous_Works.Mls_description=r),q(r)}),u()(),c(12,"div",12)(13,"label"),h(14,"Start Date:"),u(),c(15,"input",17),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_Miscellaneous_Works.Mls_actual_start_date,r)||(s.get_Miscellaneous_Works.Mls_actual_start_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.End_Date_Limit_Miscellaneous())}),u()()(),c(16,"div",11)(17,"div",12)(18,"label"),h(19,"End Date "),c(20,"span",18),h(21,"(End date cannot be before start date)"),u(),h(22," :"),u(),c(23,"input",19),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_Miscellaneous_Works.Mls_actual_end_date,r)||(s.get_Miscellaneous_Works.Mls_actual_end_date=r),q(r)}),lt("change",function(){G(t);let r=I();return q(r.calculate_No_Days_Miscellaneous())}),u()(),c(24,"div",12)(25,"label"),h(26,"Number of Days:"),u(),c(27,"input",51),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_Miscellaneous_Works.Mls_actual_no_of_days,r)||(s.get_Miscellaneous_Works.Mls_actual_no_of_days=r),q(r)}),u()()(),c(28,"div",11)(29,"div",12)(30,"label"),h(31,"Status:"),u(),c(32,"select",21),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_Miscellaneous_Works.Mls_status,r)||(s.get_Miscellaneous_Works.Mls_status=r),q(r)}),c(33,"option",22),h(34,"Select Status"),u(),c(35,"option",23),h(36,"Completed"),u(),c(37,"option",52),h(38,"Going On"),u(),c(39,"option",25),h(40,"Pending"),u()()()(),c(41,"button",26),lt("click",function(){G(t);let r=I();return q(r.update_miscellanous())}),h(42,"Create"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.get_Miscellaneous_Works.Mls_description),_(4),gt("ngModel",t.get_Miscellaneous_Works.Mls_actual_start_date),_(8),gt("ngModel",t.get_Miscellaneous_Works.Mls_actual_end_date),D("min",t.minEndDate),_(4),gt("ngModel",t.get_Miscellaneous_Works.Mls_actual_no_of_days),_(5),gt("ngModel",t.get_Miscellaneous_Works.Mls_status),D("value",t.get_Miscellaneous_Works.Mls_status)}}var ev=class i{constructor(e,t,n,r,s){this.route=e;this.apiService=t;this.http=n;this.router=r;this.userService=s}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}update_actual_task=null;update_url_id=null;project_url_id=null;ngOnInit(){this.get_data(),this.route.params.subscribe(e=>{this.update_actual_task=e.updateactual,this.update_url_id=e.id,this.project_url_id=e.projectid}),this.apifromservice(),this.get_content_task(),this.get_collateral_task(),this.get_marketing_calender(),this.getmarketingcalender(),this.get_engagement_api(),this.get_total_leads_api(),this.get_Miscellaneous_Works_api()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}update_content_tracker="";update_Collateral_tracker="";update_marketing_calender="";update_engagement_analyzing="";update_total_lead_url="";update_Miscellaneous_Works_url="";apifromservice(){this.update_content_tracker=this.apiService.marketing_content_tracker_api(),this.update_Collateral_tracker=this.apiService.Collateraltrackerapi(),this.update_marketing_calender=this.apiService.marketingcalenderapi(),this.update_engagement_analyzing=this.apiService.engagementanalyzingapi(),this.update_total_lead_url=this.apiService.marketingtotalleadapi(),this.update_Miscellaneous_Works_url=this.apiService.marketingmiscellaneousapi()}get_content;get_content_task(){this.http.get(this.update_content_tracker+this.update_url_id).subscribe(e=>{this.get_content=e},e=>{console.error("Error fetching items",e)})}cont_Task_name="";cont_actual_quality;cont_actual_quantity;cont_assigned_by="yoganandhan";cont_assigned_to=null;cont_status=null;successmgs=!1;update_content_task(){let e=`${this.update_content_tracker}${this.update_url_id}`,t={cont_Task_name:this.get_content.cont_Task_name,cont_actual_start_date:this.get_content.cont_actual_start_date,cont_actual_end_date:this.get_content.cont_actual_end_date,cont_actual_no_of_days:this.get_content.cont_actual_no_of_days,cont_actual_quality:this.get_content.cont_actual_quality,cont_actual_quantity:this.get_content.cont_actual_quantity,cont_assigned_by:this.get_content.cont_assigned_by,cont_assigned_to:this.get_content.cont_assigned_to,cont_status:this.get_content.cont_status,Model_name:this.update_actual_task,Project_id:this.get_content.Project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.put(e,t,n).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Content Tracker"),this.router.navigate(["/Actual-task",this.get_content.Project_id])},1e3)},r=>{console.log("Post request failed",r)})}get_collateral;get_collateral_task(){this.http.get(this.update_Collateral_tracker+this.update_url_id).subscribe(e=>{this.get_collateral=e},e=>{console.error("Error fetching items",e)})}col_Task_name="";col_actual_quality;col_actual_quantity;col_assigned_by="yoganandhan";col_assigned_to=null;Col_status="";update_collateral_task(){let e=this.update_Collateral_tracker+this.update_url_id,t={Col_Task_name:this.get_collateral.Col_Task_name,Col_actual_start_date:this.get_collateral.Col_actual_start_date,Col_actual_end_date:this.get_collateral.Col_actual_end_date,Col_actual_no_of_days:this.get_collateral.Col_actual_no_of_days,Col_actual_quality:this.get_collateral.Col_actual_quality,Col_actual_quantity:this.get_collateral.Col_actual_quantity,Col_actual_cost:this.get_collateral.Col_actual_cost,Col_assigned_by:this.get_collateral.Col_assigned_by,Col_assigned_to:this.get_collateral.Col_assigned_to,Col_status:this.get_collateral.Col_status,Model_name:this.get_collateral.Model_name,Project_id:this.get_collateral.Project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.put(e,t,n).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Collateral Tracker"),this.router.navigate(["/Actual-task",this.get_collateral.Project_id])},1e3)},r=>{console.log("Post request failed",r)})}get_calender_task;get_marketing_calender(){this.http.get(this.update_marketing_calender+this.update_url_id).subscribe(e=>{this.get_calender_task=e},e=>{console.error("Error fetching items",e)})}getcalendertask;getmarketingcalender(){this.http.get(this.update_marketing_calender+this.update_url_id).subscribe(e=>{this.getcalendertask=e},e=>{console.error("Error fetching items",e)})}cal_Task_name="";Cal_actual_mode=null;cal_actual_quantity;cal_actual_cost;Cal_actual_Frequency=null;cal_assigned_by="yoganandhan";cal_assigned_to=null;update_marketing_task(){let e=this.update_marketing_calender+this.update_url_id,t={Cal_Task_name:this.get_calender_task.Cal_Task_name,Cal_actual_start_date:this.get_calender_task.Cal_actual_start_date,Cal_actual_end_date:this.get_calender_task.Cal_actual_end_date,Cal_actual_Frequency:this.get_calender_task.Cal_actual_Frequency,Cal_actual_cost:this.get_calender_task.Cal_actual_cost,Cal_actual_quantity:this.get_calender_task.Cal_actual_quantity,Cal_assigned_by:this.get_calender_task.Cal_assigned_by,Cal_assigned_to:this.get_calender_task.Cal_assigned_to,Cal_actual_mode:this.Cal_actual_mode,Cal_status:this.get_calender_task.Cal_status,Model_name:this.get_calender_task.Model_name,Project_id:this.get_calender_task.Project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.put(e,t,n).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Marketing Calender"),this.router.navigate(["/Actual-task",this.get_calender_task.Project_id])},1e3)},r=>{console.log("Post request failed",r)})}get_engagement_task;get_engagement_api(){this.http.get(this.update_engagement_analyzing+this.update_url_id).subscribe(e=>{this.get_engagement_task=e},e=>{console.error("Error fetching items",e)})}eng_Task_name=null;eng_actual_like=null;eng_actual_followers=null;update_Engagement(){let e=this.update_engagement_analyzing+this.update_url_id,t={Eng_Task_name:this.get_engagement_task.Eng_Task_name,Eng_actual_like:this.get_engagement_task.Eng_actual_like,Eng_actual_followers:this.get_engagement_task.Eng_actual_followers,Eng_actual_Views:this.get_engagement_task.Eng_actual_Views,Eng_actual_start_date:this.get_engagement_task.Eng_actual_start_date,Eng_actual_end_date:this.get_engagement_task.Eng_actual_end_date,Eng_actual_no_of_days:this.get_engagement_task.Eng_actual_no_of_days,Eng_status:this.get_engagement_task.Eng_status,Model_name:this.get_engagement_task.Model_name,Project_id:this.get_engagement_task.Project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.put(e,t,n).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Engagement Analyzing"),this.router.navigate(["/Actual-task",this.get_engagement_task.Project_id])},1e3)},r=>{console.log("Post request failed",r)})}get_total_leads;get_total_leads_api(){this.http.get(this.update_total_lead_url+this.update_url_id).subscribe(e=>{this.get_total_leads=e},e=>{console.error("Error fetching items",e)})}update_total_lead(){let e=this.update_total_lead_url+this.update_url_id,t={Tol_Task_Name:this.get_total_leads.Tol_Task_Name,Tol_actual:this.get_total_leads.Tol_actual,Tol_actual_date:this.get_total_leads.Tol_actual_date,Model_name:this.get_total_leads.Model_name,Project_id:this.get_total_leads.Project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.put(e,t,n).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Total leads"),this.router.navigate(["/Actual-task",this.get_total_leads.Project_id])},1e3)},r=>{console.log("Post request failed",r)})}get_Miscellaneous_Works;get_Miscellaneous_Works_api(){this.http.get(this.update_Miscellaneous_Works_url+this.update_url_id).subscribe(e=>{this.get_Miscellaneous_Works=e},e=>{console.error("Error fetching items",e)})}update_miscellanous(){let e=this.update_Miscellaneous_Works_url+this.update_url_id,t={Mls_description:this.get_Miscellaneous_Works.Mls_description,Mls_actual_start_date:this.get_Miscellaneous_Works.Mls_actual_start_date,Mls_actual_end_date:this.get_Miscellaneous_Works.Mls_actual_end_date,Mls_actual_no_of_days:this.get_Miscellaneous_Works.Mls_actual_no_of_days,Mls_status:this.get_Miscellaneous_Works.Mls_status,Model_name:"Task Progress",Project_id:this.get_Miscellaneous_Works.Project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.put(e,t,n).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Task Progress"),this.router.navigate(["/Actual-task",this.get_Miscellaneous_Works.Project_id])},1e3)},r=>{console.log("Post request failed",r)})}actual_start_date=null;actual_end_date=null;minEndDate=null;actual_no_of_days=null;updateEndDateLimit(){this.get_content.cont_actual_start_date&&(this.minEndDate=this.get_content.cont_actual_start_date,this.calculate_No_Days())}calculate_No_Days(){if(this.get_content.cont_actual_start_date&&this.get_content.cont_actual_end_date){let e=new Date(this.get_content.cont_actual_start_date),n=new Date(this.get_content.cont_actual_end_date).getTime()-e.getTime(),r=n>=0?Math.ceil(n/(1e3*3600*24))+1:0;r===1?this.get_content.cont_actual_no_of_days=`${r} day`:this.get_content.cont_actual_no_of_days=`${r} days`}else this.get_content.cont_actual_no_of_days="0 day"}End_Date_Limit_collateral(){this.get_collateral.Col_actual_start_date&&(this.minEndDate=this.get_collateral.Col_actual_start_date,this.calculate_No_Days())}calculate_No_Days_collateral(){if(this.get_collateral.Col_actual_start_date&&this.get_collateral.Col_actual_end_date){let e=new Date(this.get_collateral.Col_actual_start_date),n=new Date(this.get_collateral.Col_actual_end_date).getTime()-e.getTime(),r=n>=0?Math.ceil(n/(1e3*3600*24))+1:0;r===1?this.get_collateral.Col_actual_no_of_days=`${r} day`:this.get_collateral.Col_actual_no_of_days=`${r} days`}else this.get_collateral.Col_actual_no_of_days="0 day"}End_Date_Limit_calender(){this.get_calender_task.Cal_actual_start_date&&(this.minEndDate=this.get_calender_task.Cal_actual_start_date,this.calculate_No_Days())}calculate_No_Days_calender(){if(this.get_calender_task.Cal_actual_start_date&&this.get_collateral.Col_actual_end_date){let e=new Date(this.get_calender_task.Cal_actual_start_date),n=new Date(this.get_collateral.Col_actual_end_date).getTime()-e.getTime(),r=n>=0?Math.ceil(n/(1e3*3600*24))+1:0;r===1?this.get_collateral.Col_actual_no_of_days=`${r} day`:this.get_collateral.Col_actual_no_of_days=`${r} days`}else this.get_collateral.Col_actual_no_of_days="0 day"}End_Date_Limit_engagement(){this.get_engagement_task.Eng_actual_start_date&&(this.minEndDate=this.get_calender_task.Cal_actual_start_date,this.calculate_No_Days())}calculate_No_Days_engagement(){if(this.get_engagement_task.Eng_actual_start_date&&this.get_engagement_task.Eng_actual_end_date){let e=new Date(this.get_engagement_task.Eng_actual_start_date),n=new Date(this.get_engagement_task.Eng_actual_end_date).getTime()-e.getTime(),r=n>=0?Math.ceil(n/(1e3*3600*24))+1:0;r===1?this.get_engagement_task.Eng_actual_no_of_days=`${r} day`:this.get_engagement_task.Eng_actual_no_of_days=`${r} days`}else this.get_engagement_task.Eng_actual_no_of_days="0 day"}End_Date_Limit_Miscellaneous(){this.get_Miscellaneous_Works.Mls_actual_start_date&&(this.minEndDate=this.get_Miscellaneous_Works.Mls_actual_start_date,this.calculate_No_Days())}calculate_No_Days_Miscellaneous(){if(this.get_Miscellaneous_Works.Mls_actual_start_date&&this.get_Miscellaneous_Works.Mls_actual_end_date){let e=new Date(this.get_Miscellaneous_Works.Mls_actual_start_date),n=new Date(this.get_Miscellaneous_Works.Mls_actual_end_date).getTime()-e.getTime(),r=n>=0?Math.ceil(n/(1e3*3600*24))+1:0;r===1?this.get_Miscellaneous_Works.Mls_actual_no_of_days=`${r} day`:this.get_Miscellaneous_Works.Mls_actual_no_of_days=`${r} days`}else this.get_Miscellaneous_Works.Mls_actual_no_of_days="0 day"}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(Vn),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-marketing-add-actuals"]],decls:10,vars:10,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container",2,"margin-top","5%","margin-bottom","5%"],["class","container mb-3 card-margin",4,"ngIf"],["class","container card-margin",4,"ngIf"],[1,"container","mb-3","card-margin"],["class","alert-card fade-in",4,"ngIf"],[1,"card","shadow"],[1,"heading-card"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-6"],["readonly","","type","text","placeholder","Enter quantity",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter quantity",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter quality",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter Cost","name","startDate",1,"custom-input",3,"ngModelChange","change","ngModel"],["type","date","name","startDate",1,"custom-input",3,"ngModelChange","change","ngModel"],[2,"font-size","10px","color","red"],["type","date","name","endDate",1,"custom-input",3,"ngModelChange","change","ngModel","min"],["type","text","name","numberOfDaysText","readonly","",1,"custom-input",3,"ngModelChange","ngModel"],["name","","id","",1,"custom-input",3,"ngModelChange","ngModel","value"],["value",""],["value","Completed"],["value","On Going"],["value","Pending"],[1,"submit-btn",3,"click"],[1,"alert-card","fade-in"],[1,"alert-content"],[1,"close-btn",3,"click"],[1,"container","card-margin"],["type","text","readonly","","placeholder","Enter quantity",1,"custom-input",3,"ngModelChange","value","ngModel"],["type","number",1,"custom-input",3,"ngModelChange","ngModel"],[1,"table-responsive"],[1,"table","table-bordered","table-striped"],[1,"table-header"],["colspan","7"],["type","text","readonly","","placeholder","Enter quantity",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter number of dates",1,"custom-input",3,"ngModelChange","ngModel"],["for","modeSelect"],["id","modeSelect",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","readonly","","placeholder","Source",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter likes",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter followers",1,"custom-input",3,"ngModelChange","ngModel"],[1,"row","mt-3","mb-3"],["type","text","placeholder","Number of Days","name","numberOfDaysText","readonly","",1,"custom-input",3,"ngModelChange","ngModel"],["name","","id","",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","text","readonly","","placeholder","Enter Source",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","number","placeholder","Enter Actual",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","date","placeholder","Enter Task",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter Description",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Number of Days",1,"custom-input",3,"ngModelChange","ngModel"],["value","Going On"]],template:function(t,n){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3),rt(4,Bq,56,11,"div",4)(5,Uq,57,12,"div",5)(6,jq,101,24,"div",5)(7,Wq,56,10,"div",5)(8,qq,23,4,"div",5)(9,Yq,43,8,"div",5),u()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(8,Nq,!n.isSidebarOpen)),_(2),D("ngIf",n.update_actual_task==="Content Tracker"),_(),D("ngIf",n.update_actual_task==="Collateral Tracker"),_(),D("ngIf",n.update_actual_task==="Marketing Calender"),_(),D("ngIf",n.update_actual_task==="Engagement Analyzing"),_(),D("ngIf",n.update_actual_task==="Total leads"),_(),D("ngIf",n.update_actual_task==="Task Progress"))},dependencies:[en,Sn,Ri,Li,yi,Ho,Si,oi,Na,ni,on,ln,Qr],styles:[".card-margin[_ngcontent-%COMP%]{margin-top:3%}.custom-input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:5px;font-size:16px;transition:border-color .3s ease}.custom-input[_ngcontent-%COMP%]:focus{border-color:#5e1080;outline:none;box-shadow:0 0 5px #5d1285ad}.custom-label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px;display:block}label[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-family:Poppins,sans-serif;margin:30px 0;background:linear-gradient(to bottom,#fff,#f0f0f5);box-shadow:0 4px 12px #0000001a;border-radius:8px;overflow:hidden}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5945c;color:#000;font-size:20px;text-transform:uppercase;padding:16px;border:1px solid;letter-spacing:1px;text-align:center}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{font-size:24px;background:#741b48;color:#fff;border-bottom:2px solid white}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease;font-size:16px;border:1px solid}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f0f0f5}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#a29bfe;color:#fff;box-shadow:0 6px 15px #0000001a;transform:scale(1.01)}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px;text-align:center;color:#333;border:none;border:1px solid;table-layout:fixed}i[_ngcontent-%COMP%]{color:gray;font-size:18px;transition:color .3s ease,transform .3s ease;margin-left:45%;cursor:pointer}i.far.fa-edit[_ngcontent-%COMP%]:hover{color:#741b48;transform:scale(1.2);cursor:pointer}.card-margin[_ngcontent-%COMP%]{margin-top:4%}.select-mt[_ngcontent-%COMP%]{margin-top:5%}"]})};var $q=i=>({"full-width":i}),Kq=i=>({"active-module":i}),Zq=i=>["/Update-actual","Content Tracker",i],Jq=i=>["/Update-actual","Collateral Tracker",i],Qq=i=>["/Update-actual","Marketing Calender",i],tX=i=>["/Update-actual","Engagement Analyzing",i],eX=i=>["/Update-actual","Task Progress",i],nX=i=>["/add-task","DataBase Tracker",i],iX=(i,e)=>({"green-text":i,"red-text":e});function rX(i,e){if(i&1&&(c(0,"option",17),h(1),u()),i&2){let t=e.$implicit;D("value",t),_(),A(t)}}function sX(i,e){if(i&1){let t=Ft();c(0,"li",18),lt("click",function(){let r=G(t).$implicit,s=I();return q(s.selectModule(r))}),h(1),u()}if(i&2){let t=e.$implicit,n=I();D("ngClass",te(2,Kq,t===n.selectedModule)),_(),de(" ",t," ")}}function aX(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",27),h(3),u(),c(4,"td",27),h(5),u(),c(6,"td",28),h(7),u(),c(8,"td",28),h(9),u(),c(10,"td",28),h(11),Et(12,"date"),u(),c(13,"td",28),h(14),Et(15,"date"),u(),c(16,"td",28),h(17),u(),c(18,"td",29),Rt(19,"i",30),u()(),c(20,"tr")(21,"td",31),h(22),u(),c(23,"td",31),h(24),u(),c(25,"td",31),h(26),Et(27,"date"),u(),c(28,"td",31),h(29),Et(30,"date"),u(),c(31,"td",31),h(32),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.cont_Task_name),_(2),A(t.cont_goal_quantity),_(2),A(t.cont_goal_quality),_(2),A(At(12,13,t.cont_goal_start_date,"d MMM")),_(3),A(At(15,16,t.cont_goal_end_date,"d MMM")),_(3),A(t.cont_goal_no_of_days),_(),D("routerLink",te(25,Zq,t.content_tracker_id)),_(4),A(t.cont_actual_quantity),_(2),A(t.cont_actual_quality),_(2),A(At(27,19,t.cont_actual_start_date,"d MMM")),_(3),A(At(30,22,t.cont_actual_end_date,"d MMM")),_(3),A(t.cont_actual_no_of_days)}}function oX(i,e){if(i&1&&(pe(0),rt(1,aX,33,27,"ng-container",26),fe()),i&2){let t=I(2);_(),D("ngForOf",t.get_content)}}function lX(i,e){i&1&&(c(0,"tr")(1,"td",32),h(2,"No task found"),u()())}function cX(i,e){if(i&1&&(c(0,"div",19)(1,"div",20)(2,"table",21)(3,"thead")(4,"tr")(5,"th",22),h(6,"Content Tracker (Content Creations)"),u()(),c(7,"tr",23)(8,"th"),h(9,"S.No"),u(),c(10,"th"),h(11,"Tasks"),u(),c(12,"th",24),h(13,"Quantity"),u(),c(14,"th",24),h(15,"Quality"),u(),c(16,"th",24),h(17,"Start Date"),u(),c(18,"th",24),h(19,"End Date"),u(),c(20,"th",24),h(21,"No of Days"),u(),c(22,"th"),h(23,"Update Actual"),u()()(),c(24,"tbody"),rt(25,oX,2,1,"ng-container",25),u(),rt(26,lX,3,0,"ng-template",null,0,De),u()()()),i&2){let t=an(27),n=I();_(25),D("ngIf",n.get_content&&n.get_content.length>0)("ngIfElse",t)}}function dX(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",27),h(3),u(),c(4,"td",27),h(5),u(),c(6,"td",28),h(7),u(),c(8,"td",28),h(9),u(),c(10,"td",28),h(11),u(),c(12,"td",28),h(13),Et(14,"date"),u(),c(15,"td",28),h(16),Et(17,"date"),u(),c(18,"td",28),h(19),u(),c(20,"td",29),Rt(21,"i",30),u()(),c(22,"tr")(23,"td",31),h(24),u(),c(25,"td",31),h(26),u(),c(27,"td",31),h(28),u(),c(29,"td",31),h(30),Et(31,"date"),u(),c(32,"td",31),h(33),Et(34,"date"),u(),c(35,"td",31),h(36),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Col_Task_name),_(2),A(t.Col_goal_quantity),_(2),A(t.Col_goal_quality),_(2),A(t.Col_goal_cost),_(2),A(At(14,15,t.Col_goal_start_date,"d MMM")),_(3),A(At(17,18,t.Col_goal_end_date,"d MMM")),_(3),A(t.Col_goal_no_of_days),_(),D("routerLink",te(27,Jq,t.Collateral_tracker_id)),_(4),A(t.Col_actual_quantity),_(2),A(t.Col_actual_quality),_(2),A(t.Col_actual_cost),_(2),A(At(31,21,t.Col_actual_start_date,"d MMM")),_(3),A(At(34,24,t.Col_actual_end_date,"d MMM")),_(3),A(t.Col_actual_no_of_days)}}function uX(i,e){if(i&1&&(pe(0),rt(1,dX,37,29,"ng-container",26),fe()),i&2){let t=I(2);_(),D("ngForOf",t.get_collateral)}}function hX(i,e){i&1&&(c(0,"tr")(1,"td",32),h(2,"No task found"),u()())}function pX(i,e){if(i&1&&(c(0,"div",19)(1,"div",20)(2,"table",21)(3,"thead")(4,"tr")(5,"th",22),h(6,"Collateral Tracker (Collateral Designs & Video Making)"),u()(),c(7,"tr",23)(8,"th"),h(9,"S.No"),u(),c(10,"th"),h(11,"Tasks"),u(),c(12,"th",24),h(13,"Quantity"),u(),c(14,"th",24),h(15,"Quality"),u(),c(16,"th",24),h(17,"Cost"),u(),c(18,"th",24),h(19,"Start Date"),u(),c(20,"th",24),h(21,"End Date"),u(),c(22,"th",24),h(23,"No of Days"),u(),c(24,"th"),h(25,"Update Actual"),u()()(),c(26,"tbody"),rt(27,uX,2,1,"ng-container",25),u(),rt(28,hX,3,0,"ng-template",null,0,De),u()()()),i&2){let t=an(29),n=I();_(27),D("ngIf",n.get_collateral&&n.get_collateral.length>0)("ngIfElse",t)}}function fX(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",27),h(3),u(),c(4,"td",27),h(5),u(),c(6,"td",28),h(7),u(),c(8,"td",28),h(9),u(),c(10,"td",28),h(11),Et(12,"date"),u(),c(13,"td",28),h(14),Et(15,"date"),u(),c(16,"td",28),h(17),u(),c(18,"td",29),Rt(19,"i",30),u()(),c(20,"tr")(21,"td",31),h(22),u(),c(23,"td",31),h(24),u(),c(25,"td",31),h(26),Et(27,"date"),u(),c(28,"td",31),h(29),Et(30,"date"),u(),c(31,"td",31),h(32),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Cal_Task_name),_(2),A(t.Cal_goal_quantity),_(2),A(t.Cal_goal_cost),_(2),A(At(12,13,t.Cal_goal_start_date,"d MMM")),_(3),A(At(15,16,t.Cal_goal_end_date,"d MMM")),_(3),A(t.Cal_goal_Frequency),_(),D("routerLink",te(25,Qq,t.Marketing_calender_id)),_(4),A(t.Cal_actual_quantity),_(2),A(t.Cal_actual_cost),_(2),A(At(27,19,t.Cal_actual_start_date,"d MMM")),_(3),A(At(30,22,t.Cal_actual_end_date,"d MMM")),_(3),A(t.Cal_actual_Frequency)}}function mX(i,e){if(i&1&&(pe(0),rt(1,fX,33,27,"ng-container",26),fe()),i&2){let t=I(2);_(),D("ngForOf",t.get_marketing_calender)}}function gX(i,e){if(i&1&&(c(0,"tbody")(1,"tr")(2,"td",34),h(3,"Total Cost"),u(),c(4,"td",35),h(5),u(),Rt(6,"td",36),u(),c(7,"tr")(8,"td",37),h(9),u()()()),i&2){let t=I(2);_(5),A(t.Total_Goal_Cost),_(4),A(t.Total_Actual_Cost)}}function _X(i,e){i&1&&(c(0,"tr")(1,"td",32),h(2,"No task found"),u()())}function vX(i,e){if(i&1&&(c(0,"div",19)(1,"div",20)(2,"table",21)(3,"thead")(4,"tr")(5,"th",22),h(6,"Marketing Calender (Online & Offline Activites)"),u()(),c(7,"tr",23)(8,"th"),h(9,"S.No"),u(),c(10,"th"),h(11,"Tasks"),u(),c(12,"th",24),h(13,"Quantity"),u(),c(14,"th",24),h(15,"Cost"),u(),c(16,"th",24),h(17,"Start Date"),u(),c(18,"th",24),h(19,"End Date"),u(),c(20,"th",24),h(21,"Frequency"),u(),c(22,"th"),h(23,"Update Actual"),u()()(),c(24,"tbody"),rt(25,mX,2,1,"ng-container",25),u(),rt(26,gX,10,2,"tbody",33)(27,_X,3,0,"ng-template",null,0,De),u()()()),i&2){let t=an(28),n=I();_(25),D("ngIf",n.get_marketing_calender&&n.get_marketing_calender.length>0)("ngIfElse",t),_(),D("ngIf",n.get_marketing_calender&&n.get_marketing_calender.length>0)}}function xX(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",27),h(3),u(),c(4,"td",27),h(5),u(),c(6,"td",28),h(7),u(),c(8,"td",28),h(9),u(),c(10,"td",28),h(11),u(),c(12,"td",28),h(13),Et(14,"date"),u(),c(15,"td",28),h(16),Et(17,"date"),u(),c(18,"td",29),Rt(19,"i",30),u()(),c(20,"tr")(21,"td",31),h(22),u(),c(23,"td",31),h(24),u(),c(25,"td",31),h(26),u(),c(27,"td",31),h(28),Et(29,"date"),u(),c(30,"td",31),h(31),Et(32,"date"),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Eng_Task_name),_(2),A(t.Eng_goal_like),_(2),A(t.Eng_goal_followers),_(2),A(t.Eng_goal_Views),_(2),A(At(14,13,t.Eng_goal_start_date,"d MMM")),_(3),A(At(17,16,t.Eng_goal_end_date,"d MMM")),_(2),D("routerLink",te(25,tX,t.Engagement_tracking_id)),_(4),A(t.Eng_actual_like),_(2),A(t.Eng_actual_followers),_(2),A(t.Eng_actual_Views),_(2),A(At(29,19,t.Eng_actual_start_date,"d MMM")),_(3),A(At(32,22,t.Eng_actual_end_date,"d MMM"))}}function bX(i,e){if(i&1&&(pe(0),rt(1,xX,33,27,"ng-container",26),fe()),i&2){let t=I(2);_(),D("ngForOf",t.get_engagement_analyzing)}}function yX(i,e){i&1&&(c(0,"tr")(1,"td",32),h(2,"No task found"),u()())}function SX(i,e){if(i&1&&(c(0,"div",19)(1,"div",20)(2,"table",21)(3,"thead")(4,"tr")(5,"th",22),h(6,"Engagement Analyzing Tracker (Engagement for Online Activites)"),u()(),c(7,"tr",23)(8,"th"),h(9,"S.No"),u(),c(10,"th"),h(11,"Tasks"),u(),c(12,"th",24),h(13,"Likes"),u(),c(14,"th",24),h(15,"Followers"),u(),c(16,"th",24),h(17,"Views\\Reach"),u(),c(18,"th",24),h(19,"Start Date"),u(),c(20,"th",24),h(21,"End Date"),u(),c(22,"th"),h(23,"Update Actual"),u()()(),c(24,"tbody"),rt(25,bX,2,1,"ng-container",25),u(),rt(26,yX,3,0,"ng-template",null,0,De),u()()()),i&2){let t=an(27),n=I();_(25),D("ngIf",n.get_engagement_analyzing&&n.get_engagement_analyzing.length>0)("ngIfElse",t)}}function wX(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",27),h(3),u(),c(4,"td",27),h(5),u(),c(6,"td",28),h(7),Et(8,"date"),u(),c(9,"td",28),h(10),Et(11,"date"),u(),c(12,"td",28),h(13),u(),c(14,"td",29),Rt(15,"i",30),u()(),c(16,"tr")(17,"td",31),h(18),Et(19,"date"),u(),c(20,"td",31),h(21),Et(22,"date"),u(),c(23,"td",31),h(24),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Mls_description),_(2),A(At(8,9,t.Mls_goal_start_date,"d MMM")),_(3),A(At(11,12,t.Mls_goal_end_date,"d MMM")),_(3),A(t.Mls_goal_no_of_days),_(),D("routerLink",te(21,eX,t.Miscellaneous_id)),_(4),A(At(19,15,t.Mls_actual_start_date,"d MMM")),_(3),A(At(22,18,t.Mls_actual_end_date,"d MMM")),_(3),A(t.Mls_actual_no_of_days)}}function CX(i,e){if(i&1&&(pe(0),rt(1,wX,25,23,"ng-container",26),fe()),i&2){let t=I(2);_(),D("ngForOf",t.get_Miscellaneous_Works)}}function MX(i,e){i&1&&(c(0,"tr")(1,"td",32),h(2,"No task found"),u()())}function EX(i,e){if(i&1&&(c(0,"div",19)(1,"div",20)(2,"table",21)(3,"thead")(4,"tr")(5,"th",38),h(6,"Task Progress"),u()(),c(7,"tr",23)(8,"th"),h(9,"S.No"),u(),c(10,"th"),h(11,"Tasks"),u(),c(12,"th",24),h(13,"Start Date"),u(),c(14,"th",24),h(15,"End Date"),u(),c(16,"th",24),h(17,"Number of Days"),u(),c(18,"th"),h(19,"Update Actual"),u()()(),c(20,"tbody"),rt(21,CX,2,1,"ng-container",25),u(),rt(22,MX,3,0,"ng-template",null,0,De),u()()()),i&2){let t=an(23),n=I();_(21),D("ngIf",n.get_Miscellaneous_Works&&n.get_Miscellaneous_Works.length>0)("ngIfElse",t)}}function AX(i,e){if(i&1&&(c(0,"tr",48)(1,"td",49),h(2),u(),c(3,"td",50),h(4),u(),Rt(5,"td",50),c(6,"td",50),h(7),u(),c(8,"td",49),h(9),u(),c(10,"td"),h(11),Et(12,"date"),u(),c(13,"td",51),h(14),u()()),i&2){let t=e.$implicit,n=e.index,r=I(3);_(2),A(n+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_dbtracker),ai),_(),A(t.Db_name_client),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_dbtracker),ai),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_dbtracker),ai),_(),A(t.Db_location),_(2),A(t.Db_source),_(2),A(At(12,10,t.Db_date,"d MMM yy")),_(2),D("ngClass",Oa(13,iX,t.Db_status==="Connected",t.Db_status!=="Connected"||t.Db_status===null)),_(),de(" ",t.Db_status||"Not Connected"," ")}}function TX(i,e){if(i&1&&(pe(0),rt(1,AX,15,16,"tr",47),fe()),i&2){let t=I(2);_(),D("ngForOf",t.filtereddbtracker)}}function kX(i,e){i&1&&(c(0,"tr")(1,"td",32),h(2,"No Details found"),u()())}function IX(i,e){if(i&1){let t=Ft();c(0,"div",39)(1,"button",40),h(2,"Update Leads"),u(),c(3,"div")(4,"input",41),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.contactSearchTerm_dbtracker,r)||(s.contactSearchTerm_dbtracker=r),q(r)}),u()(),c(5,"div",42)(6,"table",43)(7,"thead",44)(8,"tr")(9,"th",45),h(10,"DataBase Tracker"),u()(),c(11,"tr")(12,"th",46),h(13,"S.No"),u(),c(14,"th",46),h(15,"Name"),u(),c(16,"th",46),h(17,"Contact"),u(),c(18,"th",46),h(19,"Location"),u(),c(20,"th",46),h(21,"Source"),u(),c(22,"th",46),h(23,"Date"),u(),c(24,"th",46),h(25,"Status"),u()()(),c(26,"tbody"),rt(27,TX,2,1,"ng-container",25)(28,kX,3,0,"ng-template",null,0,De),u()()()()}if(i&2){let t=an(29),n=I();_(),D("routerLink",te(4,nX,n.project_id)),_(3),gt("ngModel",n.contactSearchTerm_dbtracker),_(23),D("ngIf",n.filtereddbtracker&&n.filtereddbtracker.length>0)("ngIfElse",t)}}var nv=class i{constructor(e,t,n,r,s){this.route=e;this.apiService=t;this.http=n;this.domSanitizer=r;this.userService=s}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}selectedModule="";modules=["Content Tracker","Collateral Tracker","Marketing Calender","Engagement Analyzing","Task Progress","DataBase Tracker"];selectModule(e){this.selectedModule=e}updateactualtask=null;project_id=null;ngOnInit(){this.get_data(),this.url_parameters(),this.delay_functions(),this.get_contenttask(),this.get_collateral_task(),this.get_marketing_calender_api(),this.get_engagement_analyzing_api(),this.get_Miscellaneous_Works_api(),this.get_total_leads_api()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}card_name="";retrive_data(){this.card_name=this.apiService.get_redirect_card(),this.selectedModule=this.card_name}url_parameters(){this.route.params.subscribe(e=>{this.project_id=parseInt(e.projectid),this.updateactualtask=e.cardName})}delay_functions(){setTimeout(()=>{this.get_dbtracker_api(),this.project_name(),this.retrive_data()},.1)}project_names="";project_name(){this.project_id==1?this.project_names="ANBU AVENUE":this.project_id==2?this.project_names="RVS AVENUE":this.project_id==3?this.project_names="AGASTHYA PRIME":this.project_id==4&&(this.project_names="AGASTHYA DEVELOPER")}get_content=[];get_contenttask(){this.http.get(this.apiService.marketing_content_tracker_api()).subscribe(e=>{let t=new Date().getMonth(),n=new Date().getFullYear(),r=t===0?11:t-1,s=t===0?n-1:n;this.get_content=e.filter(a=>{let o=new Date(a.cont_goal_start_date),l=o.getMonth(),d=o.getFullYear();return l===t&&d===n||l===r&&d===s&&a.cont_status!=="Completed"?a.Project_id===this.project_id:!1})},e=>{console.error("Error fetching items",e)})}get_collateral;get_collateral_task(){this.http.get(this.apiService.Collateraltrackerapi()).subscribe(e=>{let t=new Date().getMonth(),n=new Date().getFullYear(),r=t===0?11:t-1,s=t===0?n-1:n;this.get_collateral=e.filter(a=>{let o=new Date(a.Col_goal_start_date),l=o.getMonth(),d=o.getFullYear();return l===t&&d===n||l===r&&d===s&&a.Col_status!=="Completed"?a.Project_id===this.project_id:!1})},e=>{console.error("Error fetching items",e)})}get_marketing_calender;Total_Actual_Cost;Total_Goal_Cost;get_marketing_calender_api(){this.http.get(this.apiService.marketingcalenderapi()).subscribe(e=>{this.get_marketing_calender=e.filter(t=>t.Project_id===this.project_id),this.Total_Goal_Cost=this.get_marketing_calender.reduce((t,n)=>t+n.Cal_goal_cost,0),this.Total_Actual_Cost=this.get_marketing_calender.reduce((t,n)=>t+n.Cal_actual_cost,0)},e=>{console.error("Error fetching items",e)})}get_engagement_analyzing;get_engagement_analyzing_api(){this.http.get(this.apiService.engagementanalyzingapi()).subscribe(e=>{this.get_engagement_analyzing=e.filter(t=>t.Project_id===this.project_id)},e=>{console.error("Error fetching items",e)})}get_total_leads;totalActual;totalGoal;get_total_leads_api(){this.http.get(this.apiService.marketingtotalleadapi()).subscribe(e=>{this.get_total_leads=e.filter(t=>t.Project_id===this.project_id),this.totalGoal=this.get_total_leads.reduce((t,n)=>t+n.Tol_goal,0),this.totalActual=this.get_total_leads.reduce((t,n)=>t+n.Tol_actual,0)},e=>{console.error("Error fetching items",e)})}get_dbtracker_data=[];get_dbtracker_api(){this.http.get(this.apiService.sales_dbtracker_api()).subscribe(e=>{this.get_dbtracker_data=e.filter(t=>t.project_id===this.project_id)},e=>{console.error("Error fetching items",e)})}contactSearchTerm_dbtracker="";get filtereddbtracker(){let e=this.contactSearchTerm_dbtracker.toLowerCase();return this.get_dbtracker_data.filter(t=>t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e))}highlightMatch(e,t){if(!t)return e;let n=new RegExp(`(${t})`,"gi"),r=e.replace(n,'<span style="background-color: yellow;">$1</span>');return this.domSanitizer.bypassSecurityTrustHtml(r)}get_Miscellaneous_Works;get_Miscellaneous_Works_api(){this.http.get(this.apiService.marketingmiscellaneousapi()).subscribe(e=>{let t=new Date().getMonth(),n=new Date().getFullYear(),r=t===0?11:t-1,s=t===0?n-1:n;this.get_Miscellaneous_Works=e.filter(a=>{let o=new Date(a.Mls_goal_start_date),l=o.getMonth(),d=o.getFullYear();return l===t&&d===n||l===r&&d===s&&a.Mls_status!=="Completed"?a.Project_id===this.project_id:!1})},e=>{console.error("Error fetching items",e)})}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(od),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-marketing-view-actuals"]],decls:24,vars:14,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"bradcrumb-card"],[1,"container","my-4"],[1,"form-group","module-dropdown"],["for","moduleSelect"],["id","moduleSelect",1,"custom-input",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"module-card"],[1,"module-list"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","container my-5",4,"ngIf"],["class","mt-5",4,"ngIf"],[3,"value"],[3,"click","ngClass"],[1,"container","my-5"],[1,"table-responsive"],[1,"table","table-responsive","table-bordered","content-table"],["colspan","13",1,"main-header"],[1,"header-row"],[1,"headers-title"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["rowspan","2",1,"vertical-center"],[1,"goal-color"],["rowspan","2",1,"vertical-center",3,"routerLink"],[1,"far","fa-edit"],[1,"actual-color"],["colspan","8",2,"text-align","center"],[4,"ngIf"],["rowspan","2","colspan","2",1,"vertical-center"],["colspan","5",1,"goal-color"],["rowspan","2"],["colspan","5",1,"actual-color"],["colspan","6",1,"main-header"],[1,"mt-5"],[1,"submit-btn",2,"width","180px",3,"routerLink"],["type","text","placeholder","Search Details",1,"custom-input","mb-2","mt-3",3,"ngModelChange","ngModel"],["id","content-to-pdf",1,"table-responsive"],[1,"table","table-bordered","table-striped"],[1,"table-header"],["colspan","7",1,"main-header"],[1,"goal"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[1,"table-cell"],[1,"table-cell",3,"innerHTML"],[3,"ngClass"]],template:function(t,n){t&1&&(c(0,"app-header",1),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"p"),h(6),u()(),c(7,"div",6)(8,"div",7)(9,"label",8),h(10,"Select Module"),u(),c(11,"select",9),vt("ngModelChange",function(s){return _t(n.selectedModule,s)||(n.selectedModule=s),s}),c(12,"option",10),h(13,"Select a Module"),u(),rt(14,rX,2,2,"option",11),u()(),c(15,"div",12)(16,"ul",13),rt(17,sX,2,4,"li",14),u()(),rt(18,cX,28,2,"div",15)(19,pX,30,2,"div",15)(20,vX,29,3,"div",15)(21,SX,28,2,"div",15)(22,EX,24,2,"div",15)(23,IX,30,6,"div",16),u()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(12,$q,!n.isSidebarOpen)),_(4),A(n.project_names),_(5),gt("ngModel",n.selectedModule),_(3),D("ngForOf",n.modules),_(3),D("ngForOf",n.modules),_(),D("ngIf",n.selectedModule==="Content Tracker"),_(),D("ngIf",n.selectedModule==="Collateral Tracker"),_(),D("ngIf",n.selectedModule==="Marketing Calender"),_(),D("ngIf",n.selectedModule==="Engagement Analyzing"),_(),D("ngIf",n.selectedModule==="Task Progress"),_(),D("ngIf",n.selectedModule==="DataBase Tracker"))},dependencies:[en,Jn,Sn,di,Ri,Li,yi,Si,oi,ni,on,ln,Qr],styles:[".sts-complete[_ngcontent-%COMP%]{background-color:green;color:#fff}.not-planed[_ngcontent-%COMP%]{background-color:#e7cef3;color:#5b3283}.team[_ngcontent-%COMP%]{background-color:#5b3283;color:#e7cef3}.not-assigned[_ngcontent-%COMP%]{background-color:#b00200;color:#fff}.goal[_ngcontent-%COMP%]{background-color:#d6a6be;text-align:center}.actual[_ngcontent-%COMP%]{background-color:#92c47d;text-align:center}.sts-all[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.main-header[_ngcontent-%COMP%]{background-color:#741b48;color:#fff}.custom-input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:5px;font-size:16px;transition:border-color .3s ease}.custom-input[_ngcontent-%COMP%]:focus{border-color:#5e1080;outline:none;box-shadow:0 0 5px #5d1285ad}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;transition:opacity .3s ease;opacity:0;visibility:hidden}.modal.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-dialog[_ngcontent-%COMP%]{max-width:500px;margin:auto}i[_ngcontent-%COMP%]{cursor:pointer;color:gray;transition:.1s}i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#492020}.goal-cell[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}.content-table[_ngcontent-%COMP%]{margin:20px 0;font-size:16px;text-align:center}.header-row[_ngcontent-%COMP%]{background-color:#6a1b47;color:#fff}.goal-header[_ngcontent-%COMP%], .actual-header[_ngcontent-%COMP%]{color:#000;font-weight:700}.goal-header[_ngcontent-%COMP%]{background-color:#d6a6be}.actual-header[_ngcontent-%COMP%]{background-color:#92c47d}.update-icon[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#6a1b47;font-size:18px;text-decoration:none}.goal-color[_ngcontent-%COMP%]{background-color:#d6a6be}.actual-color[_ngcontent-%COMP%]{background-color:#92c47d}.vertical-center[_ngcontent-%COMP%], .table-custom[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}.bg-light-pink[_ngcontent-%COMP%]{background-color:#e7c4c4}.bg-light-green[_ngcontent-%COMP%]{background-color:#98d98e}.headers-clr[_ngcontent-%COMP%]{background-color:#b9f1fe}.headers-title[_ngcontent-%COMP%]{background-color:#ffefe5}.green-text[_ngcontent-%COMP%]{color:green}.red-text[_ngcontent-%COMP%]{color:red}"]})};var DX=i=>({"full-width":i});function PX(i,e){if(i&1){let t=Ft();c(0,"div",13)(1,"div",14)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",15),lt("click",function(){G(t);let r=I();return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}var iv=class i{constructor(e,t,n,r,s){this.route=e;this.apiService=t;this.http=n;this.router=r;this.userService=s}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}project_id=null;ngOnInit(){this.route.params.subscribe(e=>{this.project_id=parseInt(e.projectid)}),this.apifromservice(),this.get_data()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}manage_task_api="";apifromservice(){this.manage_task_api=this.apiService.marketing_manage_task_api()}Marketing_task_name="";cont_goal_quality;cont_goal_quantity;cont_assigned_by="yoganandhan";cont_assigned_to=null;successmgs=!1;create_manage_task(){let e=this.manage_task_api,t={Marketing_task_name:this.Marketing_task_name},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.router.navigate(["/view-goals",this.project_id])},3e3)},r=>{console.log("Post request failed",r)})}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(Vn),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-new-goals"]],decls:18,vars:6,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mob-res"],[1,"container","mb-3","card-margin"],["class","alert-card fade-in",4,"ngIf"],[1,"card","shadow"],[1,"heading-card"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-6"],["type","text","placeholder","Enter Task Name",1,"custom-input",3,"ngModelChange","ngModel"],[1,"submit-btn",3,"click"],[1,"alert-card","fade-in"],[1,"alert-content"],[1,"close-btn",3,"click"]],template:function(t,n){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3)(4,"div",4),rt(5,PX,7,0,"div",5),c(6,"div",6)(7,"div",7)(8,"label"),h(9,"Manage Task"),u()(),c(10,"div",8)(11,"div",9)(12,"div",10)(13,"label"),h(14,"Task Name:"),u(),c(15,"input",11),vt("ngModelChange",function(s){return _t(n.Marketing_task_name,s)||(n.Marketing_task_name=s),s}),u()()(),c(16,"button",12),lt("click",function(){return n.create_manage_task()}),h(17,"Create"),u()()()()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(4,DX,!n.isSidebarOpen)),_(3),D("ngIf",n.successmgs),_(10),gt("ngModel",n.Marketing_task_name))},dependencies:[en,Sn,yi,oi,ni,on,ln],styles:[".card-margin[_ngcontent-%COMP%]{margin-top:3%}.custom-input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:5px;font-size:16px;transition:border-color .3s ease}.custom-input[_ngcontent-%COMP%]:focus{border-color:#5e1080;outline:none;box-shadow:0 0 5px #5d1285ad}.custom-label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px;display:block}label[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif}.heading-card[_ngcontent-%COMP%]{background-color:#639;color:#fff;border-top-right-radius:5px;border-top-left-radius:5px;padding:3%;text-align:center;font-size:20px}.mob-res[_ngcontent-%COMP%]{margin-top:5%}@media screen and (max-width: 768px){.mob-res[_ngcontent-%COMP%]{margin-top:20%}}"]})};var RX=i=>({"full-width":i}),LX=i=>({"active-module":i}),OX=i=>["/Add-sales-details","Add DataBase Tracker",i],NX=i=>["/Add-sales-details","DataBase Tracker",i],FX=i=>["/Add-sales-details","Sales Tracker",i],IC=i=>["/Add-sales-details","Customer Tracker",i],sv=(i,e,t,n)=>({"today-row":i,"past-row":e,"empty-date-row":t,"upcoming-row":n});function BX(i,e){if(i&1){let t=Ft();c(0,"div",18)(1,"div",19)(2,"strong"),h(3,"Success!"),u(),h(4),c(5,"button",20),lt("click",function(){G(t);let r=I();return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}if(i&2){let t=I();_(4),de(" ",t.set_sucess_message," ")}}function VX(i,e){if(i&1&&(c(0,"option",21),h(1),u()),i&2){let t=e.$implicit;D("value",t),_(),A(t)}}function UX(i,e){if(i&1){let t=Ft();c(0,"li",22),lt("click",function(){let r=G(t).$implicit,s=I();return q(s.selectModule(r))}),h(1),u()}if(i&2){let t=e.$implicit,n=I();D("ngClass",te(2,LX,t===n.selectedModule)),_(),de(" ",t," ")}}function zX(i,e){if(i&1){let t=Ft();c(0,"div",23)(1,"p"),h(2),u(),c(3,"button",24),lt("click",function(){G(t);let r=I();return q(r.closeComments())}),h(4,"Close"),u()()}if(i&2){let t=I();_(2),A(t.currentComment)}}function jX(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function HX(i,e){if(i&1&&(c(0,"div",43)(1,"table",44)(2,"thead")(3,"tr")(4,"th"),h(5,"Date"),u(),c(6,"th"),h(7,"Customer comments"),u()()(),c(8,"tbody"),rt(9,jX,6,5,"tr",45),u()()()),i&2){let t=I(3);_(9),D("ngForOf",t.get_db_telecaller_data)}}function WX(i,e){if(i&1){let t=Ft();c(0,"div",35),rt(1,HX,10,1,"div",36),c(2,"div",37)(3,"table",38)(4,"thead")(5,"tr")(6,"th"),h(7,"Name"),u(),c(8,"th"),h(9,"Quality"),u(),c(10,"th"),h(11,"Profession"),u(),c(12,"th"),h(13,"Budgets (Capacity)"),u(),c(14,"th"),h(15,"Status"),u(),c(16,"th"),h(17,"Expected Site Visit Date"),u(),c(18,"th"),h(19,"Customer comment"),u()()(),c(20,"tbody")(21,"tr")(22,"td"),h(23),u(),c(24,"td"),h(25),u(),c(26,"td"),h(27),u(),c(28,"td"),h(29),u(),c(30,"td"),h(31),u(),c(32,"td"),h(33),u(),c(34,"td")(35,"i",39),lt("click",function(){G(t);let r=I(2);return q(r.get_telecaller_api())}),u()()()()()(),c(36,"label"),h(37,"Remarks"),u(),c(38,"textarea",40),vt("ngModelChange",function(r){G(t);let s=I(2);return _t(s.db_tracker_data.Db_comments,r)||(s.db_tracker_data.Db_comments=r),q(r)}),u(),c(39,"button",41),h(40,"Update"),u(),c(41,"button",42),lt("click",function(){G(t);let r=I(2);return q(r.create_sales_tracker(r.db_tracker_data.Db_tracker_id))}),h(42,"Submit for sales tracker"),u()()}if(i&2){let t=I(2);_(),D("ngIf",t.customers_cmt_card),_(22),A(t.db_tracker_data.Db_name_client),_(2),A(t.db_tracker_data.Db_Quality),_(2),A(t.db_tracker_data.Db_Profession),_(2),A(t.db_tracker_data.Db_budget),_(2),A(t.db_tracker_data.Db_status),_(2),A(t.db_tracker_data.Sales_site_visit_execpted_date),_(5),gt("ngModel",t.db_tracker_data.Db_comments),_(),D("routerLink",te(9,NX,t.db_tracker_data.Db_tracker_id))}}function GX(i,e){if(i&1){let t=Ft();c(0,"tr",47)(1,"td"),h(2),u(),c(3,"td",48),h(4),u(),Rt(5,"td",48),c(6,"td",48),h(7),u(),c(8,"td"),h(9),u(),c(10,"td"),h(11),Et(12,"date"),u(),c(13,"td",49),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_details_update(r))}),Rt(14,"i",50),u()()}if(i&2){let t=e.$implicit,n=e.index,r=I(3);_(2),A(n+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_dbtracker),ai),_(),de(" ",t.Db_name_client,""),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_dbtracker),ai),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_dbtracker),ai),_(),de(" ",t.Db_location,""),_(2),A(t.Db_source),_(2),A(At(12,8,t.Db_date,"dd MMM yy"))}}function qX(i,e){if(i&1&&(pe(0),rt(1,GX,15,11,"tr",46),fe()),i&2){let t=I(2);_(),D("ngForOf",t.filteredDbTrackerData)}}function XX(i,e){i&1&&(c(0,"tr")(1,"td",51),h(2,"No Data Found"),u()())}function YX(i,e){if(i&1){let t=Ft();c(0,"div",25),rt(1,WX,43,11,"div",26),c(2,"div")(3,"button",27),h(4,"Update Leads"),u(),Rt(5,"br")(6,"br"),c(7,"input",28),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.contactSearchTerm_dbtracker,r)||(s.contactSearchTerm_dbtracker=r),q(r)}),u()(),c(8,"div",29)(9,"table",30)(10,"thead",31)(11,"tr")(12,"th",32),h(13,"DataBase Tracker"),u()(),c(14,"tr")(15,"th",33),h(16,"S.No"),u(),c(17,"th",33),h(18,"Name"),u(),c(19,"th",33),h(20,"Contact"),u(),c(21,"th",33),h(22,"Location"),u(),c(23,"th",33),h(24,"Source"),u(),c(25,"th",33),h(26,"Date"),u(),c(27,"th",33),h(28,"View"),u()()(),c(29,"tbody"),rt(30,qX,2,1,"ng-container",34)(31,XX,3,0,"ng-template",null,0,De),u()()()()}if(i&2){let t=an(32),n=I();_(),D("ngIf",n.isCardVisible),_(2),D("routerLink",te(5,OX,n.project_id)),_(4),gt("ngModel",n.contactSearchTerm_dbtracker),_(23),D("ngIf",n.filteredDbTrackerData&&n.filteredDbTrackerData.length>0)("ngIfElse",t)}}function $X(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function KX(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function ZX(i,e){if(i&1&&(c(0,"div",43)(1,"table",44)(2,"thead")(3,"tr")(4,"th",52),h(5,"Database Tracker"),u()()(),c(6,"thead")(7,"tr")(8,"th"),h(9,"Date"),u(),c(10,"th"),h(11,"Customer comments"),u()()(),c(12,"tbody"),rt(13,$X,6,5,"tr",45),u()(),c(14,"table",44)(15,"thead")(16,"tr")(17,"th",52),h(18,"Sales Tracker"),u()()(),c(19,"thead")(20,"tr")(21,"th"),h(22,"Date"),u(),c(23,"th"),h(24,"Customer comments"),u()()(),c(25,"tbody"),rt(26,KX,6,5,"tr",45),u()()()),i&2){let t=I(3);_(13),D("ngForOf",t.get_db_telecaller_data),_(13),D("ngForOf",t.get_sl_telecaller_data)}}function JX(i,e){if(i&1){let t=Ft();c(0,"div",35),rt(1,ZX,27,2,"div",36),c(2,"h6"),h(3,"Custome Details"),u(),c(4,"div",37)(5,"table",38)(6,"thead")(7,"tr")(8,"th"),h(9,"Name"),u(),c(10,"th"),h(11,"Source"),u(),c(12,"th"),h(13,"Leads Updated Date"),u(),c(14,"th"),h(15,"Budgets (Capacity)"),u(),c(16,"th"),h(17,"Profession"),u(),c(18,"th"),h(19,"Customer Comment"),u()()(),c(20,"tbody")(21,"tr")(22,"td"),h(23),u(),c(24,"td"),h(25),u(),c(26,"td"),h(27),Et(28,"date"),u(),c(29,"td"),h(30),u(),c(31,"td"),h(32),u(),c(33,"td")(34,"i",39),lt("click",function(){G(t);let r=I(2);return q(r.get_telecaller_api())}),u()()()()()(),c(35,"h6"),h(36,"Sales Details"),u(),c(37,"div",37)(38,"table",38)(39,"thead")(40,"tr")(41,"th"),h(42,"Quality"),u(),c(43,"th"),h(44,"Expected Site Visited Date"),u(),c(45,"th"),h(46,"Actual Site Visited Date"),u(),c(47,"th"),h(48,"Expected Token Date"),u(),c(49,"th"),h(50,"Actual Token Received Date"),u(),c(51,"th"),h(52,"Assigned To"),u()()(),c(53,"tbody")(54,"tr")(55,"td"),h(56),u(),c(57,"td"),h(58),Et(59,"date"),u(),c(60,"td"),h(61),Et(62,"date"),u(),c(63,"td"),h(64),Et(65,"date"),u(),c(66,"td"),h(67),Et(68,"date"),u(),c(69,"td"),h(70),u()()()()(),c(71,"label"),h(72,"Remark:"),u(),c(73,"textarea",40),vt("ngModelChange",function(r){G(t);let s=I(2);return _t(s.db_tracker_data.Sales_remarks,r)||(s.db_tracker_data.Sales_remarks=r),q(r)}),u(),c(74,"button",41),h(75,"Update"),u(),c(76,"button",42),lt("click",function(){G(t);let r=I(2);return q(r.create_customer_trackers_data(r.db_tracker_data.Db_tracker_id))}),h(77,"Submit For Customer Tracker"),u(),c(78,"button",42),lt("click",function(){G(t);let r=I(2);return q(r.move_to_db(r.db_tracker_data.Db_tracker_id))}),h(79,"Move to Database Tracker"),u()()}if(i&2){let t=I(2);_(),D("ngIf",t.customers_cmt_card),_(22),A(t.db_tracker_data.Db_name_client),_(2),A(t.db_tracker_data.Db_source),_(2),A(At(28,14,t.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_budget),_(2),A(t.db_tracker_data.Db_Profession),_(24),A(t.db_tracker_data.Db_Quality),_(2),A(At(59,17,t.db_tracker_data.Sales_site_visit_execpted_date,"dd-MMM-yy")),_(3),A(At(62,20,t.db_tracker_data.Sales_site_visit_date,"dd MMM yy")),_(3),A(At(65,23,t.db_tracker_data.Sales_token_execpted_date,"dd-MMM-yy")),_(3),A(At(68,26,t.db_tracker_data.Sales_token_recived_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_assign_to),_(3),gt("ngModel",t.db_tracker_data.Sales_remarks),_(),D("routerLink",te(29,FX,t.db_tracker_data.Db_tracker_id))}}function QX(i,e){if(i&1){let t=Ft();c(0,"tr",47)(1,"td"),h(2),u(),c(3,"td",48),h(4),u(),Rt(5,"td",48),c(6,"td",48),h(7),u(),c(8,"td"),h(9),u(),c(10,"td",53),Et(11,"date"),h(12),u(),c(13,"td",53),Et(14,"date"),h(15),u(),c(16,"td",49),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_details_update(r))}),Rt(17,"i",50),u()()}if(i&2){let t=e.$implicit,n=e.index,r=I(3);_(2),A(n+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_salestracker_u),ai),_(),de(" ",t.Db_name_client,""),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_salestracker_u),ai),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_salestracker_u),ai),_(),de(" ",t.Db_location,""),_(2),A(t.Sales_site_no),_(),D("title",At(11,11,t.Sales_site_visit_date,"dd-MMM-yy")),_(2),de(" ",t.Sales_stage1||"Site Visit Not Completed",""),_(),D("title",At(14,14,t.Sales_token_recived_date,"dd-MMM-yy")),_(2),de(" ",t.Sales_stage2||"Token Not Received","")}}function tY(i,e){if(i&1&&(pe(0),rt(1,QX,18,17,"tr",46),fe()),i&2){let t=I(2);_(),D("ngForOf",t.filteredsalestracker_u)}}function eY(i,e){i&1&&(c(0,"tr")(1,"td",51),h(2,"No Data Found"),u()())}function nY(i,e){if(i&1){let t=Ft();c(0,"div",25),rt(1,JX,80,31,"div",26),c(2,"div")(3,"input",28),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.contactSearchTerm_salestracker_u,r)||(s.contactSearchTerm_salestracker_u=r),q(r)}),u()(),c(4,"div",29)(5,"table",30)(6,"thead",31)(7,"tr")(8,"th",32),h(9,"Sales Tracker"),u()(),c(10,"tr")(11,"th",33),h(12,"S.No"),u(),c(13,"th",33),h(14,"Name"),u(),c(15,"th",33),h(16,"Contact"),u(),c(17,"th",33),h(18,"Location"),u(),c(19,"th",33),h(20,"Site No"),u(),c(21,"th",33),h(22,"Stage 1"),u(),c(23,"th",33),h(24,"Stage 2"),u(),c(25,"th",33),h(26,"View"),u()()(),c(27,"tbody"),rt(28,tY,2,1,"ng-container",34)(29,eY,3,0,"ng-template",null,0,De),u()()()()}if(i&2){let t=an(30),n=I();_(),D("ngIf",n.isCardVisible),_(2),gt("ngModel",n.contactSearchTerm_salestracker_u),_(25),D("ngIf",n.filteredsalestracker_u&&n.filteredsalestracker_u.length>0)("ngIfElse",t)}}function iY(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function rY(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function sY(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function aY(i,e){if(i&1&&(c(0,"div",56)(1,"table",44)(2,"thead")(3,"tr")(4,"th",52),h(5,"Database Tracker"),u()()(),c(6,"thead")(7,"tr")(8,"th"),h(9,"Date"),u(),c(10,"th"),h(11,"Customer comments"),u()()(),c(12,"tbody"),rt(13,iY,6,5,"tr",45),u()(),c(14,"table",44)(15,"thead")(16,"tr")(17,"th",52),h(18,"Sales Tracker"),u()()(),c(19,"thead")(20,"tr")(21,"th"),h(22,"Date"),u(),c(23,"th"),h(24,"Customer comments"),u()()(),c(25,"tbody"),rt(26,rY,6,5,"tr",45),u()(),c(27,"table",44)(28,"thead")(29,"tr")(30,"th",52),h(31,"Customer Tracker"),u()()(),c(32,"thead")(33,"tr")(34,"th"),h(35,"Date"),u(),c(36,"th"),h(37,"Customer comments"),u()()(),c(38,"tbody"),rt(39,sY,6,5,"tr",45),u()()()),i&2){let t=I(3);_(13),D("ngForOf",t.get_db_telecaller_data),_(13),D("ngForOf",t.get_sl_telecaller_data),_(13),D("ngForOf",t.get_cl_telecaller_data)}}function oY(i,e){if(i&1){let t=Ft();c(0,"div",35),rt(1,aY,40,3,"div",54),c(2,"h6"),h(3,"Custome Details"),u(),c(4,"div",37)(5,"table",38)(6,"thead")(7,"tr")(8,"th"),h(9,"Name"),u(),c(10,"th"),h(11,"Source"),u(),c(12,"th"),h(13,"Leads Updated Date"),u(),c(14,"th"),h(15,"Budgets (Capacity)"),u(),c(16,"th"),h(17,"Profession"),u(),c(18,"th"),h(19,"Customer Comment"),u()()(),c(20,"tbody")(21,"tr")(22,"td"),h(23),u(),c(24,"td"),h(25),u(),c(26,"td"),h(27),Et(28,"date"),u(),c(29,"td"),h(30),u(),c(31,"td"),h(32),u(),c(33,"td")(34,"i",39),lt("click",function(){G(t);let r=I(2);return q(r.get_telecaller_api())}),u()()()()()(),c(35,"h6"),h(36,"Customer Tracker"),u(),c(37,"div",37)(38,"table",38)(39,"thead")(40,"tr")(41,"th"),h(42,"Quality"),u(),c(43,"th"),h(44,"Expected Agreement Date"),u(),c(45,"th"),h(46,"Actual Agreement Date"),u(),c(47,"th"),h(48,"Expected Registration Date"),u(),c(49,"th"),h(50,"Actual Registered Date"),u(),c(51,"th"),h(52,"Assigned To"),u()()(),c(53,"tbody")(54,"tr")(55,"td"),h(56),u(),c(57,"td"),h(58),Et(59,"date"),u(),c(60,"td"),h(61),Et(62,"date"),u(),c(63,"td"),h(64),Et(65,"date"),u(),c(66,"td"),h(67),Et(68,"date"),u(),c(69,"td"),h(70),u()()()()(),c(71,"label"),h(72,"Remark:"),u(),c(73,"textarea",40),vt("ngModelChange",function(r){G(t);let s=I(2);return _t(s.db_tracker_data.Customer_comments,r)||(s.db_tracker_data.Customer_comments=r),q(r)}),u(),c(74,"button",41),h(75,"Update"),u(),c(76,"button",55),lt("click",function(){G(t);let r=I(2);return q(r.create_customer_database_data(r.db_tracker_data.Db_tracker_id))}),h(77,"Submit For Customer Database"),u(),c(78,"button",42),lt("click",function(){G(t);let r=I(2);return q(r.move_to_db(r.db_tracker_data.Db_tracker_id))}),h(79,"Move to Database Tracker"),u()()}if(i&2){let t=I(2);_(),D("ngIf",t.customers_cmt_card),_(22),A(t.db_tracker_data.Db_name_client),_(2),A(t.db_tracker_data.Db_source),_(2),A(At(28,14,t.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_budget),_(2),A(t.db_tracker_data.Db_Profession),_(24),A(t.db_tracker_data.Db_Quality),_(2),A(At(59,17,t.db_tracker_data.Customer_agreement_expected_date,"dd MMM yy")),_(3),A(At(62,20,t.db_tracker_data.Customer_agreement_date,"dd MMM yy")),_(3),A(At(65,23,t.db_tracker_data.Customer_registration_expected_date,"dd MMM yy")),_(3),A(At(68,26,t.db_tracker_data.Customer_registration_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_assign_to),_(3),gt("ngModel",t.db_tracker_data.Customer_comments),_(),D("routerLink",te(29,IC,t.db_tracker_data.Db_tracker_id))}}function lY(i,e){if(i&1){let t=Ft();c(0,"tr",47)(1,"td"),h(2),u(),c(3,"td",48),h(4),u(),Rt(5,"td",48),c(6,"td",48),h(7),u(),c(8,"td"),h(9),u(),c(10,"td",53),Et(11,"date"),h(12),u(),c(13,"td",53),Et(14,"date"),h(15),u(),c(16,"td",49),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_details_update(r))}),Rt(17,"i",50),u()()}if(i&2){let t=e.$implicit,n=e.index,r=I(3);_(2),A(n+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_customertracker),ai),_(),de(" ",t.Db_name_client,""),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_customertracker),ai),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_customertracker),ai),_(),de(" ",t.Db_location,""),_(2),A(t.Sales_site_no),_(),D("title",At(11,11,t.Customer_aggrement_date,"dd-MMM-yy")),_(2),de(" ",t.Customer_stage1||"Agreement Not Completed",""),_(),D("title",At(14,14,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Customer_stage2||"Registration Not Completed","")}}function cY(i,e){if(i&1&&(pe(0),rt(1,lY,18,17,"tr",46),fe()),i&2){let t=I(2);_(),D("ngForOf",t.filteredcustomertracker)}}function dY(i,e){i&1&&(c(0,"tr")(1,"td",51),h(2,"No Data Found"),u()())}function uY(i,e){if(i&1){let t=Ft();c(0,"div",25),rt(1,oY,80,31,"div",26),c(2,"div")(3,"input",28),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.contactSearchTerm_customertracker,r)||(s.contactSearchTerm_customertracker=r),q(r)}),u()(),c(4,"div",29)(5,"table",30)(6,"thead",31)(7,"tr")(8,"th",32),h(9,"Customer Tracker"),u()(),c(10,"tr")(11,"th",33),h(12,"S.No"),u(),c(13,"th",33),h(14,"Name"),u(),c(15,"th",33),h(16,"Contact"),u(),c(17,"th",33),h(18,"Location"),u(),c(19,"th",33),h(20,"Site No"),u(),c(21,"th",33),h(22,"Stage 1"),u(),c(23,"th",33),h(24,"Stage 2"),u(),c(25,"th",33),h(26,"View"),u()()(),c(27,"tbody"),rt(28,cY,2,1,"ng-container",34)(29,dY,3,0,"ng-template",null,0,De),u()()()()}if(i&2){let t=an(30),n=I();_(),D("ngIf",n.isCardVisible),_(2),gt("ngModel",n.contactSearchTerm_customertracker),_(25),D("ngIf",n.filteredcustomertracker&&n.filteredcustomertracker.length>0)("ngIfElse",t)}}function hY(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function pY(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function fY(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function mY(i,e){if(i&1&&(c(0,"div",56)(1,"table",44)(2,"thead")(3,"tr")(4,"th",52),h(5,"Database Tracker"),u()()(),c(6,"thead")(7,"tr")(8,"th"),h(9,"Date"),u(),c(10,"th"),h(11,"Customer comments"),u()()(),c(12,"tbody"),rt(13,hY,6,5,"tr",45),u()(),c(14,"table",44)(15,"thead")(16,"tr")(17,"th",52),h(18,"Sales Tracker"),u()()(),c(19,"thead")(20,"tr")(21,"th"),h(22,"Date"),u(),c(23,"th"),h(24,"Customer comments"),u()()(),c(25,"tbody"),rt(26,pY,6,5,"tr",45),u()(),c(27,"table",44)(28,"thead")(29,"tr")(30,"th",52),h(31,"Customer Tracker"),u()()(),c(32,"thead")(33,"tr")(34,"th"),h(35,"Date"),u(),c(36,"th"),h(37,"Customer comments"),u()()(),c(38,"tbody"),rt(39,fY,6,5,"tr",45),u()()()),i&2){let t=I(3);_(13),D("ngForOf",t.get_db_telecaller_data),_(13),D("ngForOf",t.get_sl_telecaller_data),_(13),D("ngForOf",t.get_cl_telecaller_data)}}function gY(i,e){if(i&1){let t=Ft();c(0,"div",58),rt(1,mY,40,3,"div",54),c(2,"h6"),h(3,"Custome Details"),u(),c(4,"div",37)(5,"table",38)(6,"thead")(7,"tr")(8,"th"),h(9,"Name"),u(),c(10,"th"),h(11,"Source"),u(),c(12,"th"),h(13,"Leads Updated Date"),u(),c(14,"th"),h(15,"Budgets (Capacity)"),u(),c(16,"th"),h(17,"Profession"),u(),c(18,"th"),h(19,"Customer Comment"),u()()(),c(20,"tbody")(21,"tr")(22,"td"),h(23),u(),c(24,"td"),h(25),u(),c(26,"td"),h(27),Et(28,"date"),u(),c(29,"td"),h(30),u(),c(31,"td"),h(32),u(),c(33,"td")(34,"i",39),lt("click",function(){G(t);let r=I(2);return q(r.get_telecaller_api())}),u()()()()()(),c(35,"h6"),h(36,"Sales Tracker"),u(),c(37,"div",37)(38,"table",38)(39,"thead")(40,"tr")(41,"th"),h(42,"Site Vist Status"),u(),c(43,"th"),h(44,"Actual Site Visted Date"),u(),c(45,"th"),h(46,"Token Status"),u(),c(47,"th"),h(48,"Actual Token Received Date"),u()()(),c(49,"tbody")(50,"tr")(51,"td"),h(52),u(),c(53,"td"),h(54),Et(55,"date"),u(),c(56,"td"),h(57),u(),c(58,"td"),h(59),Et(60,"date"),u()()()()(),c(61,"h6"),h(62,"Customer Tracker"),u(),c(63,"div",37)(64,"table",38)(65,"thead")(66,"tr")(67,"th"),h(68,"Agreement Status"),u(),c(69,"th"),h(70,"Actual Agreement Date"),u(),c(71,"th"),h(72,"Registered Status"),u(),c(73,"th"),h(74,"Actual Registered Date"),u()()(),c(75,"tbody")(76,"tr")(77,"td"),h(78),u(),c(79,"td"),h(80),Et(81,"date"),u(),c(82,"td"),h(83),u(),c(84,"td"),h(85),Et(86,"date"),u()()()()(),c(87,"label"),h(88,"Remark:"),u(),c(89,"textarea",40),vt("ngModelChange",function(r){G(t);let s=I(2);return _t(s.db_tracker_data.Customer_comments,r)||(s.db_tracker_data.Customer_comments=r),q(r)}),u(),c(90,"button",41),h(91,"Update"),u(),c(92,"button",42),lt("click",function(){G(t);let r=I(2);return q(r.move_to_db(r.db_tracker_data.Db_tracker_id))}),h(93,"Move to Database Tracker"),u()()}if(i&2){let t=I(2);_(),D("ngIf",t.customers_cmt_card),_(22),A(t.db_tracker_data.Db_name_client),_(2),A(t.db_tracker_data.Db_source),_(2),A(At(28,16,t.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_budget),_(2),A(t.db_tracker_data.Db_Profession),_(20),A(t.db_tracker_data.Sales_stage1),_(2),A(At(55,19,t.db_tracker_data.Sales_site_visit_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Sales_stage2),_(2),A(At(60,22,t.db_tracker_data.Sales_token_recived_date,"dd MMM yy")),_(19),A(t.db_tracker_data.Customer_stage1),_(2),A(At(81,25,t.db_tracker_data.Customer_agreement_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Customer_stage2),_(2),A(At(86,28,t.db_tracker_data.Customer_registration_date,"dd MMM yy")),_(4),gt("ngModel",t.db_tracker_data.Customer_comments),_(),D("routerLink",te(31,IC,t.db_tracker_data.Db_tracker_id))}}function _Y(i,e){if(i&1){let t=Ft();c(0,"tr",47)(1,"td"),h(2),u(),c(3,"td",48),h(4),u(),Rt(5,"td",48),c(6,"td",48),h(7),u(),c(8,"td"),h(9),u(),c(10,"td",49),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_details_update(r))}),Rt(11,"i",50),u()()}if(i&2){let t=e.$implicit,n=e.index,r=I(3);_(2),A(n+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_customerdb),ai),_(),de(" ",t.Db_name_client,""),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_customerdb),ai),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_customerdb),ai),_(),de(" ",t.Db_location,""),_(2),A(t.Sales_site_no)}}function vY(i,e){if(i&1&&(pe(0),rt(1,_Y,12,7,"tr",46),fe()),i&2){let t=I(2);_(),D("ngForOf",t.filteredcustomerdb)}}function xY(i,e){i&1&&(c(0,"tr")(1,"td",51),h(2,"No Data Found"),u()())}function bY(i,e){if(i&1){let t=Ft();c(0,"div",25),rt(1,gY,94,33,"div",57),c(2,"div")(3,"input",28),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.contactSearchTerm_customerdb,r)||(s.contactSearchTerm_customerdb=r),q(r)}),u()(),c(4,"div",29)(5,"table",30)(6,"thead",31)(7,"tr")(8,"th",32),h(9,"Customer Database"),u()(),c(10,"tr")(11,"th",33),h(12,"S.No"),u(),c(13,"th",33),h(14,"Name"),u(),c(15,"th",33),h(16,"Contact"),u(),c(17,"th",33),h(18,"Location"),u(),c(19,"th",33),h(20,"Site No"),u(),c(21,"th",33),h(22,"View"),u()()(),c(23,"tbody"),rt(24,vY,2,1,"ng-container",34)(25,xY,3,0,"ng-template",null,0,De),u()()()()}if(i&2){let t=an(26),n=I();_(),D("ngIf",n.isCardVisible),_(2),gt("ngModel",n.contactSearchTerm_customerdb),_(21),D("ngIf",n.filteredcustomerdb&&n.filteredcustomerdb.length>0)("ngIfElse",t)}}function yY(i,e){if(i&1){let t=Ft();c(0,"div",35)(1,"h6"),h(2,"Custome Details"),u(),c(3,"div",37)(4,"table",38)(5,"thead")(6,"tr")(7,"th"),h(8,"Name"),u(),c(9,"th"),h(10,"Source"),u(),c(11,"th"),h(12,"Leads Updated Date"),u(),c(13,"th"),h(14,"Budgets (Capacity)"),u(),c(15,"th"),h(16,"Profession"),u()()(),c(17,"tbody")(18,"tr")(19,"td"),h(20),u(),c(21,"td"),h(22),u(),c(23,"td"),h(24),Et(25,"date"),u(),c(26,"td"),h(27),u(),c(28,"td"),h(29),u()()()()(),c(30,"h6"),h(31,"Customer Tracker"),u(),c(32,"div",37)(33,"table",38)(34,"thead")(35,"tr")(36,"th"),h(37,"Quality"),u(),c(38,"th"),h(39,"Actual Agreement Date"),u(),c(40,"th"),h(41,"Actual Registered Date"),u(),c(42,"th"),h(43,"Assigned To"),u()()(),c(44,"tbody")(45,"tr")(46,"td"),h(47),u(),c(48,"td"),h(49),Et(50,"date"),u(),c(51,"td"),h(52),Et(53,"date"),u(),c(54,"td"),h(55),u()()()()(),c(56,"label"),h(57,"Remark:"),u(),c(58,"textarea",40),vt("ngModelChange",function(r){G(t);let s=I(2);return _t(s.db_tracker_data.Customer_comments,r)||(s.db_tracker_data.Customer_comments=r),q(r)}),u(),c(59,"button",41),h(60,"Update"),u()()}if(i&2){let t=I(2);_(20),A(t.db_tracker_data.Db_name_client),_(2),A(t.db_tracker_data.Db_source),_(2),A(At(25,11,t.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_budget),_(2),A(t.db_tracker_data.Db_Profession),_(18),A(t.db_tracker_data.Db_Quality),_(2),A(At(50,14,t.db_tracker_data.Customer_agreement_date,"dd MMM yy")),_(3),A(At(53,17,t.db_tracker_data.Customer_registration_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Customer_assigned),_(3),gt("ngModel",t.db_tracker_data.Customer_comments),_(),D("routerLink",te(20,IC,t.db_tracker_data.Db_tracker_id))}}function SY(i,e){if(i&1){let t=Ft();c(0,"tr",60)(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td"),h(10),Et(11,"date"),u(),c(12,"td",53),Et(13,"date"),h(14),u(),c(15,"td",49),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_details_update(r))}),Rt(16,"i",50),u()()}if(i&2){let t=e.$implicit,n=e.index,r=I(3);D("ngClass",ao(14,sv,r.isToday(t.Customer_registration_expected_date),r.isPast(t.Customer_registration_expected_date),r.isEmptyDate(t.Customer_registration_expected_date),r.isUpcoming(t.Customer_registration_expected_date))),_(2),A(n+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),de(" ",t.Customer_registration_expected_date?At(11,8,t.Customer_registration_expected_date,"dd MMM yy"):"Date Not Fixed"," "),_(2),D("title",At(13,11,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Customer_stage2||"Registration Not Completed"," ")}}function wY(i,e){if(i&1&&(pe(0),rt(1,SY,17,19,"tr",59),fe()),i&2){let t=I(2);_(),D("ngForOf",t.telecallers_registration)}}function CY(i,e){i&1&&(c(0,"tr")(1,"td",51),h(2,"No Data Found"),u()())}function MY(i,e){if(i&1){let t=Ft();c(0,"tr",60)(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td"),h(10),Et(11,"date"),u(),c(12,"td",53),Et(13,"date"),h(14),u(),c(15,"td",49),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_details_update(r))}),Rt(16,"i",50),u()()}if(i&2){let t=e.$implicit,n=e.index,r=I(3);D("ngClass",ao(14,sv,r.isToday(t.Customer_agreement_expected_date),r.isPast(t.Customer_agreement_expected_date),r.isEmptyDate(t.Customer_agreement_expected_date),r.isUpcoming(t.Customer_agreement_expected_date))),_(2),A(n+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),de(" ",t.Customer_agreement_expected_date?At(11,8,t.Customer_agreement_expected_date,"dd MMM yy"):"Date Not Fixed"," "),_(2),D("title",At(13,11,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Customer_stage1||"Agreement Not Completed"," ")}}function EY(i,e){if(i&1&&(pe(0),rt(1,MY,17,19,"tr",59),fe()),i&2){let t=I(2);_(),D("ngForOf",t.telecallers_agreement)}}function AY(i,e){i&1&&(c(0,"tr")(1,"td",51),h(2,"No Data Found"),u()())}function TY(i,e){if(i&1){let t=Ft();c(0,"tr",60)(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td"),h(10),Et(11,"date"),u(),c(12,"td",53),Et(13,"date"),h(14),u(),c(15,"td",49),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_details_update(r))}),Rt(16,"i",50),u()()}if(i&2){let t=e.$implicit,n=e.index,r=I(3);D("ngClass",ao(14,sv,r.isToday(t.Sales_token_execpted_date),r.isPast(t.Sales_token_execpted_date),r.isEmptyDate(t.Sales_token_execpted_date),r.isUpcoming(t.Sales_token_execpted_date))),_(2),A(n+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),de(" ",t.Sales_token_execpted_date?At(11,8,t.Sales_token_execpted_date,"dd MMM yy"):"Date Not Fixed"," "),_(2),D("title",At(13,11,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Sales_stage2||"Token Not Completed"," ")}}function kY(i,e){if(i&1&&(pe(0),rt(1,TY,17,19,"tr",59),fe()),i&2){let t=I(2);_(),D("ngForOf",t.telecallers_token)}}function IY(i,e){i&1&&(c(0,"tr")(1,"td",51),h(2,"No Data Found"),u()())}function DY(i,e){if(i&1){let t=Ft();c(0,"tr",60)(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td"),h(10),Et(11,"date"),u(),c(12,"td",53),Et(13,"date"),h(14),u(),c(15,"td",49),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_details_update(r))}),Rt(16,"i",50),u()()}if(i&2){let t=e.$implicit,n=e.index,r=I(3);D("ngClass",ao(14,sv,r.isToday(t.Sales_site_visit_execpted_date),r.isPast(t.Sales_site_visit_execpted_date),r.isEmptyDate(t.Sales_site_visit_execpted_date),r.isUpcoming(t.Sales_site_visit_execpted_date))),_(2),A(n+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),de(" ",t.Sales_site_visit_execpted_date?At(11,8,t.Sales_site_visit_execpted_date,"dd MMM yy"):"Date Not Fixed"," "),_(2),D("title",At(13,11,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Sales_stage1||"Site Visit Not Completed"," ")}}function PY(i,e){if(i&1&&(pe(0),rt(1,DY,17,19,"tr",59),fe()),i&2){let t=I(2);_(),D("ngForOf",t.telecallers_site_visit)}}function RY(i,e){i&1&&(c(0,"tr")(1,"td",51),h(2,"No Data Found"),u()())}function LY(i,e){if(i&1&&(c(0,"div",25),rt(1,yY,61,22,"div",26),c(2,"div",29)(3,"table",30)(4,"thead",31)(5,"tr")(6,"th",32),h(7,"Registration"),u()(),c(8,"tr")(9,"th",33),h(10,"S.No"),u(),c(11,"th",33),h(12,"Name"),u(),c(13,"th",33),h(14,"Contact"),u(),c(15,"th",33),h(16,"Location"),u(),c(17,"th",33),h(18,"Expected Registration Date"),u(),c(19,"th",33),h(20,"Stage 2"),u(),c(21,"th",33),h(22,"View"),u()()(),c(23,"tbody"),rt(24,wY,2,1,"ng-container",34)(25,CY,3,0,"ng-template",null,0,De),u()()(),c(27,"div",29)(28,"table",30)(29,"thead",31)(30,"tr")(31,"th",32),h(32,"Agreement"),u()(),c(33,"tr")(34,"th",33),h(35,"S.No"),u(),c(36,"th",33),h(37,"Name"),u(),c(38,"th",33),h(39,"Contact"),u(),c(40,"th",33),h(41,"Location"),u(),c(42,"th",33),h(43,"Expected Agreement Date"),u(),c(44,"th",33),h(45,"Agreement Status"),u(),c(46,"th",33),h(47,"View"),u()()(),c(48,"tbody"),rt(49,EY,2,1,"ng-container",34)(50,AY,3,0,"ng-template",null,0,De),u()()(),c(52,"div",29)(53,"table",30)(54,"thead",31)(55,"tr")(56,"th",32),h(57,"Token"),u()(),c(58,"tr")(59,"th",33),h(60,"S.No"),u(),c(61,"th",33),h(62,"Name"),u(),c(63,"th",33),h(64,"Contact"),u(),c(65,"th",33),h(66,"Location"),u(),c(67,"th",33),h(68,"Expected Token Date"),u(),c(69,"th",33),h(70,"Token Status"),u(),c(71,"th",33),h(72,"View"),u()()(),c(73,"tbody"),rt(74,kY,2,1,"ng-container",34)(75,IY,3,0,"ng-template",null,0,De),u()()(),c(77,"div",29)(78,"table",30)(79,"thead",31)(80,"tr")(81,"th",32),h(82,"Site Visit"),u()(),c(83,"tr")(84,"th",33),h(85,"S.No"),u(),c(86,"th",33),h(87,"Name"),u(),c(88,"th",33),h(89,"Contact"),u(),c(90,"th",33),h(91,"Location"),u(),c(92,"th",33),h(93,"Expected Site Visit Date"),u(),c(94,"th",33),h(95,"Site Visit Status"),u(),c(96,"th",33),h(97,"View"),u()()(),c(98,"tbody"),rt(99,PY,2,1,"ng-container",34)(100,RY,3,0,"ng-template",null,0,De),u()()()()),i&2){let t=an(26),n=I();_(),D("ngIf",n.isCardVisible),_(23),D("ngIf",n.telecallers_registration&&n.telecallers_registration.length>0)("ngIfElse",t),_(25),D("ngIf",n.telecallers_agreement&&n.telecallers_agreement.length>0)("ngIfElse",t),_(25),D("ngIf",n.telecallers_token&&n.telecallers_token.length>0)("ngIfElse",t),_(25),D("ngIf",n.telecallers_site_visit&&n.telecallers_site_visit.length>0)("ngIfElse",t)}}var rv=class i{constructor(e,t,n,r,s){this.route=e;this.apiService=t;this.http=n;this.domSanitizer=r;this.userService=s}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}selectedModule="";modules=["Database Tracker","Sales Tracker","Customer Tracker","Customer Database","Telecaller"];selectModule(e){this.selectedModule=e}updateactualtask=null;project_id=null;dbtracker_api_url="";sales_telecallers_comments_url="";ngOnInit(){this.get_data(),this.dbtracker_api_url=this.apiService.sales_dbtracker_api(),this.sales_telecallers_comments_url=this.apiService.sales_telecallers_comments_api(),this.url_parameters(),this.project_name(),this.get_dbtracker_api(),this.retrive_data(),this.get_telecaller_data()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}card_name="";retrive_data(){this.card_name=this.apiService.get_redirect_card(),this.selectedModule=this.card_name}url_parameters(){this.route.params.subscribe(e=>{this.project_id=parseInt(e.salesprojectid),this.updateactualtask=e.cardName})}project_names="";project_name(){setTimeout(()=>{this.project_id==1?this.project_names="ANBU AVENUE":this.project_id==2&&(this.project_names="RVS AVENUE")},.1)}get_dbtracker_data=[];get_sales_tracker_data=[];get_sales_customer_tracker_data=[];get_sales_customer_database_data=[];get_telecallers_data=[];get_dbtracker_api(){let e=new Date;this.http.get(this.dbtracker_api_url).subscribe(t=>{this.get_dbtracker_data=t.filter(n=>n.project_id===this.project_id&&n.is_db_tracker===!0),this.get_sales_tracker_data=t.filter(n=>n.project_id===this.project_id&&n.is_sales_tracker===!0),this.get_sales_customer_tracker_data=t.filter(n=>n.project_id===this.project_id&&n.is_customer_tracker===!0),this.get_sales_customer_database_data=t.filter(n=>n.project_id===this.project_id&&n.is_customer_database===!0),this.get_telecallers_data=t.filter(n=>n.project_id===this.project_id)},t=>{console.error("Error fetching items",t)})}telecallers_token=[];telecallers_agreement=[];telecallers_registration=[];telecallers_site_visit=[];get_telecaller_data(){let e=new Date().setHours(0,0,0,0);this.telecallers_site_visit=this.get_telecallers_data.filter(t=>{let n=new Date(t.Sales_site_visit_execpted_date).setHours(0,0,0,0);return t.Sales_stage1!=="Site Visit Completed"}).sort((t,n)=>{let r=new Date(t.Sales_site_visit_execpted_date).setHours(0,0,0,0),s=new Date(n.Sales_site_visit_execpted_date).setHours(0,0,0,0);return r>=e&&s>=e||r<e&&s<e?r-s:r>=e?-1:1}),this.telecallers_token=this.get_telecallers_data.filter(t=>{let n=new Date(t.Sales_token_execpted_date).setHours(0,0,0,0);return t.Sales_stage2!=="Token Received"&&t.Sales_stage1==="Site Visit Completed"}).sort((t,n)=>{let r=new Date(t.Sales_token_execpted_date).setHours(0,0,0,0),s=new Date(n.Sales_token_execpted_date).setHours(0,0,0,0);return r>=e&&s>=e||r<e&&s<e?r-s:r>=e?-1:1}),this.telecallers_agreement=this.get_telecallers_data.filter(t=>{let n=new Date(t.Customer_agreement_expected_date).setHours(0,0,0,0);return t.Customer_stage1!=="Agreement Completed"&&t.Sales_stage2==="Token Received"}).sort((t,n)=>{let r=new Date(t.Customer_agreement_expected_date).setHours(0,0,0,0),s=new Date(n.Customer_agreement_expected_date).setHours(0,0,0,0);return r>=e&&s>=e||r<e&&s<e?r-s:r>=e?-1:1}),this.telecallers_registration=this.get_telecallers_data.filter(t=>{let n=new Date(t.Customer_registration_expected_date).setHours(0,0,0,0);return t.Customer_stage2!=="Registration Completed"&&t.Customer_stage1==="Agreement Completed"}).sort((t,n)=>{let r=new Date(t.Customer_registration_expected_date).setHours(0,0,0,0),s=new Date(n.Customer_registration_expected_date).setHours(0,0,0,0);return r>=e&&s>=e||r<e&&s<e?r-s:r>=e?-1:1})}isToday(e){let t=new Date().setHours(0,0,0,0),n=new Date(e).setHours(0,0,0,0);return t===n}isPast(e){let t=new Date().setHours(0,0,0,0);return new Date(e).setHours(0,0,0,0)<t}isEmptyDate(e){return!e||new Date(e).toString()==="Invalid Date"}isUpcoming(e){let t=new Date().setHours(0,0,0,0);return new Date(e).setHours(0,0,0,0)>t&&!this.isEmptyDate(e)}contactSearchTerm_dbtracker="";get filteredDbTrackerData(){let e=this.contactSearchTerm_dbtracker.toLowerCase();return this.get_dbtracker_data.filter(t=>t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e))}isCardVisible=!1;db_tracker_data;sales_details_update(e){this.isCardVisible=!0,this.db_tracker_data=e}onDocumentClick(e){let t=document.querySelector(".pop-card");t&&!t.contains(e.target)&&(this.isCardVisible=!1);let n=document.querySelector(".pop-card-cmt");n&&!n.contains(e.target)&&(this.customers_cmt_card=!1)}showCommentCard=!1;currentComment="";showComments(e){this.currentComment=e,this.showCommentCard=!0}closeComments(){this.showCommentCard=!1}contactSearchTerm_salestracker_u="";get filteredsalestracker_u(){let e=this.contactSearchTerm_salestracker_u.toLowerCase();return this.get_sales_tracker_data.filter(t=>t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e))}contactSearchTerm_customertracker="";get filteredcustomertracker(){let e=this.contactSearchTerm_customertracker.toLowerCase();return this.get_sales_customer_tracker_data.filter(t=>t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e))}contactSearchTerm_customerdb="";get filteredcustomerdb(){let e=this.contactSearchTerm_customerdb.toLowerCase();return this.get_sales_customer_database_data.filter(t=>t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e))}highlightMatch(e,t){if(!t)return e;let n=new RegExp(`(${t})`,"gi"),r=e.replace(n,'<span style="background-color: yellow;">$1</span>');return this.domSanitizer.bypassSecurityTrustHtml(r)}successmgs=!1;set_sucess_message="";create_sales_tracker(e){let t=this.dbtracker_api_url+e,n={is_db_tracker:!1,is_sales_tracker:!0},r={headers:new We({"Content-Type":"application/json"})};this.http.put(t,n,r).subscribe(s=>{console.log(s),this.set_sucess_message="Passed To Sales Tracker",this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.set_sucess_message="",this.get_dbtracker_api()},1e3)},s=>{console.log("Post request failed",s)}),this.isCardVisible=!1}create_customer_trackers_data(e){let t=this.dbtracker_api_url+e,n={is_customer_tracker:!0,is_sales_tracker:!1},r={headers:new We({"Content-Type":"application/json"})};this.http.put(t,n,r).subscribe(s=>{console.log(s),this.set_sucess_message="Passed To Customer Tracker",this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.set_sucess_message="",this.get_dbtracker_api()},1e3)},s=>{console.log("Post request failed",s)}),this.isCardVisible=!1}create_customer_database_data(e){let t=this.dbtracker_api_url+e,n={is_customer_database:!0,is_customer_tracker:!1},r={headers:new We({"Content-Type":"application/json"})};this.http.put(t,n,r).subscribe(s=>{console.log(s),this.successmgs=!0,this.set_sucess_message="Passed To Customer Database",setTimeout(()=>{this.successmgs=!1,this.get_dbtracker_api()},1e3)},s=>{console.log("Post request failed",s)}),this.isCardVisible=!1}move_to_db(e){let t=this.dbtracker_api_url+e,n={headers:new We({"Content-Type":"application/json"})};this.http.put(t,{is_db_tracker:!0,is_sales_tracker:!1,is_customer_tracker:!1,is_customer_database:!1},n).subscribe({next:r=>{console.log(r),this.successmgs=!1,this.set_sucess_message="Moved To Database Tracker",setTimeout(()=>this.get_dbtracker_api(),1e3)},error:r=>console.log("Post request failed",r)}),this.isCardVisible=!1}customers_cmt_card=!1;get_db_telecaller_data=[];get_sl_telecaller_data=[];get_cl_telecaller_data=[];get_telecaller_api(){this.http.get(this.sales_telecallers_comments_url).subscribe(e=>{this.get_db_telecaller_data=e.filter(t=>t.Db_tracker_id===this.db_tracker_data.Db_tracker_id&&t.module_name==="Databe tracker"),this.get_sl_telecaller_data=e.filter(t=>t.Db_tracker_id===this.db_tracker_data.Db_tracker_id&&t.module_name==="Sales tracker"),this.get_cl_telecaller_data=e.filter(t=>t.Db_tracker_id===this.db_tracker_data.Db_tracker_id&&t.module_name==="Customer tracker")},e=>{console.error("Error fetching items",e)}),this.customers_cmt_card=!0}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(od),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-sales-status"]],hostBindings:function(t,n){t&1&&lt("click",function(s){return n.onDocumentClick(s)},!1,Hl)},decls:25,vars:15,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"bradcrumb-card"],["style","width: 25%;","class","alert-card fade-in",4,"ngIf"],[1,"container","my-4"],[1,"form-group","module-dropdown"],["for","moduleSelect"],["id","moduleSelect",1,"custom-input",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"module-card"],[1,"module-list"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","comment-card",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"alert-card","fade-in",2,"width","25%"],[1,"alert-content"],[1,"close-btn",3,"click"],[3,"value"],[3,"click","ngClass"],[1,"comment-card"],[1,"btn","btn-secondary",3,"click"],[1,"mt-5"],["class","pop-card",4,"ngIf"],[1,"submit-btn",2,"width","180px",3,"routerLink"],["type","text","placeholder","Search Details",1,"custom-input","mb-2",3,"ngModelChange","ngModel"],["id","content-to-pdf",1,"table-responsive"],[1,"table","table-bordered","table-striped"],[1,"table-header"],["colspan","15",1,"main-header"],[1,"goal"],[4,"ngIf","ngIfElse"],[1,"pop-card"],["class","pop-card-cmt",4,"ngIf"],[1,"data-table-container"],[1,"data-table"],[1,"fas","fa-comment-alt",3,"click"],["readonly","",1,"custom-input",3,"ngModelChange","ngModel"],[1,"submit-btn",3,"routerLink"],[1,"submit-btn",2,"width","300px",3,"click"],[1,"pop-card-cmt"],[1,"custmer-table"],[4,"ngFor","ngForOf"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[3,"innerHTML"],[3,"click"],[1,"fas","fa-eye"],["colspan","15",2,"text-align","center"],["colspan","2"],[3,"title"],["class","pop-card-cmt mt-5",4,"ngIf"],[1,"submit-btn",2,"width","350px",3,"click"],[1,"pop-card-cmt","mt-5"],["class","pop-card mt-5",4,"ngIf"],[1,"pop-card","mt-5"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(t,n){t&1&&(c(0,"app-header",1),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"p"),h(6),u()(),rt(7,BX,7,1,"div",6),c(8,"div",7)(9,"div",8)(10,"label",9),h(11,"Select Module"),u(),c(12,"select",10),vt("ngModelChange",function(s){return _t(n.selectedModule,s)||(n.selectedModule=s),s}),c(13,"option",11),h(14,"Select a Module"),u(),rt(15,VX,2,2,"option",12),u()(),c(16,"div",13)(17,"ul",14),rt(18,UX,2,4,"li",15),u()(),rt(19,zX,5,1,"div",16)(20,YX,33,7,"div",17)(21,nY,31,4,"div",17)(22,uY,31,4,"div",17)(23,bY,27,4,"div",17)(24,LY,102,9,"div",17),u()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(13,RX,!n.isSidebarOpen)),_(4),A(n.project_names),_(),D("ngIf",n.successmgs),_(5),gt("ngModel",n.selectedModule),_(3),D("ngForOf",n.modules),_(3),D("ngForOf",n.modules),_(),D("ngIf",n.showCommentCard),_(),D("ngIf",n.selectedModule==="Database Tracker"),_(),D("ngIf",n.selectedModule==="Sales Tracker"),_(),D("ngIf",n.selectedModule==="Customer Tracker"),_(),D("ngIf",n.selectedModule==="Customer Database"),_(),D("ngIf",n.selectedModule==="Telecaller"))},dependencies:[en,Jn,Sn,di,Ri,Li,yi,Si,oi,ni,on,ln,Qr],styles:['.sts-complete[_ngcontent-%COMP%]{background-color:green;color:#fff}.not-planed[_ngcontent-%COMP%]{background-color:#e7cef3;color:#5b3283}.team[_ngcontent-%COMP%]{background-color:#5b3283;color:#e7cef3}.not-assigned[_ngcontent-%COMP%]{background-color:#b00200;color:#fff}.goal[_ngcontent-%COMP%]{background-color:#d6a6be;text-align:center}.actual[_ngcontent-%COMP%]{background-color:#92c47d;text-align:center}.sts-all[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}td[_ngcontent-%COMP%]{text-align:center;width:15%}th[_ngcontent-%COMP%]{text-align:center}.main-header[_ngcontent-%COMP%]{background-color:#741b48;color:#fff}.custom-input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:5px;font-size:16px;transition:border-color .3s ease}.custom-input[_ngcontent-%COMP%]:focus{border-color:#5e1080;outline:none;box-shadow:0 0 5px #5d1285ad}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;transition:opacity .3s ease;opacity:0;visibility:hidden}.modal.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-dialog[_ngcontent-%COMP%]{max-width:500px;margin:auto}.filter_card[_ngcontent-%COMP%]{margin:5%}.meeting-header[_ngcontent-%COMP%]{background-color:#5b3283;color:#fff;font-size:18px;padding:5px;margin-top:5%;text-align:center}.pop-card[_ngcontent-%COMP%]{position:absolute;background-color:#f0f4f8;padding:2%;border-radius:10px;top:45%;left:50%;transform:translate(-50%,-50%);box-shadow:0 4px 10px #0003}.pop-card-cmt[_ngcontent-%COMP%]{position:fixed;background-color:#f0f4f8;padding:2%;border-radius:10px;top:45%;left:50%;transform:translate(-50%,-50%);box-shadow:0 4px 10px #0003}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:left}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#92c47d;color:#fff}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px;font-weight:700;text-transform:uppercase}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;color:#333;border-bottom:1px solid #ddd}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f4f4f4}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}@media (max-width: 600px){.data-table[_ngcontent-%COMP%]{font-size:14px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px}}.custmer-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-family:Arial,sans-serif;margin:20px 0;box-shadow:0 2px 5px #0000001a}.custmer-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.custmer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;font-size:14px;text-transform:uppercase;letter-spacing:1px}.custmer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}.custmer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.custmer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px;text-align:left;border-bottom:1px solid #ddd}.custmer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .custmer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.custmer-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover:after{content:"View Customer Comment";position:absolute;background-color:#333;color:#fff;padding:5px;font-size:12px;border-radius:5px;bottom:30px;left:50%;transform:translate(-50%);opacity:0;transition:opacity .3s}.custmer-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover:after{opacity:1}']})};var OY=i=>({"full-width":i}),DC=i=>["/view-sales-details",i],PC=i=>["/Sales-status",i],av=class i{constructor(e){this.userService=e}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}ngOnInit(){this.get_data()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}project1=1;project2=2;project3=3;static \u0275fac=function(t){return new(t||i)(Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-sales-projects"]],decls:44,vars:22,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container",2,"margin-top","10%"],[1,"row"],[1,"col","mt-5"],[1,"projects-card"],["src","/assets/images/Anbu-Avenue.jpg","alt","",1,"project-img"],[1,"projects-card-txt"],[2,"margin-bottom","5px"],[1,"banner-btn"],[3,"routerLink"],["src","/assets/images/RVS.jpg","alt","",1,"project-img"],["src","/assets/images/agasthya-prime.png","alt","",1,"project-img"]],template:function(t,n){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),Rt(7,"img",7),c(8,"div",8)(9,"h4",9),h(10,"Komarapalayam"),u()(),c(11,"div",10)(12,"a",11),Rt(13,"span"),h(14,"Sales Details"),u(),c(15,"a",11),Rt(16,"span"),h(17,"Status"),u()()()(),c(18,"div",5)(19,"div",6),Rt(20,"img",12),c(21,"div",8)(22,"h4",9),h(23,"Sangagiri"),u()(),c(24,"div",10)(25,"a",11),Rt(26,"span"),h(27,"Sales Details"),u(),c(28,"a",11),Rt(29,"span"),h(30,"Status"),u()()()(),c(31,"div",5)(32,"div",6),Rt(33,"img",13),c(34,"div",8)(35,"h4",9),h(36,"Appakudal"),u()(),c(37,"div",10)(38,"a",11),Rt(39,"span"),h(40,"Sales Details"),u(),c(41,"a",11),Rt(42,"span"),h(43,"Status"),u()()()()()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(8,OY,!n.isSidebarOpen)),_(10),D("routerLink",te(10,DC,n.project1)),_(3),D("routerLink",te(12,PC,n.project1)),_(10),D("routerLink",te(14,DC,n.project2)),_(3),D("routerLink",te(16,PC,n.project2)),_(10),D("routerLink",te(18,DC,n.project3)),_(3),D("routerLink",te(20,PC,n.project3)))},dependencies:[en,di,on,ln],styles:[".project-img[_ngcontent-%COMP%]{height:150px;width:100%}.projects-card[_ngcontent-%COMP%]{background-color:#5e0f80;border-radius:10px;display:flex;display:inline-block;padding:10px;color:#fff;cursor:pointer;transition:transform .3s ease,color .3s ease}.projects-card[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.projects-card-txt[_ngcontent-%COMP%]{text-align:center;border:1px solid white;padding:5px}.banner-btn[_ngcontent-%COMP%]{margin:10px auto 0}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:inline-block;margin:0 10px;color:#fff;border:.5px solid #fff;position:relative;z-index:1;transition:color .5s;padding:10px}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:0;height:100%;position:absolute;top:0;left:0;background:#fff;z-index:-1;transition:.5s}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{width:100%;color:#000}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000}"]})};var NY=i=>({"full-width":i});function FY(i,e){if(i&1){let t=Ft();c(0,"div",31)(1,"div",32)(2,"strong"),h(3,"Success!"),u(),h(4," Updated Successfully. "),c(5,"button",33),lt("click",function(){G(t);let r=I();return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function BY(i,e){if(i&1&&(c(0,"option",34),h(1),u()),i&2){let t=e.$implicit;_(),A(t.department_name)}}var ov=class i{constructor(e,t,n,r){this.route=e;this.apiService=t;this.http=n;this.router=r}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}ngOnInit(){this.apifromservice(),this.get_department_api()}get_department_data=[];get_department_api(){this.http.get(this.apiService.manage_department()).subscribe(e=>{this.get_department_data=e},e=>{console.error("Error fetching items",e)})}create_user_api_url="";email_sender_api_url="";apifromservice(){this.create_user_api_url=this.apiService.user_management_api(),this.email_sender_api_url=this.apiService.send_email_api()}user_img_selectedFile=null;onFileSelected(e){let t=e.target;t.files&&(this.user_img_selectedFile=t.files[0])}successmgs=!1;select_designation;select_department;User_first_name="";User_Last_name="";User_ID_Card_no="";User_email_id="";User_password="";User_mobile_no="";User_Designation="";User_Department="";User_Department_id="";User_dob=null;User_is_active=null;create_user(){let e=this.create_user_api_url,t=new FormData;t.append("User_first_name",this.User_first_name),t.append("User_Last_name",this.User_Last_name),t.append("User_ID_Card_no",this.User_ID_Card_no),t.append("User_email_id",this.User_email_id),t.append("User_password",this.User_password),t.append("User_mobile_no",this.User_mobile_no),t.append("User_Department",this.User_Department),t.append("User_Department_id",this.User_Department_id),t.append("User_Designation",this.User_Designation),t.append("User_dob",this.User_dob?.toString()||""),t.append("User_is_active",this.User_is_active?"true":"false"),this.user_img_selectedFile&&t.append("user_profile_img",this.user_img_selectedFile),this.http.post(e,t).subscribe(n=>{console.log(n),this.send_email(),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1},2e3),this.router.navigate(["/view-users"])},n=>{console.log("Post request failed",n)})}send_email(){let e=this.email_sender_api_url,n=`
    <h1>Welcome to AGASTHYA DEVELOPER PRIVATE LIMITED</h1>
    <p>Dear User,</p>
    <p>Here are your account details:</p>
    <ul>
      <li><strong>User Email:</strong> {{username}}</li>
      <li><strong>Password:</strong> {{password}}</li>
    </ul>
    <p>Thank you for using AMS!</p>
  `.replace("{{username}}",this.User_email_id).replace("{{password}}",this.User_password),r={to:this.User_email_id,subject:"AMS Account Details",body:n},s={headers:new We({"Content-Type":"application/json"})};this.http.post(e,r,s).subscribe(a=>{console.log(a)},a=>{console.log("Post request failed",a)})}clancel_btn(){this.router.navigate(["/view-users"])}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(Vn))};static \u0275cmp=Ve({type:i,selectors:[["app-create-users"]],decls:74,vars:15,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],["class","alert-card fade-in",4,"ngIf"],[1,"container","mt-5","mb-3"],[1,"card","mt-5","shadow"],[1,"heading-card"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-6"],["required","","type","text","placeholder","Enter First Name",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","text","placeholder","Enter Last Name",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","text","placeholder","Enter ID No",1,"custom-input",3,"ngModelChange","ngModel"],["required","","placeholder","Mobile Number","type","text",1,"custom-input",3,"ngModelChange","ngModel"],["required","","placeholder","Enter Email ID","type","email",1,"custom-input",3,"ngModelChange","ngModel"],["required","","placeholder","Enter Password","type","password",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","date",1,"custom-input",3,"ngModelChange","ngModel"],[1,"custom-input"],["value","",4,"ngFor","ngForOf"],[1,"col"],["required","","placeholder","Enter Designation","type","text",1,"custom-input",3,"ngModelChange","ngModel"],["name","","id","",1,"custom-input",3,"ngModelChange","ngModel"],["disabled",""],["value","true"],["value","false"],["for",""],[1,"custom-file-upload"],["for","img-upload"],["required","","id","img-upload","type","file",3,"change"],[1,"submit-btn",3,"click"],["type","reset",1,"submit-btn",3,"click"],[1,"alert-card","fade-in"],[1,"alert-content"],[1,"close-btn",3,"click"],["value",""]],template:function(t,n){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",1),c(2,"div",2),rt(3,FY,7,0,"div",3),c(4,"div",4)(5,"div",5)(6,"div",6)(7,"label"),h(8,"Create Users"),u()(),c(9,"div",7)(10,"div",8)(11,"div",9)(12,"label"),h(13,"First Name:"),u(),c(14,"input",10),vt("ngModelChange",function(s){return _t(n.User_first_name,s)||(n.User_first_name=s),s}),u()(),c(15,"div",9)(16,"label"),h(17,"Last Name:"),u(),c(18,"input",11),vt("ngModelChange",function(s){return _t(n.User_Last_name,s)||(n.User_Last_name=s),s}),u()()(),c(19,"div",8)(20,"div",9)(21,"label"),h(22,"ID:"),u(),c(23,"input",12),vt("ngModelChange",function(s){return _t(n.User_ID_Card_no,s)||(n.User_ID_Card_no=s),s}),u()(),c(24,"div",9)(25,"label"),h(26,"Mobile Number:"),u(),c(27,"input",13),vt("ngModelChange",function(s){return _t(n.User_mobile_no,s)||(n.User_mobile_no=s),s}),u()()(),c(28,"div",8)(29,"div",9)(30,"label"),h(31,"Email ID:"),u(),c(32,"input",14),vt("ngModelChange",function(s){return _t(n.User_email_id,s)||(n.User_email_id=s),s}),u()(),c(33,"div",9)(34,"label"),h(35,"Password:"),u(),c(36,"input",15),vt("ngModelChange",function(s){return _t(n.User_password,s)||(n.User_password=s),s}),u()()(),c(37,"div",8)(38,"div",9)(39,"label"),h(40,"DOB:"),u(),c(41,"input",16),vt("ngModelChange",function(s){return _t(n.User_dob,s)||(n.User_dob=s),s}),u()(),c(42,"div",9)(43,"label"),h(44,"Department:"),u(),c(45,"select",17),rt(46,BY,2,1,"option",18),u()()(),c(47,"div",8)(48,"div",19)(49,"label"),h(50,"Designation:"),u(),c(51,"input",20),vt("ngModelChange",function(s){return _t(n.User_Designation,s)||(n.User_Designation=s),s}),u()(),c(52,"div",19)(53,"label"),h(54,"Active User:"),u(),c(55,"select",21),vt("ngModelChange",function(s){return _t(n.User_is_active,s)||(n.User_is_active=s),s}),c(56,"option",22),h(57,"Select"),u(),c(58,"option",23),h(59,"Yes"),u(),c(60,"option",24),h(61,"No"),u()()(),c(62,"div",19)(63,"label",25),h(64,"Profile Image:"),u(),Rt(65,"br"),c(66,"div",26)(67,"label",27),h(68,"Select Image"),u(),c(69,"input",28),lt("change",function(s){return n.onFileSelected(s)}),u()()()(),c(70,"button",29),lt("click",function(){return n.create_user()}),h(71,"Create"),u(),c(72,"button",30),lt("click",function(){return n.clancel_btn()}),h(73,"Cancel"),u()()()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(13,NY,!n.isSidebarOpen)),_(),D("ngIf",n.successmgs),_(11),gt("ngModel",n.User_first_name),_(4),gt("ngModel",n.User_Last_name),_(5),gt("ngModel",n.User_ID_Card_no),_(4),gt("ngModel",n.User_mobile_no),_(5),gt("ngModel",n.User_email_id),_(4),gt("ngModel",n.User_password),_(5),gt("ngModel",n.User_dob),_(5),D("ngForOf",n.get_department_data),_(5),gt("ngModel",n.User_Designation),_(4),gt("ngModel",n.User_is_active))},dependencies:[en,Jn,Sn,Ri,Li,yi,Si,oi,Na,ni,on,ln],styles:[".custom-file-upload[_ngcontent-%COMP%]{position:relative;display:inline-block;margin-top:0%}.custom-file-upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background-color:#347536;color:#fff;padding:10px 20px;border-radius:5px;cursor:pointer;transition:background-color .3s ease;font-size:14px}.custom-file-upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{background-color:#45a049}.custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.file-name[_ngcontent-%COMP%]{margin-left:10px;font-size:14px;font-style:italic;color:#555;display:inline-block;vertical-align:middle;max-width:300px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})};var VY=i=>({"full-width":i}),UY=()=>["/create-users"],zY=(i,e)=>({"active-user":i,"inactive-user":e});function jY(i,e){if(i&1&&(c(0,"tr")(1,"td")(2,"div",10),Rt(3,"img",11),c(4,"div",12)(5,"p",13),h(6),u()()()(),c(7,"td")(8,"p",14),h(9),u()(),c(10,"td")(11,"p",14),h(12),u()(),c(13,"td"),h(14),Et(15,"date"),u(),c(16,"td",15),h(17),u(),c(18,"td"),Rt(19,"i",16),u()()),i&2){let t=e.$implicit;_(3),D("src",t.user_profile_img,jl),_(3),A(t.User_first_name),_(3),A(t.User_Department),_(3),A(t.User_Designation),_(2),de(" ",t.User_dob?At(15,7,t.User_dob,"dd-MM-yyy"):"N/A"," "),_(2),D("ngClass",Oa(10,zY,t.User_is_active,!t.User_is_active)),_(),de(" ",t.User_is_active?"Active":"Inactive"," ")}}var lv=class i{constructor(e,t,n){this.route=e;this.apiService=t;this.http=n}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}ngOnInit(){this.get_user_api()}get_user_data=[];get_user_api(){this.http.get(this.apiService.user_management_api()).subscribe(e=>{this.get_user_data=e},e=>{console.error("Error fetching items",e)})}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En))};static \u0275cmp=Ve({type:i,selectors:[["app-view-users"]],decls:25,vars:7,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"mt-5"],[1,"submit-btn",2,"width","150px",3,"routerLink"],[1,"mt-5","table-responsive"],[1,"table","align-middle","mb-0","bg-white"],[1,"bg-light"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],["alt","",1,"rounded-circle",2,"width","45px","height","45px",3,"src"],[1,"ms-3"],[1,"fw-bold","mb-1"],[1,"fw-normal","mb-1"],[3,"ngClass"],[1,"far","fa-edit"]],template:function(t,n){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),h(6,"Add Users"),u()(),c(7,"div",6)(8,"table",7)(9,"thead",8)(10,"tr")(11,"th"),h(12,"Name"),u(),c(13,"th"),h(14,"Department"),u(),c(15,"th"),h(16,"Designation"),u(),c(17,"th"),h(18,"DOB"),u(),c(19,"th"),h(20,"Status"),u(),c(21,"th"),h(22,"Actions"),u()()(),c(23,"tbody"),rt(24,jY,20,13,"tr",9),u()()()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(4,VY,!n.isSidebarOpen)),_(3),D("routerLink",nd(6,UY)),_(19),D("ngForOf",n.get_user_data))},dependencies:[en,Jn,di,on,ln,Qr],styles:[".active-user[_ngcontent-%COMP%]{color:green;font-weight:700}.inactive-user[_ngcontent-%COMP%]{color:red;font-weight:700}"]})};var HY=i=>({"full-width":i});function WY(i,e){if(i&1){let t=Ft();c(0,"div",21)(1,"div",22)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",23),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function GY(i,e){if(i&1){let t=Ft();c(0,"div",24)(1,"div",22)(2,"strong"),h(3,"Error!"),u(),h(4),c(5,"button",23),lt("click",function(){G(t);let r=I(2);return q(r.error_mgs_card=!1)}),h(6,"\xD7"),u()()()}if(i&2){let t=I(2);_(4),de(" ",t.error_message," ")}}function qY(i,e){if(i&1){let t=Ft();c(0,"li",27),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.selectTask_dbtask(r))}),h(1),u()}if(i&2){let t=e.$implicit;_(),de(" ",t.Marketing_task_name," ")}}function XY(i,e){if(i&1&&(c(0,"div",25)(1,"ul"),rt(2,qY,2,1,"li",26),u()()),i&2){let t=I(2);_(2),D("ngForOf",t.filteredTasks)}}function YY(i,e){if(i&1){let t=Ft();c(0,"div",5),rt(1,WY,7,0,"div",6)(2,GY,7,1,"div",7),c(3,"div",8)(4,"div",9)(5,"label"),h(6,"Add Leads"),u()(),c(7,"div",10)(8,"div",11)(9,"div",12)(10,"label"),h(11,"Name:"),u(),c(12,"input",13),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Db_name_client,r)||(s.Db_name_client=r),q(r)}),u()(),c(13,"div",12)(14,"label"),h(15,"Date:"),u(),c(16,"input",14),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Db_date,r)||(s.Db_date=r),q(r)}),u()()(),c(17,"div",11)(18,"div",12)(19,"div",15)(20,"label"),h(21,"Source:"),u(),c(22,"input",16),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Db_source,r)||(s.Db_source=r),q(r)}),lt("input",function(r){G(t);let s=I();return q(s.onSearch_dbtask(r))}),u(),rt(23,XY,3,1,"div",17),u()(),c(24,"div",12)(25,"label"),h(26,"Location"),u(),c(27,"input",18),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Db_location,r)||(s.Db_location=r),q(r)}),u()()(),c(28,"div",11)(29,"div",12)(30,"label"),h(31,"Contact"),u(),c(32,"input",19),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.Db_contact,r)||(s.Db_contact=r),q(r)}),u()()(),c(33,"button",20),lt("click",function(){G(t);let r=I();return q(r.create_dbtracker())}),h(34,"Create"),u(),c(35,"button",20),lt("click",function(){G(t);let r=I();return q(r.back_btn("DataBase Tracker"))}),h(36,"Back"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(),D("ngIf",t.error_mgs_card),_(10),gt("ngModel",t.Db_name_client),_(4),gt("ngModel",t.Db_date),_(6),gt("ngModel",t.Db_source),_(),D("ngIf",t.Db_source.length>0),_(4),gt("ngModel",t.Db_location),_(5),gt("ngModel",t.Db_contact)}}function $Y(i,e){if(i&1){let t=Ft();c(0,"div",21)(1,"div",22)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",23),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function KY(i,e){if(i&1){let t=Ft();c(0,"div")(1,"label",45),h(2),u(),c(3,"textarea",46),vt("ngModelChange",function(r){let s=G(t).$implicit;return _t(s.value,r)||(s.value=r),q(r)}),u()()}if(i&2){let t=e.$implicit,n=e.index;_(),X0("for","comment_",n,""),_(),de("Customers comment ",n+1,""),_(),gt("ngModel",t.value)}}function ZY(i,e){if(i&1){let t=Ft();c(0,"div",5),rt(1,$Y,7,0,"div",6),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"DataBase Tracker"),u()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Quality:"),u(),c(11,"select",28),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Db_Quality,r)||(s.get_dbtaracker.Db_Quality=r),q(r)}),c(12,"option",29),h(13,"Select Quality"),u(),c(14,"option",30),h(15,"Grade A"),u(),c(16,"option",31),h(17,"Grade B"),u(),c(18,"option",32),h(19,"Grade C"),u(),c(20,"option",33),h(21,"Grade D"),u()()(),c(22,"div",12)(23,"label"),h(24,"Profession:"),u(),c(25,"input",34),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Db_Profession,r)||(s.get_dbtaracker.Db_Profession=r),q(r)}),u()()(),c(26,"div",11)(27,"div",12)(28,"label"),h(29,"Budget(Capability)"),u(),c(30,"input",35),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Db_budget,r)||(s.get_dbtaracker.Db_budget=r),q(r)}),u()(),c(31,"div",12)(32,"label"),h(33,"Contact Status:"),u(),c(34,"select",28),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Db_status,r)||(s.get_dbtaracker.Db_status=r),q(r)}),c(35,"option",29),h(36,"Select Status"),u(),c(37,"option",36),h(38,"Connected"),u(),c(39,"option",37),h(40,"Not Connected"),u()()()(),c(41,"div",11)(42,"div",12)(43,"label"),h(44,"Expected Site Visit Date:"),u(),c(45,"input",38),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Sales_site_visit_execpted_date,r)||(s.get_dbtaracker.Sales_site_visit_execpted_date=r),q(r)}),u()(),c(46,"div",12)(47,"label"),h(48,"Assign to:"),u(),c(49,"input",39),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Db_assign_to,r)||(s.get_dbtaracker.Db_assign_to=r),q(r)}),u()()(),c(50,"div",11)(51,"div")(52,"label",40),h(53,"Remarks"),u(),c(54,"textarea",41),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Db_comments,r)||(s.get_dbtaracker.Db_comments=r),q(r)}),u()(),rt(55,KY,4,4,"div",42),u(),c(56,"button",20),lt("click",function(){G(t);let r=I();return q(r.click_db_tracker(r.module_name_1))}),h(57,"Update"),u(),c(58,"button",43),lt("click",function(){G(t);let r=I();return q(r.addTextArea())}),Rt(59,"i",44),h(60,"Add More"),u(),c(61,"button",20),lt("click",function(){G(t);let r=I();return q(r.removeTextArea())}),h(62,"Remove"),u(),c(63,"button",20),lt("click",function(){G(t);let r=I();return q(r.back_btn("DataBase Tracker"))}),h(64,"Back"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.get_dbtaracker.Db_Quality),_(14),gt("ngModel",t.get_dbtaracker.Db_Profession),_(5),gt("ngModel",t.get_dbtaracker.Db_budget),_(4),gt("ngModel",t.get_dbtaracker.Db_status),_(11),gt("ngModel",t.get_dbtaracker.Sales_site_visit_execpted_date),_(4),gt("ngModel",t.get_dbtaracker.Db_assign_to),_(5),gt("ngModel",t.get_dbtaracker.Db_comments),_(),D("ngForOf",t.textAreas)}}function JY(i,e){if(i&1){let t=Ft();c(0,"div",21)(1,"div",22)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",23),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function QY(i,e){if(i&1){let t=Ft();c(0,"div")(1,"label"),h(2,"Site Visited Date:"),u(),c(3,"input",47),vt("ngModelChange",function(r){G(t);let s=I(3);return _t(s.get_dbtaracker.Sales_site_visit_date,r)||(s.get_dbtaracker.Sales_site_visit_date=r),q(r)}),u()()}if(i&2){let t=I(3);_(3),gt("ngModel",t.get_dbtaracker.Sales_site_visit_date)}}function t$(i,e){if(i&1&&(c(0,"div",12),rt(1,QY,4,1,"div",54),u()),i&2){let t=I(2);_(),D("ngIf",t.get_dbtaracker.Sales_stage1==="Site Visit Completed")}}function e$(i,e){if(i&1){let t=Ft();c(0,"div",12)(1,"label"),h(2,"Site No:"),u(),c(3,"button",55),lt("click",function(){G(t);let r=I(2);return q(r.openPopup())}),h(4,"Select site"),u()()}}function n$(i,e){if(i&1){let t=Ft();c(0,"div",60),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.selectSite(r))}),h(1),u()}if(i&2){let t=e.$implicit;ar("selected",t.selected),_(),de(" ",t.site_no," ")}}function i$(i,e){if(i&1){let t=Ft();c(0,"div",56)(1,"div",57)(2,"span",23),lt("click",function(){G(t);let r=I(2);return q(r.closePopup())}),h(3,"\xD7"),u(),c(4,"div",58),rt(5,n$,2,3,"div",59),u()()()}if(i&2){let t=I(2);_(5),D("ngForOf",t.site_details)}}function r$(i,e){if(i&1){let t=Ft();c(0,"div",12)(1,"label",40),h(2,"Expected Token Date"),u(),c(3,"input",47),vt("ngModelChange",function(r){G(t);let s=I(3);return _t(s.get_dbtaracker.Sales_token_execpted_date,r)||(s.get_dbtaracker.Sales_token_execpted_date=r),q(r)}),u()()}if(i&2){let t=I(3);_(3),gt("ngModel",t.get_dbtaracker.Sales_token_execpted_date)}}function s$(i,e){if(i&1){let t=Ft();c(0,"div",11)(1,"div",12)(2,"label"),h(3,"Site visit attend by:"),u(),c(4,"input",61),vt("ngModelChange",function(r){G(t);let s=I(2);return _t(s.get_dbtaracker.Sales_site_visit_attend_by,r)||(s.get_dbtaracker.Sales_site_visit_attend_by=r),q(r)}),u()(),rt(5,r$,4,1,"div",50),u()}if(i&2){let t=I(2);_(4),gt("ngModel",t.get_dbtaracker.Sales_site_visit_attend_by),_(),D("ngIf",t.get_dbtaracker.Sales_stage1==="Site Visit Completed")}}function a$(i,e){if(i&1){let t=Ft();c(0,"div")(1,"label",45),h(2),u(),c(3,"textarea",46),vt("ngModelChange",function(r){let s=G(t).$implicit;return _t(s.value,r)||(s.value=r),q(r)}),u()()}if(i&2){let t=e.$implicit,n=e.index;_(),X0("for","comment_",n,""),_(),de("Customers comment ",n+1,""),_(),gt("ngModel",t.value)}}function o$(i,e){if(i&1){let t=Ft();c(0,"div",5),rt(1,JY,7,0,"div",6),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Sales Tracker"),u()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label",40),h(10,"Expected Site Visit Date"),u(),c(11,"input",47),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Sales_site_visit_execpted_date,r)||(s.get_dbtaracker.Sales_site_visit_execpted_date=r),q(r)}),u()(),c(12,"div",12)(13,"label"),h(14,"Site Visit Status:"),u(),c(15,"select",41),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Sales_stage1,r)||(s.get_dbtaracker.Sales_stage1=r),q(r)}),c(16,"option",29),h(17,"Selcet Site Visit Status"),u(),c(18,"option",48),h(19,"Site Visit Completed"),u(),c(20,"option",49),h(21,"Site Not Visit Completed"),u()()()(),c(22,"div",11),rt(23,t$,2,1,"div",50)(24,e$,5,0,"div",50)(25,i$,6,1,"div",51),u(),rt(26,s$,6,2,"div",52),c(27,"div")(28,"label"),h(29,"Remark"),u(),c(30,"textarea",53),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Sales_remarks,r)||(s.get_dbtaracker.Sales_remarks=r),q(r)}),u()(),rt(31,a$,4,4,"div",42),c(32,"button",20),lt("click",function(){G(t);let r=I();return q(r.click_sales(r.module_name_2))}),h(33,"Update"),u(),c(34,"button",43),lt("click",function(){G(t);let r=I();return q(r.addTextArea())}),Rt(35,"i",44),h(36,"Add More"),u(),c(37,"button",20),lt("click",function(){G(t);let r=I();return q(r.removeTextArea())}),h(38,"Remove"),u(),c(39,"button",20),lt("click",function(){G(t);let r=I();return q(r.back_btn("Sales Tracker"))}),h(40,"Back"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.get_dbtaracker.Sales_site_visit_execpted_date),_(4),gt("ngModel",t.get_dbtaracker.Sales_stage1),_(8),D("ngIf",t.get_dbtaracker.Sales_stage1==="Site Visit Completed"||t.get_dbtaracker.Sales_stage2==="Token Received"),_(),D("ngIf",t.get_dbtaracker.Sales_stage1==="Site Visit Completed"),_(),D("ngIf",t.isPopupVisible),_(),D("ngIf",t.get_dbtaracker.Sales_stage1==="Site Visit Completed"),_(4),gt("ngModel",t.get_dbtaracker.Sales_remarks),_(),D("ngForOf",t.textAreas)}}function l$(i,e){if(i&1){let t=Ft();c(0,"div",21)(1,"div",22)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",23),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function c$(i,e){if(i&1){let t=Ft();c(0,"div",12)(1,"label",40),h(2,"Expected Registration Date"),u(),c(3,"input",47),vt("ngModelChange",function(r){G(t);let s=I(2);return _t(s.get_dbtaracker.Customer_registration_expected_date,r)||(s.get_dbtaracker.Customer_registration_expected_date=r),q(r)}),u()()}if(i&2){let t=I(2);_(3),gt("ngModel",t.get_dbtaracker.Customer_registration_expected_date)}}function d$(i,e){if(i&1){let t=Ft();c(0,"div")(1,"label",45),h(2),u(),c(3,"textarea",46),vt("ngModelChange",function(r){let s=G(t).$implicit;return _t(s.value,r)||(s.value=r),q(r)}),u()()}if(i&2){let t=e.$implicit,n=e.index;_(),X0("for","comment_",n,""),_(),de("Customers comment ",n+1,""),_(),gt("ngModel",t.value)}}function u$(i,e){if(i&1){let t=Ft();c(0,"div",5),rt(1,l$,7,0,"div",6),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Customer Tracker"),u()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label",40),h(10,"Expected Agreement Date"),u(),c(11,"input",47),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Customer_agreement_expected_date,r)||(s.get_dbtaracker.Customer_agreement_expected_date=r),q(r)}),u()(),rt(12,c$,4,1,"div",50),u(),c(13,"label"),h(14,"Remark:"),u(),c(15,"textarea",41),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Customer_comments,r)||(s.get_dbtaracker.Customer_comments=r),q(r)}),u(),rt(16,d$,4,4,"div",42),c(17,"button",20),lt("click",function(){G(t);let r=I();return q(r.create_customer(r.module_name_3))}),h(18,"Update"),u(),c(19,"button",43),lt("click",function(){G(t);let r=I();return q(r.addTextArea())}),Rt(20,"i",44),h(21,"Add More"),u(),c(22,"button",20),lt("click",function(){G(t);let r=I();return q(r.removeTextArea())}),h(23,"Remove"),u(),c(24,"button",20),lt("click",function(){G(t);let r=I();return q(r.back_btn("Customer Tracker"))}),h(25,"Back"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.get_dbtaracker.Customer_agreement_expected_date),_(),D("ngIf",t.get_dbtaracker.Customer_stage1==="Agreement Completed"),_(3),gt("ngModel",t.get_dbtaracker.Customer_comments),_(),D("ngForOf",t.textAreas)}}function h$(i,e){if(i&1){let t=Ft();c(0,"div",21)(1,"div",22)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",23),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function p$(i,e){if(i&1){let t=Ft();c(0,"div",5),rt(1,h$,7,0,"div",6),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Add Site"),u()(),c(6,"div",10)(7,"div",62)(8,"div",12)(9,"label",40),h(10,"Site No:"),u(),c(11,"input",63),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.site_no,r)||(s.site_no=r),q(r)}),u()(),c(12,"div",12)(13,"label",40),h(14,"Project:"),u(),c(15,"select",41),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.site_project,r)||(s.site_project=r),q(r)}),c(16,"option",64),h(17,"Select Project"),u(),c(18,"option",65),h(19,"Anbu Avenue"),u(),c(20,"option",66),h(21,"Rvs Avenue"),u()()()(),c(22,"button",20),lt("click",function(){G(t);let r=I();return q(r.create_site_details())}),h(23,"Update"),u(),c(24,"button",67),h(25,"Back"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.site_no),_(4),gt("ngModel",t.site_project)}}function f$(i,e){if(i&1){let t=Ft();c(0,"div",21)(1,"div",22)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",23),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function m$(i,e){if(i&1){let t=Ft();c(0,"div",5),rt(1,f$,7,0,"div",6),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Financial Goal"),u()(),c(6,"div",10)(7,"div",62)(8,"div",12)(9,"label",40),h(10,"Goal Amount"),u(),c(11,"input",68),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.goal_amount,r)||(s.goal_amount=r),q(r)}),u()(),c(12,"div",12)(13,"label",40),h(14,"Actual Amount"),u(),c(15,"input",69),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.actual_amount,r)||(s.actual_amount=r),q(r)}),u()(),c(16,"div",12)(17,"label",40),h(18,"Difference"),u(),c(19,"input",70),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.diffrent_amount,r)||(s.diffrent_amount=r),q(r)}),u()()(),c(20,"div")(21,"label",40),h(22,"Remark"),u(),c(23,"textarea",41),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.financial_remarks,r)||(s.financial_remarks=r),q(r)}),u()(),c(24,"button",20),lt("click",function(){G(t);let r=I();return q(r.create_financial_report())}),h(25,"Update"),u(),c(26,"button",20),lt("click",function(){G(t);let r=I();return q(r.back_btn("Manage Report"))}),h(27,"Back"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.goal_amount),_(4),gt("ngModel",t.actual_amount),_(4),gt("ngModel",t.diffrent_amount),_(4),gt("ngModel",t.financial_remarks)}}function g$(i,e){if(i&1){let t=Ft();c(0,"div",21)(1,"div",22)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",23),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function _$(i,e){if(i&1){let t=Ft();c(0,"div",5),rt(1,g$,7,0,"div",6),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"New Booking"),u()(),c(6,"div",10)(7,"div",62)(8,"div",12)(9,"label",40),h(10,"New Booking Goal"),u(),c(11,"input",68),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.new_booking_goal,r)||(s.new_booking_goal=r),q(r)}),u()(),c(12,"div",12)(13,"label",40),h(14,"New Booking Actual"),u(),c(15,"input",69),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.new_booking_actual,r)||(s.new_booking_actual=r),q(r)}),u()(),c(16,"div",12)(17,"label",40),h(18,"New Booking Difference"),u(),c(19,"input",70),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.new_booking_diffrence,r)||(s.new_booking_diffrence=r),q(r)}),u()()(),c(20,"div")(21,"label",40),h(22,"Remark"),u(),c(23,"textarea",41),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.new_booking_remarks,r)||(s.new_booking_remarks=r),q(r)}),u()(),c(24,"button",20),lt("click",function(){G(t);let r=I();return q(r.create_new_booking())}),h(25,"Update"),u(),c(26,"button",20),lt("click",function(){G(t);let r=I();return q(r.back_btn("Manage Report"))}),h(27,"Back"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.new_booking_goal),_(4),gt("ngModel",t.new_booking_actual),_(4),gt("ngModel",t.new_booking_diffrence),_(4),gt("ngModel",t.new_booking_remarks)}}function v$(i,e){if(i&1){let t=Ft();c(0,"div",21)(1,"div",22)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",23),lt("click",function(){G(t);let r=I(2);return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function x$(i,e){if(i&1){let t=Ft();c(0,"div",5),rt(1,v$,7,0,"div",6),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"New Booking"),u()(),c(6,"div",10)(7,"div",62)(8,"div",12)(9,"label",40),h(10,"Agreement Goal"),u(),c(11,"input",71),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.agreement_goal,r)||(s.agreement_goal=r),q(r)}),u()(),c(12,"div",12)(13,"label",40),h(14,"Agreement Actual"),u(),c(15,"input",72),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.agreement_actual,r)||(s.agreement_actual=r),q(r)}),u()(),c(16,"div",12)(17,"label",40),h(18,"Agreement Difference"),u(),c(19,"input",73),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.agreement_diffrence,r)||(s.agreement_diffrence=r),q(r)}),u()()(),c(20,"div",62)(21,"div",12)(22,"label",40),h(23,"Registration Goal"),u(),c(24,"input",74),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.registration_goal,r)||(s.registration_goal=r),q(r)}),u()(),c(25,"div",12)(26,"label",40),h(27,"Registration Actual"),u(),c(28,"input",75),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.registration_actual,r)||(s.registration_actual=r),q(r)}),u()(),c(29,"div",12)(30,"label",40),h(31,"Registration Difference"),u(),c(32,"input",76),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.registration_diffrence,r)||(s.registration_diffrence=r),q(r)}),u()()(),c(33,"div")(34,"label",40),h(35,"Remark"),u(),c(36,"textarea",41),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.functional_remark,r)||(s.functional_remark=r),q(r)}),u()(),c(37,"button",20),lt("click",function(){G(t);let r=I();return q(r.create_functional_status())}),h(38,"Update"),u(),h(39,"& "),c(40,"button",20),lt("click",function(){G(t);let r=I();return q(r.back_btn("Manage Report"))}),h(41,"Back"),u()()()()}if(i&2){let t=I();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.agreement_goal),_(4),gt("ngModel",t.agreement_actual),_(4),gt("ngModel",t.agreement_diffrence),_(5),gt("ngModel",t.registration_goal),_(4),gt("ngModel",t.registration_actual),_(4),gt("ngModel",t.registration_diffrence),_(4),gt("ngModel",t.functional_remark)}}var cv=class i{constructor(e,t,n,r,s){this.route=e;this.apiService=t;this.http=n;this.router=r;this.userService=s}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}current_task=null;updatetask=null;project_id=null;sales_id=null;ngOnInit(){this.get_data(),this.route.params.subscribe(e=>{this.current_task=e.salescardname,this.sales_id=e.sales_id,this.project_id=e.sales_id}),this.apifromservice(),setTimeout(()=>{this.get_dbtaracker_data_api(),this.get_task(),this.get_site_details()},100)}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}sales_dbtracker_url="";customer_tracker_url="";sales_telecallers_comments_url="";marketing_manage_task="";site_details_url="";sales_report_url="";apifromservice(){this.sales_dbtracker_url=this.apiService.sales_dbtracker_api(),this.sales_telecallers_comments_url=this.apiService.sales_telecallers_comments_api(),this.marketing_manage_task=this.apiService.marketing_manage_task_api(),this.site_details_url=this.apiService.site_details_api(),this.sales_report_url=this.apiService.sales_report_api()}filter_task_names;filteredTasks=[];query="";get_task(){this.http.get(this.marketing_manage_task).subscribe(e=>{this.filter_task_names=e}),console.log(this.filter_task_names,"task name")}onSearch_dbtask(e){this.Db_source=e.target.value.toLowerCase(),this.filteredTasks=this.filter_task_names.filter(t=>t.Marketing_task_name.toLowerCase().includes(this.Db_source)),this.Db_source.length===0&&(this.filteredTasks=[])}selectTask_dbtask(e){this.Db_source=e.Marketing_task_name,this.task_id=e.Marketing_Task_id,this.filteredTasks=[]}Db_date=null;Db_source="";task_id=null;Db_name_client="";Db_location="";Db_contact="";error_message="";error_mgs_card=!1;create_dbtracker(){debugger;let e=this.sales_dbtracker_url,t={Db_date:this.Db_date,Db_source:this.Db_source,task_id:this.task_id,Db_name_client:this.Db_name_client,Db_location:this.Db_location,Db_contact:this.Db_contact,project_id:this.project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Database Tracker"),this.router.navigate(["/view-sales-details",this.project_id])},1e3)},r=>{r.error.Db_contact=="sales_database_tracker with this Db contact already exists."&&(this.error_message="Contact Already exist",setTimeout(()=>{this.error_mgs_card=!0},100)),console.log("Post request error",r)})}get_dbtaracker;get_dbtaracker_data_api(){this.http.get(this.sales_dbtracker_url+this.sales_id).subscribe(e=>{this.get_dbtaracker=e},e=>{console.error("Error fetching items",e)})}successmgs=!1;create_database_tracker(){let e=this.sales_dbtracker_url+this.sales_id,t={Db_Quality:this.get_dbtaracker.Db_Quality,Db_Profession:this.get_dbtaracker.Db_Profession,Db_budget:this.get_dbtaracker.Db_budget,Db_status:this.get_dbtaracker.Db_status,Sales_site_visit_execpted_date:this.get_dbtaracker.Sales_site_visit_execpted_date,Db_comments:this.get_dbtaracker.Db_comments,Db_assign_to:this.get_dbtaracker.Db_assign_to,project_id:this.get_dbtaracker.project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.put(e,t,n).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Database Tracker"),this.router.navigate(["/view-sales-details",this.get_dbtaracker.project_id])},1e3)},r=>{console.log("Post request failed",r)})}textAreas=[{value:""}];rows=[];addTextArea(){this.textAreas.push({value:""})}removeTextArea(){this.textAreas.length>1&&this.textAreas.pop()}click_db_tracker(e){this.createRows(e),this.create_database_tracker()}tele_comments=[];createRows(e){this.tele_comments=this.textAreas.map(t=>t.value),this.create_db_telecallers_comment(e),this.textAreas=[{value:""}]}current_datetime="";module_name_1="Databe tracker";module_name_2="Sales tracker";module_name_3="Customer tracker";create_db_telecallers_comment(e){this.current_datetime=new Date().toISOString();let t={headers:new We({"Content-Type":"application/json"})};this.tele_comments.forEach((n,r)=>{if(n.trim()){let s={Db_tracker_id:this.sales_id,tele_date:this.current_datetime,module_name:e,tele_comments:n};this.http.post(this.sales_telecallers_comments_url,s,t).subscribe(a=>{console.log(`Comment ${r+1} saved successfully`,a),r===this.tele_comments.length-1&&(this.successmgs=!0,setTimeout(()=>{this.successmgs=!1},1e3))},a=>{console.log(`Post request for comment ${r+1} failed`,a)})}else console.log(`Skipping empty comment at index ${r}`)})}click_sales(e){this.createRows(e),this.create_sales_tracker()}site_details=[];selected_site;available_site=[];get_site_details(){this.http.get(this.site_details_url).subscribe(e=>{this.available_site=e.filter(t=>t.is_site_booked===!1),this.site_details=this.available_site.map(t=>In(Se({},t),{selected:!1}))},e=>{console.error("Error fetching items",e)})}selectSite(e){this.selected_site&&(this.selected_site.selected=!1),e.selected=!0,this.selected_site=e}create_sales_tracker(){let e=this.sales_dbtracker_url+this.sales_id,t={Sales_stage1:this.get_dbtaracker.Sales_stage1,Sales_remarks:this.get_dbtaracker.Sales_remarks,Sales_assigned:this.get_dbtaracker.Sales_assigned,Sales_site_visit_date:this.get_dbtaracker.Sales_site_visit_date,Sales_site_no:this.selected_site.site_no,Customer_agreement_expected_date:this.get_dbtaracker.Customer_agreement_expected_date,Sales_site_visit_execpted_date:this.get_dbtaracker.Sales_site_visit_execpted_date,Sales_token_execpted_date:this.get_dbtaracker.Sales_token_execpted_date,Sales_site_visit_attend_by:this.get_dbtaracker.Sales_site_visit_attend_by},n={headers:new We({"Content-Type":"application/json"})};this.http.put(e,t,n).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Sales Tracker"),this.router.navigate(["/view-sales-details",this.get_dbtaracker.project_id])},1e3)},r=>{console.log("Post request failed",r)})}create_customer(e){this.create_customer_tracker(),this.createRows(e)}create_customer_tracker(){let e=this.sales_dbtracker_url+this.sales_id,t={Customer_agreement_expected_date:this.get_dbtaracker.Customer_agreement_expected_date,Customer_registration_expected_date:this.get_dbtaracker.Customer_registration_expected_date,Customer_comments:this.get_dbtaracker.Customer_comments,Customer_assigned:this.get_dbtaracker.Customer_assigned},n={headers:new We({"Content-Type":"application/json"})};this.http.put(e,t,n).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Customer Tracker"),this.router.navigate(["/view-sales-details",this.get_dbtaracker.project_id])},1e3)},r=>{console.log("Post request failed",r)})}back_btn(e){this.apiService.set_redirect_card(e),this.router.navigate(["/view-sales-details",this.get_dbtaracker.project_id])}site_no="";site_project=null;create_site_details(){let e=this.site_details_url,t={site_no:this.site_no,Project_id:this.site_project},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Site Details"),this.router.navigate(["/view-sales-details",this.site_project])},1e3)},r=>{console.log("Post request failed",r)})}isPopupVisible=!1;openPopup(){this.isPopupVisible=!0}closePopup(){this.isPopupVisible=!1}goal_amount="";actual_amount="";diffrent_amount="";financial_remarks="";create_financial_report(){let e=this.sales_report_url,t={goal_amount:this.goal_amount,actual_amount:this.actual_amount,diffrent_amount:this.diffrent_amount,financial_remarks:this.financial_remarks,project_id:this.project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Manage Report"),this.router.navigate(["/view-sales-details",this.get_dbtaracker.project_id])},1e3)},r=>{console.log("Post request failed",r)})}new_booking_goal=null;new_booking_actual=null;new_booking_diffrence=null;new_booking_remarks="";create_new_booking(){let e=this.sales_report_url,t={new_booking_goal:this.new_booking_goal,new_booking_actual:this.new_booking_actual,new_booking_diffrence:this.new_booking_diffrence,new_booking_remarks:this.new_booking_remarks,project_id:this.project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Manage Report"),this.router.navigate(["/view-sales-details",this.get_dbtaracker.project_id])},1e3)},r=>{console.log("Post request failed",r)})}agreement_goal=null;agreement_actual=null;agreement_diffrence=null;registration_goal=null;registration_actual=null;registration_diffrence=null;functional_remark="";create_functional_status(){let e=this.sales_report_url,t={agreement_goal:this.agreement_goal,agreement_actual:this.agreement_actual,agreement_diffrence:this.agreement_diffrence,registration_goal:this.registration_goal,registration_actual:this.registration_actual,registration_diffrence:this.registration_diffrence,functional_remark:this.functional_remark,project_id:this.project_id},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Manage Report"),this.router.navigate(["/view-sales-details",this.get_dbtaracker.project_id])},1e3)},r=>{console.log("Post request failed",r)})}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(Vn),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-add-details"]],decls:12,vars:12,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mob-res"],["class","container card-margin",4,"ngIf"],[1,"container","card-margin"],["class","alert-card fade-in",4,"ngIf"],["class","alert-card-error fade-in",4,"ngIf"],[1,"card","shadow"],[1,"heading-card"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-6"],["type","text","placeholder","Enter Name",1,"custom-input",3,"ngModelChange","ngModel"],["type","date","name","sDate",1,"custom-input",3,"ngModelChange","ngModel"],[1,"search-container"],["type","text","placeholder","Search Source...",1,"custom-input",3,"ngModelChange","input","ngModel"],["class","task-list",4,"ngIf"],["placeholder","Enter Location","type","text","name","Location",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter Contact",1,"custom-input",3,"ngModelChange","ngModel"],[1,"submit-btn",3,"click"],[1,"alert-card","fade-in"],[1,"alert-content"],[1,"close-btn",3,"click"],[1,"alert-card-error","fade-in"],[1,"task-list"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"custom-input",3,"ngModelChange","ngModel"],["disabled",""],["value","Grade A"],["value","Grade B"],["value","Grade C"],["value","Grade D"],["type","text","placeholder","Enter Profession","name","startDate",1,"custom-input",3,"ngModelChange","ngModel"],["placeholder","Enter Budget","type","text",1,"custom-input",3,"ngModelChange","ngModel"],["value","Connected"],["value","Not Connected"],["type","date","placeholder","Enter Quality",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Assign to",1,"custom-input",3,"ngModelChange","ngModel"],["for",""],["name","","id","",1,"custom-input",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],[1,"submit-btn",2,"width","150px",3,"click"],[1,"fa","fa-plus"],[3,"for"],["placeholder","Enter Customers comment",1,"custom-input",3,"ngModelChange","ngModel"],["type","date",1,"custom-input",3,"ngModelChange","ngModel"],["value","Site Visit Completed"],["value","Site Not Visit Completed"],["class","col-md-6",4,"ngIf"],["class","popup-container",4,"ngIf"],["class","row mb-3",4,"ngIf"],["placeholder","Enter Remarks","name","","id","",1,"custom-input",3,"ngModelChange","ngModel"],[4,"ngIf"],[1,"custom-input",3,"click"],[1,"popup-container"],[1,"popup-card"],[1,"site-container"],["class","site-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"site-item",3,"click"],["type","text","placeholder","Site visit attend by",1,"custom-input",3,"ngModelChange","ngModel"],[1,"row","mb-2"],["type","text","placeholder","Enter Site Number",1,"custom-input",3,"ngModelChange","ngModel"],["value",""],["value","1"],["value","2"],[1,"submit-btn"],["type","text","placeholder","Enter Goal Amount",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter Actual Amount",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter Difference Amount",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Agreement Goal",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Agreement Actual",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Agreement Difference",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Registration Goal",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Registration Actual",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Registration Difference",1,"custom-input",3,"ngModelChange","ngModel"]],template:function(t,n){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3),rt(4,YY,37,8,"div",4)(5,ZY,65,9,"div",4)(6,o$,41,9,"div",4)(7,u$,26,5,"div",4)(8,p$,26,3,"div",4)(9,m$,28,5,"div",4)(10,_$,28,5,"div",4)(11,x$,42,8,"div",4),u()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(10,HY,!n.isSidebarOpen)),_(2),D("ngIf",n.current_task==="Add DataBase Tracker"),_(),D("ngIf",n.current_task==="DataBase Tracker"),_(),D("ngIf",n.current_task==="Sales Tracker"),_(),D("ngIf",n.current_task==="Customer Tracker"),_(),D("ngIf",n.current_task==="Site Details"),_(),D("ngIf",n.current_task==="Financial Goal"),_(),D("ngIf",n.current_task==="New Booking"),_(),D("ngIf",n.current_task==="Functional Status"))},dependencies:[en,Jn,Sn,Ri,Li,yi,Ho,Si,oi,ni,on,ln],styles:[".card-margin[_ngcontent-%COMP%]{margin-top:3%}.custom-input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:5px;font-size:16px;transition:border-color .3s ease}.custom-input[_ngcontent-%COMP%]:focus{border-color:#5e1080;outline:none;box-shadow:0 0 5px #5d1285ad}.custom-label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px;display:block}label[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif}.heading-card[_ngcontent-%COMP%]{background-color:#639;color:#fff;border-top-right-radius:5px;border-top-left-radius:5px;padding:3%;text-align:center;font-size:20px}.mob-res[_ngcontent-%COMP%]{margin-top:5%}@media screen and (max-width: 768px){.mob-res[_ngcontent-%COMP%]{margin-top:20%}}.content-below[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border:1px solid #ddd;border-radius:4px}.textarea-container[_ngcontent-%COMP%]{margin-bottom:20px}.hidden-placeholder[_ngcontent-%COMP%]{visibility:hidden;height:0}.search-container[_ngcontent-%COMP%]{margin-bottom:20px}.task-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;margin-top:10px;background-color:#fff;box-shadow:0 2px 5px #0000001a;position:fixed}.task-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.task-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px;cursor:pointer;transition:background-color .3s}.task-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.site-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(50px,1fr));gap:15px;margin:20px 0}.site-item[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;align-items:center;justify-content:center;border:2px solid #ccc;border-radius:8px;font-size:16px;font-weight:700;background-color:#f9f9f9;cursor:pointer;transition:all .3s ease-in-out}.site-item[_ngcontent-%COMP%]:hover{border-color:#4caf50;background-color:#e8f5e9}.site-item.selected[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:2px solid #388e3c}.popup-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.popup-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;width:400px;padding:20px;box-shadow:0 5px 15px #0000004d;text-align:center;animation:_ngcontent-%COMP%_popupFadeIn .3s ease;position:relative}.close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;font-size:24px;font-weight:700;color:#333;cursor:pointer;transition:color .3s ease}.close-btn[_ngcontent-%COMP%]:hover{color:red}@keyframes _ngcontent-%COMP%_popupFadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}"]})};var b$=i=>({"full-width":i}),y$=i=>({"active-module":i}),S$=i=>["/Add-sales-details","Add DataBase Tracker",i],w$=i=>["/Add-sales-details","DataBase Tracker",i],C$=(i,e)=>({"green-text":i,"red-text":e}),NP=i=>["/Add-sales-details","Sales Tracker",i],RC=i=>["/Add-sales-details","Customer Tracker",i],uv=(i,e,t,n)=>({"today-row":i,"past-row":e,"empty-date-row":t,"upcoming-row":n}),M$=i=>["/Add-sales-details","Site Details",i],E$=i=>["/Add-sales-details","Financial Goal",i],A$=i=>["/Add-sales-details","New Booking",i],T$=i=>["/Add-sales-details","Functional Status",i];function k$(i,e){if(i&1){let t=Ft();c(0,"div",18)(1,"div",19)(2,"strong"),h(3,"Success!"),u(),h(4),c(5,"button",20),lt("click",function(){G(t);let r=I();return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}if(i&2){let t=I();_(4),de(" ",t.set_sucess_message," ")}}function I$(i,e){if(i&1&&(c(0,"option",21),h(1),u()),i&2){let t=e.$implicit;D("value",t),_(),A(t)}}function D$(i,e){if(i&1){let t=Ft();c(0,"li",22),lt("click",function(){let r=G(t).$implicit,s=I();return q(s.selectModule(r))}),h(1),u()}if(i&2){let t=e.$implicit,n=I();D("ngClass",te(2,y$,t===n.selectedModule)),_(),de(" ",t," ")}}function P$(i,e){if(i&1){let t=Ft();c(0,"div",23)(1,"p"),h(2),u(),c(3,"button",24),lt("click",function(){G(t);let r=I();return q(r.closeComments())}),h(4,"Close"),u()()}if(i&2){let t=I();_(2),A(t.currentComment)}}function R$(i,e){if(i&1){let t=Ft();c(0,"div",44)(1,"label"),h(2,"Remarks"),u(),c(3,"textarea",45),vt("ngModelChange",function(r){G(t);let s=I(3);return _t(s.db_tracker_data.Db_comments,r)||(s.db_tracker_data.Db_comments=r),q(r)}),u()()}if(i&2){let t=I(3);_(3),gt("ngModel",t.db_tracker_data.Db_comments)}}function L$(i,e){if(i&1&&(c(0,"tr",47)(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function O$(i,e){if(i&1&&(pe(0),rt(1,L$,6,5,"tr",46),fe()),i&2){let t=I(3);_(),D("ngForOf",t.get_db_telecaller_data)}}function N$(i,e){i&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),u()())}function F$(i,e){if(i&1){let t=Ft();c(0,"div",35)(1,"div",36)(2,"span",20),lt("click",function(){G(t);let r=I(2);return q(r.closePopup())}),h(3,"\xD7"),u(),rt(4,R$,4,1,"div",37),c(5,"div",38)(6,"table",39)(7,"thead")(8,"tr")(9,"th"),h(10,"Name"),u(),c(11,"th"),h(12,"Quality"),u(),c(13,"th"),h(14,"Profession"),u(),c(15,"th"),h(16,"Budgets (Capacity)"),u(),c(17,"th"),h(18,"Status"),u(),c(19,"th"),h(20,"Expecting For Site Visit"),u(),c(21,"th"),h(22,"Remark"),u()()(),c(23,"tbody")(24,"tr")(25,"td"),h(26),u(),c(27,"td"),h(28),u(),c(29,"td"),h(30),u(),c(31,"td"),h(32),u(),c(33,"td"),h(34),u(),c(35,"td"),h(36),u(),c(37,"td")(38,"i",40),lt("click",function(){G(t);let r=I(2);return q(r.remarks_card())}),u()()()()()(),c(39,"div",41)(40,"table",39)(41,"thead")(42,"tr")(43,"th"),h(44,"Date"),u(),c(45,"th"),h(46,"Customer comments"),u()()(),c(47,"tbody"),rt(48,O$,2,1,"ng-container",34)(49,N$,3,0,"ng-template",null,0,De),u()()(),c(51,"button",42),h(52,"Update"),u(),c(53,"button",43),lt("click",function(){G(t);let r=I(2);return q(r.create_sales_tracker(r.db_tracker_data.Db_tracker_id))}),h(54,"Submit for sales tracker"),u()()()}if(i&2){let t=an(50),n=I(2);_(4),D("ngIf",n.customers_cmt_card),_(22),A(n.db_tracker_data.Db_name_client),_(2),A(n.db_tracker_data.Db_Quality),_(2),A(n.db_tracker_data.Db_Profession),_(2),A(n.db_tracker_data.Db_budget),_(2),A(n.db_tracker_data.Db_status),_(2),A(n.db_tracker_data.Sales_site_visit_execpted_date),_(12),D("ngIf",n.get_db_telecaller_data.length>0)("ngIfElse",t),_(3),D("routerLink",te(10,w$,n.db_tracker_data.Db_tracker_id))}}function B$(i,e){if(i&1){let t=Ft();c(0,"tr",47)(1,"td"),h(2),u(),c(3,"td",49),h(4),u(),Rt(5,"td",49),c(6,"td",49),h(7),u(),c(8,"td"),h(9),u(),c(10,"td"),h(11),Et(12,"date"),u(),c(13,"td",50),h(14),u(),c(15,"td",51),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_details_update(r))}),Rt(16,"i",52),u()()}if(i&2){let t=e.$implicit,n=e.index,r=I(3);_(2),A(n+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_dbtracker),ai),_(),de(" ",t.Db_name_client,""),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_dbtracker),ai),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_dbtracker),ai),_(),de(" ",t.Db_location,""),_(2),A(t.Db_source),_(2),A(At(12,10,t.Db_date,"dd MMM yy")),_(2),D("ngClass",Oa(13,C$,t.Db_status==="Connected",t.Db_status!=="Connected"||t.Db_status===null)),_(),de(" ",t.Db_status||"Not Connected"," ")}}function V$(i,e){if(i&1&&(pe(0),rt(1,B$,17,16,"tr",46),fe()),i&2){let t=I(2);_(),D("ngForOf",t.filteredDbTrackerData)}}function U$(i,e){i&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),u()())}function z$(i,e){if(i&1){let t=Ft();c(0,"div",25),rt(1,F$,55,12,"div",26),c(2,"div")(3,"button",27),h(4,"Update Leads"),u(),Rt(5,"br")(6,"br"),c(7,"input",28),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.contactSearchTerm_dbtracker,r)||(s.contactSearchTerm_dbtracker=r),q(r)}),u()(),c(8,"div",29)(9,"table",30)(10,"thead",31)(11,"tr")(12,"th",32),h(13,"DataBase Tracker"),u()(),c(14,"tr")(15,"th",33),h(16,"S.No"),u(),c(17,"th",33),h(18,"Name"),u(),c(19,"th",33),h(20,"Contact"),u(),c(21,"th",33),h(22,"Location"),u(),c(23,"th",33),h(24,"Source"),u(),c(25,"th",33),h(26,"Date"),u(),c(27,"th",33),h(28,"Status"),u(),c(29,"th",33),h(30,"View"),u()()(),c(31,"tbody"),rt(32,V$,2,1,"ng-container",34)(33,U$,3,0,"ng-template",null,0,De),u()()()()}if(i&2){let t=an(34),n=I();_(),D("ngIf",n.isCardVisible),_(2),D("routerLink",te(5,S$,n.project_id)),_(4),gt("ngModel",n.contactSearchTerm_dbtracker),_(25),D("ngIf",n.filteredDbTrackerData&&n.filteredDbTrackerData.length>0)("ngIfElse",t)}}function j$(i,e){if(i&1){let t=Ft();c(0,"div",44)(1,"label"),h(2,"Remarks"),u(),c(3,"textarea",45),vt("ngModelChange",function(r){G(t);let s=I(3);return _t(s.db_tracker_data.Sales_remarks,r)||(s.db_tracker_data.Sales_remarks=r),q(r)}),u()()}if(i&2){let t=I(3);_(3),gt("ngModel",t.db_tracker_data.Sales_remarks)}}function H$(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function W$(i,e){if(i&1&&(pe(0),rt(1,H$,6,5,"tr",55),fe()),i&2){let t=I(3);_(),D("ngForOf",t.get_db_telecaller_data)}}function G$(i,e){i&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),u()())}function q$(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function X$(i,e){if(i&1&&(pe(0),rt(1,q$,6,5,"tr",55),fe()),i&2){let t=I(3);_(),D("ngForOf",t.get_sl_telecaller_data)}}function Y$(i,e){i&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),u()())}function $$(i,e){if(i&1){let t=Ft();c(0,"div",35)(1,"div",36)(2,"span",20),lt("click",function(){G(t);let r=I(2);return q(r.closePopup())}),h(3,"\xD7"),u(),rt(4,j$,4,1,"div",37),c(5,"h6"),h(6,"Custome Details"),u(),c(7,"div",38)(8,"table",39)(9,"thead")(10,"tr")(11,"th"),h(12,"Name"),u(),c(13,"th"),h(14,"Source"),u(),c(15,"th"),h(16,"Leads Updated Date"),u(),c(17,"th"),h(18,"Budgets (Capacity)"),u(),c(19,"th"),h(20,"Profession"),u(),c(21,"th"),h(22,"Remarks"),u()()(),c(23,"tbody")(24,"tr")(25,"td"),h(26),u(),c(27,"td"),h(28),u(),c(29,"td"),h(30),Et(31,"date"),u(),c(32,"td"),h(33),u(),c(34,"td"),h(35),u(),c(36,"td")(37,"i",40),lt("click",function(){G(t);let r=I(2);return q(r.remarks_card())}),u()()()()()(),c(38,"h6"),h(39,"Sales Details"),u(),c(40,"div",38)(41,"table",39)(42,"thead")(43,"tr")(44,"th"),h(45,"Quality"),u(),c(46,"th"),h(47,"Expected Site Visited Date"),u(),c(48,"th"),h(49,"Actual Site Visited Date"),u(),c(50,"th"),h(51,"Expecting For Token"),u(),c(52,"th"),h(53,"Actual Token Received Date"),u(),c(54,"th"),h(55,"Assigned To"),u()()(),c(56,"tbody")(57,"tr")(58,"td"),h(59),u(),c(60,"td"),h(61),Et(62,"date"),u(),c(63,"td"),h(64),Et(65,"date"),u(),c(66,"td"),h(67),Et(68,"date"),u(),c(69,"td"),h(70),Et(71,"date"),u(),c(72,"td"),h(73),u()()()()(),c(74,"div",53)(75,"table",39)(76,"thead")(77,"tr")(78,"th",54),h(79,"Database Tracker"),u()()(),c(80,"thead")(81,"tr")(82,"th"),h(83,"Date"),u(),c(84,"th"),h(85,"Customer comments"),u()()(),c(86,"tbody"),rt(87,W$,2,1,"ng-container",34)(88,G$,3,0,"ng-template",null,0,De),u()(),c(90,"table",39)(91,"thead")(92,"tr")(93,"th",54),h(94,"Sales Tracker"),u()()(),c(95,"thead")(96,"tr")(97,"th"),h(98,"Date"),u(),c(99,"th"),h(100,"Customer comments"),u()()(),c(101,"tbody"),rt(102,X$,2,1,"ng-container",34)(103,Y$,3,0,"ng-template",null,0,De),u()()(),c(105,"button",42),h(106,"Update"),u(),c(107,"button",43),lt("click",function(){G(t);let r=I(2);return q(r.move_to_db(r.db_tracker_data.Db_tracker_id))}),h(108,"Move to Database Tracker"),u()()()}if(i&2){let t=an(89),n=I(2);_(4),D("ngIf",n.customers_cmt_card),_(22),A(n.db_tracker_data.Db_name_client),_(2),A(n.db_tracker_data.Db_source),_(2),A(At(31,17,n.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(n.db_tracker_data.Db_budget),_(2),A(n.db_tracker_data.Db_Profession),_(24),A(n.db_tracker_data.Db_Quality),_(2),de("",At(62,20,n.db_tracker_data.Sales_site_visit_execpted_date,"dd-MMM-yy")," "),_(3),A(At(65,23,n.db_tracker_data.Sales_site_visit_date,"dd MMM yy")),_(3),A(At(68,26,n.db_tracker_data.Sales_token_execpted_date,"dd-MMM-yy")),_(3),A(At(71,29,n.db_tracker_data.Sales_token_recived_date,"dd MMM yy")),_(3),A(n.db_tracker_data.Db_assign_to),_(14),D("ngIf",n.get_db_telecaller_data.length>0)("ngIfElse",t),_(15),D("ngIf",n.get_sl_telecaller_data.length>0)("ngIfElse",t),_(3),D("routerLink",te(32,NP,n.db_tracker_data.Db_tracker_id))}}function K$(i,e){if(i&1){let t=Ft();c(0,"tr",47)(1,"td"),h(2),u(),c(3,"td",49),h(4),u(),Rt(5,"td",49),c(6,"td",49),h(7),u(),c(8,"td"),h(9),u(),c(10,"td",56),Et(11,"date"),h(12),u(),c(13,"td",56),Et(14,"date"),h(15),u(),c(16,"td",51),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_details_update(r))}),Rt(17,"i",52),u()()}if(i&2){let t=e.$implicit,n=e.index,r=I(3);_(2),A(n+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_salestracker_u),ai),_(),de(" ",t.Db_name_client,""),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_salestracker_u),ai),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_salestracker_u),ai),_(),de(" ",t.Db_location,""),_(2),A(t.Sales_site_no),_(),D("title",At(11,11,t.Sales_site_visit_date,"dd-MMM-yy")),_(2),de(" ",t.Sales_stage1||"Site Visit Not Completed",""),_(),D("title",At(14,14,t.Sales_token_recived_date,"dd-MMM-yy")),_(2),de(" ",t.Sales_stage2||"Token Not Received","")}}function Z$(i,e){if(i&1&&(pe(0),rt(1,K$,18,17,"tr",46),fe()),i&2){let t=I(2);_(),D("ngForOf",t.filteredsalestracker_u)}}function J$(i,e){i&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),u()())}function Q$(i,e){if(i&1){let t=Ft();c(0,"div",25),rt(1,$$,109,34,"div",26),c(2,"div")(3,"input",28),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.contactSearchTerm_salestracker_u,r)||(s.contactSearchTerm_salestracker_u=r),q(r)}),u()(),c(4,"div",29)(5,"table",30)(6,"thead",31)(7,"tr")(8,"th",32),h(9,"Sales Tracker"),u()(),c(10,"tr")(11,"th",33),h(12,"S.No"),u(),c(13,"th",33),h(14,"Name"),u(),c(15,"th",33),h(16,"Contact"),u(),c(17,"th",33),h(18,"Location"),u(),c(19,"th",33),h(20,"Site No"),u(),c(21,"th",33),h(22,"Site vist Status"),u(),c(23,"th",33),h(24,"Token Status"),u(),c(25,"th",33),h(26,"View"),u()()(),c(27,"tbody"),rt(28,Z$,2,1,"ng-container",34)(29,J$,3,0,"ng-template",null,0,De),u()()()()}if(i&2){let t=an(30),n=I();_(),D("ngIf",n.isCardVisible),_(2),gt("ngModel",n.contactSearchTerm_salestracker_u),_(25),D("ngIf",n.filteredsalestracker_u&&n.filteredsalestracker_u.length>0)("ngIfElse",t)}}function tK(i,e){if(i&1){let t=Ft();c(0,"div",58)(1,"label"),h(2,"Remark:"),u(),c(3,"textarea",45),vt("ngModelChange",function(r){G(t);let s=I(3);return _t(s.db_tracker_data.Customer_comments,r)||(s.db_tracker_data.Customer_comments=r),q(r)}),u()()}if(i&2){let t=I(3);_(3),gt("ngModel",t.db_tracker_data.Customer_comments)}}function eK(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function nK(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function iK(i,e){if(i&1&&(pe(0),rt(1,nK,6,5,"tr",55),fe()),i&2){let t=I(3);_(),D("ngForOf",t.get_sl_telecaller_data)}}function rK(i,e){i&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),u()())}function sK(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function aK(i,e){if(i&1&&(pe(0),rt(1,sK,6,5,"tr",55),fe()),i&2){let t=I(3);_(),D("ngForOf",t.get_cl_telecaller_data)}}function oK(i,e){i&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),u()())}function lK(i,e){if(i&1){let t=Ft();c(0,"div",35)(1,"div",36)(2,"span",20),lt("click",function(){G(t);let r=I(2);return q(r.closePopup())}),h(3,"\xD7"),u(),rt(4,tK,4,1,"div",57),c(5,"h6"),h(6,"Custome Details"),u(),c(7,"div",38)(8,"table",39)(9,"thead")(10,"tr")(11,"th"),h(12,"Name"),u(),c(13,"th"),h(14,"Source"),u(),c(15,"th"),h(16,"Leads Updated Date"),u(),c(17,"th"),h(18,"Budgets (Capacity)"),u(),c(19,"th"),h(20,"Profession"),u(),c(21,"th"),h(22,"Remarks"),u()()(),c(23,"tbody")(24,"tr")(25,"td"),h(26),u(),c(27,"td"),h(28),u(),c(29,"td"),h(30),Et(31,"date"),u(),c(32,"td"),h(33),u(),c(34,"td"),h(35),u(),c(36,"td")(37,"i",40),lt("click",function(){G(t);let r=I(2);return q(r.remarks_card())}),u()()()()()(),c(38,"h6"),h(39,"Customer Tracker"),u(),c(40,"div",38)(41,"table",39)(42,"thead")(43,"tr")(44,"th"),h(45,"Quality"),u(),c(46,"th"),h(47,"Expecting For Agreement"),u(),c(48,"th"),h(49,"Actual Agreement Date"),u(),c(50,"th"),h(51,"Expecting For Agreement"),u(),c(52,"th"),h(53,"Actual Registered Date"),u(),c(54,"th"),h(55,"Assigned To"),u()()(),c(56,"tbody")(57,"tr")(58,"td"),h(59),u(),c(60,"td"),h(61),Et(62,"date"),u(),c(63,"td"),h(64),Et(65,"date"),u(),c(66,"td"),h(67),Et(68,"date"),u(),c(69,"td"),h(70),Et(71,"date"),u(),c(72,"td"),h(73),u()()()()(),c(74,"div",53)(75,"table",39)(76,"thead")(77,"tr")(78,"th",54),h(79,"Database Tracker"),u()()(),c(80,"thead")(81,"tr")(82,"th"),h(83,"Date"),u(),c(84,"th"),h(85,"Customer comments"),u()()(),c(86,"tbody"),rt(87,eK,6,5,"tr",55),u()(),c(88,"table",39)(89,"thead")(90,"tr")(91,"th",54),h(92,"Sales Tracker"),u()()(),c(93,"thead")(94,"tr")(95,"th"),h(96,"Date"),u(),c(97,"th"),h(98,"Customer comments"),u()()(),c(99,"tbody"),rt(100,iK,2,1,"ng-container",34)(101,rK,3,0,"ng-template",null,0,De),u()(),c(103,"table",39)(104,"thead")(105,"tr")(106,"th",54),h(107,"Customer Tracker"),u()()(),c(108,"thead")(109,"tr")(110,"th"),h(111,"Date"),u(),c(112,"th"),h(113,"Customer comments"),u()()(),c(114,"tbody"),rt(115,aK,2,1,"ng-container",34)(116,oK,3,0,"ng-template",null,0,De),u()()(),c(118,"button",42),h(119,"Update"),u(),c(120,"button",43),lt("click",function(){G(t);let r=I(2);return q(r.move_to_db(r.db_tracker_data.Db_tracker_id))}),h(121,"Move to Database Tracker"),u()()()}if(i&2){let t=an(102),n=I(2);_(4),D("ngIf",n.customers_cmt_card),_(22),A(n.db_tracker_data.Db_name_client),_(2),A(n.db_tracker_data.Db_source),_(2),A(At(31,18,n.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(n.db_tracker_data.Db_budget),_(2),A(n.db_tracker_data.Db_Profession),_(24),A(n.db_tracker_data.Db_Quality),_(2),de("",At(62,21,n.db_tracker_data.Customer_agreement_expected_date,"dd MMM yy")," "),_(3),A(At(65,24,n.db_tracker_data.Customer_agreement_date,"dd MMM yy")),_(3),de("",At(68,27,n.db_tracker_data.Customer_registration_expected_date,"dd MMM yy")," "),_(3),A(At(71,30,n.db_tracker_data.Customer_registration_date,"dd MMM yy")),_(3),A(n.db_tracker_data.Db_assign_to),_(14),D("ngForOf",n.get_db_telecaller_data),_(13),D("ngIf",n.get_sl_telecaller_data.length>0)("ngIfElse",t),_(15),D("ngIf",n.get_cl_telecaller_data.length>0)("ngIfElse",t),_(3),D("routerLink",te(33,RC,n.db_tracker_data.Db_tracker_id))}}function cK(i,e){if(i&1){let t=Ft();c(0,"tr",47)(1,"td"),h(2),u(),c(3,"td",49),h(4),u(),Rt(5,"td",49),c(6,"td",49),h(7),u(),c(8,"td"),h(9),u(),c(10,"td",56),Et(11,"date"),h(12),u(),c(13,"td",56),Et(14,"date"),h(15),u(),c(16,"td",51),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_details_update(r))}),Rt(17,"i",52),u()()}if(i&2){let t=e.$implicit,n=e.index,r=I(3);_(2),A(n+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_customertracker),ai),_(),de(" ",t.Db_name_client,""),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_customertracker),ai),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_customertracker),ai),_(),de(" ",t.Db_location,""),_(2),A(t.Sales_site_no),_(),D("title",At(11,11,t.Customer_aggrement_date,"dd-MMM-yy")),_(2),de(" ",t.Customer_stage1||"Agreement Not Completed",""),_(),D("title",At(14,14,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Customer_stage2||"Registration Not Completed","")}}function dK(i,e){if(i&1&&(pe(0),rt(1,cK,18,17,"tr",46),fe()),i&2){let t=I(2);_(),D("ngForOf",t.filteredcustomertracker)}}function uK(i,e){i&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),u()())}function hK(i,e){if(i&1){let t=Ft();c(0,"div",25),rt(1,lK,122,35,"div",26),c(2,"div")(3,"input",28),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.contactSearchTerm_customertracker,r)||(s.contactSearchTerm_customertracker=r),q(r)}),u()(),c(4,"div",29)(5,"table",30)(6,"thead",31)(7,"tr")(8,"th",32),h(9,"Customer Tracker"),u()(),c(10,"tr")(11,"th",33),h(12,"S.No"),u(),c(13,"th",33),h(14,"Name"),u(),c(15,"th",33),h(16,"Contact"),u(),c(17,"th",33),h(18,"Location"),u(),c(19,"th",33),h(20,"Site No"),u(),c(21,"th",33),h(22,"Agreement Status"),u(),c(23,"th",33),h(24,"Registration Status"),u(),c(25,"th",33),h(26,"View"),u()()(),c(27,"tbody"),rt(28,dK,2,1,"ng-container",34)(29,uK,3,0,"ng-template",null,0,De),u()()()()}if(i&2){let t=an(30),n=I();_(),D("ngIf",n.isCardVisible),_(2),gt("ngModel",n.contactSearchTerm_customertracker),_(25),D("ngIf",n.filteredcustomertracker&&n.filteredcustomertracker.length>0)("ngIfElse",t)}}function pK(i,e){if(i&1){let t=Ft();c(0,"div",58)(1,"label"),h(2,"Remark:"),u(),c(3,"textarea",45),vt("ngModelChange",function(r){G(t);let s=I(3);return _t(s.db_tracker_data.Customer_comments,r)||(s.db_tracker_data.Customer_comments=r),q(r)}),u()()}if(i&2){let t=I(3);_(3),gt("ngModel",t.db_tracker_data.Customer_comments)}}function fK(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function mK(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function gK(i,e){if(i&1&&(pe(0),rt(1,mK,6,5,"tr",55),fe()),i&2){let t=I(3);_(),D("ngForOf",t.get_sl_telecaller_data)}}function _K(i,e){i&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),u()())}function vK(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function xK(i,e){if(i&1&&(pe(0),rt(1,vK,6,5,"tr",55),fe()),i&2){let t=I(3);_(),D("ngForOf",t.get_cl_telecaller_data)}}function bK(i,e){i&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),u()())}function yK(i,e){if(i&1){let t=Ft();c(0,"div",35)(1,"div",36)(2,"span",20),lt("click",function(){G(t);let r=I(2);return q(r.closePopup())}),h(3,"\xD7"),u(),c(4,"div",59),rt(5,pK,4,1,"div",57),c(6,"h6"),h(7,"Custome Details"),u(),c(8,"div",38)(9,"table",39)(10,"thead")(11,"tr")(12,"th"),h(13,"Name"),u(),c(14,"th"),h(15,"Source"),u(),c(16,"th"),h(17,"Leads Updated Date"),u(),c(18,"th"),h(19,"Budgets (Capacity)"),u(),c(20,"th"),h(21,"Profession"),u()()(),c(22,"tbody")(23,"tr")(24,"td"),h(25),u(),c(26,"td"),h(27),u(),c(28,"td"),h(29),Et(30,"date"),u(),c(31,"td"),h(32),u(),c(33,"td"),h(34),u()()()()(),c(35,"h6"),h(36,"Sales Tracker"),u(),c(37,"div",38)(38,"table",39)(39,"thead")(40,"tr")(41,"th"),h(42,"Site Vist Status"),u(),c(43,"th"),h(44,"Actual Site Visted Date"),u(),c(45,"th"),h(46,"Token Status"),u(),c(47,"th"),h(48,"Actual Token Received Date"),u()()(),c(49,"tbody")(50,"tr")(51,"td"),h(52),u(),c(53,"td"),h(54),Et(55,"date"),u(),c(56,"td"),h(57),u(),c(58,"td"),h(59),Et(60,"date"),u()()()()(),c(61,"h6"),h(62,"Customer Tracker"),u(),c(63,"div",38)(64,"table",39)(65,"thead")(66,"tr")(67,"th"),h(68,"Agreement Status"),u(),c(69,"th"),h(70,"Actual Agreement Date"),u(),c(71,"th"),h(72,"Registered Status"),u(),c(73,"th"),h(74,"Actual Registered Date"),u()()(),c(75,"tbody")(76,"tr")(77,"td"),h(78),u(),c(79,"td"),h(80),Et(81,"date"),u(),c(82,"td"),h(83),u(),c(84,"td"),h(85),Et(86,"date"),u()()()()()(),c(87,"div",53)(88,"table",39)(89,"thead")(90,"tr")(91,"th",54),h(92,"Database Tracker"),u()()(),c(93,"thead")(94,"tr")(95,"th"),h(96,"Date"),u(),c(97,"th"),h(98,"Customer comments"),u()()(),c(99,"tbody"),rt(100,fK,6,5,"tr",55),u()(),c(101,"table",39)(102,"thead")(103,"tr")(104,"th",54),h(105,"Sales Tracker"),u()()(),c(106,"thead")(107,"tr")(108,"th"),h(109,"Date"),u(),c(110,"th"),h(111,"Customer comments"),u()()(),c(112,"tbody"),rt(113,gK,2,1,"ng-container",34)(114,_K,3,0,"ng-template",null,0,De),u()(),c(116,"table",39)(117,"thead")(118,"tr")(119,"th",54),h(120,"Customer Tracker"),u()()(),c(121,"thead")(122,"tr")(123,"th"),h(124,"Date"),u(),c(125,"th"),h(126,"Customer comments"),u()()(),c(127,"tbody"),rt(128,xK,2,1,"ng-container",34)(129,bK,3,0,"ng-template",null,0,De),u()()(),c(131,"button",42),h(132,"Update"),u(),c(133,"button",43),lt("click",function(){G(t);let r=I(2);return q(r.move_to_db(r.db_tracker_data.Db_tracker_id))}),h(134,"Move to Database Tracker"),u()()()}if(i&2){let t=an(115),n=I(2);_(5),D("ngIf",n.customers_cmt_card),_(20),A(n.db_tracker_data.Db_name_client),_(2),A(n.db_tracker_data.Db_source),_(2),A(At(30,20,n.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(n.db_tracker_data.Db_budget),_(2),A(n.db_tracker_data.Db_Profession),_(18),A(n.db_tracker_data.Sales_stage1),_(2),A(At(55,23,n.db_tracker_data.Sales_site_visit_date,"dd MMM yy")),_(3),A(n.db_tracker_data.Sales_stage2),_(2),A(At(60,26,n.db_tracker_data.Sales_token_recived_date,"dd MMM yy")),_(19),A(n.db_tracker_data.Customer_stage1),_(2),A(At(81,29,n.db_tracker_data.Customer_agreement_date,"dd MMM yy")),_(3),A(n.db_tracker_data.Customer_stage2),_(2),A(At(86,32,n.db_tracker_data.Customer_registration_date,"dd MMM yy")),_(15),D("ngForOf",n.get_db_telecaller_data),_(13),D("ngIf",n.get_sl_telecaller_data.length>0)("ngIfElse",t),_(15),D("ngIf",n.get_cl_telecaller_data.length>0)("ngIfElse",t),_(3),D("routerLink",te(35,RC,n.db_tracker_data.Db_tracker_id))}}function SK(i,e){if(i&1){let t=Ft();c(0,"tr",47)(1,"td"),h(2),u(),c(3,"td",49),h(4),u(),Rt(5,"td",49),c(6,"td",49),h(7),u(),c(8,"td"),h(9),u(),c(10,"td",51),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_details_update(r))}),Rt(11,"i",52),u()()}if(i&2){let t=e.$implicit,n=e.index,r=I(3);_(2),A(n+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_customerdb),ai),_(),de(" ",t.Db_name_client,""),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_customerdb),ai),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_customerdb),ai),_(),de(" ",t.Db_location,""),_(2),A(t.Sales_site_no)}}function wK(i,e){if(i&1&&(pe(0),rt(1,SK,12,7,"tr",46),fe()),i&2){let t=I(2);_(),D("ngForOf",t.filteredcustomerdb)}}function CK(i,e){i&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),u()())}function MK(i,e){if(i&1){let t=Ft();c(0,"div",25),rt(1,yK,135,37,"div",26),c(2,"div")(3,"input",28),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.contactSearchTerm_customerdb,r)||(s.contactSearchTerm_customerdb=r),q(r)}),u()(),c(4,"div",29)(5,"table",30)(6,"thead",31)(7,"tr")(8,"th",32),h(9,"Customer Database"),u()(),c(10,"tr")(11,"th",33),h(12,"S.No"),u(),c(13,"th",33),h(14,"Name"),u(),c(15,"th",33),h(16,"Contact"),u(),c(17,"th",33),h(18,"Location"),u(),c(19,"th",33),h(20,"Site No"),u(),c(21,"th",33),h(22,"View"),u()()(),c(23,"tbody"),rt(24,wK,2,1,"ng-container",34)(25,CK,3,0,"ng-template",null,0,De),u()()()()}if(i&2){let t=an(26),n=I();_(),D("ngIf",n.isCardVisible),_(2),gt("ngModel",n.contactSearchTerm_customerdb),_(21),D("ngIf",n.filteredcustomerdb&&n.filteredcustomerdb.length>0)("ngIfElse",t)}}function EK(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function AK(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function TK(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function kK(i,e){if(i&1&&(c(0,"div",58)(1,"table",39)(2,"thead")(3,"tr")(4,"th",54),h(5,"Database Tracker"),u()()(),c(6,"thead")(7,"tr")(8,"th"),h(9,"Date"),u(),c(10,"th"),h(11,"Customer comments"),u()()(),c(12,"tbody"),rt(13,EK,6,5,"tr",55),u()(),c(14,"table",39)(15,"thead")(16,"tr")(17,"th",54),h(18,"Sales Tracker"),u()()(),c(19,"thead")(20,"tr")(21,"th"),h(22,"Date"),u(),c(23,"th"),h(24,"Customer comments"),u()()(),c(25,"tbody"),rt(26,AK,6,5,"tr",55),u()(),c(27,"table",39)(28,"thead")(29,"tr")(30,"th",54),h(31,"Customer Tracker"),u()()(),c(32,"thead")(33,"tr")(34,"th"),h(35,"Date"),u(),c(36,"th"),h(37,"Customer comments"),u()()(),c(38,"tbody"),rt(39,TK,6,5,"tr",55),u()()()),i&2){let t=I(3);_(13),D("ngForOf",t.get_db_telecaller_data),_(13),D("ngForOf",t.get_sl_telecaller_data),_(13),D("ngForOf",t.get_cl_telecaller_data)}}function IK(i,e){if(i&1){let t=Ft();c(0,"div",61),rt(1,kK,40,3,"div",57),c(2,"h6"),h(3,"Custome Details"),u(),c(4,"div",38)(5,"table",39)(6,"thead")(7,"tr")(8,"th"),h(9,"Name"),u(),c(10,"th"),h(11,"Source"),u(),c(12,"th"),h(13,"Leads Updated Date"),u(),c(14,"th"),h(15,"Budgets (Capacity)"),u(),c(16,"th"),h(17,"Profession"),u(),c(18,"th"),h(19,"Customer Comment"),u()()(),c(20,"tbody")(21,"tr")(22,"td"),h(23),u(),c(24,"td"),h(25),u(),c(26,"td"),h(27),Et(28,"date"),u(),c(29,"td"),h(30),u(),c(31,"td"),h(32),u(),c(33,"td")(34,"i",40),lt("click",function(){G(t);let r=I(2);return q(r.get_telecaller_api())}),u()()()()()(),c(35,"h6"),h(36,"Customer Tracker"),u(),c(37,"div",38)(38,"table",39)(39,"thead")(40,"tr")(41,"th"),h(42,"Quality"),u(),c(43,"th"),h(44,"Expecting For Agreement"),u(),c(45,"th"),h(46,"Actual Agreement Date"),u(),c(47,"th"),h(48,"Expecting For Agreement"),u(),c(49,"th"),h(50,"Actual Registered Date"),u(),c(51,"th"),h(52,"Assigned To"),u()()(),c(53,"tbody")(54,"tr")(55,"td"),h(56),u(),c(57,"td"),h(58),Et(59,"date"),u(),c(60,"td"),h(61),Et(62,"date"),u(),c(63,"td"),h(64),Et(65,"date"),u(),c(66,"td"),h(67),Et(68,"date"),u(),c(69,"td"),h(70),u()()()()(),c(71,"label"),h(72,"Remark:"),u(),c(73,"textarea",45),vt("ngModelChange",function(r){G(t);let s=I(2);return _t(s.db_tracker_data.Customer_comments,r)||(s.db_tracker_data.Customer_comments=r),q(r)}),u(),c(74,"button",42),h(75,"Update"),u(),c(76,"button",43),lt("click",function(){G(t);let r=I(2);return q(r.move_to_db(r.db_tracker_data.Db_tracker_id))}),h(77,"Move to Database Tracker"),u()()}if(i&2){let t=I(2);_(),D("ngIf",t.customers_cmt_card),_(22),A(t.db_tracker_data.Db_name_client),_(2),A(t.db_tracker_data.Db_source),_(2),A(At(28,14,t.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_budget),_(2),A(t.db_tracker_data.Db_Profession),_(24),A(t.db_tracker_data.Db_Quality),_(2),A(At(59,17,t.db_tracker_data.Customer_agreement_expected_date,"dd MMM yy")),_(3),A(At(62,20,t.db_tracker_data.Customer_agreement_date,"dd MMM yy")),_(3),A(At(65,23,t.db_tracker_data.Customer_registration_expected_date,"dd MMM yy")),_(3),A(At(68,26,t.db_tracker_data.Customer_registration_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_assign_to),_(3),gt("ngModel",t.db_tracker_data.Customer_comments),_(),D("routerLink",te(29,RC,t.db_tracker_data.Db_tracker_id))}}function DK(i,e){if(i&1){let t=Ft();c(0,"tr",50)(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td"),h(10),Et(11,"date"),u(),c(12,"td",56),Et(13,"date"),h(14),u(),c(15,"td",51),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_telle_customer(r))}),Rt(16,"i",52),u()()}if(i&2){let t=e.$implicit,n=e.index,r=I(3);D("ngClass",ao(14,uv,r.isToday(t.Customer_registration_expected_date),r.isPast(t.Customer_registration_expected_date),r.isEmptyDate(t.Customer_registration_expected_date),r.isUpcoming(t.Customer_registration_expected_date))),_(2),A(n+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),de(" ",t.Customer_registration_expected_date?At(11,8,t.Customer_registration_expected_date,"dd MMM yy"):"Date Not Fixed"," "),_(2),D("title",At(13,11,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Customer_stage2||"Registration Not Completed"," ")}}function PK(i,e){if(i&1&&(pe(0),rt(1,DK,17,19,"tr",62),fe()),i&2){let t=I(2);_(),D("ngForOf",t.telecallers_registration)}}function RK(i,e){i&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),u()())}function LK(i,e){if(i&1){let t=Ft();c(0,"tr",50)(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td"),h(10),Et(11,"date"),u(),c(12,"td",56),Et(13,"date"),h(14),u(),c(15,"td",51),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_telle_customer(r))}),Rt(16,"i",52),u()()}if(i&2){let t=e.$implicit,n=e.index,r=I(3);D("ngClass",ao(14,uv,r.isToday(t.Customer_agreement_expected_date),r.isPast(t.Customer_agreement_expected_date),r.isEmptyDate(t.Customer_agreement_expected_date),r.isUpcoming(t.Customer_agreement_expected_date))),_(2),A(n+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),de(" ",t.Customer_agreement_expected_date?At(11,8,t.Customer_agreement_expected_date,"dd MMM yy"):"Date Not Fixed"," "),_(2),D("title",At(13,11,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Customer_stage1||"Agreement Not Completed"," ")}}function OK(i,e){if(i&1&&(pe(0),rt(1,LK,17,19,"tr",62),fe()),i&2){let t=I(2);_(),D("ngForOf",t.telecallers_agreement)}}function NK(i,e){i&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),u()())}function FK(i,e){if(i&1){let t=Ft();c(0,"tr",50)(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td"),h(10),Et(11,"date"),u(),c(12,"td",56),Et(13,"date"),h(14),u(),c(15,"td",51),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_telle_update(r))}),Rt(16,"i",52),u()()}if(i&2){let t=e.$implicit,n=e.index,r=I(3);D("ngClass",ao(14,uv,r.isToday(t.Sales_token_execpted_date),r.isPast(t.Sales_token_execpted_date),r.isEmptyDate(t.Sales_token_execpted_date),r.isUpcoming(t.Sales_token_execpted_date))),_(2),A(n+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),de(" ",t.Sales_token_execpted_date?At(11,8,t.Sales_token_execpted_date,"dd MMM yy"):"Date Not Fixed"," "),_(2),D("title",At(13,11,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Sales_stage2||"Token Not Completed"," ")}}function BK(i,e){if(i&1&&(pe(0),rt(1,FK,17,19,"tr",62),fe()),i&2){let t=I(2);_(),D("ngForOf",t.telecallers_token)}}function VK(i,e){i&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),u()())}function UK(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function zK(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),u(),c(4,"td"),h(5),u()()),i&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function jK(i,e){if(i&1&&(c(0,"div",44)(1,"table",39)(2,"thead")(3,"tr")(4,"th",54),h(5,"Database Tracker"),u()()(),c(6,"thead")(7,"tr")(8,"th"),h(9,"Date"),u(),c(10,"th"),h(11,"Customer comments"),u()()(),c(12,"tbody"),rt(13,UK,6,5,"tr",55),u()(),c(14,"table",39)(15,"thead")(16,"tr")(17,"th",54),h(18,"Sales Tracker"),u()()(),c(19,"thead")(20,"tr")(21,"th"),h(22,"Date"),u(),c(23,"th"),h(24,"Customer comments"),u()()(),c(25,"tbody"),rt(26,zK,6,5,"tr",55),u()()()),i&2){let t=I(3);_(13),D("ngForOf",t.get_db_telecaller_data),_(13),D("ngForOf",t.get_sl_telecaller_data)}}function HK(i,e){if(i&1){let t=Ft();c(0,"div",61),rt(1,jK,27,2,"div",37),c(2,"h6"),h(3,"Custome Details"),u(),c(4,"div",38)(5,"table",39)(6,"thead")(7,"tr")(8,"th"),h(9,"Name"),u(),c(10,"th"),h(11,"Source"),u(),c(12,"th"),h(13,"Leads Updated Date"),u(),c(14,"th"),h(15,"Budgets (Capacity)"),u(),c(16,"th"),h(17,"Profession"),u(),c(18,"th"),h(19,"Customer Comment"),u()()(),c(20,"tbody")(21,"tr")(22,"td"),h(23),u(),c(24,"td"),h(25),u(),c(26,"td"),h(27),Et(28,"date"),u(),c(29,"td"),h(30),u(),c(31,"td"),h(32),u(),c(33,"td")(34,"i",40),lt("click",function(){G(t);let r=I(2);return q(r.get_telecaller_api())}),u()()()()()(),c(35,"h6"),h(36,"Sales Details"),u(),c(37,"div",38)(38,"table",39)(39,"thead")(40,"tr")(41,"th"),h(42,"Quality"),u(),c(43,"th"),h(44,"Expected Site Visited Date"),u(),c(45,"th"),h(46,"Actual Site Visited Date"),u(),c(47,"th"),h(48,"Expecting For Token"),u(),c(49,"th"),h(50,"Actual Token Received Date"),u(),c(51,"th"),h(52,"Assigned To"),u()()(),c(53,"tbody")(54,"tr")(55,"td"),h(56),u(),c(57,"td"),h(58),Et(59,"date"),u(),c(60,"td"),h(61),Et(62,"date"),u(),c(63,"td"),h(64),Et(65,"date"),u(),c(66,"td"),h(67),Et(68,"date"),u(),c(69,"td"),h(70),u()()()()(),c(71,"label"),h(72,"Remark:"),u(),c(73,"textarea",45),vt("ngModelChange",function(r){G(t);let s=I(2);return _t(s.db_tracker_data.Sales_remarks,r)||(s.db_tracker_data.Sales_remarks=r),q(r)}),u(),c(74,"button",42),h(75,"Update"),u(),c(76,"button",43),lt("click",function(){G(t);let r=I(2);return q(r.move_to_db(r.db_tracker_data.Db_tracker_id))}),h(77,"Move to Database Tracker"),u()()}if(i&2){let t=I(2);_(),D("ngIf",t.customers_cmt_card),_(22),A(t.db_tracker_data.Db_name_client),_(2),A(t.db_tracker_data.Db_source),_(2),A(At(28,14,t.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_budget),_(2),A(t.db_tracker_data.Db_Profession),_(24),A(t.db_tracker_data.Db_Quality),_(2),A(At(59,17,t.db_tracker_data.Sales_site_visit_execpted_date,"dd-MMM-yy")),_(3),A(At(62,20,t.db_tracker_data.Sales_site_visit_date,"dd MMM yy")),_(3),A(At(65,23,t.db_tracker_data.Sales_token_execpted_date,"dd-MMM-yy")),_(3),A(At(68,26,t.db_tracker_data.Sales_token_recived_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_assign_to),_(3),gt("ngModel",t.db_tracker_data.Sales_remarks),_(),D("routerLink",te(29,NP,t.db_tracker_data.Db_tracker_id))}}function WK(i,e){if(i&1){let t=Ft();c(0,"tr",50)(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td"),h(10),Et(11,"date"),u(),c(12,"td",56),Et(13,"date"),h(14),u(),c(15,"td",51),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_telle_update(r))}),Rt(16,"i",52),u()()}if(i&2){let t=e.$implicit,n=e.index,r=I(3);D("ngClass",ao(14,uv,r.isToday(t.Sales_site_visit_execpted_date),r.isPast(t.Sales_site_visit_execpted_date),r.isEmptyDate(t.Sales_site_visit_execpted_date),r.isUpcoming(t.Sales_site_visit_execpted_date))),_(2),A(n+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),de(" ",t.Sales_site_visit_execpted_date?At(11,8,t.Sales_site_visit_execpted_date,"dd MMM yy"):"Date Not Fixed"," "),_(2),D("title",At(13,11,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Sales_stage1||"Site Visit Not Completed"," ")}}function GK(i,e){if(i&1&&(pe(0),rt(1,WK,17,19,"tr",62),fe()),i&2){let t=I(2);_(),D("ngForOf",t.telecallers_site_visit)}}function qK(i,e){i&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),u()())}function XK(i,e){if(i&1&&(c(0,"div",25),rt(1,IK,78,31,"div",60),c(2,"div",29)(3,"table",30)(4,"thead",31)(5,"tr")(6,"th",32),h(7,"Registration"),u()(),c(8,"tr")(9,"th",33),h(10,"S.No"),u(),c(11,"th",33),h(12,"Name"),u(),c(13,"th",33),h(14,"Contact"),u(),c(15,"th",33),h(16,"Location"),u(),c(17,"th",33),h(18,"Expecting For Agreement"),u(),c(19,"th",33),h(20,"Status"),u(),c(21,"th",33),h(22,"View"),u()()(),c(23,"tbody"),rt(24,PK,2,1,"ng-container",34)(25,RK,3,0,"ng-template",null,0,De),u()()(),c(27,"div",29)(28,"table",30)(29,"thead",31)(30,"tr")(31,"th",32),h(32,"Agreement"),u()(),c(33,"tr")(34,"th",33),h(35,"S.No"),u(),c(36,"th",33),h(37,"Name"),u(),c(38,"th",33),h(39,"Contact"),u(),c(40,"th",33),h(41,"Location"),u(),c(42,"th",33),h(43,"Expecting For Agreement"),u(),c(44,"th",33),h(45,"Status"),u(),c(46,"th",33),h(47,"View"),u()()(),c(48,"tbody"),rt(49,OK,2,1,"ng-container",34)(50,NK,3,0,"ng-template",null,0,De),u()()(),c(52,"div",29)(53,"table",30)(54,"thead",31)(55,"tr")(56,"th",32),h(57,"Token"),u()(),c(58,"tr")(59,"th",33),h(60,"S.No"),u(),c(61,"th",33),h(62,"Name"),u(),c(63,"th",33),h(64,"Contact"),u(),c(65,"th",33),h(66,"Location"),u(),c(67,"th",33),h(68,"Expecting For Token"),u(),c(69,"th",33),h(70,"Status"),u(),c(71,"th",33),h(72,"View"),u()()(),c(73,"tbody"),rt(74,BK,2,1,"ng-container",34)(75,VK,3,0,"ng-template",null,0,De),u()()(),rt(77,HK,78,31,"div",60),c(78,"div",29)(79,"table",30)(80,"thead",31)(81,"tr")(82,"th",32),h(83,"Site Visit"),u()(),c(84,"tr")(85,"th",33),h(86,"S.No"),u(),c(87,"th",33),h(88,"Name"),u(),c(89,"th",33),h(90,"Contact"),u(),c(91,"th",33),h(92,"Location"),u(),c(93,"th",33),h(94,"Expecting For Site Visit"),u(),c(95,"th",33),h(96,"Status"),u(),c(97,"th",33),h(98,"View"),u()()(),c(99,"tbody"),rt(100,GK,2,1,"ng-container",34)(101,qK,3,0,"ng-template",null,0,De),u()()()()),i&2){let t=an(26),n=I();_(),D("ngIf",n.is_telle_customer_Card),_(23),D("ngIf",n.telecallers_registration&&n.telecallers_registration.length>0)("ngIfElse",t),_(25),D("ngIf",n.telecallers_agreement&&n.telecallers_agreement.length>0)("ngIfElse",t),_(25),D("ngIf",n.telecallers_token&&n.telecallers_token.length>0)("ngIfElse",t),_(3),D("ngIf",n.is_telle_sales_Card),_(23),D("ngIf",n.telecallers_site_visit&&n.telecallers_site_visit.length>0)("ngIfElse",t)}}function YK(i,e){if(i&1){let t=Ft();c(0,"tr",47)(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td",51),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.sales_details_update(r))}),Rt(10,"i",52),u()()}if(i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.site_no),_(2),A(t.is_site_booked?"Not Available":"Available"),_(2),A(t.Project_id===1?"Anbu Avenue":t.Project_id===2?"RVS Avenue":"")}}function $K(i,e){if(i&1&&(pe(0),rt(1,YK,11,4,"tr",46),fe()),i&2){let t=I(2);_(),D("ngForOf",t.site_details)}}function KK(i,e){i&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),u()())}function ZK(i,e){if(i&1&&(c(0,"div",25)(1,"button",27),h(2,"Add Site"),u(),Rt(3,"br")(4,"br"),c(5,"div",29)(6,"table",30)(7,"thead",31)(8,"tr")(9,"th",32),h(10,"Site Details"),u()(),c(11,"tr")(12,"th",33),h(13,"S.No"),u(),c(14,"th",33),h(15,"Site Number"),u(),c(16,"th",33),h(17,"Status"),u(),c(18,"th",33),h(19,"Project"),u(),c(20,"th",33),h(21,"View"),u()()(),c(22,"tbody"),rt(23,$K,2,1,"ng-container",34)(24,KK,3,0,"ng-template",null,0,De),u()()()()),i&2){let t=an(25),n=I();_(),D("routerLink",te(3,M$,n.project_id)),_(22),D("ngIf",n.site_details&&n.site_details.length>0)("ngIfElse",t)}}function JK(i,e){if(i&1&&(c(0,"div",25)(1,"button",27),h(2,"Financial Goal"),u(),c(3,"button",27),h(4,"New Booking"),u(),c(5,"button",63),h(6,"Functional Status"),u()()),i&2){let t=I();_(),D("routerLink",te(3,E$,t.project_id)),_(2),D("routerLink",te(5,A$,t.project_id)),_(2),D("routerLink",te(7,T$,t.project_id))}}var dv=class i{constructor(e,t,n,r,s){this.route=e;this.apiService=t;this.http=n;this.domSanitizer=r;this.userService=s}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}selectedModule="";modules=["Database Tracker","Sales Tracker","Customer Tracker","Customer Database","Telecaller","Manage Site","Manage Report"];selectModule(e){this.selectedModule=e}updateactualtask=null;project_id=null;dbtracker_api_url="";sales_telecallers_comments_url="";site_details_url="";ngOnInit(){this.get_data(),this.dbtracker_api_url=this.apiService.sales_dbtracker_api(),this.sales_telecallers_comments_url=this.apiService.sales_telecallers_comments_api(),this.site_details_url=this.apiService.site_details_api(),this.url_parameters(),this.project_name(),this.get_dbtracker_api(),this.retrive_data(),setTimeout(()=>{this.get_telecaller_data(),this.get_telecaller_api(),this.get_site_details()},2e3)}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}card_name="";retrive_data(){this.card_name=this.apiService.get_redirect_card(),this.selectedModule=this.card_name}url_parameters(){this.route.params.subscribe(e=>{this.project_id=parseInt(e.salesprojectid),this.updateactualtask=e.cardName})}project_names="";project_name(){setTimeout(()=>{this.project_id==1?this.project_names="ANBU AVENUE":this.project_id==2&&(this.project_names="RVS AVENUE")},.1)}get_dbtracker_data=[];get_sales_tracker_data=[];get_sales_customer_tracker_data=[];get_sales_customer_database_data=[];get_telecallers_data=[];get_dbtracker_api(){let e=new Date;this.http.get(this.dbtracker_api_url).subscribe(t=>{this.get_dbtracker_data=t.filter(n=>n.project_id===this.project_id&&n.is_db_tracker===!0),this.get_sales_tracker_data=t.filter(n=>n.project_id===this.project_id&&n.is_sales_tracker===!0),this.get_sales_customer_tracker_data=t.filter(n=>n.project_id===this.project_id&&n.is_customer_tracker===!0),this.get_sales_customer_database_data=t.filter(n=>n.project_id===this.project_id&&n.is_customer_database===!0),this.get_telecallers_data=t.filter(n=>n.project_id===this.project_id)},t=>{console.error("Error fetching items",t)})}telecallers_token=[];telecallers_agreement=[];telecallers_registration=[];telecallers_site_visit=[];get_telecaller_data(){let e=new Date().setHours(0,0,0,0);this.telecallers_site_visit=this.get_telecallers_data.filter(t=>{let n=new Date(t.Sales_site_visit_execpted_date).setHours(0,0,0,0);return t.Sales_stage1!=="Site Visit Completed"&&t.Db_status==="Connected"}).sort((t,n)=>{let r=new Date(t.Sales_site_visit_execpted_date).setHours(0,0,0,0),s=new Date(n.Sales_site_visit_execpted_date).setHours(0,0,0,0);return r>=e&&s>=e||r<e&&s<e?r-s:r>=e?-1:1}),this.telecallers_token=this.get_telecallers_data.filter(t=>{let n=new Date(t.Sales_token_execpted_date).setHours(0,0,0,0);return t.Sales_stage2!=="Token Received"&&t.Sales_stage1==="Site Visit Completed"}).sort((t,n)=>{let r=new Date(t.Sales_token_execpted_date).setHours(0,0,0,0),s=new Date(n.Sales_token_execpted_date).setHours(0,0,0,0);return r>=e&&s>=e||r<e&&s<e?r-s:r>=e?-1:1}),this.telecallers_agreement=this.get_telecallers_data.filter(t=>{let n=new Date(t.Customer_agreement_expected_date).setHours(0,0,0,0);return t.Customer_stage1!=="Agreement Completed"&&t.Sales_stage2==="Token Received"}).sort((t,n)=>{let r=new Date(t.Customer_agreement_expected_date).setHours(0,0,0,0),s=new Date(n.Customer_agreement_expected_date).setHours(0,0,0,0);return r>=e&&s>=e||r<e&&s<e?r-s:r>=e?-1:1}),this.telecallers_registration=this.get_telecallers_data.filter(t=>{let n=new Date(t.Customer_registration_expected_date).setHours(0,0,0,0);return t.Customer_stage2!=="Registration Completed"&&t.Customer_stage1==="Agreement Completed"}).sort((t,n)=>{let r=new Date(t.Customer_registration_expected_date).setHours(0,0,0,0),s=new Date(n.Customer_registration_expected_date).setHours(0,0,0,0);return r>=e&&s>=e||r<e&&s<e?r-s:r>=e?-1:1})}isToday(e){let t=new Date().setHours(0,0,0,0),n=new Date(e).setHours(0,0,0,0);return t===n}isPast(e){let t=new Date().setHours(0,0,0,0);return new Date(e).setHours(0,0,0,0)<t}isEmptyDate(e){return!e||new Date(e).toString()==="Invalid Date"}isUpcoming(e){let t=new Date().setHours(0,0,0,0);return new Date(e).setHours(0,0,0,0)>t&&!this.isEmptyDate(e)}contactSearchTerm_dbtracker="";get filteredDbTrackerData(){let e=this.contactSearchTerm_dbtracker.toLowerCase();return this.get_dbtracker_data.filter(t=>{let n=t.Db_status?t.Db_status.toLowerCase():null;return e==="Connected"?n==="Connected":e==="Not Connected"?n==="Not Connected"&&n===null:t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e)||n&&n.includes(e)})}isCardVisible=!1;db_tracker_data;sales_details_update(e){this.isCardVisible=!0,this.db_tracker_data=e,this.get_telecaller_api()}is_telle_sales_Card=!1;sales_telle_update(e){this.is_telle_sales_Card=!0,this.db_tracker_data=e}is_telle_customer_Card=!1;sales_telle_customer(e){this.is_telle_customer_Card=!0,this.db_tracker_data=e}onDocumentClick(e){let t=document.querySelector(".pop-card");t&&!t.contains(e.target)&&(this.isCardVisible=!1,this.is_telle_sales_Card=!1,this.is_telle_customer_Card=!1);let n=document.querySelector(".pop-card-cmt");n&&!n.contains(e.target)&&(this.customers_cmt_card=!1);let r=document.querySelector(".popup-card");r&&!r.contains(e.target)&&(this.isCardVisible=!1)}closePopup(){this.isCardVisible=!1}showCommentCard=!1;currentComment="";showComments(e){this.currentComment=e,this.showCommentCard=!0}closeComments(){this.showCommentCard=!1}contactSearchTerm_salestracker_u="";get filteredsalestracker_u(){let e=this.contactSearchTerm_salestracker_u.toLowerCase();return this.get_sales_tracker_data.filter(t=>t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e))}contactSearchTerm_customertracker="";get filteredcustomertracker(){let e=this.contactSearchTerm_customertracker.toLowerCase();return this.get_sales_customer_tracker_data.filter(t=>t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e))}contactSearchTerm_customerdb="";get filteredcustomerdb(){let e=this.contactSearchTerm_customerdb.toLowerCase();return this.get_sales_customer_database_data.filter(t=>t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e))}highlightMatch(e,t){if(!t)return e;let n=new RegExp(`(${t})`,"gi"),r=e.replace(n,'<span style="background-color: yellow;">$1</span>');return this.domSanitizer.bypassSecurityTrustHtml(r)}successmgs=!1;set_sucess_message="";create_sales_tracker(e){let t=this.dbtracker_api_url+e,n={is_db_tracker:!1,is_sales_tracker:!0},r={headers:new We({"Content-Type":"application/json"})};this.http.put(t,n,r).subscribe(s=>{console.log(s),this.set_sucess_message="Passed To Sales Tracker",this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.set_sucess_message="",this.get_dbtracker_api()},1e3)},s=>{console.log("Post request failed",s)}),this.isCardVisible=!1}move_to_db(e){let t=this.dbtracker_api_url+e,n={headers:new We({"Content-Type":"application/json"})};this.http.put(t,{is_db_tracker:!0,is_sales_tracker:!1,is_customer_tracker:!1,is_customer_database:!1},n).subscribe({next:r=>{console.log(r),this.successmgs=!1,this.set_sucess_message="Moved To Database Tracker",setTimeout(()=>this.get_dbtracker_api(),1e3)},error:r=>console.log("Post request failed",r)}),this.isCardVisible=!1}customers_cmt_card=!1;get_db_telecaller_data=[];get_sl_telecaller_data=[];get_cl_telecaller_data=[];get_telecaller_api(){this.http.get(this.sales_telecallers_comments_url).subscribe(e=>{this.get_db_telecaller_data=e.filter(t=>t.Db_tracker_id===this.db_tracker_data.Db_tracker_id&&t.module_name==="Databe tracker"),this.get_sl_telecaller_data=e.filter(t=>t.Db_tracker_id===this.db_tracker_data.Db_tracker_id&&t.module_name==="Sales tracker"),this.get_cl_telecaller_data=e.filter(t=>t.Db_tracker_id===this.db_tracker_data.Db_tracker_id&&t.module_name==="Customer tracker")},e=>{console.error("Error fetching items",e)})}remarks_card(){this.customers_cmt_card=!0}site_details=[];get_site_details(){this.http.get(this.site_details_url).subscribe(e=>{this.site_details=e.filter(t=>t.Project_id==this.project_id)},e=>{console.error("Error fetching items",e)})}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(od),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-view-sales-details"]],hostBindings:function(t,n){t&1&&lt("click",function(s){return n.onDocumentClick(s)},!1,Hl)},decls:27,vars:17,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"bradcrumb-card"],["style","width: 25%;","class","alert-card fade-in",4,"ngIf"],[1,"container","my-4"],[1,"form-group","module-dropdown"],["for","moduleSelect"],["id","moduleSelect",1,"custom-input",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"module-card"],[1,"module-list"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","comment-card",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"alert-card","fade-in",2,"width","25%"],[1,"alert-content"],[1,"close-btn",3,"click"],[3,"value"],[3,"click","ngClass"],[1,"comment-card"],[1,"btn","btn-secondary",3,"click"],[1,"mt-5"],["class","popup-container",4,"ngIf"],[1,"submit-btn",2,"width","180px",3,"routerLink"],["type","text","placeholder","Search Details",1,"custom-input","mb-2",3,"ngModelChange","ngModel"],["id","content-to-pdf",1,"table-responsive"],[1,"table","table-bordered","table-striped"],[1,"table-header"],["colspan","15",1,"main-header"],[1,"goal"],[4,"ngIf","ngIfElse"],[1,"popup-container"],[1,"popup-card"],["class","pop-card-cmt",4,"ngIf"],[1,"table-responsive"],[1,"custmer-table"],[1,"fas","fa-comment-alt",3,"click"],[1,"custome-cmd","table-responsive"],[1,"submit-btn",3,"routerLink"],[1,"submit-btn",2,"width","300px",3,"click"],[1,"pop-card-cmt"],["readonly","",1,"custom-input",3,"ngModelChange","ngModel"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],["colspan","15",2,"text-align","center"],[3,"innerHTML"],[3,"ngClass"],[3,"click"],[1,"fas","fa-eye"],[1,"custome-cmd"],["colspan","2"],[4,"ngFor","ngForOf"],[3,"title"],["class","pop-card-cmt mt-5",4,"ngIf"],[1,"pop-card-cmt","mt-5"],[1,"scrol-card"],["class","pop-card",4,"ngIf"],[1,"pop-card"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"submit-btn",2,"width","200px",3,"routerLink"]],template:function(t,n){t&1&&(c(0,"app-header",1),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"p"),h(6),u()(),rt(7,k$,7,1,"div",6),c(8,"div",7)(9,"div",8)(10,"label",9),h(11,"Select Module"),u(),c(12,"select",10),vt("ngModelChange",function(s){return _t(n.selectedModule,s)||(n.selectedModule=s),s}),c(13,"option",11),h(14,"Select a Module"),u(),rt(15,I$,2,2,"option",12),u()(),c(16,"div",13)(17,"ul",14),rt(18,D$,2,4,"li",15),u()(),rt(19,P$,5,1,"div",16)(20,z$,35,7,"div",17)(21,Q$,31,4,"div",17)(22,hK,31,4,"div",17)(23,MK,27,4,"div",17)(24,XK,103,10,"div",17)(25,ZK,26,5,"div",17)(26,JK,7,9,"div",17),u()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(15,b$,!n.isSidebarOpen)),_(4),A(n.project_names),_(),D("ngIf",n.successmgs),_(5),gt("ngModel",n.selectedModule),_(3),D("ngForOf",n.modules),_(3),D("ngForOf",n.modules),_(),D("ngIf",n.showCommentCard),_(),D("ngIf",n.selectedModule==="Database Tracker"),_(),D("ngIf",n.selectedModule==="Sales Tracker"),_(),D("ngIf",n.selectedModule==="Customer Tracker"),_(),D("ngIf",n.selectedModule==="Customer Database"),_(),D("ngIf",n.selectedModule==="Telecaller"),_(),D("ngIf",n.selectedModule==="Manage Site"),_(),D("ngIf",n.selectedModule==="Manage Report"))},dependencies:[en,Jn,Sn,di,Ri,Li,yi,Si,oi,ni,on,ln,Qr],styles:['.goal[_ngcontent-%COMP%]{background-color:#d6a6be;text-align:center}.actual[_ngcontent-%COMP%]{background-color:#92c47d;text-align:center}.sts-all[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.table-row[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.main-header[_ngcontent-%COMP%]{background-color:#741b48;color:#fff}i[_ngcontent-%COMP%]{cursor:pointer;color:gray;transition:.1s}i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#492020}.comment-card[_ngcontent-%COMP%]{padding:1rem;background:#f9f9f9;border:1px solid #ddd;border-radius:8px;position:fixed;top:20%;left:50%;transform:translate(-50%,-50%);max-width:300px;box-shadow:0 2px 10px #0000001a;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translate(-50%,-60%)}to{opacity:1;transform:translate(-50%,-50%)}}.popup-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.popup-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:20px;box-shadow:0 5px 15px #0000004d;text-align:center;animation:_ngcontent-%COMP%_popupFadeIn .3s ease;position:relative}.scrol-card[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:auto;max-width:100%;box-sizing:border-box;margin-bottom:2%}.close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;font-size:24px;font-weight:700;color:#333;cursor:pointer;transition:color .3s ease}.close-btn[_ngcontent-%COMP%]:hover{color:red}@keyframes _ngcontent-%COMP%_popupFadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@media screen and (max-width: 768px){.popup-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.popup-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:20px;width:100%;box-shadow:0 5px 15px #0000004d;text-align:center;animation:_ngcontent-%COMP%_popupFadeIn .3s ease;position:relative}.scrol-card[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:auto;max-height:200px;max-width:100%;box-sizing:border-box;margin-bottom:2%}}.pop-card-cmt[_ngcontent-%COMP%]{position:fixed;background-color:#f0f4f8;padding:2%;border-radius:10px;top:45%;left:50%;transform:translate(-50%,-50%);box-shadow:0 4px 10px #0003}@media (max-width: 600px){.data-table[_ngcontent-%COMP%]{font-size:14px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px}}.custmer-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-family:Arial,sans-serif;margin:20px 0;box-shadow:0 2px 5px #0000001a}.custmer-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.custmer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;font-size:14px;text-transform:uppercase;letter-spacing:1px}.custmer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}.custmer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.custmer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px;text-align:left;border-bottom:1px solid #ddd}.custmer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .custmer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.custmer-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover:after{content:"View Customer Comment";position:absolute;background-color:#333;color:#fff;padding:5px;font-size:12px;border-radius:5px;bottom:30px;left:50%;transform:translate(-50%);opacity:0;transition:opacity .3s}.custmer-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover:after{opacity:1}.green-text[_ngcontent-%COMP%]{color:green}.red-text[_ngcontent-%COMP%]{color:red}.custome-cmd[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:auto;max-height:200px;max-width:100%;box-sizing:border-box;margin-bottom:2%}.custome-cmd[_ngcontent-%COMP%]::-webkit-scrollbar{width:2px;height:8px}.custome-cmd[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.custome-cmd[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.custome-cmd[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.custome-cmd[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.custome-cmd[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .custome-cmd[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}table.table-bordered[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.today-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff!important;font-weight:lighter}table.table-bordered[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.past-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:red!important;color:#fff!important;font-weight:lighter}table.table-bordered[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.empty-date-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#ff0!important;color:#000!important;font-weight:400}table.table-bordered[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.upcoming-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:orange!important;color:#fff!important;font-weight:400}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{background-clip:padding-box}table.table-bordered[_ngcontent-%COMP%]{background-color:transparent!important}table.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:inherit!important}']})};var QK=i=>({"full-width":i});function tZ(i,e){if(i&1&&(c(0,"div",5)(1,"div",13)(2,"p"),h(3),u()()()),i&2){let t=I();_(3),A(t.project_name)}}function eZ(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",21),h(3),u(),c(4,"td",21),h(5),u(),c(6,"td",22),h(7),u(),c(8,"td",22),h(9),u(),c(10,"td",22),h(11),u(),c(12,"td",22),h(13),u()(),c(14,"tr")(15,"td",23),h(16),u(),c(17,"td",23),h(18),u(),c(19,"td",23),h(20),u(),c(21,"td",23),h(22),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.SourceName),_(2),A(t.GoalLeads),_(2),A(t.GoalTotalCost),_(2),A(t.GoalConversions),_(2),A(t.GoalRegistrations),_(3),A(t.NumberOfLeads),_(2),A(t.ActualTotalCost),_(2),A(t.Completed_SiteVisits),_(2),A(t.Completed_Registration)}}function nZ(i,e){if(i&1&&(pe(0),rt(1,eZ,23,10,"ng-container",20),fe()),i&2){let t=I(2);_(),D("ngForOf",t.final_maeeting_data)}}function iZ(i,e){i&1&&(c(0,"tr")(1,"td",24),h(2,"No task found"),u()())}function rZ(i,e){if(i&1&&(c(0,"div",14)(1,"table",15)(2,"thead")(3,"tr")(4,"th",16),h(5,"Leads"),u()(),c(6,"tr",17)(7,"th"),h(8,"S.No"),u(),c(9,"th"),h(10,"Tasks"),u(),c(11,"th",18),h(12,"Leads"),u(),c(13,"th",18),h(14,"Cost"),u(),c(15,"th",18),h(16,"Conversion"),u(),c(17,"th",18),h(18,"Registration"),u()()(),c(19,"tbody"),rt(20,nZ,2,1,"ng-container",19),u(),rt(21,iZ,3,0,"ng-template",null,0,De),u()()),i&2){let t=an(22),n=I();_(20),D("ngIf",n.final_maeeting_data&&n.final_maeeting_data.length>0)("ngIfElse",t)}}var hv=class i{constructor(e,t,n,r,s){this.route=e;this.apiService=t;this.http=n;this.router=r;this.userService=s}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}project_id=null;ngOnInit(){this.get_data(),this.route.params.subscribe(e=>{this.project_id=parseInt(e.projectid)}),this.apifromservice(),this.total_values_anbu(),this.total_values_rvs(),this.total_values_agasthya_prime()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}marketing_meeting_url="";apifromservice(){this.marketing_meeting_url=this.apiService.marketing_meeting_api()}get_meeting_data=[];project_anubu_avenue=[];project_rvs_avenue=[];total_actual_leads_1=null;total_actual_cost_1=null;total_actual_conversion_1=null;total_goal_leads_1=null;total_goal_cost_1=null;total_goal_conversion_1=null;total_actual_leads_2=null;total_actual_cost_2=null;total_actual_conversion_2=null;total_goal_leads_2=null;total_goal_cost_2=null;total_goal_conversion_2=null;total_actual_leads_3=null;total_actual_cost_3=null;total_actual_conversion_3=null;total_goal_leads_3=null;total_goal_cost_3=null;total_goal_conversion_3=null;total_values_anbu(){let e=`${this.apiService.marketing_meeting_data_api()}?ProjectID= 1`;this.http.get(e).subscribe(t=>{this.final_maeeting_data=t.data,this.total_actual_leads_1=this.final_maeeting_data.reduce((n,r)=>n+(r.NumberOfLeads||0),0),this.total_actual_cost_1=this.final_maeeting_data.reduce((n,r)=>n+(r.ActualTotalCost||0),0),this.total_actual_conversion_1=this.final_maeeting_data.reduce((n,r)=>n+(r.Completed_SiteVisits||0),0),this.total_goal_leads_1=this.final_maeeting_data.reduce((n,r)=>n+(r.GoalLeads||0),0),this.total_goal_cost_1=this.final_maeeting_data.reduce((n,r)=>n+(r.GoalTotalCost||0),0),this.total_goal_conversion_1=this.final_maeeting_data.reduce((n,r)=>n+(r.GoalConversions||0),0)},t=>{console.error("Error fetching items",t)})}total_values_rvs(){let e=`${this.apiService.marketing_meeting_data_api()}?ProjectID= 2`;this.http.get(e).subscribe(t=>{this.final_maeeting_data=t.data,this.total_actual_leads_2=this.final_maeeting_data.reduce((n,r)=>n+(r.NumberOfLeads||0),0),this.total_actual_cost_2=this.final_maeeting_data.reduce((n,r)=>n+(r.ActualTotalCost||0),0),this.total_actual_conversion_2=this.final_maeeting_data.reduce((n,r)=>n+(r.Completed_SiteVisits||0),0),this.total_goal_leads_2=this.final_maeeting_data.reduce((n,r)=>n+(r.GoalLeads||0),0),this.total_goal_cost_2=this.final_maeeting_data.reduce((n,r)=>n+(r.GoalTotalCost||0),0),this.total_goal_conversion_2=this.final_maeeting_data.reduce((n,r)=>n+(r.GoalConversions||0),0)},t=>{console.error("Error fetching items",t)})}total_values_agasthya_prime(){let e=`${this.apiService.marketing_meeting_data_api()}?ProjectID= 3`;this.http.get(e).subscribe(t=>{this.final_maeeting_data=t.data,this.total_actual_leads_3=this.final_maeeting_data.reduce((n,r)=>n+(r.NumberOfLeads||0),0),this.total_actual_cost_3=this.final_maeeting_data.reduce((n,r)=>n+(r.ActualTotalCost||0),0),this.total_actual_conversion_3=this.final_maeeting_data.reduce((n,r)=>n+(r.Completed_SiteVisits||0),0),this.total_goal_leads_3=this.final_maeeting_data.reduce((n,r)=>n+(r.GoalLeads||0),0),this.total_goal_cost_3=this.final_maeeting_data.reduce((n,r)=>n+(r.GoalTotalCost||0),0),this.total_goal_conversion_3=this.final_maeeting_data.reduce((n,r)=>n+(r.GoalConversions||0),0)},t=>{console.error("Error fetching items",t)})}project1=1;project2=2;is_tablevisible=!1;project_name="";final_maeeting_data=[];get_meeting_datas(e){this.is_tablevisible=!0;let t=`${this.apiService.marketing_meeting_data_api()}?ProjectID=${e}`;this.http.get(t).subscribe(n=>{this.final_maeeting_data=n.data,console.log(this.final_maeeting_data,"Here is meeting values")},n=>{console.error("Error fetching items",n)}),e==1?this.project_name="ANBU AVENUE":e==2?this.project_name="RVS AVENUE":e==3?this.project_name="AGASTHYA PRIME":e==4&&(this.project_name="AGASTHYA DEVELOPER")}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(Vn),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-marketing-meeting"]],decls:63,vars:24,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"mt-5"],[1,"row"],[1,"col","project-card",3,"click"],[2,"text-align","center"],[1,"col"],[1,"col","project-card",2,"margin-left","15px",3,"click"],["class","mt-5",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"bradcrumb-card"],[1,"table-responsive"],[1,"table","table-responsive","table-bordered","content-table"],["colspan","7",1,"main-header"],[1,"header-row"],[1,"headers-title"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["rowspan","2",1,"vertical-center"],[1,"goal-color"],[1,"actual-color"],["colspan","8",2,"text-align","center"]],template:function(t,n){t&1&&(c(0,"app-header",1),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",5)(6,"div",6)(7,"div",7),lt("click",function(){return n.get_meeting_datas(1)}),c(8,"h6",8),h(9,"ANBU AVENUE"),u(),c(10,"div",6)(11,"div",9)(12,"p"),h(13),u(),c(14,"p"),h(15),u(),c(16,"p"),h(17),u()(),c(18,"div",9)(19,"p"),h(20),u(),c(21,"p"),h(22),u(),c(23,"p"),h(24),u()()()(),c(25,"div",10),lt("click",function(){return n.get_meeting_datas(2)}),c(26,"h6",8),h(27,"RVS AVENUE"),u(),c(28,"div",6)(29,"div",9)(30,"p"),h(31),u(),c(32,"p"),h(33),u(),c(34,"p"),h(35),u()(),c(36,"div",9)(37,"p"),h(38),u(),c(39,"p"),h(40),u(),c(41,"p"),h(42),u()()()(),c(43,"div",10),lt("click",function(){return n.get_meeting_datas(3)}),c(44,"h6",8),h(45,"AGASTHYA PRIME"),u(),c(46,"div",6)(47,"div",9)(48,"p"),h(49),u(),c(50,"p"),h(51),u(),c(52,"p"),h(53),u()(),c(54,"div",9)(55,"p"),h(56),u(),c(57,"p"),h(58),u(),c(59,"p"),h(60),u()()()()()(),rt(61,tZ,4,1,"div",11)(62,rZ,23,2,"div",12),u()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(22,QK,!n.isSidebarOpen)),_(11),de("Goal Leads: ",n.total_goal_leads_1,""),_(2),de("Goal Conversion: ",n.total_goal_conversion_1,""),_(2),de("Goal Cost: \u20B9 ",n.total_goal_cost_1," "),_(3),de("Actual Leads: ",n.total_actual_leads_1,""),_(2),de("Actual Conversion: ",n.total_actual_conversion_1,""),_(2),de("Actual Cost: \u20B9 ",n.total_actual_cost_1," "),_(7),de("Goal Leads: ",n.total_goal_leads_2,""),_(2),de("Goal Conversion: ",n.total_goal_conversion_2,""),_(2),de("Goal Cost: \u20B9 ",n.total_goal_cost_2," "),_(3),de("Actual Leads: ",n.total_actual_leads_2,""),_(2),de("Actual Conversion: ",n.total_actual_conversion_2,""),_(2),de("Actual Cost: \u20B9 ",n.total_actual_cost_2," "),_(7),de("Goal Leads: ",n.total_goal_leads_3,""),_(2),de("Goal Conversion: ",n.total_goal_conversion_3,""),_(2),de("Goal Cost: \u20B9 ",n.total_goal_cost_3," "),_(3),de("Actual Leads: ",n.total_actual_leads_3,""),_(2),de("Actual Conversion: ",n.total_actual_conversion_3,""),_(2),de("Actual Cost: \u20B9 ",n.total_actual_cost_3," "),_(),D("ngIf",n.is_tablevisible),_(),D("ngIf",n.is_tablevisible))},dependencies:[en,Jn,Sn,on,ln],styles:[".project-card[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:10px;background:linear-gradient(135deg,indigo,#9370db);box-shadow:0 4px 6px #0000001a,0 1px 3px #00000014;transition:transform .3s ease,box-shadow .3s ease;padding:20px;overflow:hidden;color:#fff}.project-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 15px #0003,0 4px 6px #0000001a;cursor:pointer;background:linear-gradient(135deg,#9370db,indigo)}.goal[_ngcontent-%COMP%]{background-color:#d6a6be;text-align:center}.actual[_ngcontent-%COMP%]{background-color:#92c47d;text-align:center}.sts-all[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{text-align:center;transition:all .3s ease}tr[_ngcontent-%COMP%]{text-align:center}.main-header[_ngcontent-%COMP%]{background-color:#741b48;color:#fff}.table-size[_ngcontent-%COMP%]{width:105%}.meeting-header[_ngcontent-%COMP%]{background-color:#5b3283;color:#fff;font-size:18px;padding:5px;margin-top:5%;text-align:center}.content-table[_ngcontent-%COMP%]{margin:20px 0;font-size:16px;text-align:center}.goal-header[_ngcontent-%COMP%], .actual-header[_ngcontent-%COMP%]{color:#000;font-weight:700}.goal-header[_ngcontent-%COMP%]{background-color:#d7a0b1}.actual-header[_ngcontent-%COMP%]{background-color:#a3d5a6}.goal-color[_ngcontent-%COMP%]{background-color:#d6a6be}.actual-color[_ngcontent-%COMP%]{background-color:#92c47d}.vertical-center[_ngcontent-%COMP%], .table-custom[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}.bg-light-pink[_ngcontent-%COMP%]{background-color:#e7c4c4}.bg-light-green[_ngcontent-%COMP%]{background-color:#98d98e}.headers-clr[_ngcontent-%COMP%]{background-color:#b9f1fe}.headers-title[_ngcontent-%COMP%]{background-color:#ffefe5}"]})};var sZ=i=>({"full-width":i});function aZ(i,e){if(i&1&&(pe(0),c(1,"tr")(2,"td",14),h(3),u(),c(4,"td",14),h(5),u(),c(6,"td",15),h(7),u(),c(8,"td",15),h(9),u(),c(10,"td",15),h(11),u()(),c(12,"tr")(13,"td",16),h(14),u(),c(15,"td",16),h(16),u(),c(17,"td",16),h(18),u()(),fe()),i&2){let t=e.$implicit,n=e.index;_(3),A(n+1),_(2),A(t.Meeting_source),_(2),A(t.Meeting_goal_leads_no),_(2),A(t.Meeting_goal_cost_no),_(2),A(t.Meeting_goal_conversion_no),_(3),A(t.Meeting_actual_leads_no),_(2),A(t.Meeting_actual_cost_no),_(2),A(t.Meeting_actual_conversion_no)}}function oZ(i,e){if(i&1&&(pe(0),rt(1,aZ,19,8,"ng-container",13),fe()),i&2){let t=I();_(),D("ngForOf",t.get_task_progress_data)}}function lZ(i,e){i&1&&(c(0,"tr")(1,"td",17),h(2,"No task found"),u()())}var pv=class i{constructor(e,t,n,r,s){this.route=e;this.apiService=t;this.http=n;this.router=r;this.userService=s}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}project_id;ngOnInit(){this.get_data(),this.route.params.subscribe(e=>{this.project_id=parseInt(e.projectid)}),this.get_task_progress()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}project_name="";get_task_progress_data=[];get_task_progress(){this.http.get(this.apiService.marketing_meeting_api()).subscribe(e=>{this.get_task_progress_data=e.filter(t=>t.Project_id===this.project_id)},e=>{console.error("Error fetching items",e)}),this.project_id==1?this.project_name="Anbu Avenue":this.project_id==2&&(this.project_name="RVS Avenue")}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(Vn),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-marketing-meeting-table"]],decls:29,vars:7,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"mt-5"],[1,"bradcrumb-card"],["id","content-to-pdf",1,"table-responsive"],[1,"table","table-responsive","table-bordered","content-table"],["colspan","7",1,"main-header"],[1,"header-row"],[1,"headers-title"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["rowspan","2",1,"vertical-center"],[1,"goal-color"],[1,"actual-color"],["colspan","8",2,"text-align","center"]],template:function(t,n){if(t&1){let r=Ft();c(0,"app-header",1),lt("toggleSidebarEvent",function(){return G(r),q(n.toggleSidebar())}),u(),Rt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"p"),h(7),u()()(),c(8,"div",7)(9,"table",8)(10,"thead")(11,"tr")(12,"th",9),h(13,"Leads"),u()(),c(14,"tr",10)(15,"th"),h(16,"S.No"),u(),c(17,"th"),h(18,"Tasks"),u(),c(19,"th",11),h(20,"Leads"),u(),c(21,"th",11),h(22,"Cost"),u(),c(23,"th",11),h(24,"Conversion"),u()()(),c(25,"tbody"),rt(26,oZ,2,1,"ng-container",12),u(),rt(27,lZ,3,0,"ng-template",null,0,De),u()()()()}if(t&2){let r=an(28);_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(5,sZ,!n.isSidebarOpen)),_(5),A(n.project_name),_(19),D("ngIf",n.get_task_progress_data&&n.get_task_progress_data.length>0)("ngIfElse",r)}},dependencies:[en,Jn,Sn,on,ln],styles:[".goal[_ngcontent-%COMP%]{background-color:#d6a6be;text-align:center}.actual[_ngcontent-%COMP%]{background-color:#92c47d;text-align:center}.sts-all[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{text-align:center;transition:all .3s ease}tr[_ngcontent-%COMP%]{text-align:center}.main-header[_ngcontent-%COMP%]{background-color:#741b48;color:#fff}.table-size[_ngcontent-%COMP%]{width:105%}.meeting-header[_ngcontent-%COMP%]{background-color:#5b3283;color:#fff;font-size:18px;padding:5px;margin-top:5%;text-align:center}.content-table[_ngcontent-%COMP%]{margin:20px 0;font-size:16px;text-align:center}.goal-header[_ngcontent-%COMP%], .actual-header[_ngcontent-%COMP%]{color:#000;font-weight:700}.goal-header[_ngcontent-%COMP%]{background-color:#d7a0b1}.actual-header[_ngcontent-%COMP%]{background-color:#a3d5a6}.goal-color[_ngcontent-%COMP%]{background-color:#d6a6be}.actual-color[_ngcontent-%COMP%]{background-color:#92c47d}.vertical-center[_ngcontent-%COMP%], .table-custom[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}.bg-light-pink[_ngcontent-%COMP%]{background-color:#e7c4c4}.bg-light-green[_ngcontent-%COMP%]{background-color:#98d98e}.headers-clr[_ngcontent-%COMP%]{background-color:#b9f1fe}.headers-title[_ngcontent-%COMP%]{background-color:#ffefe5}"]})};var cZ=i=>({"full-width":i});function dZ(i,e){if(i&1){let t=Ft();c(0,"div",18)(1,"div",19)(2,"strong"),h(3,"Success!"),u(),h(4," Saved Successfully. "),c(5,"button",20),lt("click",function(){G(t);let r=I();return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}var fv=class i{constructor(e,t,n,r,s){this.route=e;this.apiService=t;this.http=n;this.router=r;this.userService=s}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}add_meeting_url="";ngOnInit(){this.get_data(),this.add_meeting_url=this.apiService.marketing_meeting_api()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}successmgs=!1;Meeting_source="";Meeting_goal_leads_no;Meeting_goal_cost_no;Meeting_goal_conversion_no;Meeting_actual_leads_no;Meeting_actual_cost_no;Meeting_actual_conversion_no;Project_id;create_meeting(){let e=this.add_meeting_url,t={Meeting_source:this.Meeting_source,Meeting_goal_leads_no:this.Meeting_goal_leads_no,Meeting_goal_cost_no:this.Meeting_goal_cost_no,Meeting_goal_conversion_no:this.Meeting_goal_conversion_no,Meeting_actual_leads_no:this.Meeting_actual_leads_no,Meeting_actual_cost_no:this.Meeting_actual_cost_no,Meeting_actual_conversion_no:this.Meeting_actual_conversion_no,Project_id:Number(this.Project_id)},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Task Progress")},1e3)},r=>{console.log("Post request failed",r)})}back(e){this.router.navigate(["/marketing-meeting-table",e])}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(Vn),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-add-marketing-meeting"]],decls:56,vars:13,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","card-margin","mt-5"],["class","alert-card fade-in",4,"ngIf"],[1,"card","shadow","mt-5"],[1,"heading-card"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-6"],["for",""],["type","text",1,"custom-input",3,"ngModelChange","ngModel"],["type","number",1,"custom-input",3,"ngModelChange","ngModel"],[1,"custom-input",3,"ngModelChange","ngModel"],["value",""],["value","1"],["value","2"],[1,"submit-btn",3,"click"],[1,"alert-card","fade-in"],[1,"alert-content"],[1,"close-btn",3,"click"]],template:function(t,n){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3),rt(4,dZ,7,0,"div",4),c(5,"div",5)(6,"div",6)(7,"label"),h(8,"Meeting"),u()(),c(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10),h(13,"Source"),u(),c(14,"input",11),vt("ngModelChange",function(s){return _t(n.Meeting_source,s)||(n.Meeting_source=s),s}),u()(),c(15,"div",9)(16,"label",10),h(17,"Goal Leads"),u(),c(18,"input",12),vt("ngModelChange",function(s){return _t(n.Meeting_goal_leads_no,s)||(n.Meeting_goal_leads_no=s),s}),u()()(),c(19,"div",8)(20,"div",9)(21,"label"),h(22,"Goal Cost"),u(),c(23,"input",12),vt("ngModelChange",function(s){return _t(n.Meeting_goal_cost_no,s)||(n.Meeting_goal_cost_no=s),s}),u()(),c(24,"div",9)(25,"label"),h(26,"Goal Conversion"),u(),c(27,"input",12),vt("ngModelChange",function(s){return _t(n.Meeting_goal_conversion_no,s)||(n.Meeting_goal_conversion_no=s),s}),u()()(),c(28,"div",8)(29,"div",9)(30,"label",10),h(31,"Actual Leads"),u(),c(32,"input",12),vt("ngModelChange",function(s){return _t(n.Meeting_actual_leads_no,s)||(n.Meeting_actual_leads_no=s),s}),u()(),c(33,"div",9)(34,"label"),h(35,"Actual Cost"),u(),c(36,"input",12),vt("ngModelChange",function(s){return _t(n.Meeting_actual_cost_no,s)||(n.Meeting_actual_cost_no=s),s}),u()()(),c(37,"div",8)(38,"div",9)(39,"label"),h(40,"Actual Conversion"),u(),c(41,"input",12),vt("ngModelChange",function(s){return _t(n.Meeting_actual_conversion_no,s)||(n.Meeting_actual_conversion_no=s),s}),u()(),c(42,"div",9)(43,"label"),h(44,"Project"),u(),c(45,"select",13),vt("ngModelChange",function(s){return _t(n.Project_id,s)||(n.Project_id=s),s}),c(46,"option",14),h(47,"Select Project"),u(),c(48,"option",15),h(49,"Anbu Avenue"),u(),c(50,"option",16),h(51,"RVS Avenue"),u()()()(),c(52,"button",17),lt("click",function(){return n.create_meeting()}),h(53,"Update"),u(),c(54,"button",17),lt("click",function(){return n.back(1)}),h(55,"Back"),u()()()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(11,cZ,!n.isSidebarOpen)),_(2),D("ngIf",n.successmgs),_(10),gt("ngModel",n.Meeting_source),_(4),gt("ngModel",n.Meeting_goal_leads_no),_(5),gt("ngModel",n.Meeting_goal_cost_no),_(4),gt("ngModel",n.Meeting_goal_conversion_no),_(5),gt("ngModel",n.Meeting_actual_leads_no),_(4),gt("ngModel",n.Meeting_actual_cost_no),_(5),gt("ngModel",n.Meeting_actual_conversion_no),_(4),gt("ngModel",n.Project_id))},dependencies:[en,Sn,Ri,Li,yi,Ho,Si,oi,ni,on,ln]})};var rx="171";var i4=0,pM=1,r4=2;var fM=1,s4=2,Mo=3,hl=0,bs=1,Eo=2,_l=0,Bd=1,mM=2,gM=3,_M=4,a4=5,kc=100,o4=101,l4=102,c4=103,d4=104,u4=200,h4=201,p4=202,f4=203,Lv=204,Ov=205,m4=206,g4=207,_4=208,v4=209,x4=210,b4=211,y4=212,S4=213,w4=214,sx=0,ax=1,ox=2,Vd=3,lx=4,cx=5,dx=6,ux=7,vM=0,C4=1,M4=2,vl=0,E4=1,A4=2,T4=3,k4=4,I4=5,D4=6,P4=7;var rM=300,Wd=301,Gd=302,hx=303,px=304,Xm=306,Nv=1e3,Tc=1001,Fv=1002,wa=1003,R4=1004;var Ym=1005;var Za=1006,fx=1007;var Nc=1008;var Ao=1009,xM=1010,bM=1011,Gh=1012,mx=1013,Fc=1014,To=1015,qh=1016,gx=1017,_x=1018,qd=1020,yM=35902,SM=1021,wM=1022,Ma=1023,CM=1024,MM=1025,Fd=1026,Ud=1027,EM=1028,vx=1029,AM=1030,xx=1031;var bx=1033,$m=33776,Km=33777,Zm=33778,Jm=33779,yx=35840,Sx=35841,wx=35842,Cx=35843,Mx=36196,Ex=37492,Ax=37496,Tx=37808,kx=37809,Ix=37810,Dx=37811,Px=37812,Rx=37813,Lx=37814,Ox=37815,Nx=37816,Fx=37817,Bx=37818,Vx=37819,Ux=37820,zx=37821,Qm=36492,jx=36494,Hx=36495,TM=36283,Wx=36284,Gx=36285,qx=36286;var km=2300,Bv=2301,Rv=2302,sM=2400,aM=2401,oM=2402;var L4=3200,O4=3201;var kM=0,N4=1,xl="",ta="srgb",zd="srgb-linear",Im="linear",_i="srgb";var Nd=7680;var lM=519,F4=512,B4=513,V4=514,IM=515,U4=516,z4=517,j4=518,H4=519,cM=35044;var DM="300 es",wo=2e3,Dm=2001,pl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let n=this._listeners[e.type];if(n!==void 0){e.target=this;let r=n.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}},ls=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];var LC=Math.PI/180,Vv=180/Math.PI;function t0(){let i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(ls[i&255]+ls[i>>8&255]+ls[i>>16&255]+ls[i>>24&255]+"-"+ls[e&255]+ls[e>>8&255]+"-"+ls[e>>16&15|64]+ls[e>>24&255]+"-"+ls[t&63|128]+ls[t>>8&255]+"-"+ls[t>>16&255]+ls[t>>24&255]+ls[n&255]+ls[n>>8&255]+ls[n>>16&255]+ls[n>>24&255]).toLowerCase()}function Gn(i,e,t){return Math.max(e,Math.min(t,i))}function uZ(i,e){return(i%e+e)%e}function OC(i,e,t){return(1-t)*i+t*e}function wm(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Ns(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}var Qn=class i{constructor(e=0,t=0){i.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Gn(this.x,e.x,t.x),this.y=Gn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Gn(this.x,e,t),this.y=Gn(this.y,e,t),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Gn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let n=this.dot(e)/t;return Math.acos(Gn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*r+e.x,this.y=s*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Mn=class i{constructor(e,t,n,r,s,a,o,l,d){i.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,o,l,d)}set(e,t,n,r,s,a,o,l,d){let p=this.elements;return p[0]=e,p[1]=r,p[2]=o,p[3]=t,p[4]=s,p[5]=l,p[6]=n,p[7]=a,p[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[3],l=n[6],d=n[1],p=n[4],f=n[7],g=n[2],m=n[5],x=n[8],y=r[0],S=r[3],b=r[6],M=r[1],T=r[4],k=r[7],L=r[2],U=r[5],N=r[8];return s[0]=a*y+o*M+l*L,s[3]=a*S+o*T+l*U,s[6]=a*b+o*k+l*N,s[1]=d*y+p*M+f*L,s[4]=d*S+p*T+f*U,s[7]=d*b+p*k+f*N,s[2]=g*y+m*M+x*L,s[5]=g*S+m*T+x*U,s[8]=g*b+m*k+x*N,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],d=e[7],p=e[8];return t*a*p-t*o*d-n*s*p+n*o*l+r*s*d-r*a*l}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],d=e[7],p=e[8],f=p*a-o*d,g=o*l-p*s,m=d*s-a*l,x=t*f+n*g+r*m;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);let y=1/x;return e[0]=f*y,e[1]=(r*d-p*n)*y,e[2]=(o*n-r*a)*y,e[3]=g*y,e[4]=(p*t-r*l)*y,e[5]=(r*s-o*t)*y,e[6]=m*y,e[7]=(n*l-d*t)*y,e[8]=(a*t-n*s)*y,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,a,o){let l=Math.cos(s),d=Math.sin(s);return this.set(n*l,n*d,-n*(l*a+d*o)+a+e,-r*d,r*l,-r*(-d*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(NC.makeScale(e,t)),this}rotate(e){return this.premultiply(NC.makeRotation(-e)),this}translate(e,t){return this.premultiply(NC.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}},NC=new Mn;function PM(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function Pm(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function W4(){let i=Pm("canvas");return i.style.display="block",i}var FP={};function Xd(i){i in FP||(FP[i]=!0,console.warn(i))}function G4(i,e,t){return new Promise(function(n,r){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function q4(i){let e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function X4(i){let e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}var BP=new Mn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),VP=new Mn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function hZ(){let i={enabled:!0,workingColorSpace:zd,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===_i&&(r.r=ul(r.r),r.g=ul(r.g),r.b=ul(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===_i&&(r.r=jh(r.r),r.g=jh(r.g),r.b=jh(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===xl?Im:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[zd]:{primaries:e,whitePoint:n,transfer:Im,toXYZ:BP,fromXYZ:VP,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:ta},outputColorSpaceConfig:{drawingBufferColorSpace:ta}},[ta]:{primaries:e,whitePoint:n,transfer:_i,toXYZ:BP,fromXYZ:VP,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:ta}}}),i}var Zn=hZ();function ul(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function jh(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}var Ih,Uv=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ih===void 0&&(Ih=Pm("canvas")),Ih.width=e.width,Ih.height=e.height;let n=Ih.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Ih}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Pm("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=ul(s[a]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(ul(t[n]/255)*255):t[n]=ul(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},pZ=0,Rm=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:pZ++}),this.uuid=t0(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(FC(r[a].image)):s.push(FC(r[a]))}else s=FC(r);n.url=s}return t||(e.images[this.uuid]=n),n}};function FC(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?Uv.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var fZ=0,Bc=(()=>{class i extends pl{constructor(t=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=Tc,s=Tc,a=Za,o=Nc,l=Ma,d=Ao,p=i.DEFAULT_ANISOTROPY,f=xl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:fZ++}),this.uuid=t0(),this.name="",this.source=new Rm(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=a,this.minFilter=o,this.anisotropy=p,this.format=l,this.internalFormat=null,this.type=d,this.offset=new Qn(0,0),this.repeat=new Qn(1,1),this.center=new Qn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Mn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let n=t===void 0||typeof t=="string";if(!n&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==rM)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Nv:t.x=t.x-Math.floor(t.x);break;case Tc:t.x=t.x<0?0:1;break;case Fv:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Nv:t.y=t.y-Math.floor(t.y);break;case Tc:t.y=t.y<0?0:1;break;case Fv:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=rM,i.DEFAULT_ANISOTROPY=1,i})(),gi=class i{constructor(e=0,t=0,n=0,r=1){i.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s,l=e.elements,d=l[0],p=l[4],f=l[8],g=l[1],m=l[5],x=l[9],y=l[2],S=l[6],b=l[10];if(Math.abs(p-g)<.01&&Math.abs(f-y)<.01&&Math.abs(x-S)<.01){if(Math.abs(p+g)<.1&&Math.abs(f+y)<.1&&Math.abs(x+S)<.1&&Math.abs(d+m+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let T=(d+1)/2,k=(m+1)/2,L=(b+1)/2,U=(p+g)/4,N=(f+y)/4,F=(x+S)/4;return T>k&&T>L?T<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(T),r=U/n,s=N/n):k>L?k<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(k),n=U/r,s=F/r):L<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(L),n=N/s,r=F/s),this.set(n,r,s,t),this}let M=Math.sqrt((S-x)*(S-x)+(f-y)*(f-y)+(g-p)*(g-p));return Math.abs(M)<.001&&(M=1),this.x=(S-x)/M,this.y=(f-y)/M,this.z=(g-p)/M,this.w=Math.acos((d+m+b-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Gn(this.x,e.x,t.x),this.y=Gn(this.y,e.y,t.y),this.z=Gn(this.z,e.z,t.z),this.w=Gn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Gn(this.x,e,t),this.y=Gn(this.y,e,t),this.z=Gn(this.z,e,t),this.w=Gn(this.w,e,t),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Gn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},zv=class extends pl{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new gi(0,0,e,t),this.scissorTest=!1,this.viewport=new gi(0,0,e,t);let r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Za,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);let s=new Bc(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];let a=n.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new Rm(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Co=class extends zv{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}},Lm=class extends Bc{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=wa,this.minFilter=wa,this.wrapR=Tc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};var jv=class extends Bc{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=wa,this.minFilter=wa,this.wrapR=Tc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var fl=class{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,a,o){let l=n[r+0],d=n[r+1],p=n[r+2],f=n[r+3],g=s[a+0],m=s[a+1],x=s[a+2],y=s[a+3];if(o===0){e[t+0]=l,e[t+1]=d,e[t+2]=p,e[t+3]=f;return}if(o===1){e[t+0]=g,e[t+1]=m,e[t+2]=x,e[t+3]=y;return}if(f!==y||l!==g||d!==m||p!==x){let S=1-o,b=l*g+d*m+p*x+f*y,M=b>=0?1:-1,T=1-b*b;if(T>Number.EPSILON){let L=Math.sqrt(T),U=Math.atan2(L,b*M);S=Math.sin(S*U)/L,o=Math.sin(o*U)/L}let k=o*M;if(l=l*S+g*k,d=d*S+m*k,p=p*S+x*k,f=f*S+y*k,S===1-o){let L=1/Math.sqrt(l*l+d*d+p*p+f*f);l*=L,d*=L,p*=L,f*=L}}e[t]=l,e[t+1]=d,e[t+2]=p,e[t+3]=f}static multiplyQuaternionsFlat(e,t,n,r,s,a){let o=n[r],l=n[r+1],d=n[r+2],p=n[r+3],f=s[a],g=s[a+1],m=s[a+2],x=s[a+3];return e[t]=o*x+p*f+l*m-d*g,e[t+1]=l*x+p*g+d*f-o*m,e[t+2]=d*x+p*m+o*g-l*f,e[t+3]=p*x-o*f-l*g-d*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let n=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,d=o(n/2),p=o(r/2),f=o(s/2),g=l(n/2),m=l(r/2),x=l(s/2);switch(a){case"XYZ":this._x=g*p*f+d*m*x,this._y=d*m*f-g*p*x,this._z=d*p*x+g*m*f,this._w=d*p*f-g*m*x;break;case"YXZ":this._x=g*p*f+d*m*x,this._y=d*m*f-g*p*x,this._z=d*p*x-g*m*f,this._w=d*p*f+g*m*x;break;case"ZXY":this._x=g*p*f-d*m*x,this._y=d*m*f+g*p*x,this._z=d*p*x+g*m*f,this._w=d*p*f-g*m*x;break;case"ZYX":this._x=g*p*f-d*m*x,this._y=d*m*f+g*p*x,this._z=d*p*x-g*m*f,this._w=d*p*f+g*m*x;break;case"YZX":this._x=g*p*f+d*m*x,this._y=d*m*f+g*p*x,this._z=d*p*x-g*m*f,this._w=d*p*f-g*m*x;break;case"XZY":this._x=g*p*f-d*m*x,this._y=d*m*f-g*p*x,this._z=d*p*x+g*m*f,this._w=d*p*f+g*m*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,n=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],d=t[2],p=t[6],f=t[10],g=n+o+f;if(g>0){let m=.5/Math.sqrt(g+1);this._w=.25/m,this._x=(p-l)*m,this._y=(s-d)*m,this._z=(a-r)*m}else if(n>o&&n>f){let m=2*Math.sqrt(1+n-o-f);this._w=(p-l)/m,this._x=.25*m,this._y=(r+a)/m,this._z=(s+d)/m}else if(o>f){let m=2*Math.sqrt(1+o-n-f);this._w=(s-d)/m,this._x=(r+a)/m,this._y=.25*m,this._z=(l+p)/m}else{let m=2*Math.sqrt(1+f-n-o);this._w=(a-r)/m,this._x=(s+d)/m,this._y=(l+p)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Gn(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);if(n===0)return this;let r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let n=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,d=t._z,p=t._w;return this._x=n*p+a*o+r*d-s*l,this._y=r*p+a*l+s*o-n*d,this._z=s*p+a*d+n*l-r*o,this._w=a*p-n*o-r*l-s*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let n=this._x,r=this._y,s=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=s,this;let l=1-o*o;if(l<=Number.EPSILON){let m=1-t;return this._w=m*a+t*this._w,this._x=m*n+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}let d=Math.sqrt(l),p=Math.atan2(d,o),f=Math.sin((1-t)*p)/d,g=Math.sin(t*p)/d;return this._w=a*f+this._w*g,this._x=n*f+this._x*g,this._y=r*f+this._y*g,this._z=s*f+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},zt=class i{constructor(e=0,t=0,n=0){i.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(UP.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(UP.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*a,this}applyQuaternion(e){let t=this.x,n=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,d=2*(a*r-o*n),p=2*(o*t-s*r),f=2*(s*n-a*t);return this.x=t+l*d+a*f-o*p,this.y=n+l*p+o*d-s*f,this.z=r+l*f+s*p-a*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Gn(this.x,e.x,t.x),this.y=Gn(this.y,e.y,t.y),this.z=Gn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Gn(this.x,e,t),this.y=Gn(this.y,e,t),this.z=Gn(this.z,e,t),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Gn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let n=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-n*l,this.z=n*o-r*a,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return BC.copy(this).projectOnVector(e),this.sub(BC)}reflect(e){return this.sub(BC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let n=this.dot(e)/t;return Math.acos(Gn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){let r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},BC=new zt,UP=new fl,Ic=class{constructor(e=new zt(1/0,1/0,1/0),t=new zt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Ya.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Ya.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=Ya.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let n=e.geometry;if(n!==void 0){let s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Ya):Ya.fromBufferAttribute(s,a),Ya.applyMatrix4(e.matrixWorld),this.expandByPoint(Ya);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),mv.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),mv.copy(n.boundingBox)),mv.applyMatrix4(e.matrixWorld),this.union(mv)}let r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ya),Ya.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Cm),gv.subVectors(this.max,Cm),Dh.subVectors(e.a,Cm),Ph.subVectors(e.b,Cm),Rh.subVectors(e.c,Cm),yc.subVectors(Ph,Dh),Sc.subVectors(Rh,Ph),Pd.subVectors(Dh,Rh);let t=[0,-yc.z,yc.y,0,-Sc.z,Sc.y,0,-Pd.z,Pd.y,yc.z,0,-yc.x,Sc.z,0,-Sc.x,Pd.z,0,-Pd.x,-yc.y,yc.x,0,-Sc.y,Sc.x,0,-Pd.y,Pd.x,0];return!VC(t,Dh,Ph,Rh,gv)||(t=[1,0,0,0,1,0,0,0,1],!VC(t,Dh,Ph,Rh,gv))?!1:(_v.crossVectors(yc,Sc),t=[_v.x,_v.y,_v.z],VC(t,Dh,Ph,Rh,gv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ya).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ya).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(al[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),al[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),al[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),al[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),al[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),al[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),al[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),al[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(al),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},al=[new zt,new zt,new zt,new zt,new zt,new zt,new zt,new zt],Ya=new zt,mv=new Ic,Dh=new zt,Ph=new zt,Rh=new zt,yc=new zt,Sc=new zt,Pd=new zt,Cm=new zt,gv=new zt,_v=new zt,Rd=new zt;function VC(i,e,t,n,r){for(let s=0,a=i.length-3;s<=a;s+=3){Rd.fromArray(i,s);let o=r.x*Math.abs(Rd.x)+r.y*Math.abs(Rd.y)+r.z*Math.abs(Rd.z),l=e.dot(Rd),d=t.dot(Rd),p=n.dot(Rd);if(Math.max(-Math.max(l,d,p),Math.min(l,d,p))>o)return!1}return!0}var mZ=new Ic,Mm=new zt,UC=new zt,Hh=class{constructor(e=new zt,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;t!==void 0?n.copy(t):mZ.setFromPoints(e).getCenter(n);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Mm.subVectors(e,this.center);let t=Mm.lengthSq();if(t>this.radius*this.radius){let n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(Mm,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(UC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Mm.copy(e.center).add(UC)),this.expandByPoint(Mm.copy(e.center).sub(UC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},ol=new zt,zC=new zt,vv=new zt,wc=new zt,jC=new zt,xv=new zt,HC=new zt,Hv=class{constructor(e=new zt,t=new zt(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ol)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=ol.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ol.copy(this.origin).addScaledVector(this.direction,t),ol.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){zC.copy(e).add(t).multiplyScalar(.5),vv.copy(t).sub(e).normalize(),wc.copy(this.origin).sub(zC);let s=e.distanceTo(t)*.5,a=-this.direction.dot(vv),o=wc.dot(this.direction),l=-wc.dot(vv),d=wc.lengthSq(),p=Math.abs(1-a*a),f,g,m,x;if(p>0)if(f=a*l-o,g=a*o-l,x=s*p,f>=0)if(g>=-x)if(g<=x){let y=1/p;f*=y,g*=y,m=f*(f+a*g+2*o)+g*(a*f+g+2*l)+d}else g=s,f=Math.max(0,-(a*g+o)),m=-f*f+g*(g+2*l)+d;else g=-s,f=Math.max(0,-(a*g+o)),m=-f*f+g*(g+2*l)+d;else g<=-x?(f=Math.max(0,-(-a*s+o)),g=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+g*(g+2*l)+d):g<=x?(f=0,g=Math.min(Math.max(-s,-l),s),m=g*(g+2*l)+d):(f=Math.max(0,-(a*s+o)),g=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+g*(g+2*l)+d);else g=a>0?-s:s,f=Math.max(0,-(a*g+o)),m=-f*f+g*(g+2*l)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(zC).addScaledVector(vv,g),m}intersectSphere(e,t){ol.subVectors(e.center,this.origin);let n=ol.dot(this.direction),r=ol.dot(ol)-n*n,s=e.radius*e.radius;if(r>s)return null;let a=Math.sqrt(s-r),o=n-a,l=n+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,a,o,l,d=1/this.direction.x,p=1/this.direction.y,f=1/this.direction.z,g=this.origin;return d>=0?(n=(e.min.x-g.x)*d,r=(e.max.x-g.x)*d):(n=(e.max.x-g.x)*d,r=(e.min.x-g.x)*d),p>=0?(s=(e.min.y-g.y)*p,a=(e.max.y-g.y)*p):(s=(e.max.y-g.y)*p,a=(e.min.y-g.y)*p),n>a||s>r||((s>n||isNaN(n))&&(n=s),(a<r||isNaN(r))&&(r=a),f>=0?(o=(e.min.z-g.z)*f,l=(e.max.z-g.z)*f):(o=(e.max.z-g.z)*f,l=(e.min.z-g.z)*f),n>l||o>r)||((o>n||n!==n)&&(n=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,ol)!==null}intersectTriangle(e,t,n,r,s){jC.subVectors(t,e),xv.subVectors(n,e),HC.crossVectors(jC,xv);let a=this.direction.dot(HC),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;wc.subVectors(this.origin,e);let l=o*this.direction.dot(xv.crossVectors(wc,xv));if(l<0)return null;let d=o*this.direction.dot(jC.cross(wc));if(d<0||l+d>a)return null;let p=-o*wc.dot(HC);return p<0?null:this.at(p/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Xi=class i{constructor(e,t,n,r,s,a,o,l,d,p,f,g,m,x,y,S){i.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,o,l,d,p,f,g,m,x,y,S)}set(e,t,n,r,s,a,o,l,d,p,f,g,m,x,y,S){let b=this.elements;return b[0]=e,b[4]=t,b[8]=n,b[12]=r,b[1]=s,b[5]=a,b[9]=o,b[13]=l,b[2]=d,b[6]=p,b[10]=f,b[14]=g,b[3]=m,b[7]=x,b[11]=y,b[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new i().fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,n=e.elements,r=1/Lh.setFromMatrixColumn(e,0).length(),s=1/Lh.setFromMatrixColumn(e,1).length(),a=1/Lh.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,n=e.x,r=e.y,s=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(r),d=Math.sin(r),p=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){let g=a*p,m=a*f,x=o*p,y=o*f;t[0]=l*p,t[4]=-l*f,t[8]=d,t[1]=m+x*d,t[5]=g-y*d,t[9]=-o*l,t[2]=y-g*d,t[6]=x+m*d,t[10]=a*l}else if(e.order==="YXZ"){let g=l*p,m=l*f,x=d*p,y=d*f;t[0]=g+y*o,t[4]=x*o-m,t[8]=a*d,t[1]=a*f,t[5]=a*p,t[9]=-o,t[2]=m*o-x,t[6]=y+g*o,t[10]=a*l}else if(e.order==="ZXY"){let g=l*p,m=l*f,x=d*p,y=d*f;t[0]=g-y*o,t[4]=-a*f,t[8]=x+m*o,t[1]=m+x*o,t[5]=a*p,t[9]=y-g*o,t[2]=-a*d,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){let g=a*p,m=a*f,x=o*p,y=o*f;t[0]=l*p,t[4]=x*d-m,t[8]=g*d+y,t[1]=l*f,t[5]=y*d+g,t[9]=m*d-x,t[2]=-d,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){let g=a*l,m=a*d,x=o*l,y=o*d;t[0]=l*p,t[4]=y-g*f,t[8]=x*f+m,t[1]=f,t[5]=a*p,t[9]=-o*p,t[2]=-d*p,t[6]=m*f+x,t[10]=g-y*f}else if(e.order==="XZY"){let g=a*l,m=a*d,x=o*l,y=o*d;t[0]=l*p,t[4]=-f,t[8]=d*p,t[1]=g*f+y,t[5]=a*p,t[9]=m*f-x,t[2]=x*f-m,t[6]=o*p,t[10]=y*f+g}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(gZ,e,_Z)}lookAt(e,t,n){let r=this.elements;return Js.subVectors(e,t),Js.lengthSq()===0&&(Js.z=1),Js.normalize(),Cc.crossVectors(n,Js),Cc.lengthSq()===0&&(Math.abs(n.z)===1?Js.x+=1e-4:Js.z+=1e-4,Js.normalize(),Cc.crossVectors(n,Js)),Cc.normalize(),bv.crossVectors(Js,Cc),r[0]=Cc.x,r[4]=bv.x,r[8]=Js.x,r[1]=Cc.y,r[5]=bv.y,r[9]=Js.y,r[2]=Cc.z,r[6]=bv.z,r[10]=Js.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[4],l=n[8],d=n[12],p=n[1],f=n[5],g=n[9],m=n[13],x=n[2],y=n[6],S=n[10],b=n[14],M=n[3],T=n[7],k=n[11],L=n[15],U=r[0],N=r[4],F=r[8],O=r[12],B=r[1],P=r[5],V=r[9],$=r[13],K=r[2],ct=r[6],ot=r[10],st=r[14],Q=r[3],xt=r[7],Mt=r[11],qt=r[15];return s[0]=a*U+o*B+l*K+d*Q,s[4]=a*N+o*P+l*ct+d*xt,s[8]=a*F+o*V+l*ot+d*Mt,s[12]=a*O+o*$+l*st+d*qt,s[1]=p*U+f*B+g*K+m*Q,s[5]=p*N+f*P+g*ct+m*xt,s[9]=p*F+f*V+g*ot+m*Mt,s[13]=p*O+f*$+g*st+m*qt,s[2]=x*U+y*B+S*K+b*Q,s[6]=x*N+y*P+S*ct+b*xt,s[10]=x*F+y*V+S*ot+b*Mt,s[14]=x*O+y*$+S*st+b*qt,s[3]=M*U+T*B+k*K+L*Q,s[7]=M*N+T*P+k*ct+L*xt,s[11]=M*F+T*V+k*ot+L*Mt,s[15]=M*O+T*$+k*st+L*qt,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],d=e[13],p=e[2],f=e[6],g=e[10],m=e[14],x=e[3],y=e[7],S=e[11],b=e[15];return x*(+s*l*f-r*d*f-s*o*g+n*d*g+r*o*m-n*l*m)+y*(+t*l*m-t*d*g+s*a*g-r*a*m+r*d*p-s*l*p)+S*(+t*d*f-t*o*m-s*a*f+n*a*m+s*o*p-n*d*p)+b*(-r*o*p-t*l*f+t*o*g+r*a*f-n*a*g+n*l*p)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],d=e[7],p=e[8],f=e[9],g=e[10],m=e[11],x=e[12],y=e[13],S=e[14],b=e[15],M=f*S*d-y*g*d+y*l*m-o*S*m-f*l*b+o*g*b,T=x*g*d-p*S*d-x*l*m+a*S*m+p*l*b-a*g*b,k=p*y*d-x*f*d+x*o*m-a*y*m-p*o*b+a*f*b,L=x*f*l-p*y*l-x*o*g+a*y*g+p*o*S-a*f*S,U=t*M+n*T+r*k+s*L;if(U===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let N=1/U;return e[0]=M*N,e[1]=(y*g*s-f*S*s-y*r*m+n*S*m+f*r*b-n*g*b)*N,e[2]=(o*S*s-y*l*s+y*r*d-n*S*d-o*r*b+n*l*b)*N,e[3]=(f*l*s-o*g*s-f*r*d+n*g*d+o*r*m-n*l*m)*N,e[4]=T*N,e[5]=(p*S*s-x*g*s+x*r*m-t*S*m-p*r*b+t*g*b)*N,e[6]=(x*l*s-a*S*s-x*r*d+t*S*d+a*r*b-t*l*b)*N,e[7]=(a*g*s-p*l*s+p*r*d-t*g*d-a*r*m+t*l*m)*N,e[8]=k*N,e[9]=(x*f*s-p*y*s-x*n*m+t*y*m+p*n*b-t*f*b)*N,e[10]=(a*y*s-x*o*s+x*n*d-t*y*d-a*n*b+t*o*b)*N,e[11]=(p*o*s-a*f*s-p*n*d+t*f*d+a*n*m-t*o*m)*N,e[12]=L*N,e[13]=(p*y*r-x*f*r+x*n*g-t*y*g-p*n*S+t*f*S)*N,e[14]=(x*o*r-a*y*r-x*n*l+t*y*l+a*n*S-t*o*S)*N,e[15]=(a*f*r-p*o*r+p*n*l-t*f*l-a*n*g+t*o*g)*N,this}scale(e){let t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let n=Math.cos(t),r=Math.sin(t),s=1-n,a=e.x,o=e.y,l=e.z,d=s*a,p=s*o;return this.set(d*a+n,d*o-r*l,d*l+r*o,0,d*o+r*l,p*o+n,p*l-r*a,0,d*l-r*o,p*l+r*a,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,a){return this.set(1,n,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){let r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,d=s+s,p=a+a,f=o+o,g=s*d,m=s*p,x=s*f,y=a*p,S=a*f,b=o*f,M=l*d,T=l*p,k=l*f,L=n.x,U=n.y,N=n.z;return r[0]=(1-(y+b))*L,r[1]=(m+k)*L,r[2]=(x-T)*L,r[3]=0,r[4]=(m-k)*U,r[5]=(1-(g+b))*U,r[6]=(S+M)*U,r[7]=0,r[8]=(x+T)*N,r[9]=(S-M)*N,r[10]=(1-(g+y))*N,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){let r=this.elements,s=Lh.set(r[0],r[1],r[2]).length(),a=Lh.set(r[4],r[5],r[6]).length(),o=Lh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],$a.copy(this);let d=1/s,p=1/a,f=1/o;return $a.elements[0]*=d,$a.elements[1]*=d,$a.elements[2]*=d,$a.elements[4]*=p,$a.elements[5]*=p,$a.elements[6]*=p,$a.elements[8]*=f,$a.elements[9]*=f,$a.elements[10]*=f,t.setFromRotationMatrix($a),n.x=s,n.y=a,n.z=o,this}makePerspective(e,t,n,r,s,a,o=wo){let l=this.elements,d=2*s/(t-e),p=2*s/(n-r),f=(t+e)/(t-e),g=(n+r)/(n-r),m,x;if(o===wo)m=-(a+s)/(a-s),x=-2*a*s/(a-s);else if(o===Dm)m=-a/(a-s),x=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=d,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=p,l[9]=g,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=x,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,s,a,o=wo){let l=this.elements,d=1/(t-e),p=1/(n-r),f=1/(a-s),g=(t+e)*d,m=(n+r)*p,x,y;if(o===wo)x=(a+s)*f,y=-2*f;else if(o===Dm)x=s*f,y=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*d,l[4]=0,l[8]=0,l[12]=-g,l[1]=0,l[5]=2*p,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=y,l[14]=-x,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},Lh=new zt,$a=new Xi,gZ=new zt(0,0,0),_Z=new zt(1,1,1),Cc=new zt,bv=new zt,Js=new zt,zP=new Xi,jP=new fl,Dc=(()=>{class i{constructor(t=0,n=0,r=0,s=i.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,r,s=this._order){return this._x=t,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,r=!0){let s=t.elements,a=s[0],o=s[4],l=s[8],d=s[1],p=s[5],f=s[9],g=s[2],m=s[6],x=s[10];switch(n){case"XYZ":this._y=Math.asin(Gn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,x),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(m,p),this._z=0);break;case"YXZ":this._x=Math.asin(-Gn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,x),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-g,a),this._z=0);break;case"ZXY":this._x=Math.asin(Gn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-g,x),this._z=Math.atan2(-o,p)):(this._y=0,this._z=Math.atan2(d,a));break;case"ZYX":this._y=Math.asin(-Gn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(m,x),this._z=Math.atan2(d,a)):(this._x=0,this._z=Math.atan2(-o,p));break;case"YZX":this._z=Math.asin(Gn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-f,p),this._y=Math.atan2(-g,a)):(this._x=0,this._y=Math.atan2(l,x));break;case"XZY":this._z=Math.asin(-Gn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,p),this._y=Math.atan2(l,a)):(this._x=Math.atan2(-f,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,n,r){return zP.makeRotationFromQuaternion(t),this.setFromRotationMatrix(zP,n,r)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return jP.setFromEuler(this),this.setFromQuaternion(jP,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return i.DEFAULT_ORDER="XYZ",i})(),Om=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},vZ=0,HP=new zt,Oh=new fl,ll=new Xi,yv=new zt,Em=new zt,xZ=new zt,bZ=new fl,WP=new zt(1,0,0),GP=new zt(0,1,0),qP=new zt(0,0,1),XP={type:"added"},yZ={type:"removed"},Nh={type:"childadded",child:null},WC={type:"childremoved",child:null},Vc=(()=>{class i extends pl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:vZ++}),this.uuid=t0(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();let t=new zt,n=new Dc,r=new fl,s=new zt(1,1,1);function a(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(a),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Xi},normalMatrix:{value:new Mn}}),this.matrix=new Xi,this.matrixWorld=new Xi,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Om,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return Oh.setFromAxisAngle(t,n),this.quaternion.multiply(Oh),this}rotateOnWorldAxis(t,n){return Oh.setFromAxisAngle(t,n),this.quaternion.premultiply(Oh),this}rotateX(t){return this.rotateOnAxis(WP,t)}rotateY(t){return this.rotateOnAxis(GP,t)}rotateZ(t){return this.rotateOnAxis(qP,t)}translateOnAxis(t,n){return HP.copy(t).applyQuaternion(this.quaternion),this.position.add(HP.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(WP,t)}translateY(t){return this.translateOnAxis(GP,t)}translateZ(t){return this.translateOnAxis(qP,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(ll.copy(this.matrixWorld).invert())}lookAt(t,n,r){t.isVector3?yv.copy(t):yv.set(t,n,r);let s=this.parent;this.updateWorldMatrix(!0,!1),Em.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ll.lookAt(Em,yv,this.up):ll.lookAt(yv,Em,this.up),this.quaternion.setFromRotationMatrix(ll),s&&(ll.extractRotation(s.matrixWorld),Oh.setFromRotationMatrix(ll),this.quaternion.premultiply(Oh.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(XP),Nh.child=t,this.dispatchEvent(Nh),Nh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let n=this.children.indexOf(t);return n!==-1&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(yZ),WC.child=t,this.dispatchEvent(WC),WC.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),ll.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),ll.multiply(t.parent.matrixWorld)),t.applyMatrix4(ll),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(XP),Nh.child=t,this.dispatchEvent(Nh),Nh.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let r=0,s=this.children.length;r<s;r++){let o=this.children[r].getObjectByProperty(t,n);if(o!==void 0)return o}}getObjectsByProperty(t,n,r=[]){this[t]===n&&r.push(this);let s=this.children;for(let a=0,o=s.length;a<o;a++)s[a].getObjectsByProperty(t,n,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Em,t,xZ),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Em,bZ,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);let n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(t)}traverseAncestors(t){let n=this.parent;n!==null&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].updateMatrixWorld(t)}updateWorldMatrix(t,n){let r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){let s=this.children;for(let a=0,o=s.length;a<o;a++)s[a].updateWorldMatrix(!1,!0)}}toJSON(t){let n=t===void 0||typeof t=="string",r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function a(l,d){return l[d.uuid]===void 0&&(l[d.uuid]=d.toJSON(t)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=a(t.geometries,this.geometry);let l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){let d=l.shapes;if(Array.isArray(d))for(let p=0,f=d.length;p<f;p++){let g=d[p];a(t.shapes,g)}else a(t.shapes,d)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let l=[];for(let d=0,p=this.material.length;d<p;d++)l.push(a(t.materials,this.material[d]));s.material=l}else s.material=a(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++){let d=this.animations[l];s.animations.push(a(t.animations,d))}}if(n){let l=o(t.geometries),d=o(t.materials),p=o(t.textures),f=o(t.images),g=o(t.shapes),m=o(t.skeletons),x=o(t.animations),y=o(t.nodes);l.length>0&&(r.geometries=l),d.length>0&&(r.materials=d),p.length>0&&(r.textures=p),f.length>0&&(r.images=f),g.length>0&&(r.shapes=g),m.length>0&&(r.skeletons=m),x.length>0&&(r.animations=x),y.length>0&&(r.nodes=y)}return r.object=s,r;function o(l){let d=[];for(let p in l){let f=l[p];delete f.metadata,d.push(f)}return d}}clone(t){return new this.constructor().copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),n===!0)for(let r=0;r<t.children.length;r++){let s=t.children[r];this.add(s.clone())}return this}}return i.DEFAULT_UP=new zt(0,1,0),i.DEFAULT_MATRIX_AUTO_UPDATE=!0,i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,i})(),Ka=new zt,cl=new zt,GC=new zt,dl=new zt,Fh=new zt,Bh=new zt,YP=new zt,qC=new zt,XC=new zt,YC=new zt,$C=new gi,KC=new gi,ZC=new gi,Ac=class i{constructor(e=new zt,t=new zt,n=new zt){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Ka.subVectors(e,t),r.cross(Ka);let s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){Ka.subVectors(r,t),cl.subVectors(n,t),GC.subVectors(e,t);let a=Ka.dot(Ka),o=Ka.dot(cl),l=Ka.dot(GC),d=cl.dot(cl),p=cl.dot(GC),f=a*d-o*o;if(f===0)return s.set(0,0,0),null;let g=1/f,m=(d*l-o*p)*g,x=(a*p-o*l)*g;return s.set(1-m-x,x,m)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,dl)===null?!1:dl.x>=0&&dl.y>=0&&dl.x+dl.y<=1}static getInterpolation(e,t,n,r,s,a,o,l){return this.getBarycoord(e,t,n,r,dl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,dl.x),l.addScaledVector(a,dl.y),l.addScaledVector(o,dl.z),l)}static getInterpolatedAttribute(e,t,n,r,s,a){return $C.setScalar(0),KC.setScalar(0),ZC.setScalar(0),$C.fromBufferAttribute(e,t),KC.fromBufferAttribute(e,n),ZC.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector($C,s.x),a.addScaledVector(KC,s.y),a.addScaledVector(ZC,s.z),a}static isFrontFacing(e,t,n,r){return Ka.subVectors(n,t),cl.subVectors(e,t),Ka.cross(cl).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ka.subVectors(this.c,this.b),cl.subVectors(this.a,this.b),Ka.cross(cl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return i.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return i.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return i.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return i.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return i.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let n=this.a,r=this.b,s=this.c,a,o;Fh.subVectors(r,n),Bh.subVectors(s,n),qC.subVectors(e,n);let l=Fh.dot(qC),d=Bh.dot(qC);if(l<=0&&d<=0)return t.copy(n);XC.subVectors(e,r);let p=Fh.dot(XC),f=Bh.dot(XC);if(p>=0&&f<=p)return t.copy(r);let g=l*f-p*d;if(g<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(Fh,a);YC.subVectors(e,s);let m=Fh.dot(YC),x=Bh.dot(YC);if(x>=0&&m<=x)return t.copy(s);let y=m*d-l*x;if(y<=0&&d>=0&&x<=0)return o=d/(d-x),t.copy(n).addScaledVector(Bh,o);let S=p*x-m*f;if(S<=0&&f-p>=0&&m-x>=0)return YP.subVectors(s,r),o=(f-p)/(f-p+(m-x)),t.copy(r).addScaledVector(YP,o);let b=1/(S+y+g);return a=y*b,o=g*b,t.copy(n).addScaledVector(Fh,a).addScaledVector(Bh,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},Y4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Mc={h:0,s:0,l:0},Sv={h:0,s:0,l:0};function JC(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}var $n=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ta){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Zn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Zn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Zn.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Zn.workingColorSpace){if(e=uZ(e,1),t=Gn(t,0,1),n=Gn(n,0,1),t===0)this.r=this.g=this.b=n;else{let s=n<=.5?n*(1+t):n+t-n*t,a=2*n-s;this.r=JC(a,s,e+1/3),this.g=JC(a,s,e),this.b=JC(a,s,e-1/3)}return Zn.toWorkingColorSpace(this,r),this}setStyle(e,t=ta){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s,a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ta){let n=Y4[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ul(e.r),this.g=ul(e.g),this.b=ul(e.b),this}copyLinearToSRGB(e){return this.r=jh(e.r),this.g=jh(e.g),this.b=jh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ta){return Zn.fromWorkingColorSpace(cs.copy(this),e),Math.round(Gn(cs.r*255,0,255))*65536+Math.round(Gn(cs.g*255,0,255))*256+Math.round(Gn(cs.b*255,0,255))}getHexString(e=ta){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Zn.workingColorSpace){Zn.fromWorkingColorSpace(cs.copy(this),t);let n=cs.r,r=cs.g,s=cs.b,a=Math.max(n,r,s),o=Math.min(n,r,s),l,d,p=(o+a)/2;if(o===a)l=0,d=0;else{let f=a-o;switch(d=p<=.5?f/(a+o):f/(2-a-o),a){case n:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-n)/f+2;break;case s:l=(n-r)/f+4;break}l/=6}return e.h=l,e.s=d,e.l=p,e}getRGB(e,t=Zn.workingColorSpace){return Zn.fromWorkingColorSpace(cs.copy(this),t),e.r=cs.r,e.g=cs.g,e.b=cs.b,e}getStyle(e=ta){Zn.fromWorkingColorSpace(cs.copy(this),e);let t=cs.r,n=cs.g,r=cs.b;return e!==ta?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(Mc),this.setHSL(Mc.h+e,Mc.s+t,Mc.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Mc),e.getHSL(Sv);let n=OC(Mc.h,Sv.h,t),r=OC(Mc.s,Sv.s,t),s=OC(Mc.l,Sv.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},cs=new $n;$n.NAMES=Y4;var SZ=0,Pc=class extends pl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:SZ++}),this.uuid=t0(),this.name="",this.type="Material",this.blending=Bd,this.side=hl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Lv,this.blendDst=Ov,this.blendEquation=kc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new $n(0,0,0),this.blendAlpha=0,this.depthFunc=Vd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=lM,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Nd,this.stencilZFail=Nd,this.stencilZPass=Nd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Bd&&(n.blending=this.blending),this.side!==hl&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==Lv&&(n.blendSrc=this.blendSrc),this.blendDst!==Ov&&(n.blendDst=this.blendDst),this.blendEquation!==kc&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Vd&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==lM&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Nd&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Nd&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Nd&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){let a=[];for(let o in s){let l=s[o];delete l.metadata,a.push(l)}return a}if(t){let s=r(e.textures),a=r(e.images);s.length>0&&(n.textures=s),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(t!==null){let r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}},jd=class extends Pc{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new $n(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Dc,this.combine=vM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var wr=new zt,wv=new Qn,ea=class{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=cM,this.updateRanges=[],this.gpuType=To,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)wv.fromBufferAttribute(this,t),wv.applyMatrix3(e),this.setXY(t,wv.x,wv.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)wr.fromBufferAttribute(this,t),wr.applyMatrix3(e),this.setXYZ(t,wr.x,wr.y,wr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)wr.fromBufferAttribute(this,t),wr.applyMatrix4(e),this.setXYZ(t,wr.x,wr.y,wr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)wr.fromBufferAttribute(this,t),wr.applyNormalMatrix(e),this.setXYZ(t,wr.x,wr.y,wr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)wr.fromBufferAttribute(this,t),wr.transformDirection(e),this.setXYZ(t,wr.x,wr.y,wr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=wm(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Ns(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=wm(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ns(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=wm(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ns(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=wm(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ns(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=wm(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ns(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Ns(t,this.array),n=Ns(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Ns(t,this.array),n=Ns(n,this.array),r=Ns(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Ns(t,this.array),n=Ns(n,this.array),r=Ns(r,this.array),s=Ns(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==cM&&(e.usage=this.usage),e}};var Nm=class extends ea{constructor(e,t,n){super(new Uint16Array(e),t,n)}};var Fm=class extends ea{constructor(e,t,n){super(new Uint32Array(e),t,n)}};var na=class extends ea{constructor(e,t,n){super(new Float32Array(e),t,n)}},wZ=0,Sa=new Xi,QC=new Vc,Vh=new zt,Qs=new Ic,Am=new Ic,Ur=new zt,ml=class i extends pl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:wZ++}),this.uuid=t0(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(PM(e)?Fm:Nm)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(n!==void 0){let s=new Mn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Sa.makeRotationFromQuaternion(e),this.applyMatrix4(Sa),this}rotateX(e){return Sa.makeRotationX(e),this.applyMatrix4(Sa),this}rotateY(e){return Sa.makeRotationY(e),this.applyMatrix4(Sa),this}rotateZ(e){return Sa.makeRotationZ(e),this.applyMatrix4(Sa),this}translate(e,t,n){return Sa.makeTranslation(e,t,n),this.applyMatrix4(Sa),this}scale(e,t,n){return Sa.makeScale(e,t,n),this.applyMatrix4(Sa),this}lookAt(e){return QC.lookAt(e),QC.updateMatrix(),this.applyMatrix4(QC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vh).negate(),this.translate(Vh.x,Vh.y,Vh.z),this}setFromPoints(e){let t=this.getAttribute("position");if(t===void 0){let n=[];for(let r=0,s=e.length;r<s;r++){let a=e[r];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new na(n,3))}else{let n=Math.min(e.length,t.count);for(let r=0;r<n;r++){let s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ic);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new zt(-1/0,-1/0,-1/0),new zt(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){let s=t[n];Qs.setFromBufferAttribute(s),this.morphTargetsRelative?(Ur.addVectors(this.boundingBox.min,Qs.min),this.boundingBox.expandByPoint(Ur),Ur.addVectors(this.boundingBox.max,Qs.max),this.boundingBox.expandByPoint(Ur)):(this.boundingBox.expandByPoint(Qs.min),this.boundingBox.expandByPoint(Qs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Hh);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new zt,1/0);return}if(e){let n=this.boundingSphere.center;if(Qs.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){let o=t[s];Am.setFromBufferAttribute(o),this.morphTargetsRelative?(Ur.addVectors(Qs.min,Am.min),Qs.expandByPoint(Ur),Ur.addVectors(Qs.max,Am.max),Qs.expandByPoint(Ur)):(Qs.expandByPoint(Am.min),Qs.expandByPoint(Am.max))}Qs.getCenter(n);let r=0;for(let s=0,a=e.count;s<a;s++)Ur.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Ur));if(t)for(let s=0,a=t.length;s<a;s++){let o=t[s],l=this.morphTargetsRelative;for(let d=0,p=o.count;d<p;d++)Ur.fromBufferAttribute(o,d),l&&(Vh.fromBufferAttribute(e,d),Ur.add(Vh)),r=Math.max(r,n.distanceToSquared(Ur))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ea(new Float32Array(4*n.count),4));let a=this.getAttribute("tangent"),o=[],l=[];for(let F=0;F<n.count;F++)o[F]=new zt,l[F]=new zt;let d=new zt,p=new zt,f=new zt,g=new Qn,m=new Qn,x=new Qn,y=new zt,S=new zt;function b(F,O,B){d.fromBufferAttribute(n,F),p.fromBufferAttribute(n,O),f.fromBufferAttribute(n,B),g.fromBufferAttribute(s,F),m.fromBufferAttribute(s,O),x.fromBufferAttribute(s,B),p.sub(d),f.sub(d),m.sub(g),x.sub(g);let P=1/(m.x*x.y-x.x*m.y);isFinite(P)&&(y.copy(p).multiplyScalar(x.y).addScaledVector(f,-m.y).multiplyScalar(P),S.copy(f).multiplyScalar(m.x).addScaledVector(p,-x.x).multiplyScalar(P),o[F].add(y),o[O].add(y),o[B].add(y),l[F].add(S),l[O].add(S),l[B].add(S))}let M=this.groups;M.length===0&&(M=[{start:0,count:e.count}]);for(let F=0,O=M.length;F<O;++F){let B=M[F],P=B.start,V=B.count;for(let $=P,K=P+V;$<K;$+=3)b(e.getX($+0),e.getX($+1),e.getX($+2))}let T=new zt,k=new zt,L=new zt,U=new zt;function N(F){L.fromBufferAttribute(r,F),U.copy(L);let O=o[F];T.copy(O),T.sub(L.multiplyScalar(L.dot(O))).normalize(),k.crossVectors(U,O);let P=k.dot(l[F])<0?-1:1;a.setXYZW(F,T.x,T.y,T.z,P)}for(let F=0,O=M.length;F<O;++F){let B=M[F],P=B.start,V=B.count;for(let $=P,K=P+V;$<K;$+=3)N(e.getX($+0)),N(e.getX($+1)),N(e.getX($+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new ea(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let g=0,m=n.count;g<m;g++)n.setXYZ(g,0,0,0);let r=new zt,s=new zt,a=new zt,o=new zt,l=new zt,d=new zt,p=new zt,f=new zt;if(e)for(let g=0,m=e.count;g<m;g+=3){let x=e.getX(g+0),y=e.getX(g+1),S=e.getX(g+2);r.fromBufferAttribute(t,x),s.fromBufferAttribute(t,y),a.fromBufferAttribute(t,S),p.subVectors(a,s),f.subVectors(r,s),p.cross(f),o.fromBufferAttribute(n,x),l.fromBufferAttribute(n,y),d.fromBufferAttribute(n,S),o.add(p),l.add(p),d.add(p),n.setXYZ(x,o.x,o.y,o.z),n.setXYZ(y,l.x,l.y,l.z),n.setXYZ(S,d.x,d.y,d.z)}else for(let g=0,m=t.count;g<m;g+=3)r.fromBufferAttribute(t,g+0),s.fromBufferAttribute(t,g+1),a.fromBufferAttribute(t,g+2),p.subVectors(a,s),f.subVectors(r,s),p.cross(f),n.setXYZ(g+0,p.x,p.y,p.z),n.setXYZ(g+1,p.x,p.y,p.z),n.setXYZ(g+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ur.fromBufferAttribute(e,t),Ur.normalize(),e.setXYZ(t,Ur.x,Ur.y,Ur.z)}toNonIndexed(){function e(o,l){let d=o.array,p=o.itemSize,f=o.normalized,g=new d.constructor(l.length*p),m=0,x=0;for(let y=0,S=l.length;y<S;y++){o.isInterleavedBufferAttribute?m=l[y]*o.data.stride+o.offset:m=l[y]*p;for(let b=0;b<p;b++)g[x++]=d[m++]}return new ea(g,p,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new i,n=this.index.array,r=this.attributes;for(let o in r){let l=r[o],d=e(l,n);t.setAttribute(o,d)}let s=this.morphAttributes;for(let o in s){let l=[],d=s[o];for(let p=0,f=d.length;p<f;p++){let g=d[p],m=e(g,n);l.push(m)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let o=0,l=a.length;o<l;o++){let d=a[o];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let d in l)l[d]!==void 0&&(e[d]=l[d]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let l in n){let d=n[l];e.data.attributes[l]=d.toJSON(e.data)}let r={},s=!1;for(let l in this.morphAttributes){let d=this.morphAttributes[l],p=[];for(let f=0,g=d.length;f<g;f++){let m=d[f];p.push(m.toJSON(e.data))}p.length>0&&(r[l]=p,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let n=e.index;n!==null&&this.setIndex(n.clone(t));let r=e.attributes;for(let d in r){let p=r[d];this.setAttribute(d,p.clone(t))}let s=e.morphAttributes;for(let d in s){let p=[],f=s[d];for(let g=0,m=f.length;g<m;g++)p.push(f[g].clone(t));this.morphAttributes[d]=p}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let d=0,p=a.length;d<p;d++){let f=a[d];this.addGroup(f.start,f.count,f.materialIndex)}let o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());let l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},$P=new Xi,Ld=new Hv,Cv=new Hh,KP=new zt,Mv=new zt,Ev=new zt,Av=new zt,tM=new zt,Tv=new zt,ZP=new zt,kv=new zt,ds=class extends Vc{constructor(e=new ml,t=new jd){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){let r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){let o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){let n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);let o=this.morphTargetInfluences;if(s&&o){Tv.set(0,0,0);for(let l=0,d=s.length;l<d;l++){let p=o[l],f=s[l];p!==0&&(tM.fromBufferAttribute(f,e),a?Tv.addScaledVector(tM,p):Tv.addScaledVector(tM.sub(t),p))}t.add(Tv)}return t}raycast(e,t){let n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Cv.copy(n.boundingSphere),Cv.applyMatrix4(s),Ld.copy(e.ray).recast(e.near),!(Cv.containsPoint(Ld.origin)===!1&&(Ld.intersectSphere(Cv,KP)===null||Ld.origin.distanceToSquared(KP)>(e.far-e.near)**2))&&($P.copy(s).invert(),Ld.copy(e.ray).applyMatrix4($P),!(n.boundingBox!==null&&Ld.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Ld)))}_computeIntersections(e,t,n){let r,s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,d=s.attributes.uv,p=s.attributes.uv1,f=s.attributes.normal,g=s.groups,m=s.drawRange;if(o!==null)if(Array.isArray(a))for(let x=0,y=g.length;x<y;x++){let S=g[x],b=a[S.materialIndex],M=Math.max(S.start,m.start),T=Math.min(o.count,Math.min(S.start+S.count,m.start+m.count));for(let k=M,L=T;k<L;k+=3){let U=o.getX(k),N=o.getX(k+1),F=o.getX(k+2);r=Iv(this,b,e,n,d,p,f,U,N,F),r&&(r.faceIndex=Math.floor(k/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{let x=Math.max(0,m.start),y=Math.min(o.count,m.start+m.count);for(let S=x,b=y;S<b;S+=3){let M=o.getX(S),T=o.getX(S+1),k=o.getX(S+2);r=Iv(this,a,e,n,d,p,f,M,T,k),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(a))for(let x=0,y=g.length;x<y;x++){let S=g[x],b=a[S.materialIndex],M=Math.max(S.start,m.start),T=Math.min(l.count,Math.min(S.start+S.count,m.start+m.count));for(let k=M,L=T;k<L;k+=3){let U=k,N=k+1,F=k+2;r=Iv(this,b,e,n,d,p,f,U,N,F),r&&(r.faceIndex=Math.floor(k/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{let x=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);for(let S=x,b=y;S<b;S+=3){let M=S,T=S+1,k=S+2;r=Iv(this,a,e,n,d,p,f,M,T,k),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}};function CZ(i,e,t,n,r,s,a,o){let l;if(e.side===bs?l=n.intersectTriangle(a,s,r,!0,o):l=n.intersectTriangle(r,s,a,e.side===hl,o),l===null)return null;kv.copy(o),kv.applyMatrix4(i.matrixWorld);let d=t.ray.origin.distanceTo(kv);return d<t.near||d>t.far?null:{distance:d,point:kv.clone(),object:i}}function Iv(i,e,t,n,r,s,a,o,l,d){i.getVertexPosition(o,Mv),i.getVertexPosition(l,Ev),i.getVertexPosition(d,Av);let p=CZ(i,e,t,n,Mv,Ev,Av,ZP);if(p){let f=new zt;Ac.getBarycoord(ZP,Mv,Ev,Av,f),r&&(p.uv=Ac.getInterpolatedAttribute(r,o,l,d,f,new Qn)),s&&(p.uv1=Ac.getInterpolatedAttribute(s,o,l,d,f,new Qn)),a&&(p.normal=Ac.getInterpolatedAttribute(a,o,l,d,f,new zt),p.normal.dot(n.direction)>0&&p.normal.multiplyScalar(-1));let g={a:o,b:l,c:d,normal:new zt,materialIndex:0};Ac.getNormal(Mv,Ev,Av,g.normal),p.face=g,p.barycoord=f}return p}var Rc=class i extends ml{constructor(e=1,t=1,n=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:a};let o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);let l=[],d=[],p=[],f=[],g=0,m=0;x("z","y","x",-1,-1,n,t,e,a,s,0),x("z","y","x",1,-1,n,t,-e,a,s,1),x("x","z","y",1,1,e,n,t,r,a,2),x("x","z","y",1,-1,e,n,-t,r,a,3),x("x","y","z",1,-1,e,t,n,r,s,4),x("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new na(d,3)),this.setAttribute("normal",new na(p,3)),this.setAttribute("uv",new na(f,2));function x(y,S,b,M,T,k,L,U,N,F,O){let B=k/N,P=L/F,V=k/2,$=L/2,K=U/2,ct=N+1,ot=F+1,st=0,Q=0,xt=new zt;for(let Mt=0;Mt<ot;Mt++){let qt=Mt*P-$;for(let z=0;z<ct;z++){let it=z*B-V;xt[y]=it*M,xt[S]=qt*T,xt[b]=K,d.push(xt.x,xt.y,xt.z),xt[y]=0,xt[S]=0,xt[b]=U>0?1:-1,p.push(xt.x,xt.y,xt.z),f.push(z/N),f.push(1-Mt/F),st+=1}}for(let Mt=0;Mt<F;Mt++)for(let qt=0;qt<N;qt++){let z=g+qt+ct*Mt,it=g+qt+ct*(Mt+1),Z=g+(qt+1)+ct*(Mt+1),at=g+(qt+1)+ct*Mt;l.push(z,it,at),l.push(it,Z,at),Q+=6}o.addGroup(m,Q,O),m+=Q,g+=st}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Yd(i){let e={};for(let t in i){e[t]={};for(let n in i[t]){let r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function us(i){let e={};for(let t=0;t<i.length;t++){let n=Yd(i[t]);for(let r in n)e[r]=n[r]}return e}function MZ(i){let e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function RM(i){let e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Zn.workingColorSpace}var $4={clone:Yd,merge:us},EZ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,AZ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Ja=class extends Pc{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=EZ,this.fragmentShader=AZ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Yd(e.uniforms),this.uniformsGroups=MZ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let n={};for(let r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}},Bm=class extends Vc{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Xi,this.projectionMatrix=new Xi,this.projectionMatrixInverse=new Xi,this.coordinateSystem=wo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Ec=new zt,JP=new Qn,QP=new Qn,Xr=class extends Bm{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=Vv*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(LC*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Vv*2*Math.atan(Math.tan(LC*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Ec.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ec.x,Ec.y).multiplyScalar(-e/Ec.z),Ec.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Ec.x,Ec.y).multiplyScalar(-e/Ec.z)}getViewSize(e,t){return this.getViewBounds(e,JP,QP),t.subVectors(QP,JP)}setViewOffset(e,t,n,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(LC*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r,a=this.view;if(this.view!==null&&this.view.enabled){let l=a.fullWidth,d=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*n/d,r*=a.width/l,n*=a.height/d}let o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},Uh=-90,zh=1,Wv=class extends Vc{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new Xr(Uh,zh,e,t);r.layers=this.layers,this.add(r);let s=new Xr(Uh,zh,e,t);s.layers=this.layers,this.add(s);let a=new Xr(Uh,zh,e,t);a.layers=this.layers,this.add(a);let o=new Xr(Uh,zh,e,t);o.layers=this.layers,this.add(o);let l=new Xr(Uh,zh,e,t);l.layers=this.layers,this.add(l);let d=new Xr(Uh,zh,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[n,r,s,a,o,l]=t;for(let d of t)this.remove(d);if(e===wo)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Dm)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[s,a,o,l,d,p]=this.children,f=e.getRenderTarget(),g=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;let y=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,a),e.setRenderTarget(n,2,r),e.render(t,o),e.setRenderTarget(n,3,r),e.render(t,l),e.setRenderTarget(n,4,r),e.render(t,d),n.texture.generateMipmaps=y,e.setRenderTarget(n,5,r),e.render(t,p),e.setRenderTarget(f,g,m),e.xr.enabled=x,n.texture.needsPMREMUpdate=!0}},Vm=class extends Bc{constructor(e,t,n,r,s,a,o,l,d,p){e=e!==void 0?e:[],t=t!==void 0?t:Wd,super(e,t,n,r,s,a,o,l,d,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},Gv=class extends Co{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new Vm(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Za}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Rc(5,5,5),s=new Ja({name:"CubemapFromEquirect",uniforms:Yd(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:bs,blending:_l});s.uniforms.tEquirect.value=t;let a=new ds(r,s),o=t.minFilter;return t.minFilter===Nc&&(t.minFilter=Za),new Wv(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){let s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(s)}};var Um=class extends Vc{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Dc,this.environmentIntensity=1,this.environmentRotation=new Dc,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};var eM=new zt,TZ=new zt,kZ=new Mn,So=class{constructor(e=new zt(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let r=eM.subVectors(n,t).cross(TZ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let n=e.delta(eM),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||kZ.getNormalMatrix(e),r=this.coplanarPoint(eM).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Od=new Hh,Dv=new zt,Wh=class{constructor(e=new So,t=new So,n=new So,r=new So,s=new So,a=new So){this.planes=[e,t,n,r,s,a]}set(e,t,n,r,s,a){let o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=wo){let n=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],l=r[3],d=r[4],p=r[5],f=r[6],g=r[7],m=r[8],x=r[9],y=r[10],S=r[11],b=r[12],M=r[13],T=r[14],k=r[15];if(n[0].setComponents(l-s,g-d,S-m,k-b).normalize(),n[1].setComponents(l+s,g+d,S+m,k+b).normalize(),n[2].setComponents(l+a,g+p,S+x,k+M).normalize(),n[3].setComponents(l-a,g-p,S-x,k-M).normalize(),n[4].setComponents(l-o,g-f,S-y,k-T).normalize(),t===wo)n[5].setComponents(l+o,g+f,S+y,k+T).normalize();else if(t===Dm)n[5].setComponents(o,f,y,T).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Od.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Od.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Od)}intersectsSprite(e){return Od.center.set(0,0,0),Od.radius=.7071067811865476,Od.applyMatrix4(e.matrixWorld),this.intersectsSphere(Od)}intersectsSphere(e){let t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let r=t[n];if(Dv.x=r.normal.x>0?e.max.x:e.min.x,Dv.y=r.normal.y>0?e.max.y:e.min.y,Dv.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Dv)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var gl=class extends Vc{constructor(){super(),this.isGroup=!0,this.type="Group"}};var zm=class extends Bc{constructor(e,t,n,r,s,a,o,l,d,p=Fd){if(p!==Fd&&p!==Ud)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&p===Fd&&(n=Fc),n===void 0&&p===Ud&&(n=qd),super(null,r,s,a,o,l,p,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:wa,this.minFilter=l!==void 0?l:wa,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}};var jm=class i extends ml{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};let s=e/2,a=t/2,o=Math.floor(n),l=Math.floor(r),d=o+1,p=l+1,f=e/o,g=t/l,m=[],x=[],y=[],S=[];for(let b=0;b<p;b++){let M=b*g-a;for(let T=0;T<d;T++){let k=T*f-s;x.push(k,-M,0),y.push(0,0,1),S.push(T/o),S.push(1-b/l)}}for(let b=0;b<l;b++)for(let M=0;M<o;M++){let T=M+d*b,k=M+d*(b+1),L=M+1+d*(b+1),U=M+1+d*b;m.push(T,k,U),m.push(k,L,U)}this.setIndex(m),this.setAttribute("position",new na(x,3)),this.setAttribute("normal",new na(y,3)),this.setAttribute("uv",new na(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.width,e.height,e.widthSegments,e.heightSegments)}};var Hm=class i extends ml{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));let l=Math.min(a+o,Math.PI),d=0,p=[],f=new zt,g=new zt,m=[],x=[],y=[],S=[];for(let b=0;b<=n;b++){let M=[],T=b/n,k=0;b===0&&a===0?k=.5/t:b===n&&l===Math.PI&&(k=-.5/t);for(let L=0;L<=t;L++){let U=L/t;f.x=-e*Math.cos(r+U*s)*Math.sin(a+T*o),f.y=e*Math.cos(a+T*o),f.z=e*Math.sin(r+U*s)*Math.sin(a+T*o),x.push(f.x,f.y,f.z),g.copy(f).normalize(),y.push(g.x,g.y,g.z),S.push(U+k,1-T),M.push(d++)}p.push(M)}for(let b=0;b<n;b++)for(let M=0;M<t;M++){let T=p[b][M+1],k=p[b][M],L=p[b+1][M],U=p[b+1][M+1];(b!==0||a>0)&&m.push(T,k,U),(b!==n-1||l<Math.PI)&&m.push(k,L,U)}this.setIndex(m),this.setAttribute("position",new na(x,3)),this.setAttribute("normal",new na(y,3)),this.setAttribute("uv",new na(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}};var Wm=class extends Pc{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new $n(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kM,this.normalScale=new Qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Dc,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};var qv=class extends Pc{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=L4,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Xv=class extends Pc{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function Pv(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function IZ(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}var Hd=class{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,n=this._cachedIndex,r=t[n],s=t[n-1];t:{e:{let a;n:{r:if(!(e<r)){for(let o=n+2;;){if(r===void 0){if(e<s)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(s=r,r=t[++n],e<r)break e}a=t.length;break n}if(!(e>=s)){let o=t[1];e<o&&(n=2,s=o);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break e}a=n,n=0;break n}break t}for(;n<a;){let o=n+a>>>1;e<t[o]?a=o:n=o+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=n[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},Yv=class extends Hd{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:sM,endingEnd:sM}}intervalChanged_(e,t,n){let r=this.parameterPositions,s=e-2,a=e+1,o=r[s],l=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case aM:s=e,o=2*t-n;break;case oM:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=n}if(l===void 0)switch(this.getSettings_().endingEnd){case aM:a=e,l=2*n-t;break;case oM:a=1,l=n+r[1]-r[0];break;default:a=e-1,l=t}let d=(n-t)*.5,p=this.valueSize;this._weightPrev=d/(t-o),this._weightNext=d/(l-n),this._offsetPrev=s*p,this._offsetNext=a*p}interpolate_(e,t,n,r){let s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,d=l-o,p=this._offsetPrev,f=this._offsetNext,g=this._weightPrev,m=this._weightNext,x=(n-t)/(r-t),y=x*x,S=y*x,b=-g*S+2*g*y-g*x,M=(1+g)*S+(-1.5-2*g)*y+(-.5+g)*x+1,T=(-1-m)*S+(1.5+m)*y+.5*x,k=m*S-m*y;for(let L=0;L!==o;++L)s[L]=b*a[p+L]+M*a[d+L]+T*a[l+L]+k*a[f+L];return s}},$v=class extends Hd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,d=l-o,p=(n-t)/(r-t),f=1-p;for(let g=0;g!==o;++g)s[g]=a[d+g]*f+a[l+g]*p;return s}},Kv=class extends Hd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}},Ca=class{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Pv(t,this.TimeBufferType),this.values=Pv(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Pv(e.times,Array),values:Pv(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Kv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new $v(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Yv(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case km:t=this.InterpolantFactoryMethodDiscrete;break;case Bv:t=this.InterpolantFactoryMethodLinear;break;case Rv:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return km;case this.InterpolantFactoryMethodLinear:return Bv;case this.InterpolantFactoryMethodSmooth:return Rv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){let n=this.times,r=n.length,s=0,a=r-1;for(;s!==r&&n[s]<e;)++s;for(;a!==-1&&n[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);let o=this.getValueSize();this.times=n.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){let l=n[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(r!==void 0&&IZ(r))for(let o=0,l=r.length;o!==l;++o){let d=r[o];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,d),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Rv,s=e.length-1,a=1;for(let o=1;o<s;++o){let l=!1,d=e[o],p=e[o+1];if(d!==p&&(o!==1||d!==e[0]))if(r)l=!0;else{let f=o*n,g=f-n,m=f+n;for(let x=0;x!==n;++x){let y=t[f+x];if(y!==t[g+x]||y!==t[m+x]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];let f=o*n,g=a*n;for(let m=0;m!==n;++m)t[g+m]=t[f+m]}++a}}if(s>0){e[a]=e[s];for(let o=s*n,l=a*n,d=0;d!==n;++d)t[l+d]=t[o+d];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};Ca.prototype.TimeBufferType=Float32Array;Ca.prototype.ValueBufferType=Float32Array;Ca.prototype.DefaultInterpolation=Bv;var Lc=class extends Ca{constructor(e,t,n){super(e,t,n)}};Lc.prototype.ValueTypeName="bool";Lc.prototype.ValueBufferType=Array;Lc.prototype.DefaultInterpolation=km;Lc.prototype.InterpolantFactoryMethodLinear=void 0;Lc.prototype.InterpolantFactoryMethodSmooth=void 0;var Zv=class extends Ca{};Zv.prototype.ValueTypeName="color";var Jv=class extends Ca{};Jv.prototype.ValueTypeName="number";var Qv=class extends Hd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(n-t)/(r-t),d=e*o;for(let p=d+o;d!==p;d+=4)fl.slerpFlat(s,0,a,d-o,a,d,l);return s}},Gm=class extends Ca{InterpolantFactoryMethodLinear(e){return new Qv(this.times,this.values,this.getValueSize(),e)}};Gm.prototype.ValueTypeName="quaternion";Gm.prototype.InterpolantFactoryMethodSmooth=void 0;var Oc=class extends Ca{constructor(e,t,n){super(e,t,n)}};Oc.prototype.ValueTypeName="string";Oc.prototype.ValueBufferType=Array;Oc.prototype.DefaultInterpolation=km;Oc.prototype.InterpolantFactoryMethodLinear=void 0;Oc.prototype.InterpolantFactoryMethodSmooth=void 0;var tx=class extends Ca{};tx.prototype.ValueTypeName="vector";var ex=class extends Vc{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new $n(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}};var nM=new Xi,t4=new zt,e4=new zt,dM=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Qn(512,512),this.map=null,this.mapPass=null,this.matrix=new Xi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Wh,this._frameExtents=new Qn(1,1),this._viewportCount=1,this._viewports=[new gi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,n=this.matrix;t4.setFromMatrixPosition(e.matrixWorld),t.position.copy(t4),e4.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(e4),t.updateMatrixWorld(),nM.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nM),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(nM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}};var n4=new Xi,Tm=new zt,iM=new zt,uM=class extends dM{constructor(){super(new Xr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Qn(4,2),this._viewportCount=6,this._viewports=[new gi(2,1,1,1),new gi(0,1,1,1),new gi(3,1,1,1),new gi(1,1,1,1),new gi(3,0,1,1),new gi(1,0,1,1)],this._cubeDirections=[new zt(1,0,0),new zt(-1,0,0),new zt(0,0,1),new zt(0,0,-1),new zt(0,1,0),new zt(0,-1,0)],this._cubeUps=[new zt(0,1,0),new zt(0,1,0),new zt(0,1,0),new zt(0,1,0),new zt(0,0,1),new zt(0,0,-1)]}updateMatrices(e,t=0){let n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Tm.setFromMatrixPosition(e.matrixWorld),n.position.copy(Tm),iM.copy(n.position),iM.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(iM),n.updateMatrixWorld(),r.makeTranslation(-Tm.x,-Tm.y,-Tm.z),n4.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(n4)}},qm=class extends ex{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new uM}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},nx=class extends Bm{constructor(e=-1,t=1,n=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,s=n-e,a=n+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){let d=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,a=s+d*this.view.width,o-=p*this.view.offsetY,l=o-p*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};var ix=class extends Xr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}};var LM="\\[\\]\\.:\\/",DZ=new RegExp("["+LM+"]","g"),OM="[^"+LM+"]",PZ="[^"+LM.replace("\\.","")+"]",RZ=/((?:WC+[\/:])*)/.source.replace("WC",OM),LZ=/(WCOD+)?/.source.replace("WCOD",PZ),OZ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",OM),NZ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",OM),FZ=new RegExp("^"+RZ+LZ+OZ+NZ+"$"),BZ=["material","materials","bones","map"],hM=class{constructor(e,t,n){let r=n||nr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){let n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},nr=(()=>{class i{constructor(t,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,r){return t&&t.isAnimationObjectGroup?new i.Composite(t,n,r):new i(t,n,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(DZ,"")}static parseTrackName(t){let n=FZ.exec(t);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){let a=r.nodeName.substring(s+1);BZ.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,n){if(n===void 0||n===""||n==="."||n===-1||n===t.name||n===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(n);if(r!==void 0)return r}if(t.children){let r=function(a){for(let o=0;o<a.length;o++){let l=a[o];if(l.name===n||l.uuid===n)return l;let d=r(l.children);if(d)return d}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){let r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)t[n++]=r[s]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){let r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)r[s]=t[n++]}_setValue_array_setNeedsUpdate(t,n){let r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)r[s]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){let r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)r[s]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node,n=this.parsedPath,r=n.objectName,s=n.propertyName,a=n.propertyIndex;if(t||(t=i.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let p=n.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let f=0;f<t.length;f++)if(t[f].name===p){p=f;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(p!==void 0){if(t[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[p]}}let o=t[s];if(o===void 0){let p=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+s+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(a!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[a]!==void 0&&(a=t.morphTargetDictionary[a])}d=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=a}else o.fromArray!==void 0&&o.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(d=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=s;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=hM,i})();nr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};nr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};nr.prototype.GetterByBindingType=[nr.prototype._getValue_direct,nr.prototype._getValue_array,nr.prototype._getValue_arrayElement,nr.prototype._getValue_toArray];nr.prototype.SetterByBindingTypeAndVersioning=[[nr.prototype._setValue_direct,nr.prototype._setValue_direct_setNeedsUpdate,nr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[nr.prototype._setValue_array,nr.prototype._setValue_array_setNeedsUpdate,nr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[nr.prototype._setValue_arrayElement,nr.prototype._setValue_arrayElement_setNeedsUpdate,nr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[nr.prototype._setValue_fromArray,nr.prototype._setValue_fromArray_setNeedsUpdate,nr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var vht=new Float32Array(1);function NM(i,e,t,n){let r=VZ(n);switch(t){case SM:return i*e;case CM:return i*e;case MM:return i*e*2;case EM:return i*e/r.components*r.byteLength;case vx:return i*e/r.components*r.byteLength;case AM:return i*e*2/r.components*r.byteLength;case xx:return i*e*2/r.components*r.byteLength;case wM:return i*e*3/r.components*r.byteLength;case Ma:return i*e*4/r.components*r.byteLength;case bx:return i*e*4/r.components*r.byteLength;case $m:case Km:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Zm:case Jm:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Sx:case Cx:return Math.max(i,16)*Math.max(e,8)/4;case yx:case wx:return Math.max(i,8)*Math.max(e,8)/2;case Mx:case Ex:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Ax:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Tx:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case kx:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case Ix:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case Dx:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case Px:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case Rx:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case Lx:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case Ox:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case Nx:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case Fx:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case Bx:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case Vx:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case Ux:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case zx:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case Qm:case jx:case Hx:return Math.ceil(i/4)*Math.ceil(e/4)*16;case TM:case Wx:return Math.ceil(i/4)*Math.ceil(e/4)*8;case Gx:case qx:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function VZ(i){switch(i){case Ao:case xM:return{byteLength:1,components:1};case Gh:case bM:case qh:return{byteLength:2,components:1};case gx:case _x:return{byteLength:2,components:4};case Fc:case mx:case To:return{byteLength:4,components:1};case yM:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:rx}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=rx);function xR(){let i=null,e=!1,t=null,n=null;function r(s,a){t(s,a),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function UZ(i){let e=new WeakMap;function t(o,l){let d=o.array,p=o.usage,f=d.byteLength,g=i.createBuffer();i.bindBuffer(l,g),i.bufferData(l,d,p),o.onUploadCallback();let m;if(d instanceof Float32Array)m=i.FLOAT;else if(d instanceof Uint16Array)o.isFloat16BufferAttribute?m=i.HALF_FLOAT:m=i.UNSIGNED_SHORT;else if(d instanceof Int16Array)m=i.SHORT;else if(d instanceof Uint32Array)m=i.UNSIGNED_INT;else if(d instanceof Int32Array)m=i.INT;else if(d instanceof Int8Array)m=i.BYTE;else if(d instanceof Uint8Array)m=i.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)m=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:g,type:m,bytesPerElement:d.BYTES_PER_ELEMENT,version:o.version,size:f}}function n(o,l,d){let p=l.array,f=l.updateRanges;if(i.bindBuffer(d,o),f.length===0)i.bufferSubData(d,0,p);else{f.sort((m,x)=>m.start-x.start);let g=0;for(let m=1;m<f.length;m++){let x=f[g],y=f[m];y.start<=x.start+x.count+1?x.count=Math.max(x.count,y.start+y.count-x.start):(++g,f[g]=y)}f.length=g+1;for(let m=0,x=f.length;m<x;m++){let y=f[m];i.bufferSubData(d,y.start*p.BYTES_PER_ELEMENT,p,y.start,y.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);let l=e.get(o);l&&(i.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){let p=e.get(o);(!p||p.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}let d=e.get(o);if(d===void 0)e.set(o,t(o,l));else if(d.version<o.version){if(d.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(d.buffer,o,l),d.version=o.version}}return{get:r,remove:s,update:a}}var zZ=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,jZ=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,HZ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,WZ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,GZ=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,qZ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,XZ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,YZ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,$Z=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,KZ=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,ZZ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,JZ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,QZ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,tJ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,eJ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,nJ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,iJ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,rJ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,sJ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,aJ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,oJ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,lJ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,cJ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,dJ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,uJ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,hJ=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,pJ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,fJ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,mJ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,gJ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,_J="gl_FragColor = linearToOutputTexel( gl_FragColor );",vJ=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,xJ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,bJ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,yJ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,SJ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,wJ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,CJ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,MJ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,EJ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,AJ=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,TJ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,kJ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,IJ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,DJ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,PJ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,RJ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,LJ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,OJ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,NJ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,FJ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,BJ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,VJ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,UJ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,zJ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,jJ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,HJ=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,WJ=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,GJ=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,qJ=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,XJ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,YJ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,$J=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,KJ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ZJ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,JJ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,QJ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,tQ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,eQ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,nQ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,iQ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,rQ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,sQ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,aQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,oQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,lQ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,cQ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,dQ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,uQ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,hQ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,pQ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,fQ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,mQ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,gQ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,_Q=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,vQ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,xQ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,bQ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,yQ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,SQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,wQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,CQ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,MQ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,EQ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,AQ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,TQ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,kQ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,IQ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,DQ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,PQ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,RQ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,LQ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,OQ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,NQ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,FQ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,BQ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,VQ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,UQ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,zQ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,jQ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,HQ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,WQ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,GQ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qQ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,XQ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,YQ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,$Q=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,KQ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,ZQ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,JQ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,QQ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ttt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,ett=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ntt=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,itt=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rtt=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,stt=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,att=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ott=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,ltt=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ctt=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dtt=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,utt=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,htt=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ptt=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ftt=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,mtt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,gtt=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_tt=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vtt=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xtt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Dn={alphahash_fragment:zZ,alphahash_pars_fragment:jZ,alphamap_fragment:HZ,alphamap_pars_fragment:WZ,alphatest_fragment:GZ,alphatest_pars_fragment:qZ,aomap_fragment:XZ,aomap_pars_fragment:YZ,batching_pars_vertex:$Z,batching_vertex:KZ,begin_vertex:ZZ,beginnormal_vertex:JZ,bsdfs:QZ,iridescence_fragment:tJ,bumpmap_pars_fragment:eJ,clipping_planes_fragment:nJ,clipping_planes_pars_fragment:iJ,clipping_planes_pars_vertex:rJ,clipping_planes_vertex:sJ,color_fragment:aJ,color_pars_fragment:oJ,color_pars_vertex:lJ,color_vertex:cJ,common:dJ,cube_uv_reflection_fragment:uJ,defaultnormal_vertex:hJ,displacementmap_pars_vertex:pJ,displacementmap_vertex:fJ,emissivemap_fragment:mJ,emissivemap_pars_fragment:gJ,colorspace_fragment:_J,colorspace_pars_fragment:vJ,envmap_fragment:xJ,envmap_common_pars_fragment:bJ,envmap_pars_fragment:yJ,envmap_pars_vertex:SJ,envmap_physical_pars_fragment:RJ,envmap_vertex:wJ,fog_vertex:CJ,fog_pars_vertex:MJ,fog_fragment:EJ,fog_pars_fragment:AJ,gradientmap_pars_fragment:TJ,lightmap_pars_fragment:kJ,lights_lambert_fragment:IJ,lights_lambert_pars_fragment:DJ,lights_pars_begin:PJ,lights_toon_fragment:LJ,lights_toon_pars_fragment:OJ,lights_phong_fragment:NJ,lights_phong_pars_fragment:FJ,lights_physical_fragment:BJ,lights_physical_pars_fragment:VJ,lights_fragment_begin:UJ,lights_fragment_maps:zJ,lights_fragment_end:jJ,logdepthbuf_fragment:HJ,logdepthbuf_pars_fragment:WJ,logdepthbuf_pars_vertex:GJ,logdepthbuf_vertex:qJ,map_fragment:XJ,map_pars_fragment:YJ,map_particle_fragment:$J,map_particle_pars_fragment:KJ,metalnessmap_fragment:ZJ,metalnessmap_pars_fragment:JJ,morphinstance_vertex:QJ,morphcolor_vertex:tQ,morphnormal_vertex:eQ,morphtarget_pars_vertex:nQ,morphtarget_vertex:iQ,normal_fragment_begin:rQ,normal_fragment_maps:sQ,normal_pars_fragment:aQ,normal_pars_vertex:oQ,normal_vertex:lQ,normalmap_pars_fragment:cQ,clearcoat_normal_fragment_begin:dQ,clearcoat_normal_fragment_maps:uQ,clearcoat_pars_fragment:hQ,iridescence_pars_fragment:pQ,opaque_fragment:fQ,packing:mQ,premultiplied_alpha_fragment:gQ,project_vertex:_Q,dithering_fragment:vQ,dithering_pars_fragment:xQ,roughnessmap_fragment:bQ,roughnessmap_pars_fragment:yQ,shadowmap_pars_fragment:SQ,shadowmap_pars_vertex:wQ,shadowmap_vertex:CQ,shadowmask_pars_fragment:MQ,skinbase_vertex:EQ,skinning_pars_vertex:AQ,skinning_vertex:TQ,skinnormal_vertex:kQ,specularmap_fragment:IQ,specularmap_pars_fragment:DQ,tonemapping_fragment:PQ,tonemapping_pars_fragment:RQ,transmission_fragment:LQ,transmission_pars_fragment:OQ,uv_pars_fragment:NQ,uv_pars_vertex:FQ,uv_vertex:BQ,worldpos_vertex:VQ,background_vert:UQ,background_frag:zQ,backgroundCube_vert:jQ,backgroundCube_frag:HQ,cube_vert:WQ,cube_frag:GQ,depth_vert:qQ,depth_frag:XQ,distanceRGBA_vert:YQ,distanceRGBA_frag:$Q,equirect_vert:KQ,equirect_frag:ZQ,linedashed_vert:JQ,linedashed_frag:QQ,meshbasic_vert:ttt,meshbasic_frag:ett,meshlambert_vert:ntt,meshlambert_frag:itt,meshmatcap_vert:rtt,meshmatcap_frag:stt,meshnormal_vert:att,meshnormal_frag:ott,meshphong_vert:ltt,meshphong_frag:ctt,meshphysical_vert:dtt,meshphysical_frag:utt,meshtoon_vert:htt,meshtoon_frag:ptt,points_vert:ftt,points_frag:mtt,shadow_vert:gtt,shadow_frag:_tt,sprite_vert:vtt,sprite_frag:xtt},Ie={common:{diffuse:{value:new $n(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Mn},alphaMap:{value:null},alphaMapTransform:{value:new Mn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Mn}},envmap:{envMap:{value:null},envMapRotation:{value:new Mn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Mn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Mn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Mn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Mn},normalScale:{value:new Qn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Mn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Mn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Mn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Mn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $n(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new $n(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Mn},alphaTest:{value:0},uvTransform:{value:new Mn}},sprite:{diffuse:{value:new $n(16777215)},opacity:{value:1},center:{value:new Qn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Mn},alphaMap:{value:null},alphaMapTransform:{value:new Mn},alphaTest:{value:0}}},ko={basic:{uniforms:us([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.fog]),vertexShader:Dn.meshbasic_vert,fragmentShader:Dn.meshbasic_frag},lambert:{uniforms:us([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,Ie.lights,{emissive:{value:new $n(0)}}]),vertexShader:Dn.meshlambert_vert,fragmentShader:Dn.meshlambert_frag},phong:{uniforms:us([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,Ie.lights,{emissive:{value:new $n(0)},specular:{value:new $n(1118481)},shininess:{value:30}}]),vertexShader:Dn.meshphong_vert,fragmentShader:Dn.meshphong_frag},standard:{uniforms:us([Ie.common,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.roughnessmap,Ie.metalnessmap,Ie.fog,Ie.lights,{emissive:{value:new $n(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Dn.meshphysical_vert,fragmentShader:Dn.meshphysical_frag},toon:{uniforms:us([Ie.common,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.gradientmap,Ie.fog,Ie.lights,{emissive:{value:new $n(0)}}]),vertexShader:Dn.meshtoon_vert,fragmentShader:Dn.meshtoon_frag},matcap:{uniforms:us([Ie.common,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,{matcap:{value:null}}]),vertexShader:Dn.meshmatcap_vert,fragmentShader:Dn.meshmatcap_frag},points:{uniforms:us([Ie.points,Ie.fog]),vertexShader:Dn.points_vert,fragmentShader:Dn.points_frag},dashed:{uniforms:us([Ie.common,Ie.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Dn.linedashed_vert,fragmentShader:Dn.linedashed_frag},depth:{uniforms:us([Ie.common,Ie.displacementmap]),vertexShader:Dn.depth_vert,fragmentShader:Dn.depth_frag},normal:{uniforms:us([Ie.common,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,{opacity:{value:1}}]),vertexShader:Dn.meshnormal_vert,fragmentShader:Dn.meshnormal_frag},sprite:{uniforms:us([Ie.sprite,Ie.fog]),vertexShader:Dn.sprite_vert,fragmentShader:Dn.sprite_frag},background:{uniforms:{uvTransform:{value:new Mn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Dn.background_vert,fragmentShader:Dn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Mn}},vertexShader:Dn.backgroundCube_vert,fragmentShader:Dn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Dn.cube_vert,fragmentShader:Dn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Dn.equirect_vert,fragmentShader:Dn.equirect_frag},distanceRGBA:{uniforms:us([Ie.common,Ie.displacementmap,{referencePosition:{value:new zt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Dn.distanceRGBA_vert,fragmentShader:Dn.distanceRGBA_frag},shadow:{uniforms:us([Ie.lights,Ie.fog,{color:{value:new $n(0)},opacity:{value:1}}]),vertexShader:Dn.shadow_vert,fragmentShader:Dn.shadow_frag}};ko.physical={uniforms:us([ko.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Mn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Mn},clearcoatNormalScale:{value:new Qn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Mn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Mn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Mn},sheen:{value:0},sheenColor:{value:new $n(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Mn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Mn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Mn},transmissionSamplerSize:{value:new Qn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Mn},attenuationDistance:{value:0},attenuationColor:{value:new $n(0)},specularColor:{value:new $n(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Mn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Mn},anisotropyVector:{value:new Qn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Mn}}]),vertexShader:Dn.meshphysical_vert,fragmentShader:Dn.meshphysical_frag};var Xx={r:0,b:0,g:0},$d=new Dc,btt=new Xi;function ytt(i,e,t,n,r,s,a){let o=new $n(0),l=s===!0?0:1,d,p,f=null,g=0,m=null;function x(T){let k=T.isScene===!0?T.background:null;return k&&k.isTexture&&(k=(T.backgroundBlurriness>0?t:e).get(k)),k}function y(T){let k=!1,L=x(T);L===null?b(o,l):L&&L.isColor&&(b(L,1),k=!0);let U=i.xr.getEnvironmentBlendMode();U==="additive"?n.buffers.color.setClear(0,0,0,1,a):U==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(i.autoClear||k)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function S(T,k){let L=x(k);L&&(L.isCubeTexture||L.mapping===Xm)?(p===void 0&&(p=new ds(new Rc(1,1,1),new Ja({name:"BackgroundCubeMaterial",uniforms:Yd(ko.backgroundCube.uniforms),vertexShader:ko.backgroundCube.vertexShader,fragmentShader:ko.backgroundCube.fragmentShader,side:bs,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(U,N,F){this.matrixWorld.copyPosition(F.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),$d.copy(k.backgroundRotation),$d.x*=-1,$d.y*=-1,$d.z*=-1,L.isCubeTexture&&L.isRenderTargetTexture===!1&&($d.y*=-1,$d.z*=-1),p.material.uniforms.envMap.value=L,p.material.uniforms.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=k.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=k.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(btt.makeRotationFromEuler($d)),p.material.toneMapped=Zn.getTransfer(L.colorSpace)!==_i,(f!==L||g!==L.version||m!==i.toneMapping)&&(p.material.needsUpdate=!0,f=L,g=L.version,m=i.toneMapping),p.layers.enableAll(),T.unshift(p,p.geometry,p.material,0,0,null)):L&&L.isTexture&&(d===void 0&&(d=new ds(new jm(2,2),new Ja({name:"BackgroundMaterial",uniforms:Yd(ko.background.uniforms),vertexShader:ko.background.vertexShader,fragmentShader:ko.background.fragmentShader,side:hl,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=L,d.material.uniforms.backgroundIntensity.value=k.backgroundIntensity,d.material.toneMapped=Zn.getTransfer(L.colorSpace)!==_i,L.matrixAutoUpdate===!0&&L.updateMatrix(),d.material.uniforms.uvTransform.value.copy(L.matrix),(f!==L||g!==L.version||m!==i.toneMapping)&&(d.material.needsUpdate=!0,f=L,g=L.version,m=i.toneMapping),d.layers.enableAll(),T.unshift(d,d.geometry,d.material,0,0,null))}function b(T,k){T.getRGB(Xx,RM(i)),n.buffers.color.setClear(Xx.r,Xx.g,Xx.b,k,a)}function M(){p!==void 0&&(p.geometry.dispose(),p.material.dispose()),d!==void 0&&(d.geometry.dispose(),d.material.dispose())}return{getClearColor:function(){return o},setClearColor:function(T,k=1){o.set(T),l=k,b(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(T){l=T,b(o,l)},render:y,addToRenderList:S,dispose:M}}function Stt(i,e){let t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=g(null),s=r,a=!1;function o(B,P,V,$,K){let ct=!1,ot=f($,V,P);s!==ot&&(s=ot,d(s.object)),ct=m(B,$,V,K),ct&&x(B,$,V,K),K!==null&&e.update(K,i.ELEMENT_ARRAY_BUFFER),(ct||a)&&(a=!1,k(B,P,V,$),K!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(K).buffer))}function l(){return i.createVertexArray()}function d(B){return i.bindVertexArray(B)}function p(B){return i.deleteVertexArray(B)}function f(B,P,V){let $=V.wireframe===!0,K=n[B.id];K===void 0&&(K={},n[B.id]=K);let ct=K[P.id];ct===void 0&&(ct={},K[P.id]=ct);let ot=ct[$];return ot===void 0&&(ot=g(l()),ct[$]=ot),ot}function g(B){let P=[],V=[],$=[];for(let K=0;K<t;K++)P[K]=0,V[K]=0,$[K]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:V,attributeDivisors:$,object:B,attributes:{},index:null}}function m(B,P,V,$){let K=s.attributes,ct=P.attributes,ot=0,st=V.getAttributes();for(let Q in st)if(st[Q].location>=0){let Mt=K[Q],qt=ct[Q];if(qt===void 0&&(Q==="instanceMatrix"&&B.instanceMatrix&&(qt=B.instanceMatrix),Q==="instanceColor"&&B.instanceColor&&(qt=B.instanceColor)),Mt===void 0||Mt.attribute!==qt||qt&&Mt.data!==qt.data)return!0;ot++}return s.attributesNum!==ot||s.index!==$}function x(B,P,V,$){let K={},ct=P.attributes,ot=0,st=V.getAttributes();for(let Q in st)if(st[Q].location>=0){let Mt=ct[Q];Mt===void 0&&(Q==="instanceMatrix"&&B.instanceMatrix&&(Mt=B.instanceMatrix),Q==="instanceColor"&&B.instanceColor&&(Mt=B.instanceColor));let qt={};qt.attribute=Mt,Mt&&Mt.data&&(qt.data=Mt.data),K[Q]=qt,ot++}s.attributes=K,s.attributesNum=ot,s.index=$}function y(){let B=s.newAttributes;for(let P=0,V=B.length;P<V;P++)B[P]=0}function S(B){b(B,0)}function b(B,P){let V=s.newAttributes,$=s.enabledAttributes,K=s.attributeDivisors;V[B]=1,$[B]===0&&(i.enableVertexAttribArray(B),$[B]=1),K[B]!==P&&(i.vertexAttribDivisor(B,P),K[B]=P)}function M(){let B=s.newAttributes,P=s.enabledAttributes;for(let V=0,$=P.length;V<$;V++)P[V]!==B[V]&&(i.disableVertexAttribArray(V),P[V]=0)}function T(B,P,V,$,K,ct,ot){ot===!0?i.vertexAttribIPointer(B,P,V,K,ct):i.vertexAttribPointer(B,P,V,$,K,ct)}function k(B,P,V,$){y();let K=$.attributes,ct=V.getAttributes(),ot=P.defaultAttributeValues;for(let st in ct){let Q=ct[st];if(Q.location>=0){let xt=K[st];if(xt===void 0&&(st==="instanceMatrix"&&B.instanceMatrix&&(xt=B.instanceMatrix),st==="instanceColor"&&B.instanceColor&&(xt=B.instanceColor)),xt!==void 0){let Mt=xt.normalized,qt=xt.itemSize,z=e.get(xt);if(z===void 0)continue;let it=z.buffer,Z=z.type,at=z.bytesPerElement,pt=Z===i.INT||Z===i.UNSIGNED_INT||xt.gpuType===mx;if(xt.isInterleavedBufferAttribute){let ft=xt.data,St=ft.stride,kt=xt.offset;if(ft.isInstancedInterleavedBuffer){for(let Qt=0;Qt<Q.locationSize;Qt++)b(Q.location+Qt,ft.meshPerAttribute);B.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=ft.meshPerAttribute*ft.count)}else for(let Qt=0;Qt<Q.locationSize;Qt++)S(Q.location+Qt);i.bindBuffer(i.ARRAY_BUFFER,it);for(let Qt=0;Qt<Q.locationSize;Qt++)T(Q.location+Qt,qt/Q.locationSize,Z,Mt,St*at,(kt+qt/Q.locationSize*Qt)*at,pt)}else{if(xt.isInstancedBufferAttribute){for(let ft=0;ft<Q.locationSize;ft++)b(Q.location+ft,xt.meshPerAttribute);B.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=xt.meshPerAttribute*xt.count)}else for(let ft=0;ft<Q.locationSize;ft++)S(Q.location+ft);i.bindBuffer(i.ARRAY_BUFFER,it);for(let ft=0;ft<Q.locationSize;ft++)T(Q.location+ft,qt/Q.locationSize,Z,Mt,qt*at,qt/Q.locationSize*ft*at,pt)}}else if(ot!==void 0){let Mt=ot[st];if(Mt!==void 0)switch(Mt.length){case 2:i.vertexAttrib2fv(Q.location,Mt);break;case 3:i.vertexAttrib3fv(Q.location,Mt);break;case 4:i.vertexAttrib4fv(Q.location,Mt);break;default:i.vertexAttrib1fv(Q.location,Mt)}}}}M()}function L(){F();for(let B in n){let P=n[B];for(let V in P){let $=P[V];for(let K in $)p($[K].object),delete $[K];delete P[V]}delete n[B]}}function U(B){if(n[B.id]===void 0)return;let P=n[B.id];for(let V in P){let $=P[V];for(let K in $)p($[K].object),delete $[K];delete P[V]}delete n[B.id]}function N(B){for(let P in n){let V=n[P];if(V[B.id]===void 0)continue;let $=V[B.id];for(let K in $)p($[K].object),delete $[K];delete V[B.id]}}function F(){O(),a=!0,s!==r&&(s=r,d(s.object))}function O(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:F,resetDefaultState:O,dispose:L,releaseStatesOfGeometry:U,releaseStatesOfProgram:N,initAttributes:y,enableAttribute:S,disableUnusedAttributes:M}}function wtt(i,e,t){let n;function r(d){n=d}function s(d,p){i.drawArrays(n,d,p),t.update(p,n,1)}function a(d,p,f){f!==0&&(i.drawArraysInstanced(n,d,p,f),t.update(p,n,f))}function o(d,p,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,d,0,p,0,f);let m=0;for(let x=0;x<f;x++)m+=p[x];t.update(m,n,1)}function l(d,p,f,g){if(f===0)return;let m=e.get("WEBGL_multi_draw");if(m===null)for(let x=0;x<d.length;x++)a(d[x],p[x],g[x]);else{m.multiDrawArraysInstancedWEBGL(n,d,0,p,0,g,0,f);let x=0;for(let y=0;y<f;y++)x+=p[y]*g[y];t.update(x,n,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function Ctt(i,e,t,n){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let N=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(N){return!(N!==Ma&&n.convert(N)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(N){let F=N===qh&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(N!==Ao&&n.convert(N)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&N!==To&&!F)}function l(N){if(N==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=t.precision!==void 0?t.precision:"highp",p=l(d);p!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",p,"instead."),d=p);let f=t.logarithmicDepthBuffer===!0,g=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),m=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),x=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=i.getParameter(i.MAX_TEXTURE_SIZE),S=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),b=i.getParameter(i.MAX_VERTEX_ATTRIBS),M=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),T=i.getParameter(i.MAX_VARYING_VECTORS),k=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),L=x>0,U=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:d,logarithmicDepthBuffer:f,reverseDepthBuffer:g,maxTextures:m,maxVertexTextures:x,maxTextureSize:y,maxCubemapSize:S,maxAttributes:b,maxVertexUniforms:M,maxVaryings:T,maxFragmentUniforms:k,vertexTextures:L,maxSamples:U}}function Mtt(i){let e=this,t=null,n=0,r=!1,s=!1,a=new So,o=new Mn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,g){let m=f.length!==0||g||n!==0||r;return r=g,n=f.length,m},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,g){t=p(f,g,0)},this.setState=function(f,g,m){let x=f.clippingPlanes,y=f.clipIntersection,S=f.clipShadows,b=i.get(f);if(!r||x===null||x.length===0||s&&!S)s?p(null):d();else{let M=s?0:n,T=M*4,k=b.clippingState||null;l.value=k,k=p(x,g,T,m);for(let L=0;L!==T;++L)k[L]=t[L];b.clippingState=k,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=M}};function d(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function p(f,g,m,x){let y=f!==null?f.length:0,S=null;if(y!==0){if(S=l.value,x!==!0||S===null){let b=m+y*4,M=g.matrixWorldInverse;o.getNormalMatrix(M),(S===null||S.length<b)&&(S=new Float32Array(b));for(let T=0,k=m;T!==y;++T,k+=4)a.copy(f[T]).applyMatrix4(M,o),a.normal.toArray(S,k),S[k+3]=a.constant}l.value=S,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,S}}function Ett(i){let e=new WeakMap;function t(a,o){return o===hx?a.mapping=Wd:o===px&&(a.mapping=Gd),a}function n(a){if(a&&a.isTexture){let o=a.mapping;if(o===hx||o===px)if(e.has(a)){let l=e.get(a).texture;return t(l,a.mapping)}else{let l=a.image;if(l&&l.height>0){let d=new Gv(l.height);return d.fromEquirectangularTexture(i,a),e.set(a,d),a.addEventListener("dispose",r),t(d.texture,a.mapping)}else return null}}return a}function r(a){let o=a.target;o.removeEventListener("dispose",r);let l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}var Yh=4,K4=[.125,.215,.35,.446,.526,.582],Jd=20,FM=new nx,Z4=new $n,BM=null,VM=0,UM=0,zM=!1,Zd=(1+Math.sqrt(5))/2,Xh=1/Zd,J4=[new zt(-Zd,Xh,0),new zt(Zd,Xh,0),new zt(-Xh,0,Zd),new zt(Xh,0,Zd),new zt(0,Zd,-Xh),new zt(0,Zd,Xh),new zt(-1,1,-1),new zt(1,1,-1),new zt(-1,1,1),new zt(1,1,1)],Kx=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){BM=this._renderer.getRenderTarget(),VM=this._renderer.getActiveCubeFace(),UM=this._renderer.getActiveMipmapLevel(),zM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=eR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=tR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(BM,VM,UM),this._renderer.xr.enabled=zM,e.scissorTest=!1,Yx(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Wd||e.mapping===Gd?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),BM=this._renderer.getRenderTarget(),VM=this._renderer.getActiveCubeFace(),UM=this._renderer.getActiveMipmapLevel(),zM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Za,minFilter:Za,generateMipmaps:!1,type:qh,format:Ma,colorSpace:zd,depthBuffer:!1},r=Q4(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Q4(e,t,n);let{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Att(s)),this._blurMaterial=Ttt(s,e,t)}return r}_compileMaterial(e){let t=new ds(this._lodPlanes[0],e);this._renderer.compile(t,FM)}_sceneToCubeUV(e,t,n,r){let o=new Xr(90,1,t,n),l=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],p=this._renderer,f=p.autoClear,g=p.toneMapping;p.getClearColor(Z4),p.toneMapping=vl,p.autoClear=!1;let m=new jd({name:"PMREM.Background",side:bs,depthWrite:!1,depthTest:!1}),x=new ds(new Rc,m),y=!1,S=e.background;S?S.isColor&&(m.color.copy(S),e.background=null,y=!0):(m.color.copy(Z4),y=!0);for(let b=0;b<6;b++){let M=b%3;M===0?(o.up.set(0,l[b],0),o.lookAt(d[b],0,0)):M===1?(o.up.set(0,0,l[b]),o.lookAt(0,d[b],0)):(o.up.set(0,l[b],0),o.lookAt(0,0,d[b]));let T=this._cubeSize;Yx(r,M*T,b>2?T:0,T,T),p.setRenderTarget(r),y&&p.render(x,o),p.render(e,o)}x.geometry.dispose(),x.material.dispose(),p.toneMapping=g,p.autoClear=f,e.background=S}_textureToCubeUV(e,t){let n=this._renderer,r=e.mapping===Wd||e.mapping===Gd;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=eR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=tR());let s=r?this._cubemapMaterial:this._equirectMaterial,a=new ds(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;let l=this._cubeSize;Yx(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(a,FM)}_applyPMREM(e){let t=this._renderer,n=t.autoClear;t.autoClear=!1;let r=this._lodPlanes.length;for(let s=1;s<r;s++){let a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=J4[(r-s-1)%J4.length];this._blur(e,s-1,s,a,o)}t.autoClear=n}_blur(e,t,n,r,s){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",s),this._halfBlur(a,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,a,o){let l=this._renderer,d=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let p=3,f=new ds(this._lodPlanes[r],d),g=d.uniforms,m=this._sizeLods[n]-1,x=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Jd-1),y=s/x,S=isFinite(s)?1+Math.floor(p*y):Jd;S>Jd&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${Jd}`);let b=[],M=0;for(let N=0;N<Jd;++N){let F=N/y,O=Math.exp(-F*F/2);b.push(O),N===0?M+=O:N<S&&(M+=2*O)}for(let N=0;N<b.length;N++)b[N]=b[N]/M;g.envMap.value=e.texture,g.samples.value=S,g.weights.value=b,g.latitudinal.value=a==="latitudinal",o&&(g.poleAxis.value=o);let{_lodMax:T}=this;g.dTheta.value=x,g.mipInt.value=T-n;let k=this._sizeLods[r],L=3*k*(r>T-Yh?r-T+Yh:0),U=4*(this._cubeSize-k);Yx(t,L,U,3*k,2*k),l.setRenderTarget(t),l.render(f,FM)}};function Att(i){let e=[],t=[],n=[],r=i,s=i-Yh+1+K4.length;for(let a=0;a<s;a++){let o=Math.pow(2,r);t.push(o);let l=1/o;a>i-Yh?l=K4[a-i+Yh-1]:a===0&&(l=0),n.push(l);let d=1/(o-2),p=-d,f=1+d,g=[p,p,f,p,f,f,p,p,f,f,p,f],m=6,x=6,y=3,S=2,b=1,M=new Float32Array(y*x*m),T=new Float32Array(S*x*m),k=new Float32Array(b*x*m);for(let U=0;U<m;U++){let N=U%3*2/3-1,F=U>2?0:-1,O=[N,F,0,N+2/3,F,0,N+2/3,F+1,0,N,F,0,N+2/3,F+1,0,N,F+1,0];M.set(O,y*x*U),T.set(g,S*x*U);let B=[U,U,U,U,U,U];k.set(B,b*x*U)}let L=new ml;L.setAttribute("position",new ea(M,y)),L.setAttribute("uv",new ea(T,S)),L.setAttribute("faceIndex",new ea(k,b)),e.push(L),r>Yh&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Q4(i,e,t){let n=new Co(i,e,t);return n.texture.mapping=Xm,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Yx(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function Ttt(i,e,t){let n=new Float32Array(Jd),r=new zt(0,1,0);return new Ja({name:"SphericalGaussianBlur",defines:{n:Jd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:ZM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:_l,depthTest:!1,depthWrite:!1})}function tR(){return new Ja({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ZM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:_l,depthTest:!1,depthWrite:!1})}function eR(){return new Ja({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ZM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:_l,depthTest:!1,depthWrite:!1})}function ZM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ktt(i){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){let l=o.mapping,d=l===hx||l===px,p=l===Wd||l===Gd;if(d||p){let f=e.get(o),g=f!==void 0?f.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==g)return t===null&&(t=new Kx(i)),f=d?t.fromEquirectangular(o,f):t.fromCubemap(o,f),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),f.texture;if(f!==void 0)return f.texture;{let m=o.image;return d&&m&&m.height>0||p&&m&&r(m)?(t===null&&(t=new Kx(i)),f=d?t.fromEquirectangular(o):t.fromCubemap(o),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),o.addEventListener("dispose",s),f.texture):null}}}return o}function r(o){let l=0,d=6;for(let p=0;p<d;p++)o[p]!==void 0&&l++;return l===d}function s(o){let l=o.target;l.removeEventListener("dispose",s);let d=e.get(l);d!==void 0&&(e.delete(l),d.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function Itt(i){let e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){let r=t(n);return r===null&&Xd("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function Dtt(i,e,t,n){let r={},s=new WeakMap;function a(f){let g=f.target;g.index!==null&&e.remove(g.index);for(let x in g.attributes)e.remove(g.attributes[x]);g.removeEventListener("dispose",a),delete r[g.id];let m=s.get(g);m&&(e.remove(m),s.delete(g)),n.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,t.memory.geometries--}function o(f,g){return r[g.id]===!0||(g.addEventListener("dispose",a),r[g.id]=!0,t.memory.geometries++),g}function l(f){let g=f.attributes;for(let m in g)e.update(g[m],i.ARRAY_BUFFER)}function d(f){let g=[],m=f.index,x=f.attributes.position,y=0;if(m!==null){let M=m.array;y=m.version;for(let T=0,k=M.length;T<k;T+=3){let L=M[T+0],U=M[T+1],N=M[T+2];g.push(L,U,U,N,N,L)}}else if(x!==void 0){let M=x.array;y=x.version;for(let T=0,k=M.length/3-1;T<k;T+=3){let L=T+0,U=T+1,N=T+2;g.push(L,U,U,N,N,L)}}else return;let S=new(PM(g)?Fm:Nm)(g,1);S.version=y;let b=s.get(f);b&&e.remove(b),s.set(f,S)}function p(f){let g=s.get(f);if(g){let m=f.index;m!==null&&g.version<m.version&&d(f)}else d(f);return s.get(f)}return{get:o,update:l,getWireframeAttribute:p}}function Ptt(i,e,t){let n;function r(g){n=g}let s,a;function o(g){s=g.type,a=g.bytesPerElement}function l(g,m){i.drawElements(n,m,s,g*a),t.update(m,n,1)}function d(g,m,x){x!==0&&(i.drawElementsInstanced(n,m,s,g*a,x),t.update(m,n,x))}function p(g,m,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,m,0,s,g,0,x);let S=0;for(let b=0;b<x;b++)S+=m[b];t.update(S,n,1)}function f(g,m,x,y){if(x===0)return;let S=e.get("WEBGL_multi_draw");if(S===null)for(let b=0;b<g.length;b++)d(g[b]/a,m[b],y[b]);else{S.multiDrawElementsInstancedWEBGL(n,m,0,s,g,0,y,0,x);let b=0;for(let M=0;M<x;M++)b+=m[M]*y[M];t.update(b,n,1)}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=d,this.renderMultiDraw=p,this.renderMultiDrawInstances=f}function Rtt(i){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,a,o){switch(t.calls++,a){case i.TRIANGLES:t.triangles+=o*(s/3);break;case i.LINES:t.lines+=o*(s/2);break;case i.LINE_STRIP:t.lines+=o*(s-1);break;case i.LINE_LOOP:t.lines+=o*s;break;case i.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function Ltt(i,e,t){let n=new WeakMap,r=new gi;function s(a,o,l){let d=a.morphTargetInfluences,p=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,f=p!==void 0?p.length:0,g=n.get(o);if(g===void 0||g.count!==f){let B=function(){F.dispose(),n.delete(o),o.removeEventListener("dispose",B)};var m=B;g!==void 0&&g.texture.dispose();let x=o.morphAttributes.position!==void 0,y=o.morphAttributes.normal!==void 0,S=o.morphAttributes.color!==void 0,b=o.morphAttributes.position||[],M=o.morphAttributes.normal||[],T=o.morphAttributes.color||[],k=0;x===!0&&(k=1),y===!0&&(k=2),S===!0&&(k=3);let L=o.attributes.position.count*k,U=1;L>e.maxTextureSize&&(U=Math.ceil(L/e.maxTextureSize),L=e.maxTextureSize);let N=new Float32Array(L*U*4*f),F=new Lm(N,L,U,f);F.type=To,F.needsUpdate=!0;let O=k*4;for(let P=0;P<f;P++){let V=b[P],$=M[P],K=T[P],ct=L*U*4*P;for(let ot=0;ot<V.count;ot++){let st=ot*O;x===!0&&(r.fromBufferAttribute(V,ot),N[ct+st+0]=r.x,N[ct+st+1]=r.y,N[ct+st+2]=r.z,N[ct+st+3]=0),y===!0&&(r.fromBufferAttribute($,ot),N[ct+st+4]=r.x,N[ct+st+5]=r.y,N[ct+st+6]=r.z,N[ct+st+7]=0),S===!0&&(r.fromBufferAttribute(K,ot),N[ct+st+8]=r.x,N[ct+st+9]=r.y,N[ct+st+10]=r.z,N[ct+st+11]=K.itemSize===4?r.w:1)}}g={count:f,texture:F,size:new Qn(L,U)},n.set(o,g),o.addEventListener("dispose",B)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(i,"morphTexture",a.morphTexture,t);else{let x=0;for(let S=0;S<d.length;S++)x+=d[S];let y=o.morphTargetsRelative?1:1-x;l.getUniforms().setValue(i,"morphTargetBaseInfluence",y),l.getUniforms().setValue(i,"morphTargetInfluences",d)}l.getUniforms().setValue(i,"morphTargetsTexture",g.texture,t),l.getUniforms().setValue(i,"morphTargetsTextureSize",g.size)}return{update:s}}function Ott(i,e,t,n){let r=new WeakMap;function s(l){let d=n.render.frame,p=l.geometry,f=e.get(l,p);if(r.get(f)!==d&&(e.update(f),r.set(f,d)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==d&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,d))),l.isSkinnedMesh){let g=l.skeleton;r.get(g)!==d&&(g.update(),r.set(g,d))}return f}function a(){r=new WeakMap}function o(l){let d=l.target;d.removeEventListener("dispose",o),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:s,dispose:a}}var bR=new Bc,nR=new zm(1,1),yR=new Lm,SR=new jv,wR=new Vm,iR=[],rR=[],sR=new Float32Array(16),aR=new Float32Array(9),oR=new Float32Array(4);function Kh(i,e,t){let n=i[0];if(n<=0||n>0)return i;let r=e*t,s=iR[r];if(s===void 0&&(s=new Float32Array(r),iR[r]=s),e!==0){n.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,i[a].toArray(s,o)}return s}function Ar(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Tr(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function Jx(i,e){let t=rR[e];t===void 0&&(t=new Int32Array(e),rR[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function Ntt(i,e){let t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function Ftt(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ar(t,e))return;i.uniform2fv(this.addr,e),Tr(t,e)}}function Btt(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ar(t,e))return;i.uniform3fv(this.addr,e),Tr(t,e)}}function Vtt(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ar(t,e))return;i.uniform4fv(this.addr,e),Tr(t,e)}}function Utt(i,e){let t=this.cache,n=e.elements;if(n===void 0){if(Ar(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Tr(t,e)}else{if(Ar(t,n))return;oR.set(n),i.uniformMatrix2fv(this.addr,!1,oR),Tr(t,n)}}function ztt(i,e){let t=this.cache,n=e.elements;if(n===void 0){if(Ar(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Tr(t,e)}else{if(Ar(t,n))return;aR.set(n),i.uniformMatrix3fv(this.addr,!1,aR),Tr(t,n)}}function jtt(i,e){let t=this.cache,n=e.elements;if(n===void 0){if(Ar(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Tr(t,e)}else{if(Ar(t,n))return;sR.set(n),i.uniformMatrix4fv(this.addr,!1,sR),Tr(t,n)}}function Htt(i,e){let t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function Wtt(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ar(t,e))return;i.uniform2iv(this.addr,e),Tr(t,e)}}function Gtt(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ar(t,e))return;i.uniform3iv(this.addr,e),Tr(t,e)}}function qtt(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ar(t,e))return;i.uniform4iv(this.addr,e),Tr(t,e)}}function Xtt(i,e){let t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function Ytt(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ar(t,e))return;i.uniform2uiv(this.addr,e),Tr(t,e)}}function $tt(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ar(t,e))return;i.uniform3uiv(this.addr,e),Tr(t,e)}}function Ktt(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ar(t,e))return;i.uniform4uiv(this.addr,e),Tr(t,e)}}function Ztt(i,e,t){let n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s;this.type===i.SAMPLER_2D_SHADOW?(nR.compareFunction=IM,s=nR):s=bR,t.setTexture2D(e||s,r)}function Jtt(i,e,t){let n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||SR,r)}function Qtt(i,e,t){let n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||wR,r)}function tet(i,e,t){let n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||yR,r)}function eet(i){switch(i){case 5126:return Ntt;case 35664:return Ftt;case 35665:return Btt;case 35666:return Vtt;case 35674:return Utt;case 35675:return ztt;case 35676:return jtt;case 5124:case 35670:return Htt;case 35667:case 35671:return Wtt;case 35668:case 35672:return Gtt;case 35669:case 35673:return qtt;case 5125:return Xtt;case 36294:return Ytt;case 36295:return $tt;case 36296:return Ktt;case 35678:case 36198:case 36298:case 36306:case 35682:return Ztt;case 35679:case 36299:case 36307:return Jtt;case 35680:case 36300:case 36308:case 36293:return Qtt;case 36289:case 36303:case 36311:case 36292:return tet}}function net(i,e){i.uniform1fv(this.addr,e)}function iet(i,e){let t=Kh(e,this.size,2);i.uniform2fv(this.addr,t)}function ret(i,e){let t=Kh(e,this.size,3);i.uniform3fv(this.addr,t)}function set(i,e){let t=Kh(e,this.size,4);i.uniform4fv(this.addr,t)}function aet(i,e){let t=Kh(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function oet(i,e){let t=Kh(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function cet(i,e){let t=Kh(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function det(i,e){i.uniform1iv(this.addr,e)}function uet(i,e){i.uniform2iv(this.addr,e)}function het(i,e){i.uniform3iv(this.addr,e)}function pet(i,e){i.uniform4iv(this.addr,e)}function fet(i,e){i.uniform1uiv(this.addr,e)}function met(i,e){i.uniform2uiv(this.addr,e)}function get(i,e){i.uniform3uiv(this.addr,e)}function _et(i,e){i.uniform4uiv(this.addr,e)}function vet(i,e,t){let n=this.cache,r=e.length,s=Jx(t,r);Ar(n,s)||(i.uniform1iv(this.addr,s),Tr(n,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||bR,s[a])}function xet(i,e,t){let n=this.cache,r=e.length,s=Jx(t,r);Ar(n,s)||(i.uniform1iv(this.addr,s),Tr(n,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||SR,s[a])}function bet(i,e,t){let n=this.cache,r=e.length,s=Jx(t,r);Ar(n,s)||(i.uniform1iv(this.addr,s),Tr(n,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||wR,s[a])}function yet(i,e,t){let n=this.cache,r=e.length,s=Jx(t,r);Ar(n,s)||(i.uniform1iv(this.addr,s),Tr(n,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||yR,s[a])}function wet(i){switch(i){case 5126:return net;case 35664:return iet;case 35665:return ret;case 35666:return set;case 35674:return aet;case 35675:return oet;case 35676:return cet;case 5124:case 35670:return det;case 35667:case 35671:return uet;case 35668:case 35672:return het;case 35669:case 35673:return pet;case 5125:return fet;case 36294:return met;case 36295:return get;case 36296:return _et;case 35678:case 36198:case 36298:case 36306:case 35682:return vet;case 35679:case 36299:case 36307:return xet;case 35680:case 36300:case 36308:case 36293:return bet;case 36289:case 36303:case 36311:case 36292:return yet}}var HM=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=eet(t.type)}},WM=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=wet(t.type)}},GM=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){let r=this.seq;for(let s=0,a=r.length;s!==a;++s){let o=r[s];o.setValue(e,t[o.id],n)}}},jM=/(\w+)(\])?(\[|\.)?/g;function lR(i,e){i.seq.push(e),i.map[e.id]=e}function Cet(i,e,t){let n=i.name,r=n.length;for(jM.lastIndex=0;;){let s=jM.exec(n),a=jM.lastIndex,o=s[1],l=s[2]==="]",d=s[3];if(l&&(o=o|0),d===void 0||d==="["&&a+2===r){lR(t,d===void 0?new HM(o,i,e):new WM(o,i,e));break}else{let f=t.map[o];f===void 0&&(f=new GM(o),lR(t,f)),t=f}}}var $h=class{constructor(e,t){this.seq=[],this.map={};let n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){let s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);Cet(s,a,this)}}setValue(e,t,n,r){let s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){let r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,a=t.length;s!==a;++s){let o=t[s],l=n[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){let n=[];for(let r=0,s=e.length;r!==s;++r){let a=e[r];a.id in t&&n.push(a)}return n}};function cR(i,e,t){let n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}var Met=37297,Eet=0;function Aet(i,e){let t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){let o=a+1;n.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return n.join(`
`)}var dR=new Mn;function Tet(i){Zn._getMatrix(dR,Zn.workingColorSpace,i);let e=`mat3( ${dR.elements.map(t=>t.toFixed(4))} )`;switch(Zn.getTransfer(i)){case Im:return[e,"LinearTransferOETF"];case _i:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function uR(i,e,t){let n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";let s=/ERROR: 0:(\d+)/.exec(r);if(s){let a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Aet(i.getShaderSource(e),a)}else return r}function ket(i,e){let t=Tet(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Iet(i,e){let t;switch(e){case E4:t="Linear";break;case A4:t="Reinhard";break;case T4:t="Cineon";break;case k4:t="ACESFilmic";break;case D4:t="AgX";break;case P4:t="Neutral";break;case I4:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var $x=new zt;function Det(){Zn.getLuminanceCoefficients($x);let i=$x.x.toFixed(4),e=$x.y.toFixed(4),t=$x.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Pet(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(e0).join(`
`)}function Ret(i){let e=[];for(let t in i){let n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function Let(i,e){let t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){let s=i.getActiveAttrib(e,r),a=s.name,o=1;s.type===i.FLOAT_MAT2&&(o=2),s.type===i.FLOAT_MAT3&&(o=3),s.type===i.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:i.getAttribLocation(e,a),locationSize:o}}return t}function e0(i){return i!==""}function hR(i,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function pR(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var Oet=/^[ \t]*#include +<([\w\d./]+)>/gm;function qM(i){return i.replace(Oet,Fet)}var Net=new Map;function Fet(i,e){let t=Dn[e];if(t===void 0){let n=Net.get(e);if(n!==void 0)t=Dn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return qM(t)}var Bet=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function fR(i){return i.replace(Bet,Vet)}function Vet(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function mR(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Uet(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===fM?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===s4?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Mo&&(e="SHADOWMAP_TYPE_VSM"),e}function zet(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Wd:case Gd:e="ENVMAP_TYPE_CUBE";break;case Xm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function jet(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Gd:e="ENVMAP_MODE_REFRACTION";break}return e}function Het(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case vM:e="ENVMAP_BLENDING_MULTIPLY";break;case C4:e="ENVMAP_BLENDING_MIX";break;case M4:e="ENVMAP_BLENDING_ADD";break}return e}function Wet(i){let e=i.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function Get(i,e,t,n){let r=i.getContext(),s=t.defines,a=t.vertexShader,o=t.fragmentShader,l=Uet(t),d=zet(t),p=jet(t),f=Het(t),g=Wet(t),m=Pet(t),x=Ret(s),y=r.createProgram(),S,b,M=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(e0).join(`
`),S.length>0&&(S+=`
`),b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(e0).join(`
`),b.length>0&&(b+=`
`)):(S=[mR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(e0).join(`
`),b=[mR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",t.envMap?"#define "+f:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==vl?"#define TONE_MAPPING":"",t.toneMapping!==vl?Dn.tonemapping_pars_fragment:"",t.toneMapping!==vl?Iet("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Dn.colorspace_pars_fragment,ket("linearToOutputTexel",t.outputColorSpace),Det(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(e0).join(`
`)),a=qM(a),a=hR(a,t),a=pR(a,t),o=qM(o),o=hR(o,t),o=pR(o,t),a=fR(a),o=fR(o),t.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,S=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,b=["#define varying in",t.glslVersion===DM?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===DM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);let T=M+S+a,k=M+b+o,L=cR(r,r.VERTEX_SHADER,T),U=cR(r,r.FRAGMENT_SHADER,k);r.attachShader(y,L),r.attachShader(y,U),t.index0AttributeName!==void 0?r.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y);function N(P){if(i.debug.checkShaderErrors){let V=r.getProgramInfoLog(y).trim(),$=r.getShaderInfoLog(L).trim(),K=r.getShaderInfoLog(U).trim(),ct=!0,ot=!0;if(r.getProgramParameter(y,r.LINK_STATUS)===!1)if(ct=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,y,L,U);else{let st=uR(r,L,"vertex"),Q=uR(r,U,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,r.VALIDATE_STATUS)+`

Material Name: `+P.name+`
Material Type: `+P.type+`

Program Info Log: `+V+`
`+st+`
`+Q)}else V!==""?console.warn("THREE.WebGLProgram: Program Info Log:",V):($===""||K==="")&&(ot=!1);ot&&(P.diagnostics={runnable:ct,programLog:V,vertexShader:{log:$,prefix:S},fragmentShader:{log:K,prefix:b}})}r.deleteShader(L),r.deleteShader(U),F=new $h(r,y),O=Let(r,y)}let F;this.getUniforms=function(){return F===void 0&&N(this),F};let O;this.getAttributes=function(){return O===void 0&&N(this),O};let B=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return B===!1&&(B=r.getProgramParameter(y,Met)),B},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Eet++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=L,this.fragmentShader=U,this}var qet=0,XM=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){let t=this.shaderCache,n=t.get(e);return n===void 0&&(n=new YM(e),t.set(e,n)),n}},YM=class{constructor(e){this.id=qet++,this.code=e,this.usedTimes=0}};function Xet(i,e,t,n,r,s,a){let o=new Om,l=new XM,d=new Set,p=[],f=r.logarithmicDepthBuffer,g=r.vertexTextures,m=r.precision,x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(O){return d.add(O),O===0?"uv":`uv${O}`}function S(O,B,P,V,$){let K=V.fog,ct=$.geometry,ot=O.isMeshStandardMaterial?V.environment:null,st=(O.isMeshStandardMaterial?t:e).get(O.envMap||ot),Q=st&&st.mapping===Xm?st.image.height:null,xt=x[O.type];O.precision!==null&&(m=r.getMaxPrecision(O.precision),m!==O.precision&&console.warn("THREE.WebGLProgram.getParameters:",O.precision,"not supported, using",m,"instead."));let Mt=ct.morphAttributes.position||ct.morphAttributes.normal||ct.morphAttributes.color,qt=Mt!==void 0?Mt.length:0,z=0;ct.morphAttributes.position!==void 0&&(z=1),ct.morphAttributes.normal!==void 0&&(z=2),ct.morphAttributes.color!==void 0&&(z=3);let it,Z,at,pt;if(xt){let kn=ko[xt];it=kn.vertexShader,Z=kn.fragmentShader}else it=O.vertexShader,Z=O.fragmentShader,l.update(O),at=l.getVertexShaderID(O),pt=l.getFragmentShaderID(O);let ft=i.getRenderTarget(),St=i.state.buffers.depth.getReversed(),kt=$.isInstancedMesh===!0,Qt=$.isBatchedMesh===!0,ne=!!O.map,ue=!!O.matcap,_e=!!st,mt=!!O.aoMap,Yt=!!O.lightMap,ut=!!O.bumpMap,Te=!!O.normalMap,ae=!!O.displacementMap,ee=!!O.emissiveMap,Zt=!!O.metalnessMap,tt=!!O.roughnessMap,j=O.anisotropy>0,yt=O.clearcoat>0,jt=O.dispersion>0,Xt=O.iridescence>0,Ht=O.sheen>0,we=O.transmission>0,ge=j&&!!O.anisotropyMap,ce=yt&&!!O.clearcoatMap,Re=yt&&!!O.clearcoatNormalMap,Ut=yt&&!!O.clearcoatRoughnessMap,Me=Xt&&!!O.iridescenceMap,Ce=Xt&&!!O.iridescenceThicknessMap,Xe=Ht&&!!O.sheenColorMap,ye=Ht&&!!O.sheenRoughnessMap,Ge=!!O.specularMap,nn=!!O.specularColorMap,Ye=!!O.specularIntensityMap,It=we&&!!O.transmissionMap,ve=we&&!!O.thicknessMap,$t=!!O.gradientMap,ie=!!O.alphaMap,be=O.alphaTest>0,se=!!O.alphaHash,Pe=!!O.extensions,ri=vl;O.toneMapped&&(ft===null||ft.isXRRenderTarget===!0)&&(ri=i.toneMapping);let qn={shaderID:xt,shaderType:O.type,shaderName:O.name,vertexShader:it,fragmentShader:Z,defines:O.defines,customVertexShaderID:at,customFragmentShaderID:pt,isRawShaderMaterial:O.isRawShaderMaterial===!0,glslVersion:O.glslVersion,precision:m,batching:Qt,batchingColor:Qt&&$._colorsTexture!==null,instancing:kt,instancingColor:kt&&$.instanceColor!==null,instancingMorph:kt&&$.morphTexture!==null,supportsVertexTextures:g,outputColorSpace:ft===null?i.outputColorSpace:ft.isXRRenderTarget===!0?ft.texture.colorSpace:zd,alphaToCoverage:!!O.alphaToCoverage,map:ne,matcap:ue,envMap:_e,envMapMode:_e&&st.mapping,envMapCubeUVHeight:Q,aoMap:mt,lightMap:Yt,bumpMap:ut,normalMap:Te,displacementMap:g&&ae,emissiveMap:ee,normalMapObjectSpace:Te&&O.normalMapType===N4,normalMapTangentSpace:Te&&O.normalMapType===kM,metalnessMap:Zt,roughnessMap:tt,anisotropy:j,anisotropyMap:ge,clearcoat:yt,clearcoatMap:ce,clearcoatNormalMap:Re,clearcoatRoughnessMap:Ut,dispersion:jt,iridescence:Xt,iridescenceMap:Me,iridescenceThicknessMap:Ce,sheen:Ht,sheenColorMap:Xe,sheenRoughnessMap:ye,specularMap:Ge,specularColorMap:nn,specularIntensityMap:Ye,transmission:we,transmissionMap:It,thicknessMap:ve,gradientMap:$t,opaque:O.transparent===!1&&O.blending===Bd&&O.alphaToCoverage===!1,alphaMap:ie,alphaTest:be,alphaHash:se,combine:O.combine,mapUv:ne&&y(O.map.channel),aoMapUv:mt&&y(O.aoMap.channel),lightMapUv:Yt&&y(O.lightMap.channel),bumpMapUv:ut&&y(O.bumpMap.channel),normalMapUv:Te&&y(O.normalMap.channel),displacementMapUv:ae&&y(O.displacementMap.channel),emissiveMapUv:ee&&y(O.emissiveMap.channel),metalnessMapUv:Zt&&y(O.metalnessMap.channel),roughnessMapUv:tt&&y(O.roughnessMap.channel),anisotropyMapUv:ge&&y(O.anisotropyMap.channel),clearcoatMapUv:ce&&y(O.clearcoatMap.channel),clearcoatNormalMapUv:Re&&y(O.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ut&&y(O.clearcoatRoughnessMap.channel),iridescenceMapUv:Me&&y(O.iridescenceMap.channel),iridescenceThicknessMapUv:Ce&&y(O.iridescenceThicknessMap.channel),sheenColorMapUv:Xe&&y(O.sheenColorMap.channel),sheenRoughnessMapUv:ye&&y(O.sheenRoughnessMap.channel),specularMapUv:Ge&&y(O.specularMap.channel),specularColorMapUv:nn&&y(O.specularColorMap.channel),specularIntensityMapUv:Ye&&y(O.specularIntensityMap.channel),transmissionMapUv:It&&y(O.transmissionMap.channel),thicknessMapUv:ve&&y(O.thicknessMap.channel),alphaMapUv:ie&&y(O.alphaMap.channel),vertexTangents:!!ct.attributes.tangent&&(Te||j),vertexColors:O.vertexColors,vertexAlphas:O.vertexColors===!0&&!!ct.attributes.color&&ct.attributes.color.itemSize===4,pointsUvs:$.isPoints===!0&&!!ct.attributes.uv&&(ne||ie),fog:!!K,useFog:O.fog===!0,fogExp2:!!K&&K.isFogExp2,flatShading:O.flatShading===!0,sizeAttenuation:O.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:St,skinning:$.isSkinnedMesh===!0,morphTargets:ct.morphAttributes.position!==void 0,morphNormals:ct.morphAttributes.normal!==void 0,morphColors:ct.morphAttributes.color!==void 0,morphTargetsCount:qt,morphTextureStride:z,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numSpotLightMaps:B.spotLightMap.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numSpotLightShadowsWithMaps:B.numSpotLightShadowsWithMaps,numLightProbes:B.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:O.dithering,shadowMapEnabled:i.shadowMap.enabled&&P.length>0,shadowMapType:i.shadowMap.type,toneMapping:ri,decodeVideoTexture:ne&&O.map.isVideoTexture===!0&&Zn.getTransfer(O.map.colorSpace)===_i,decodeVideoTextureEmissive:ee&&O.emissiveMap.isVideoTexture===!0&&Zn.getTransfer(O.emissiveMap.colorSpace)===_i,premultipliedAlpha:O.premultipliedAlpha,doubleSided:O.side===Eo,flipSided:O.side===bs,useDepthPacking:O.depthPacking>=0,depthPacking:O.depthPacking||0,index0AttributeName:O.index0AttributeName,extensionClipCullDistance:Pe&&O.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Pe&&O.extensions.multiDraw===!0||Qt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:O.customProgramCacheKey()};return qn.vertexUv1s=d.has(1),qn.vertexUv2s=d.has(2),qn.vertexUv3s=d.has(3),d.clear(),qn}function b(O){let B=[];if(O.shaderID?B.push(O.shaderID):(B.push(O.customVertexShaderID),B.push(O.customFragmentShaderID)),O.defines!==void 0)for(let P in O.defines)B.push(P),B.push(O.defines[P]);return O.isRawShaderMaterial===!1&&(M(B,O),T(B,O),B.push(i.outputColorSpace)),B.push(O.customProgramCacheKey),B.join()}function M(O,B){O.push(B.precision),O.push(B.outputColorSpace),O.push(B.envMapMode),O.push(B.envMapCubeUVHeight),O.push(B.mapUv),O.push(B.alphaMapUv),O.push(B.lightMapUv),O.push(B.aoMapUv),O.push(B.bumpMapUv),O.push(B.normalMapUv),O.push(B.displacementMapUv),O.push(B.emissiveMapUv),O.push(B.metalnessMapUv),O.push(B.roughnessMapUv),O.push(B.anisotropyMapUv),O.push(B.clearcoatMapUv),O.push(B.clearcoatNormalMapUv),O.push(B.clearcoatRoughnessMapUv),O.push(B.iridescenceMapUv),O.push(B.iridescenceThicknessMapUv),O.push(B.sheenColorMapUv),O.push(B.sheenRoughnessMapUv),O.push(B.specularMapUv),O.push(B.specularColorMapUv),O.push(B.specularIntensityMapUv),O.push(B.transmissionMapUv),O.push(B.thicknessMapUv),O.push(B.combine),O.push(B.fogExp2),O.push(B.sizeAttenuation),O.push(B.morphTargetsCount),O.push(B.morphAttributeCount),O.push(B.numDirLights),O.push(B.numPointLights),O.push(B.numSpotLights),O.push(B.numSpotLightMaps),O.push(B.numHemiLights),O.push(B.numRectAreaLights),O.push(B.numDirLightShadows),O.push(B.numPointLightShadows),O.push(B.numSpotLightShadows),O.push(B.numSpotLightShadowsWithMaps),O.push(B.numLightProbes),O.push(B.shadowMapType),O.push(B.toneMapping),O.push(B.numClippingPlanes),O.push(B.numClipIntersection),O.push(B.depthPacking)}function T(O,B){o.disableAll(),B.supportsVertexTextures&&o.enable(0),B.instancing&&o.enable(1),B.instancingColor&&o.enable(2),B.instancingMorph&&o.enable(3),B.matcap&&o.enable(4),B.envMap&&o.enable(5),B.normalMapObjectSpace&&o.enable(6),B.normalMapTangentSpace&&o.enable(7),B.clearcoat&&o.enable(8),B.iridescence&&o.enable(9),B.alphaTest&&o.enable(10),B.vertexColors&&o.enable(11),B.vertexAlphas&&o.enable(12),B.vertexUv1s&&o.enable(13),B.vertexUv2s&&o.enable(14),B.vertexUv3s&&o.enable(15),B.vertexTangents&&o.enable(16),B.anisotropy&&o.enable(17),B.alphaHash&&o.enable(18),B.batching&&o.enable(19),B.dispersion&&o.enable(20),B.batchingColor&&o.enable(21),O.push(o.mask),o.disableAll(),B.fog&&o.enable(0),B.useFog&&o.enable(1),B.flatShading&&o.enable(2),B.logarithmicDepthBuffer&&o.enable(3),B.reverseDepthBuffer&&o.enable(4),B.skinning&&o.enable(5),B.morphTargets&&o.enable(6),B.morphNormals&&o.enable(7),B.morphColors&&o.enable(8),B.premultipliedAlpha&&o.enable(9),B.shadowMapEnabled&&o.enable(10),B.doubleSided&&o.enable(11),B.flipSided&&o.enable(12),B.useDepthPacking&&o.enable(13),B.dithering&&o.enable(14),B.transmission&&o.enable(15),B.sheen&&o.enable(16),B.opaque&&o.enable(17),B.pointsUvs&&o.enable(18),B.decodeVideoTexture&&o.enable(19),B.decodeVideoTextureEmissive&&o.enable(20),B.alphaToCoverage&&o.enable(21),O.push(o.mask)}function k(O){let B=x[O.type],P;if(B){let V=ko[B];P=$4.clone(V.uniforms)}else P=O.uniforms;return P}function L(O,B){let P;for(let V=0,$=p.length;V<$;V++){let K=p[V];if(K.cacheKey===B){P=K,++P.usedTimes;break}}return P===void 0&&(P=new Get(i,B,O,s),p.push(P)),P}function U(O){if(--O.usedTimes===0){let B=p.indexOf(O);p[B]=p[p.length-1],p.pop(),O.destroy()}}function N(O){l.remove(O)}function F(){l.dispose()}return{getParameters:S,getProgramCacheKey:b,getUniforms:k,acquireProgram:L,releaseProgram:U,releaseShaderCache:N,programs:p,dispose:F}}function Yet(){let i=new WeakMap;function e(a){return i.has(a)}function t(a){let o=i.get(a);return o===void 0&&(o={},i.set(a,o)),o}function n(a){i.delete(a)}function r(a,o,l){i.get(a)[o]=l}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:s}}function $et(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function gR(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function _R(){let i=[],e=0,t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function a(f,g,m,x,y,S){let b=i[e];return b===void 0?(b={id:f.id,object:f,geometry:g,material:m,groupOrder:x,renderOrder:f.renderOrder,z:y,group:S},i[e]=b):(b.id=f.id,b.object=f,b.geometry=g,b.material=m,b.groupOrder=x,b.renderOrder=f.renderOrder,b.z=y,b.group=S),e++,b}function o(f,g,m,x,y,S){let b=a(f,g,m,x,y,S);m.transmission>0?n.push(b):m.transparent===!0?r.push(b):t.push(b)}function l(f,g,m,x,y,S){let b=a(f,g,m,x,y,S);m.transmission>0?n.unshift(b):m.transparent===!0?r.unshift(b):t.unshift(b)}function d(f,g){t.length>1&&t.sort(f||$et),n.length>1&&n.sort(g||gR),r.length>1&&r.sort(g||gR)}function p(){for(let f=e,g=i.length;f<g;f++){let m=i[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:o,unshift:l,finish:p,sort:d}}function Ket(){let i=new WeakMap;function e(n,r){let s=i.get(n),a;return s===void 0?(a=new _R,i.set(n,[a])):r>=s.length?(a=new _R,s.push(a)):a=s[r],a}function t(){i=new WeakMap}return{get:e,dispose:t}}function Zet(){let i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new zt,color:new $n};break;case"SpotLight":t={position:new zt,direction:new zt,color:new $n,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new zt,color:new $n,distance:0,decay:0};break;case"HemisphereLight":t={direction:new zt,skyColor:new $n,groundColor:new $n};break;case"RectAreaLight":t={color:new $n,position:new zt,halfWidth:new zt,halfHeight:new zt};break}return i[e.id]=t,t}}}function Jet(){let i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qn};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qn};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qn,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}var Qet=0;function tnt(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function ent(i){let e=new Zet,t=Jet(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)n.probe.push(new zt);let r=new zt,s=new Xi,a=new Xi;function o(d){let p=0,f=0,g=0;for(let O=0;O<9;O++)n.probe[O].set(0,0,0);let m=0,x=0,y=0,S=0,b=0,M=0,T=0,k=0,L=0,U=0,N=0;d.sort(tnt);for(let O=0,B=d.length;O<B;O++){let P=d[O],V=P.color,$=P.intensity,K=P.distance,ct=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)p+=V.r*$,f+=V.g*$,g+=V.b*$;else if(P.isLightProbe){for(let ot=0;ot<9;ot++)n.probe[ot].addScaledVector(P.sh.coefficients[ot],$);N++}else if(P.isDirectionalLight){let ot=e.get(P);if(ot.color.copy(P.color).multiplyScalar(P.intensity),P.castShadow){let st=P.shadow,Q=t.get(P);Q.shadowIntensity=st.intensity,Q.shadowBias=st.bias,Q.shadowNormalBias=st.normalBias,Q.shadowRadius=st.radius,Q.shadowMapSize=st.mapSize,n.directionalShadow[m]=Q,n.directionalShadowMap[m]=ct,n.directionalShadowMatrix[m]=P.shadow.matrix,M++}n.directional[m]=ot,m++}else if(P.isSpotLight){let ot=e.get(P);ot.position.setFromMatrixPosition(P.matrixWorld),ot.color.copy(V).multiplyScalar($),ot.distance=K,ot.coneCos=Math.cos(P.angle),ot.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),ot.decay=P.decay,n.spot[y]=ot;let st=P.shadow;if(P.map&&(n.spotLightMap[L]=P.map,L++,st.updateMatrices(P),P.castShadow&&U++),n.spotLightMatrix[y]=st.matrix,P.castShadow){let Q=t.get(P);Q.shadowIntensity=st.intensity,Q.shadowBias=st.bias,Q.shadowNormalBias=st.normalBias,Q.shadowRadius=st.radius,Q.shadowMapSize=st.mapSize,n.spotShadow[y]=Q,n.spotShadowMap[y]=ct,k++}y++}else if(P.isRectAreaLight){let ot=e.get(P);ot.color.copy(V).multiplyScalar($),ot.halfWidth.set(P.width*.5,0,0),ot.halfHeight.set(0,P.height*.5,0),n.rectArea[S]=ot,S++}else if(P.isPointLight){let ot=e.get(P);if(ot.color.copy(P.color).multiplyScalar(P.intensity),ot.distance=P.distance,ot.decay=P.decay,P.castShadow){let st=P.shadow,Q=t.get(P);Q.shadowIntensity=st.intensity,Q.shadowBias=st.bias,Q.shadowNormalBias=st.normalBias,Q.shadowRadius=st.radius,Q.shadowMapSize=st.mapSize,Q.shadowCameraNear=st.camera.near,Q.shadowCameraFar=st.camera.far,n.pointShadow[x]=Q,n.pointShadowMap[x]=ct,n.pointShadowMatrix[x]=P.shadow.matrix,T++}n.point[x]=ot,x++}else if(P.isHemisphereLight){let ot=e.get(P);ot.skyColor.copy(P.color).multiplyScalar($),ot.groundColor.copy(P.groundColor).multiplyScalar($),n.hemi[b]=ot,b++}}S>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Ie.LTC_FLOAT_1,n.rectAreaLTC2=Ie.LTC_FLOAT_2):(n.rectAreaLTC1=Ie.LTC_HALF_1,n.rectAreaLTC2=Ie.LTC_HALF_2)),n.ambient[0]=p,n.ambient[1]=f,n.ambient[2]=g;let F=n.hash;(F.directionalLength!==m||F.pointLength!==x||F.spotLength!==y||F.rectAreaLength!==S||F.hemiLength!==b||F.numDirectionalShadows!==M||F.numPointShadows!==T||F.numSpotShadows!==k||F.numSpotMaps!==L||F.numLightProbes!==N)&&(n.directional.length=m,n.spot.length=y,n.rectArea.length=S,n.point.length=x,n.hemi.length=b,n.directionalShadow.length=M,n.directionalShadowMap.length=M,n.pointShadow.length=T,n.pointShadowMap.length=T,n.spotShadow.length=k,n.spotShadowMap.length=k,n.directionalShadowMatrix.length=M,n.pointShadowMatrix.length=T,n.spotLightMatrix.length=k+L-U,n.spotLightMap.length=L,n.numSpotLightShadowsWithMaps=U,n.numLightProbes=N,F.directionalLength=m,F.pointLength=x,F.spotLength=y,F.rectAreaLength=S,F.hemiLength=b,F.numDirectionalShadows=M,F.numPointShadows=T,F.numSpotShadows=k,F.numSpotMaps=L,F.numLightProbes=N,n.version=Qet++)}function l(d,p){let f=0,g=0,m=0,x=0,y=0,S=p.matrixWorldInverse;for(let b=0,M=d.length;b<M;b++){let T=d[b];if(T.isDirectionalLight){let k=n.directional[f];k.direction.setFromMatrixPosition(T.matrixWorld),r.setFromMatrixPosition(T.target.matrixWorld),k.direction.sub(r),k.direction.transformDirection(S),f++}else if(T.isSpotLight){let k=n.spot[m];k.position.setFromMatrixPosition(T.matrixWorld),k.position.applyMatrix4(S),k.direction.setFromMatrixPosition(T.matrixWorld),r.setFromMatrixPosition(T.target.matrixWorld),k.direction.sub(r),k.direction.transformDirection(S),m++}else if(T.isRectAreaLight){let k=n.rectArea[x];k.position.setFromMatrixPosition(T.matrixWorld),k.position.applyMatrix4(S),a.identity(),s.copy(T.matrixWorld),s.premultiply(S),a.extractRotation(s),k.halfWidth.set(T.width*.5,0,0),k.halfHeight.set(0,T.height*.5,0),k.halfWidth.applyMatrix4(a),k.halfHeight.applyMatrix4(a),x++}else if(T.isPointLight){let k=n.point[g];k.position.setFromMatrixPosition(T.matrixWorld),k.position.applyMatrix4(S),g++}else if(T.isHemisphereLight){let k=n.hemi[y];k.direction.setFromMatrixPosition(T.matrixWorld),k.direction.transformDirection(S),y++}}}return{setup:o,setupView:l,state:n}}function vR(i){let e=new ent(i),t=[],n=[];function r(p){d.camera=p,t.length=0,n.length=0}function s(p){t.push(p)}function a(p){n.push(p)}function o(){e.setup(t)}function l(p){e.setupView(t,p)}let d={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:d,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function nnt(i){let e=new WeakMap;function t(r,s=0){let a=e.get(r),o;return a===void 0?(o=new vR(i),e.set(r,[o])):s>=a.length?(o=new vR(i),a.push(o)):o=a[s],o}function n(){e=new WeakMap}return{get:t,dispose:n}}var int=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,rnt=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function snt(i,e,t){let n=new Wh,r=new Qn,s=new Qn,a=new gi,o=new qv({depthPacking:O4}),l=new Xv,d={},p=t.maxTextureSize,f={[hl]:bs,[bs]:hl,[Eo]:Eo},g=new Ja({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Qn},radius:{value:4}},vertexShader:int,fragmentShader:rnt}),m=g.clone();m.defines.HORIZONTAL_PASS=1;let x=new ml;x.setAttribute("position",new ea(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let y=new ds(x,g),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=fM;let b=this.type;this.render=function(U,N,F){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||U.length===0)return;let O=i.getRenderTarget(),B=i.getActiveCubeFace(),P=i.getActiveMipmapLevel(),V=i.state;V.setBlending(_l),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);let $=b!==Mo&&this.type===Mo,K=b===Mo&&this.type!==Mo;for(let ct=0,ot=U.length;ct<ot;ct++){let st=U[ct],Q=st.shadow;if(Q===void 0){console.warn("THREE.WebGLShadowMap:",st,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;r.copy(Q.mapSize);let xt=Q.getFrameExtents();if(r.multiply(xt),s.copy(Q.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(s.x=Math.floor(p/xt.x),r.x=s.x*xt.x,Q.mapSize.x=s.x),r.y>p&&(s.y=Math.floor(p/xt.y),r.y=s.y*xt.y,Q.mapSize.y=s.y)),Q.map===null||$===!0||K===!0){let qt=this.type!==Mo?{minFilter:wa,magFilter:wa}:{};Q.map!==null&&Q.map.dispose(),Q.map=new Co(r.x,r.y,qt),Q.map.texture.name=st.name+".shadowMap",Q.camera.updateProjectionMatrix()}i.setRenderTarget(Q.map),i.clear();let Mt=Q.getViewportCount();for(let qt=0;qt<Mt;qt++){let z=Q.getViewport(qt);a.set(s.x*z.x,s.y*z.y,s.x*z.z,s.y*z.w),V.viewport(a),Q.updateMatrices(st,qt),n=Q.getFrustum(),k(N,F,Q.camera,st,this.type)}Q.isPointLightShadow!==!0&&this.type===Mo&&M(Q,F),Q.needsUpdate=!1}b=this.type,S.needsUpdate=!1,i.setRenderTarget(O,B,P)};function M(U,N){let F=e.update(y);g.defines.VSM_SAMPLES!==U.blurSamples&&(g.defines.VSM_SAMPLES=U.blurSamples,m.defines.VSM_SAMPLES=U.blurSamples,g.needsUpdate=!0,m.needsUpdate=!0),U.mapPass===null&&(U.mapPass=new Co(r.x,r.y)),g.uniforms.shadow_pass.value=U.map.texture,g.uniforms.resolution.value=U.mapSize,g.uniforms.radius.value=U.radius,i.setRenderTarget(U.mapPass),i.clear(),i.renderBufferDirect(N,null,F,g,y,null),m.uniforms.shadow_pass.value=U.mapPass.texture,m.uniforms.resolution.value=U.mapSize,m.uniforms.radius.value=U.radius,i.setRenderTarget(U.map),i.clear(),i.renderBufferDirect(N,null,F,m,y,null)}function T(U,N,F,O){let B=null,P=F.isPointLight===!0?U.customDistanceMaterial:U.customDepthMaterial;if(P!==void 0)B=P;else if(B=F.isPointLight===!0?l:o,i.localClippingEnabled&&N.clipShadows===!0&&Array.isArray(N.clippingPlanes)&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0||N.map&&N.alphaTest>0){let V=B.uuid,$=N.uuid,K=d[V];K===void 0&&(K={},d[V]=K);let ct=K[$];ct===void 0&&(ct=B.clone(),K[$]=ct,N.addEventListener("dispose",L)),B=ct}if(B.visible=N.visible,B.wireframe=N.wireframe,O===Mo?B.side=N.shadowSide!==null?N.shadowSide:N.side:B.side=N.shadowSide!==null?N.shadowSide:f[N.side],B.alphaMap=N.alphaMap,B.alphaTest=N.alphaTest,B.map=N.map,B.clipShadows=N.clipShadows,B.clippingPlanes=N.clippingPlanes,B.clipIntersection=N.clipIntersection,B.displacementMap=N.displacementMap,B.displacementScale=N.displacementScale,B.displacementBias=N.displacementBias,B.wireframeLinewidth=N.wireframeLinewidth,B.linewidth=N.linewidth,F.isPointLight===!0&&B.isMeshDistanceMaterial===!0){let V=i.properties.get(B);V.light=F}return B}function k(U,N,F,O,B){if(U.visible===!1)return;if(U.layers.test(N.layers)&&(U.isMesh||U.isLine||U.isPoints)&&(U.castShadow||U.receiveShadow&&B===Mo)&&(!U.frustumCulled||n.intersectsObject(U))){U.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,U.matrixWorld);let $=e.update(U),K=U.material;if(Array.isArray(K)){let ct=$.groups;for(let ot=0,st=ct.length;ot<st;ot++){let Q=ct[ot],xt=K[Q.materialIndex];if(xt&&xt.visible){let Mt=T(U,xt,O,B);U.onBeforeShadow(i,U,N,F,$,Mt,Q),i.renderBufferDirect(F,null,$,Mt,U,Q),U.onAfterShadow(i,U,N,F,$,Mt,Q)}}}else if(K.visible){let ct=T(U,K,O,B);U.onBeforeShadow(i,U,N,F,$,ct,null),i.renderBufferDirect(F,null,$,ct,U,null),U.onAfterShadow(i,U,N,F,$,ct,null)}}let V=U.children;for(let $=0,K=V.length;$<K;$++)k(V[$],N,F,O,B)}function L(U){U.target.removeEventListener("dispose",L);for(let F in d){let O=d[F],B=U.target.uuid;B in O&&(O[B].dispose(),delete O[B])}}}var ant={[sx]:ax,[ox]:dx,[lx]:ux,[Vd]:cx,[ax]:sx,[dx]:ox,[ux]:lx,[cx]:Vd};function ont(i,e){function t(){let It=!1,ve=new gi,$t=null,ie=new gi(0,0,0,0);return{setMask:function(be){$t!==be&&!It&&(i.colorMask(be,be,be,be),$t=be)},setLocked:function(be){It=be},setClear:function(be,se,Pe,ri,qn){qn===!0&&(be*=ri,se*=ri,Pe*=ri),ve.set(be,se,Pe,ri),ie.equals(ve)===!1&&(i.clearColor(be,se,Pe,ri),ie.copy(ve))},reset:function(){It=!1,$t=null,ie.set(-1,0,0,0)}}}function n(){let It=!1,ve=!1,$t=null,ie=null,be=null;return{setReversed:function(se){if(ve!==se){let Pe=e.get("EXT_clip_control");ve?Pe.clipControlEXT(Pe.LOWER_LEFT_EXT,Pe.ZERO_TO_ONE_EXT):Pe.clipControlEXT(Pe.LOWER_LEFT_EXT,Pe.NEGATIVE_ONE_TO_ONE_EXT);let ri=be;be=null,this.setClear(ri)}ve=se},getReversed:function(){return ve},setTest:function(se){se?ft(i.DEPTH_TEST):St(i.DEPTH_TEST)},setMask:function(se){$t!==se&&!It&&(i.depthMask(se),$t=se)},setFunc:function(se){if(ve&&(se=ant[se]),ie!==se){switch(se){case sx:i.depthFunc(i.NEVER);break;case ax:i.depthFunc(i.ALWAYS);break;case ox:i.depthFunc(i.LESS);break;case Vd:i.depthFunc(i.LEQUAL);break;case lx:i.depthFunc(i.EQUAL);break;case cx:i.depthFunc(i.GEQUAL);break;case dx:i.depthFunc(i.GREATER);break;case ux:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}ie=se}},setLocked:function(se){It=se},setClear:function(se){be!==se&&(ve&&(se=1-se),i.clearDepth(se),be=se)},reset:function(){It=!1,$t=null,ie=null,be=null,ve=!1}}}function r(){let It=!1,ve=null,$t=null,ie=null,be=null,se=null,Pe=null,ri=null,qn=null;return{setTest:function(kn){It||(kn?ft(i.STENCIL_TEST):St(i.STENCIL_TEST))},setMask:function(kn){ve!==kn&&!It&&(i.stencilMask(kn),ve=kn)},setFunc:function(kn,Yi,He){($t!==kn||ie!==Yi||be!==He)&&(i.stencilFunc(kn,Yi,He),$t=kn,ie=Yi,be=He)},setOp:function(kn,Yi,He){(se!==kn||Pe!==Yi||ri!==He)&&(i.stencilOp(kn,Yi,He),se=kn,Pe=Yi,ri=He)},setLocked:function(kn){It=kn},setClear:function(kn){qn!==kn&&(i.clearStencil(kn),qn=kn)},reset:function(){It=!1,ve=null,$t=null,ie=null,be=null,se=null,Pe=null,ri=null,qn=null}}}let s=new t,a=new n,o=new r,l=new WeakMap,d=new WeakMap,p={},f={},g=new WeakMap,m=[],x=null,y=!1,S=null,b=null,M=null,T=null,k=null,L=null,U=null,N=new $n(0,0,0),F=0,O=!1,B=null,P=null,V=null,$=null,K=null,ct=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ot=!1,st=0,Q=i.getParameter(i.VERSION);Q.indexOf("WebGL")!==-1?(st=parseFloat(/^WebGL (\d)/.exec(Q)[1]),ot=st>=1):Q.indexOf("OpenGL ES")!==-1&&(st=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),ot=st>=2);let xt=null,Mt={},qt=i.getParameter(i.SCISSOR_BOX),z=i.getParameter(i.VIEWPORT),it=new gi().fromArray(qt),Z=new gi().fromArray(z);function at(It,ve,$t,ie){let be=new Uint8Array(4),se=i.createTexture();i.bindTexture(It,se),i.texParameteri(It,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(It,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Pe=0;Pe<$t;Pe++)It===i.TEXTURE_3D||It===i.TEXTURE_2D_ARRAY?i.texImage3D(ve,0,i.RGBA,1,1,ie,0,i.RGBA,i.UNSIGNED_BYTE,be):i.texImage2D(ve+Pe,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,be);return se}let pt={};pt[i.TEXTURE_2D]=at(i.TEXTURE_2D,i.TEXTURE_2D,1),pt[i.TEXTURE_CUBE_MAP]=at(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),pt[i.TEXTURE_2D_ARRAY]=at(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),pt[i.TEXTURE_3D]=at(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),ft(i.DEPTH_TEST),a.setFunc(Vd),ut(!1),Te(pM),ft(i.CULL_FACE),mt(_l);function ft(It){p[It]!==!0&&(i.enable(It),p[It]=!0)}function St(It){p[It]!==!1&&(i.disable(It),p[It]=!1)}function kt(It,ve){return f[It]!==ve?(i.bindFramebuffer(It,ve),f[It]=ve,It===i.DRAW_FRAMEBUFFER&&(f[i.FRAMEBUFFER]=ve),It===i.FRAMEBUFFER&&(f[i.DRAW_FRAMEBUFFER]=ve),!0):!1}function Qt(It,ve){let $t=m,ie=!1;if(It){$t=g.get(ve),$t===void 0&&($t=[],g.set(ve,$t));let be=It.textures;if($t.length!==be.length||$t[0]!==i.COLOR_ATTACHMENT0){for(let se=0,Pe=be.length;se<Pe;se++)$t[se]=i.COLOR_ATTACHMENT0+se;$t.length=be.length,ie=!0}}else $t[0]!==i.BACK&&($t[0]=i.BACK,ie=!0);ie&&i.drawBuffers($t)}function ne(It){return x!==It?(i.useProgram(It),x=It,!0):!1}let ue={[kc]:i.FUNC_ADD,[o4]:i.FUNC_SUBTRACT,[l4]:i.FUNC_REVERSE_SUBTRACT};ue[c4]=i.MIN,ue[d4]=i.MAX;let _e={[u4]:i.ZERO,[h4]:i.ONE,[p4]:i.SRC_COLOR,[Lv]:i.SRC_ALPHA,[x4]:i.SRC_ALPHA_SATURATE,[_4]:i.DST_COLOR,[m4]:i.DST_ALPHA,[f4]:i.ONE_MINUS_SRC_COLOR,[Ov]:i.ONE_MINUS_SRC_ALPHA,[v4]:i.ONE_MINUS_DST_COLOR,[g4]:i.ONE_MINUS_DST_ALPHA,[b4]:i.CONSTANT_COLOR,[y4]:i.ONE_MINUS_CONSTANT_COLOR,[S4]:i.CONSTANT_ALPHA,[w4]:i.ONE_MINUS_CONSTANT_ALPHA};function mt(It,ve,$t,ie,be,se,Pe,ri,qn,kn){if(It===_l){y===!0&&(St(i.BLEND),y=!1);return}if(y===!1&&(ft(i.BLEND),y=!0),It!==a4){if(It!==S||kn!==O){if((b!==kc||k!==kc)&&(i.blendEquation(i.FUNC_ADD),b=kc,k=kc),kn)switch(It){case Bd:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case mM:i.blendFunc(i.ONE,i.ONE);break;case gM:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case _M:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",It);break}else switch(It){case Bd:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case mM:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case gM:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case _M:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",It);break}M=null,T=null,L=null,U=null,N.set(0,0,0),F=0,S=It,O=kn}return}be=be||ve,se=se||$t,Pe=Pe||ie,(ve!==b||be!==k)&&(i.blendEquationSeparate(ue[ve],ue[be]),b=ve,k=be),($t!==M||ie!==T||se!==L||Pe!==U)&&(i.blendFuncSeparate(_e[$t],_e[ie],_e[se],_e[Pe]),M=$t,T=ie,L=se,U=Pe),(ri.equals(N)===!1||qn!==F)&&(i.blendColor(ri.r,ri.g,ri.b,qn),N.copy(ri),F=qn),S=It,O=!1}function Yt(It,ve){It.side===Eo?St(i.CULL_FACE):ft(i.CULL_FACE);let $t=It.side===bs;ve&&($t=!$t),ut($t),It.blending===Bd&&It.transparent===!1?mt(_l):mt(It.blending,It.blendEquation,It.blendSrc,It.blendDst,It.blendEquationAlpha,It.blendSrcAlpha,It.blendDstAlpha,It.blendColor,It.blendAlpha,It.premultipliedAlpha),a.setFunc(It.depthFunc),a.setTest(It.depthTest),a.setMask(It.depthWrite),s.setMask(It.colorWrite);let ie=It.stencilWrite;o.setTest(ie),ie&&(o.setMask(It.stencilWriteMask),o.setFunc(It.stencilFunc,It.stencilRef,It.stencilFuncMask),o.setOp(It.stencilFail,It.stencilZFail,It.stencilZPass)),ee(It.polygonOffset,It.polygonOffsetFactor,It.polygonOffsetUnits),It.alphaToCoverage===!0?ft(i.SAMPLE_ALPHA_TO_COVERAGE):St(i.SAMPLE_ALPHA_TO_COVERAGE)}function ut(It){B!==It&&(It?i.frontFace(i.CW):i.frontFace(i.CCW),B=It)}function Te(It){It!==i4?(ft(i.CULL_FACE),It!==P&&(It===pM?i.cullFace(i.BACK):It===r4?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):St(i.CULL_FACE),P=It}function ae(It){It!==V&&(ot&&i.lineWidth(It),V=It)}function ee(It,ve,$t){It?(ft(i.POLYGON_OFFSET_FILL),($!==ve||K!==$t)&&(i.polygonOffset(ve,$t),$=ve,K=$t)):St(i.POLYGON_OFFSET_FILL)}function Zt(It){It?ft(i.SCISSOR_TEST):St(i.SCISSOR_TEST)}function tt(It){It===void 0&&(It=i.TEXTURE0+ct-1),xt!==It&&(i.activeTexture(It),xt=It)}function j(It,ve,$t){$t===void 0&&(xt===null?$t=i.TEXTURE0+ct-1:$t=xt);let ie=Mt[$t];ie===void 0&&(ie={type:void 0,texture:void 0},Mt[$t]=ie),(ie.type!==It||ie.texture!==ve)&&(xt!==$t&&(i.activeTexture($t),xt=$t),i.bindTexture(It,ve||pt[It]),ie.type=It,ie.texture=ve)}function yt(){let It=Mt[xt];It!==void 0&&It.type!==void 0&&(i.bindTexture(It.type,null),It.type=void 0,It.texture=void 0)}function jt(){try{i.compressedTexImage2D.apply(i,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function Xt(){try{i.compressedTexImage3D.apply(i,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function Ht(){try{i.texSubImage2D.apply(i,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function we(){try{i.texSubImage3D.apply(i,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function ge(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function ce(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function Re(){try{i.texStorage2D.apply(i,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function Ut(){try{i.texStorage3D.apply(i,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function Me(){try{i.texImage2D.apply(i,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function Ce(){try{i.texImage3D.apply(i,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function Xe(It){it.equals(It)===!1&&(i.scissor(It.x,It.y,It.z,It.w),it.copy(It))}function ye(It){Z.equals(It)===!1&&(i.viewport(It.x,It.y,It.z,It.w),Z.copy(It))}function Ge(It,ve){let $t=d.get(ve);$t===void 0&&($t=new WeakMap,d.set(ve,$t));let ie=$t.get(It);ie===void 0&&(ie=i.getUniformBlockIndex(ve,It.name),$t.set(It,ie))}function nn(It,ve){let ie=d.get(ve).get(It);l.get(ve)!==ie&&(i.uniformBlockBinding(ve,ie,It.__bindingPointIndex),l.set(ve,ie))}function Ye(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),a.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),p={},xt=null,Mt={},f={},g=new WeakMap,m=[],x=null,y=!1,S=null,b=null,M=null,T=null,k=null,L=null,U=null,N=new $n(0,0,0),F=0,O=!1,B=null,P=null,V=null,$=null,K=null,it.set(0,0,i.canvas.width,i.canvas.height),Z.set(0,0,i.canvas.width,i.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:ft,disable:St,bindFramebuffer:kt,drawBuffers:Qt,useProgram:ne,setBlending:mt,setMaterial:Yt,setFlipSided:ut,setCullFace:Te,setLineWidth:ae,setPolygonOffset:ee,setScissorTest:Zt,activeTexture:tt,bindTexture:j,unbindTexture:yt,compressedTexImage2D:jt,compressedTexImage3D:Xt,texImage2D:Me,texImage3D:Ce,updateUBOMapping:Ge,uniformBlockBinding:nn,texStorage2D:Re,texStorage3D:Ut,texSubImage2D:Ht,texSubImage3D:we,compressedTexSubImage2D:ge,compressedTexSubImage3D:ce,scissor:Xe,viewport:ye,reset:Ye}}function lnt(i,e,t,n,r,s,a){let o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new Qn,p=new WeakMap,f,g=new WeakMap,m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(tt,j){return m?new OffscreenCanvas(tt,j):Pm("canvas")}function y(tt,j,yt){let jt=1,Xt=Zt(tt);if((Xt.width>yt||Xt.height>yt)&&(jt=yt/Math.max(Xt.width,Xt.height)),jt<1)if(typeof HTMLImageElement<"u"&&tt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&tt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&tt instanceof ImageBitmap||typeof VideoFrame<"u"&&tt instanceof VideoFrame){let Ht=Math.floor(jt*Xt.width),we=Math.floor(jt*Xt.height);f===void 0&&(f=x(Ht,we));let ge=j?x(Ht,we):f;return ge.width=Ht,ge.height=we,ge.getContext("2d").drawImage(tt,0,0,Ht,we),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Xt.width+"x"+Xt.height+") to ("+Ht+"x"+we+")."),ge}else return"data"in tt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Xt.width+"x"+Xt.height+")."),tt;return tt}function S(tt){return tt.generateMipmaps}function b(tt){i.generateMipmap(tt)}function M(tt){return tt.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:tt.isWebGL3DRenderTarget?i.TEXTURE_3D:tt.isWebGLArrayRenderTarget||tt.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function T(tt,j,yt,jt,Xt=!1){if(tt!==null){if(i[tt]!==void 0)return i[tt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+tt+"'")}let Ht=j;if(j===i.RED&&(yt===i.FLOAT&&(Ht=i.R32F),yt===i.HALF_FLOAT&&(Ht=i.R16F),yt===i.UNSIGNED_BYTE&&(Ht=i.R8)),j===i.RED_INTEGER&&(yt===i.UNSIGNED_BYTE&&(Ht=i.R8UI),yt===i.UNSIGNED_SHORT&&(Ht=i.R16UI),yt===i.UNSIGNED_INT&&(Ht=i.R32UI),yt===i.BYTE&&(Ht=i.R8I),yt===i.SHORT&&(Ht=i.R16I),yt===i.INT&&(Ht=i.R32I)),j===i.RG&&(yt===i.FLOAT&&(Ht=i.RG32F),yt===i.HALF_FLOAT&&(Ht=i.RG16F),yt===i.UNSIGNED_BYTE&&(Ht=i.RG8)),j===i.RG_INTEGER&&(yt===i.UNSIGNED_BYTE&&(Ht=i.RG8UI),yt===i.UNSIGNED_SHORT&&(Ht=i.RG16UI),yt===i.UNSIGNED_INT&&(Ht=i.RG32UI),yt===i.BYTE&&(Ht=i.RG8I),yt===i.SHORT&&(Ht=i.RG16I),yt===i.INT&&(Ht=i.RG32I)),j===i.RGB_INTEGER&&(yt===i.UNSIGNED_BYTE&&(Ht=i.RGB8UI),yt===i.UNSIGNED_SHORT&&(Ht=i.RGB16UI),yt===i.UNSIGNED_INT&&(Ht=i.RGB32UI),yt===i.BYTE&&(Ht=i.RGB8I),yt===i.SHORT&&(Ht=i.RGB16I),yt===i.INT&&(Ht=i.RGB32I)),j===i.RGBA_INTEGER&&(yt===i.UNSIGNED_BYTE&&(Ht=i.RGBA8UI),yt===i.UNSIGNED_SHORT&&(Ht=i.RGBA16UI),yt===i.UNSIGNED_INT&&(Ht=i.RGBA32UI),yt===i.BYTE&&(Ht=i.RGBA8I),yt===i.SHORT&&(Ht=i.RGBA16I),yt===i.INT&&(Ht=i.RGBA32I)),j===i.RGB&&yt===i.UNSIGNED_INT_5_9_9_9_REV&&(Ht=i.RGB9_E5),j===i.RGBA){let we=Xt?Im:Zn.getTransfer(jt);yt===i.FLOAT&&(Ht=i.RGBA32F),yt===i.HALF_FLOAT&&(Ht=i.RGBA16F),yt===i.UNSIGNED_BYTE&&(Ht=we===_i?i.SRGB8_ALPHA8:i.RGBA8),yt===i.UNSIGNED_SHORT_4_4_4_4&&(Ht=i.RGBA4),yt===i.UNSIGNED_SHORT_5_5_5_1&&(Ht=i.RGB5_A1)}return(Ht===i.R16F||Ht===i.R32F||Ht===i.RG16F||Ht===i.RG32F||Ht===i.RGBA16F||Ht===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Ht}function k(tt,j){let yt;return tt?j===null||j===Fc||j===qd?yt=i.DEPTH24_STENCIL8:j===To?yt=i.DEPTH32F_STENCIL8:j===Gh&&(yt=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):j===null||j===Fc||j===qd?yt=i.DEPTH_COMPONENT24:j===To?yt=i.DEPTH_COMPONENT32F:j===Gh&&(yt=i.DEPTH_COMPONENT16),yt}function L(tt,j){return S(tt)===!0||tt.isFramebufferTexture&&tt.minFilter!==wa&&tt.minFilter!==Za?Math.log2(Math.max(j.width,j.height))+1:tt.mipmaps!==void 0&&tt.mipmaps.length>0?tt.mipmaps.length:tt.isCompressedTexture&&Array.isArray(tt.image)?j.mipmaps.length:1}function U(tt){let j=tt.target;j.removeEventListener("dispose",U),F(j),j.isVideoTexture&&p.delete(j)}function N(tt){let j=tt.target;j.removeEventListener("dispose",N),B(j)}function F(tt){let j=n.get(tt);if(j.__webglInit===void 0)return;let yt=tt.source,jt=g.get(yt);if(jt){let Xt=jt[j.__cacheKey];Xt.usedTimes--,Xt.usedTimes===0&&O(tt),Object.keys(jt).length===0&&g.delete(yt)}n.remove(tt)}function O(tt){let j=n.get(tt);i.deleteTexture(j.__webglTexture);let yt=tt.source,jt=g.get(yt);delete jt[j.__cacheKey],a.memory.textures--}function B(tt){let j=n.get(tt);if(tt.depthTexture&&(tt.depthTexture.dispose(),n.remove(tt.depthTexture)),tt.isWebGLCubeRenderTarget)for(let jt=0;jt<6;jt++){if(Array.isArray(j.__webglFramebuffer[jt]))for(let Xt=0;Xt<j.__webglFramebuffer[jt].length;Xt++)i.deleteFramebuffer(j.__webglFramebuffer[jt][Xt]);else i.deleteFramebuffer(j.__webglFramebuffer[jt]);j.__webglDepthbuffer&&i.deleteRenderbuffer(j.__webglDepthbuffer[jt])}else{if(Array.isArray(j.__webglFramebuffer))for(let jt=0;jt<j.__webglFramebuffer.length;jt++)i.deleteFramebuffer(j.__webglFramebuffer[jt]);else i.deleteFramebuffer(j.__webglFramebuffer);if(j.__webglDepthbuffer&&i.deleteRenderbuffer(j.__webglDepthbuffer),j.__webglMultisampledFramebuffer&&i.deleteFramebuffer(j.__webglMultisampledFramebuffer),j.__webglColorRenderbuffer)for(let jt=0;jt<j.__webglColorRenderbuffer.length;jt++)j.__webglColorRenderbuffer[jt]&&i.deleteRenderbuffer(j.__webglColorRenderbuffer[jt]);j.__webglDepthRenderbuffer&&i.deleteRenderbuffer(j.__webglDepthRenderbuffer)}let yt=tt.textures;for(let jt=0,Xt=yt.length;jt<Xt;jt++){let Ht=n.get(yt[jt]);Ht.__webglTexture&&(i.deleteTexture(Ht.__webglTexture),a.memory.textures--),n.remove(yt[jt])}n.remove(tt)}let P=0;function V(){P=0}function $(){let tt=P;return tt>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+tt+" texture units while this GPU supports only "+r.maxTextures),P+=1,tt}function K(tt){let j=[];return j.push(tt.wrapS),j.push(tt.wrapT),j.push(tt.wrapR||0),j.push(tt.magFilter),j.push(tt.minFilter),j.push(tt.anisotropy),j.push(tt.internalFormat),j.push(tt.format),j.push(tt.type),j.push(tt.generateMipmaps),j.push(tt.premultiplyAlpha),j.push(tt.flipY),j.push(tt.unpackAlignment),j.push(tt.colorSpace),j.join()}function ct(tt,j){let yt=n.get(tt);if(tt.isVideoTexture&&ae(tt),tt.isRenderTargetTexture===!1&&tt.version>0&&yt.__version!==tt.version){let jt=tt.image;if(jt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(jt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Z(yt,tt,j);return}}t.bindTexture(i.TEXTURE_2D,yt.__webglTexture,i.TEXTURE0+j)}function ot(tt,j){let yt=n.get(tt);if(tt.version>0&&yt.__version!==tt.version){Z(yt,tt,j);return}t.bindTexture(i.TEXTURE_2D_ARRAY,yt.__webglTexture,i.TEXTURE0+j)}function st(tt,j){let yt=n.get(tt);if(tt.version>0&&yt.__version!==tt.version){Z(yt,tt,j);return}t.bindTexture(i.TEXTURE_3D,yt.__webglTexture,i.TEXTURE0+j)}function Q(tt,j){let yt=n.get(tt);if(tt.version>0&&yt.__version!==tt.version){at(yt,tt,j);return}t.bindTexture(i.TEXTURE_CUBE_MAP,yt.__webglTexture,i.TEXTURE0+j)}let xt={[Nv]:i.REPEAT,[Tc]:i.CLAMP_TO_EDGE,[Fv]:i.MIRRORED_REPEAT},Mt={[wa]:i.NEAREST,[R4]:i.NEAREST_MIPMAP_NEAREST,[Ym]:i.NEAREST_MIPMAP_LINEAR,[Za]:i.LINEAR,[fx]:i.LINEAR_MIPMAP_NEAREST,[Nc]:i.LINEAR_MIPMAP_LINEAR},qt={[F4]:i.NEVER,[H4]:i.ALWAYS,[B4]:i.LESS,[IM]:i.LEQUAL,[V4]:i.EQUAL,[j4]:i.GEQUAL,[U4]:i.GREATER,[z4]:i.NOTEQUAL};function z(tt,j){if(j.type===To&&e.has("OES_texture_float_linear")===!1&&(j.magFilter===Za||j.magFilter===fx||j.magFilter===Ym||j.magFilter===Nc||j.minFilter===Za||j.minFilter===fx||j.minFilter===Ym||j.minFilter===Nc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(tt,i.TEXTURE_WRAP_S,xt[j.wrapS]),i.texParameteri(tt,i.TEXTURE_WRAP_T,xt[j.wrapT]),(tt===i.TEXTURE_3D||tt===i.TEXTURE_2D_ARRAY)&&i.texParameteri(tt,i.TEXTURE_WRAP_R,xt[j.wrapR]),i.texParameteri(tt,i.TEXTURE_MAG_FILTER,Mt[j.magFilter]),i.texParameteri(tt,i.TEXTURE_MIN_FILTER,Mt[j.minFilter]),j.compareFunction&&(i.texParameteri(tt,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(tt,i.TEXTURE_COMPARE_FUNC,qt[j.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(j.magFilter===wa||j.minFilter!==Ym&&j.minFilter!==Nc||j.type===To&&e.has("OES_texture_float_linear")===!1)return;if(j.anisotropy>1||n.get(j).__currentAnisotropy){let yt=e.get("EXT_texture_filter_anisotropic");i.texParameterf(tt,yt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(j.anisotropy,r.getMaxAnisotropy())),n.get(j).__currentAnisotropy=j.anisotropy}}}function it(tt,j){let yt=!1;tt.__webglInit===void 0&&(tt.__webglInit=!0,j.addEventListener("dispose",U));let jt=j.source,Xt=g.get(jt);Xt===void 0&&(Xt={},g.set(jt,Xt));let Ht=K(j);if(Ht!==tt.__cacheKey){Xt[Ht]===void 0&&(Xt[Ht]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,yt=!0),Xt[Ht].usedTimes++;let we=Xt[tt.__cacheKey];we!==void 0&&(Xt[tt.__cacheKey].usedTimes--,we.usedTimes===0&&O(j)),tt.__cacheKey=Ht,tt.__webglTexture=Xt[Ht].texture}return yt}function Z(tt,j,yt){let jt=i.TEXTURE_2D;(j.isDataArrayTexture||j.isCompressedArrayTexture)&&(jt=i.TEXTURE_2D_ARRAY),j.isData3DTexture&&(jt=i.TEXTURE_3D);let Xt=it(tt,j),Ht=j.source;t.bindTexture(jt,tt.__webglTexture,i.TEXTURE0+yt);let we=n.get(Ht);if(Ht.version!==we.__version||Xt===!0){t.activeTexture(i.TEXTURE0+yt);let ge=Zn.getPrimaries(Zn.workingColorSpace),ce=j.colorSpace===xl?null:Zn.getPrimaries(j.colorSpace),Re=j.colorSpace===xl||ge===ce?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,j.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,j.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Re);let Ut=y(j.image,!1,r.maxTextureSize);Ut=ee(j,Ut);let Me=s.convert(j.format,j.colorSpace),Ce=s.convert(j.type),Xe=T(j.internalFormat,Me,Ce,j.colorSpace,j.isVideoTexture);z(jt,j);let ye,Ge=j.mipmaps,nn=j.isVideoTexture!==!0,Ye=we.__version===void 0||Xt===!0,It=Ht.dataReady,ve=L(j,Ut);if(j.isDepthTexture)Xe=k(j.format===Ud,j.type),Ye&&(nn?t.texStorage2D(i.TEXTURE_2D,1,Xe,Ut.width,Ut.height):t.texImage2D(i.TEXTURE_2D,0,Xe,Ut.width,Ut.height,0,Me,Ce,null));else if(j.isDataTexture)if(Ge.length>0){nn&&Ye&&t.texStorage2D(i.TEXTURE_2D,ve,Xe,Ge[0].width,Ge[0].height);for(let $t=0,ie=Ge.length;$t<ie;$t++)ye=Ge[$t],nn?It&&t.texSubImage2D(i.TEXTURE_2D,$t,0,0,ye.width,ye.height,Me,Ce,ye.data):t.texImage2D(i.TEXTURE_2D,$t,Xe,ye.width,ye.height,0,Me,Ce,ye.data);j.generateMipmaps=!1}else nn?(Ye&&t.texStorage2D(i.TEXTURE_2D,ve,Xe,Ut.width,Ut.height),It&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Ut.width,Ut.height,Me,Ce,Ut.data)):t.texImage2D(i.TEXTURE_2D,0,Xe,Ut.width,Ut.height,0,Me,Ce,Ut.data);else if(j.isCompressedTexture)if(j.isCompressedArrayTexture){nn&&Ye&&t.texStorage3D(i.TEXTURE_2D_ARRAY,ve,Xe,Ge[0].width,Ge[0].height,Ut.depth);for(let $t=0,ie=Ge.length;$t<ie;$t++)if(ye=Ge[$t],j.format!==Ma)if(Me!==null)if(nn){if(It)if(j.layerUpdates.size>0){let be=NM(ye.width,ye.height,j.format,j.type);for(let se of j.layerUpdates){let Pe=ye.data.subarray(se*be/ye.data.BYTES_PER_ELEMENT,(se+1)*be/ye.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,$t,0,0,se,ye.width,ye.height,1,Me,Pe)}j.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,$t,0,0,0,ye.width,ye.height,Ut.depth,Me,ye.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,$t,Xe,ye.width,ye.height,Ut.depth,0,ye.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else nn?It&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,$t,0,0,0,ye.width,ye.height,Ut.depth,Me,Ce,ye.data):t.texImage3D(i.TEXTURE_2D_ARRAY,$t,Xe,ye.width,ye.height,Ut.depth,0,Me,Ce,ye.data)}else{nn&&Ye&&t.texStorage2D(i.TEXTURE_2D,ve,Xe,Ge[0].width,Ge[0].height);for(let $t=0,ie=Ge.length;$t<ie;$t++)ye=Ge[$t],j.format!==Ma?Me!==null?nn?It&&t.compressedTexSubImage2D(i.TEXTURE_2D,$t,0,0,ye.width,ye.height,Me,ye.data):t.compressedTexImage2D(i.TEXTURE_2D,$t,Xe,ye.width,ye.height,0,ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):nn?It&&t.texSubImage2D(i.TEXTURE_2D,$t,0,0,ye.width,ye.height,Me,Ce,ye.data):t.texImage2D(i.TEXTURE_2D,$t,Xe,ye.width,ye.height,0,Me,Ce,ye.data)}else if(j.isDataArrayTexture)if(nn){if(Ye&&t.texStorage3D(i.TEXTURE_2D_ARRAY,ve,Xe,Ut.width,Ut.height,Ut.depth),It)if(j.layerUpdates.size>0){let $t=NM(Ut.width,Ut.height,j.format,j.type);for(let ie of j.layerUpdates){let be=Ut.data.subarray(ie*$t/Ut.data.BYTES_PER_ELEMENT,(ie+1)*$t/Ut.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,ie,Ut.width,Ut.height,1,Me,Ce,be)}j.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ut.width,Ut.height,Ut.depth,Me,Ce,Ut.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,Xe,Ut.width,Ut.height,Ut.depth,0,Me,Ce,Ut.data);else if(j.isData3DTexture)nn?(Ye&&t.texStorage3D(i.TEXTURE_3D,ve,Xe,Ut.width,Ut.height,Ut.depth),It&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ut.width,Ut.height,Ut.depth,Me,Ce,Ut.data)):t.texImage3D(i.TEXTURE_3D,0,Xe,Ut.width,Ut.height,Ut.depth,0,Me,Ce,Ut.data);else if(j.isFramebufferTexture){if(Ye)if(nn)t.texStorage2D(i.TEXTURE_2D,ve,Xe,Ut.width,Ut.height);else{let $t=Ut.width,ie=Ut.height;for(let be=0;be<ve;be++)t.texImage2D(i.TEXTURE_2D,be,Xe,$t,ie,0,Me,Ce,null),$t>>=1,ie>>=1}}else if(Ge.length>0){if(nn&&Ye){let $t=Zt(Ge[0]);t.texStorage2D(i.TEXTURE_2D,ve,Xe,$t.width,$t.height)}for(let $t=0,ie=Ge.length;$t<ie;$t++)ye=Ge[$t],nn?It&&t.texSubImage2D(i.TEXTURE_2D,$t,0,0,Me,Ce,ye):t.texImage2D(i.TEXTURE_2D,$t,Xe,Me,Ce,ye);j.generateMipmaps=!1}else if(nn){if(Ye){let $t=Zt(Ut);t.texStorage2D(i.TEXTURE_2D,ve,Xe,$t.width,$t.height)}It&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Me,Ce,Ut)}else t.texImage2D(i.TEXTURE_2D,0,Xe,Me,Ce,Ut);S(j)&&b(jt),we.__version=Ht.version,j.onUpdate&&j.onUpdate(j)}tt.__version=j.version}function at(tt,j,yt){if(j.image.length!==6)return;let jt=it(tt,j),Xt=j.source;t.bindTexture(i.TEXTURE_CUBE_MAP,tt.__webglTexture,i.TEXTURE0+yt);let Ht=n.get(Xt);if(Xt.version!==Ht.__version||jt===!0){t.activeTexture(i.TEXTURE0+yt);let we=Zn.getPrimaries(Zn.workingColorSpace),ge=j.colorSpace===xl?null:Zn.getPrimaries(j.colorSpace),ce=j.colorSpace===xl||we===ge?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,j.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,j.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ce);let Re=j.isCompressedTexture||j.image[0].isCompressedTexture,Ut=j.image[0]&&j.image[0].isDataTexture,Me=[];for(let ie=0;ie<6;ie++)!Re&&!Ut?Me[ie]=y(j.image[ie],!0,r.maxCubemapSize):Me[ie]=Ut?j.image[ie].image:j.image[ie],Me[ie]=ee(j,Me[ie]);let Ce=Me[0],Xe=s.convert(j.format,j.colorSpace),ye=s.convert(j.type),Ge=T(j.internalFormat,Xe,ye,j.colorSpace),nn=j.isVideoTexture!==!0,Ye=Ht.__version===void 0||jt===!0,It=Xt.dataReady,ve=L(j,Ce);z(i.TEXTURE_CUBE_MAP,j);let $t;if(Re){nn&&Ye&&t.texStorage2D(i.TEXTURE_CUBE_MAP,ve,Ge,Ce.width,Ce.height);for(let ie=0;ie<6;ie++){$t=Me[ie].mipmaps;for(let be=0;be<$t.length;be++){let se=$t[be];j.format!==Ma?Xe!==null?nn?It&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ie,be,0,0,se.width,se.height,Xe,se.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ie,be,Ge,se.width,se.height,0,se.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):nn?It&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ie,be,0,0,se.width,se.height,Xe,ye,se.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ie,be,Ge,se.width,se.height,0,Xe,ye,se.data)}}}else{if($t=j.mipmaps,nn&&Ye){$t.length>0&&ve++;let ie=Zt(Me[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,ve,Ge,ie.width,ie.height)}for(let ie=0;ie<6;ie++)if(Ut){nn?It&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,0,0,Me[ie].width,Me[ie].height,Xe,ye,Me[ie].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,Ge,Me[ie].width,Me[ie].height,0,Xe,ye,Me[ie].data);for(let be=0;be<$t.length;be++){let Pe=$t[be].image[ie].image;nn?It&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ie,be+1,0,0,Pe.width,Pe.height,Xe,ye,Pe.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ie,be+1,Ge,Pe.width,Pe.height,0,Xe,ye,Pe.data)}}else{nn?It&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,0,0,Xe,ye,Me[ie]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,Ge,Xe,ye,Me[ie]);for(let be=0;be<$t.length;be++){let se=$t[be];nn?It&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ie,be+1,0,0,Xe,ye,se.image[ie]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ie,be+1,Ge,Xe,ye,se.image[ie])}}}S(j)&&b(i.TEXTURE_CUBE_MAP),Ht.__version=Xt.version,j.onUpdate&&j.onUpdate(j)}tt.__version=j.version}function pt(tt,j,yt,jt,Xt,Ht){let we=s.convert(yt.format,yt.colorSpace),ge=s.convert(yt.type),ce=T(yt.internalFormat,we,ge,yt.colorSpace),Re=n.get(j),Ut=n.get(yt);if(Ut.__renderTarget=j,!Re.__hasExternalTextures){let Me=Math.max(1,j.width>>Ht),Ce=Math.max(1,j.height>>Ht);Xt===i.TEXTURE_3D||Xt===i.TEXTURE_2D_ARRAY?t.texImage3D(Xt,Ht,ce,Me,Ce,j.depth,0,we,ge,null):t.texImage2D(Xt,Ht,ce,Me,Ce,0,we,ge,null)}t.bindFramebuffer(i.FRAMEBUFFER,tt),Te(j)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,jt,Xt,Ut.__webglTexture,0,ut(j)):(Xt===i.TEXTURE_2D||Xt>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Xt<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,jt,Xt,Ut.__webglTexture,Ht),t.bindFramebuffer(i.FRAMEBUFFER,null)}function ft(tt,j,yt){if(i.bindRenderbuffer(i.RENDERBUFFER,tt),j.depthBuffer){let jt=j.depthTexture,Xt=jt&&jt.isDepthTexture?jt.type:null,Ht=k(j.stencilBuffer,Xt),we=j.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ge=ut(j);Te(j)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ge,Ht,j.width,j.height):yt?i.renderbufferStorageMultisample(i.RENDERBUFFER,ge,Ht,j.width,j.height):i.renderbufferStorage(i.RENDERBUFFER,Ht,j.width,j.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,we,i.RENDERBUFFER,tt)}else{let jt=j.textures;for(let Xt=0;Xt<jt.length;Xt++){let Ht=jt[Xt],we=s.convert(Ht.format,Ht.colorSpace),ge=s.convert(Ht.type),ce=T(Ht.internalFormat,we,ge,Ht.colorSpace),Re=ut(j);yt&&Te(j)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Re,ce,j.width,j.height):Te(j)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Re,ce,j.width,j.height):i.renderbufferStorage(i.RENDERBUFFER,ce,j.width,j.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function St(tt,j){if(j&&j.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,tt),!(j.depthTexture&&j.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let jt=n.get(j.depthTexture);jt.__renderTarget=j,(!jt.__webglTexture||j.depthTexture.image.width!==j.width||j.depthTexture.image.height!==j.height)&&(j.depthTexture.image.width=j.width,j.depthTexture.image.height=j.height,j.depthTexture.needsUpdate=!0),ct(j.depthTexture,0);let Xt=jt.__webglTexture,Ht=ut(j);if(j.depthTexture.format===Fd)Te(j)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Xt,0,Ht):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Xt,0);else if(j.depthTexture.format===Ud)Te(j)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Xt,0,Ht):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Xt,0);else throw new Error("Unknown depthTexture format")}function kt(tt){let j=n.get(tt),yt=tt.isWebGLCubeRenderTarget===!0;if(j.__boundDepthTexture!==tt.depthTexture){let jt=tt.depthTexture;if(j.__depthDisposeCallback&&j.__depthDisposeCallback(),jt){let Xt=()=>{delete j.__boundDepthTexture,delete j.__depthDisposeCallback,jt.removeEventListener("dispose",Xt)};jt.addEventListener("dispose",Xt),j.__depthDisposeCallback=Xt}j.__boundDepthTexture=jt}if(tt.depthTexture&&!j.__autoAllocateDepthBuffer){if(yt)throw new Error("target.depthTexture not supported in Cube render targets");St(j.__webglFramebuffer,tt)}else if(yt){j.__webglDepthbuffer=[];for(let jt=0;jt<6;jt++)if(t.bindFramebuffer(i.FRAMEBUFFER,j.__webglFramebuffer[jt]),j.__webglDepthbuffer[jt]===void 0)j.__webglDepthbuffer[jt]=i.createRenderbuffer(),ft(j.__webglDepthbuffer[jt],tt,!1);else{let Xt=tt.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ht=j.__webglDepthbuffer[jt];i.bindRenderbuffer(i.RENDERBUFFER,Ht),i.framebufferRenderbuffer(i.FRAMEBUFFER,Xt,i.RENDERBUFFER,Ht)}}else if(t.bindFramebuffer(i.FRAMEBUFFER,j.__webglFramebuffer),j.__webglDepthbuffer===void 0)j.__webglDepthbuffer=i.createRenderbuffer(),ft(j.__webglDepthbuffer,tt,!1);else{let jt=tt.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Xt=j.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Xt),i.framebufferRenderbuffer(i.FRAMEBUFFER,jt,i.RENDERBUFFER,Xt)}t.bindFramebuffer(i.FRAMEBUFFER,null)}function Qt(tt,j,yt){let jt=n.get(tt);j!==void 0&&pt(jt.__webglFramebuffer,tt,tt.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),yt!==void 0&&kt(tt)}function ne(tt){let j=tt.texture,yt=n.get(tt),jt=n.get(j);tt.addEventListener("dispose",N);let Xt=tt.textures,Ht=tt.isWebGLCubeRenderTarget===!0,we=Xt.length>1;if(we||(jt.__webglTexture===void 0&&(jt.__webglTexture=i.createTexture()),jt.__version=j.version,a.memory.textures++),Ht){yt.__webglFramebuffer=[];for(let ge=0;ge<6;ge++)if(j.mipmaps&&j.mipmaps.length>0){yt.__webglFramebuffer[ge]=[];for(let ce=0;ce<j.mipmaps.length;ce++)yt.__webglFramebuffer[ge][ce]=i.createFramebuffer()}else yt.__webglFramebuffer[ge]=i.createFramebuffer()}else{if(j.mipmaps&&j.mipmaps.length>0){yt.__webglFramebuffer=[];for(let ge=0;ge<j.mipmaps.length;ge++)yt.__webglFramebuffer[ge]=i.createFramebuffer()}else yt.__webglFramebuffer=i.createFramebuffer();if(we)for(let ge=0,ce=Xt.length;ge<ce;ge++){let Re=n.get(Xt[ge]);Re.__webglTexture===void 0&&(Re.__webglTexture=i.createTexture(),a.memory.textures++)}if(tt.samples>0&&Te(tt)===!1){yt.__webglMultisampledFramebuffer=i.createFramebuffer(),yt.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,yt.__webglMultisampledFramebuffer);for(let ge=0;ge<Xt.length;ge++){let ce=Xt[ge];yt.__webglColorRenderbuffer[ge]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,yt.__webglColorRenderbuffer[ge]);let Re=s.convert(ce.format,ce.colorSpace),Ut=s.convert(ce.type),Me=T(ce.internalFormat,Re,Ut,ce.colorSpace,tt.isXRRenderTarget===!0),Ce=ut(tt);i.renderbufferStorageMultisample(i.RENDERBUFFER,Ce,Me,tt.width,tt.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ge,i.RENDERBUFFER,yt.__webglColorRenderbuffer[ge])}i.bindRenderbuffer(i.RENDERBUFFER,null),tt.depthBuffer&&(yt.__webglDepthRenderbuffer=i.createRenderbuffer(),ft(yt.__webglDepthRenderbuffer,tt,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Ht){t.bindTexture(i.TEXTURE_CUBE_MAP,jt.__webglTexture),z(i.TEXTURE_CUBE_MAP,j);for(let ge=0;ge<6;ge++)if(j.mipmaps&&j.mipmaps.length>0)for(let ce=0;ce<j.mipmaps.length;ce++)pt(yt.__webglFramebuffer[ge][ce],tt,j,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ge,ce);else pt(yt.__webglFramebuffer[ge],tt,j,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0);S(j)&&b(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(we){for(let ge=0,ce=Xt.length;ge<ce;ge++){let Re=Xt[ge],Ut=n.get(Re);t.bindTexture(i.TEXTURE_2D,Ut.__webglTexture),z(i.TEXTURE_2D,Re),pt(yt.__webglFramebuffer,tt,Re,i.COLOR_ATTACHMENT0+ge,i.TEXTURE_2D,0),S(Re)&&b(i.TEXTURE_2D)}t.unbindTexture()}else{let ge=i.TEXTURE_2D;if((tt.isWebGL3DRenderTarget||tt.isWebGLArrayRenderTarget)&&(ge=tt.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(ge,jt.__webglTexture),z(ge,j),j.mipmaps&&j.mipmaps.length>0)for(let ce=0;ce<j.mipmaps.length;ce++)pt(yt.__webglFramebuffer[ce],tt,j,i.COLOR_ATTACHMENT0,ge,ce);else pt(yt.__webglFramebuffer,tt,j,i.COLOR_ATTACHMENT0,ge,0);S(j)&&b(ge),t.unbindTexture()}tt.depthBuffer&&kt(tt)}function ue(tt){let j=tt.textures;for(let yt=0,jt=j.length;yt<jt;yt++){let Xt=j[yt];if(S(Xt)){let Ht=M(tt),we=n.get(Xt).__webglTexture;t.bindTexture(Ht,we),b(Ht),t.unbindTexture()}}}let _e=[],mt=[];function Yt(tt){if(tt.samples>0){if(Te(tt)===!1){let j=tt.textures,yt=tt.width,jt=tt.height,Xt=i.COLOR_BUFFER_BIT,Ht=tt.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,we=n.get(tt),ge=j.length>1;if(ge)for(let ce=0;ce<j.length;ce++)t.bindFramebuffer(i.FRAMEBUFFER,we.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ce,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,we.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+ce,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,we.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,we.__webglFramebuffer);for(let ce=0;ce<j.length;ce++){if(tt.resolveDepthBuffer&&(tt.depthBuffer&&(Xt|=i.DEPTH_BUFFER_BIT),tt.stencilBuffer&&tt.resolveStencilBuffer&&(Xt|=i.STENCIL_BUFFER_BIT)),ge){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,we.__webglColorRenderbuffer[ce]);let Re=n.get(j[ce]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Re,0)}i.blitFramebuffer(0,0,yt,jt,0,0,yt,jt,Xt,i.NEAREST),l===!0&&(_e.length=0,mt.length=0,_e.push(i.COLOR_ATTACHMENT0+ce),tt.depthBuffer&&tt.resolveDepthBuffer===!1&&(_e.push(Ht),mt.push(Ht),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,mt)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,_e))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),ge)for(let ce=0;ce<j.length;ce++){t.bindFramebuffer(i.FRAMEBUFFER,we.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ce,i.RENDERBUFFER,we.__webglColorRenderbuffer[ce]);let Re=n.get(j[ce]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,we.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+ce,i.TEXTURE_2D,Re,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,we.__webglMultisampledFramebuffer)}else if(tt.depthBuffer&&tt.resolveDepthBuffer===!1&&l){let j=tt.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[j])}}}function ut(tt){return Math.min(r.maxSamples,tt.samples)}function Te(tt){let j=n.get(tt);return tt.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&j.__useRenderToTexture!==!1}function ae(tt){let j=a.render.frame;p.get(tt)!==j&&(p.set(tt,j),tt.update())}function ee(tt,j){let yt=tt.colorSpace,jt=tt.format,Xt=tt.type;return tt.isCompressedTexture===!0||tt.isVideoTexture===!0||yt!==zd&&yt!==xl&&(Zn.getTransfer(yt)===_i?(jt!==Ma||Xt!==Ao)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",yt)),j}function Zt(tt){return typeof HTMLImageElement<"u"&&tt instanceof HTMLImageElement?(d.width=tt.naturalWidth||tt.width,d.height=tt.naturalHeight||tt.height):typeof VideoFrame<"u"&&tt instanceof VideoFrame?(d.width=tt.displayWidth,d.height=tt.displayHeight):(d.width=tt.width,d.height=tt.height),d}this.allocateTextureUnit=$,this.resetTextureUnits=V,this.setTexture2D=ct,this.setTexture2DArray=ot,this.setTexture3D=st,this.setTextureCube=Q,this.rebindTextures=Qt,this.setupRenderTarget=ne,this.updateRenderTargetMipmap=ue,this.updateMultisampleRenderTarget=Yt,this.setupDepthRenderbuffer=kt,this.setupFrameBufferTexture=pt,this.useMultisampledRTT=Te}function cnt(i,e){function t(n,r=xl){let s,a=Zn.getTransfer(r);if(n===Ao)return i.UNSIGNED_BYTE;if(n===gx)return i.UNSIGNED_SHORT_4_4_4_4;if(n===_x)return i.UNSIGNED_SHORT_5_5_5_1;if(n===yM)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===xM)return i.BYTE;if(n===bM)return i.SHORT;if(n===Gh)return i.UNSIGNED_SHORT;if(n===mx)return i.INT;if(n===Fc)return i.UNSIGNED_INT;if(n===To)return i.FLOAT;if(n===qh)return i.HALF_FLOAT;if(n===SM)return i.ALPHA;if(n===wM)return i.RGB;if(n===Ma)return i.RGBA;if(n===CM)return i.LUMINANCE;if(n===MM)return i.LUMINANCE_ALPHA;if(n===Fd)return i.DEPTH_COMPONENT;if(n===Ud)return i.DEPTH_STENCIL;if(n===EM)return i.RED;if(n===vx)return i.RED_INTEGER;if(n===AM)return i.RG;if(n===xx)return i.RG_INTEGER;if(n===bx)return i.RGBA_INTEGER;if(n===$m||n===Km||n===Zm||n===Jm)if(a===_i)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===$m)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Km)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Zm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Jm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===$m)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Km)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Zm)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Jm)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===yx||n===Sx||n===wx||n===Cx)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===yx)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Sx)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===wx)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Cx)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===Mx||n===Ex||n===Ax)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===Mx||n===Ex)return a===_i?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===Ax)return a===_i?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===Tx||n===kx||n===Ix||n===Dx||n===Px||n===Rx||n===Lx||n===Ox||n===Nx||n===Fx||n===Bx||n===Vx||n===Ux||n===zx)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===Tx)return a===_i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===kx)return a===_i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Ix)return a===_i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Dx)return a===_i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Px)return a===_i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Rx)return a===_i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Lx)return a===_i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Ox)return a===_i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Nx)return a===_i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Fx)return a===_i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Bx)return a===_i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Vx)return a===_i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Ux)return a===_i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===zx)return a===_i?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Qm||n===jx||n===Hx)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===Qm)return a===_i?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===jx)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Hx)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===TM||n===Wx||n===Gx||n===qx)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===Qm)return s.COMPRESSED_RED_RGTC1_EXT;if(n===Wx)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Gx)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===qx)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===qd?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}var dnt={type:"move"},n0=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new gl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new gl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new zt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new zt),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new gl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new zt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new zt),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,a=null,o=this._targetRay,l=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){a=!0;for(let y of e.hand.values()){let S=t.getJointPose(y,n),b=this._getHandJoint(d,y);S!==null&&(b.matrix.fromArray(S.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=S.radius),b.visible=S!==null}let p=d.joints["index-finger-tip"],f=d.joints["thumb-tip"],g=p.position.distanceTo(f.position),m=.02,x=.005;d.inputState.pinching&&g>m+x?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&g<=m-x&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(dnt)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),d!==null&&(d.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let n=new gl;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}},unt=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,hnt=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,$M=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){let r=new Bc,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,n=new Ja({vertexShader:unt,fragmentShader:hnt,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ds(new jm(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},KM=class extends pl{constructor(e,t){super();let n=this,r=null,s=1,a=null,o="local-floor",l=1,d=null,p=null,f=null,g=null,m=null,x=null,y=new $M,S=t.getContextAttributes(),b=null,M=null,T=[],k=[],L=new Qn,U=null,N=new Xr;N.viewport=new gi;let F=new Xr;F.viewport=new gi;let O=[N,F],B=new ix,P=null,V=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Z){let at=T[Z];return at===void 0&&(at=new n0,T[Z]=at),at.getTargetRaySpace()},this.getControllerGrip=function(Z){let at=T[Z];return at===void 0&&(at=new n0,T[Z]=at),at.getGripSpace()},this.getHand=function(Z){let at=T[Z];return at===void 0&&(at=new n0,T[Z]=at),at.getHandSpace()};function $(Z){let at=k.indexOf(Z.inputSource);if(at===-1)return;let pt=T[at];pt!==void 0&&(pt.update(Z.inputSource,Z.frame,d||a),pt.dispatchEvent({type:Z.type,data:Z.inputSource}))}function K(){r.removeEventListener("select",$),r.removeEventListener("selectstart",$),r.removeEventListener("selectend",$),r.removeEventListener("squeeze",$),r.removeEventListener("squeezestart",$),r.removeEventListener("squeezeend",$),r.removeEventListener("end",K),r.removeEventListener("inputsourceschange",ct);for(let Z=0;Z<T.length;Z++){let at=k[Z];at!==null&&(k[Z]=null,T[Z].disconnect(at))}P=null,V=null,y.reset(),e.setRenderTarget(b),m=null,g=null,f=null,r=null,M=null,it.stop(),n.isPresenting=!1,e.setPixelRatio(U),e.setSize(L.width,L.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Z){s=Z,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Z){o=Z,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||a},this.setReferenceSpace=function(Z){d=Z},this.getBaseLayer=function(){return g!==null?g:m},this.getBinding=function(){return f},this.getFrame=function(){return x},this.getSession=function(){return r},this.setSession=function(Z){return Be(this,null,function*(){if(r=Z,r!==null){if(b=e.getRenderTarget(),r.addEventListener("select",$),r.addEventListener("selectstart",$),r.addEventListener("selectend",$),r.addEventListener("squeeze",$),r.addEventListener("squeezestart",$),r.addEventListener("squeezeend",$),r.addEventListener("end",K),r.addEventListener("inputsourceschange",ct),S.xrCompatible!==!0&&(yield t.makeXRCompatible()),U=e.getPixelRatio(),e.getSize(L),r.renderState.layers===void 0){let at={antialias:S.antialias,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,at),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),M=new Co(m.framebufferWidth,m.framebufferHeight,{format:Ma,type:Ao,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil})}else{let at=null,pt=null,ft=null;S.depth&&(ft=S.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,at=S.stencil?Ud:Fd,pt=S.stencil?qd:Fc);let St={colorFormat:t.RGBA8,depthFormat:ft,scaleFactor:s};f=new XRWebGLBinding(r,t),g=f.createProjectionLayer(St),r.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),M=new Co(g.textureWidth,g.textureHeight,{format:Ma,type:Ao,depthTexture:new zm(g.textureWidth,g.textureHeight,pt,void 0,void 0,void 0,void 0,void 0,void 0,at),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0,resolveDepthBuffer:g.ignoreDepthValues===!1})}M.isXRRenderTarget=!0,this.setFoveation(l),d=null,a=yield r.requestReferenceSpace(o),it.setContext(r),it.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return y.getDepthTexture()};function ct(Z){for(let at=0;at<Z.removed.length;at++){let pt=Z.removed[at],ft=k.indexOf(pt);ft>=0&&(k[ft]=null,T[ft].disconnect(pt))}for(let at=0;at<Z.added.length;at++){let pt=Z.added[at],ft=k.indexOf(pt);if(ft===-1){for(let kt=0;kt<T.length;kt++)if(kt>=k.length){k.push(pt),ft=kt;break}else if(k[kt]===null){k[kt]=pt,ft=kt;break}if(ft===-1)break}let St=T[ft];St&&St.connect(pt)}}let ot=new zt,st=new zt;function Q(Z,at,pt){ot.setFromMatrixPosition(at.matrixWorld),st.setFromMatrixPosition(pt.matrixWorld);let ft=ot.distanceTo(st),St=at.projectionMatrix.elements,kt=pt.projectionMatrix.elements,Qt=St[14]/(St[10]-1),ne=St[14]/(St[10]+1),ue=(St[9]+1)/St[5],_e=(St[9]-1)/St[5],mt=(St[8]-1)/St[0],Yt=(kt[8]+1)/kt[0],ut=Qt*mt,Te=Qt*Yt,ae=ft/(-mt+Yt),ee=ae*-mt;if(at.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Z.translateX(ee),Z.translateZ(ae),Z.matrixWorld.compose(Z.position,Z.quaternion,Z.scale),Z.matrixWorldInverse.copy(Z.matrixWorld).invert(),St[10]===-1)Z.projectionMatrix.copy(at.projectionMatrix),Z.projectionMatrixInverse.copy(at.projectionMatrixInverse);else{let Zt=Qt+ae,tt=ne+ae,j=ut-ee,yt=Te+(ft-ee),jt=ue*ne/tt*Zt,Xt=_e*ne/tt*Zt;Z.projectionMatrix.makePerspective(j,yt,jt,Xt,Zt,tt),Z.projectionMatrixInverse.copy(Z.projectionMatrix).invert()}}function xt(Z,at){at===null?Z.matrixWorld.copy(Z.matrix):Z.matrixWorld.multiplyMatrices(at.matrixWorld,Z.matrix),Z.matrixWorldInverse.copy(Z.matrixWorld).invert()}this.updateCamera=function(Z){if(r===null)return;let at=Z.near,pt=Z.far;y.texture!==null&&(y.depthNear>0&&(at=y.depthNear),y.depthFar>0&&(pt=y.depthFar)),B.near=F.near=N.near=at,B.far=F.far=N.far=pt,(P!==B.near||V!==B.far)&&(r.updateRenderState({depthNear:B.near,depthFar:B.far}),P=B.near,V=B.far),N.layers.mask=Z.layers.mask|2,F.layers.mask=Z.layers.mask|4,B.layers.mask=N.layers.mask|F.layers.mask;let ft=Z.parent,St=B.cameras;xt(B,ft);for(let kt=0;kt<St.length;kt++)xt(St[kt],ft);St.length===2?Q(B,N,F):B.projectionMatrix.copy(N.projectionMatrix),Mt(Z,B,ft)};function Mt(Z,at,pt){pt===null?Z.matrix.copy(at.matrixWorld):(Z.matrix.copy(pt.matrixWorld),Z.matrix.invert(),Z.matrix.multiply(at.matrixWorld)),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale),Z.updateMatrixWorld(!0),Z.projectionMatrix.copy(at.projectionMatrix),Z.projectionMatrixInverse.copy(at.projectionMatrixInverse),Z.isPerspectiveCamera&&(Z.fov=Vv*2*Math.atan(1/Z.projectionMatrix.elements[5]),Z.zoom=1)}this.getCamera=function(){return B},this.getFoveation=function(){if(!(g===null&&m===null))return l},this.setFoveation=function(Z){l=Z,g!==null&&(g.fixedFoveation=Z),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=Z)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(B)};let qt=null;function z(Z,at){if(p=at.getViewerPose(d||a),x=at,p!==null){let pt=p.views;m!==null&&(e.setRenderTargetFramebuffer(M,m.framebuffer),e.setRenderTarget(M));let ft=!1;pt.length!==B.cameras.length&&(B.cameras.length=0,ft=!0);for(let kt=0;kt<pt.length;kt++){let Qt=pt[kt],ne=null;if(m!==null)ne=m.getViewport(Qt);else{let _e=f.getViewSubImage(g,Qt);ne=_e.viewport,kt===0&&(e.setRenderTargetTextures(M,_e.colorTexture,g.ignoreDepthValues?void 0:_e.depthStencilTexture),e.setRenderTarget(M))}let ue=O[kt];ue===void 0&&(ue=new Xr,ue.layers.enable(kt),ue.viewport=new gi,O[kt]=ue),ue.matrix.fromArray(Qt.transform.matrix),ue.matrix.decompose(ue.position,ue.quaternion,ue.scale),ue.projectionMatrix.fromArray(Qt.projectionMatrix),ue.projectionMatrixInverse.copy(ue.projectionMatrix).invert(),ue.viewport.set(ne.x,ne.y,ne.width,ne.height),kt===0&&(B.matrix.copy(ue.matrix),B.matrix.decompose(B.position,B.quaternion,B.scale)),ft===!0&&B.cameras.push(ue)}let St=r.enabledFeatures;if(St&&St.includes("depth-sensing")){let kt=f.getDepthInformation(pt[0]);kt&&kt.isValid&&kt.texture&&y.init(e,kt,r.renderState)}}for(let pt=0;pt<T.length;pt++){let ft=k[pt],St=T[pt];ft!==null&&St!==void 0&&St.update(ft,at,d||a)}qt&&qt(Z,at),at.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:at}),x=null}let it=new xR;it.setAnimationLoop(z),this.setAnimationLoop=function(Z){qt=Z},this.dispose=function(){}}},Kd=new Dc,pnt=new Xi;function fnt(i,e){function t(S,b){S.matrixAutoUpdate===!0&&S.updateMatrix(),b.value.copy(S.matrix)}function n(S,b){b.color.getRGB(S.fogColor.value,RM(i)),b.isFog?(S.fogNear.value=b.near,S.fogFar.value=b.far):b.isFogExp2&&(S.fogDensity.value=b.density)}function r(S,b,M,T,k){b.isMeshBasicMaterial||b.isMeshLambertMaterial?s(S,b):b.isMeshToonMaterial?(s(S,b),f(S,b)):b.isMeshPhongMaterial?(s(S,b),p(S,b)):b.isMeshStandardMaterial?(s(S,b),g(S,b),b.isMeshPhysicalMaterial&&m(S,b,k)):b.isMeshMatcapMaterial?(s(S,b),x(S,b)):b.isMeshDepthMaterial?s(S,b):b.isMeshDistanceMaterial?(s(S,b),y(S,b)):b.isMeshNormalMaterial?s(S,b):b.isLineBasicMaterial?(a(S,b),b.isLineDashedMaterial&&o(S,b)):b.isPointsMaterial?l(S,b,M,T):b.isSpriteMaterial?d(S,b):b.isShadowMaterial?(S.color.value.copy(b.color),S.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function s(S,b){S.opacity.value=b.opacity,b.color&&S.diffuse.value.copy(b.color),b.emissive&&S.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(S.map.value=b.map,t(b.map,S.mapTransform)),b.alphaMap&&(S.alphaMap.value=b.alphaMap,t(b.alphaMap,S.alphaMapTransform)),b.bumpMap&&(S.bumpMap.value=b.bumpMap,t(b.bumpMap,S.bumpMapTransform),S.bumpScale.value=b.bumpScale,b.side===bs&&(S.bumpScale.value*=-1)),b.normalMap&&(S.normalMap.value=b.normalMap,t(b.normalMap,S.normalMapTransform),S.normalScale.value.copy(b.normalScale),b.side===bs&&S.normalScale.value.negate()),b.displacementMap&&(S.displacementMap.value=b.displacementMap,t(b.displacementMap,S.displacementMapTransform),S.displacementScale.value=b.displacementScale,S.displacementBias.value=b.displacementBias),b.emissiveMap&&(S.emissiveMap.value=b.emissiveMap,t(b.emissiveMap,S.emissiveMapTransform)),b.specularMap&&(S.specularMap.value=b.specularMap,t(b.specularMap,S.specularMapTransform)),b.alphaTest>0&&(S.alphaTest.value=b.alphaTest);let M=e.get(b),T=M.envMap,k=M.envMapRotation;T&&(S.envMap.value=T,Kd.copy(k),Kd.x*=-1,Kd.y*=-1,Kd.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(Kd.y*=-1,Kd.z*=-1),S.envMapRotation.value.setFromMatrix4(pnt.makeRotationFromEuler(Kd)),S.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=b.reflectivity,S.ior.value=b.ior,S.refractionRatio.value=b.refractionRatio),b.lightMap&&(S.lightMap.value=b.lightMap,S.lightMapIntensity.value=b.lightMapIntensity,t(b.lightMap,S.lightMapTransform)),b.aoMap&&(S.aoMap.value=b.aoMap,S.aoMapIntensity.value=b.aoMapIntensity,t(b.aoMap,S.aoMapTransform))}function a(S,b){S.diffuse.value.copy(b.color),S.opacity.value=b.opacity,b.map&&(S.map.value=b.map,t(b.map,S.mapTransform))}function o(S,b){S.dashSize.value=b.dashSize,S.totalSize.value=b.dashSize+b.gapSize,S.scale.value=b.scale}function l(S,b,M,T){S.diffuse.value.copy(b.color),S.opacity.value=b.opacity,S.size.value=b.size*M,S.scale.value=T*.5,b.map&&(S.map.value=b.map,t(b.map,S.uvTransform)),b.alphaMap&&(S.alphaMap.value=b.alphaMap,t(b.alphaMap,S.alphaMapTransform)),b.alphaTest>0&&(S.alphaTest.value=b.alphaTest)}function d(S,b){S.diffuse.value.copy(b.color),S.opacity.value=b.opacity,S.rotation.value=b.rotation,b.map&&(S.map.value=b.map,t(b.map,S.mapTransform)),b.alphaMap&&(S.alphaMap.value=b.alphaMap,t(b.alphaMap,S.alphaMapTransform)),b.alphaTest>0&&(S.alphaTest.value=b.alphaTest)}function p(S,b){S.specular.value.copy(b.specular),S.shininess.value=Math.max(b.shininess,1e-4)}function f(S,b){b.gradientMap&&(S.gradientMap.value=b.gradientMap)}function g(S,b){S.metalness.value=b.metalness,b.metalnessMap&&(S.metalnessMap.value=b.metalnessMap,t(b.metalnessMap,S.metalnessMapTransform)),S.roughness.value=b.roughness,b.roughnessMap&&(S.roughnessMap.value=b.roughnessMap,t(b.roughnessMap,S.roughnessMapTransform)),b.envMap&&(S.envMapIntensity.value=b.envMapIntensity)}function m(S,b,M){S.ior.value=b.ior,b.sheen>0&&(S.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),S.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(S.sheenColorMap.value=b.sheenColorMap,t(b.sheenColorMap,S.sheenColorMapTransform)),b.sheenRoughnessMap&&(S.sheenRoughnessMap.value=b.sheenRoughnessMap,t(b.sheenRoughnessMap,S.sheenRoughnessMapTransform))),b.clearcoat>0&&(S.clearcoat.value=b.clearcoat,S.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(S.clearcoatMap.value=b.clearcoatMap,t(b.clearcoatMap,S.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,t(b.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(S.clearcoatNormalMap.value=b.clearcoatNormalMap,t(b.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===bs&&S.clearcoatNormalScale.value.negate())),b.dispersion>0&&(S.dispersion.value=b.dispersion),b.iridescence>0&&(S.iridescence.value=b.iridescence,S.iridescenceIOR.value=b.iridescenceIOR,S.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(S.iridescenceMap.value=b.iridescenceMap,t(b.iridescenceMap,S.iridescenceMapTransform)),b.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=b.iridescenceThicknessMap,t(b.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),b.transmission>0&&(S.transmission.value=b.transmission,S.transmissionSamplerMap.value=M.texture,S.transmissionSamplerSize.value.set(M.width,M.height),b.transmissionMap&&(S.transmissionMap.value=b.transmissionMap,t(b.transmissionMap,S.transmissionMapTransform)),S.thickness.value=b.thickness,b.thicknessMap&&(S.thicknessMap.value=b.thicknessMap,t(b.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=b.attenuationDistance,S.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(S.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(S.anisotropyMap.value=b.anisotropyMap,t(b.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=b.specularIntensity,S.specularColor.value.copy(b.specularColor),b.specularColorMap&&(S.specularColorMap.value=b.specularColorMap,t(b.specularColorMap,S.specularColorMapTransform)),b.specularIntensityMap&&(S.specularIntensityMap.value=b.specularIntensityMap,t(b.specularIntensityMap,S.specularIntensityMapTransform))}function x(S,b){b.matcap&&(S.matcap.value=b.matcap)}function y(S,b){let M=e.get(b).light;S.referencePosition.value.setFromMatrixPosition(M.matrixWorld),S.nearDistance.value=M.shadow.camera.near,S.farDistance.value=M.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function mnt(i,e,t,n){let r={},s={},a=[],o=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function l(M,T){let k=T.program;n.uniformBlockBinding(M,k)}function d(M,T){let k=r[M.id];k===void 0&&(x(M),k=p(M),r[M.id]=k,M.addEventListener("dispose",S));let L=T.program;n.updateUBOMapping(M,L);let U=e.render.frame;s[M.id]!==U&&(g(M),s[M.id]=U)}function p(M){let T=f();M.__bindingPointIndex=T;let k=i.createBuffer(),L=M.__size,U=M.usage;return i.bindBuffer(i.UNIFORM_BUFFER,k),i.bufferData(i.UNIFORM_BUFFER,L,U),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,T,k),k}function f(){for(let M=0;M<o;M++)if(a.indexOf(M)===-1)return a.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(M){let T=r[M.id],k=M.uniforms,L=M.__cache;i.bindBuffer(i.UNIFORM_BUFFER,T);for(let U=0,N=k.length;U<N;U++){let F=Array.isArray(k[U])?k[U]:[k[U]];for(let O=0,B=F.length;O<B;O++){let P=F[O];if(m(P,U,O,L)===!0){let V=P.__offset,$=Array.isArray(P.value)?P.value:[P.value],K=0;for(let ct=0;ct<$.length;ct++){let ot=$[ct],st=y(ot);typeof ot=="number"||typeof ot=="boolean"?(P.__data[0]=ot,i.bufferSubData(i.UNIFORM_BUFFER,V+K,P.__data)):ot.isMatrix3?(P.__data[0]=ot.elements[0],P.__data[1]=ot.elements[1],P.__data[2]=ot.elements[2],P.__data[3]=0,P.__data[4]=ot.elements[3],P.__data[5]=ot.elements[4],P.__data[6]=ot.elements[5],P.__data[7]=0,P.__data[8]=ot.elements[6],P.__data[9]=ot.elements[7],P.__data[10]=ot.elements[8],P.__data[11]=0):(ot.toArray(P.__data,K),K+=st.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,V,P.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function m(M,T,k,L){let U=M.value,N=T+"_"+k;if(L[N]===void 0)return typeof U=="number"||typeof U=="boolean"?L[N]=U:L[N]=U.clone(),!0;{let F=L[N];if(typeof U=="number"||typeof U=="boolean"){if(F!==U)return L[N]=U,!0}else if(F.equals(U)===!1)return F.copy(U),!0}return!1}function x(M){let T=M.uniforms,k=0,L=16;for(let N=0,F=T.length;N<F;N++){let O=Array.isArray(T[N])?T[N]:[T[N]];for(let B=0,P=O.length;B<P;B++){let V=O[B],$=Array.isArray(V.value)?V.value:[V.value];for(let K=0,ct=$.length;K<ct;K++){let ot=$[K],st=y(ot),Q=k%L,xt=Q%st.boundary,Mt=Q+xt;k+=xt,Mt!==0&&L-Mt<st.storage&&(k+=L-Mt),V.__data=new Float32Array(st.storage/Float32Array.BYTES_PER_ELEMENT),V.__offset=k,k+=st.storage}}}let U=k%L;return U>0&&(k+=L-U),M.__size=k,M.__cache={},this}function y(M){let T={boundary:0,storage:0};return typeof M=="number"||typeof M=="boolean"?(T.boundary=4,T.storage=4):M.isVector2?(T.boundary=8,T.storage=8):M.isVector3||M.isColor?(T.boundary=16,T.storage=12):M.isVector4?(T.boundary=16,T.storage=16):M.isMatrix3?(T.boundary=48,T.storage=48):M.isMatrix4?(T.boundary=64,T.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),T}function S(M){let T=M.target;T.removeEventListener("dispose",S);let k=a.indexOf(T.__bindingPointIndex);a.splice(k,1),i.deleteBuffer(r[T.id]),delete r[T.id],delete s[T.id]}function b(){for(let M in r)i.deleteBuffer(r[M]);a=[],r={},s={}}return{bind:l,update:d,dispose:b}}var Zx=class{constructor(e={}){let{canvas:t=W4(),context:n=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:d=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:g=!1}=e;this.isWebGLRenderer=!0;let m;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=n.getContextAttributes().alpha}else m=a;let x=new Uint32Array(4),y=new Int32Array(4),S=null,b=null,M=[],T=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ta,this.toneMapping=vl,this.toneMappingExposure=1;let k=this,L=!1,U=0,N=0,F=null,O=-1,B=null,P=new gi,V=new gi,$=null,K=new $n(0),ct=0,ot=t.width,st=t.height,Q=1,xt=null,Mt=null,qt=new gi(0,0,ot,st),z=new gi(0,0,ot,st),it=!1,Z=new Wh,at=!1,pt=!1,ft=new Xi,St=new Xi,kt=new zt,Qt=new gi,ne={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},ue=!1;function _e(){return F===null?Q:1}let mt=n;function Yt(et,Dt){return t.getContext(et,Dt)}try{let et={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:d,powerPreference:p,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${rx}`),t.addEventListener("webglcontextlost",ie,!1),t.addEventListener("webglcontextrestored",be,!1),t.addEventListener("webglcontextcreationerror",se,!1),mt===null){let Dt="webgl2";if(mt=Yt(Dt,et),mt===null)throw Yt(Dt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(et){throw console.error("THREE.WebGLRenderer: "+et.message),et}let ut,Te,ae,ee,Zt,tt,j,yt,jt,Xt,Ht,we,ge,ce,Re,Ut,Me,Ce,Xe,ye,Ge,nn,Ye,It;function ve(){ut=new Itt(mt),ut.init(),nn=new cnt(mt,ut),Te=new Ctt(mt,ut,e,nn),ae=new ont(mt,ut),Te.reverseDepthBuffer&&g&&ae.buffers.depth.setReversed(!0),ee=new Rtt(mt),Zt=new Yet,tt=new lnt(mt,ut,ae,Zt,Te,nn,ee),j=new Ett(k),yt=new ktt(k),jt=new UZ(mt),Ye=new Stt(mt,jt),Xt=new Dtt(mt,jt,ee,Ye),Ht=new Ott(mt,Xt,jt,ee),Xe=new Ltt(mt,Te,tt),Ut=new Mtt(Zt),we=new Xet(k,j,yt,ut,Te,Ye,Ut),ge=new fnt(k,Zt),ce=new Ket,Re=new nnt(ut),Ce=new ytt(k,j,yt,ae,Ht,m,l),Me=new snt(k,Ht,Te),It=new mnt(mt,ee,Te,ae),ye=new wtt(mt,ut,ee),Ge=new Ptt(mt,ut,ee),ee.programs=we.programs,k.capabilities=Te,k.extensions=ut,k.properties=Zt,k.renderLists=ce,k.shadowMap=Me,k.state=ae,k.info=ee}ve();let $t=new KM(k,mt);this.xr=$t,this.getContext=function(){return mt},this.getContextAttributes=function(){return mt.getContextAttributes()},this.forceContextLoss=function(){let et=ut.get("WEBGL_lose_context");et&&et.loseContext()},this.forceContextRestore=function(){let et=ut.get("WEBGL_lose_context");et&&et.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(et){et!==void 0&&(Q=et,this.setSize(ot,st,!1))},this.getSize=function(et){return et.set(ot,st)},this.setSize=function(et,Dt,Wt=!0){if($t.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ot=et,st=Dt,t.width=Math.floor(et*Q),t.height=Math.floor(Dt*Q),Wt===!0&&(t.style.width=et+"px",t.style.height=Dt+"px"),this.setViewport(0,0,et,Dt)},this.getDrawingBufferSize=function(et){return et.set(ot*Q,st*Q).floor()},this.setDrawingBufferSize=function(et,Dt,Wt){ot=et,st=Dt,Q=Wt,t.width=Math.floor(et*Wt),t.height=Math.floor(Dt*Wt),this.setViewport(0,0,et,Dt)},this.getCurrentViewport=function(et){return et.copy(P)},this.getViewport=function(et){return et.copy(qt)},this.setViewport=function(et,Dt,Wt,Gt){et.isVector4?qt.set(et.x,et.y,et.z,et.w):qt.set(et,Dt,Wt,Gt),ae.viewport(P.copy(qt).multiplyScalar(Q).round())},this.getScissor=function(et){return et.copy(z)},this.setScissor=function(et,Dt,Wt,Gt){et.isVector4?z.set(et.x,et.y,et.z,et.w):z.set(et,Dt,Wt,Gt),ae.scissor(V.copy(z).multiplyScalar(Q).round())},this.getScissorTest=function(){return it},this.setScissorTest=function(et){ae.setScissorTest(it=et)},this.setOpaqueSort=function(et){xt=et},this.setTransparentSort=function(et){Mt=et},this.getClearColor=function(et){return et.copy(Ce.getClearColor())},this.setClearColor=function(){Ce.setClearColor.apply(Ce,arguments)},this.getClearAlpha=function(){return Ce.getClearAlpha()},this.setClearAlpha=function(){Ce.setClearAlpha.apply(Ce,arguments)},this.clear=function(et=!0,Dt=!0,Wt=!0){let Gt=0;if(et){let Lt=!1;if(F!==null){let xe=F.texture.format;Lt=xe===bx||xe===xx||xe===vx}if(Lt){let xe=F.texture.type,Ee=xe===Ao||xe===Fc||xe===Gh||xe===qd||xe===gx||xe===_x,Ne=Ce.getClearColor(),Ue=Ce.getClearAlpha(),rn=Ne.r,un=Ne.g,$e=Ne.b;Ee?(x[0]=rn,x[1]=un,x[2]=$e,x[3]=Ue,mt.clearBufferuiv(mt.COLOR,0,x)):(y[0]=rn,y[1]=un,y[2]=$e,y[3]=Ue,mt.clearBufferiv(mt.COLOR,0,y))}else Gt|=mt.COLOR_BUFFER_BIT}Dt&&(Gt|=mt.DEPTH_BUFFER_BIT),Wt&&(Gt|=mt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),mt.clear(Gt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ie,!1),t.removeEventListener("webglcontextrestored",be,!1),t.removeEventListener("webglcontextcreationerror",se,!1),Ce.dispose(),ce.dispose(),Re.dispose(),Zt.dispose(),j.dispose(),yt.dispose(),Ht.dispose(),Ye.dispose(),It.dispose(),we.dispose(),$t.dispose(),$t.removeEventListener("sessionstart",ys),$t.removeEventListener("sessionend",Fs),$i.stop()};function ie(et){et.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),L=!0}function be(){console.log("THREE.WebGLRenderer: Context Restored."),L=!1;let et=ee.autoReset,Dt=Me.enabled,Wt=Me.autoUpdate,Gt=Me.needsUpdate,Lt=Me.type;ve(),ee.autoReset=et,Me.enabled=Dt,Me.autoUpdate=Wt,Me.needsUpdate=Gt,Me.type=Lt}function se(et){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",et.statusMessage)}function Pe(et){let Dt=et.target;Dt.removeEventListener("dispose",Pe),ri(Dt)}function ri(et){qn(et),Zt.remove(et)}function qn(et){let Dt=Zt.get(et).programs;Dt!==void 0&&(Dt.forEach(function(Wt){we.releaseProgram(Wt)}),et.isShaderMaterial&&we.releaseShaderCache(et))}this.renderBufferDirect=function(et,Dt,Wt,Gt,Lt,xe){Dt===null&&(Dt=ne);let Ee=Lt.isMesh&&Lt.matrixWorld.determinant()<0,Ne=ra(et,Dt,Wt,Gt,Lt);ae.setMaterial(Gt,Ee);let Ue=Wt.index,rn=1;if(Gt.wireframe===!0){if(Ue=Xt.getWireframeAttribute(Wt),Ue===void 0)return;rn=2}let un=Wt.drawRange,$e=Wt.attributes.position,On=un.start*rn,Nn=(un.start+un.count)*rn;xe!==null&&(On=Math.max(On,xe.start*rn),Nn=Math.min(Nn,(xe.start+xe.count)*rn)),Ue!==null?(On=Math.max(On,0),Nn=Math.min(Nn,Ue.count)):$e!=null&&(On=Math.max(On,0),Nn=Math.min(Nn,$e.count));let Fi=Nn-On;if(Fi<0||Fi===1/0)return;Ye.setup(Lt,Gt,Ne,Wt,Ue);let _n,Fn=ye;if(Ue!==null&&(_n=jt.get(Ue),Fn=Ge,Fn.setIndex(_n)),Lt.isMesh)Gt.wireframe===!0?(ae.setLineWidth(Gt.wireframeLinewidth*_e()),Fn.setMode(mt.LINES)):Fn.setMode(mt.TRIANGLES);else if(Lt.isLine){let Ke=Gt.linewidth;Ke===void 0&&(Ke=1),ae.setLineWidth(Ke*_e()),Lt.isLineSegments?Fn.setMode(mt.LINES):Lt.isLineLoop?Fn.setMode(mt.LINE_LOOP):Fn.setMode(mt.LINE_STRIP)}else Lt.isPoints?Fn.setMode(mt.POINTS):Lt.isSprite&&Fn.setMode(mt.TRIANGLES);if(Lt.isBatchedMesh)if(Lt._multiDrawInstances!==null)Fn.renderMultiDrawInstances(Lt._multiDrawStarts,Lt._multiDrawCounts,Lt._multiDrawCount,Lt._multiDrawInstances);else if(ut.get("WEBGL_multi_draw"))Fn.renderMultiDraw(Lt._multiDrawStarts,Lt._multiDrawCounts,Lt._multiDrawCount);else{let Ke=Lt._multiDrawStarts,Ki=Lt._multiDrawCounts,zn=Lt._multiDrawCount,hs=Ue?jt.get(Ue).bytesPerElement:1,kr=Zt.get(Gt).currentProgram.getUniforms();for(let hr=0;hr<zn;hr++)kr.setValue(mt,"_gl_DrawID",hr),Fn.render(Ke[hr]/hs,Ki[hr])}else if(Lt.isInstancedMesh)Fn.renderInstances(On,Fi,Lt.count);else if(Wt.isInstancedBufferGeometry){let Ke=Wt._maxInstanceCount!==void 0?Wt._maxInstanceCount:1/0,Ki=Math.min(Wt.instanceCount,Ke);Fn.renderInstances(On,Fi,Ki)}else Fn.render(On,Fi)};function kn(et,Dt,Wt){et.transparent===!0&&et.side===Eo&&et.forceSinglePass===!1?(et.side=bs,et.needsUpdate=!0,$r(et,Dt,Wt),et.side=hl,et.needsUpdate=!0,$r(et,Dt,Wt),et.side=Eo):$r(et,Dt,Wt)}this.compile=function(et,Dt,Wt=null){Wt===null&&(Wt=et),b=Re.get(Wt),b.init(Dt),T.push(b),Wt.traverseVisible(function(Lt){Lt.isLight&&Lt.layers.test(Dt.layers)&&(b.pushLight(Lt),Lt.castShadow&&b.pushShadow(Lt))}),et!==Wt&&et.traverseVisible(function(Lt){Lt.isLight&&Lt.layers.test(Dt.layers)&&(b.pushLight(Lt),Lt.castShadow&&b.pushShadow(Lt))}),b.setupLights();let Gt=new Set;return et.traverse(function(Lt){if(!(Lt.isMesh||Lt.isPoints||Lt.isLine||Lt.isSprite))return;let xe=Lt.material;if(xe)if(Array.isArray(xe))for(let Ee=0;Ee<xe.length;Ee++){let Ne=xe[Ee];kn(Ne,Wt,Lt),Gt.add(Ne)}else kn(xe,Wt,Lt),Gt.add(xe)}),T.pop(),b=null,Gt},this.compileAsync=function(et,Dt,Wt=null){let Gt=this.compile(et,Dt,Wt);return new Promise(Lt=>{function xe(){if(Gt.forEach(function(Ee){Zt.get(Ee).currentProgram.isReady()&&Gt.delete(Ee)}),Gt.size===0){Lt(et);return}setTimeout(xe,10)}ut.get("KHR_parallel_shader_compile")!==null?xe():setTimeout(xe,10)})};let Yi=null;function He(et){Yi&&Yi(et)}function ys(){$i.stop()}function Fs(){$i.start()}let $i=new xR;$i.setAnimationLoop(He),typeof self<"u"&&$i.setContext(self),this.setAnimationLoop=function(et){Yi=et,$t.setAnimationLoop(et),et===null?$i.stop():$i.start()},$t.addEventListener("sessionstart",ys),$t.addEventListener("sessionend",Fs),this.render=function(et,Dt){if(Dt!==void 0&&Dt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(L===!0)return;if(et.matrixWorldAutoUpdate===!0&&et.updateMatrixWorld(),Dt.parent===null&&Dt.matrixWorldAutoUpdate===!0&&Dt.updateMatrixWorld(),$t.enabled===!0&&$t.isPresenting===!0&&($t.cameraAutoUpdate===!0&&$t.updateCamera(Dt),Dt=$t.getCamera()),et.isScene===!0&&et.onBeforeRender(k,et,Dt,F),b=Re.get(et,T.length),b.init(Dt),T.push(b),St.multiplyMatrices(Dt.projectionMatrix,Dt.matrixWorldInverse),Z.setFromProjectionMatrix(St),pt=this.localClippingEnabled,at=Ut.init(this.clippingPlanes,pt),S=ce.get(et,M.length),S.init(),M.push(S),$t.enabled===!0&&$t.isPresenting===!0){let xe=k.xr.getDepthSensingMesh();xe!==null&&ji(xe,Dt,-1/0,k.sortObjects)}ji(et,Dt,0,k.sortObjects),S.finish(),k.sortObjects===!0&&S.sort(xt,Mt),ue=$t.enabled===!1||$t.isPresenting===!1||$t.hasDepthSensing()===!1,ue&&Ce.addToRenderList(S,et),this.info.render.frame++,at===!0&&Ut.beginShadows();let Wt=b.state.shadowsArray;Me.render(Wt,et,Dt),at===!0&&Ut.endShadows(),this.info.autoReset===!0&&this.info.reset();let Gt=S.opaque,Lt=S.transmissive;if(b.setupLights(),Dt.isArrayCamera){let xe=Dt.cameras;if(Lt.length>0)for(let Ee=0,Ne=xe.length;Ee<Ne;Ee++){let Ue=xe[Ee];Yr(Gt,Lt,et,Ue)}ue&&Ce.render(et);for(let Ee=0,Ne=xe.length;Ee<Ne;Ee++){let Ue=xe[Ee];Hi(S,et,Ue,Ue.viewport)}}else Lt.length>0&&Yr(Gt,Lt,et,Dt),ue&&Ce.render(et),Hi(S,et,Dt);F!==null&&(tt.updateMultisampleRenderTarget(F),tt.updateRenderTargetMipmap(F)),et.isScene===!0&&et.onAfterRender(k,et,Dt),Ye.resetDefaultState(),O=-1,B=null,T.pop(),T.length>0?(b=T[T.length-1],at===!0&&Ut.setGlobalState(k.clippingPlanes,b.state.camera)):b=null,M.pop(),M.length>0?S=M[M.length-1]:S=null};function ji(et,Dt,Wt,Gt){if(et.visible===!1)return;if(et.layers.test(Dt.layers)){if(et.isGroup)Wt=et.renderOrder;else if(et.isLOD)et.autoUpdate===!0&&et.update(Dt);else if(et.isLight)b.pushLight(et),et.castShadow&&b.pushShadow(et);else if(et.isSprite){if(!et.frustumCulled||Z.intersectsSprite(et)){Gt&&Qt.setFromMatrixPosition(et.matrixWorld).applyMatrix4(St);let Ee=Ht.update(et),Ne=et.material;Ne.visible&&S.push(et,Ee,Ne,Wt,Qt.z,null)}}else if((et.isMesh||et.isLine||et.isPoints)&&(!et.frustumCulled||Z.intersectsObject(et))){let Ee=Ht.update(et),Ne=et.material;if(Gt&&(et.boundingSphere!==void 0?(et.boundingSphere===null&&et.computeBoundingSphere(),Qt.copy(et.boundingSphere.center)):(Ee.boundingSphere===null&&Ee.computeBoundingSphere(),Qt.copy(Ee.boundingSphere.center)),Qt.applyMatrix4(et.matrixWorld).applyMatrix4(St)),Array.isArray(Ne)){let Ue=Ee.groups;for(let rn=0,un=Ue.length;rn<un;rn++){let $e=Ue[rn],On=Ne[$e.materialIndex];On&&On.visible&&S.push(et,Ee,On,Wt,Qt.z,$e)}}else Ne.visible&&S.push(et,Ee,Ne,Wt,Qt.z,null)}}let xe=et.children;for(let Ee=0,Ne=xe.length;Ee<Ne;Ee++)ji(xe[Ee],Dt,Wt,Gt)}function Hi(et,Dt,Wt,Gt){let Lt=et.opaque,xe=et.transmissive,Ee=et.transparent;b.setupLightsView(Wt),at===!0&&Ut.setGlobalState(k.clippingPlanes,Wt),Gt&&ae.viewport(P.copy(Gt)),Lt.length>0&&Ea(Lt,Dt,Wt),xe.length>0&&Ea(xe,Dt,Wt),Ee.length>0&&Ea(Ee,Dt,Wt),ae.buffers.depth.setTest(!0),ae.buffers.depth.setMask(!0),ae.buffers.color.setMask(!0),ae.setPolygonOffset(!1)}function Yr(et,Dt,Wt,Gt){if((Wt.isScene===!0?Wt.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget[Gt.id]===void 0&&(b.state.transmissionRenderTarget[Gt.id]=new Co(1,1,{generateMipmaps:!0,type:ut.has("EXT_color_buffer_half_float")||ut.has("EXT_color_buffer_float")?qh:Ao,minFilter:Nc,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Zn.workingColorSpace}));let xe=b.state.transmissionRenderTarget[Gt.id],Ee=Gt.viewport||P;xe.setSize(Ee.z,Ee.w);let Ne=k.getRenderTarget();k.setRenderTarget(xe),k.getClearColor(K),ct=k.getClearAlpha(),ct<1&&k.setClearColor(16777215,.5),k.clear(),ue&&Ce.render(Wt);let Ue=k.toneMapping;k.toneMapping=vl;let rn=Gt.viewport;if(Gt.viewport!==void 0&&(Gt.viewport=void 0),b.setupLightsView(Gt),at===!0&&Ut.setGlobalState(k.clippingPlanes,Gt),Ea(et,Wt,Gt),tt.updateMultisampleRenderTarget(xe),tt.updateRenderTargetMipmap(xe),ut.has("WEBGL_multisampled_render_to_texture")===!1){let un=!1;for(let $e=0,On=Dt.length;$e<On;$e++){let Nn=Dt[$e],Fi=Nn.object,_n=Nn.geometry,Fn=Nn.material,Ke=Nn.group;if(Fn.side===Eo&&Fi.layers.test(Gt.layers)){let Ki=Fn.side;Fn.side=bs,Fn.needsUpdate=!0,ia(Fi,Wt,Gt,_n,Fn,Ke),Fn.side=Ki,Fn.needsUpdate=!0,un=!0}}un===!0&&(tt.updateMultisampleRenderTarget(xe),tt.updateRenderTargetMipmap(xe))}k.setRenderTarget(Ne),k.setClearColor(K,ct),rn!==void 0&&(Gt.viewport=rn),k.toneMapping=Ue}function Ea(et,Dt,Wt){let Gt=Dt.isScene===!0?Dt.overrideMaterial:null;for(let Lt=0,xe=et.length;Lt<xe;Lt++){let Ee=et[Lt],Ne=Ee.object,Ue=Ee.geometry,rn=Gt===null?Ee.material:Gt,un=Ee.group;Ne.layers.test(Wt.layers)&&ia(Ne,Dt,Wt,Ue,rn,un)}}function ia(et,Dt,Wt,Gt,Lt,xe){et.onBeforeRender(k,Dt,Wt,Gt,Lt,xe),et.modelViewMatrix.multiplyMatrices(Wt.matrixWorldInverse,et.matrixWorld),et.normalMatrix.getNormalMatrix(et.modelViewMatrix),Lt.onBeforeRender(k,Dt,Wt,Gt,et,xe),Lt.transparent===!0&&Lt.side===Eo&&Lt.forceSinglePass===!1?(Lt.side=bs,Lt.needsUpdate=!0,k.renderBufferDirect(Wt,Dt,Gt,Lt,et,xe),Lt.side=hl,Lt.needsUpdate=!0,k.renderBufferDirect(Wt,Dt,Gt,Lt,et,xe),Lt.side=Eo):k.renderBufferDirect(Wt,Dt,Gt,Lt,et,xe),et.onAfterRender(k,Dt,Wt,Gt,Lt,xe)}function $r(et,Dt,Wt){Dt.isScene!==!0&&(Dt=ne);let Gt=Zt.get(et),Lt=b.state.lights,xe=b.state.shadowsArray,Ee=Lt.state.version,Ne=we.getParameters(et,Lt.state,xe,Dt,Wt),Ue=we.getProgramCacheKey(Ne),rn=Gt.programs;Gt.environment=et.isMeshStandardMaterial?Dt.environment:null,Gt.fog=Dt.fog,Gt.envMap=(et.isMeshStandardMaterial?yt:j).get(et.envMap||Gt.environment),Gt.envMapRotation=Gt.environment!==null&&et.envMap===null?Dt.environmentRotation:et.envMapRotation,rn===void 0&&(et.addEventListener("dispose",Pe),rn=new Map,Gt.programs=rn);let un=rn.get(Ue);if(un!==void 0){if(Gt.currentProgram===un&&Gt.lightsStateVersion===Ee)return ws(et,Ne),un}else Ne.uniforms=we.getUniforms(et),et.onBeforeCompile(Ne,k),un=we.acquireProgram(Ne,Ue),rn.set(Ue,un),Gt.uniforms=Ne.uniforms;let $e=Gt.uniforms;return(!et.isShaderMaterial&&!et.isRawShaderMaterial||et.clipping===!0)&&($e.clippingPlanes=Ut.uniform),ws(et,Ne),Gt.needsLights=sa(et),Gt.lightsStateVersion=Ee,Gt.needsLights&&($e.ambientLightColor.value=Lt.state.ambient,$e.lightProbe.value=Lt.state.probe,$e.directionalLights.value=Lt.state.directional,$e.directionalLightShadows.value=Lt.state.directionalShadow,$e.spotLights.value=Lt.state.spot,$e.spotLightShadows.value=Lt.state.spotShadow,$e.rectAreaLights.value=Lt.state.rectArea,$e.ltc_1.value=Lt.state.rectAreaLTC1,$e.ltc_2.value=Lt.state.rectAreaLTC2,$e.pointLights.value=Lt.state.point,$e.pointLightShadows.value=Lt.state.pointShadow,$e.hemisphereLights.value=Lt.state.hemi,$e.directionalShadowMap.value=Lt.state.directionalShadowMap,$e.directionalShadowMatrix.value=Lt.state.directionalShadowMatrix,$e.spotShadowMap.value=Lt.state.spotShadowMap,$e.spotLightMatrix.value=Lt.state.spotLightMatrix,$e.spotLightMap.value=Lt.state.spotLightMap,$e.pointShadowMap.value=Lt.state.pointShadowMap,$e.pointShadowMatrix.value=Lt.state.pointShadowMatrix),Gt.currentProgram=un,Gt.uniformsList=null,un}function Ss(et){if(et.uniformsList===null){let Dt=et.currentProgram.getUniforms();et.uniformsList=$h.seqWithValue(Dt.seq,et.uniforms)}return et.uniformsList}function ws(et,Dt){let Wt=Zt.get(et);Wt.outputColorSpace=Dt.outputColorSpace,Wt.batching=Dt.batching,Wt.batchingColor=Dt.batchingColor,Wt.instancing=Dt.instancing,Wt.instancingColor=Dt.instancingColor,Wt.instancingMorph=Dt.instancingMorph,Wt.skinning=Dt.skinning,Wt.morphTargets=Dt.morphTargets,Wt.morphNormals=Dt.morphNormals,Wt.morphColors=Dt.morphColors,Wt.morphTargetsCount=Dt.morphTargetsCount,Wt.numClippingPlanes=Dt.numClippingPlanes,Wt.numIntersection=Dt.numClipIntersection,Wt.vertexAlphas=Dt.vertexAlphas,Wt.vertexTangents=Dt.vertexTangents,Wt.toneMapping=Dt.toneMapping}function ra(et,Dt,Wt,Gt,Lt){Dt.isScene!==!0&&(Dt=ne),tt.resetTextureUnits();let xe=Dt.fog,Ee=Gt.isMeshStandardMaterial?Dt.environment:null,Ne=F===null?k.outputColorSpace:F.isXRRenderTarget===!0?F.texture.colorSpace:zd,Ue=(Gt.isMeshStandardMaterial?yt:j).get(Gt.envMap||Ee),rn=Gt.vertexColors===!0&&!!Wt.attributes.color&&Wt.attributes.color.itemSize===4,un=!!Wt.attributes.tangent&&(!!Gt.normalMap||Gt.anisotropy>0),$e=!!Wt.morphAttributes.position,On=!!Wt.morphAttributes.normal,Nn=!!Wt.morphAttributes.color,Fi=vl;Gt.toneMapped&&(F===null||F.isXRRenderTarget===!0)&&(Fi=k.toneMapping);let _n=Wt.morphAttributes.position||Wt.morphAttributes.normal||Wt.morphAttributes.color,Fn=_n!==void 0?_n.length:0,Ke=Zt.get(Gt),Ki=b.state.lights;if(at===!0&&(pt===!0||et!==B)){let fr=et===B&&Gt.id===O;Ut.setState(Gt,et,fr)}let zn=!1;Gt.version===Ke.__version?(Ke.needsLights&&Ke.lightsStateVersion!==Ki.state.version||Ke.outputColorSpace!==Ne||Lt.isBatchedMesh&&Ke.batching===!1||!Lt.isBatchedMesh&&Ke.batching===!0||Lt.isBatchedMesh&&Ke.batchingColor===!0&&Lt.colorTexture===null||Lt.isBatchedMesh&&Ke.batchingColor===!1&&Lt.colorTexture!==null||Lt.isInstancedMesh&&Ke.instancing===!1||!Lt.isInstancedMesh&&Ke.instancing===!0||Lt.isSkinnedMesh&&Ke.skinning===!1||!Lt.isSkinnedMesh&&Ke.skinning===!0||Lt.isInstancedMesh&&Ke.instancingColor===!0&&Lt.instanceColor===null||Lt.isInstancedMesh&&Ke.instancingColor===!1&&Lt.instanceColor!==null||Lt.isInstancedMesh&&Ke.instancingMorph===!0&&Lt.morphTexture===null||Lt.isInstancedMesh&&Ke.instancingMorph===!1&&Lt.morphTexture!==null||Ke.envMap!==Ue||Gt.fog===!0&&Ke.fog!==xe||Ke.numClippingPlanes!==void 0&&(Ke.numClippingPlanes!==Ut.numPlanes||Ke.numIntersection!==Ut.numIntersection)||Ke.vertexAlphas!==rn||Ke.vertexTangents!==un||Ke.morphTargets!==$e||Ke.morphNormals!==On||Ke.morphColors!==Nn||Ke.toneMapping!==Fi||Ke.morphTargetsCount!==Fn)&&(zn=!0):(zn=!0,Ke.__version=Gt.version);let hs=Ke.currentProgram;zn===!0&&(hs=$r(Gt,Dt,Lt));let kr=!1,hr=!1,pr=!1,si=hs.getUniforms(),zr=Ke.uniforms;if(ae.useProgram(hs.program)&&(kr=!0,hr=!0,pr=!0),Gt.id!==O&&(O=Gt.id,hr=!0),kr||B!==et){ae.buffers.depth.getReversed()?(ft.copy(et.projectionMatrix),q4(ft),X4(ft),si.setValue(mt,"projectionMatrix",ft)):si.setValue(mt,"projectionMatrix",et.projectionMatrix),si.setValue(mt,"viewMatrix",et.matrixWorldInverse);let Ir=si.map.cameraPosition;Ir!==void 0&&Ir.setValue(mt,kt.setFromMatrixPosition(et.matrixWorld)),Te.logarithmicDepthBuffer&&si.setValue(mt,"logDepthBufFC",2/(Math.log(et.far+1)/Math.LN2)),(Gt.isMeshPhongMaterial||Gt.isMeshToonMaterial||Gt.isMeshLambertMaterial||Gt.isMeshBasicMaterial||Gt.isMeshStandardMaterial||Gt.isShaderMaterial)&&si.setValue(mt,"isOrthographic",et.isOrthographicCamera===!0),B!==et&&(B=et,hr=!0,pr=!0)}if(Lt.isSkinnedMesh){si.setOptional(mt,Lt,"bindMatrix"),si.setOptional(mt,Lt,"bindMatrixInverse");let fr=Lt.skeleton;fr&&(fr.boneTexture===null&&fr.computeBoneTexture(),si.setValue(mt,"boneTexture",fr.boneTexture,tt))}Lt.isBatchedMesh&&(si.setOptional(mt,Lt,"batchingTexture"),si.setValue(mt,"batchingTexture",Lt._matricesTexture,tt),si.setOptional(mt,Lt,"batchingIdTexture"),si.setValue(mt,"batchingIdTexture",Lt._indirectTexture,tt),si.setOptional(mt,Lt,"batchingColorTexture"),Lt._colorsTexture!==null&&si.setValue(mt,"batchingColorTexture",Lt._colorsTexture,tt));let Kr=Wt.morphAttributes;if((Kr.position!==void 0||Kr.normal!==void 0||Kr.color!==void 0)&&Xe.update(Lt,Wt,hs),(hr||Ke.receiveShadow!==Lt.receiveShadow)&&(Ke.receiveShadow=Lt.receiveShadow,si.setValue(mt,"receiveShadow",Lt.receiveShadow)),Gt.isMeshGouraudMaterial&&Gt.envMap!==null&&(zr.envMap.value=Ue,zr.flipEnvMap.value=Ue.isCubeTexture&&Ue.isRenderTargetTexture===!1?-1:1),Gt.isMeshStandardMaterial&&Gt.envMap===null&&Dt.environment!==null&&(zr.envMapIntensity.value=Dt.environmentIntensity),hr&&(si.setValue(mt,"toneMappingExposure",k.toneMappingExposure),Ke.needsLights&&Cs(zr,pr),xe&&Gt.fog===!0&&ge.refreshFogUniforms(zr,xe),ge.refreshMaterialUniforms(zr,Gt,Q,st,b.state.transmissionRenderTarget[et.id]),$h.upload(mt,Ss(Ke),zr,tt)),Gt.isShaderMaterial&&Gt.uniformsNeedUpdate===!0&&($h.upload(mt,Ss(Ke),zr,tt),Gt.uniformsNeedUpdate=!1),Gt.isSpriteMaterial&&si.setValue(mt,"center",Lt.center),si.setValue(mt,"modelViewMatrix",Lt.modelViewMatrix),si.setValue(mt,"normalMatrix",Lt.normalMatrix),si.setValue(mt,"modelMatrix",Lt.matrixWorld),Gt.isShaderMaterial||Gt.isRawShaderMaterial){let fr=Gt.uniformsGroups;for(let Ir=0,yl=fr.length;Ir<yl;Ir++){let Aa=fr[Ir];It.update(Aa,hs),It.bind(Aa,hs)}}return hs}function Cs(et,Dt){et.ambientLightColor.needsUpdate=Dt,et.lightProbe.needsUpdate=Dt,et.directionalLights.needsUpdate=Dt,et.directionalLightShadows.needsUpdate=Dt,et.pointLights.needsUpdate=Dt,et.pointLightShadows.needsUpdate=Dt,et.spotLights.needsUpdate=Dt,et.spotLightShadows.needsUpdate=Dt,et.rectAreaLights.needsUpdate=Dt,et.hemisphereLights.needsUpdate=Dt}function sa(et){return et.isMeshLambertMaterial||et.isMeshToonMaterial||et.isMeshPhongMaterial||et.isMeshStandardMaterial||et.isShadowMaterial||et.isShaderMaterial&&et.lights===!0}this.getActiveCubeFace=function(){return U},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return F},this.setRenderTargetTextures=function(et,Dt,Wt){Zt.get(et.texture).__webglTexture=Dt,Zt.get(et.depthTexture).__webglTexture=Wt;let Gt=Zt.get(et);Gt.__hasExternalTextures=!0,Gt.__autoAllocateDepthBuffer=Wt===void 0,Gt.__autoAllocateDepthBuffer||ut.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Gt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(et,Dt){let Wt=Zt.get(et);Wt.__webglFramebuffer=Dt,Wt.__useDefaultFramebuffer=Dt===void 0},this.setRenderTarget=function(et,Dt=0,Wt=0){F=et,U=Dt,N=Wt;let Gt=!0,Lt=null,xe=!1,Ee=!1;if(et){let Ue=Zt.get(et);if(Ue.__useDefaultFramebuffer!==void 0)ae.bindFramebuffer(mt.FRAMEBUFFER,null),Gt=!1;else if(Ue.__webglFramebuffer===void 0)tt.setupRenderTarget(et);else if(Ue.__hasExternalTextures)tt.rebindTextures(et,Zt.get(et.texture).__webglTexture,Zt.get(et.depthTexture).__webglTexture);else if(et.depthBuffer){let $e=et.depthTexture;if(Ue.__boundDepthTexture!==$e){if($e!==null&&Zt.has($e)&&(et.width!==$e.image.width||et.height!==$e.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");tt.setupDepthRenderbuffer(et)}}let rn=et.texture;(rn.isData3DTexture||rn.isDataArrayTexture||rn.isCompressedArrayTexture)&&(Ee=!0);let un=Zt.get(et).__webglFramebuffer;et.isWebGLCubeRenderTarget?(Array.isArray(un[Dt])?Lt=un[Dt][Wt]:Lt=un[Dt],xe=!0):et.samples>0&&tt.useMultisampledRTT(et)===!1?Lt=Zt.get(et).__webglMultisampledFramebuffer:Array.isArray(un)?Lt=un[Wt]:Lt=un,P.copy(et.viewport),V.copy(et.scissor),$=et.scissorTest}else P.copy(qt).multiplyScalar(Q).floor(),V.copy(z).multiplyScalar(Q).floor(),$=it;if(ae.bindFramebuffer(mt.FRAMEBUFFER,Lt)&&Gt&&ae.drawBuffers(et,Lt),ae.viewport(P),ae.scissor(V),ae.setScissorTest($),xe){let Ue=Zt.get(et.texture);mt.framebufferTexture2D(mt.FRAMEBUFFER,mt.COLOR_ATTACHMENT0,mt.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,Ue.__webglTexture,Wt)}else if(Ee){let Ue=Zt.get(et.texture),rn=Dt||0;mt.framebufferTextureLayer(mt.FRAMEBUFFER,mt.COLOR_ATTACHMENT0,Ue.__webglTexture,Wt||0,rn)}O=-1},this.readRenderTargetPixels=function(et,Dt,Wt,Gt,Lt,xe,Ee){if(!(et&&et.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ne=Zt.get(et).__webglFramebuffer;if(et.isWebGLCubeRenderTarget&&Ee!==void 0&&(Ne=Ne[Ee]),Ne){ae.bindFramebuffer(mt.FRAMEBUFFER,Ne);try{let Ue=et.texture,rn=Ue.format,un=Ue.type;if(!Te.textureFormatReadable(rn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Te.textureTypeReadable(un)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Dt>=0&&Dt<=et.width-Gt&&Wt>=0&&Wt<=et.height-Lt&&mt.readPixels(Dt,Wt,Gt,Lt,nn.convert(rn),nn.convert(un),xe)}finally{let Ue=F!==null?Zt.get(F).__webglFramebuffer:null;ae.bindFramebuffer(mt.FRAMEBUFFER,Ue)}}},this.readRenderTargetPixelsAsync=function(et,Dt,Wt,Gt,Lt,xe,Ee){return Be(this,null,function*(){if(!(et&&et.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ne=Zt.get(et).__webglFramebuffer;if(et.isWebGLCubeRenderTarget&&Ee!==void 0&&(Ne=Ne[Ee]),Ne){let Ue=et.texture,rn=Ue.format,un=Ue.type;if(!Te.textureFormatReadable(rn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Te.textureTypeReadable(un))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Dt>=0&&Dt<=et.width-Gt&&Wt>=0&&Wt<=et.height-Lt){ae.bindFramebuffer(mt.FRAMEBUFFER,Ne);let $e=mt.createBuffer();mt.bindBuffer(mt.PIXEL_PACK_BUFFER,$e),mt.bufferData(mt.PIXEL_PACK_BUFFER,xe.byteLength,mt.STREAM_READ),mt.readPixels(Dt,Wt,Gt,Lt,nn.convert(rn),nn.convert(un),0);let On=F!==null?Zt.get(F).__webglFramebuffer:null;ae.bindFramebuffer(mt.FRAMEBUFFER,On);let Nn=mt.fenceSync(mt.SYNC_GPU_COMMANDS_COMPLETE,0);return mt.flush(),yield G4(mt,Nn,4),mt.bindBuffer(mt.PIXEL_PACK_BUFFER,$e),mt.getBufferSubData(mt.PIXEL_PACK_BUFFER,0,xe),mt.deleteBuffer($e),mt.deleteSync(Nn),xe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}})},this.copyFramebufferToTexture=function(et,Dt=null,Wt=0){et.isTexture!==!0&&(Xd("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Dt=arguments[0]||null,et=arguments[1]);let Gt=Math.pow(2,-Wt),Lt=Math.floor(et.image.width*Gt),xe=Math.floor(et.image.height*Gt),Ee=Dt!==null?Dt.x:0,Ne=Dt!==null?Dt.y:0;tt.setTexture2D(et,0),mt.copyTexSubImage2D(mt.TEXTURE_2D,Wt,0,0,Ee,Ne,Lt,xe),ae.unbindTexture()};let Io=mt.createFramebuffer(),bl=mt.createFramebuffer();this.copyTextureToTexture=function(et,Dt,Wt=null,Gt=null,Lt=0,xe=null){et.isTexture!==!0&&(Xd("WebGLRenderer: copyTextureToTexture function signature has changed."),Gt=arguments[0]||null,et=arguments[1],Dt=arguments[2],xe=arguments[3]||0,Wt=null),xe===null&&(Lt!==0?(Xd("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),xe=Lt,Lt=0):xe=0);let Ee,Ne,Ue,rn,un,$e,On,Nn,Fi,_n=et.isCompressedTexture?et.mipmaps[xe]:et.image;if(Wt!==null)Ee=Wt.max.x-Wt.min.x,Ne=Wt.max.y-Wt.min.y,Ue=Wt.isBox3?Wt.max.z-Wt.min.z:1,rn=Wt.min.x,un=Wt.min.y,$e=Wt.isBox3?Wt.min.z:0;else{let Kr=Math.pow(2,-Lt);Ee=Math.floor(_n.width*Kr),Ne=Math.floor(_n.height*Kr),et.isDataArrayTexture?Ue=_n.depth:et.isData3DTexture?Ue=Math.floor(_n.depth*Kr):Ue=1,rn=0,un=0,$e=0}Gt!==null?(On=Gt.x,Nn=Gt.y,Fi=Gt.z):(On=0,Nn=0,Fi=0);let Fn=nn.convert(Dt.format),Ke=nn.convert(Dt.type),Ki;Dt.isData3DTexture?(tt.setTexture3D(Dt,0),Ki=mt.TEXTURE_3D):Dt.isDataArrayTexture||Dt.isCompressedArrayTexture?(tt.setTexture2DArray(Dt,0),Ki=mt.TEXTURE_2D_ARRAY):(tt.setTexture2D(Dt,0),Ki=mt.TEXTURE_2D),mt.pixelStorei(mt.UNPACK_FLIP_Y_WEBGL,Dt.flipY),mt.pixelStorei(mt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Dt.premultiplyAlpha),mt.pixelStorei(mt.UNPACK_ALIGNMENT,Dt.unpackAlignment);let zn=mt.getParameter(mt.UNPACK_ROW_LENGTH),hs=mt.getParameter(mt.UNPACK_IMAGE_HEIGHT),kr=mt.getParameter(mt.UNPACK_SKIP_PIXELS),hr=mt.getParameter(mt.UNPACK_SKIP_ROWS),pr=mt.getParameter(mt.UNPACK_SKIP_IMAGES);mt.pixelStorei(mt.UNPACK_ROW_LENGTH,_n.width),mt.pixelStorei(mt.UNPACK_IMAGE_HEIGHT,_n.height),mt.pixelStorei(mt.UNPACK_SKIP_PIXELS,rn),mt.pixelStorei(mt.UNPACK_SKIP_ROWS,un),mt.pixelStorei(mt.UNPACK_SKIP_IMAGES,$e);let si=et.isDataArrayTexture||et.isData3DTexture,zr=Dt.isDataArrayTexture||Dt.isData3DTexture;if(et.isDepthTexture){let Kr=Zt.get(et),fr=Zt.get(Dt),Ir=Zt.get(Kr.__renderTarget),yl=Zt.get(fr.__renderTarget);ae.bindFramebuffer(mt.READ_FRAMEBUFFER,Ir.__webglFramebuffer),ae.bindFramebuffer(mt.DRAW_FRAMEBUFFER,yl.__webglFramebuffer);for(let Aa=0;Aa<Ue;Aa++)si&&(mt.framebufferTextureLayer(mt.READ_FRAMEBUFFER,mt.COLOR_ATTACHMENT0,Zt.get(et).__webglTexture,Lt,$e+Aa),mt.framebufferTextureLayer(mt.DRAW_FRAMEBUFFER,mt.COLOR_ATTACHMENT0,Zt.get(Dt).__webglTexture,xe,Fi+Aa)),mt.blitFramebuffer(rn,un,Ee,Ne,On,Nn,Ee,Ne,mt.DEPTH_BUFFER_BIT,mt.NEAREST);ae.bindFramebuffer(mt.READ_FRAMEBUFFER,null),ae.bindFramebuffer(mt.DRAW_FRAMEBUFFER,null)}else if(Lt!==0||et.isRenderTargetTexture||Zt.has(et)){let Kr=Zt.get(et),fr=Zt.get(Dt);ae.bindFramebuffer(mt.READ_FRAMEBUFFER,Io),ae.bindFramebuffer(mt.DRAW_FRAMEBUFFER,bl);for(let Ir=0;Ir<Ue;Ir++)si?mt.framebufferTextureLayer(mt.READ_FRAMEBUFFER,mt.COLOR_ATTACHMENT0,Kr.__webglTexture,Lt,$e+Ir):mt.framebufferTexture2D(mt.READ_FRAMEBUFFER,mt.COLOR_ATTACHMENT0,mt.TEXTURE_2D,Kr.__webglTexture,Lt),zr?mt.framebufferTextureLayer(mt.DRAW_FRAMEBUFFER,mt.COLOR_ATTACHMENT0,fr.__webglTexture,xe,Fi+Ir):mt.framebufferTexture2D(mt.DRAW_FRAMEBUFFER,mt.COLOR_ATTACHMENT0,mt.TEXTURE_2D,fr.__webglTexture,xe),Lt!==0?mt.blitFramebuffer(rn,un,Ee,Ne,On,Nn,Ee,Ne,mt.COLOR_BUFFER_BIT,mt.NEAREST):zr?mt.copyTexSubImage3D(Ki,xe,On,Nn,Fi+Ir,rn,un,Ee,Ne):mt.copyTexSubImage2D(Ki,xe,On,Nn,rn,un,Ee,Ne);ae.bindFramebuffer(mt.READ_FRAMEBUFFER,null),ae.bindFramebuffer(mt.DRAW_FRAMEBUFFER,null)}else zr?et.isDataTexture||et.isData3DTexture?mt.texSubImage3D(Ki,xe,On,Nn,Fi,Ee,Ne,Ue,Fn,Ke,_n.data):Dt.isCompressedArrayTexture?mt.compressedTexSubImage3D(Ki,xe,On,Nn,Fi,Ee,Ne,Ue,Fn,_n.data):mt.texSubImage3D(Ki,xe,On,Nn,Fi,Ee,Ne,Ue,Fn,Ke,_n):et.isDataTexture?mt.texSubImage2D(mt.TEXTURE_2D,xe,On,Nn,Ee,Ne,Fn,Ke,_n.data):et.isCompressedTexture?mt.compressedTexSubImage2D(mt.TEXTURE_2D,xe,On,Nn,_n.width,_n.height,Fn,_n.data):mt.texSubImage2D(mt.TEXTURE_2D,xe,On,Nn,Ee,Ne,Fn,Ke,_n);mt.pixelStorei(mt.UNPACK_ROW_LENGTH,zn),mt.pixelStorei(mt.UNPACK_IMAGE_HEIGHT,hs),mt.pixelStorei(mt.UNPACK_SKIP_PIXELS,kr),mt.pixelStorei(mt.UNPACK_SKIP_ROWS,hr),mt.pixelStorei(mt.UNPACK_SKIP_IMAGES,pr),xe===0&&Dt.generateMipmaps&&mt.generateMipmap(Ki),ae.unbindTexture()},this.copyTextureToTexture3D=function(et,Dt,Wt=null,Gt=null,Lt=0){return et.isTexture!==!0&&(Xd("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Wt=arguments[0]||null,Gt=arguments[1]||null,et=arguments[2],Dt=arguments[3],Lt=arguments[4]||0),Xd('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(et,Dt,Wt,Gt,Lt)},this.initRenderTarget=function(et){Zt.get(et).__webglFramebuffer===void 0&&tt.setupRenderTarget(et)},this.initTexture=function(et){et.isCubeTexture?tt.setTextureCube(et,0):et.isData3DTexture?tt.setTexture3D(et,0):et.isDataArrayTexture||et.isCompressedArrayTexture?tt.setTexture2DArray(et,0):tt.setTexture2D(et,0),ae.unbindTexture()},this.resetState=function(){U=0,N=0,F=null,ae.reset(),Ye.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return wo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorspace=Zn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Zn._getUnpackColorSpace()}};var Qx=class i{constructor(e){this.el=e}scene;camera;renderer;robot;ngOnInit(){this.initScene(),this.addRobot(),this.animate()}initScene(){let e=this.el.nativeElement.querySelector("#robotCanvas");this.scene=new Um,this.camera=new Xr(75,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.z=5,this.renderer=new Zx({canvas:e,antialias:!0,alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight)}addRobot(){let e=new Rc(1,1,1),t=new Wm({color:65280}),n=new ds(e,t),r=new Hm(.1,32,32),s=new jd({color:16777215}),a=new ds(r,s),o=new ds(r,s);a.position.set(-.3,.3,.6),o.position.set(.3,.3,.6),this.robot=new gl,this.robot.add(n,a,o),this.scene.add(this.robot);let l=new qm(16777215,1,100);l.position.set(10,10,10),this.scene.add(l)}animate(){requestAnimationFrame(()=>this.animate()),this.robot.rotation.y+=.01,this.renderer.render(this.scene,this.camera)}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}onDocumentMouseMove(e){let t=e.clientX/window.innerWidth*2-1,n=-(e.clientY/window.innerHeight)*2+1;this.robot.rotation.x=n*.2,this.robot.rotation.y=t*.2}static \u0275fac=function(t){return new(t||i)(Ot(Fr))};static \u0275cmp=Ve({type:i,selectors:[["app-access-denied"]],hostBindings:function(t,n){t&1&&lt("resize",function(s){return n.onWindowResize(s)},!1,eA)("mousemove",function(s){return n.onDocumentMouseMove(s)},!1,Hl)},decls:9,vars:0,consts:[["id","container"],["id","message"],["width","50%","src","assets/images/access-denied.png","alt","",1,"logo-style"],["routerLink","/login"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1),Rt(2,"img",2),c(3,"h1"),h(4,"Access Denied"),u(),c(5,"p"),h(6,"Please login to access this page."),u(),c(7,"button",3),h(8,"Login"),u()()())},dependencies:[di],styles:["#container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background:linear-gradient(135deg,#1d1d1d,#3a3a3a);color:#fff;overflow:hidden}#message[_ngcontent-%COMP%]{text-align:center;z-index:10;position:relative}#message[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}#message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem}button[_ngcontent-%COMP%]{width:100%;margin-top:2%;padding:10px;border:none;border-radius:4px;background-color:#f48d3a;color:#fff;font-size:16px;cursor:pointer;transition:1s;font-family:Arial,Helvetica,sans-serif;font-weight:700}button[_ngcontent-%COMP%]:hover{background-color:#fff;color:#181818;border:#f48d3a 1px solid}"]})};var _nt=i=>({"full-width":i}),vnt=i=>({"active-module":i}),xnt=i=>["/add-sales-accounts","Token",i],bnt=i=>["/add-sales-accounts","Agreement",i],ynt=i=>["/add-sales-accounts","Registration",i];function Snt(i,e){if(i&1&&(c(0,"option",16),h(1),u()),i&2){let t=e.$implicit;D("value",t),_(),A(t)}}function wnt(i,e){if(i&1){let t=Ft();c(0,"li",17),lt("click",function(){let r=G(t).$implicit,s=I();return q(s.selectModule(r))}),h(1),u()}if(i&2){let t=e.$implicit,n=I();D("ngClass",te(2,vnt,t===n.selectedModule)),_(),de(" ",t," ")}}function Cnt(i,e){if(i&1&&(c(0,"tr",26)(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td"),h(10),u(),c(11,"td",27),Rt(12,"i",28),u()()),i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),A(t.Sales_stage2||"Token Not Received"),_(),D("routerLink",te(6,xnt,t.Db_tracker_id))}}function Mnt(i,e){if(i&1&&(pe(0),rt(1,Cnt,13,8,"tr",25),fe()),i&2){let t=I(2);_(),D("ngForOf",t.get_token)}}function Ent(i,e){i&1&&(c(0,"tr")(1,"td",29),h(2,"No Data Found"),u()())}function Ant(i,e){if(i&1&&(c(0,"div",18)(1,"div",19)(2,"table",20)(3,"thead",21)(4,"tr")(5,"th",22),h(6,"Token"),u()(),c(7,"tr")(8,"th",23),h(9,"S.No"),u(),c(10,"th",23),h(11,"Name"),u(),c(12,"th",23),h(13,"Contact"),u(),c(14,"th",23),h(15,"Location"),u(),c(16,"th",23),h(17,"Token Status"),u(),c(18,"th",23),h(19,"Edit"),u()()(),c(20,"tbody"),rt(21,Mnt,2,1,"ng-container",24)(22,Ent,3,0,"ng-template",null,0,De),u()()()()),i&2){let t=an(23),n=I();_(21),D("ngIf",n.get_token&&n.get_token.length>0)("ngIfElse",t)}}function Tnt(i,e){if(i&1&&(c(0,"tr",26)(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td"),h(10),u(),c(11,"td",27),Rt(12,"i",28),u()()),i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),A(t.Customer_stage1||"Agreement Not Completed"),_(),D("routerLink",te(6,bnt,t.Db_tracker_id))}}function knt(i,e){if(i&1&&(pe(0),rt(1,Tnt,13,8,"tr",25),fe()),i&2){let t=I(2);_(),D("ngForOf",t.get_agreement)}}function Int(i,e){i&1&&(c(0,"tr")(1,"td",29),h(2,"No Data Found"),u()())}function Dnt(i,e){if(i&1&&(c(0,"div",18)(1,"div",19)(2,"table",20)(3,"thead",21)(4,"tr")(5,"th",22),h(6,"Agreement"),u()(),c(7,"tr")(8,"th",23),h(9,"S.No"),u(),c(10,"th",23),h(11,"Name"),u(),c(12,"th",23),h(13,"Contact"),u(),c(14,"th",23),h(15,"Location"),u(),c(16,"th",23),h(17,"Agreement Status"),u(),c(18,"th",23),h(19,"Edit"),u()()(),c(20,"tbody"),rt(21,knt,2,1,"ng-container",24)(22,Int,3,0,"ng-template",null,0,De),u()()()()),i&2){let t=an(23),n=I();_(21),D("ngIf",n.get_agreement&&n.get_agreement.length>0)("ngIfElse",t)}}function Pnt(i,e){if(i&1&&(c(0,"tr",26)(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td"),h(10),u(),c(11,"td",27),Rt(12,"i",28),u()()),i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),A(t.Customer_stage2||"Registration Not Completed"),_(),D("routerLink",te(6,ynt,t.Db_tracker_id))}}function Rnt(i,e){if(i&1&&(pe(0),rt(1,Pnt,13,8,"tr",25),fe()),i&2){let t=I(2);_(),D("ngForOf",t.get_registration)}}function Lnt(i,e){i&1&&(c(0,"tr")(1,"td",29),h(2,"No Data Found"),u()())}function Ont(i,e){if(i&1&&(c(0,"div",18)(1,"div",19)(2,"table",20)(3,"thead",21)(4,"tr")(5,"th",22),h(6,"Registration"),u()(),c(7,"tr")(8,"th",23),h(9,"S.No"),u(),c(10,"th",23),h(11,"Name"),u(),c(12,"th",23),h(13,"Contact"),u(),c(14,"th",23),h(15,"Location"),u(),c(16,"th",23),h(17,"Registration Status"),u(),c(18,"th",23),h(19,"Edit"),u()()(),c(20,"tbody"),rt(21,Rnt,2,1,"ng-container",24)(22,Lnt,3,0,"ng-template",null,0,De),u()()()()),i&2){let t=an(23),n=I();_(21),D("ngIf",n.get_registration&&n.get_registration.length>0)("ngIfElse",t)}}var tb=class i{constructor(e,t,n,r){this.route=e;this.apiService=t;this.http=n;this.userService=r}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}project_id=null;dbtracker_api_url="";ngOnInit(){this.dbtracker_api_url=this.apiService.sales_dbtracker_api(),this.route.params.subscribe(e=>{this.project_id=parseInt(e.projectid)}),this.project_name(),this.get_dbtracker_api(),this.retrive_data()}card_name="";retrive_data(){this.card_name=this.apiService.get_redirect_card(),this.selectedModule=this.card_name}project_names="";project_name(){this.project_id==1?this.project_names="ANBU AVENUE":this.project_id==2&&(this.project_names="RVS AVENUE")}selectedModule="";modules=["Token","Agreement","Registration"];selectModule(e){this.selectedModule=e}get_dbtracker_data;get_token;get_agreement;get_registration;get_dbtracker_api(){let e=new Date;this.http.get(this.dbtracker_api_url).subscribe(t=>{this.get_dbtracker_data=t.filter(n=>n.project_id===this.project_id),this.get_token=this.get_dbtracker_data.filter(n=>n.Sales_stage1==="Site Visit Completed"&&n.Sales_stage2!=="Token Received"),this.get_agreement=this.get_dbtracker_data.filter(n=>n.Sales_stage2==="Token Received"&&n.Customer_stage1!=="Agreement Completed"),this.get_registration=this.get_dbtracker_data.filter(n=>n.Customer_stage1==="Agreement Completed"&&n.Customer_stage2!=="Registration Completed")},t=>{console.error("Error fetching items",t)})}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-sales-view-accounts"]],decls:21,vars:11,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"bradcrumb-card"],[1,"container","my-4"],[1,"form-group","module-dropdown"],["for","moduleSelect"],["id","moduleSelect",1,"custom-input",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"module-card"],[1,"module-list"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","mt-5",4,"ngIf"],[3,"value"],[3,"click","ngClass"],[1,"mt-5"],["id","content-to-pdf",1,"table-responsive"],[1,"table","table-bordered","table-striped"],[1,"table-header"],["colspan","15",1,"main-header"],[1,"goal"],[4,"ngIf","ngIfElse"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[3,"routerLink"],[1,"fa","fa-edit"],["colspan","15",2,"text-align","center"]],template:function(t,n){t&1&&(c(0,"app-header",1),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"p"),h(6),u()(),c(7,"div",6)(8,"div",7)(9,"label",8),h(10,"Select Module"),u(),c(11,"select",9),vt("ngModelChange",function(s){return _t(n.selectedModule,s)||(n.selectedModule=s),s}),c(12,"option",10),h(13,"Select a Module"),u(),rt(14,Snt,2,2,"option",11),u()(),c(15,"div",12)(16,"ul",13),rt(17,wnt,2,4,"li",14),u()(),rt(18,Ant,24,2,"div",15)(19,Dnt,24,2,"div",15)(20,Ont,24,2,"div",15),u()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(9,_nt,!n.isSidebarOpen)),_(4),A(n.project_names),_(5),gt("ngModel",n.selectedModule),_(3),D("ngForOf",n.modules),_(3),D("ngForOf",n.modules),_(),D("ngIf",n.selectedModule==="Token"),_(),D("ngIf",n.selectedModule==="Agreement"),_(),D("ngIf",n.selectedModule==="Registration"))},dependencies:[en,Jn,Sn,di,Ri,Li,Si,oi,ni,on,ln],styles:['.goal[_ngcontent-%COMP%]{background-color:#d6a6be;text-align:center}.actual[_ngcontent-%COMP%]{background-color:#92c47d;text-align:center}.sts-all[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.table-row[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.main-header[_ngcontent-%COMP%]{background-color:#741b48;color:#fff}i[_ngcontent-%COMP%]{cursor:pointer;color:gray;transition:.1s}i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#492020}.comment-card[_ngcontent-%COMP%]{padding:1rem;background:#f9f9f9;border:1px solid #ddd;border-radius:8px;position:fixed;top:20%;left:50%;transform:translate(-50%,-50%);max-width:300px;box-shadow:0 2px 10px #0000001a;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translate(-50%,-60%)}to{opacity:1;transform:translate(-50%,-50%)}}.pop-card[_ngcontent-%COMP%]{position:absolute;background-color:#f0f4f8;padding:2%;border-radius:10px;top:45%;left:50%;transform:translate(-50%,-50%);box-shadow:0 4px 10px #0003}.pop-card-cmt[_ngcontent-%COMP%]{position:fixed;background-color:#f0f4f8;padding:2%;border-radius:10px;top:45%;left:50%;transform:translate(-50%,-50%);box-shadow:0 4px 10px #0003}.data-table-container[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:20px auto;border-radius:8px;background-color:#f9f9f9;overflow:hidden;box-shadow:0 2px 5px #0000001a}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:left}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#92c47d;color:#fff}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px;font-weight:700;text-transform:uppercase}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;color:#333;border-bottom:1px solid #ddd}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f4f4f4}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}@media (max-width: 600px){.data-table[_ngcontent-%COMP%]{font-size:14px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px}}.custmer-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-family:Arial,sans-serif;margin:20px 0;box-shadow:0 2px 5px #0000001a}.custmer-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.custmer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;font-size:14px;text-transform:uppercase;letter-spacing:1px}.custmer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}.custmer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.custmer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px;text-align:left;border-bottom:1px solid #ddd}.custmer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .custmer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.custmer-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover:after{content:"View Customer Comment";position:absolute;background-color:#333;color:#fff;padding:5px;font-size:12px;border-radius:5px;bottom:30px;left:50%;transform:translate(-50%);opacity:0;transition:opacity .3s}.custmer-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover:after{opacity:1}.green-text[_ngcontent-%COMP%]{color:green}.red-text[_ngcontent-%COMP%]{color:red}.custome-cmd[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:auto;max-height:200px;max-width:100%;box-sizing:border-box;margin-bottom:2%}.custome-cmd[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.custome-cmd[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.custome-cmd[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.custome-cmd[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.custome-cmd[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.custome-cmd[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .custome-cmd[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}table.table-bordered[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.today-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff!important;font-weight:lighter}table.table-bordered[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.past-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:red!important;color:#fff!important;font-weight:lighter}table.table-bordered[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.empty-date-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#ff0!important;color:#000!important;font-weight:400}table.table-bordered[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.upcoming-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:orange!important;color:#fff!important;font-weight:400}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{background-clip:padding-box}table.table-bordered[_ngcontent-%COMP%]{background-color:transparent!important}table.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:inherit!important}']})};var Nnt=i=>({"full-width":i});function Fnt(i,e){if(i&1){let t=Ft();c(0,"div",27),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.selectSite(r))}),h(1),u()}if(i&2){let t=e.$implicit;ar("selected",t.selected),_(),de(" ",t.site_no," ")}}function Bnt(i,e){if(i&1){let t=Ft();c(0,"div",22)(1,"div",23)(2,"span",24),lt("click",function(){G(t);let r=I(2);return q(r.closePopup())}),h(3,"\xD7"),u(),c(4,"div",25),rt(5,Fnt,2,3,"div",26),u()()()}if(i&2){let t=I(2);_(5),D("ngForOf",t.site_details)}}function Vnt(i,e){if(i&1){let t=Ft();c(0,"div",5)(1,"div",6)(2,"div",7)(3,"label"),h(4,"Token"),u()(),c(5,"div",8)(6,"div",9)(7,"div",10)(8,"label",11),h(9,"Token Status:"),u(),c(10,"select",12),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Sales_stage2,r)||(s.get_dbtaracker.Sales_stage2=r),q(r)}),c(11,"option",13),h(12,"Select Token Status"),u(),c(13,"option",14),h(14,"Token Received"),u(),c(15,"option",15),h(16,"Token Not Received"),u()()(),c(17,"div",10)(18,"label",11),h(19,"Site No:"),u(),c(20,"button",16),lt("click",function(){G(t);let r=I();return q(r.openPopup())}),h(21,"Select site"),u()(),rt(22,Bnt,6,1,"div",17),c(23,"div",10)(24,"label",11),h(25,"Token Received Date:"),u(),c(26,"input",18),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Sales_token_recived_date,r)||(s.get_dbtaracker.Sales_token_recived_date=r),q(r)}),u()()(),c(27,"div",19)(28,"div")(29,"label",11),h(30,"Remarks"),u(),Rt(31,"textarea",20),u()(),c(32,"button",21),lt("click",function(){G(t);let r=I();return q(r.update_token())}),h(33,"Update"),u(),c(34,"button",21),lt("click",function(){G(t);let r=I();return q(r.back_btn("Token"))}),h(35,"Back"),u()()()()}if(i&2){let t=I();_(10),gt("ngModel",t.get_dbtaracker.Sales_stage2),_(12),D("ngIf",t.isPopupVisible),_(4),gt("ngModel",t.get_dbtaracker.Sales_token_recived_date)}}function Unt(i,e){if(i&1){let t=Ft();c(0,"div",5)(1,"div",6)(2,"div",7)(3,"label"),h(4,"Agreement"),u()(),c(5,"div",8)(6,"div",9)(7,"div",10)(8,"label",11),h(9,"Agreement Status:"),u(),c(10,"select",12),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Customer_stage1,r)||(s.get_dbtaracker.Customer_stage1=r),q(r)}),c(11,"option",13),h(12,"Select Token Status"),u(),c(13,"option",28),h(14,"Agreement Completed"),u(),c(15,"option",29),h(16,"Agreement Not Completed"),u()()(),c(17,"div",10)(18,"label",11),h(19,"Site No:"),u(),c(20,"input",30),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.booked_site,r)||(s.get_dbtaracker.booked_site=r),q(r)}),u()(),c(21,"div",10)(22,"label",11),h(23,"Agreement Date:"),u(),c(24,"input",18),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Customer_agreement_date,r)||(s.get_dbtaracker.Customer_agreement_date=r),q(r)}),u()()(),c(25,"div",19)(26,"div")(27,"label",11),h(28,"Remarks"),u(),Rt(29,"textarea",20),u()(),c(30,"button",21),lt("click",function(){G(t);let r=I();return q(r.update_agreement())}),h(31,"Update"),u(),c(32,"button",21),lt("click",function(){G(t);let r=I();return q(r.back_btn("Agreement"))}),h(33,"Back"),u()()()()}if(i&2){let t=I();_(10),gt("ngModel",t.get_dbtaracker.Customer_stage1),_(10),gt("ngModel",t.get_dbtaracker.booked_site),_(4),gt("ngModel",t.get_dbtaracker.Customer_agreement_date)}}function znt(i,e){if(i&1){let t=Ft();c(0,"div",5)(1,"div",6)(2,"div",7)(3,"label"),h(4,"Registration"),u()(),c(5,"div",8)(6,"div",9)(7,"div",10)(8,"label",11),h(9,"Registration Status:"),u(),c(10,"select",12),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Customer_stage2,r)||(s.get_dbtaracker.Customer_stage2=r),q(r)}),c(11,"option",13),h(12,"Select Token Status"),u(),c(13,"option",31),h(14,"Registration Completed"),u(),c(15,"option",32),h(16,"Registration Not Completed"),u()()(),c(17,"div",10)(18,"label",11),h(19,"Site No:"),u(),c(20,"input",30),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.booked_site,r)||(s.get_dbtaracker.booked_site=r),q(r)}),u()(),c(21,"div",10)(22,"label",11),h(23,"Registration Date:"),u(),c(24,"input",18),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.get_dbtaracker.Customer_registration_date,r)||(s.get_dbtaracker.Customer_registration_date=r),q(r)}),u()()(),c(25,"div",19)(26,"div")(27,"label",11),h(28,"Remarks"),u(),Rt(29,"textarea",20),u()(),c(30,"button",21),lt("click",function(){G(t);let r=I();return q(r.update_registration())}),h(31,"Update"),u(),c(32,"button",21),lt("click",function(){G(t);let r=I();return q(r.back_btn("Registration"))}),h(33,"Back"),u()()()()}if(i&2){let t=I();_(10),gt("ngModel",t.get_dbtaracker.Customer_stage2),_(10),gt("ngModel",t.get_dbtaracker.booked_site),_(4),gt("ngModel",t.get_dbtaracker.Customer_registration_date)}}var eb=class i{constructor(e,t,n,r,s){this.route=e;this.apiService=t;this.http=n;this.router=r;this.userService=s}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}current_task=null;sales_id=null;dbtracker_api_url="";site_details_url="";ngOnInit(){this.dbtracker_api_url=this.apiService.sales_dbtracker_api(),this.site_details_url=this.apiService.site_details_api(),this.route.params.subscribe(e=>{this.current_task=e.salescardname,this.sales_id=e.sales_id}),this.get_dbtaracker_data_api(),this.get_site_details()}get_dbtaracker;get_dbtaracker_data_api(){this.http.get(this.dbtracker_api_url+this.sales_id).subscribe(e=>{this.get_dbtaracker=e},e=>{console.error("Error fetching items",e)})}isPopupVisible=!1;openPopup(){this.isPopupVisible=!0}closePopup(){this.isPopupVisible=!1}site_details=[];available_site=[];selected_site;get_site_details(){this.http.get(this.site_details_url).subscribe(e=>{this.available_site=e.filter(t=>t.is_site_booked===!1),this.site_details=this.available_site.map(t=>In(Se({},t),{selected:!1}))},e=>{console.error("Error fetching items",e)})}selectSite(e){this.selected_site&&(this.selected_site.selected=!1),e.selected=!0,this.selected_site=e}successmgs=!1;update_token(){let e=this.dbtracker_api_url+this.sales_id,t=!0,n=!0;this.get_dbtaracker.Sales_stage2==="Token Received"&&(t=!1,n=!0);let r={Sales_stage2:this.get_dbtaracker.Sales_stage2,Sales_token_recived_date:this.get_dbtaracker.Sales_token_recived_date,booked_site:this.selected_site.site_no,booked_site_id:this.selected_site.site_id,is_sales_tracker:t,is_customer_tracker:n},s={headers:new We({"Content-Type":"application/json"})};this.http.put(e,r,s).subscribe(a=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Token"),this.router.navigate(["/view-sales-accounts",this.get_dbtaracker.project_id])},1e3)},a=>{console.error("PUT request failed",a)}),this.update_booked_site()}update_booked_site(){let e=this.site_details_url+this.selected_site.site_id,t={is_site_booked:!0},n={headers:new We({"Content-Type":"application/json"})};this.http.put(e,t,n).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Token"),this.router.navigate(["/view-sales-accounts",this.get_dbtaracker.project_id])},1e3)},r=>{console.error("PUT request failed",r)})}back_btn(e){this.apiService.set_redirect_card(e),this.router.navigate(["/view-sales-accounts",this.get_dbtaracker.project_id])}update_agreement(){let e=this.dbtracker_api_url+this.sales_id,t={Customer_stage1:this.get_dbtaracker.Customer_stage1,Customer_agreement_date:this.get_dbtaracker.Customer_agreement_date},n={headers:new We({"Content-Type":"application/json"})};this.http.put(e,t,n).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Agreement"),this.router.navigate(["/view-sales-accounts",this.get_dbtaracker.project_id])},1e3)},r=>{console.error("PUT request failed",r)})}update_registration(){let e=this.dbtracker_api_url+this.sales_id,t=!0,n=!0,r=!0;this.get_dbtaracker.Customer_stage2==="Registration Completed"&&(t=!1,n=!1,r=!0);let s={Customer_stage2:this.get_dbtaracker.Customer_stage2,Sales_token_recived_date:this.get_dbtaracker.Sales_token_recived_date,is_sales_tracker:t,is_customer_tracker:n,is_customer_database:r},a={headers:new We({"Content-Type":"application/json"})};this.http.put(e,s,a).subscribe(o=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Registration"),this.router.navigate(["/view-sales-accounts",this.get_dbtaracker.project_id])},1e3)},o=>{console.error("PUT request failed",o)})}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(Vn),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-sales-details-accounts"]],decls:7,vars:7,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5","mob-res"],["class","container mt-5",4,"ngIf"],[1,"container","mt-5"],[1,"card","shadow"],[1,"heading-card"],[1,"card-body"],[1,"row"],[1,"col"],["for",""],["name","","id","",1,"custom-input",3,"ngModelChange","ngModel"],["value",""],["value","Token Received"],["value","Token Not Received"],[1,"custom-input",3,"click"],["class","popup-container",4,"ngIf"],["type","date",1,"custom-input",3,"ngModelChange","ngModel"],[1,"row","mb-3"],["name","","id","",1,"custom-input"],[1,"submit-btn",3,"click"],[1,"popup-container"],[1,"popup-card"],[1,"close-btn",3,"click"],[1,"site-container"],["class","site-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"site-item",3,"click"],["value","Agreement Completed"],["value","Agreement Not Completed"],["readonly","","type","text",1,"custom-input",3,"ngModelChange","ngModel"],["value","Registration Completed"],["value","Registration Not Completed"]],template:function(t,n){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3),rt(4,Vnt,36,3,"div",4)(5,Unt,34,3,"div",4)(6,znt,34,3,"div",4),u()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(5,Nnt,!n.isSidebarOpen)),_(2),D("ngIf",n.current_task==="Token"),_(),D("ngIf",n.current_task==="Agreement"),_(),D("ngIf",n.current_task==="Registration"))},dependencies:[en,Jn,Sn,Ri,Li,yi,Si,oi,ni,on,ln],styles:[".site-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(50px,1fr));gap:15px;margin:20px 0}.site-item[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;align-items:center;justify-content:center;border:2px solid #ccc;border-radius:8px;font-size:16px;font-weight:700;background-color:#f9f9f9;cursor:pointer;transition:all .3s ease-in-out}.site-item[_ngcontent-%COMP%]:hover{border-color:#4caf50;background-color:#e8f5e9}.site-item.selected[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:2px solid #388e3c}.popup-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.popup-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;width:400px;padding:20px;box-shadow:0 5px 15px #0000004d;text-align:center;animation:_ngcontent-%COMP%_popupFadeIn .3s ease;position:relative}.close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;font-size:24px;font-weight:700;color:#333;cursor:pointer;transition:color .3s ease}.close-btn[_ngcontent-%COMP%]:hover{color:red}@keyframes _ngcontent-%COMP%_popupFadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}"]})};var jnt=i=>({"full-width":i}),CR=i=>["/view-sales-accounts",i],nb=class i{constructor(e){this.userService=e}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}ngOnInit(){this.get_data()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}project1=1;project2=2;static \u0275fac=function(t){return new(t||i)(Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-project-accounds"]],decls:25,vars:10,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container",2,"margin-top","10%"],[1,"row"],[1,"col","mt-5"],[1,"projects-card"],["src","/assets/images/Anbu-Avenue.jpg","alt","",1,"project-img"],[1,"projects-card-txt"],[2,"margin-bottom","5px"],[1,"banner-btn"],[3,"routerLink"],["src","/assets/images/RVS.jpg","alt","",1,"project-img"]],template:function(t,n){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),Rt(7,"img",7),c(8,"div",8)(9,"h4",9),h(10,"Komarapalayam"),u()(),c(11,"div",10)(12,"a",11),Rt(13,"span"),h(14,"Update Sales"),u()()()(),c(15,"div",5)(16,"div",6),Rt(17,"img",12),c(18,"div",8)(19,"h4",9),h(20,"Sangagiri"),u()(),c(21,"div",10)(22,"a",11),Rt(23,"span"),h(24,"Update Sales"),u()()()()()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(4,jnt,!n.isSidebarOpen)),_(10),D("routerLink",te(6,CR,n.project1)),_(10),D("routerLink",te(8,CR,n.project2)))},dependencies:[en,di,on,ln],styles:[".project-img[_ngcontent-%COMP%]{height:150px;width:100%}.projects-card[_ngcontent-%COMP%]{background-color:#5e0f80;border-radius:10px;display:flex;display:inline-block;padding:10px;color:#fff;cursor:pointer;transition:transform .3s ease,color .3s ease}.projects-card[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.projects-card-txt[_ngcontent-%COMP%]{text-align:center;border:1px solid white;padding:5px}.banner-btn[_ngcontent-%COMP%]{margin:10px auto 0;width:100%}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:inline-block;margin:0 10px;color:#fff;border:.5px solid #fff;position:relative;z-index:1;transition:color .5s;padding:10px;width:95%;text-align:center}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:0;height:100%;position:absolute;top:0;left:0;background:#fff;z-index:-1;transition:.5s}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{width:100%;color:#000}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000}"]})};var Hnt=i=>({"full-width":i});function Wnt(i,e){if(i&1){let t=Ft();c(0,"div",12)(1,"div",13)(2,"span",14),lt("click",function(){G(t);let r=I();return q(r.closePopup())}),h(3,"\xD7"),u(),Rt(4,"br"),c(5,"p"),h(6),u()()()}if(i&2){let t=I();_(6),A(t.remarks)}}function Gnt(i,e){if(i&1){let t=Ft();c(0,"tr")(1,"td"),h(2),u(),c(3,"td",25),h(4),u(),c(5,"td",26),h(6),u(),c(7,"td"),h(8),u(),c(9,"td",27),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.remark_data(r.financial_remarks))}),Rt(10,"i",28),u()()}if(i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.goal_amount),_(2),A(t.actual_amount),_(2),A(t.diffrent_amount)}}function qnt(i,e){if(i&1&&(pe(0),rt(1,Gnt,11,4,"tr",24),fe()),i&2){let t=I(2);_(),D("ngForOf",t.financial_goal_data)}}function Xnt(i,e){i&1&&(c(0,"tr")(1,"td",29),h(2,"No task found"),u()())}function Ynt(i,e){if(i&1){let t=Ft();c(0,"tr")(1,"td"),h(2),u(),c(3,"td",25),h(4),u(),c(5,"td",26),h(6),u(),c(7,"td"),h(8),u(),c(9,"td",27),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.remark_data(r.new_booking_remarks))}),Rt(10,"i",28),u()()}if(i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.new_booking_goal),_(2),A(t.new_booking_actual),_(2),A(t.new_booking_diffrence)}}function $nt(i,e){if(i&1&&(pe(0),rt(1,Ynt,11,4,"tr",24),fe()),i&2){let t=I(2);_(),D("ngForOf",t.new_booking_data)}}function Knt(i,e){i&1&&(c(0,"tr")(1,"td",29),h(2,"No task found"),u()())}function Znt(i,e){if(i&1){let t=Ft();c(0,"tr")(1,"td"),h(2),u(),c(3,"td",25),h(4),u(),c(5,"td",26),h(6),u(),c(7,"td"),h(8),u(),c(9,"td",25),h(10),u(),c(11,"td",26),h(12),u(),c(13,"td"),h(14),u(),c(15,"td",27),lt("click",function(){let r=G(t).$implicit,s=I(3);return q(s.remark_data(r.functional_remark))}),Rt(16,"i",28),u()()}if(i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.agreement_goal),_(2),A(t.agreement_actual),_(2),A(t.agreement_diffrence),_(2),A(t.registration_goal),_(2),A(t.registration_actual),_(2),A(t.registration_diffrence)}}function Jnt(i,e){if(i&1&&(pe(0),rt(1,Znt,17,7,"tr",24),fe()),i&2){let t=I(2);_(),D("ngForOf",t.functional_data)}}function Qnt(i,e){i&1&&(c(0,"tr")(1,"td",8),h(2,"No task found"),u()())}function tit(i,e){if(i&1&&(c(0,"tr")(1,"td"),h(2),u(),c(3,"td"),h(4),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u()()),i&2){let t=e.$implicit,n=e.index;_(2),A(n+1),_(2),A(t.site_no),_(2),A(t.is_site_booked?"Soled":"Not Soled"),_(2),A(t.is_site_booked?"Not Available":"Available")}}function eit(i,e){if(i&1&&(pe(0),rt(1,tit,9,4,"tr",24),c(2,"tr")(3,"td"),h(4,"Total"),u(),c(5,"td"),h(6),u(),c(7,"td"),h(8),u(),c(9,"td"),h(10),u()(),fe()),i&2){let t=I(2);_(),D("ngForOf",t.site_details),_(5),A(t.total_site),_(2),A(t.sold_site),_(2),A(t.available_site)}}function nit(i,e){i&1&&(c(0,"tr")(1,"td",30),h(2,"No task found"),u()())}function iit(i,e){if(i&1&&(c(0,"div")(1,"div",5)(2,"div",15)(3,"p"),h(4),u()()(),c(5,"div",16)(6,"table",17)(7,"thead")(8,"tr")(9,"th",18),h(10,"Financial Goal"),u()(),c(11,"tr",19)(12,"th",20),h(13,"S.No"),u(),c(14,"th",20),h(15,"Goal"),u(),c(16,"th",20),h(17,"Actual"),u(),c(18,"th",20),h(19,"Difference"),u(),c(20,"th",20),h(21,"Remark"),u()()(),c(22,"tbody"),rt(23,qnt,2,1,"ng-container",21),u(),rt(24,Xnt,3,0,"ng-template",null,0,De),u()(),c(26,"div",16)(27,"table",17)(28,"thead")(29,"tr")(30,"th",18),h(31,"New Booking"),u()(),c(32,"tr",19)(33,"th",20),h(34,"S.No"),u(),c(35,"th",20),h(36,"Goal"),u(),c(37,"th",20),h(38,"Actual"),u(),c(39,"th",20),h(40,"Difference"),u(),c(41,"th",20),h(42,"Remark"),u()()(),c(43,"tbody"),rt(44,$nt,2,1,"ng-container",21),u(),rt(45,Knt,3,0,"ng-template",null,0,De),u()(),c(47,"div",16)(48,"table",17)(49,"thead")(50,"tr")(51,"th",22),h(52,"Functional Goal"),u()(),c(53,"tr"),Rt(54,"th",20),c(55,"th",23),h(56,"Agreement"),u(),c(57,"th",23),h(58,"Registration"),u(),Rt(59,"th",20),u(),c(60,"tr",19)(61,"th",20),h(62,"S.No"),u(),c(63,"th",20),h(64,"Goal"),u(),c(65,"th",20),h(66,"Actual"),u(),c(67,"th",20),h(68,"Difference"),u(),c(69,"th",20),h(70,"Goal"),u(),c(71,"th",20),h(72,"Actual"),u(),c(73,"th",20),h(74,"Difference"),u(),c(75,"th",20),h(76,"Remark"),u()()(),c(77,"tbody"),rt(78,Jnt,2,1,"ng-container",21),u(),rt(79,Qnt,3,0,"ng-template",null,0,De),u()(),c(81,"div",16)(82,"table",17)(83,"thead")(84,"tr")(85,"th",18),h(86,"Overall Status"),u()(),c(87,"tr",19)(88,"th",20),h(89,"S.No"),u(),c(90,"th",20),h(91,"Total Site"),u(),c(92,"th",20),h(93,"Sold"),u(),c(94,"th",20),h(95,"Available"),u()()(),c(96,"tbody"),pe(97),rt(98,eit,11,4,"ng-container",21),fe(),u(),rt(99,nit,3,0,"ng-template",null,0,De),u()()()),i&2){let t=an(25),n=I();_(4),A(n.project_name),_(19),D("ngIf",n.financial_goal_data&&n.financial_goal_data.length>0)("ngIfElse",t),_(21),D("ngIf",n.new_booking_data&&n.new_booking_data.length>0)("ngIfElse",t),_(34),D("ngIf",n.functional_data&&n.functional_data.length>0)("ngIfElse",t),_(20),D("ngIf",n.site_details&&n.site_details.length>0)("ngIfElse",t)}}var ib=class i{constructor(e,t,n){this.apiService=e;this.http=t;this.userService=n}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}sales_report_url="";site_details_url="";ngOnInit(){this.sales_report_url=this.apiService.sales_report_api(),this.site_details_url=this.apiService.site_details_api()}is_tablevisible=!1;project_name="";sales_report_data=[];financial_goal_data=[];new_booking_data=[];functional_data=[];get_sales_report(e){this.is_tablevisible=!0;let t=new Date;this.http.get(this.sales_report_url).subscribe(n=>{this.sales_report_data=n.filter(r=>r.project_id===e),this.financial_goal_data=this.sales_report_data.filter(r=>r.goal_amount!==null&&r.goal_amount!==void 0&&r.actual_amount!==null&&r.actual_amount!==void 0&&r.diffrent_amount!==null&&r.diffrent_amount!==void 0&&r.financial_remarks!==null&&r.financial_remarks!==void 0).map(r=>({goal_amount:r.goal_amount,actual_amount:r.actual_amount,diffrent_amount:r.diffrent_amount,financial_remarks:r.financial_remarks})),this.new_booking_data=this.sales_report_data.filter(r=>r.new_booking_goal!==null&&r.new_booking_goal!==void 0&&r.new_booking_actual!==null&&r.new_booking_actual!==void 0&&r.new_booking_diffrence!==null&&r.new_booking_diffrence!==void 0&&r.new_booking_remarks!==null&&r.new_booking_remarks!==void 0).map(r=>({new_booking_goal:r.new_booking_goal,new_booking_actual:r.new_booking_actual,new_booking_diffrence:r.new_booking_diffrence,new_booking_remarks:r.new_booking_remarks})),this.functional_data=this.sales_report_data.filter(r=>r.agreement_goal!==null&&r.agreement_goal!==void 0&&r.agreement_actual!==null&&r.agreement_actual!==void 0&&r.agreement_diffrence!==null&&r.agreement_diffrence!==void 0&&r.registration_goal!==null&&r.registration_goal!==void 0&&r.registration_actual!==null&&r.registration_actual!==void 0&&r.registration_diffrence!==null&&r.registration_diffrence!==void 0&&r.functional_remark!==null&&r.functional_remark!==void 0).map(r=>({agreement_goal:r.agreement_goal,agreement_actual:r.agreement_actual,agreement_diffrence:r.agreement_diffrence,registration_goal:r.registration_goal,registration_actual:r.registration_actual,registration_diffrence:r.registration_diffrence,functional_remark:r.functional_remark})),console.log(this.sales_report_data)},n=>{console.error("Error fetching items",n)}),e==1?this.project_name="Anbu Avenue":e==2&&(this.project_name="RVS Avenue"),this.get_site_details(e)}is_popup=!1;remarks="";remark_data(e){this.remarks=e,this.is_popup=!0}closePopup(){this.is_popup=!1}total_site;sold_site;available_site;site_details=[];get_site_details(e){this.http.get(this.site_details_url).subscribe(t=>{this.site_details=t.filter(n=>n.Project_id==e),this.total_site=this.site_details.length,this.sold_site=this.site_details.filter(n=>n.is_site_booked==!0).length,this.available_site=this.site_details.filter(n=>n.is_site_booked==!1).length,console.log(this.site_details,"Site details")},t=>{console.error("Error fetching items",t)})}static \u0275fac=function(t){return new(t||i)(Ot(Cn),Ot(En),Ot(pn))};static \u0275cmp=Ve({type:i,selectors:[["app-sales-report"]],decls:15,vars:6,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"mt-5"],[1,"row"],[1,"col","project-card",3,"click"],[2,"text-align","center"],[1,"col","project-card",2,"margin-left","15px",3,"click"],["class","popup-container",4,"ngIf"],[4,"ngIf"],[1,"popup-container"],[1,"popup-card"],[1,"close-btn",3,"click"],[1,"bradcrumb-card"],[1,"table-responsive"],[1,"table","table-responsive","table-bordered","content-table"],["colspan","7",1,"main-header"],[1,"header-row"],[1,"headers-title"],[4,"ngIf","ngIfElse"],["colspan","8",1,"main-header"],["colspan","3",1,"headers-title"],[4,"ngFor","ngForOf"],[1,"goal-color"],[1,"actual-color"],[3,"click"],[1,"fas","fa-eye"],["colspan","5",2,"text-align","center"],["colspan","8",2,"text-align","center"]],template:function(t,n){t&1&&(c(0,"app-header",1),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",5)(6,"div",6)(7,"div",7),lt("click",function(){return n.get_sales_report(1)}),c(8,"h6",8),h(9,"Anbu Avenue"),u()(),c(10,"div",9),lt("click",function(){return n.get_sales_report(2)}),c(11,"h6",8),h(12,"RVS Avenue"),u()()()(),rt(13,Wnt,7,1,"div",10)(14,iit,101,9,"div",11),u()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(4,Hnt,!n.isSidebarOpen)),_(11),D("ngIf",n.is_popup),_(),D("ngIf",n.is_tablevisible))},dependencies:[en,Jn,Sn,on,ln],styles:[".project-card[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:10px;background:linear-gradient(135deg,indigo,#9370db);box-shadow:0 4px 6px #0000001a,0 1px 3px #00000014;transition:transform .3s ease,box-shadow .3s ease;padding:20px;overflow:hidden;color:#fff}.project-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 15px #0003,0 4px 6px #0000001a;cursor:pointer;background:linear-gradient(135deg,#9370db,indigo)}.goal[_ngcontent-%COMP%]{background-color:#d6a6be;text-align:center}.actual[_ngcontent-%COMP%]{background-color:#92c47d;text-align:center}.sts-all[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{text-align:center;transition:all .3s ease}tr[_ngcontent-%COMP%]{text-align:center}.main-header[_ngcontent-%COMP%]{background-color:#741b48;color:#fff}.table-size[_ngcontent-%COMP%]{width:105%}.meeting-header[_ngcontent-%COMP%]{background-color:#5b3283;color:#fff;font-size:18px;padding:5px;margin-top:5%;text-align:center}.content-table[_ngcontent-%COMP%]{margin:20px 0;font-size:16px;text-align:center}.goal-header[_ngcontent-%COMP%], .actual-header[_ngcontent-%COMP%]{color:#000;font-weight:700}.goal-header[_ngcontent-%COMP%]{background-color:#d7a0b1}.actual-header[_ngcontent-%COMP%]{background-color:#a3d5a6}.goal-color[_ngcontent-%COMP%]{background-color:#d6a6be}.actual-color[_ngcontent-%COMP%]{background-color:#92c47d}.vertical-center[_ngcontent-%COMP%], .table-custom[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}.bg-light-pink[_ngcontent-%COMP%]{background-color:#e7c4c4}.bg-light-green[_ngcontent-%COMP%]{background-color:#98d98e}.headers-clr[_ngcontent-%COMP%]{background-color:#b9f1fe}.headers-title[_ngcontent-%COMP%]{background-color:#ffefe5}.popup-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.popup-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:20px;box-shadow:0 5px 15px #0000004d;text-align:center;animation:_ngcontent-%COMP%_popupFadeIn .3s ease;position:relative}.close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;font-size:24px;font-weight:700;color:#333;cursor:pointer;transition:color .3s ease}.close-btn[_ngcontent-%COMP%]:hover{color:red}@keyframes _ngcontent-%COMP%_popupFadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}"]})};var rit=i=>({"full-width":i});function sit(i,e){if(i&1){let t=Ft();c(0,"div",5)(1,"div",6)(2,"strong"),h(3,"Success!"),u(),h(4," Updated Successfully. "),c(5,"button",7),lt("click",function(){G(t);let r=I();return q(r.successmgs=!1)}),h(6,"\xD7"),u()()()}}function ait(i,e){if(i&1&&(c(0,"option",37),h(1),u()),i&2){let t=e.$implicit;D("ngValue",t),_(),de(" ",t.department_name,"")}}function oit(i,e){i&1&&(c(0,"option",38),h(1,"No designation found "),u())}function lit(i,e){if(i&1&&(c(0,"option",37),h(1),u()),i&2){let t=e.$implicit;D("ngValue",t),_(),A(t.designation_name)}}function cit(i,e){if(i&1){let t=Ft();c(0,"div",8)(1,"div",9)(2,"div",10)(3,"label"),h(4,"Create Users"),u()(),c(5,"div",11)(6,"div",12)(7,"div",13)(8,"label"),h(9,"First Name:"),u(),c(10,"input",14),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.User_first_name,r)||(s.User_first_name=r),q(r)}),u()(),c(11,"div",13)(12,"label"),h(13,"Last Name:"),u(),c(14,"input",15),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.User_Last_name,r)||(s.User_Last_name=r),q(r)}),u()()(),c(15,"div",12)(16,"div",13)(17,"label"),h(18,"Gender"),u(),c(19,"select",16),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.User_gender,r)||(s.User_gender=r),q(r)}),c(20,"option"),h(21,"Select Gender"),u(),c(22,"option",17),h(23,"Male"),u(),c(24,"option",18),h(25,"Female"),u(),c(26,"option",19),h(27,"Others"),u()()(),c(28,"div",13)(29,"label"),h(30,"ID:"),u(),c(31,"input",20),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.User_ID_Card_no,r)||(s.User_ID_Card_no=r),q(r)}),u()()(),c(32,"div",12)(33,"div",13)(34,"label"),h(35,"Email ID:"),u(),c(36,"input",21),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.User_email_id,r)||(s.User_email_id=r),q(r)}),u()(),c(37,"div",13)(38,"label"),h(39,"Password:"),u(),c(40,"input",22),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.User_password,r)||(s.User_password=r),q(r)}),u()()(),c(41,"div",12)(42,"div",13)(43,"label"),h(44,"Mobile Number:"),u(),c(45,"input",23),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.User_mobile_no,r)||(s.User_mobile_no=r),q(r)}),u()(),c(46,"div",13)(47,"label"),h(48,"DOB:"),u(),c(49,"input",24),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.User_dob,r)||(s.User_dob=r),q(r)}),u()()(),c(50,"div",12)(51,"div",13)(52,"label"),h(53,"Department:"),u(),c(54,"select",25),lt("change",function(){G(t);let r=I();return q(r.get_designation_api())}),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.selected_department,r)||(s.selected_department=r),q(r)}),c(55,"option",26),h(56,"Select Department"),u(),rt(57,ait,2,2,"option",27),u()(),c(58,"div",13)(59,"label"),h(60,"Designation:"),u(),c(61,"select",16),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.selected_designation,r)||(s.selected_designation=r),q(r)}),c(62,"option"),h(63,"Select Designation"),u(),rt(64,oit,2,0,"option",28)(65,lit,2,2,"option",27),u()()(),c(66,"div",12)(67,"div",13)(68,"label"),h(69,"Active User:"),u(),c(70,"select",29),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.User_is_active,r)||(s.User_is_active=r),q(r)}),c(71,"option",30),h(72,"Select"),u(),c(73,"option",31),h(74,"Yes"),u(),c(75,"option",32),h(76,"No"),u()()(),c(77,"div",13)(78,"label",33),h(79,"Profile Image:"),u(),Rt(80,"br"),c(81,"input",34),lt("change",function(r){G(t);let s=I();return q(s.onFileSelected(r))}),u()(),c(82,"div",13)(83,"label",33),h(84,"Upload R & R:"),u(),Rt(85,"br"),c(86,"input",34),lt("change",function(r){G(t);let s=I();return q(s.onFileSelected_pdf(r))}),u()()(),c(87,"button",35),lt("click",function(){G(t);let r=I();return q(r.create_user())}),h(88,"Create"),u(),c(89,"button",36),lt("click",function(){G(t);let r=I();return q(r.clancel_btn())}),h(90,"Cancel"),u()()()()}if(i&2){let t=I();_(10),gt("ngModel",t.User_first_name),_(4),gt("ngModel",t.User_Last_name),_(5),gt("ngModel",t.User_gender),_(12),gt("ngModel",t.User_ID_Card_no),_(5),gt("ngModel",t.User_email_id),_(4),gt("ngModel",t.User_password),_(5),gt("ngModel",t.User_mobile_no),_(4),gt("ngModel",t.User_dob),_(5),gt("ngModel",t.selected_department),_(3),D("ngForOf",t.get_department_data),_(4),gt("ngModel",t.selected_designation),_(3),D("ngIf",!(t.get_designation_data!=null&&t.get_designation_data.length)),_(),D("ngForOf",t.get_designation_data),_(5),gt("ngModel",t.User_is_active)}}function dit(i,e){if(i&1&&(c(0,"option",37),h(1),u()),i&2){let t=e.$implicit;D("ngValue",t),_(),de("",t.department_name," ")}}function uit(i,e){if(i&1){let t=Ft();c(0,"div",8)(1,"div",9)(2,"div",10)(3,"label"),h(4,"Manage Department"),u()(),c(5,"div",11)(6,"div",12)(7,"div",13)(8,"label"),h(9,"Department Name:"),u(),c(10,"input",39),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.department_name,r)||(s.department_name=r),q(r)}),u()()(),c(11,"button",35),lt("click",function(){G(t);let r=I();return q(r.create_department())}),h(12,"Add"),u(),c(13,"button",36),lt("click",function(){G(t);let r=I();return q(r.clancel_btn())}),h(14,"Cancel"),u()()(),c(15,"div",9)(16,"div",10)(17,"label"),h(18,"Manage Designation"),u()(),c(19,"div",11)(20,"div",12)(21,"div",13)(22,"label"),h(23,"Select Department"),u(),c(24,"select",16),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.selected_department,r)||(s.selected_department=r),q(r)}),c(25,"option",40),h(26,"Select Department"),u(),rt(27,dit,2,2,"option",27),u()(),c(28,"div",13)(29,"label"),h(30,"Last Name:"),u(),c(31,"input",15),vt("ngModelChange",function(r){G(t);let s=I();return _t(s.designation_name,r)||(s.designation_name=r),q(r)}),u()()(),c(32,"button",35),lt("click",function(){G(t);let r=I();return q(r.create_designation())}),h(33,"Add"),u(),c(34,"button",36),lt("click",function(){G(t);let r=I();return q(r.clancel_btn())}),h(35,"Cancel"),u()()()()}if(i&2){let t=I();_(10),gt("ngModel",t.department_name),_(14),gt("ngModel",t.selected_department),_(3),D("ngForOf",t.get_department_data),_(4),gt("ngModel",t.designation_name)}}var rb=class i{constructor(e,t,n,r){this.route=e;this.apiService=t;this.http=n;this.router=r}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}task_name="";ngOnInit(){this.apifromservice(),this.get_department_api(),this.route.params.subscribe(e=>{this.task_name=e.TaskName})}create_user_api_url="";email_sender_api_url="";manage_department_url="";manage_designation_url="";apifromservice(){this.create_user_api_url=this.apiService.user_management_api(),this.email_sender_api_url=this.apiService.send_email_api(),this.manage_department_url=this.apiService.manage_department(),this.manage_designation_url=this.apiService.manage_designation()}department_name="";create_department(){let e=this.manage_department_url,t={department_name:this.department_name},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Marketing Calender"),this.router.navigate(["/view-users-details"])},1e3)},r=>{console.log("Post request failed",r)}),this.get_department_api()}get_department_data=[];get_department_api(){this.http.get(this.apiService.manage_department()).subscribe(e=>{this.get_department_data=e},e=>{console.error("Error fetching items",e)})}selected_department;designation_name="";create_designation(){let e=this.manage_designation_url,t={designation_name:this.designation_name,department_id:this.selected_department.department_id,department_name:this.selected_department.department_name},n={headers:new We({"Content-Type":"application/json"})};this.http.post(e,t,n).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Marketing Calender"),this.router.navigate(["/view-users-details"])},1e3)},r=>{console.log("Post request failed",r)}),this.get_designation_api()}get_designation_data=[];get_designation_api(){this.http.get(this.manage_designation_url).subscribe(e=>{this.get_designation_data=e.filter(t=>t.department_id==this.selected_department.department_id)},e=>{console.error("Error fetching items",e)})}user_img_selectedFile=null;onFileSelected(e){let t=e.target;t.files&&(this.user_img_selectedFile=t.files[0])}user_pdf_selectedFile=null;onFileSelected_pdf(e){let t=e.target;t.files&&(this.user_pdf_selectedFile=t.files[0])}selected_designation;successmgs=!1;User_first_name="";User_Last_name="";User_gender="";User_ID_Card_no="";User_email_id="";User_password="";User_mobile_no="";User_Department="";User_Department_id=0;User_Designation="";User_Designation_id=0;User_dob=null;User_is_active=null;create_user(){let e=this.create_user_api_url,t=new FormData;t.append("User_first_name",this.User_first_name),t.append("User_Last_name",this.User_Last_name),t.append("User_gender",this.User_gender),t.append("User_ID_Card_no",this.User_ID_Card_no),t.append("User_email_id",this.User_email_id),t.append("User_password",this.User_password),t.append("User_mobile_no",this.User_mobile_no),t.append("User_Department",this.selected_department.department_name),t.append("User_Department_id",this.selected_department.department_id),t.append("User_Designation",this.selected_designation.designation_name),t.append("User_Designation_id",this.selected_designation.designation_id),t.append("User_dob",this.User_dob?.toString()||""),t.append("User_is_active",this.User_is_active?"true":"false"),this.user_img_selectedFile&&t.append("user_profile_img",this.user_img_selectedFile),this.user_pdf_selectedFile&&t.append("User_r_and_r",this.user_pdf_selectedFile),this.http.post(e,t).subscribe(n=>{console.log(n),this.send_email(),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1},2e3),this.router.navigate(["/view-users"])},n=>{console.log("Post request failed",n)})}send_email(){let e=this.email_sender_api_url,n=`
      <h1>Welcome to AGASTHYA DEVELOPER PRIVATE LIMITED</h1>
      <p>Dear User,</p>
      <p>Here are your account details:</p>
      <ul>
        <li><strong>User Email:</strong> {{username}}</li>
        <li><strong>Password:</strong> {{password}}</li>
      </ul>
      <p>Thank you for using AMS!</p>
    `.replace("{{username}}",this.User_email_id).replace("{{password}}",this.User_password),r={to:this.User_email_id,subject:"AMS Account Details",body:n},s={headers:new We({"Content-Type":"application/json"})};this.http.post(e,r,s).subscribe(a=>{console.log(a)},a=>{console.log("Post request failed",a)})}clancel_btn(){this.router.navigate(["/view-users-details"])}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En),Ot(Vn))};static \u0275cmp=Ve({type:i,selectors:[["app-add-users"]],decls:6,vars:7,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],["class","alert-card fade-in",4,"ngIf"],["class","container mt-5 mb-3",4,"ngIf"],[1,"alert-card","fade-in"],[1,"alert-content"],[1,"close-btn",3,"click"],[1,"container","mt-5","mb-3"],[1,"card","mt-5","shadow"],[1,"heading-card"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-6"],["required","","type","text","placeholder","Enter First Name",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","text","placeholder","Enter Last Name",1,"custom-input",3,"ngModelChange","ngModel"],[1,"custom-input",3,"ngModelChange","ngModel"],["value","Male"],["value","Female"],["value","Others"],["required","","type","text","placeholder","Enter ID No",1,"custom-input",3,"ngModelChange","ngModel"],["required","","placeholder","Enter Email ID","type","email",1,"custom-input",3,"ngModelChange","ngModel"],["required","","placeholder","Enter Password","type","password",1,"custom-input",3,"ngModelChange","ngModel"],["required","","placeholder","Mobile Number","type","text",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","date",1,"custom-input",3,"ngModelChange","ngModel"],[1,"custom-input",3,"change","ngModelChange","ngModel"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],["value","","disabled","",4,"ngIf"],["name","","id","",1,"custom-input",3,"ngModelChange","ngModel"],["disabled",""],["value","true"],["value","false"],["for",""],["required","","id","img-upload","type","file",1,"custom-input",3,"change"],[1,"submit-btn",3,"click"],["type","reset",1,"submit-btn",3,"click"],[3,"ngValue"],["value","","disabled",""],["required","","type","text","placeholder","Enter Department Name",1,"custom-input",3,"ngModelChange","ngModel"],["aria-readonly","true","value",""]],template:function(t,n){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",1),c(2,"div",2),rt(3,sit,7,0,"div",3)(4,cit,91,14,"div",4)(5,uit,36,4,"div",4),u()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(5,rit,!n.isSidebarOpen)),_(),D("ngIf",n.successmgs),_(),D("ngIf",n.task_name=="Create User"),_(),D("ngIf",n.task_name=="Manage Department"))},dependencies:[en,Jn,Sn,Ri,Li,yi,Si,oi,Na,ni,on,ln],styles:[".custom-file-upload[_ngcontent-%COMP%]{position:relative;display:inline-block;margin-top:0%}.custom-file-upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background-color:#347536;color:#fff;padding:10px 20px;border-radius:5px;cursor:pointer;transition:background-color .3s ease;font-size:14px}.custom-file-upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{background-color:#45a049}.custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.file-name[_ngcontent-%COMP%]{margin-left:10px;font-size:14px;font-style:italic;color:#555;display:inline-block;vertical-align:middle;max-width:300px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})};var hit=i=>({"full-width":i}),sb=class i{isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Ve({type:i,selectors:[["app-view-hr-details"]],decls:7,vars:4,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"mt-5"],["routerLink","/view-users-details",1,"submit-btn",2,"width","100%"]],template:function(t,n){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3)(4,"div",3)(5,"button",4),h(6,"View Users"),u()()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(2,hit,!n.isSidebarOpen)))},dependencies:[en,di,on,ln]})};var pit=i=>({"full-width":i}),fit=()=>["/add-users","Create User"],mit=()=>["/add-users","Manage Department"],git=(i,e)=>({"active-user":i,"inactive-user":e});function _it(i,e){if(i&1&&(c(0,"tr")(1,"td")(2,"div",11),Rt(3,"img",12),c(4,"div",13)(5,"p",14),h(6),u()()()(),c(7,"td")(8,"p",15),h(9),u()(),c(10,"td")(11,"p",15),h(12),u()(),c(13,"td"),h(14),Et(15,"date"),u(),c(16,"td",16),h(17),u(),c(18,"td"),Rt(19,"i",17),u()()),i&2){let t=e.$implicit;_(3),D("src",t.user_profile_img,jl),_(3),A(t.User_first_name),_(3),A(t.User_Department),_(3),A(t.User_Designation),_(2),de(" ",t.User_dob?At(15,7,t.User_dob,"dd-MM-yyy"):"N/A"," "),_(2),D("ngClass",Oa(10,git,t.User_is_active,!t.User_is_active)),_(),de(" ",t.User_is_active?"Active":"Inactive"," ")}}var ab=class i{constructor(e,t,n){this.route=e;this.apiService=t;this.http=n}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}ngOnInit(){this.get_user_api()}get_user_data=[];get_user_api(){this.http.get(this.apiService.user_management_api()).subscribe(e=>{this.get_user_data=e},e=>{console.error("Error fetching items",e)})}static \u0275fac=function(t){return new(t||i)(Ot(mn),Ot(Cn),Ot(En))};static \u0275cmp=Ve({type:i,selectors:[["app-view-user-details"]],decls:27,vars:9,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"mt-5"],[1,"submit-btn",2,"width","150px","margin-left","5px",3,"routerLink"],[1,"submit-btn",2,"width","250px",3,"routerLink"],[1,"mt-5","table-responsive"],[1,"table","align-middle","mb-0","bg-white"],[1,"bg-light"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],["alt","",1,"rounded-circle",2,"width","45px","height","45px",3,"src"],[1,"ms-3"],[1,"fw-bold","mb-1"],[1,"fw-normal","mb-1"],[3,"ngClass"],[1,"far","fa-edit"]],template:function(t,n){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return n.toggleSidebar()}),u(),Rt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),h(6,"Add Users"),u(),c(7,"button",6),h(8,"Manage Department"),u()(),c(9,"div",7)(10,"table",8)(11,"thead",9)(12,"tr")(13,"th"),h(14,"Name"),u(),c(15,"th"),h(16,"Department"),u(),c(17,"th"),h(18,"Designation"),u(),c(19,"th"),h(20,"DOB"),u(),c(21,"th"),h(22,"Status"),u(),c(23,"th"),h(24,"Actions"),u()()(),c(25,"tbody"),rt(26,_it,20,13,"tr",10),u()()()()()),t&2&&(_(),D("isOpen",n.isSidebarOpen),_(),D("ngClass",te(5,pit,!n.isSidebarOpen)),_(3),D("routerLink",nd(7,fit)),_(2),D("routerLink",nd(8,mit)),_(19),D("ngForOf",n.get_user_data))},dependencies:[en,Jn,di,on,ln,Qr],styles:[".active-user[_ngcontent-%COMP%]{color:green;font-weight:700}.inactive-user[_ngcontent-%COMP%]{color:red;font-weight:700}"]})};var vit=[{path:"",component:N_},{path:"login",component:F_},{path:"dashboard",component:P1},{path:"add-task/:taskName/:projectid",component:kh},{path:"new-goal/:projectid",component:iv},{path:"Update-actual/:updateactual/:id",component:ev},{path:"Actual-task/:projectid",component:nv},{path:"marketing-status/:projectid",component:Y1},{path:"view-goals/:projectid",component:Q1},{path:"project-marketing",component:J1},{path:"marketing-add-goals",component:kh},{path:"marketing-goals",component:kh},{path:"marketing-meeting",component:hv},{path:"marketing-meeting-table/:projectid",component:pv},{path:"add-meeting",component:fv},{path:"Sales-projects",component:av},{path:"Sales-status/:salesprojectid",component:rv},{path:"view-sales-details/:salesprojectid",component:dv},{path:"Add-sales-details/:salescardname/:sales_id",component:cv},{path:"Sales-Report",component:ib},{path:"create-users",component:ov},{path:"view-users",component:lv},{path:"access-denied",component:Qx},{path:"project-accounds",component:nb},{path:"view-sales-accounts/:projectid",component:tb},{path:"add-sales-accounts/:salescardname/:sales_id",component:eb},{path:"add-users/:TaskName",component:rb},{path:"hr-dashboard",component:sb},{path:"view-users-details",component:ab}],ob=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ei({type:i});static \u0275inj=Mi({imports:[RS.forRoot(vit),RS]})};var lb=class i{title="ui";static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Ve({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(t,n){t&1&&Rt(0,"router-outlet")},dependencies:[AS]})};var xit="@",bit=(()=>{let e=class e{constructor(n,r,s,a,o){this.doc=n,this.delegate=r,this.zone=s,this.animationType=a,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=Oe(nA,{optional:!0}),this.loadingSchedulerFn=Oe(yit,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let n=()=>this.moduleImpl??import("./chunk-7FFP75AP.js").then(s=>s),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(n):r=n(),r.catch(s=>{throw new ei(5300,!1)}).then(({\u0275createEngine:s,\u0275AnimationRendererFactory:a})=>{this._engine=s(this.animationType,this.doc);let o=new a(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(n,r){let s=this.delegate.createRenderer(n,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let a=new JM(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let l=o.createRenderer(n,r);a.use(l),this.scheduler?.notify(10)}).catch(o=>{a.use(s)}),a}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){H0()},e.\u0275prov=Qe({token:e,factory:e.\u0275fac});let i=e;return i})(),JM=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,n,r){this.delegate.insertBefore(e,t,n,r)}removeChild(e,t,n){this.delegate.removeChild(e,t,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,n)),this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,n)),this.delegate.listen(e,t,n)}shouldReplay(e){return this.replay!==null&&e.startsWith(xit)}},yit=new Pn("");function MR(i="animations"){return G0("NgAsyncAnimations"),Jc([{provide:W0,useFactory:(e,t,n)=>new bit(e,t,n,i),deps:[or,ug,sr]},{provide:Kb,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var cb=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ei({type:i,bootstrap:[lb]});static \u0275inj=Mi({providers:[t3(),MR(),uy(jA())],imports:[JA,ob,x3,b3,q3,MI,HA]})};ZA().bootstrapModule(cb,{ngZoneEventCoalescing:!0}).catch(i=>console.error(i));
