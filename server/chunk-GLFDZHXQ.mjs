import './polyfills.server.mjs';
import{a as ti,b as yi,c as sw,d as ow,e as lw,f as cw,g as dw,h as kd,i as uw,l as hw,p as Mi,q as pw,s as sn,t as on,u as fw,v as dv}from"./chunk-EQJBROUW.mjs";import{$ as On,$b as Sh,B as WS,Bb as fc,Cb as te,Db as ms,Eb as Ns,Fb as Et,Gb as At,H as jS,Hb as Ie,I as GS,Ia as $i,Ja as cl,K as qS,Ka as KS,M as Md,Ma as ZS,Na as dl,Nb as iw,O as ll,P as Kn,Pa as _,Q as Ln,Qa as Vt,Ra as JS,S as hs,Sa as QS,Ta as tw,U as kr,Ua as bh,V as hc,Vb as lv,Wa as ew,Xa as yh,Ya as ps,Z as Be,_ as Rn,aa as XS,ab as rt,ac as wh,bc as ul,c as OS,cb as go,db as D,dc as cv,ea as Ed,eb as pc,f as Kf,fa as G,fb as Zn,g as NS,ga as q,gb as c,gc as Td,ha as Ad,hb as d,i as FS,ib as Lt,jb as pe,kb as fe,la as $a,lb as Nt,ma as mo,mb as lt,n as xh,nb as k,nc as nw,o as BS,oa as ia,ob as Zf,pc as Ke,qc as Hi,r as VS,rc as mi,sa as YS,sb as Qe,sc as Jf,t as US,ta as ov,tb as h,tc as Vr,ua as $S,ub as A,uc as rw,vb as de,wb as gt,wc as aw,x as zS,xb as _t,yb as vt,z as HS,zb as fs}from"./chunk-IU5E4QZE.mjs";import{a as mw}from"./chunk-UYFIRDFP.mjs";import{a as Ok}from"./chunk-NWJPVVS4.mjs";import{a as Li,b as Sn,g as Rk,h as Os,i as Cd,j as Yf,k as $f,l as RS,m as uc,n as Ne}from"./chunk-TSKBQHTQ.mjs";var uv;try{uv=typeof Intl<"u"&&Intl.v8BreakIterator}catch{uv=!1}var Mh=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?aw(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||uv)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(kr(YS))},e.\u0275prov=Kn({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Ch;function Nk(){if(Ch==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ch=!0}))}finally{Ch=Ch||!1}return Ch}function hv(n){return Nk()?n:!!n.capture}function gw(n){return n.composedPath?n.composedPath()[0]:n.target}function _w(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function pv(n){return Array.isArray(n)?n:[n]}function fv(n){return n instanceof ia?n.nativeElement:n}var xw=new Set,mc,Fk=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Vk}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&Bk(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(kr(Mh),kr($S,8))},e.\u0275prov=Kn({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Bk(n,e){if(!xw.has(n))try{mc||(mc=document.createElement("style"),e&&mc.setAttribute("nonce",e),mc.setAttribute("type","text/css"),document.head.appendChild(mc)),mc.sheet&&(mc.sheet.insertRule(`@media ${n} {body{ }}`,0),xw.add(n))}catch(t){console.error(t)}}function Vk(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var Qf=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Kf}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return bw(pv(i)).some(a=>this._registerQuery(a).mql.matches)}observe(i){let a=bw(pv(i)).map(o=>this._registerQuery(o).observable),s=BS(a);return s=VS(s.pipe(HS(1)),s.pipe(jS(1),zS(0))),s.pipe(xh(o=>{let l={matches:!1,breakpoints:{}};return o.forEach(({matches:u,query:p})=>{l.matches=l.matches||u,l.breakpoints[p]=u}),l}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),s={observable:new OS(o=>{let l=u=>this._zone.run(()=>o.next(u));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(GS(r),xh(({matches:o})=>({query:i,matches:o})),qS(this._destroySubject)),mql:r};return this._queries.set(i,s),s}};e.\u0275fac=function(r){return new(r||e)(kr(Fk),kr(mo))},e.\u0275prov=Kn({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function bw(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function ww(n){return n.buttons===0||n.detail===0}function Cw(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var gc=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(gc||{}),yw="cdk-high-contrast-black-on-white",Sw="cdk-high-contrast-white-on-black",mv="cdk-high-contrast-active",Mw=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=hc(Qf).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return gc.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,a=r&&r.getComputedStyle?r.getComputedStyle(i):null,s=(a&&a.backgroundColor||"").replace(/ /g,"");switch(i.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return gc.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return gc.BLACK_ON_WHITE}return gc.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(mv,yw,Sw),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===gc.BLACK_ON_WHITE?i.add(mv,yw):r===gc.WHITE_ON_BLACK&&i.add(mv,Sw)}}};e.\u0275fac=function(r){return new(r||e)(kr(Mh),kr(Td))},e.\u0275prov=Kn({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var gv=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Rn({type:e}),e.\u0275inj=Ln({});let n=e;return n})();function Xk(){return!0}var Yk=new hs("mat-sanity-checks",{providedIn:"root",factory:Xk}),hl=(()=>{let e=class e{constructor(i,r,a){this._sanityChecks=r,this._document=a,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return _w()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(kr(Mw),kr(Yk,8),kr(Td))},e.\u0275mod=Rn({type:e}),e.\u0275inj=Ln({imports:[gv,gv]});let n=e;return n})();var xv=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Rn({type:e}),e.\u0275inj=Ln({imports:[hl,hl]});let n=e;return n})(),Ka=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Ka||{}),_v=class{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Ka.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},Ew=hv({passive:!0,capture:!0}),vv=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=gw(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(a=>a.handleEvent(e))})}}addHandler(e,t,i,r){let a=this._events.get(t);if(a){let s=a.get(i);s?s.add(r):a.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,Ew)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let a=r.get(t);a&&(a.delete(i),a.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,Ew)))}},Aw={enterDuration:225,exitDuration:150},$k=800,Tw=hv({passive:!0,capture:!0}),kw=["mousedown","touchstart"],Iw=["mouseup","mouseleave","touchend","touchcancel"],Eh=class Eh{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=fv(i))}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a=Li(Li({},Aw),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let s=i.radius||Kk(e,t,r),o=e-r.left,l=t-r.top,u=a.enterDuration,p=document.createElement("div");p.classList.add("mat-ripple-element"),p.style.left=`${o-s}px`,p.style.top=`${l-s}px`,p.style.height=`${s*2}px`,p.style.width=`${s*2}px`,i.color!=null&&(p.style.backgroundColor=i.color),p.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(p);let f=window.getComputedStyle(p),g=f.transitionProperty,m=f.transitionDuration,x=g==="none"||m==="0s"||m==="0s, 0s"||r.width===0&&r.height===0,y=new _v(this,p,i,x);p.style.transform="scale3d(1, 1, 1)",y.state=Ka.FADING_IN,i.persistent||(this._mostRecentTransientRipple=y);let S=null;return!x&&(u||a.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let b=()=>{S&&(S.fallbackTimer=null),clearTimeout(T),this._finishRippleTransition(y)},M=()=>this._destroyRipple(y),T=setTimeout(M,u+100);p.addEventListener("transitionend",b),p.addEventListener("transitioncancel",M),S={onTransitionEnd:b,onTransitionCancel:M,fallbackTimer:T}}),this._activeRipples.set(y,S),(x||!u)&&this._finishRippleTransition(y),y}fadeOutRipple(e){if(e.state===Ka.FADING_OUT||e.state===Ka.HIDDEN)return;let t=e.element,i=Li(Li({},Aw),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=Ka.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=fv(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,kw.forEach(i=>{Eh._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Iw.forEach(t=>{this._triggerElement.addEventListener(t,this,Tw)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Ka.FADING_IN?this._startFadeOutTransition(e):e.state===Ka.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Ka.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Ka.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=ww(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+$k;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Cw(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===Ka.VISIBLE||e.config.terminateOnPointerUp&&e.state===Ka.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(kw.forEach(t=>Eh._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(Iw.forEach(t=>e.removeEventListener(t,this,Tw)),this._pointerUpEventsRegistered=!1))}};Eh._eventManager=new vv;var Dw=Eh;function Kk(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var Ow=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Rn({type:e}),e.\u0275inj=Ln({imports:[xv,hl,xv,hl]});let n=e;return n})();var Nw=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Rn({type:e}),e.\u0275inj=Ln({imports:[hl,rw,hl]});let n=e;return n})();var qw=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(Vt(bh),Vt(ia))},e.\u0275dir=On({type:e});let n=e;return n})(),om=(()=>{let e=class e extends qw{};e.\u0275fac=(()=>{let i;return function(a){return(i||(i=Ad(e)))(a||e)}})(),e.\u0275dir=On({type:e,features:[ps]});let n=e;return n})(),Lh=new hs("");var Zk={provide:Lh,useExisting:ll(()=>ln),multi:!0};function Jk(){let n=cv()?cv().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Qk=new hs(""),ln=(()=>{let e=class e extends qw{constructor(i,r,a){super(i,r),this._compositionMode=a,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Jk())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(Vt(bh),Vt(ia),Vt(Qk,8))},e.\u0275dir=On({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,a){r&1&&lt("input",function(o){return a._handleInput(o.target.value)})("blur",function(){return a.onTouched()})("compositionstart",function(){return a._compositionStart()})("compositionend",function(o){return a._compositionEnd(o.target.value)})},features:[fs([Zk]),ps]});let n=e;return n})();function tI(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var yv=new hs(""),Xw=new hs("");function eI(n){return tI(n.value)?{required:!0}:null}function Fw(n){return null}function Yw(n){return n!=null}function $w(n){return iw(n)?FS(n):n}function Kw(n){let e={};return n.forEach(t=>{e=t!=null?Li(Li({},e),t):e}),Object.keys(e).length===0?null:e}function Zw(n,e){return e.map(t=>t(n))}function iI(n){return!n.validate}function Jw(n){return n.map(e=>iI(e)?e:t=>e.validate(t))}function nI(n){if(!n)return null;let e=n.filter(Yw);return e.length==0?null:function(t){return Kw(Zw(t,e))}}function Sv(n){return n!=null?nI(Jw(n)):null}function rI(n){if(!n)return null;let e=n.filter(Yw);return e.length==0?null:function(t){let i=Zw(t,e).map($w);return US(i).pipe(xh(Kw))}}function wv(n){return n!=null?rI(Jw(n)):null}function Bw(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function aI(n){return n._rawValidators}function sI(n){return n._rawAsyncValidators}function bv(n){return n?Array.isArray(n)?n:[n]:[]}function em(n,e){return Array.isArray(n)?n.includes(e):n===e}function Vw(n,e){let t=bv(e);return bv(n).forEach(r=>{em(t,r)||t.push(r)}),t}function Uw(n,e){return bv(e).filter(t=>!em(n,t))}var im=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Sv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Pd=class extends im{get formDirective(){return null}get path(){return null}},Ph=class extends im{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},nm=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},oI={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},EK=Sn(Li({},oI),{"[class.ng-submitted]":"isSubmitted"}),Ki=(()=>{let e=class e extends nm{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(Vt(Ph,2))},e.\u0275dir=On({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,a){r&2&&Zn("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)},features:[ps]});let n=e;return n})(),Qw=(()=>{let e=class e extends nm{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(Vt(Pd,10))},e.\u0275dir=On({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,a){r&2&&Zn("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)("ng-submitted",a.isSubmitted)},features:[ps]});let n=e;return n})();var Ah="VALID",tm="INVALID",Id="PENDING",Th="DISABLED",Ld=class{},rm=class extends Ld{constructor(e,t){super(),this.value=e,this.source=t}},Ih=class extends Ld{constructor(e,t){super(),this.pristine=e,this.source=t}},Dh=class extends Ld{constructor(e,t){super(),this.touched=e,this.source=t}},Dd=class extends Ld{constructor(e,t){super(),this.status=e,this.source=t}};function tC(n){return(lm(n)?n.validators:n)||null}function lI(n){return Array.isArray(n)?Sv(n):n||null}function eC(n,e){return(lm(e)?e.asyncValidators:n)||null}function cI(n){return Array.isArray(n)?wv(n):n||null}function lm(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function dI(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Md(1e3,"");if(!i[t])throw new Md(1001,"")}function uI(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Md(1002,"")})}var am=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=wh(()=>this.statusReactive()),this.statusReactive=yh(void 0),this._pristine=wh(()=>this.pristineReactive()),this.pristineReactive=yh(!0),this._touched=wh(()=>this.touchedReactive()),this.touchedReactive=yh(!1),this._events=new Kf,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ul(this.statusReactive)}set status(e){ul(()=>this.statusReactive.set(e))}get valid(){return this.status===Ah}get invalid(){return this.status===tm}get pending(){return this.status==Id}get disabled(){return this.status===Th}get enabled(){return this.status!==Th}get pristine(){return ul(this.pristineReactive)}set pristine(e){ul(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return ul(this.touchedReactive)}set touched(e){ul(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Vw(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Vw(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Uw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Uw(e,this._rawAsyncValidators))}hasValidator(e){return em(this._rawValidators,e)}hasAsyncValidator(e){return em(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Sn(Li({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Dh(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Dh(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Sn(Li({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Ih(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Ih(!0,i))}markAsPending(e={}){this.status=Id;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Dd(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Sn(Li({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Th,this.errors=null,this._forEachChild(r=>{r.disable(Sn(Li({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rm(this.value,i)),this._events.next(new Dd(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Sn(Li({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ah,this._forEachChild(i=>{i.enable(Sn(Li({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Sn(Li({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ah||this.status===Id)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rm(this.value,t)),this._events.next(new Dd(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Sn(Li({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Th:Ah}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Id,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=$w(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Dd(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new $a,this.statusChanges=new $a}_calculateStatus(){return this._allControlsDisabled()?Th:this.errors?tm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Id)?Id:this._anyControlsHaveStatus(tm)?tm:Ah}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Ih(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Dh(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){lm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=lI(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=cI(this._rawAsyncValidators)}},sm=class extends am{constructor(e,t,i){super(tC(t),eC(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){uI(this,!0,e),Object.keys(e).forEach(i=>{dI(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,a)=>{i=t(i,r,a)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Cv=new hs("CallSetDisabledState",{providedIn:"root",factory:()=>Mv}),Mv="always";function hI(n,e){return[...e.path,n]}function iC(n,e,t=Mv){nC(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),fI(n,e),gI(n,e),mI(n,e),pI(n,e)}function zw(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function pI(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function nC(n,e){let t=aI(n);e.validator!==null?n.setValidators(Bw(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=sI(n);e.asyncValidator!==null?n.setAsyncValidators(Bw(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();zw(e._rawValidators,r),zw(e._rawAsyncValidators,r)}function fI(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&rC(n,e)})}function mI(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&rC(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function rC(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function gI(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function _I(n,e){n==null,nC(n,e)}function vI(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function xI(n){return Object.getPrototypeOf(n.constructor)===om}function bI(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function yI(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(a=>{a.constructor===ln?t=a:xI(a)?i=a:r=a}),r||i||t||null}var SI={provide:Pd,useExisting:ll(()=>Ev)},kh=Promise.resolve(),Ev=(()=>{let e=class e extends Pd{get submitted(){return ul(this.submittedReactive)}constructor(i,r,a){super(),this.callSetDisabledState=a,this._submitted=wh(()=>this.submittedReactive()),this.submittedReactive=yh(!1),this._directives=new Set,this.ngSubmit=new $a,this.form=new sm({},Sv(i),wv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){kh.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),iC(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){kh.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){kh.then(()=>{let r=this._findContainer(i.path),a=new sm({});_I(a,i),r.registerControl(i.name,a),a.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){kh.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){kh.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submittedReactive.set(!0),bI(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(Vt(yv,10),Vt(Xw,10),Vt(Cv,8))},e.\u0275dir=On({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,a){r&1&&lt("submit",function(o){return a.onSubmit(o)})("reset",function(){return a.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[fs([SI]),ps]});let n=e;return n})();function Hw(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ww(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var wI=class extends am{constructor(e=null,t,i){super(tC(t),eC(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lm(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Ww(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Hw(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Hw(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Ww(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var CI={provide:Ph,useExisting:ll(()=>Gi)},jw=Promise.resolve(),Gi=(()=>{let e=class e extends Ph{constructor(i,r,a,s,o,l){super(),this._changeDetectorRef=o,this.callSetDisabledState=l,this.control=new wI,this._registered=!1,this.name="",this.update=new $a,this._parent=i,this._setValidators(r),this._setAsyncValidators(a),this.valueAccessor=yI(this,s)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),vI(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){iC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){jw.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,a=r!==0&&Sh(r);jw.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?hI(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(Vt(Pd,9),Vt(yv,10),Vt(Xw,10),Vt(Lh,10),Vt(lv,8),Vt(Cv,8))},e.\u0275dir=On({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[fs([CI]),ps,Ed]});let n=e;return n})(),aC=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=On({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})(),MI={provide:Lh,useExisting:ll(()=>_o),multi:!0},_o=(()=>{let e=class e extends om{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(a){return(i||(i=Ad(e)))(a||e)}})(),e.\u0275dir=On({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,a){r&1&&lt("input",function(o){return a.onChange(o.target.value)})("blur",function(){return a.onTouched()})},features:[fs([MI]),ps]});let n=e;return n})();var EI={provide:Lh,useExisting:ll(()=>cn),multi:!0};function sC(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function AI(n){return n.split(":")[0]}var cn=(()=>{let e=class e extends om{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),a=sC(r,i);this.setProperty("value",a)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=AI(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(a){return(i||(i=Ad(e)))(a||e)}})(),e.\u0275dir=On({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,a){r&1&&lt("change",function(o){return a.onChange(o.target.value)})("blur",function(){return a.onTouched()})},inputs:{compareWith:"compareWith"},features:[fs([EI]),ps]});let n=e;return n})(),xn=(()=>{let e=class e{constructor(i,r,a){this._element=i,this._renderer=r,this._select=a,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(sC(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(Vt(ia),Vt(bh),Vt(cn,9))},e.\u0275dir=On({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})(),TI={provide:Lh,useExisting:ll(()=>oC),multi:!0};function Gw(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function kI(n){return n.split(":")[0]}var oC=(()=>{let e=class e extends om{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let a=i.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(a.indexOf(o.toString())>-1)}}else r=(a,s)=>{a._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let a=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let l=0;l<o.length;l++){let u=o[l],p=this._getOptionValue(u.value);a.push(p)}}else{let o=r.options;for(let l=0;l<o.length;l++){let u=o[l];if(u.selected){let p=this._getOptionValue(u.value);a.push(p)}}}this.value=a,i(a)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=kI(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(a){return(i||(i=Ad(e)))(a||e)}})(),e.\u0275dir=On({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,a){r&1&&lt("change",function(o){return a.onChange(o.target)})("blur",function(){return a.onTouched()})},inputs:{compareWith:"compareWith"},features:[fs([TI]),ps]});let n=e;return n})(),bn=(()=>{let e=class e{constructor(i,r,a){this._element=i,this._renderer=r,this._select=a,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(Gw(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(Gw(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(Vt(ia),Vt(bh),Vt(oC,9))},e.\u0275dir=On({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})();var II=(()=>{let e=class e{constructor(){this._validator=Fw}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Fw,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=On({type:e,features:[Ed]});let n=e;return n})();var DI={provide:yv,useExisting:ll(()=>gs),multi:!0};var gs=(()=>{let e=class e extends II{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Sh,this.createValidator=i=>eI}enabled(i){return i}};e.\u0275fac=(()=>{let i;return function(a){return(i||(i=Ad(e)))(a||e)}})(),e.\u0275dir=On({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,a){r&2&&go("required",a._enabled?"":null)},inputs:{required:"required"},features:[fs([DI]),ps]});let n=e;return n})();var PI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Rn({type:e}),e.\u0275inj=Ln({});let n=e;return n})();var lC=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Cv,useValue:i.callSetDisabledState??Mv}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Rn({type:e}),e.\u0275inj=Ln({imports:[PI]});let n=e;return n})();function Bs(){}var wC=function(){let n=0;return function(){return n++}}();function Bi(n){return n===null||typeof n>"u"}function fn(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ki(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}var jn=n=>(typeof n=="number"||n instanceof Number)&&isFinite(+n);function ka(n,e){return jn(n)?n:e}function gi(n,e){return typeof n>"u"?e:n}var CC=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:n/e,Rv=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function mn(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Zi(n,e,t,i){let r,a,s;if(fn(n))if(a=n.length,i)for(r=a-1;r>=0;r--)e.call(t,n[r],r);else for(r=0;r<a;r++)e.call(t,n[r],r);else if(ki(n))for(s=Object.keys(n),a=s.length,r=0;r<a;r++)e.call(t,n[s[r]],s[r])}function Bh(n,e){let t,i,r,a;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],a=e[t],r.datasetIndex!==a.datasetIndex||r.index!==a.index)return!1;return!0}function fm(n){if(fn(n))return n.map(fm);if(ki(n)){let e=Object.create(null),t=Object.keys(n),i=t.length,r=0;for(;r<i;++r)e[t[r]]=fm(n[t[r]]);return e}return n}function MC(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function LI(n,e,t,i){if(!MC(n))return;let r=e[n],a=t[n];ki(r)&&ki(a)?Nd(r,a,i):e[n]=fm(a)}function Nd(n,e,t){let i=fn(e)?e:[e],r=i.length;if(!ki(n))return n;t=t||{};let a=t.merger||LI;for(let s=0;s<r;++s){if(e=i[s],!ki(e))continue;let o=Object.keys(e);for(let l=0,u=o.length;l<u;++l)a(o[l],n,e,t)}return n}function Vd(n,e){return Nd(n,e,{merger:RI})}function RI(n,e,t){if(!MC(n))return;let i=e[n],r=t[n];ki(i)&&ki(r)?Vd(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=fm(r))}var cC={"":n=>n,x:n=>n.x,y:n=>n.y};function bo(n,e){return(cC[e]||(cC[e]=OI(e)))(n)}function OI(n){let e=NI(n);return t=>{for(let i of e){if(i==="")break;t=t&&t[i]}return t}}function NI(n){let e=n.split("."),t=[],i="";for(let r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function vm(n){return n.charAt(0).toUpperCase()+n.slice(1)}var Ta=n=>typeof n<"u",xo=n=>typeof n=="function",Ov=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function EC(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var wn=Math.PI,en=2*wn,FI=en+wn,mm=Number.POSITIVE_INFINITY,BI=wn/180,Nn=wn/2,Rh=wn/4,dC=wn*2/3,Ia=Math.log10,_s=Math.sign;function Nv(n){let e=Math.round(n);n=Ud(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(Ia(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function AC(n){let e=[],t=Math.sqrt(n),i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,a)=>r-a).pop(),e}function xc(n){return!isNaN(parseFloat(n))&&isFinite(n)}function Ud(n,e,t){return Math.abs(n-e)<t}function TC(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function Fv(n,e,t){let i,r,a;for(i=0,r=n.length;i<r;i++)a=n[i][t],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function Ja(n){return n*(wn/180)}function xm(n){return n*(180/wn)}function Bv(n){if(!jn(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function Vv(n,e){let t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i),a=Math.atan2(i,t);return a<-.5*wn&&(a+=en),{angle:a,distance:r}}function gm(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function VI(n,e){return(n-e+FI)%en-wn}function ga(n){return(n%en+en)%en}function zd(n,e,t,i){let r=ga(n),a=ga(e),s=ga(t),o=ga(a-r),l=ga(s-r),u=ga(r-a),p=ga(r-s);return r===a||r===s||i&&a===s||o>l&&u<p}function fr(n,e,t){return Math.max(e,Math.min(t,n))}function kC(n){return fr(n,-32768,32767)}function Vs(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function bm(n,e,t){t=t||(s=>n[s]<e);let i=n.length-1,r=0,a;for(;i-r>1;)a=r+i>>1,t(a)?r=a:i=a;return{lo:r,hi:i}}var Fs=(n,e,t,i)=>bm(n,t,i?r=>n[r][e]<=t:r=>n[r][e]<t),IC=(n,e,t)=>bm(n,t,i=>n[i][e]>=t);function DC(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}var PC=["push","pop","shift","splice","unshift"];function LC(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),PC.forEach(t=>{let i="_onData"+vm(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...a){let s=r.apply(this,a);return n._chartjs.listeners.forEach(o=>{typeof o[i]=="function"&&o[i](...a)}),s}})})}function Uv(n,e){let t=n._chartjs;if(!t)return;let i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(PC.forEach(a=>{delete n[a]}),delete n._chartjs)}function zv(n){let e=new Set,t,i;for(t=0,i=n.length;t<i;++t)e.add(n[t]);return e.size===i?n:Array.from(e)}var Hv=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Wv(n,e,t){let i=t||(s=>Array.prototype.slice.call(s)),r=!1,a=[];return function(...s){a=i(s),r||(r=!0,Hv.call(window,()=>{r=!1,n.apply(e,a)}))}}function RC(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}var ym=n=>n==="start"?"left":n==="end"?"right":"center",Ir=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,OC=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function jv(n,e,t){let i=e.length,r=0,a=i;if(n._sorted){let{iScale:s,_parsed:o}=n,l=s.axis,{min:u,max:p,minDefined:f,maxDefined:g}=s.getUserBounds();f&&(r=fr(Math.min(Fs(o,s.axis,u).lo,t?i:Fs(e,l,s.getPixelForValue(u)).lo),0,i-1)),g?a=fr(Math.max(Fs(o,s.axis,p,!0).hi+1,t?0:Fs(e,l,s.getPixelForValue(p),!0).hi+1),r,i)-r:a=i-r}return{start:r,count:a}}function Gv(n){let{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;let a=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),a}var cm=n=>n===0||n===1,uC=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*en/t)),hC=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*en/t)+1,Od={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Nn)+1,easeOutSine:n=>Math.sin(n*Nn),easeInOutSine:n=>-.5*(Math.cos(wn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>cm(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>cm(n)?n:uC(n,.075,.3),easeOutElastic:n=>cm(n)?n:hC(n,.075,.3),easeInOutElastic(n){return cm(n)?n:n<.5?.5*uC(n*2,.1125,.45):.5+.5*hC(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Od.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Od.easeInBounce(n*2)*.5:Od.easeOutBounce(n*2-1)*.5+.5};function Vh(n){return n+.5|0}var fl=(n,e,t)=>Math.max(Math.min(n,t),e);function Oh(n){return fl(Vh(n*2.55),0,255)}function ml(n){return fl(Vh(n*255),0,255)}function vo(n){return fl(Vh(n/2.55)/100,0,1)}function pC(n){return fl(Vh(n*100),0,100)}var Za={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Dv=[..."0123456789ABCDEF"],UI=n=>Dv[n&15],zI=n=>Dv[(n&240)>>4]+Dv[n&15],dm=n=>(n&240)>>4===(n&15),HI=n=>dm(n.r)&&dm(n.g)&&dm(n.b)&&dm(n.a);function WI(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Za[n[1]]*17,g:255&Za[n[2]]*17,b:255&Za[n[3]]*17,a:e===5?Za[n[4]]*17:255}:(e===7||e===9)&&(t={r:Za[n[1]]<<4|Za[n[2]],g:Za[n[3]]<<4|Za[n[4]],b:Za[n[5]]<<4|Za[n[6]],a:e===9?Za[n[7]]<<4|Za[n[8]]:255})),t}var jI=(n,e)=>n<255?e(n):"";function GI(n){var e=HI(n)?UI:zI;return n?"#"+e(n.r)+e(n.g)+e(n.b)+jI(n.a,e):void 0}var qI=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function NC(n,e,t){let i=e*Math.min(t,1-t),r=(a,s=(a+n/30)%12)=>t-i*Math.max(Math.min(s-3,9-s,1),-1);return[r(0),r(8),r(4)]}function XI(n,e,t){let i=(r,a=(r+n/60)%6)=>t-t*e*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function YI(n,e,t){let i=NC(n,1,.5),r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function $I(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function qv(n){let t=n.r/255,i=n.g/255,r=n.b/255,a=Math.max(t,i,r),s=Math.min(t,i,r),o=(a+s)/2,l,u,p;return a!==s&&(p=a-s,u=o>.5?p/(2-a-s):p/(a+s),l=$I(t,i,r,p,a),l=l*60+.5),[l|0,u||0,o]}function Xv(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(ml)}function Yv(n,e,t){return Xv(NC,n,e,t)}function KI(n,e,t){return Xv(YI,n,e,t)}function ZI(n,e,t){return Xv(XI,n,e,t)}function FC(n){return(n%360+360)%360}function JI(n){let e=qI.exec(n),t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Oh(+e[5]):ml(+e[5]));let r=FC(+e[2]),a=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?i=KI(r,a,s):e[1]==="hsv"?i=ZI(r,a,s):i=Yv(r,a,s),{r:i[0],g:i[1],b:i[2],a:t}}function QI(n,e){var t=qv(n);t[0]=FC(t[0]+e),t=Yv(t),n.r=t[0],n.g=t[1],n.b=t[2]}function t4(n){if(!n)return;let e=qv(n),t=e[0],i=pC(e[1]),r=pC(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${vo(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}var fC={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},mC={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function e4(){let n={},e=Object.keys(mC),t=Object.keys(fC),i,r,a,s,o;for(i=0;i<e.length;i++){for(s=o=e[i],r=0;r<t.length;r++)a=t[r],o=o.replace(a,fC[a]);a=parseInt(mC[s],16),n[o]=[a>>16&255,a>>8&255,a&255]}return n}var um;function i4(n){um||(um=e4(),um.transparent=[0,0,0,0]);let e=um[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var n4=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function r4(n){let e=n4.exec(n),t=255,i,r,a;if(e){if(e[7]!==i){let s=+e[7];t=e[8]?Oh(s):fl(s*255,0,255)}return i=+e[1],r=+e[3],a=+e[5],i=255&(e[2]?Oh(i):fl(i,0,255)),r=255&(e[4]?Oh(r):fl(r,0,255)),a=255&(e[6]?Oh(a):fl(a,0,255)),{r:i,g:r,b:a,a:t}}}function a4(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${vo(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var Av=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Rd=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function s4(n,e,t){let i=Rd(vo(n.r)),r=Rd(vo(n.g)),a=Rd(vo(n.b));return{r:ml(Av(i+t*(Rd(vo(e.r))-i))),g:ml(Av(r+t*(Rd(vo(e.g))-r))),b:ml(Av(a+t*(Rd(vo(e.b))-a))),a:n.a+t*(e.a-n.a)}}function hm(n,e,t){if(n){let i=qv(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=Yv(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function BC(n,e){return n&&Object.assign(e||{},n)}function gC(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=ml(n[3]))):(e=BC(n,{r:0,g:0,b:0,a:1}),e.a=ml(e.a)),e}function o4(n){return n.charAt(0)==="r"?r4(n):JI(n)}var Pv=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,i;t==="object"?i=gC(e):t==="string"&&(i=WI(e)||i4(e)||o4(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=BC(this._rgb);return e&&(e.a=vo(e.a)),e}set rgb(e){this._rgb=gC(e)}rgbString(){return this._valid?a4(this._rgb):void 0}hexString(){return this._valid?GI(this._rgb):void 0}hslString(){return this._valid?t4(this._rgb):void 0}mix(e,t){if(e){let i=this.rgb,r=e.rgb,a,s=t===a?.5:t,o=2*s-1,l=i.a-r.a,u=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;a=1-u,i.r=255&u*i.r+a*r.r+.5,i.g=255&u*i.g+a*r.g+.5,i.b=255&u*i.b+a*r.b+.5,i.a=s*i.a+(1-s)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=s4(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=ml(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=Vh(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return hm(this._rgb,2,e),this}darken(e){return hm(this._rgb,2,-e),this}saturate(e){return hm(this._rgb,1,e),this}desaturate(e){return hm(this._rgb,1,-e),this}rotate(e){return QI(this._rgb,e),this}};function VC(n){return new Pv(n)}function UC(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function $v(n){return UC(n)?n:VC(n)}function Tv(n){return UC(n)?n:VC(n).saturate(.5).darken(.1).hexString()}var gl=Object.create(null),Sm=Object.create(null);function Nh(n,e){if(!e)return n;let t=e.split(".");for(let i=0,r=t.length;i<r;++i){let a=t[i];n=n[a]||(n[a]=Object.create(null))}return n}function kv(n,e,t){return typeof e=="string"?Nd(Nh(n,e),t):Nd(Nh(n,""),e)}var Lv=class{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,i)=>Tv(i.backgroundColor),this.hoverBorderColor=(t,i)=>Tv(i.borderColor),this.hoverColor=(t,i)=>Tv(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,t){return kv(this,e,t)}get(e){return Nh(this,e)}describe(e,t){return kv(Sm,e,t)}override(e,t){return kv(gl,e,t)}route(e,t,i,r){let a=Nh(this,e),s=Nh(this,i),o="_"+t;Object.defineProperties(a,{[o]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){let l=this[o],u=s[r];return ki(l)?Object.assign({},u,l):gi(l,u)},set(l){this[o]=l}}})}},wi=new Lv({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function l4(n){return!n||Bi(n.size)||Bi(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Fh(n,e,t,i,r){let a=e[r];return a||(a=e[r]=n.measureText(r).width,t.push(r)),a>i&&(i=a),i}function zC(n,e,t,i){i=i||{};let r=i.data=i.data||{},a=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},a=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let s=0,o=t.length,l,u,p,f,g;for(l=0;l<o;l++)if(f=t[l],f!=null&&fn(f)!==!0)s=Fh(n,r,a,s,f);else if(fn(f))for(u=0,p=f.length;u<p;u++)g=f[u],g!=null&&!fn(g)&&(s=Fh(n,r,a,s,g));n.restore();let m=a.length/2;if(m>t.length){for(l=0;l<m;l++)delete r[a[l]];a.splice(0,m)}return s}function _l(n,e,t){let i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function Kv(n,e){e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore()}function wm(n,e,t,i){Zv(n,e,t,i,null)}function Zv(n,e,t,i,r){let a,s,o,l,u,p,f=e.pointStyle,g=e.rotation,m=e.radius,x=(g||0)*BI;if(f&&typeof f=="object"&&(a=f.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(x),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(m)||m<=0)){switch(n.beginPath(),f){default:r?n.ellipse(t,i,r/2,m,0,0,en):n.arc(t,i,m,0,en),n.closePath();break;case"triangle":n.moveTo(t+Math.sin(x)*m,i-Math.cos(x)*m),x+=dC,n.lineTo(t+Math.sin(x)*m,i-Math.cos(x)*m),x+=dC,n.lineTo(t+Math.sin(x)*m,i-Math.cos(x)*m),n.closePath();break;case"rectRounded":u=m*.516,l=m-u,s=Math.cos(x+Rh)*l,o=Math.sin(x+Rh)*l,n.arc(t-s,i-o,u,x-wn,x-Nn),n.arc(t+o,i-s,u,x-Nn,x),n.arc(t+s,i+o,u,x,x+Nn),n.arc(t-o,i+s,u,x+Nn,x+wn),n.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,p=r?r/2:l,n.rect(t-p,i-l,2*p,2*l);break}x+=Rh;case"rectRot":s=Math.cos(x)*m,o=Math.sin(x)*m,n.moveTo(t-s,i-o),n.lineTo(t+o,i-s),n.lineTo(t+s,i+o),n.lineTo(t-o,i+s),n.closePath();break;case"crossRot":x+=Rh;case"cross":s=Math.cos(x)*m,o=Math.sin(x)*m,n.moveTo(t-s,i-o),n.lineTo(t+s,i+o),n.moveTo(t+o,i-s),n.lineTo(t-o,i+s);break;case"star":s=Math.cos(x)*m,o=Math.sin(x)*m,n.moveTo(t-s,i-o),n.lineTo(t+s,i+o),n.moveTo(t+o,i-s),n.lineTo(t-o,i+s),x+=Rh,s=Math.cos(x)*m,o=Math.sin(x)*m,n.moveTo(t-s,i-o),n.lineTo(t+s,i+o),n.moveTo(t+o,i-s),n.lineTo(t-o,i+s);break;case"line":s=r?r/2:Math.cos(x)*m,o=Math.sin(x)*m,n.moveTo(t-s,i-o),n.lineTo(t+s,i+o);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(x)*m,i+Math.sin(x)*m);break}n.fill(),e.borderWidth>0&&n.stroke()}}function Fd(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Uh(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function zh(n){n.restore()}function HC(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){let a=(e.x+t.x)/2;n.lineTo(a,e.y),n.lineTo(a,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function WC(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function vl(n,e,t,i,r,a={}){let s=fn(e)?e:[e],o=a.strokeWidth>0&&a.strokeColor!=="",l,u;for(n.save(),n.font=r.string,c4(n,a),l=0;l<s.length;++l)u=s[l],o&&(a.strokeColor&&(n.strokeStyle=a.strokeColor),Bi(a.strokeWidth)||(n.lineWidth=a.strokeWidth),n.strokeText(u,t,i,a.maxWidth)),n.fillText(u,t,i,a.maxWidth),d4(n,t,i,u,a),i+=r.lineHeight;n.restore()}function c4(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Bi(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function d4(n,e,t,i,r){if(r.strikethrough||r.underline){let a=n.measureText(i),s=e-a.actualBoundingBoxLeft,o=e+a.actualBoundingBoxRight,l=t-a.actualBoundingBoxAscent,u=t+a.actualBoundingBoxDescent,p=r.strikethrough?(l+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(s,p),n.lineTo(o,p),n.stroke()}}function Hd(n,e){let{x:t,y:i,w:r,h:a,radius:s}=e;n.arc(t+s.topLeft,i+s.topLeft,s.topLeft,-Nn,wn,!0),n.lineTo(t,i+a-s.bottomLeft),n.arc(t+s.bottomLeft,i+a-s.bottomLeft,s.bottomLeft,wn,Nn,!0),n.lineTo(t+r-s.bottomRight,i+a),n.arc(t+r-s.bottomRight,i+a-s.bottomRight,s.bottomRight,Nn,0,!0),n.lineTo(t+r,i+s.topRight),n.arc(t+r-s.topRight,i+s.topRight,s.topRight,0,-Nn,!0),n.lineTo(t+s.topLeft,i)}var u4=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),h4=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function p4(n,e){let t=(""+n).match(u4);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var f4=n=>+n||0;function Cm(n,e){let t={},i=ki(e),r=i?Object.keys(e):e,a=ki(n)?i?s=>gi(n[s],n[e[s]]):s=>n[s]:()=>n;for(let s of r)t[s]=f4(a(s));return t}function Jv(n){return Cm(n,{top:"y",right:"x",bottom:"y",left:"x"})}function xl(n){return Cm(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Dr(n){let e=Jv(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function lr(n,e){n=n||{},e=e||wi.font;let t=gi(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=gi(n.style,e.style);i&&!(""+i).match(h4)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");let r={family:gi(n.family,e.family),lineHeight:p4(gi(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:gi(n.weight,e.weight),string:""};return r.string=l4(r),r}function Wd(n,e,t,i){let r=!0,a,s,o;for(a=0,s=n.length;a<s;++a)if(o=n[a],o!==void 0&&(e!==void 0&&typeof o=="function"&&(o=o(e),r=!1),t!==void 0&&fn(o)&&(o=o[t%o.length],r=!1),o!==void 0))return i&&!r&&(i.cacheable=!1),o}function jC(n,e,t){let{min:i,max:r}=n,a=Rv(e,(r-i)/2),s=(o,l)=>t&&o===0?0:o+l;return{min:s(i,-Math.abs(a)),max:s(r,a)}}function yo(n,e){return Object.assign(Object.create(n),e)}function Mm(n,e=[""],t=n,i,r=()=>n[0]){Ta(i)||(i=XC("_fallback",n));let a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:t,_fallback:i,_getTarget:r,override:s=>Mm([s,...n],e,t,i)};return new Proxy(a,{deleteProperty(s,o){return delete s[o],delete s._keys,delete n[0][o],!0},get(s,o){return GC(s,o,()=>S4(o,e,n,s))},getOwnPropertyDescriptor(s,o){return Reflect.getOwnPropertyDescriptor(s._scopes[0],o)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(s,o){return vC(s).includes(o)},ownKeys(s){return vC(s)},set(s,o,l){let u=s._storage||(s._storage=r());return s[o]=u[o]=l,delete s._keys,!0}})}function vc(n,e,t,i){let r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:Qv(n,i),setContext:a=>vc(n,a,t,i),override:a=>vc(n.override(a),e,t,i)};return new Proxy(r,{deleteProperty(a,s){return delete a[s],delete n[s],!0},get(a,s,o){return GC(a,s,()=>g4(a,s,o))},getOwnPropertyDescriptor(a,s){return a._descriptors.allKeys?Reflect.has(n,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,s)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(a,s){return Reflect.has(n,s)},ownKeys(){return Reflect.ownKeys(n)},set(a,s,o){return n[s]=o,delete a[s],!0}})}function Qv(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:xo(t)?t:()=>t,isIndexable:xo(i)?i:()=>i}}var m4=(n,e)=>n?n+vm(e):e,tx=(n,e)=>ki(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function GC(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e))return n[e];let i=t();return n[e]=i,i}function g4(n,e,t){let{_proxy:i,_context:r,_subProxy:a,_descriptors:s}=n,o=i[e];return xo(o)&&s.isScriptable(e)&&(o=_4(e,o,n,t)),fn(o)&&o.length&&(o=v4(e,o,n,s.isIndexable)),tx(e,o)&&(o=vc(o,r,a&&a[e],s)),o}function _4(n,e,t,i){let{_proxy:r,_context:a,_subProxy:s,_stack:o}=t;if(o.has(n))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+n);return o.add(n),e=e(a,s||i),o.delete(n),tx(n,e)&&(e=ex(r._scopes,r,n,e)),e}function v4(n,e,t,i){let{_proxy:r,_context:a,_subProxy:s,_descriptors:o}=t;if(Ta(a.index)&&i(n))e=e[a.index%e.length];else if(ki(e[0])){let l=e,u=r._scopes.filter(p=>p!==l);e=[];for(let p of l){let f=ex(u,r,n,p);e.push(vc(f,a,s&&s[n],o))}}return e}function qC(n,e,t){return xo(n)?n(e,t):n}var x4=(n,e)=>n===!0?e:typeof n=="string"?bo(e,n):void 0;function b4(n,e,t,i,r){for(let a of e){let s=x4(t,a);if(s){n.add(s);let o=qC(s._fallback,t,r);if(Ta(o)&&o!==t&&o!==i)return o}else if(s===!1&&Ta(i)&&t!==i)return null}return!1}function ex(n,e,t,i){let r=e._rootScopes,a=qC(e._fallback,t,i),s=[...n,...r],o=new Set;o.add(i);let l=_C(o,s,t,a||t,i);return l===null||Ta(a)&&a!==t&&(l=_C(o,s,a,l,i),l===null)?!1:Mm(Array.from(o),[""],r,a,()=>y4(e,t,i))}function _C(n,e,t,i,r){for(;t;)t=b4(n,e,t,i,r);return t}function y4(n,e,t){let i=n._getTarget();e in i||(i[e]={});let r=i[e];return fn(r)&&ki(t)?t:r}function S4(n,e,t,i){let r;for(let a of e)if(r=XC(m4(a,n),t),Ta(r))return tx(n,r)?ex(t,i,n,r):r}function XC(n,e){for(let t of e){if(!t)continue;let i=t[n];if(Ta(i))return i}}function vC(n){let e=n._keys;return e||(e=n._keys=w4(n._scopes)),e}function w4(n){let e=new Set;for(let t of n)for(let i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function ix(n,e,t,i){let{iScale:r}=n,{key:a="r"}=this._parsing,s=new Array(i),o,l,u,p;for(o=0,l=i;o<l;++o)u=o+t,p=e[u],s[o]={r:r.parse(bo(p,a),u)};return s}var C4=Number.EPSILON||1e-14,Bd=(n,e)=>e<n.length&&!n[e].skip&&n[e],YC=n=>n==="x"?"y":"x";function M4(n,e,t,i){let r=n.skip?e:n,a=e,s=t.skip?e:t,o=gm(a,r),l=gm(s,a),u=o/(o+l),p=l/(o+l);u=isNaN(u)?0:u,p=isNaN(p)?0:p;let f=i*u,g=i*p;return{previous:{x:a.x-f*(s.x-r.x),y:a.y-f*(s.y-r.y)},next:{x:a.x+g*(s.x-r.x),y:a.y+g*(s.y-r.y)}}}function E4(n,e,t){let i=n.length,r,a,s,o,l,u=Bd(n,0);for(let p=0;p<i-1;++p)if(l=u,u=Bd(n,p+1),!(!l||!u)){if(Ud(e[p],0,C4)){t[p]=t[p+1]=0;continue}r=t[p]/e[p],a=t[p+1]/e[p],o=Math.pow(r,2)+Math.pow(a,2),!(o<=9)&&(s=3/Math.sqrt(o),t[p]=r*s*e[p],t[p+1]=a*s*e[p])}}function A4(n,e,t="x"){let i=YC(t),r=n.length,a,s,o,l=Bd(n,0);for(let u=0;u<r;++u){if(s=o,o=l,l=Bd(n,u+1),!o)continue;let p=o[t],f=o[i];s&&(a=(p-s[t])/3,o[`cp1${t}`]=p-a,o[`cp1${i}`]=f-a*e[u]),l&&(a=(l[t]-p)/3,o[`cp2${t}`]=p+a,o[`cp2${i}`]=f+a*e[u])}}function T4(n,e="x"){let t=YC(e),i=n.length,r=Array(i).fill(0),a=Array(i),s,o,l,u=Bd(n,0);for(s=0;s<i;++s)if(o=l,l=u,u=Bd(n,s+1),!!l){if(u){let p=u[e]-l[e];r[s]=p!==0?(u[t]-l[t])/p:0}a[s]=o?u?_s(r[s-1])!==_s(r[s])?0:(r[s-1]+r[s])/2:r[s-1]:r[s]}E4(n,r,a),A4(n,a,e)}function pm(n,e,t){return Math.max(Math.min(n,t),e)}function k4(n,e){let t,i,r,a,s,o=Fd(n[0],e);for(t=0,i=n.length;t<i;++t)s=a,a=o,o=t<i-1&&Fd(n[t+1],e),a&&(r=n[t],s&&(r.cp1x=pm(r.cp1x,e.left,e.right),r.cp1y=pm(r.cp1y,e.top,e.bottom)),o&&(r.cp2x=pm(r.cp2x,e.left,e.right),r.cp2y=pm(r.cp2y,e.top,e.bottom)))}function $C(n,e,t,i,r){let a,s,o,l;if(e.spanGaps&&(n=n.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")T4(n,r);else{let u=i?n[n.length-1]:n[0];for(a=0,s=n.length;a<s;++a)o=n[a],l=M4(u,o,n[Math.min(a+1,s-(i?0:1))%s],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,u=o}e.capBezierPoints&&k4(n,t)}function nx(){return typeof window<"u"&&typeof document<"u"}function Em(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function _m(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}var Am=n=>window.getComputedStyle(n,null);function I4(n,e){return Am(n).getPropertyValue(e)}var D4=["top","right","bottom","left"];function _c(n,e,t){let i={};t=t?"-"+t:"";for(let r=0;r<4;r++){let a=D4[r];i[a]=parseFloat(n[e+"-"+a+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var P4=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function L4(n,e){let t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:a}=i,s=!1,o,l;if(P4(r,a,n.target))o=r,l=a;else{let u=e.getBoundingClientRect();o=i.clientX-u.left,l=i.clientY-u.top,s=!0}return{x:o,y:l,box:s}}function bl(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:i}=e,r=Am(t),a=r.boxSizing==="border-box",s=_c(r,"padding"),o=_c(r,"border","width"),{x:l,y:u,box:p}=L4(n,t),f=s.left+(p&&o.left),g=s.top+(p&&o.top),{width:m,height:x}=e;return a&&(m-=s.width+o.width,x-=s.height+o.height),{x:Math.round((l-f)/m*t.width/i),y:Math.round((u-g)/x*t.height/i)}}function R4(n,e,t){let i,r;if(e===void 0||t===void 0){let a=Em(n);if(!a)e=n.clientWidth,t=n.clientHeight;else{let s=a.getBoundingClientRect(),o=Am(a),l=_c(o,"border","width"),u=_c(o,"padding");e=s.width-u.width-l.width,t=s.height-u.height-l.height,i=_m(o.maxWidth,a,"clientWidth"),r=_m(o.maxHeight,a,"clientHeight")}}return{width:e,height:t,maxWidth:i||mm,maxHeight:r||mm}}var Iv=n=>Math.round(n*10)/10;function KC(n,e,t,i){let r=Am(n),a=_c(r,"margin"),s=_m(r.maxWidth,n,"clientWidth")||mm,o=_m(r.maxHeight,n,"clientHeight")||mm,l=R4(n,e,t),{width:u,height:p}=l;if(r.boxSizing==="content-box"){let f=_c(r,"border","width"),g=_c(r,"padding");u-=g.width+f.width,p-=g.height+f.height}return u=Math.max(0,u-a.width),p=Math.max(0,i?Math.floor(u/i):p-a.height),u=Iv(Math.min(u,s,l.maxWidth)),p=Iv(Math.min(p,o,l.maxHeight)),u&&!p&&(p=Iv(u/2)),{width:u,height:p}}function rx(n,e,t){let i=e||1,r=Math.floor(n.height*i),a=Math.floor(n.width*i);n.height=r/i,n.width=a/i;let s=n.canvas;return s.style&&(t||!s.style.height&&!s.style.width)&&(s.style.height=`${n.height}px`,s.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||s.height!==r||s.width!==a?(n.currentDevicePixelRatio=i,s.height=r,s.width=a,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var ZC=function(){let n=!1;try{let e={get passive(){return n=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return n}();function ax(n,e){let t=I4(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function pl(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function JC(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function QC(n,e,t,i){let r={x:n.cp2x,y:n.cp2y},a={x:e.cp1x,y:e.cp1y},s=pl(n,r,t),o=pl(r,a,t),l=pl(a,e,t),u=pl(s,o,t),p=pl(o,l,t);return pl(u,p,t)}var xC=new Map;function O4(n,e){e=e||{};let t=n+JSON.stringify(e),i=xC.get(t);return i||(i=new Intl.NumberFormat(n,e),xC.set(t,i)),i}function jd(n,e,t){return O4(e,t).format(n)}var N4=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},F4=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function bc(n,e,t){return n?N4(e,t):F4()}function sx(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function ox(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function tM(n){return n==="angle"?{between:zd,compare:VI,normalize:ga}:{between:Vs,compare:(e,t)=>e-t,normalize:e=>e}}function bC({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function B4(n,e,t){let{property:i,start:r,end:a}=t,{between:s,normalize:o}=tM(i),l=e.length,{start:u,end:p,loop:f}=n,g,m;if(f){for(u+=l,p+=l,g=0,m=l;g<m&&s(o(e[u%l][i]),r,a);++g)u--,p--;u%=l,p%=l}return p<u&&(p+=l),{start:u,end:p,loop:f,style:n.style}}function lx(n,e,t){if(!t)return[n];let{property:i,start:r,end:a}=t,s=e.length,{compare:o,between:l,normalize:u}=tM(i),{start:p,end:f,loop:g,style:m}=B4(n,e,t),x=[],y=!1,S=null,b,M,T,I=()=>l(r,T,b)&&o(r,T)!==0,O=()=>o(a,b)===0||l(a,T,b),U=()=>y||I(),N=()=>!y||O();for(let B=p,R=p;B<=f;++B)M=e[B%s],!M.skip&&(b=u(M[i]),b!==T&&(y=l(b,r,a),S===null&&U()&&(S=o(b,r)===0?B:R),S!==null&&N()&&(x.push(bC({start:S,end:B,loop:g,count:s,style:m})),S=null),R=B,T=b));return S!==null&&x.push(bC({start:S,end:f,loop:g,count:s,style:m})),x}function cx(n,e){let t=[],i=n.segments;for(let r=0;r<i.length;r++){let a=lx(i[r],n.points,e);a.length&&t.push(...a)}return t}function V4(n,e,t,i){let r=0,a=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(a+=r);a>r&&n[a%e].skip;)a--;return a%=e,{start:r,end:a}}function U4(n,e,t,i){let r=n.length,a=[],s=e,o=n[e],l;for(l=e+1;l<=t;++l){let u=n[l%r];u.skip||u.stop?o.skip||(i=!1,a.push({start:e%r,end:(l-1)%r,loop:i}),e=s=u.stop?l:null):(s=l,o.skip&&(e=l)),o=u}return s!==null&&a.push({start:e%r,end:s%r,loop:i}),a}function eM(n,e){let t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];let a=!!n._loop,{start:s,end:o}=V4(t,r,a,i);if(i===!0)return yC(n,[{start:s,end:o,loop:a}],t,e);let l=o<s?o+r:o,u=!!n._fullLoop&&s===0&&o===r-1;return yC(n,U4(t,s,l,u),t,e)}function yC(n,e,t,i){return!i||!i.setContext||!t?e:z4(n,e,t,i)}function z4(n,e,t,i){let r=n._chart.getContext(),a=SC(n.options),{_datasetIndex:s,options:{spanGaps:o}}=n,l=t.length,u=[],p=a,f=e[0].start,g=f;function m(x,y,S,b){let M=o?-1:1;if(x!==y){for(x+=l;t[x%l].skip;)x-=M;for(;t[y%l].skip;)y+=M;x%l!==y%l&&(u.push({start:x%l,end:y%l,loop:S,style:b}),p=b,f=y%l)}}for(let x of e){f=o?f:x.start;let y=t[f%l],S;for(g=f+1;g<=x.end;g++){let b=t[g%l];S=SC(i.setContext(yo(r,{type:"segment",p0:y,p1:b,p0DataIndex:(g-1)%l,p1DataIndex:g%l,datasetIndex:s}))),H4(S,p)&&m(f,g-1,x.loop,p),y=b,p=S}f<g-1&&m(f,g-1,x.loop,p)}return u}function SC(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function H4(n,e){return e&&JSON.stringify(n)!==JSON.stringify(e)}var xx=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){let a=t.listeners[r],s=t.duration;a.forEach(o=>o({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(i-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=Hv.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let a=i.items,s=a.length-1,o=!1,l;for(;s>=0;--s)l=a[s],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),o=!0):(a[s]=a[a.length-1],a.pop());o&&(r.draw(),this._notify(r,i,e,"progress")),a.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=a.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let i=t.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},So=new xx,iM="transparent",W4={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let i=$v(n||iM),r=i.valid&&$v(e||iM);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}},bx=class{constructor(e,t,i,r){let a=t[i];r=Wd([e.to,r,a,e.from]);let s=Wd([e.from,a,r]);this._active=!0,this._fn=e.fn||W4[e.type||typeof s],this._easing=Od[e.easing]||Od.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);let r=this._target[this._prop],a=i-this._start,s=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=Wd([e.to,t,r,e.from]),this._from=Wd([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,i=this._duration,r=this._prop,a=this._from,s=this._loop,o=this._to,l;if(this._active=a!==o&&(s||t<i),!this._active){this._target[r]=o,this._notify(!0);return}if(t<0){this._target[r]=a;return}l=t/i%2,l=s&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(a,o,l)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){let t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}},j4=["x","y","borderWidth","radius","tension"],G4=["color","borderColor","backgroundColor"];wi.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});var q4=Object.keys(wi.animation);wi.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:n=>n!=="onProgress"&&n!=="onComplete"&&n!=="fn"});wi.set("animations",{colors:{type:"color",properties:G4},numbers:{type:"number",properties:j4}});wi.describe("animations",{_fallback:"animation"});wi.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:n=>n|0}}}});var Om=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!ki(e))return;let t=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{let r=e[i];if(!ki(r))return;let a={};for(let s of q4)a[s]=r[s];(fn(r.properties)&&r.properties||[i]).forEach(s=>{(s===i||!t.has(s))&&t.set(s,a)})})}_animateOptions(e,t){let i=t.options,r=Y4(e,i);if(!r)return[];let a=this._createAnimations(r,i);return i.$shared&&X4(e.options.$animations,i).then(()=>{e.options=i},()=>{}),a}_createAnimations(e,t){let i=this._properties,r=[],a=e.$animations||(e.$animations={}),s=Object.keys(t),o=Date.now(),l;for(l=s.length-1;l>=0;--l){let u=s[l];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(e,t));continue}let p=t[u],f=a[u],g=i.get(u);if(f)if(g&&f.active()){f.update(g,p,o);continue}else f.cancel();if(!g||!g.duration){e[u]=p;continue}a[u]=f=new bx(g,e,u,p),r.push(f)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let i=this._createAnimations(e,t);if(i.length)return So.add(this._chart,i),!0}};function X4(n,e){let t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){let a=n[i[r]];a&&a.active()&&t.push(a.wait())}return Promise.all(t)}function Y4(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function nM(n,e){let t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,a=t.max===void 0?e:0;return{start:i?a:r,end:i?r:a}}function $4(n,e,t){if(t===!1)return!1;let i=nM(n,t),r=nM(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function K4(n){let e,t,i,r;return ki(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function YM(n,e){let t=[],i=n._getSortedDatasetMetas(e),r,a;for(r=0,a=i.length;r<a;++r)t.push(i[r].index);return t}function rM(n,e,t,i={}){let r=n.keys,a=i.mode==="single",s,o,l,u;if(e!==null){for(s=0,o=r.length;s<o;++s){if(l=+r[s],l===t){if(i.all)continue;break}u=n.values[l],jn(u)&&(a||e===0||_s(e)===_s(u))&&(e+=u)}return e}}function Z4(n){let e=Object.keys(n),t=new Array(e.length),i,r,a;for(i=0,r=e.length;i<r;++i)a=e[i],t[i]={x:a,y:n[a]};return t}function aM(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function J4(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function Q4(n){let{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function tD(n,e,t){let i=n[e]||(n[e]={});return i[t]||(i[t]={})}function sM(n,e,t,i){for(let r of e.getMatchingVisibleMetas(i).reverse()){let a=n[r.index];if(t&&a>0||!t&&a<0)return r.index}return null}function oM(n,e){let{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:a,vScale:s,index:o}=i,l=a.axis,u=s.axis,p=J4(a,s,i),f=e.length,g;for(let m=0;m<f;++m){let x=e[m],{[l]:y,[u]:S}=x,b=x._stacks||(x._stacks={});g=b[u]=tD(r,p,y),g[o]=S,g._top=sM(g,s,!0,i.type),g._bottom=sM(g,s,!1,i.type)}}function dx(n,e){let t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function eD(n,e){return yo(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function iD(n,e,t){return yo(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Hh(n,e){let t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(let r of e){let a=r._stacks;if(!a||a[i]===void 0||a[i][t]===void 0)return;delete a[i][t]}}}var ux=n=>n==="reset"||n==="none",lM=(n,e)=>e?n:Object.assign({},n),nD=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:YM(t,!0),values:null},Hs=(()=>{class n{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=aM(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&Hh(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,r=this.getDataset(),a=(g,m,x,y)=>g==="x"?m:g==="r"?y:x,s=i.xAxisID=gi(r.xAxisID,dx(t,"x")),o=i.yAxisID=gi(r.yAxisID,dx(t,"y")),l=i.rAxisID=gi(r.rAxisID,dx(t,"r")),u=i.indexAxis,p=i.iAxisID=a(u,s,o,l),f=i.vAxisID=a(u,o,s,l);i.xScale=this.getScaleForId(s),i.yScale=this.getScaleForId(o),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(p),i.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&Uv(this._data,this),t._stacked&&Hh(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),r=this._data;if(ki(i))this._data=Z4(i);else if(r!==i){if(r){Uv(r,this);let a=this._cachedMeta;Hh(a),a._parsed=[]}i&&Object.isExtensible(i)&&LC(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,r=this.getDataset(),a=!1;this._dataCheck();let s=i._stacked;i._stacked=aM(i.vScale,i),i.stack!==r.stack&&(a=!0,Hh(i),i.stack=r.stack),this._resyncElements(t),(a||s!==i._stacked)&&oM(this,i._parsed)}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:r,_data:a}=this,{iScale:s,_stacked:o}=r,l=s.axis,u=t===0&&i===a.length?!0:r._sorted,p=t>0&&r._parsed[t-1],f,g,m;if(this._parsing===!1)r._parsed=a,r._sorted=!0,m=a;else{fn(a[t])?m=this.parseArrayData(r,a,t,i):ki(a[t])?m=this.parseObjectData(r,a,t,i):m=this.parsePrimitiveData(r,a,t,i);let x=()=>g[l]===null||p&&g[l]<p[l];for(f=0;f<i;++f)r._parsed[f+t]=g=m[f],u&&(x()&&(u=!1),p=g);r._sorted=u}o&&oM(this,m)}parsePrimitiveData(t,i,r,a){let{iScale:s,vScale:o}=t,l=s.axis,u=o.axis,p=s.getLabels(),f=s===o,g=new Array(a),m,x,y;for(m=0,x=a;m<x;++m)y=m+r,g[m]={[l]:f||s.parse(p[y],y),[u]:o.parse(i[y],y)};return g}parseArrayData(t,i,r,a){let{xScale:s,yScale:o}=t,l=new Array(a),u,p,f,g;for(u=0,p=a;u<p;++u)f=u+r,g=i[f],l[u]={x:s.parse(g[0],f),y:o.parse(g[1],f)};return l}parseObjectData(t,i,r,a){let{xScale:s,yScale:o}=t,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,p=new Array(a),f,g,m,x;for(f=0,g=a;f<g;++f)m=f+r,x=i[m],p[f]={x:s.parse(bo(x,l),m),y:o.parse(bo(x,u),m)};return p}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,r){let a=this.chart,s=this._cachedMeta,o=i[t.axis],l={keys:YM(a,!0),values:i._stacks[t.axis]};return rM(l,o,s.index,{mode:r})}updateRangeFromParsed(t,i,r,a){let s=r[i.axis],o=s===null?NaN:s,l=a&&r._stacks[i.axis];a&&l&&(a.values=l,o=rM(a,s,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,i){let r=this._cachedMeta,a=r._parsed,s=r._sorted&&t===r.iScale,o=a.length,l=this._getOtherScale(t),u=nD(i,r,this.chart),p={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:g}=Q4(l),m,x;function y(){x=a[m];let S=x[l.axis];return!jn(x[t.axis])||f>S||g<S}for(m=0;m<o&&!(!y()&&(this.updateRangeFromParsed(p,t,x,u),s));++m);if(s){for(m=o-1;m>=0;--m)if(!y()){this.updateRangeFromParsed(p,t,x,u);break}}return p}getAllParsedValues(t){let i=this._cachedMeta._parsed,r=[],a,s,o;for(a=0,s=i.length;a<s;++a)o=i[a][t.axis],jn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,r=i.iScale,a=i.vScale,s=this.getParsed(t);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:a?""+a.getLabelForValue(s[a.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=K4(gi(this.options.clip,$4(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,r=this._cachedMeta,a=r.data||[],s=i.chartArea,o=[],l=this._drawStart||0,u=this._drawCount||a.length-l,p=this.options.drawActiveElementsOnTop,f;for(r.dataset&&r.dataset.draw(t,s,l,u),f=l;f<l+u;++f){let g=a[f];g.hidden||(g.active&&p?o.push(g):g.draw(t,s))}for(f=0;f<o.length;++f)o[f].draw(t,s)}getStyle(t,i){let r=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,i,r){let a=this.getDataset(),s;if(t>=0&&t<this._cachedMeta.data.length){let o=this._cachedMeta.data[t];s=o.$context||(o.$context=iD(this.getContext(),t,o)),s.parsed=this.getParsed(t),s.raw=a.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=eD(this.chart.getContext(),this.index)),s.dataset=a,s.index=s.datasetIndex=this.index;return s.active=!!i,s.mode=r,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",r){let a=i==="active",s=this._cachedDataOpts,o=t+"-"+i,l=s[o],u=this.enableOptionSharing&&Ta(r);if(l)return lM(l,u);let p=this.chart.config,f=p.datasetElementScopeKeys(this._type,t),g=a?[`${t}Hover`,"hover",t,""]:[t,""],m=p.getOptionScopes(this.getDataset(),f),x=Object.keys(wi.elements[t]),y=()=>this.getContext(r,a),S=p.resolveNamedOptions(m,x,y,g);return S.$shared&&(S.$shared=u,s[o]=Object.freeze(lM(S,u))),S}_resolveAnimations(t,i,r){let a=this.chart,s=this._cachedDataOpts,o=`animation-${i}`,l=s[o];if(l)return l;let u;if(a.options.animation!==!1){let f=this.chart.config,g=f.datasetAnimationScopeKeys(this._type,i),m=f.getOptionScopes(this.getDataset(),g);u=f.createResolver(m,this.getContext(t,r,i))}let p=new Om(a,u&&u.animations);return u&&u._cacheable&&(s[o]=Object.freeze(p)),p}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||ux(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let r=this.resolveDataElementOptions(t,i),a=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(i,s)||s!==a;return this.updateSharedOptions(s,i,r),{sharedOptions:s,includeOptions:o}}updateElement(t,i,r,a){ux(a)?Object.assign(t,r):this._resolveAnimations(i,a).update(t,r)}updateSharedOptions(t,i,r){t&&!ux(i)&&this._resolveAnimations(void 0,i).update(t,r)}_setStyle(t,i,r,a){t.active=a;let s=this.getStyle(i,a);this._resolveAnimations(i,r,a).update(t,{options:!a&&this.getSharedOptions(s)||s})}removeHoverStyle(t,i,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,i,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,r=this._cachedMeta.data;for(let[l,u,p]of this._syncList)this[l](u,p);this._syncList=[];let a=r.length,s=i.length,o=Math.min(s,a);o&&this.parse(0,o),s>a?this._insertElements(a,s-a,t):s<a&&this._removeElements(s,a-s)}_insertElements(t,i,r=!0){let a=this._cachedMeta,s=a.data,o=t+i,l,u=p=>{for(p.length+=i,l=p.length-1;l>=o;l--)p[l]=p[l-i]};for(u(s),l=t;l<o;++l)s[l]=new this.dataElementType;this._parsing&&u(a._parsed),this.parse(t,i),r&&this.updateElements(s,t,i,"reset")}updateElements(t,i,r,a){}_removeElements(t,i){let r=this._cachedMeta;if(this._parsing){let a=r._parsed.splice(t,i);r._stacked&&Hh(r,a)}r.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,r,a]=t;this[i](r,a)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n.defaults={},n})();Hs.prototype.datasetElementType=null;Hs.prototype.dataElementType=null;function rD(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),i=[];for(let r=0,a=t.length;r<a;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=zv(i.sort((r,a)=>r-a))}return n._cache.$bar}function aD(n){let e=n.iScale,t=rD(e,n.type),i=e._length,r,a,s,o,l=()=>{s===32767||s===-32768||(Ta(o)&&(i=Math.min(i,Math.abs(s-o)||i)),o=s)};for(r=0,a=t.length;r<a;++r)s=e.getPixelForValue(t[r]),l();for(o=void 0,r=0,a=e.ticks.length;r<a;++r)s=e.getPixelForTick(r),l();return i}function sD(n,e,t,i){let r=t.barThickness,a,s;return Bi(r)?(a=e.min*t.categoryPercentage,s=t.barPercentage):(a=r*i,s=1),{chunk:a/i,ratio:s,start:e.pixels[n]-a/2}}function oD(n,e,t,i){let r=e.pixels,a=r[n],s=n>0?r[n-1]:null,o=n<r.length-1?r[n+1]:null,l=t.categoryPercentage;s===null&&(s=a-(o===null?e.end-e.start:o-a)),o===null&&(o=a+a-s);let u=a-(a-Math.min(s,o))/2*l;return{chunk:Math.abs(o-s)/2*l/i,ratio:t.barPercentage,start:u}}function lD(n,e,t,i){let r=t.parse(n[0],i),a=t.parse(n[1],i),s=Math.min(r,a),o=Math.max(r,a),l=s,u=o;Math.abs(s)>Math.abs(o)&&(l=o,u=s),e[t.axis]=u,e._custom={barStart:l,barEnd:u,start:r,end:a,min:s,max:o}}function $M(n,e,t,i){return fn(n)?lD(n,e,t,i):e[t.axis]=t.parse(n,i),e}function cM(n,e,t,i){let r=n.iScale,a=n.vScale,s=r.getLabels(),o=r===a,l=[],u,p,f,g;for(u=t,p=t+i;u<p;++u)g=e[u],f={},f[r.axis]=o||r.parse(s[u],u),l.push($M(g,f,a,u));return l}function hx(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function cD(n,e,t){return n!==0?_s(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function dD(n){let e,t,i,r,a;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",a="start"):(r="start",a="end"),{start:t,end:i,reverse:e,top:r,bottom:a}}function uD(n,e,t,i){let r=e.borderSkipped,a={};if(!r){n.borderSkipped=a;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:s,end:o,reverse:l,top:u,bottom:p}=dD(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=u:(t._bottom||0)===i?r=p:(a[dM(p,s,o,l)]=!0,r=u)),a[dM(r,s,o,l)]=!0,n.borderSkipped=a}function dM(n,e,t,i){return i?(n=hD(n,e,t),n=uM(n,t,e)):n=uM(n,e,t),n}function hD(n,e,t){return n===e?t:n===t?e:n}function uM(n,e,t){return n==="start"?e:n==="end"?t:n}function pD(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var fD=(()=>{class n extends Hs{parsePrimitiveData(t,i,r,a){return cM(t,i,r,a)}parseArrayData(t,i,r,a){return cM(t,i,r,a)}parseObjectData(t,i,r,a){let{iScale:s,vScale:o}=t,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,p=s.axis==="x"?l:u,f=o.axis==="x"?l:u,g=[],m,x,y,S;for(m=r,x=r+a;m<x;++m)S=i[m],y={},y[s.axis]=s.parse(bo(S,p),m),g.push($M(bo(S,f),y,o,m));return g}updateRangeFromParsed(t,i,r,a){super.updateRangeFromParsed(t,i,r,a);let s=r._custom;s&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let i=this._cachedMeta,{iScale:r,vScale:a}=i,s=this.getParsed(t),o=s._custom,l=hx(o)?"["+o.start+", "+o.end+"]":""+a.getLabelForValue(s[a.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,r,a){let s=a==="reset",{index:o,_cachedMeta:{vScale:l}}=this,u=l.getBasePixel(),p=l.isHorizontal(),f=this._getRuler(),{sharedOptions:g,includeOptions:m}=this._getSharedOptions(i,a);for(let x=i;x<i+r;x++){let y=this.getParsed(x),S=s||Bi(y[l.axis])?{base:u,head:u}:this._calculateBarValuePixels(x),b=this._calculateBarIndexPixels(x,f),M=(y._stacks||{})[l.axis],T={horizontal:p,base:S.base,enableBorderRadius:!M||hx(y._custom)||o===M._top||o===M._bottom,x:p?S.head:b.center,y:p?b.center:S.head,height:p?b.size:Math.abs(S.size),width:p?Math.abs(S.size):b.size};m&&(T.options=g||this.resolveDataElementOptions(x,t[x].active?"active":a));let I=T.options||t[x].options;uD(T,I,M,o),pD(T,I,f.ratio),this.updateElement(t[x],x,T,a)}}_getStacks(t,i){let{iScale:r}=this._cachedMeta,a=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=r.options.stacked,o=[],l=u=>{let p=u.controller.getParsed(i),f=p&&p[u.vScale.axis];if(Bi(f)||isNaN(f))return!0};for(let u of a)if(!(i!==void 0&&l(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,r){let a=this._getStacks(t,r),s=i!==void 0?a.indexOf(i):-1;return s===-1?a.length-1:s}_getRuler(){let t=this.options,i=this._cachedMeta,r=i.iScale,a=[],s,o;for(s=0,o=i.data.length;s<o;++s)a.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));let l=t.barThickness;return{min:l||aD(i),pixels:a,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:i,_stacked:r},options:{base:a,minBarLength:s}}=this,o=a||0,l=this.getParsed(t),u=l._custom,p=hx(u),f=l[i.axis],g=0,m=r?this.applyStack(i,l,r):f,x,y;m!==f&&(g=m-f,m=f),p&&(f=u.barStart,m=u.barEnd-u.barStart,f!==0&&_s(f)!==_s(u.barEnd)&&(g=0),g+=f);let S=!Bi(a)&&!p?a:g,b=i.getPixelForValue(S);if(this.chart.getDataVisibility(t)?x=i.getPixelForValue(g+m):x=b,y=x-b,Math.abs(y)<s){y=cD(y,i,o)*s,f===o&&(b-=y/2);let M=i.getPixelForDecimal(0),T=i.getPixelForDecimal(1),I=Math.min(M,T),O=Math.max(M,T);b=Math.max(Math.min(b,O),I),x=b+y}if(b===i.getPixelForValue(o)){let M=_s(y)*i.getLineWidthForValue(o)/2;b+=M,y-=M}return{size:y,base:b,head:x,center:x+y/2}}_calculateBarIndexPixels(t,i){let r=i.scale,a=this.options,s=a.skipNull,o=gi(a.maxBarThickness,1/0),l,u;if(i.grouped){let p=s?this._getStackCount(t):i.stackCount,f=a.barThickness==="flex"?oD(t,i,a,p):sD(t,i,a,p),g=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);l=f.start+f.chunk*g+f.chunk/2,u=Math.min(o,f.chunk*f.ratio)}else l=r.getPixelForValue(this.getParsed(t)[r.axis],t),u=Math.min(o,i.min*i.ratio);return{base:l-u/2,head:l+u/2,center:l,size:u}}draw(){let t=this._cachedMeta,i=t.vScale,r=t.data,a=r.length,s=0;for(;s<a;++s)this.getParsed(s)[i.axis]!==null&&r[s].draw(this._ctx)}}return n.id="bar",n.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},n.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},n})(),mD=(()=>{class n extends Hs{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,r,a){let s=super.parsePrimitiveData(t,i,r,a);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(t,i,r,a){let s=super.parseArrayData(t,i,r,a);for(let o=0;o<s.length;o++){let l=i[r+o];s[o]._custom=gi(l[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(t,i,r,a){let s=super.parseObjectData(t,i,r,a);for(let o=0;o<s.length;o++){let l=i[r+o];s[o]._custom=gi(l&&l.r&&+l.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){let t=this._cachedMeta.data,i=0;for(let r=t.length-1;r>=0;--r)i=Math.max(i,t[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(t){let i=this._cachedMeta,{xScale:r,yScale:a}=i,s=this.getParsed(t),o=r.getLabelForValue(s.x),l=a.getLabelForValue(s.y),u=s._custom;return{label:i.label,value:"("+o+", "+l+(u?", "+u:"")+")"}}update(t){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,r,a){let s=a==="reset",{iScale:o,vScale:l}=this._cachedMeta,{sharedOptions:u,includeOptions:p}=this._getSharedOptions(i,a),f=o.axis,g=l.axis;for(let m=i;m<i+r;m++){let x=t[m],y=!s&&this.getParsed(m),S={},b=S[f]=s?o.getPixelForDecimal(.5):o.getPixelForValue(y[f]),M=S[g]=s?l.getBasePixel():l.getPixelForValue(y[g]);S.skip=isNaN(b)||isNaN(M),p&&(S.options=u||this.resolveDataElementOptions(m,x.active?"active":a),s&&(S.options.radius=0)),this.updateElement(x,m,S,a)}}resolveDataElementOptions(t,i){let r=this.getParsed(t),a=super.resolveDataElementOptions(t,i);a.$shared&&(a=Object.assign({},a,{$shared:!1}));let s=a.radius;return i!=="active"&&(a.radius=0),a.radius+=gi(r&&r._custom,s),a}}return n.id="bubble",n.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},n.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}},n})();function gD(n,e,t){let i=1,r=1,a=0,s=0;if(e<en){let o=n,l=o+e,u=Math.cos(o),p=Math.sin(o),f=Math.cos(l),g=Math.sin(l),m=(T,I,O)=>zd(T,o,l,!0)?1:Math.max(I,I*t,O,O*t),x=(T,I,O)=>zd(T,o,l,!0)?-1:Math.min(I,I*t,O,O*t),y=m(0,u,f),S=m(Nn,p,g),b=x(wn,u,f),M=x(wn+Nn,p,g);i=(y-b)/2,r=(S-M)/2,a=-(y+b)/2,s=-(S+M)/2}return{ratioX:i,ratioY:r,offsetX:a,offsetY:s}}var KM=(()=>{class n extends Hs{constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){let r=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=r;else{let s=u=>+r[u];if(ki(r[t])){let{key:u="value"}=this._parsing;s=p=>+bo(r[p],u)}let o,l;for(o=t,l=t+i;o<l;++o)a._parsed[o]=s(o)}}_getRotation(){return Ja(this.options.rotation-90)}_getCircumference(){return Ja(this.options.circumference)}_getRotationExtents(){let t=en,i=-en;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)){let a=this.chart.getDatasetMeta(r).controller,s=a._getRotation(),o=a._getCircumference();t=Math.min(t,s),i=Math.max(i,s+o)}return{rotation:t,circumference:i-t}}update(t){let i=this.chart,{chartArea:r}=i,a=this._cachedMeta,s=a.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-o)/2,0),u=Math.min(CC(this.options.cutout,l),1),p=this._getRingWeight(this.index),{circumference:f,rotation:g}=this._getRotationExtents(),{ratioX:m,ratioY:x,offsetX:y,offsetY:S}=gD(g,f,u),b=(r.width-o)/m,M=(r.height-o)/x,T=Math.max(Math.min(b,M)/2,0),I=Rv(this.options.radius,T),O=Math.max(I*u,0),U=(I-O)/this._getVisibleDatasetWeightTotal();this.offsetX=y*I,this.offsetY=S*I,a.total=this.calculateTotal(),this.outerRadius=I-U*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-U*p,0),this.updateElements(s,0,s.length,t)}_circumference(t,i){let r=this.options,a=this._cachedMeta,s=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||a._parsed[t]===null||a.data[t].hidden?0:this.calculateCircumference(a._parsed[t]*s/en)}updateElements(t,i,r,a){let s=a==="reset",o=this.chart,l=o.chartArea,p=o.options.animation,f=(l.left+l.right)/2,g=(l.top+l.bottom)/2,m=s&&p.animateScale,x=m?0:this.innerRadius,y=m?0:this.outerRadius,{sharedOptions:S,includeOptions:b}=this._getSharedOptions(i,a),M=this._getRotation(),T;for(T=0;T<i;++T)M+=this._circumference(T,s);for(T=i;T<i+r;++T){let I=this._circumference(T,s),O=t[T],U={x:f+this.offsetX,y:g+this.offsetY,startAngle:M,endAngle:M+I,circumference:I,outerRadius:y,innerRadius:x};b&&(U.options=S||this.resolveDataElementOptions(T,O.active?"active":a)),M+=I,this.updateElement(O,T,U,a)}}calculateTotal(){let t=this._cachedMeta,i=t.data,r=0,a;for(a=0;a<i.length;a++){let s=t._parsed[a];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(a)&&!i[a].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(t){let i=this._cachedMeta.total;return i>0&&!isNaN(t)?en*(Math.abs(t)/i):0}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart,a=r.data.labels||[],s=jd(i._parsed[t],r.options.locale);return{label:a[t]||"",value:s}}getMaxBorderWidth(t){let i=0,r=this.chart,a,s,o,l,u;if(!t){for(a=0,s=r.data.datasets.length;a<s;++a)if(r.isDatasetVisible(a)){o=r.getDatasetMeta(a),t=o.data,l=o.controller;break}}if(!t)return 0;for(a=0,s=t.length;a<s;++a)u=l.resolveDataElementOptions(a),u.borderAlign!=="inner"&&(i=Math.max(i,u.borderWidth||0,u.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let r=0,a=t.length;r<a;++r){let s=this.resolveDataElementOptions(r);i=Math.max(i,s.offset||0,s.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(t){return Math.max(gi(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n.id="doughnut",n.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},n.descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"},n.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data;if(t.labels.length&&t.datasets.length){let{labels:{pointStyle:i}}=e.legend.options;return t.labels.map((r,a)=>{let o=e.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}},tooltip:{callbacks:{title(){return""},label(e){let t=e.label,i=": "+e.formattedValue;return fn(t)?(t=t.slice(),t[0]+=i):t+=i,t}}}}},n})(),_D=(()=>{class n extends Hs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let i=this._cachedMeta,{dataset:r,data:a=[],_dataset:s}=i,o=this.chart._animationsDisabled,{start:l,count:u}=jv(i,a,o);this._drawStart=l,this._drawCount=u,Gv(i)&&(l=0,u=a.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=a;let p=this.resolveDatasetElementOptions(t);this.options.showLine||(p.borderWidth=0),p.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:p},t),this.updateElements(a,l,u,t)}updateElements(t,i,r,a){let s=a==="reset",{iScale:o,vScale:l,_stacked:u,_dataset:p}=this._cachedMeta,{sharedOptions:f,includeOptions:g}=this._getSharedOptions(i,a),m=o.axis,x=l.axis,{spanGaps:y,segment:S}=this.options,b=xc(y)?y:Number.POSITIVE_INFINITY,M=this.chart._animationsDisabled||s||a==="none",T=i>0&&this.getParsed(i-1);for(let I=i;I<i+r;++I){let O=t[I],U=this.getParsed(I),N=M?O:{},B=Bi(U[x]),R=N[m]=o.getPixelForValue(U[m],I),F=N[x]=s||B?l.getBasePixel():l.getPixelForValue(u?this.applyStack(l,U,u):U[x],I);N.skip=isNaN(R)||isNaN(F)||B,N.stop=I>0&&Math.abs(U[m]-T[m])>b,S&&(N.parsed=U,N.raw=p.data[I]),g&&(N.options=f||this.resolveDataElementOptions(I,O.active?"active":a)),M||this.updateElement(O,I,N,a),T=U}}getMaxOverflow(){let t=this._cachedMeta,i=t.dataset,r=i.options&&i.options.borderWidth||0,a=t.data||[];if(!a.length)return r;let s=a[0].size(this.resolveDataElementOptions(0)),o=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(r,s,o)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n.id="line",n.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},n.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},n})(),vD=(()=>{class n extends Hs{constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart,a=r.data.labels||[],s=jd(i._parsed[t].r,r.options.locale);return{label:a[t]||"",value:s}}parseObjectData(t,i,r,a){return ix.bind(this)(t,i,r,a)}update(t){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){let t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((r,a)=>{let s=this.getParsed(a).r;!isNaN(s)&&this.chart.getDataVisibility(a)&&(s<i.min&&(i.min=s),s>i.max&&(i.max=s))}),i}_updateRadius(){let t=this.chart,i=t.chartArea,r=t.options,a=Math.min(i.right-i.left,i.bottom-i.top),s=Math.max(a/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),l=(s-o)/t.getVisibleDatasetCount();this.outerRadius=s-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(t,i,r,a){let s=a==="reset",o=this.chart,u=o.options.animation,p=this._cachedMeta.rScale,f=p.xCenter,g=p.yCenter,m=p.getIndexAngle(0)-.5*wn,x=m,y,S=360/this.countVisibleElements();for(y=0;y<i;++y)x+=this._computeAngle(y,a,S);for(y=i;y<i+r;y++){let b=t[y],M=x,T=x+this._computeAngle(y,a,S),I=o.getDataVisibility(y)?p.getDistanceFromCenterForValue(this.getParsed(y).r):0;x=T,s&&(u.animateScale&&(I=0),u.animateRotate&&(M=T=m));let O={x:f,y:g,innerRadius:0,outerRadius:I,startAngle:M,endAngle:T,options:this.resolveDataElementOptions(y,b.active?"active":a)};this.updateElement(b,y,O,a)}}countVisibleElements(){let t=this._cachedMeta,i=0;return t.data.forEach((r,a)=>{!isNaN(this.getParsed(a).r)&&this.chart.getDataVisibility(a)&&i++}),i}_computeAngle(t,i,r){return this.chart.getDataVisibility(t)?Ja(this.resolveDataElementOptions(t,i).angle||r):0}}return n.id="polarArea",n.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},n.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data;if(t.labels.length&&t.datasets.length){let{labels:{pointStyle:i}}=e.legend.options;return t.labels.map((r,a)=>{let o=e.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}},tooltip:{callbacks:{title(){return""},label(e){return e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},n})(),xD=(()=>{class n extends KM{}return n.id="pie",n.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},n})(),bD=(()=>{class n extends Hs{getLabelAndValue(t){let i=this._cachedMeta.vScale,r=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(t,i,r,a){return ix.bind(this)(t,i,r,a)}update(t){let i=this._cachedMeta,r=i.dataset,a=i.data||[],s=i.iScale.getLabels();if(r.points=a,t!=="resize"){let o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);let l={_loop:!0,_fullLoop:s.length===a.length,options:o};this.updateElement(r,void 0,l,t)}this.updateElements(a,0,a.length,t)}updateElements(t,i,r,a){let s=this._cachedMeta.rScale,o=a==="reset";for(let l=i;l<i+r;l++){let u=t[l],p=this.resolveDataElementOptions(l,u.active?"active":a),f=s.getPointPositionForValue(l,this.getParsed(l).r),g=o?s.xCenter:f.x,m=o?s.yCenter:f.y,x={x:g,y:m,angle:f.angle,skip:isNaN(g)||isNaN(m),options:p};this.updateElement(u,l,x,a)}}}return n.id="radar",n.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},n.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},n})(),Da=class{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return xc(this.x)&&xc(this.y)}getProps(e,t){let i=this.$animations;if(!t||!i)return this;let r={};return e.forEach(a=>{r[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),r}};Da.defaults={};Da.defaultRoutes=void 0;var ZM={values(n){return fn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let i=this.chart.options.locale,r,a=n;if(t.length>1){let u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),a=yD(n,t)}let s=Ia(Math.abs(a)),o=Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),jd(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";let i=n/Math.pow(10,Math.floor(Ia(n)));return i===1||i===2||i===5?ZM.numeric.call(this,n,e,t):""}};function yD(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var zm={formatters:ZM};wi.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(n,e)=>e.lineWidth,tickColor:(n,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:zm.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});wi.route("scale.ticks","color","","color");wi.route("scale.grid","color","","borderColor");wi.route("scale.grid","borderColor","","borderColor");wi.route("scale.title","color","","color");wi.describe("scale",{_fallback:!1,_scriptable:n=>!n.startsWith("before")&&!n.startsWith("after")&&n!=="callback"&&n!=="parser",_indexable:n=>n!=="borderDash"&&n!=="tickBorderDash"});wi.describe("scales",{_fallback:"scale"});wi.describe("scale.ticks",{_scriptable:n=>n!=="backdropPadding"&&n!=="callback",_indexable:n=>n!=="backdropPadding"});function SD(n,e){let t=n.options.ticks,i=t.maxTicksLimit||wD(n),r=t.major.enabled?MD(e):[],a=r.length,s=r[0],o=r[a-1],l=[];if(a>i)return ED(e,l,r,a/i),l;let u=CD(r,e,i);if(a>0){let p,f,g=a>1?Math.round((o-s)/(a-1)):null;for(Tm(e,l,u,Bi(g)?0:s-g,s),p=0,f=a-1;p<f;p++)Tm(e,l,u,r[p],r[p+1]);return Tm(e,l,u,o,Bi(g)?e.length:o+g),l}return Tm(e,l,u),l}function wD(n){let e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function CD(n,e,t){let i=AD(n),r=e.length/t;if(!i)return Math.max(r,1);let a=AC(i);for(let s=0,o=a.length-1;s<o;s++){let l=a[s];if(l>r)return l}return Math.max(r,1)}function MD(n){let e=[],t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function ED(n,e,t,i){let r=0,a=t[0],s;for(i=Math.ceil(i),s=0;s<n.length;s++)s===a&&(e.push(n[s]),r++,a=t[r*i])}function Tm(n,e,t,i,r){let a=gi(i,0),s=Math.min(gi(r,n.length),n.length),o=0,l,u,p;for(t=Math.ceil(t),r&&(l=r-i,t=l/Math.floor(l/t)),p=a;p<0;)o++,p=Math.round(a+o*t);for(u=Math.max(a,0);u<s;u++)u===p&&(e.push(n[u]),o++,p=Math.round(a+o*t))}function AD(n){let e=n.length,t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}var TD=n=>n==="left"?"right":n==="right"?"left":n,hM=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t;function pM(n,e){let t=[],i=n.length/e,r=n.length,a=0;for(;a<r;a+=i)t.push(n[Math.floor(a)]);return t}function kD(n,e,t){let i=n.ticks.length,r=Math.min(e,i-1),a=n._startPixel,s=n._endPixel,o=1e-6,l=n.getPixelForTick(r),u;if(!(t&&(i===1?u=Math.max(l-a,s-l):e===0?u=(n.getPixelForTick(1)-l)/2:u=(l-n.getPixelForTick(r-1))/2,l+=r<e?u:-u,l<a-o||l>s+o)))return l}function ID(n,e){Zi(n,t=>{let i=t.gc,r=i.length/2,a;if(r>e){for(a=0;a<r;++a)delete t.data[i[a]];i.splice(0,r)}})}function Wh(n){return n.drawTicks?n.tickLength:0}function fM(n,e){if(!n.display)return 0;let t=lr(n.font,e),i=Dr(n.padding);return(fn(n.text)?n.text.length:1)*t.lineHeight+i.height}function DD(n,e){return yo(n,{scale:e,type:"scale"})}function PD(n,e,t){return yo(n,{tick:t,index:e,type:"tick"})}function LD(n,e,t){let i=ym(n);return(t&&e!=="right"||!t&&e==="right")&&(i=TD(i)),i}function RD(n,e,t,i){let{top:r,left:a,bottom:s,right:o,chart:l}=n,{chartArea:u,scales:p}=l,f=0,g,m,x,y=s-r,S=o-a;if(n.isHorizontal()){if(m=Ir(i,a,o),ki(t)){let b=Object.keys(t)[0],M=t[b];x=p[b].getPixelForValue(M)+y-e}else t==="center"?x=(u.bottom+u.top)/2+y-e:x=hM(n,t,e);g=o-a}else{if(ki(t)){let b=Object.keys(t)[0],M=t[b];m=p[b].getPixelForValue(M)-S+e}else t==="center"?m=(u.left+u.right)/2-S+e:m=hM(n,t,e);x=Ir(i,s,r),f=t==="left"?-Nn:Nn}return{titleX:m,titleY:x,maxWidth:g,rotation:f}}var Sc=class n extends Da{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=ka(e,Number.POSITIVE_INFINITY),t=ka(t,Number.NEGATIVE_INFINITY),i=ka(i,Number.POSITIVE_INFINITY),r=ka(r,Number.NEGATIVE_INFINITY),{min:ka(e,i),max:ka(t,r),minDefined:jn(e),maxDefined:jn(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:a}=this.getUserBounds(),s;if(r&&a)return{min:t,max:i};let o=this.getMatchingVisibleMetas();for(let l=0,u=o.length;l<u;++l)s=o[l].controller.getMinMax(this,e),r||(t=Math.min(t,s.min)),a||(i=Math.max(i,s.max));return t=a&&t>i?i:t,i=r&&t>i?t:i,{min:ka(t,ka(i,t)),max:ka(i,ka(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){mn(this.options.beforeUpdate,[this])}update(e,t,i){let{beginAtZero:r,grace:a,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=jC(this,a,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=o<this.ticks.length;this._convertTicksToLabels(l?pM(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=SD(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){mn(this.options.afterUpdate,[this])}beforeSetDimensions(){mn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){mn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),mn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){mn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,i,r,a;for(i=0,r=e.length;i<r;i++)a=e[i],a.label=mn(t.callback,[a.value,i,e],this)}afterTickToLabelConversion(){mn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){mn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,i=this.ticks.length,r=t.minRotation||0,a=t.maxRotation,s=r,o,l,u;if(!this._isVisible()||!t.display||r>=a||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let p=this._getLabelSizes(),f=p.widest.width,g=p.highest.height,m=fr(this.chart.width-f,0,this.maxWidth);o=e.offset?this.maxWidth/i:m/(i-1),f+6>o&&(o=m/(i-(e.offset?.5:1)),l=this.maxHeight-Wh(e.grid)-t.padding-fM(e.title,this.chart.options.font),u=Math.sqrt(f*f+g*g),s=xm(Math.min(Math.asin(fr((p.highest.height+6)/o,-1,1)),Math.asin(fr(l/u,-1,1))-Math.asin(fr(g/u,-1,1)))),s=Math.max(r,Math.min(a,s))),this.labelRotation=s}afterCalculateLabelRotation(){mn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){mn(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:a}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){let l=fM(r,t.options.font);if(o?(e.width=this.maxWidth,e.height=Wh(a)+l):(e.height=this.maxHeight,e.width=Wh(a)+l),i.display&&this.ticks.length){let{first:u,last:p,widest:f,highest:g}=this._getLabelSizes(),m=i.padding*2,x=Ja(this.labelRotation),y=Math.cos(x),S=Math.sin(x);if(o){let b=i.mirror?0:S*f.width+y*g.height;e.height=Math.min(this.maxHeight,e.height+b+m)}else{let b=i.mirror?0:y*f.width+S*g.height;e.width=Math.min(this.maxWidth,e.width+b+m)}this._calculatePadding(u,p,S,y)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){let{ticks:{align:a,padding:s},position:o}=this.options,l=this.labelRotation!==0,u=o!=="top"&&this.axis==="x";if(this.isHorizontal()){let p=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1),g=0,m=0;l?u?(g=r*e.width,m=i*t.height):(g=i*e.height,m=r*t.width):a==="start"?m=t.width:a==="end"?g=e.width:a!=="inner"&&(g=e.width/2,m=t.width/2),this.paddingLeft=Math.max((g-p+s)*this.width/(this.width-p),0),this.paddingRight=Math.max((m-f+s)*this.width/(this.width-f),0)}else{let p=t.height/2,f=e.height/2;a==="start"?(p=0,f=e.height):a==="end"&&(p=t.height,f=0),this.paddingTop=p+s,this.paddingBottom=f+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){mn(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)Bi(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=pM(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length)}return e}_computeLabelSizes(e,t){let{ctx:i,_longestTextCache:r}=this,a=[],s=[],o=0,l=0,u,p,f,g,m,x,y,S,b,M,T;for(u=0;u<t;++u){if(g=e[u].label,m=this._resolveTickFontOptions(u),i.font=x=m.string,y=r[x]=r[x]||{data:{},gc:[]},S=m.lineHeight,b=M=0,!Bi(g)&&!fn(g))b=Fh(i,y.data,y.gc,b,g),M=S;else if(fn(g))for(p=0,f=g.length;p<f;++p)T=g[p],!Bi(T)&&!fn(T)&&(b=Fh(i,y.data,y.gc,b,T),M+=S);a.push(b),s.push(M),o=Math.max(b,o),l=Math.max(M,l)}ID(r,t);let I=a.indexOf(o),O=s.indexOf(l),U=N=>({width:a[N]||0,height:s[N]||0});return{first:U(0),last:U(t-1),widest:U(I),highest:U(O),widths:a,heights:s}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return kC(this._alignToPixels?_l(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let i=t[e];return i.$context||(i.$context=PD(this.getContext(),e,i))}return this.$context||(this.$context=DD(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=Ja(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),a=this._getLabelSizes(),s=e.autoSkipPadding||0,o=a?a.widest.width+s:0,l=a?a.highest.height+s:0;return this.isHorizontal()?l*i>o*r?o/i:l/r:l*r<o*i?l/i:o/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,i=this.chart,r=this.options,{grid:a,position:s}=r,o=a.offset,l=this.isHorizontal(),p=this.ticks.length+(o?1:0),f=Wh(a),g=[],m=a.setContext(this.getContext()),x=m.drawBorder?m.borderWidth:0,y=x/2,S=function(ct){return _l(i,ct,x)},b,M,T,I,O,U,N,B,R,F,P,V;if(s==="top")b=S(this.bottom),U=this.bottom-f,B=b-y,F=S(e.top)+y,V=e.bottom;else if(s==="bottom")b=S(this.top),F=e.top,V=S(e.bottom)-y,U=b+y,B=this.top+f;else if(s==="left")b=S(this.right),O=this.right-f,N=b-y,R=S(e.left)+y,P=e.right;else if(s==="right")b=S(this.left),R=e.left,P=S(e.right)-y,O=b+y,N=this.left+f;else if(t==="x"){if(s==="center")b=S((e.top+e.bottom)/2+.5);else if(ki(s)){let ct=Object.keys(s)[0],ot=s[ct];b=S(this.chart.scales[ct].getPixelForValue(ot))}F=e.top,V=e.bottom,U=b+y,B=U+f}else if(t==="y"){if(s==="center")b=S((e.left+e.right)/2);else if(ki(s)){let ct=Object.keys(s)[0],ot=s[ct];b=S(this.chart.scales[ct].getPixelForValue(ot))}O=b-y,N=O-f,R=e.left,P=e.right}let $=gi(r.ticks.maxTicksLimit,p),K=Math.max(1,Math.ceil(p/$));for(M=0;M<p;M+=K){let ct=a.setContext(this.getContext(M)),ot=ct.lineWidth,at=ct.color,Q=ct.borderDash||[],xt=ct.borderDashOffset,Mt=ct.tickWidth,qt=ct.tickColor,z=ct.tickBorderDash||[],nt=ct.tickBorderDashOffset;T=kD(this,M,o),T!==void 0&&(I=_l(i,T,ot),l?O=N=R=P=I:U=B=F=V=I,g.push({tx1:O,ty1:U,tx2:N,ty2:B,x1:R,y1:F,x2:P,y2:V,width:ot,color:at,borderDash:Q,borderDashOffset:xt,tickWidth:Mt,tickColor:qt,tickBorderDash:z,tickBorderDashOffset:nt}))}return this._ticksLength=p,this._borderValue=b,g}_computeLabelItems(e){let t=this.axis,i=this.options,{position:r,ticks:a}=i,s=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:u,padding:p,mirror:f}=a,g=Wh(i.grid),m=g+p,x=f?-p:m,y=-Ja(this.labelRotation),S=[],b,M,T,I,O,U,N,B,R,F,P,V,$="middle";if(r==="top")U=this.bottom-x,N=this._getXAxisLabelAlignment();else if(r==="bottom")U=this.top+x,N=this._getXAxisLabelAlignment();else if(r==="left"){let ct=this._getYAxisLabelAlignment(g);N=ct.textAlign,O=ct.x}else if(r==="right"){let ct=this._getYAxisLabelAlignment(g);N=ct.textAlign,O=ct.x}else if(t==="x"){if(r==="center")U=(e.top+e.bottom)/2+m;else if(ki(r)){let ct=Object.keys(r)[0],ot=r[ct];U=this.chart.scales[ct].getPixelForValue(ot)+m}N=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")O=(e.left+e.right)/2-m;else if(ki(r)){let ct=Object.keys(r)[0],ot=r[ct];O=this.chart.scales[ct].getPixelForValue(ot)}N=this._getYAxisLabelAlignment(g).textAlign}t==="y"&&(l==="start"?$="top":l==="end"&&($="bottom"));let K=this._getLabelSizes();for(b=0,M=o.length;b<M;++b){T=o[b],I=T.label;let ct=a.setContext(this.getContext(b));B=this.getPixelForTick(b)+a.labelOffset,R=this._resolveTickFontOptions(b),F=R.lineHeight,P=fn(I)?I.length:1;let ot=P/2,at=ct.color,Q=ct.textStrokeColor,xt=ct.textStrokeWidth,Mt=N;s?(O=B,N==="inner"&&(b===M-1?Mt=this.options.reverse?"left":"right":b===0?Mt=this.options.reverse?"right":"left":Mt="center"),r==="top"?u==="near"||y!==0?V=-P*F+F/2:u==="center"?V=-K.highest.height/2-ot*F+F:V=-K.highest.height+F/2:u==="near"||y!==0?V=F/2:u==="center"?V=K.highest.height/2-ot*F:V=K.highest.height-P*F,f&&(V*=-1)):(U=B,V=(1-P)*F/2);let qt;if(ct.showLabelBackdrop){let z=Dr(ct.backdropPadding),nt=K.heights[b],Z=K.widths[b],st=U+V-z.top,pt=O-z.left;switch($){case"middle":st-=nt/2;break;case"bottom":st-=nt;break}switch(N){case"center":pt-=Z/2;break;case"right":pt-=Z;break}qt={left:pt,top:st,width:Z+z.width,height:nt+z.height,color:ct.backdropColor}}S.push({rotation:y,label:I,font:R,color:at,strokeColor:Q,strokeWidth:xt,textOffset:V,textAlign:Mt,textBaseline:$,translation:[O,U],backdrop:qt})}return S}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-Ja(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:i,mirror:r,padding:a}}=this.options,s=this._getLabelSizes(),o=e+a,l=s.widest.width,u,p;return t==="left"?r?(p=this.right+a,i==="near"?u="left":i==="center"?(u="center",p+=l/2):(u="right",p+=l)):(p=this.right-o,i==="near"?u="right":i==="center"?(u="center",p-=l/2):(u="left",p=this.left)):t==="right"?r?(p=this.left+a,i==="near"?u="right":i==="center"?(u="center",p-=l/2):(u="left",p-=l)):(p=this.left+o,i==="near"?u="left":i==="center"?(u="center",p+=l/2):(u="right",p=this.right)):u="right",{textAlign:u,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:i,top:r,width:a,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,a,s),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let r=this.ticks.findIndex(a=>a.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),a,s,o=(l,u,p)=>{!p.width||!p.color||(i.save(),i.lineWidth=p.width,i.strokeStyle=p.color,i.setLineDash(p.borderDash||[]),i.lineDashOffset=p.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(t.display)for(a=0,s=r.length;a<s;++a){let l=r[a];t.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{grid:i}}=this,r=i.setContext(this.getContext()),a=i.drawBorder?r.borderWidth:0;if(!a)return;let s=i.setContext(this.getContext(0)).lineWidth,o=this._borderValue,l,u,p,f;this.isHorizontal()?(l=_l(e,this.left,a)-a/2,u=_l(e,this.right,s)+s/2,p=f=o):(p=_l(e,this.top,a)-a/2,f=_l(e,this.bottom,s)+s/2,l=u=o),t.save(),t.lineWidth=r.borderWidth,t.strokeStyle=r.borderColor,t.beginPath(),t.moveTo(l,p),t.lineTo(u,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&Uh(i,r);let a=this._labelItems||(this._labelItems=this._computeLabelItems(e)),s,o;for(s=0,o=a.length;s<o;++s){let l=a[s],u=l.font,p=l.label;l.backdrop&&(i.fillStyle=l.backdrop.color,i.fillRect(l.backdrop.left,l.backdrop.top,l.backdrop.width,l.backdrop.height));let f=l.textOffset;vl(i,p,0,f,u,l)}r&&zh(i)}drawTitle(){let{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;let a=lr(i.font),s=Dr(i.padding),o=i.align,l=a.lineHeight/2;t==="bottom"||t==="center"||ki(t)?(l+=s.bottom,fn(i.text)&&(l+=a.lineHeight*(i.text.length-1))):l+=s.top;let{titleX:u,titleY:p,maxWidth:f,rotation:g}=RD(this,l,t,o);vl(e,i.text,0,0,a,{color:i.color,maxWidth:f,rotation:g,textAlign:LD(o,t,r),textBaseline:"middle",translation:[u,p]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,i=gi(e.grid&&e.grid.z,-1);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i+1,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],a,s;for(a=0,s=t.length;a<s;++a){let o=t[a];o[i]===this.id&&(!e||o.type===e)&&r.push(o)}return r}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return lr(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},qd=class{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),i;FD(t)&&(i=this.register(t));let r=this.items,a=e.id,s=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in r||(r[a]=e,OD(e,s,i),this.override&&wi.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){let t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in wi[r]&&(delete wi[r][i],this.override&&delete gl[i])}};function OD(n,e,t){let i=Nd(Object.create(null),[t?wi.get(t):{},wi.get(e),n.defaults]);wi.set(e,i),n.defaultRoutes&&ND(e,n.defaultRoutes),n.descriptors&&wi.describe(e,n.descriptors)}function ND(n,e){Object.keys(e).forEach(t=>{let i=t.split("."),r=i.pop(),a=[n].concat(i).join("."),s=e[t].split("."),o=s.pop(),l=s.join(".");wi.route(a,r,l,o)})}function FD(n){return"id"in n&&"defaults"in n}var yx=class{constructor(){this.controllers=new qd(Hs,"datasets",!0),this.elements=new qd(Da,"elements"),this.plugins=new qd(Object,"plugins"),this.scales=new qd(Sc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{let a=i||this._getRegistryForType(r);i||a.isForType(r)||a===this.plugins&&r.id?this._exec(e,a,r):Zi(r,s=>{let o=i||this._getRegistryForType(s);this._exec(e,o,s)})})}_exec(e,t,i){let r=vm(e);mn(i["before"+r],[],i),t[e](i),mn(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){let r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}},zs=new yx,BD=(()=>{class n extends Hs{update(t){let i=this._cachedMeta,{data:r=[]}=i,a=this.chart._animationsDisabled,{start:s,count:o}=jv(i,r,a);if(this._drawStart=s,this._drawCount=o,Gv(i)&&(s=0,o=r.length),this.options.showLine){let{dataset:l,_dataset:u}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!u._decimated,l.points=r;let p=this.resolveDatasetElementOptions(t);p.segment=this.options.segment,this.updateElement(l,void 0,{animated:!a,options:p},t)}this.updateElements(r,s,o,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=zs.getElement("line")),super.addElements()}updateElements(t,i,r,a){let s=a==="reset",{iScale:o,vScale:l,_stacked:u,_dataset:p}=this._cachedMeta,f=this.resolveDataElementOptions(i,a),g=this.getSharedOptions(f),m=this.includeOptions(a,g),x=o.axis,y=l.axis,{spanGaps:S,segment:b}=this.options,M=xc(S)?S:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||s||a==="none",I=i>0&&this.getParsed(i-1);for(let O=i;O<i+r;++O){let U=t[O],N=this.getParsed(O),B=T?U:{},R=Bi(N[y]),F=B[x]=o.getPixelForValue(N[x],O),P=B[y]=s||R?l.getBasePixel():l.getPixelForValue(u?this.applyStack(l,N,u):N[y],O);B.skip=isNaN(F)||isNaN(P)||R,B.stop=O>0&&Math.abs(N[x]-I[x])>M,b&&(B.parsed=N,B.raw=p.data[O]),m&&(B.options=g||this.resolveDataElementOptions(O,U.active?"active":a)),T||this.updateElement(U,O,B,a),I=N}this.updateSharedOptions(g,a,f)}getMaxOverflow(){let t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let l=0;for(let u=i.length-1;u>=0;--u)l=Math.max(l,i[u].size(this.resolveDataElementOptions(u))/2);return l>0&&l}let r=t.dataset,a=r.options&&r.options.borderWidth||0;if(!i.length)return a;let s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(a,s,o)/2}}return n.id="scatter",n.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},n.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(e){return"("+e.label+", "+e.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}},n})(),VD=Object.freeze({__proto__:null,BarController:fD,BubbleController:mD,DoughnutController:KM,LineController:_D,PolarAreaController:vD,PieController:xD,RadarController:bD,ScatterController:BD});function yc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var UD=(()=>{class n{constructor(t){this.options=t||{}}init(t){}formats(){return yc()}parse(t,i){return yc()}format(t,i){return yc()}add(t,i,r){return yc()}diff(t,i,r){return yc()}startOf(t,i,r){return yc()}endOf(t,i){return yc()}}return n.override=function(e){Object.assign(n.prototype,e)},n})(),zD={_date:UD};function HD(n,e,t,i){let{controller:r,data:a,_sorted:s}=n,o=r._cachedMeta.iScale;if(o&&e===o.axis&&e!=="r"&&s&&a.length){let l=o._reversePixels?IC:Fs;if(i){if(r._sharedOptions){let u=a[0],p=typeof u.getRange=="function"&&u.getRange(e);if(p){let f=l(a,e,t-p),g=l(a,e,t+p);return{lo:f.lo,hi:g.hi}}}}else return l(a,e,t)}return{lo:0,hi:a.length-1}}function tp(n,e,t,i,r){let a=n.getSortedVisibleDatasetMetas(),s=t[e];for(let o=0,l=a.length;o<l;++o){let{index:u,data:p}=a[o],{lo:f,hi:g}=HD(a[o],e,s,r);for(let m=f;m<=g;++m){let x=p[m];x.skip||i(x,u,m)}}}function WD(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){let a=e?Math.abs(i.x-r.x):0,s=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}}function px(n,e,t,i,r){let a=[];return!r&&!n.isPointInArea(e)||tp(n,t,e,function(o,l,u){!r&&!Fd(o,n.chartArea,0)||o.inRange(e.x,e.y,i)&&a.push({element:o,datasetIndex:l,index:u})},!0),a}function jD(n,e,t,i){let r=[];function a(s,o,l){let{startAngle:u,endAngle:p}=s.getProps(["startAngle","endAngle"],i),{angle:f}=Vv(s,{x:e.x,y:e.y});zd(f,u,p)&&r.push({element:s,datasetIndex:o,index:l})}return tp(n,t,e,a),r}function GD(n,e,t,i,r,a){let s=[],o=WD(t),l=Number.POSITIVE_INFINITY;function u(p,f,g){let m=p.inRange(e.x,e.y,r);if(i&&!m)return;let x=p.getCenterPoint(r);if(!(!!a||n.isPointInArea(x))&&!m)return;let S=o(e,x);S<l?(s=[{element:p,datasetIndex:f,index:g}],l=S):S===l&&s.push({element:p,datasetIndex:f,index:g})}return tp(n,t,e,u),s}function fx(n,e,t,i,r,a){return!a&&!n.isPointInArea(e)?[]:t==="r"&&!i?jD(n,e,t,r):GD(n,e,t,i,r,a)}function mM(n,e,t,i,r){let a=[],s=t==="x"?"inXRange":"inYRange",o=!1;return tp(n,t,e,(l,u,p)=>{l[s](e[t],r)&&(a.push({element:l,datasetIndex:u,index:p}),o=o||l.inRange(e.x,e.y,r))}),i&&!o?[]:a}var qD={evaluateInteractionItems:tp,modes:{index(n,e,t,i){let r=bl(e,n),a=t.axis||"x",s=t.includeInvisible||!1,o=t.intersect?px(n,r,a,i,s):fx(n,r,a,!1,i,s),l=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{let p=o[0].index,f=u.data[p];f&&!f.skip&&l.push({element:f,datasetIndex:u.index,index:p})}),l):[]},dataset(n,e,t,i){let r=bl(e,n),a=t.axis||"xy",s=t.includeInvisible||!1,o=t.intersect?px(n,r,a,i,s):fx(n,r,a,!1,i,s);if(o.length>0){let l=o[0].datasetIndex,u=n.getDatasetMeta(l).data;o=[];for(let p=0;p<u.length;++p)o.push({element:u[p],datasetIndex:l,index:p})}return o},point(n,e,t,i){let r=bl(e,n),a=t.axis||"xy",s=t.includeInvisible||!1;return px(n,r,a,i,s)},nearest(n,e,t,i){let r=bl(e,n),a=t.axis||"xy",s=t.includeInvisible||!1;return fx(n,r,a,t.intersect,i,s)},x(n,e,t,i){let r=bl(e,n);return mM(n,r,"x",t.intersect,i)},y(n,e,t,i){let r=bl(e,n);return mM(n,r,"y",t.intersect,i)}}},JM=["left","top","right","bottom"];function jh(n,e){return n.filter(t=>t.pos===e)}function gM(n,e){return n.filter(t=>JM.indexOf(t.pos)===-1&&t.box.axis===e)}function Gh(n,e){return n.sort((t,i)=>{let r=e?i:t,a=e?t:i;return r.weight===a.weight?r.index-a.index:r.weight-a.weight})}function XD(n){let e=[],t,i,r,a,s,o;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:a,options:{stack:s,stackWeight:o=1}}=r,e.push({index:t,box:r,pos:a,horizontal:r.isHorizontal(),weight:r.weight,stack:s&&a+s,stackWeight:o});return e}function YD(n){let e={};for(let t of n){let{stack:i,pos:r,stackWeight:a}=t;if(!i||!JM.includes(r))continue;let s=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=a}return e}function $D(n,e){let t=YD(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e,a,s,o;for(a=0,s=n.length;a<s;++a){o=n[a];let{fullSize:l}=o.box,u=t[o.stack],p=u&&o.stackWeight/u.weight;o.horizontal?(o.width=p?p*i:l&&e.availableWidth,o.height=r):(o.width=i,o.height=p?p*r:l&&e.availableHeight)}return t}function KD(n){let e=XD(n),t=Gh(e.filter(u=>u.box.fullSize),!0),i=Gh(jh(e,"left"),!0),r=Gh(jh(e,"right")),a=Gh(jh(e,"top"),!0),s=Gh(jh(e,"bottom")),o=gM(e,"x"),l=gM(e,"y");return{fullSize:t,leftAndTop:i.concat(a),rightAndBottom:r.concat(l).concat(s).concat(o),chartArea:jh(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:a.concat(s).concat(o)}}function _M(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function QM(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function ZD(n,e,t,i){let{pos:r,box:a}=t,s=n.maxPadding;if(!ki(r)){t.size&&(n[r]-=t.size);let f=i[t.stack]||{size:0,count:1};f.size=Math.max(f.size,t.horizontal?a.height:a.width),t.size=f.size/f.count,n[r]+=t.size}a.getPadding&&QM(s,a.getPadding());let o=Math.max(0,e.outerWidth-_M(s,n,"left","right")),l=Math.max(0,e.outerHeight-_M(s,n,"top","bottom")),u=o!==n.w,p=l!==n.h;return n.w=o,n.h=l,t.horizontal?{same:u,other:p}:{same:p,other:u}}function JD(n){let e=n.maxPadding;function t(i){let r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function QD(n,e){let t=e.maxPadding;function i(r){let a={left:0,top:0,right:0,bottom:0};return r.forEach(s=>{a[s]=Math.max(e[s],t[s])}),a}return i(n?["left","right"]:["top","bottom"])}function Xh(n,e,t,i){let r=[],a,s,o,l,u,p;for(a=0,s=n.length,u=0;a<s;++a){o=n[a],l=o.box,l.update(o.width||e.w,o.height||e.h,QD(o.horizontal,e));let{same:f,other:g}=ZD(e,t,o,i);u|=f&&r.length,p=p||g,l.fullSize||r.push(o)}return u&&Xh(r,e,t,i)||p}function km(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function vM(n,e,t,i){let r=t.padding,{x:a,y:s}=e;for(let o of n){let l=o.box,u=i[o.stack]||{count:1,placed:0,weight:1},p=o.stackWeight/u.weight||1;if(o.horizontal){let f=e.w*p,g=u.size||l.height;Ta(u.start)&&(s=u.start),l.fullSize?km(l,r.left,s,t.outerWidth-r.right-r.left,g):km(l,e.left+u.placed,s,f,g),u.start=s,u.placed+=f,s=l.bottom}else{let f=e.h*p,g=u.size||l.width;Ta(u.start)&&(a=u.start),l.fullSize?km(l,a,r.top,g,t.outerHeight-r.bottom-r.top):km(l,a,e.top+u.placed,g,f),u.start=a,u.placed+=f,a=l.right}}e.x=a,e.y=s}wi.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Ur={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;let r=Dr(n.options.layout.padding),a=Math.max(e-r.width,0),s=Math.max(t-r.height,0),o=KD(n.boxes),l=o.vertical,u=o.horizontal;Zi(n.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});let p=l.reduce((y,S)=>S.box.options&&S.box.options.display===!1?y:y+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:a,availableHeight:s,vBoxMaxWidth:a/2/p,hBoxMaxHeight:s/2}),g=Object.assign({},r);QM(g,Dr(i));let m=Object.assign({maxPadding:g,w:a,h:s,x:r.left,y:r.top},r),x=$D(l.concat(u),f);Xh(o.fullSize,m,f,x),Xh(l,m,f,x),Xh(u,m,f,x)&&Xh(l,m,f,x),JD(m),vM(o.leftAndTop,m,f,x),m.x+=m.w,m.y+=m.h,vM(o.rightAndBottom,m,f,x),n.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Zi(o.chartArea,y=>{let S=y.box;Object.assign(S,n.chartArea),S.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}},Nm=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}},Sx=class extends Nm{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},Rm="$chartjs",tP={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},xM=n=>n===null||n==="";function eP(n,e){let t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[Rm]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",xM(r)){let a=ax(n,"width");a!==void 0&&(n.width=a)}if(xM(i))if(n.style.height==="")n.height=n.width/(e||2);else{let a=ax(n,"height");a!==void 0&&(n.height=a)}return n}var tE=ZC?{passive:!0}:!1;function iP(n,e,t){n.addEventListener(e,t,tE)}function nP(n,e,t){n.canvas.removeEventListener(e,t,tE)}function rP(n,e){let t=tP[n.type]||n.type,{x:i,y:r}=bl(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Fm(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function aP(n,e,t){let i=n.canvas,r=new MutationObserver(a=>{let s=!1;for(let o of a)s=s||Fm(o.addedNodes,i),s=s&&!Fm(o.removedNodes,i);s&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function sP(n,e,t){let i=n.canvas,r=new MutationObserver(a=>{let s=!1;for(let o of a)s=s||Fm(o.removedNodes,i),s=s&&!Fm(o.addedNodes,i);s&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}var $h=new Map,bM=0;function eE(){let n=window.devicePixelRatio;n!==bM&&(bM=n,$h.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function oP(n,e){$h.size||window.addEventListener("resize",eE),$h.set(n,e)}function lP(n){$h.delete(n),$h.size||window.removeEventListener("resize",eE)}function cP(n,e,t){let i=n.canvas,r=i&&Em(i);if(!r)return;let a=Wv((o,l)=>{let u=r.clientWidth;t(o,l),u<r.clientWidth&&t()},window),s=new ResizeObserver(o=>{let l=o[0],u=l.contentRect.width,p=l.contentRect.height;u===0&&p===0||a(u,p)});return s.observe(r),oP(n,a),s}function mx(n,e,t){t&&t.disconnect(),e==="resize"&&lP(n)}function dP(n,e,t){let i=n.canvas,r=Wv(a=>{n.ctx!==null&&t(rP(a,n))},n,a=>{let s=a[0];return[s,s.offsetX,s.offsetY]});return iP(i,e,r),r}var wx=class extends Nm{acquireContext(e,t){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(eP(e,t),i):null}releaseContext(e){let t=e.canvas;if(!t[Rm])return!1;let i=t[Rm].initial;["height","width"].forEach(a=>{let s=i[a];Bi(s)?t.removeAttribute(a):t.setAttribute(a,s)});let r=i.style||{};return Object.keys(r).forEach(a=>{t.style[a]=r[a]}),t.width=t.width,delete t[Rm],!0}addEventListener(e,t,i){this.removeEventListener(e,t);let r=e.$proxies||(e.$proxies={}),s={attach:aP,detach:sP,resize:cP}[t]||dP;r[t]=s(e,t,i)}removeEventListener(e,t){let i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:mx,detach:mx,resize:mx}[t]||nP)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return KC(e,t,i,r)}isAttached(e){let t=Em(e);return!!(t&&t.isConnected)}};function uP(n){return!nx()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Sx:wx}var Cx=class{constructor(){this._init=[]}notify(e,t,i,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let a=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(a,e,t,i);return t==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,i,r){r=r||{};for(let a of e){let s=a.plugin,o=s[i],l=[t,r,a.options];if(mn(o,l,s)===!1&&r.cancelable)return!1}return!0}invalidate(){Bi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let i=e&&e.config,r=gi(i.options&&i.options.plugins,{}),a=hP(i);return r===!1&&!t?[]:fP(e,a,r,t)}_notifyStateChanges(e){let t=this._oldCache||[],i=this._cache,r=(a,s)=>a.filter(o=>!s.some(l=>o.plugin.id===l.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}};function hP(n){let e={},t=[],i=Object.keys(zs.plugins.items);for(let a=0;a<i.length;a++)t.push(zs.getPlugin(i[a]));let r=n.plugins||[];for(let a=0;a<r.length;a++){let s=r[a];t.indexOf(s)===-1&&(t.push(s),e[s.id]=!0)}return{plugins:t,localIds:e}}function pP(n,e){return!e&&n===!1?null:n===!0?{}:n}function fP(n,{plugins:e,localIds:t},i,r){let a=[],s=n.getContext();for(let o of e){let l=o.id,u=pP(i[l],r);u!==null&&a.push({plugin:o,options:mP(n.config,{plugin:o,local:t[l]},u,s)})}return a}function mP(n,{plugin:e,local:t},i,r){let a=n.pluginScopeKeys(e),s=n.getOptionScopes(i,a);return t&&e.defaults&&s.push(e.defaults),n.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Mx(n,e){let t=wi.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function gP(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function _P(n,e){return n===e?"_index_":"_value_"}function vP(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Ex(n,e){return n==="x"||n==="y"?n:e.axis||vP(e.position)||n.charAt(0).toLowerCase()}function xP(n,e){let t=gl[n.type]||{scales:{}},i=e.scales||{},r=Mx(n.type,e),a=Object.create(null),s=Object.create(null);return Object.keys(i).forEach(o=>{let l=i[o];if(!ki(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let u=Ex(o,l),p=_P(u,r),f=t.scales||{};a[u]=a[u]||o,s[o]=Vd(Object.create(null),[{axis:u},l,f[u],f[p]])}),n.data.datasets.forEach(o=>{let l=o.type||n.type,u=o.indexAxis||Mx(l,e),f=(gl[l]||{}).scales||{};Object.keys(f).forEach(g=>{let m=gP(g,u),x=o[m+"AxisID"]||a[m]||m;s[x]=s[x]||Object.create(null),Vd(s[x],[{axis:m},i[x],f[g]])})}),Object.keys(s).forEach(o=>{let l=s[o];Vd(l,[wi.scales[l.type],wi.scale])}),s}function iE(n){let e=n.options||(n.options={});e.plugins=gi(e.plugins,{}),e.scales=xP(n,e)}function nE(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function bP(n){return n=n||{},n.data=nE(n.data),iE(n),n}var yM=new Map,rE=new Set;function Im(n,e){let t=yM.get(n);return t||(t=e(),yM.set(n,t),rE.add(t)),t}var qh=(n,e,t)=>{let i=bo(e,t);i!==void 0&&n.add(i)},Ax=class{constructor(e){this._config=bP(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=nE(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),iE(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Im(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Im(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Im(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,i=this.type;return Im(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let i=this._scopeCache,r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){let{options:r,type:a}=this,s=this._cachedScopes(e,i),o=s.get(t);if(o)return o;let l=new Set;t.forEach(p=>{e&&(l.add(e),p.forEach(f=>qh(l,e,f))),p.forEach(f=>qh(l,r,f)),p.forEach(f=>qh(l,gl[a]||{},f)),p.forEach(f=>qh(l,wi,f)),p.forEach(f=>qh(l,Sm,f))});let u=Array.from(l);return u.length===0&&u.push(Object.create(null)),rE.has(t)&&s.set(t,u),u}chartOptionScopes(){let{options:e,type:t}=this;return[e,gl[t]||{},wi.datasets[t]||{},{type:t},wi,Sm]}resolveNamedOptions(e,t,i,r=[""]){let a={$shared:!0},{resolver:s,subPrefixes:o}=SM(this._resolverCache,e,r),l=s;if(SP(s,t)){a.$shared=!1,i=xo(i)?i():i;let u=this.createResolver(e,i,o);l=vc(s,i,u)}for(let u of t)a[u]=l[u];return a}createResolver(e,t,i=[""],r){let{resolver:a}=SM(this._resolverCache,e,i);return ki(t)?vc(a,t,void 0,r):a}};function SM(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));let r=t.join(),a=i.get(r);return a||(a={resolver:Mm(e,t),subPrefixes:t.filter(o=>!o.toLowerCase().includes("hover"))},i.set(r,a)),a}var yP=n=>ki(n)&&Object.getOwnPropertyNames(n).reduce((e,t)=>e||xo(n[t]),!1);function SP(n,e){let{isScriptable:t,isIndexable:i}=Qv(n);for(let r of e){let a=t(r),s=i(r),o=(s||a)&&n[r];if(a&&(xo(o)||yP(o))||s&&fn(o))return!0}return!1}var wP="3.9.1",CP=["top","bottom","left","right","chartArea"];function wM(n,e){return n==="top"||n==="bottom"||CP.indexOf(n)===-1&&e==="x"}function CM(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function MM(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),mn(t&&t.onComplete,[n],e)}function MP(n){let e=n.chart,t=e.options.animation;mn(t&&t.onProgress,[n],e)}function aE(n){return nx()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var Bm={},sE=n=>{let e=aE(n);return Object.values(Bm).filter(t=>t.canvas===e).pop()};function EP(n,e,t){let i=Object.keys(n);for(let r of i){let a=+r;if(a>=e){let s=n[r];delete n[r],(t>0||a>e)&&(n[a+t]=s)}}}function AP(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}var Co=class{constructor(e,t){let i=this.config=new Ax(t),r=aE(e),a=sE(r);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");let s=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||uP(r)),this.platform.updateConfig(i);let o=this.platform.acquireContext(r,s.aspectRatio),l=o&&o.canvas,u=l&&l.height,p=l&&l.width;if(this.id=wC(),this.ctx=o,this.canvas=l,this.width=p,this.height=u,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Cx,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=RC(f=>this.update(f),s.resizeDelay||0),this._dataChanges=[],Bm[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}So.listen(this,"complete",MM),So.listen(this,"progress",MP),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:r,_aspectRatio:a}=this;return Bi(e)?t&&a?a:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():rx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Kv(this.canvas,this.ctx),this}stop(){return So.stop(this),this}resize(e,t){So.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){let i=this.options,r=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,e,t,a),o=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,rx(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),mn(i.onResize,[this,s],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let t=this.options.scales||{};Zi(t,(i,r)=>{i.id=r})}buildOrUpdateScales(){let e=this.options,t=e.scales,i=this.scales,r=Object.keys(i).reduce((s,o)=>(s[o]=!1,s),{}),a=[];t&&(a=a.concat(Object.keys(t).map(s=>{let o=t[s],l=Ex(s,o),u=l==="r",p=l==="x";return{options:o,dposition:u?"chartArea":p?"bottom":"left",dtype:u?"radialLinear":p?"category":"linear"}}))),Zi(a,s=>{let o=s.options,l=o.id,u=Ex(l,o),p=gi(o.type,s.dtype);(o.position===void 0||wM(o.position,u)!==wM(s.dposition))&&(o.position=s.dposition),r[l]=!0;let f=null;if(l in i&&i[l].type===p)f=i[l];else{let g=zs.getScale(p);f=new g({id:l,type:p,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(o,e)}),Zi(r,(s,o)=>{s||delete i[o]}),Zi(i,s=>{Ur.configure(this,s,s.options),Ur.addBox(this,s)})}_updateMetasets(){let e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((r,a)=>r.index-a.index),i>t){for(let r=t;r<i;++r)this._destroyDatasetMeta(r);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(CM("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,r)=>{t.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){let e=[],t=this.data.datasets,i,r;for(this._removeUnreferencedMetasets(),i=0,r=t.length;i<r;i++){let a=t[i],s=this.getDatasetMeta(i),o=a.type||this.config.type;if(s.type&&s.type!==o&&(this._destroyDatasetMeta(i),s=this.getDatasetMeta(i)),s.type=o,s.indexAxis=a.indexAxis||Mx(o,this.options),s.order=a.order||0,s.index=i,s.label=""+a.label,s.visible=this.isDatasetVisible(i),s.controller)s.controller.updateIndex(i),s.controller.linkScales();else{let l=zs.getController(o),{datasetElementType:u,dataElementType:p}=wi.datasets[o];Object.assign(l.prototype,{dataElementType:zs.getElement(p),datasetElementType:u&&zs.getElement(u)}),s.controller=new l(this,i),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){Zi(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let t=this.config;t.update();let i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let u=0,p=this.data.datasets.length;u<p;u++){let{controller:f}=this.getDatasetMeta(u),g=!r&&a.indexOf(f)===-1;f.buildOrUpdateElements(g),s=Math.max(+f.getMaxOverflow(),s)}s=this._minPadding=i.layout.autoPadding?s:0,this._updateLayout(s),r||Zi(a,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(CM("z","_idx"));let{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Zi(this.scales,e=>{Ur.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Ov(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(let{method:i,start:r,count:a}of t){let s=i==="_removeElements"?-a:a;EP(e,r,s)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let t=this.data.datasets.length,i=a=>new Set(e.filter(s=>s[0]===a).map((s,o)=>o+","+s.splice(1).join(","))),r=i(0);for(let a=1;a<t;a++)if(!Ov(r,i(a)))return;return Array.from(r).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ur.update(this,this.width,this.height,e);let t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],Zi(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,a)=>{r._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,xo(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){let i=this.getDatasetMeta(e),r={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(So.has(this)?this.attached&&!So.running(this)&&So.start(this):(this.draw(),MM({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:i,height:r}=this._resizeBeforeDraw;this._resize(i,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let t=this._sortedMetasets,i=[],r,a;for(r=0,a=t.length;r<a;++r){let s=t[r];(!e||s.visible)&&i.push(s)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let t=this.ctx,i=e._clip,r=!i.disabled,a=this.chartArea,s={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&Uh(t,{left:i.left===!1?0:a.left-i.left,right:i.right===!1?this.width:a.right+i.right,top:i.top===!1?0:a.top-i.top,bottom:i.bottom===!1?this.height:a.bottom+i.bottom}),e.controller.draw(),r&&zh(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Fd(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,r){let a=qD.modes[t];return typeof a=="function"?a(this,e,i,r):[]}getDatasetMeta(e){let t=this.data.datasets[e],i=this._metasets,r=i.filter(a=>a&&a._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=yo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let t=this.data.datasets[e];if(!t)return!1;let i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){let i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){let r=i?"show":"hide",a=this.getDatasetMeta(e),s=a.controller._resolveAnimations(void 0,r);Ta(t)?(a.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),s.update(a,{visible:i}),this.update(o=>o.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){let t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),So.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Kv(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete Bm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,t=this.platform,i=(a,s)=>{t.addEventListener(this,a,s),e[a]=s},r=(a,s,o)=>{a.offsetX=s,a.offsetY=o,this._eventHandler(a)};Zi(this.options.events,a=>i(a,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,t=this.platform,i=(l,u)=>{t.addEventListener(this,l,u),e[l]=u},r=(l,u)=>{e[l]&&(t.removeEventListener(this,l,u),delete e[l])},a=(l,u)=>{this.canvas&&this.resize(l,u)},s,o=()=>{r("attach",o),this.attached=!0,this.resize(),i("resize",a),i("detach",s)};s=()=>{this.attached=!1,r("resize",a),this._stop(),this._resize(0,0),i("attach",o)},t.isAttached(this.canvas)?o():s()}unbindEvents(){Zi(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Zi(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){let r=i?"set":"remove",a,s,o,l;for(t==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+r+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){s=e[o];let u=s&&this.getDatasetMeta(s.datasetIndex).controller;u&&u[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let t=this._active||[],i=e.map(({datasetIndex:a,index:s})=>{let o=this.getDatasetMeta(a);if(!o)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:o.data[s],index:s}});!Bh(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}_updateHoverStyles(e,t,i){let r=this.options.hover,a=(l,u)=>l.filter(p=>!u.some(f=>p.datasetIndex===f.datasetIndex&&p.index===f.index)),s=a(t,e),o=i?e:a(e,t);s.length&&this.updateHoverStyle(s,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(e,t){let i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=s=>(s.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;let a=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(a||i.changed)&&this.render(),this}_handleEvent(e,t,i){let{_active:r=[],options:a}=this,s=t,o=this._getActiveElements(e,r,i,s),l=EC(e),u=AP(e,this._lastEvent,i,l);i&&(this._lastEvent=null,mn(a.onHover,[e,o,this],this),l&&mn(a.onClick,[e,o,this],this));let p=!Bh(o,r);return(p||t)&&(this._active=o,this._updateHoverStyles(o,r,t)),this._lastEvent=u,p}_getActiveElements(e,t,i,r){if(e.type==="mouseout")return[];if(!i)return t;let a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,r)}},EM=()=>Zi(Co.instances,n=>n._plugins.invalidate()),yl=!0;Object.defineProperties(Co,{defaults:{enumerable:yl,value:wi},instances:{enumerable:yl,value:Bm},overrides:{enumerable:yl,value:gl},registry:{enumerable:yl,value:zs},version:{enumerable:yl,value:wP},getChart:{enumerable:yl,value:sE},register:{enumerable:yl,value:(...n)=>{zs.add(...n),EM()}},unregister:{enumerable:yl,value:(...n)=>{zs.remove(...n),EM()}}});function oE(n,e,t){let{startAngle:i,pixelMargin:r,x:a,y:s,outerRadius:o,innerRadius:l}=e,u=r/o;n.beginPath(),n.arc(a,s,o,i-u,t+u),l>r?(u=r/l,n.arc(a,s,l,t+u,i-u,!0)):n.arc(a,s,r,t+Nn,i-Nn),n.closePath(),n.clip()}function TP(n){return Cm(n,["outerStart","outerEnd","innerStart","innerEnd"])}function kP(n,e,t,i){let r=TP(n.options.borderRadius),a=(t-e)/2,s=Math.min(a,i*e/2),o=l=>{let u=(t-Math.min(a,l))*i/2;return fr(l,0,Math.min(a,u))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:fr(r.innerStart,0,s),innerEnd:fr(r.innerEnd,0,s)}}function Gd(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function Tx(n,e,t,i,r,a){let{x:s,y:o,startAngle:l,pixelMargin:u,innerRadius:p}=e,f=Math.max(e.outerRadius+i+t-u,0),g=p>0?p+i+t+u:0,m=0,x=r-l;if(i){let ct=p>0?p-i:0,ot=f>0?f-i:0,at=(ct+ot)/2,Q=at!==0?x*at/(at+i):x;m=(x-Q)/2}let y=Math.max(.001,x*f-t/wn)/f,S=(x-y)/2,b=l+S+m,M=r-S-m,{outerStart:T,outerEnd:I,innerStart:O,innerEnd:U}=kP(e,g,f,M-b),N=f-T,B=f-I,R=b+T/N,F=M-I/B,P=g+O,V=g+U,$=b+O/P,K=M-U/V;if(n.beginPath(),a){if(n.arc(s,o,f,R,F),I>0){let at=Gd(B,F,s,o);n.arc(at.x,at.y,I,F,M+Nn)}let ct=Gd(V,M,s,o);if(n.lineTo(ct.x,ct.y),U>0){let at=Gd(V,K,s,o);n.arc(at.x,at.y,U,M+Nn,K+Math.PI)}if(n.arc(s,o,g,M-U/g,b+O/g,!0),O>0){let at=Gd(P,$,s,o);n.arc(at.x,at.y,O,$+Math.PI,b-Nn)}let ot=Gd(N,b,s,o);if(n.lineTo(ot.x,ot.y),T>0){let at=Gd(N,R,s,o);n.arc(at.x,at.y,T,b-Nn,R)}}else{n.moveTo(s,o);let ct=Math.cos(R)*f+s,ot=Math.sin(R)*f+o;n.lineTo(ct,ot);let at=Math.cos(F)*f+s,Q=Math.sin(F)*f+o;n.lineTo(at,Q)}n.closePath()}function IP(n,e,t,i,r){let{fullCircles:a,startAngle:s,circumference:o}=e,l=e.endAngle;if(a){Tx(n,e,t,i,s+en,r);for(let u=0;u<a;++u)n.fill();isNaN(o)||(l=s+o%en,o%en===0&&(l+=en))}return Tx(n,e,t,i,l,r),n.fill(),l}function DP(n,e,t){let{x:i,y:r,startAngle:a,pixelMargin:s,fullCircles:o}=e,l=Math.max(e.outerRadius-s,0),u=e.innerRadius+s,p;for(t&&oE(n,e,a+en),n.beginPath(),n.arc(i,r,u,a+en,a,!0),p=0;p<o;++p)n.stroke();for(n.beginPath(),n.arc(i,r,l,a,a+en),p=0;p<o;++p)n.stroke()}function PP(n,e,t,i,r,a){let{options:s}=e,{borderWidth:o,borderJoinStyle:l}=s,u=s.borderAlign==="inner";o&&(u?(n.lineWidth=o*2,n.lineJoin=l||"round"):(n.lineWidth=o,n.lineJoin=l||"bevel"),e.fullCircles&&DP(n,e,u),u&&oE(n,e,r),Tx(n,e,t,i,r,a),n.stroke())}var Xd=class extends Da{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){let r=this.getProps(["x","y"],i),{angle:a,distance:s}=Vv(r,{x:e,y:t}),{startAngle:o,endAngle:l,innerRadius:u,outerRadius:p,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),g=this.options.spacing/2,x=gi(f,l-o)>=en||zd(a,o,l),y=Vs(s,u+g,p+g);return x&&y}getCenterPoint(e){let{x:t,y:i,startAngle:r,endAngle:a,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:l,spacing:u}=this.options,p=(r+a)/2,f=(s+o+u+l)/2;return{x:t+Math.cos(p)*f,y:i+Math.sin(p)*f}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:i}=this,r=(t.offset||0)/2,a=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>en?Math.floor(i/en):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let o=0;if(r){o=r/2;let u=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(u)*o,Math.sin(u)*o),this.circumference>=wn&&(o=r)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;let l=IP(e,this,o,a,s);PP(e,this,o,a,l,s),e.restore()}};Xd.id="arc";Xd.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};Xd.defaultRoutes={backgroundColor:"backgroundColor"};function lE(n,e,t=e){n.lineCap=gi(t.borderCapStyle,e.borderCapStyle),n.setLineDash(gi(t.borderDash,e.borderDash)),n.lineDashOffset=gi(t.borderDashOffset,e.borderDashOffset),n.lineJoin=gi(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=gi(t.borderWidth,e.borderWidth),n.strokeStyle=gi(t.borderColor,e.borderColor)}function LP(n,e,t){n.lineTo(t.x,t.y)}function RP(n){return n.stepped?HC:n.tension||n.cubicInterpolationMode==="monotone"?WC:LP}function cE(n,e,t={}){let i=n.length,{start:r=0,end:a=i-1}=t,{start:s,end:o}=e,l=Math.max(r,s),u=Math.min(a,o),p=r<s&&a<s||r>o&&a>o;return{count:i,start:l,loop:e.loop,ilen:u<l&&!p?i+u-l:u-l}}function OP(n,e,t,i){let{points:r,options:a}=e,{count:s,start:o,loop:l,ilen:u}=cE(r,t,i),p=RP(a),{move:f=!0,reverse:g}=i||{},m,x,y;for(m=0;m<=u;++m)x=r[(o+(g?u-m:m))%s],!x.skip&&(f?(n.moveTo(x.x,x.y),f=!1):p(n,y,x,g,a.stepped),y=x);return l&&(x=r[(o+(g?u:0))%s],p(n,y,x,g,a.stepped)),!!l}function NP(n,e,t,i){let r=e.points,{count:a,start:s,ilen:o}=cE(r,t,i),{move:l=!0,reverse:u}=i||{},p=0,f=0,g,m,x,y,S,b,M=I=>(s+(u?o-I:I))%a,T=()=>{y!==S&&(n.lineTo(p,S),n.lineTo(p,y),n.lineTo(p,b))};for(l&&(m=r[M(0)],n.moveTo(m.x,m.y)),g=0;g<=o;++g){if(m=r[M(g)],m.skip)continue;let I=m.x,O=m.y,U=I|0;U===x?(O<y?y=O:O>S&&(S=O),p=(f*p+I)/++f):(T(),n.lineTo(I,O),x=U,f=0,y=S=O),b=O}T()}function kx(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?NP:OP}function FP(n){return n.stepped?JC:n.tension||n.cubicInterpolationMode==="monotone"?QC:pl}function BP(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),lE(n,e.options),n.stroke(r)}function VP(n,e,t,i){let{segments:r,options:a}=e,s=kx(e);for(let o of r)lE(n,a,o.style),n.beginPath(),s(n,e,o,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}var UP=typeof Path2D=="function";function zP(n,e,t,i){UP&&!e.options.segment?BP(n,e,t,i):VP(n,e,t,i)}var Hm=(()=>{class n extends Da{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let a=r.spanGaps?this._loop:this._fullLoop;$C(this._points,r,t,a,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=eM(this,this.options.segment))}first(){let t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){let t=this.segments,i=this.points,r=t.length;return r&&i[t[r-1].end]}interpolate(t,i){let r=this.options,a=t[i],s=this.points,o=cx(this,{property:i,start:a,end:a});if(!o.length)return;let l=[],u=FP(r),p,f;for(p=0,f=o.length;p<f;++p){let{start:g,end:m}=o[p],x=s[g],y=s[m];if(x===y){l.push(x);continue}let S=Math.abs((a-x[i])/(y[i]-x[i])),b=u(x,y,S,r.stepped);b[i]=t[i],l.push(b)}return l.length===1?l[0]:l}pathSegment(t,i,r){return kx(this)(t,this,i,r)}path(t,i,r){let a=this.segments,s=kx(this),o=this._loop;i=i||0,r=r||this.points.length-i;for(let l of a)o&=s(t,this,l,{start:i,end:i+r-1});return!!o}draw(t,i,r,a){let s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),zP(t,this,r,a),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n.id="line",n.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},n.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},n.descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"},n})();function AM(n,e,t,i){let r=n.options,{[t]:a}=n.getProps([t],i);return Math.abs(e-a)<r.radius+r.hitRadius}var HP=(()=>{class n extends Da{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,r){let a=this.options,{x:s,y:o}=this.getProps(["x","y"],r);return Math.pow(t-s,2)+Math.pow(i-o,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(t,i){return AM(this,t,"x",i)}inYRange(t,i){return AM(this,t,"y",i)}getCenterPoint(t){let{x:i,y:r}=this.getProps(["x","y"],t);return{x:i,y:r}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);let r=i&&t.borderWidth||0;return(i+r)*2}draw(t,i){let r=this.options;this.skip||r.radius<.1||!Fd(this,i,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,wm(t,r,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n.id="point",n.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},n.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},n})();function dE(n,e){let{x:t,y:i,base:r,width:a,height:s}=n.getProps(["x","y","base","width","height"],e),o,l,u,p,f;return n.horizontal?(f=s/2,o=Math.min(t,r),l=Math.max(t,r),u=i-f,p=i+f):(f=a/2,o=t-f,l=t+f,u=Math.min(i,r),p=Math.max(i,r)),{left:o,top:u,right:l,bottom:p}}function Sl(n,e,t,i){return n?0:fr(e,t,i)}function WP(n,e,t){let i=n.options.borderWidth,r=n.borderSkipped,a=Jv(i);return{t:Sl(r.top,a.top,0,t),r:Sl(r.right,a.right,0,e),b:Sl(r.bottom,a.bottom,0,t),l:Sl(r.left,a.left,0,e)}}function jP(n,e,t){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,a=xl(r),s=Math.min(e,t),o=n.borderSkipped,l=i||ki(r);return{topLeft:Sl(!l||o.top||o.left,a.topLeft,0,s),topRight:Sl(!l||o.top||o.right,a.topRight,0,s),bottomLeft:Sl(!l||o.bottom||o.left,a.bottomLeft,0,s),bottomRight:Sl(!l||o.bottom||o.right,a.bottomRight,0,s)}}function GP(n){let e=dE(n),t=e.right-e.left,i=e.bottom-e.top,r=WP(n,t/2,i/2),a=jP(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:a},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,a.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(r.b,r.r))}}}}function gx(n,e,t,i){let r=e===null,a=t===null,o=n&&!(r&&a)&&dE(n,i);return o&&(r||Vs(e,o.left,o.right))&&(a||Vs(t,o.top,o.bottom))}function qP(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function XP(n,e){n.rect(e.x,e.y,e.w,e.h)}function _x(n,e,t={}){let i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,a=(n.x+n.w!==t.x+t.w?e:0)-i,s=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+a,h:n.h+s,radius:n.radius}}var Yd=class extends Da{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:a,outer:s}=GP(this),o=qP(s.radius)?Hd:XP;e.save(),(s.w!==a.w||s.h!==a.h)&&(e.beginPath(),o(e,_x(s,t,a)),e.clip(),o(e,_x(a,-t,s)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),o(e,_x(a,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return gx(this,e,t,i)}inXRange(e,t){return gx(this,e,null,t)}inYRange(e,t){return gx(this,null,e,t)}getCenterPoint(e){let{x:t,y:i,base:r,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+r)/2:t,y:a?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}};Yd.id="bar";Yd.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};Yd.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var YP=Object.freeze({__proto__:null,ArcElement:Xd,LineElement:Hm,PointElement:HP,BarElement:Yd});function $P(n,e,t,i,r){let a=r.samples||i;if(a>=t)return n.slice(e,e+t);let s=[],o=(t-2)/(a-2),l=0,u=e+t-1,p=e,f,g,m,x,y;for(s[l++]=n[p],f=0;f<a-2;f++){let S=0,b=0,M,T=Math.floor((f+1)*o)+1+e,I=Math.min(Math.floor((f+2)*o)+1,t)+e,O=I-T;for(M=T;M<I;M++)S+=n[M].x,b+=n[M].y;S/=O,b/=O;let U=Math.floor(f*o)+1+e,N=Math.min(Math.floor((f+1)*o)+1,t)+e,{x:B,y:R}=n[p];for(m=x=-1,M=U;M<N;M++)x=.5*Math.abs((B-S)*(n[M].y-R)-(B-n[M].x)*(b-R)),x>m&&(m=x,g=n[M],y=M);s[l++]=g,p=y}return s[l++]=n[u],s}function KP(n,e,t,i){let r=0,a=0,s,o,l,u,p,f,g,m,x,y,S=[],b=e+t-1,M=n[e].x,I=n[b].x-M;for(s=e;s<e+t;++s){o=n[s],l=(o.x-M)/I*i,u=o.y;let O=l|0;if(O===p)u<x?(x=u,f=s):u>y&&(y=u,g=s),r=(a*r+o.x)/++a;else{let U=s-1;if(!Bi(f)&&!Bi(g)){let N=Math.min(f,g),B=Math.max(f,g);N!==m&&N!==U&&S.push(Sn(Li({},n[N]),{x:r})),B!==m&&B!==U&&S.push(Sn(Li({},n[B]),{x:r}))}s>0&&U!==m&&S.push(n[U]),S.push(o),p=O,a=0,x=y=u,f=g=m=s}}return S}function uE(n){if(n._decimated){let e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{value:e})}}function TM(n){n.data.datasets.forEach(e=>{uE(e)})}function ZP(n,e){let t=e.length,i=0,r,{iScale:a}=n,{min:s,max:o,minDefined:l,maxDefined:u}=a.getUserBounds();return l&&(i=fr(Fs(e,a.axis,s).lo,0,t-1)),u?r=fr(Fs(e,a.axis,o).hi+1,i,t)-i:r=t-i,{start:i,count:r}}var JP={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){TM(n);return}let i=n.width;n.data.datasets.forEach((r,a)=>{let{_data:s,indexAxis:o}=r,l=n.getDatasetMeta(a),u=s||r.data;if(Wd([o,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let p=n.scales[l.xAxisID];if(p.type!=="linear"&&p.type!=="time"||n.options.parsing)return;let{start:f,count:g}=ZP(l,u),m=t.threshold||4*i;if(g<=m){uE(r);return}Bi(s)&&(r._data=u,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(y){this._data=y}}));let x;switch(t.algorithm){case"lttb":x=$P(u,f,g,i,t);break;case"min-max":x=KP(u,f,g,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=x})},destroy(n){TM(n)}};function QP(n,e,t){let i=n.segments,r=n.points,a=e.points,s=[];for(let o of i){let{start:l,end:u}=o;u=Px(l,u,r);let p=Ix(t,r[l],r[u],o.loop);if(!e.segments){s.push({source:o,target:p,start:r[l],end:r[u]});continue}let f=cx(e,p);for(let g of f){let m=Ix(t,a[g.start],a[g.end],g.loop),x=lx(o,r,m);for(let y of x)s.push({source:y,target:g,start:{[t]:kM(p,m,"start",Math.max)},end:{[t]:kM(p,m,"end",Math.min)}})}}return s}function Ix(n,e,t,i){if(i)return;let r=e[n],a=t[n];return n==="angle"&&(r=ga(r),a=ga(a)),{property:n,start:r,end:a}}function tL(n,e){let{x:t=null,y:i=null}=n||{},r=e.points,a=[];return e.segments.forEach(({start:s,end:o})=>{o=Px(s,o,r);let l=r[s],u=r[o];i!==null?(a.push({x:l.x,y:i}),a.push({x:u.x,y:i})):t!==null&&(a.push({x:t,y:l.y}),a.push({x:t,y:u.y}))}),a}function Px(n,e,t){for(;e>n;e--){let i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function kM(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function hE(n,e){let t=[],i=!1;return fn(n)?(i=!0,t=n):t=tL(n,e),t.length?new Hm({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function IM(n){return n&&n.fill!==!1}function eL(n,e,t){let r=n[e].fill,a=[e],s;if(!t)return r;for(;r!==!1&&a.indexOf(r)===-1;){if(!jn(r))return r;if(s=n[r],!s)return!1;if(s.visible)return r;a.push(r),r=s.fill}return!1}function iL(n,e,t){let i=sL(n);if(ki(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return jn(r)&&Math.floor(r)===r?nL(i[0],e,r,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function nL(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function rL(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:ki(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function aL(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:ki(n)?i=n.value:i=e.getBaseValue(),i}function sL(n){let e=n.options,t=e.fill,i=gi(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function oL(n){let{scale:e,index:t,line:i}=n,r=[],a=i.segments,s=i.points,o=lL(e,t);o.push(hE({x:null,y:e.bottom},i));for(let l=0;l<a.length;l++){let u=a[l];for(let p=u.start;p<=u.end;p++)cL(r,s[p],o)}return new Hm({points:r,options:{}})}function lL(n,e){let t=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){let a=i[r];if(a.index===e)break;a.hidden||t.unshift(a.dataset)}return t}function cL(n,e,t){let i=[];for(let r=0;r<t.length;r++){let a=t[r],{first:s,last:o,point:l}=dL(a,e,"x");if(!(!l||s&&o)){if(s)i.unshift(l);else if(n.push(l),!o)break}}n.push(...i)}function dL(n,e,t){let i=n.interpolate(e,t);if(!i)return{};let r=i[t],a=n.segments,s=n.points,o=!1,l=!1;for(let u=0;u<a.length;u++){let p=a[u],f=s[p.start][t],g=s[p.end][t];if(Vs(r,f,g)){o=r===f,l=r===g;break}}return{first:o,last:l,point:i}}var Vm=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){let{x:r,y:a,radius:s}=this;return t=t||{start:0,end:en},e.arc(r,a,s,t.end,t.start,!0),!i.bounds}interpolate(e){let{x:t,y:i,radius:r}=this,a=e.angle;return{x:t+Math.cos(a)*r,y:i+Math.sin(a)*r,angle:a}}};function uL(n){let{chart:e,fill:t,line:i}=n;if(jn(t))return hL(e,t);if(t==="stack")return oL(n);if(t==="shape")return!0;let r=pL(n);return r instanceof Vm?r:hE(r,i)}function hL(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function pL(n){return(n.scale||{}).getPointPositionForValue?mL(n):fL(n)}function fL(n){let{scale:e={},fill:t}=n,i=rL(t,e);if(jn(i)){let r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function mL(n){let{scale:e,fill:t}=n,i=e.options,r=e.getLabels().length,a=i.reverse?e.max:e.min,s=aL(t,e,a),o=[];if(i.grid.circular){let l=e.getPointPositionForValue(0,a);return new Vm({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(s)})}for(let l=0;l<r;++l)o.push(e.getPointPositionForValue(l,s));return o}function vx(n,e,t){let i=uL(e),{line:r,scale:a,axis:s}=e,o=r.options,l=o.fill,u=o.backgroundColor,{above:p=u,below:f=u}=l||{};i&&r.points.length&&(Uh(n,t),gL(n,{line:r,target:i,above:p,below:f,area:t,scale:a,axis:s}),zh(n))}function gL(n,e){let{line:t,target:i,above:r,below:a,area:s,scale:o}=e,l=t._loop?"angle":e.axis;n.save(),l==="x"&&a!==r&&(DM(n,i,s.top),PM(n,{line:t,target:i,color:r,scale:o,property:l}),n.restore(),n.save(),DM(n,i,s.bottom)),PM(n,{line:t,target:i,color:a,scale:o,property:l}),n.restore()}function DM(n,e,t){let{segments:i,points:r}=e,a=!0,s=!1;n.beginPath();for(let o of i){let{start:l,end:u}=o,p=r[l],f=r[Px(l,u,r)];a?(n.moveTo(p.x,p.y),a=!1):(n.lineTo(p.x,t),n.lineTo(p.x,p.y)),s=!!e.pathSegment(n,o,{move:s}),s?n.closePath():n.lineTo(f.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function PM(n,e){let{line:t,target:i,property:r,color:a,scale:s}=e,o=QP(t,i,r);for(let{source:l,target:u,start:p,end:f}of o){let{style:{backgroundColor:g=a}={}}=l,m=i!==!0;n.save(),n.fillStyle=g,_L(n,s,m&&Ix(r,p,f)),n.beginPath();let x=!!t.pathSegment(n,l),y;if(m){x?n.closePath():LM(n,i,f,r);let S=!!i.pathSegment(n,u,{move:x,reverse:!0});y=x&&S,y||LM(n,i,p,r)}n.closePath(),n.fill(y?"evenodd":"nonzero"),n.restore()}}function _L(n,e,t){let{top:i,bottom:r}=e.chart.chartArea,{property:a,start:s,end:o}=t||{};a==="x"&&(n.beginPath(),n.rect(s,i,o-s,r-i),n.clip())}function LM(n,e,t,i){let r=e.interpolate(t,i);r&&n.lineTo(r.x,r.y)}var vL={id:"filler",afterDatasetsUpdate(n,e,t){let i=(n.data.datasets||[]).length,r=[],a,s,o,l;for(s=0;s<i;++s)a=n.getDatasetMeta(s),o=a.dataset,l=null,o&&o.options&&o instanceof Hm&&(l={visible:n.isDatasetVisible(s),index:s,fill:iL(o,s,i),chart:n,axis:a.controller.options.indexAxis,scale:a.vScale,line:o}),a.$filler=l,r.push(l);for(s=0;s<i;++s)l=r[s],!(!l||l.fill===!1)&&(l.fill=eL(r,s,t.propagate))},beforeDraw(n,e,t){let i=t.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),a=n.chartArea;for(let s=r.length-1;s>=0;--s){let o=r[s].$filler;o&&(o.line.updateControlPoints(a,o.axis),i&&o.fill&&vx(n.ctx,o,a))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){let a=i[r].$filler;IM(a)&&vx(n.ctx,a,n.chartArea)}},beforeDatasetDraw(n,e,t){let i=e.meta.$filler;!IM(i)||t.drawTime!=="beforeDatasetDraw"||vx(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},RM=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},xL=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,Um=class extends Da{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=mn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let i=e.labels,r=lr(i.font),a=r.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=RM(i,a),u,p;t.font=r.string,this.isHorizontal()?(u=this.maxWidth,p=this._fitRows(s,a,o,l)+10):(p=this.maxHeight,u=this._fitCols(s,a,o,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(p,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){let{ctx:a,maxWidth:s,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],p=r+o,f=e;a.textAlign="left",a.textBaseline="middle";let g=-1,m=-p;return this.legendItems.forEach((x,y)=>{let S=i+t/2+a.measureText(x.text).width;(y===0||u[u.length-1]+S+2*o>s)&&(f+=p,u[u.length-(y>0?0:1)]=0,m+=p,g++),l[y]={left:0,top:m,row:g,width:S,height:r},u[u.length-1]+=S+o}),f}_fitCols(e,t,i,r){let{ctx:a,maxHeight:s,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],p=s-e,f=o,g=0,m=0,x=0,y=0;return this.legendItems.forEach((S,b)=>{let M=i+t/2+a.measureText(S.text).width;b>0&&m+r+2*o>p&&(f+=g+o,u.push({width:g,height:m}),x+=g+o,y++,g=m=0),l[b]={left:x,top:m,col:y,width:M,height:r},g=Math.max(g,M),m+=r+o}),f+=g,u.push({width:g,height:m}),f}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:a}}=this,s=bc(a,this.left,this.width);if(this.isHorizontal()){let o=0,l=Ir(i,this.left+r,this.right-this.lineWidths[o]);for(let u of t)o!==u.row&&(o=u.row,l=Ir(i,this.left+r,this.right-this.lineWidths[o])),u.top+=this.top+e+r,u.left=s.leftForLtr(s.x(l),u.width),l+=u.width+r}else{let o=0,l=Ir(i,this.top+e+r,this.bottom-this.columnSizes[o].height);for(let u of t)u.col!==o&&(o=u.col,l=Ir(i,this.top+e+r,this.bottom-this.columnSizes[o].height)),u.top=l,u.left+=this.left+r,u.left=s.leftForLtr(s.x(u.left),u.width),l+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;Uh(e,this),this._draw(),zh(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:a,labels:s}=e,o=wi.color,l=bc(e.rtl,this.left,this.width),u=lr(s.font),{color:p,padding:f}=s,g=u.size,m=g/2,x;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;let{boxWidth:y,boxHeight:S,itemHeight:b}=RM(s,g),M=function(N,B,R){if(isNaN(y)||y<=0||isNaN(S)||S<0)return;r.save();let F=gi(R.lineWidth,1);if(r.fillStyle=gi(R.fillStyle,o),r.lineCap=gi(R.lineCap,"butt"),r.lineDashOffset=gi(R.lineDashOffset,0),r.lineJoin=gi(R.lineJoin,"miter"),r.lineWidth=F,r.strokeStyle=gi(R.strokeStyle,o),r.setLineDash(gi(R.lineDash,[])),s.usePointStyle){let P={radius:S*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:F},V=l.xPlus(N,y/2),$=B+m;Zv(r,P,V,$,s.pointStyleWidth&&y)}else{let P=B+Math.max((g-S)/2,0),V=l.leftForLtr(N,y),$=xl(R.borderRadius);r.beginPath(),Object.values($).some(K=>K!==0)?Hd(r,{x:V,y:P,w:y,h:S,radius:$}):r.rect(V,P,y,S),r.fill(),F!==0&&r.stroke()}r.restore()},T=function(N,B,R){vl(r,R.text,N,B+b/2,u,{strikethrough:R.hidden,textAlign:l.textAlign(R.textAlign)})},I=this.isHorizontal(),O=this._computeTitleHeight();I?x={x:Ir(a,this.left+f,this.right-i[0]),y:this.top+f+O,line:0}:x={x:this.left+f,y:Ir(a,this.top+O+f,this.bottom-t[0].height),line:0},sx(this.ctx,e.textDirection);let U=b+f;this.legendItems.forEach((N,B)=>{r.strokeStyle=N.fontColor||p,r.fillStyle=N.fontColor||p;let R=r.measureText(N.text).width,F=l.textAlign(N.textAlign||(N.textAlign=s.textAlign)),P=y+m+R,V=x.x,$=x.y;l.setWidth(this.width),I?B>0&&V+P+f>this.right&&($=x.y+=U,x.line++,V=x.x=Ir(a,this.left+f,this.right-i[x.line])):B>0&&$+U>this.bottom&&(V=x.x=V+t[x.line].width+f,x.line++,$=x.y=Ir(a,this.top+O+f,this.bottom-t[x.line].height));let K=l.x(V);M(K,$,N),V=OC(F,V+y+m,I?V+P:this.right,e.rtl),T(l.x(V),$,N),I?x.x+=P+f:x.y+=U}),ox(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,i=lr(t.font),r=Dr(t.padding);if(!t.display)return;let a=bc(e.rtl,this.left,this.width),s=this.ctx,o=t.position,l=i.size/2,u=r.top+l,p,f=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),p=this.top+u,f=Ir(e.align,f,this.right-g);else{let x=this.columnSizes.reduce((y,S)=>Math.max(y,S.height),0);p=u+Ir(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}let m=Ir(o,f,f+g);s.textAlign=a.textAlign(ym(o)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=i.string,vl(s,t.text,m,p,i)}_computeTitleHeight(){let e=this.options.title,t=lr(e.font),i=Dr(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,a;if(Vs(e,this.left,this.right)&&Vs(t,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(r=a[i],Vs(e,r.left,r.left+r.width)&&Vs(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){let t=this.options;if(!bL(e.type,t))return;let i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let r=this._hoveredItem,a=xL(r,i);r&&!a&&mn(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!a&&mn(t.onHover,[e,i,this],this)}else i&&mn(t.onClick,[e,i,this],this)}};function bL(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var yL={id:"legend",_element:Um,start(n,e,t){let i=n.legend=new Um({ctx:n.ctx,options:t,chart:n});Ur.configure(n,i,t),Ur.addBox(n,i)},stop(n){Ur.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let i=n.legend;Ur.configure(n,i,t),i.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:a}}=n.legend.options;return n._getSortedDatasetMetas().map(s=>{let o=s.controller.getStyle(t?0:void 0),l=Dr(o.borderWidth);return{text:e[s.index].label,fillStyle:o.backgroundColor,fontColor:a,hidden:!s.visible,lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:o.borderColor,pointStyle:i||o.pointStyle,rotation:o.rotation,textAlign:r||o.textAlign,borderRadius:0,datasetIndex:s.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},Kh=class extends Da{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let r=fn(i.text)?i.text.length:1;this._padding=Dr(i.padding);let a=r*lr(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:i,bottom:r,right:a,options:s}=this,o=s.align,l=0,u,p,f;return this.isHorizontal()?(p=Ir(o,i,a),f=t+e,u=a-i):(s.position==="left"?(p=i+e,f=Ir(o,r,t),l=wn*-.5):(p=a-e,f=Ir(o,t,r),l=wn*.5),u=r-t),{titleX:p,titleY:f,maxWidth:u,rotation:l}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let i=lr(t.font),a=i.lineHeight/2+this._padding.top,{titleX:s,titleY:o,maxWidth:l,rotation:u}=this._drawArgs(a);vl(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:u,textAlign:ym(t.align),textBaseline:"middle",translation:[s,o]})}};function SL(n,e){let t=new Kh({ctx:n.ctx,options:e,chart:n});Ur.configure(n,t,e),Ur.addBox(n,t),n.titleBlock=t}var wL={id:"title",_element:Kh,start(n,e,t){SL(n,t)},stop(n){let e=n.titleBlock;Ur.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let i=n.titleBlock;Ur.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Dm=new WeakMap,CL={id:"subtitle",start(n,e,t){let i=new Kh({ctx:n.ctx,options:t,chart:n});Ur.configure(n,i,t),Ur.addBox(n,i),Dm.set(n,i)},stop(n){Ur.removeBox(n,Dm.get(n)),Dm.delete(n)},beforeUpdate(n,e,t){let i=Dm.get(n);Ur.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Yh={average(n){if(!n.length)return!1;let e,t,i=0,r=0,a=0;for(e=0,t=n.length;e<t;++e){let s=n[e].element;if(s&&s.hasValue()){let o=s.tooltipPosition();i+=o.x,r+=o.y,++a}}return{x:i/a,y:r/a}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,a,s,o;for(a=0,s=n.length;a<s;++a){let l=n[a].element;if(l&&l.hasValue()){let u=l.getCenterPoint(),p=gm(e,u);p<r&&(r=p,o=l)}}if(o){let l=o.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function Us(n,e){return e&&(fn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function wo(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function ML(n,e){let{element:t,datasetIndex:i,index:r}=e,a=n.getDatasetMeta(i).controller,{label:s,value:o}=a.getLabelAndValue(r);return{chart:n,label:s,parsed:a.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:o,dataset:a.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function OM(n,e){let t=n.chart.ctx,{body:i,footer:r,title:a}=n,{boxWidth:s,boxHeight:o}=e,l=lr(e.bodyFont),u=lr(e.titleFont),p=lr(e.footerFont),f=a.length,g=r.length,m=i.length,x=Dr(e.padding),y=x.height,S=0,b=i.reduce((I,O)=>I+O.before.length+O.lines.length+O.after.length,0);if(b+=n.beforeBody.length+n.afterBody.length,f&&(y+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),b){let I=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;y+=m*I+(b-m)*l.lineHeight+(b-1)*e.bodySpacing}g&&(y+=e.footerMarginTop+g*p.lineHeight+(g-1)*e.footerSpacing);let M=0,T=function(I){S=Math.max(S,t.measureText(I).width+M)};return t.save(),t.font=u.string,Zi(n.title,T),t.font=l.string,Zi(n.beforeBody.concat(n.afterBody),T),M=e.displayColors?s+2+e.boxPadding:0,Zi(i,I=>{Zi(I.before,T),Zi(I.lines,T),Zi(I.after,T)}),M=0,t.font=p.string,Zi(n.footer,T),t.restore(),S+=x.width,{width:S,height:y}}function EL(n,e){let{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function AL(n,e,t,i){let{x:r,width:a}=i,s=t.caretSize+t.caretPadding;if(n==="left"&&r+a+s>e.width||n==="right"&&r-a-s<0)return!0}function TL(n,e,t,i){let{x:r,width:a}=t,{width:s,chartArea:{left:o,right:l}}=n,u="center";return i==="center"?u=r<=(o+l)/2?"left":"right":r<=a/2?u="left":r>=s-a/2&&(u="right"),AL(u,n,e,t)&&(u="center"),u}function NM(n,e,t){let i=t.yAlign||e.yAlign||EL(n,t);return{xAlign:t.xAlign||e.xAlign||TL(n,e,t,i),yAlign:i}}function kL(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function IL(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function FM(n,e,t,i){let{caretSize:r,caretPadding:a,cornerRadius:s}=n,{xAlign:o,yAlign:l}=t,u=r+a,{topLeft:p,topRight:f,bottomLeft:g,bottomRight:m}=xl(s),x=kL(e,o),y=IL(e,l,u);return l==="center"?o==="left"?x+=u:o==="right"&&(x-=u):o==="left"?x-=Math.max(p,g)+r:o==="right"&&(x+=Math.max(f,m)+r),{x:fr(x,0,i.width-e.width),y:fr(y,0,i.height-e.height)}}function Pm(n,e,t){let i=Dr(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function BM(n){return Us([],wo(n))}function DL(n,e,t){return yo(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function VM(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var UM=(()=>{class n extends Da{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,r=this.options.setContext(this.getContext()),a=r.enabled&&i.options.animation&&r.animations,s=new Om(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=DL(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:r}=i,a=r.beforeTitle.apply(this,[t]),s=r.title.apply(this,[t]),o=r.afterTitle.apply(this,[t]),l=[];return l=Us(l,wo(a)),l=Us(l,wo(s)),l=Us(l,wo(o)),l}getBeforeBody(t,i){return BM(i.callbacks.beforeBody.apply(this,[t]))}getBody(t,i){let{callbacks:r}=i,a=[];return Zi(t,s=>{let o={before:[],lines:[],after:[]},l=VM(r,s);Us(o.before,wo(l.beforeLabel.call(this,s))),Us(o.lines,l.label.call(this,s)),Us(o.after,wo(l.afterLabel.call(this,s))),a.push(o)}),a}getAfterBody(t,i){return BM(i.callbacks.afterBody.apply(this,[t]))}getFooter(t,i){let{callbacks:r}=i,a=r.beforeFooter.apply(this,[t]),s=r.footer.apply(this,[t]),o=r.afterFooter.apply(this,[t]),l=[];return l=Us(l,wo(a)),l=Us(l,wo(s)),l=Us(l,wo(o)),l}_createItems(t){let i=this._active,r=this.chart.data,a=[],s=[],o=[],l=[],u,p;for(u=0,p=i.length;u<p;++u)l.push(ML(this.chart,i[u]));return t.filter&&(l=l.filter((f,g,m)=>t.filter(f,g,m,r))),t.itemSort&&(l=l.sort((f,g)=>t.itemSort(f,g,r))),Zi(l,f=>{let g=VM(t.callbacks,f);a.push(g.labelColor.call(this,f)),s.push(g.labelPointStyle.call(this,f)),o.push(g.labelTextColor.call(this,f))}),this.labelColors=a,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=l,l}update(t,i){let r=this.options.setContext(this.getContext()),a=this._active,s,o=[];if(!a.length)this.opacity!==0&&(s={opacity:0});else{let l=Yh[r.position].call(this,a,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);let u=this._size=OM(this,r),p=Object.assign({},l,u),f=NM(this.chart,r,p),g=FM(r,p,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,s={opacity:1,x:g.x,y:g.y,width:u.width,height:u.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,r,a){let s=this.getCaretPosition(t,r,a);i.lineTo(s.x1,s.y1),i.lineTo(s.x2,s.y2),i.lineTo(s.x3,s.y3)}getCaretPosition(t,i,r){let{xAlign:a,yAlign:s}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:u,topRight:p,bottomLeft:f,bottomRight:g}=xl(l),{x:m,y:x}=t,{width:y,height:S}=i,b,M,T,I,O,U;return s==="center"?(O=x+S/2,a==="left"?(b=m,M=b-o,I=O+o,U=O-o):(b=m+y,M=b+o,I=O-o,U=O+o),T=b):(a==="left"?M=m+Math.max(u,f)+o:a==="right"?M=m+y-Math.max(p,g)-o:M=this.caretX,s==="top"?(I=x,O=I-o,b=M-o,T=M+o):(I=x+S,O=I+o,b=M+o,T=M-o),U=I),{x1:b,x2:M,x3:T,y1:I,y2:O,y3:U}}drawTitle(t,i,r){let a=this.title,s=a.length,o,l,u;if(s){let p=bc(r.rtl,this.x,this.width);for(t.x=Pm(this,r.titleAlign,r),i.textAlign=p.textAlign(r.titleAlign),i.textBaseline="middle",o=lr(r.titleFont),l=r.titleSpacing,i.fillStyle=r.titleColor,i.font=o.string,u=0;u<s;++u)i.fillText(a[u],p.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,u+1===s&&(t.y+=r.titleMarginBottom-l)}}_drawColorBox(t,i,r,a,s){let o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:u,boxWidth:p,boxPadding:f}=s,g=lr(s.bodyFont),m=Pm(this,"left",s),x=a.x(m),y=u<g.lineHeight?(g.lineHeight-u)/2:0,S=i.y+y;if(s.usePointStyle){let b={radius:Math.min(p,u)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},M=a.leftForLtr(x,p)+p/2,T=S+u/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,wm(t,b,M,T),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,wm(t,b,M,T)}else{t.lineWidth=ki(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;let b=a.leftForLtr(x,p-f),M=a.leftForLtr(a.xPlus(x,1),p-f-2),T=xl(o.borderRadius);Object.values(T).some(I=>I!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,Hd(t,{x:b,y:S,w:p,h:u,radius:T}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Hd(t,{x:M,y:S+1,w:p-2,h:u-2,radius:T}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(b,S,p,u),t.strokeRect(b,S,p,u),t.fillStyle=o.backgroundColor,t.fillRect(M,S+1,p-2,u-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,i,r){let{body:a}=this,{bodySpacing:s,bodyAlign:o,displayColors:l,boxHeight:u,boxWidth:p,boxPadding:f}=r,g=lr(r.bodyFont),m=g.lineHeight,x=0,y=bc(r.rtl,this.x,this.width),S=function(R){i.fillText(R,y.x(t.x+x),t.y+m/2),t.y+=m+s},b=y.textAlign(o),M,T,I,O,U,N,B;for(i.textAlign=o,i.textBaseline="middle",i.font=g.string,t.x=Pm(this,b,r),i.fillStyle=r.bodyColor,Zi(this.beforeBody,S),x=l&&b!=="right"?o==="center"?p/2+f:p+2+f:0,O=0,N=a.length;O<N;++O){for(M=a[O],T=this.labelTextColors[O],i.fillStyle=T,Zi(M.before,S),I=M.lines,l&&I.length&&(this._drawColorBox(i,t,O,y,r),m=Math.max(g.lineHeight,u)),U=0,B=I.length;U<B;++U)S(I[U]),m=g.lineHeight;Zi(M.after,S)}x=0,m=g.lineHeight,Zi(this.afterBody,S),t.y-=s}drawFooter(t,i,r){let a=this.footer,s=a.length,o,l;if(s){let u=bc(r.rtl,this.x,this.width);for(t.x=Pm(this,r.footerAlign,r),t.y+=r.footerMarginTop,i.textAlign=u.textAlign(r.footerAlign),i.textBaseline="middle",o=lr(r.footerFont),i.fillStyle=r.footerColor,i.font=o.string,l=0;l<s;++l)i.fillText(a[l],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+r.footerSpacing}}drawBackground(t,i,r,a){let{xAlign:s,yAlign:o}=this,{x:l,y:u}=t,{width:p,height:f}=r,{topLeft:g,topRight:m,bottomLeft:x,bottomRight:y}=xl(a.cornerRadius);i.fillStyle=a.backgroundColor,i.strokeStyle=a.borderColor,i.lineWidth=a.borderWidth,i.beginPath(),i.moveTo(l+g,u),o==="top"&&this.drawCaret(t,i,r,a),i.lineTo(l+p-m,u),i.quadraticCurveTo(l+p,u,l+p,u+m),o==="center"&&s==="right"&&this.drawCaret(t,i,r,a),i.lineTo(l+p,u+f-y),i.quadraticCurveTo(l+p,u+f,l+p-y,u+f),o==="bottom"&&this.drawCaret(t,i,r,a),i.lineTo(l+x,u+f),i.quadraticCurveTo(l,u+f,l,u+f-x),o==="center"&&s==="left"&&this.drawCaret(t,i,r,a),i.lineTo(l,u+g),i.quadraticCurveTo(l,u,l+g,u),i.closePath(),i.fill(),a.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,r=this.$animations,a=r&&r.x,s=r&&r.y;if(a||s){let o=Yh[t.position].call(this,this._active,this._eventPosition);if(!o)return;let l=this._size=OM(this,t),u=Object.assign({},o,this._size),p=NM(i,t,u),f=FM(t,u,p,i);(a._to!==f.x||s._to!==f.y)&&(this.xAlign=p.xAlign,this.yAlign=p.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let a={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let o=Dr(i.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&l&&(t.save(),t.globalAlpha=r,this.drawBackground(s,t,a,i),sx(t,i.textDirection),s.y+=o.top,this.drawTitle(s,t,i),this.drawBody(s,t,i),this.drawFooter(s,t,i),ox(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let r=this._active,a=t.map(({datasetIndex:l,index:u})=>{let p=this.chart.getDatasetMeta(l);if(!p)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:p.data[u],index:u}}),s=!Bh(r,a),o=this._positionChanged(a,i);(s||o)&&(this._active=a,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let a=this.options,s=this._active||[],o=this._getActiveElements(t,s,i,r),l=this._positionChanged(o,t),u=i||!Bh(o,s)||l;return u&&(this._active=o,(a.enabled||a.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),u}_getActiveElements(t,i,r,a){let s=this.options;if(t.type==="mouseout")return[];if(!a)return i;let o=this.chart.getElementsAtEventForMode(t,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(t,i){let{caretX:r,caretY:a,options:s}=this,o=Yh[s.position].call(this,t,i);return o!==!1&&(r!==o.x||a!==o.y)}}return n.positioners=Yh,n})(),PL={id:"tooltip",_element:UM,positioners:Yh,afterInit(n,e,t){t&&(n.tooltip=new UM({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",t)===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Bs,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Bs,beforeBody:Bs,beforeLabel:Bs,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return Bi(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Bs,afterBody:Bs,beforeFooter:Bs,footer:Bs,afterFooter:Bs}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},LL=Object.freeze({__proto__:null,Decimation:JP,Filler:vL,Legend:yL,SubTitle:CL,Title:wL,Tooltip:PL}),RL=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function OL(n,e,t,i){let r=n.indexOf(e);if(r===-1)return RL(n,e,t,i);let a=n.lastIndexOf(e);return r!==a?t:r}var NL=(n,e)=>n===null?null:fr(Math.round(n),0,e),$d=class extends Sc{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let t=this._addedLabels;if(t.length){let i=this.getLabels();for(let{index:r,label:a}of t)i[r]===a&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Bi(e))return null;let i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:OL(i,e,gi(t,e),this._addedLabels),NL(t,i.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){let e=this.min,t=this.max,i=this.options.offset,r=[],a=this.getLabels();a=e===0&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let s=e;s<=t;s++)r.push({value:s});return r}getLabelForValue(e){let t=this.getLabels();return e>=0&&e<t.length?t[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}};$d.id="category";$d.defaults={ticks:{callback:$d.prototype.getLabelForValue}};function FL(n,e){let t=[],{bounds:r,step:a,min:s,max:o,precision:l,count:u,maxTicks:p,maxDigits:f,includeBounds:g}=n,m=a||1,x=p-1,{min:y,max:S}=e,b=!Bi(s),M=!Bi(o),T=!Bi(u),I=(S-y)/(f+1),O=Nv((S-y)/x/m)*m,U,N,B,R;if(O<1e-14&&!b&&!M)return[{value:y},{value:S}];R=Math.ceil(S/O)-Math.floor(y/O),R>x&&(O=Nv(R*O/x/m)*m),Bi(l)||(U=Math.pow(10,l),O=Math.ceil(O*U)/U),r==="ticks"?(N=Math.floor(y/O)*O,B=Math.ceil(S/O)*O):(N=y,B=S),b&&M&&a&&TC((o-s)/a,O/1e3)?(R=Math.round(Math.min((o-s)/O,p)),O=(o-s)/R,N=s,B=o):T?(N=b?s:N,B=M?o:B,R=u-1,O=(B-N)/R):(R=(B-N)/O,Ud(R,Math.round(R),O/1e3)?R=Math.round(R):R=Math.ceil(R));let F=Math.max(Bv(O),Bv(N));U=Math.pow(10,Bi(l)?F:l),N=Math.round(N*U)/U,B=Math.round(B*U)/U;let P=0;for(b&&(g&&N!==s?(t.push({value:s}),N<s&&P++,Ud(Math.round((N+P*O)*U)/U,s,zM(s,I,n))&&P++):N<s&&P++);P<R;++P)t.push({value:Math.round((N+P*O)*U)/U});return M&&g&&B!==o?t.length&&Ud(t[t.length-1].value,o,zM(o,I,n))?t[t.length-1].value=o:t.push({value:o}):(!M||B===o)&&t.push({value:B}),t}function zM(n,e,{horizontal:t,minRotation:i}){let r=Ja(i),a=(t?Math.sin(r):Math.cos(r))||.001,s=.75*e*(""+n).length;return Math.min(e/a,s)}var Kd=class extends Sc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Bi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:a}=this,s=l=>r=t?r:l,o=l=>a=i?a:l;if(e){let l=_s(r),u=_s(a);l<0&&u<0?o(0):l>0&&u>0&&s(0)}if(r===a){let l=1;(a>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(a*.05)),o(a+l),e||s(r-l)}this.min=r,this.max=a}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},a=this._range||this,s=FL(r,a);return e.bounds==="ticks"&&Fv(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let e=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return jd(e,this.chart.options.locale,this.options.ticks.format)}},Zh=class extends Kd{determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=jn(e)?e:0,this.max=jn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,i=Ja(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}};Zh.id="linear";Zh.defaults={ticks:{callback:zm.formatters.numeric}};function HM(n){return n/Math.pow(10,Math.floor(Ia(n)))===1}function BL(n,e){let t=Math.floor(Ia(e.max)),i=Math.ceil(e.max/Math.pow(10,t)),r=[],a=ka(n.min,Math.pow(10,Math.floor(Ia(e.min)))),s=Math.floor(Ia(a)),o=Math.floor(a/Math.pow(10,s)),l=s<0?Math.pow(10,Math.abs(s)):1;do r.push({value:a,major:HM(a)}),++o,o===10&&(o=1,++s,l=s>=0?1:l),a=Math.round(o*Math.pow(10,s)*l)/l;while(s<t||s===t&&o<i);let u=ka(n.max,a);return r.push({value:u,major:HM(a)}),r}var Jh=class extends Sc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let i=Kd.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return jn(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=jn(e)?Math.max(0,e):null,this.max=jn(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),i=this.min,r=this.max,a=l=>i=e?i:l,s=l=>r=t?r:l,o=(l,u)=>Math.pow(10,Math.floor(Ia(l))+u);i===r&&(i<=0?(a(1),s(10)):(a(o(i,-1)),s(o(r,1)))),i<=0&&a(o(r,-1)),r<=0&&s(o(i,1)),this._zero&&this.min!==this._suggestedMin&&i===o(this.min,0)&&a(o(i,-1)),this.min=i,this.max=r}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},i=BL(t,this);return e.bounds==="ticks"&&Fv(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":jd(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Ia(e),this._valueRange=Ia(this.max)-Ia(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ia(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};Jh.id="logarithmic";Jh.defaults={ticks:{callback:zm.formatters.logarithmic,major:{enabled:!0}}};function Dx(n){let e=n.ticks;if(e.display&&n.display){let t=Dr(e.backdropPadding);return gi(e.font&&e.font.size,wi.font.size)+t.height}return 0}function VL(n,e,t){return t=fn(t)?t:[t],{w:zC(n,e.string,t),h:t.length*e.lineHeight}}function WM(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function UL(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],a=n._pointLabels.length,s=n.options.pointLabels,o=s.centerPointLabels?wn/a:0;for(let l=0;l<a;l++){let u=s.setContext(n.getPointLabelContext(l));r[l]=u.padding;let p=n.getPointPosition(l,n.drawingArea+r[l],o),f=lr(u.font),g=VL(n.ctx,f,n._pointLabels[l]);i[l]=g;let m=ga(n.getIndexAngle(l)+o),x=Math.round(xm(m)),y=WM(x,p.x,g.w,0,180),S=WM(x,p.y,g.h,90,270);zL(t,e,m,y,S)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=HL(n,i,r)}function zL(n,e,t,i,r){let a=Math.abs(Math.sin(t)),s=Math.abs(Math.cos(t)),o=0,l=0;i.start<e.l?(o=(e.l-i.start)/a,n.l=Math.min(n.l,e.l-o)):i.end>e.r&&(o=(i.end-e.r)/a,n.r=Math.max(n.r,e.r+o)),r.start<e.t?(l=(e.t-r.start)/s,n.t=Math.min(n.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/s,n.b=Math.max(n.b,e.b+l))}function HL(n,e,t){let i=[],r=n._pointLabels.length,a=n.options,s=Dx(a)/2,o=n.drawingArea,l=a.pointLabels.centerPointLabels?wn/r:0;for(let u=0;u<r;u++){let p=n.getPointPosition(u,o+s+t[u],l),f=Math.round(xm(ga(p.angle+Nn))),g=e[u],m=GL(p.y,g.h,f),x=WL(f),y=jL(p.x,g.w,x);i.push({x:p.x,y:m,textAlign:x,left:y,top:m,right:y+g.w,bottom:m+g.h})}return i}function WL(n){return n===0||n===180?"center":n<180?"left":"right"}function jL(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function GL(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function qL(n,e){let{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){let a=i.setContext(n.getPointLabelContext(r)),s=lr(a.font),{x:o,y:l,textAlign:u,left:p,top:f,right:g,bottom:m}=n._pointLabelItems[r],{backdropColor:x}=a;if(!Bi(x)){let y=xl(a.borderRadius),S=Dr(a.backdropPadding);t.fillStyle=x;let b=p-S.left,M=f-S.top,T=g-p+S.width,I=m-f+S.height;Object.values(y).some(O=>O!==0)?(t.beginPath(),Hd(t,{x:b,y:M,w:T,h:I,radius:y}),t.fill()):t.fillRect(b,M,T,I)}vl(t,n._pointLabels[r],o,l+s.lineHeight/2,s,{color:a.color,textAlign:u,textBaseline:"middle"})}}function pE(n,e,t,i){let{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,en);else{let a=n.getPointPosition(0,e);r.moveTo(a.x,a.y);for(let s=1;s<i;s++)a=n.getPointPosition(s,e),r.lineTo(a.x,a.y)}}function XL(n,e,t,i){let r=n.ctx,a=e.circular,{color:s,lineWidth:o}=e;!a&&!i||!s||!o||t<0||(r.save(),r.strokeStyle=s,r.lineWidth=o,r.setLineDash(e.borderDash),r.lineDashOffset=e.borderDashOffset,r.beginPath(),pE(n,t,a,i),r.closePath(),r.stroke(),r.restore())}function YL(n,e,t){return yo(n,{label:t,index:e,type:"pointLabel"})}var wc=class extends Kd{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=Dr(Dx(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=jn(e)&&!isNaN(e)?e:0,this.max=jn(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Dx(this.options))}generateTickLabels(e){Kd.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{let r=mn(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){let e=this.options;e.display&&e.pointLabels.display?UL(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){let t=en/(this._pointLabels.length||1),i=this.options.startAngle||0;return ga(e*t+Ja(i))}getDistanceFromCenterForValue(e){if(Bi(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Bi(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let i=t[e];return YL(this.getContext(),e,i)}}getPointPosition(e,t,i=0){let r=this.getIndexAngle(e)-Nn+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:i,right:r,bottom:a}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:a}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),pE(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:i,grid:r}=t,a=this._pointLabels.length,s,o,l;if(t.pointLabels.display&&qL(this,a),r.display&&this.ticks.forEach((u,p)=>{if(p!==0){o=this.getDistanceFromCenterForValue(u.value);let f=r.setContext(this.getContext(p-1));XL(this,f,o,a)}}),i.display){for(e.save(),s=a-1;s>=0;s--){let u=i.setContext(this.getPointLabelContext(s)),{color:p,lineWidth:f}=u;!f||!p||(e.lineWidth=f,e.strokeStyle=p,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,o=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),l=this.getPointPosition(s,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;let r=this.getIndexAngle(0),a,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,l)=>{if(l===0&&!t.reverse)return;let u=i.setContext(this.getContext(l)),p=lr(u.font);if(a=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){e.font=p.string,s=e.measureText(o.label).width,e.fillStyle=u.backdropColor;let f=Dr(u.backdropPadding);e.fillRect(-s/2-f.left,-a-p.size/2-f.top,s+f.width,p.size+f.height)}vl(e,o.label,0,-a,p,{color:u.color})}),e.restore()}drawTitle(){}};wc.id="radialLinear";wc.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:zm.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(n){return n},padding:5,centerPointLabels:!1}};wc.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};wc.descriptors={angleLines:{_fallback:"grid"}};var Wm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},_a=Object.keys(Wm);function $L(n,e){return n-e}function jM(n,e){if(Bi(e))return null;let t=n._adapter,{parser:i,round:r,isoWeekday:a}=n._parseOpts,s=e;return typeof i=="function"&&(s=i(s)),jn(s)||(s=typeof i=="string"?t.parse(s,i):t.parse(s)),s===null?null:(r&&(s=r==="week"&&(xc(a)||a===!0)?t.startOf(s,"isoWeek",a):t.startOf(s,r)),+s)}function GM(n,e,t,i){let r=_a.length;for(let a=_a.indexOf(n);a<r-1;++a){let s=Wm[_a[a]],o=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((t-e)/(o*s.size))<=i)return _a[a]}return _a[r-1]}function KL(n,e,t,i,r){for(let a=_a.length-1;a>=_a.indexOf(t);a--){let s=_a[a];if(Wm[s].common&&n._adapter.diff(r,i,s)>=e-1)return s}return _a[t?_a.indexOf(t):0]}function ZL(n){for(let e=_a.indexOf(n)+1,t=_a.length;e<t;++e)if(Wm[_a[e]].common)return _a[e]}function qM(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:i,hi:r}=bm(t,e),a=t[i]>=e?t[i]:t[r];n[a]=!0}}function JL(n,e,t,i){let r=n._adapter,a=+r.startOf(e[0].value,i),s=e[e.length-1].value,o,l;for(o=a;o<=s;o=+r.add(o,1,i))l=t[o],l>=0&&(e[l].major=!0);return e}function XM(n,e,t){let i=[],r={},a=e.length,s,o;for(s=0;s<a;++s)o=e[s],r[o]=s,i.push({value:o,major:!1});return a===0||!t?i:JL(n,i,r,t)}var Lx=(()=>{class n extends Sc{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i){let r=t.time||(t.time={}),a=this._adapter=new zD._date(t.adapters.date);a.init(i),Vd(r.displayFormats,a.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:jM(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,r=t.time.unit||"day",{min:a,max:s,minDefined:o,maxDefined:l}=this.getUserBounds();function u(p){!o&&!isNaN(p.min)&&(a=Math.min(a,p.min)),!l&&!isNaN(p.max)&&(s=Math.max(s,p.max))}(!o||!l)&&(u(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&u(this.getMinMax(!1))),a=jn(a)&&!isNaN(a)?a:+i.startOf(Date.now(),r),s=jn(s)&&!isNaN(s)?s:+i.endOf(Date.now(),r)+1,this.min=Math.min(a,s-1),this.max=Math.max(a+1,s)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],r=t[t.length-1]),{min:i,max:r}}buildTicks(){let t=this.options,i=t.time,r=t.ticks,a=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);let s=this.min,o=this.max,l=DC(a,s,o);return this._unit=i.unit||(r.autoSkip?GM(i.minUnit,this.min,this.max,this._getLabelCapacity(s)):KL(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:ZL(this._unit),this.initOffsets(a),t.reverse&&l.reverse(),XM(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t){let i=0,r=0,a,s;this.options.offset&&t.length&&(a=this.getDecimalForValue(t[0]),t.length===1?i=1-a:i=(this.getDecimalForValue(t[1])-a)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?r=s:r=(s-this.getDecimalForValue(t[t.length-2]))/2);let o=t.length<3?.5:.25;i=fr(i,0,o),r=fr(r,0,o),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){let t=this._adapter,i=this.min,r=this.max,a=this.options,s=a.time,o=s.unit||GM(s.minUnit,i,r,this._getLabelCapacity(i)),l=gi(s.stepSize,1),u=o==="week"?s.isoWeekday:!1,p=xc(u)||u===!0,f={},g=i,m,x;if(p&&(g=+t.startOf(g,"isoWeek",u)),g=+t.startOf(g,p?"day":o),t.diff(r,i,o)>1e5*l)throw new Error(i+" and "+r+" are too far apart with stepSize of "+l+" "+o);let y=a.ticks.source==="data"&&this.getDataTimestamps();for(m=g,x=0;m<r;m=+t.add(m,l,o),x++)qM(f,m,y);return(m===r||a.bounds==="ticks"||x===1)&&qM(f,m,y),Object.keys(f).sort((S,b)=>S-b).map(S=>+S)}getLabelForValue(t){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(t,r.tooltipFormat):i.format(t,r.displayFormats.datetime)}_tickFormatFunction(t,i,r,a){let s=this.options,o=s.time.displayFormats,l=this._unit,u=this._majorUnit,p=l&&o[l],f=u&&o[u],g=r[i],m=u&&f&&g&&g.major,x=this._adapter.format(t,a||(m?f:p)),y=s.ticks.callback;return y?mn(y,[x,i,r],this):x}generateTickLabels(t){let i,r,a;for(i=0,r=t.length;i<r;++i)a=t[i],a.label=this._tickFormatFunction(a.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(t){let i=this._offsets,r=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,r=this.ctx.measureText(t).width,a=Ja(this.isHorizontal()?i.maxRotation:i.minRotation),s=Math.cos(a),o=Math.sin(a),l=this._resolveTickFontOptions(0).size;return{w:r*s+l*o,h:r*o+l*s}}_getLabelCapacity(t){let i=this.options.time,r=i.displayFormats,a=r[i.unit]||r.millisecond,s=this._tickFormatFunction(t,0,XM(this,[t],this._majorUnit),a),o=this._getLabelSize(s),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],i,r;if(t.length)return t;let a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(i=0,r=a.length;i<r;++i)t=t.concat(a[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,r;if(t.length)return t;let a=this.getLabels();for(i=0,r=a.length;i<r;++i)t.push(jM(this,a[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return zv(t.sort($L))}}return n.id="time",n.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},n})();function Lm(n,e,t){let i=0,r=n.length-1,a,s,o,l;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=Fs(n,"pos",e)),{pos:a,time:o}=n[i],{pos:s,time:l}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=Fs(n,"time",e)),{time:a,pos:o}=n[i],{time:s,pos:l}=n[r]);let u=s-a;return u?o+(l-o)*(e-a)/u:o}var Qh=class extends Lx{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Lm(t,this.min),this._tableRange=Lm(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:i}=this,r=[],a=[],s,o,l,u,p;for(s=0,o=e.length;s<o;++s)u=e[s],u>=t&&u<=i&&r.push(u);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(s=0,o=r.length;s<o;++s)p=r[s+1],l=r[s-1],u=r[s],Math.round((p+l)/2)!==u&&a.push({time:u,pos:s/(o-1)});return a}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Lm(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Lm(this._table,i*this._tableRange+this._minPos,!0)}};Qh.id="timeseries";Qh.defaults=Lx.defaults;var QL=Object.freeze({__proto__:null,CategoryScale:$d,LinearScale:Zh,LogarithmicScale:Jh,RadialLinearScale:wc,TimeScale:Lx,TimeSeriesScale:Qh}),fE=[VD,YP,LL,QL];var tR=typeof global=="object"&&global&&global.Object===Object&&global,jm=tR;var eR=typeof self=="object"&&self&&self.Object===Object&&self,iR=jm||eR||Function("return this")(),Qa=iR;var nR=Qa.Symbol,Zd=nR;var mE=Object.prototype,rR=mE.hasOwnProperty,aR=mE.toString,ep=Zd?Zd.toStringTag:void 0;function sR(n){var e=rR.call(n,ep),t=n[ep];try{n[ep]=void 0;var i=!0}catch{}var r=aR.call(n);return i&&(e?n[ep]=t:delete n[ep]),r}var gE=sR;var oR=Object.prototype,lR=oR.toString;function cR(n){return lR.call(n)}var _E=cR;var dR="[object Null]",uR="[object Undefined]",vE=Zd?Zd.toStringTag:void 0;function hR(n){return n==null?n===void 0?uR:dR:vE&&vE in Object(n)?gE(n):_E(n)}var wl=hR;function pR(n){return n!=null&&typeof n=="object"}var Ws=pR;var fR=Array.isArray,ip=fR;function mR(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var va=mR;function gR(n){return n}var Gm=gR;var _R="[object AsyncFunction]",vR="[object Function]",xR="[object GeneratorFunction]",bR="[object Proxy]";function yR(n){if(!va(n))return!1;var e=wl(n);return e==vR||e==xR||e==_R||e==bR}var Jd=yR;var SR=Qa["__core-js_shared__"],qm=SR;var xE=function(){var n=/[^.]+$/.exec(qm&&qm.keys&&qm.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function wR(n){return!!xE&&xE in n}var bE=wR;var CR=Function.prototype,MR=CR.toString;function ER(n){if(n!=null){try{return MR.call(n)}catch{}try{return n+""}catch{}}return""}var yE=ER;var AR=/[\\^$.*+?()[\]{}|]/g,TR=/^\[object .+?Constructor\]$/,kR=Function.prototype,IR=Object.prototype,DR=kR.toString,PR=IR.hasOwnProperty,LR=RegExp("^"+DR.call(PR).replace(AR,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function RR(n){if(!va(n)||bE(n))return!1;var e=Jd(n)?LR:TR;return e.test(yE(n))}var SE=RR;function OR(n,e){return n?.[e]}var wE=OR;function NR(n,e){var t=wE(n,e);return SE(t)?t:void 0}var Qd=NR;var CE=Object.create,FR=function(){function n(){}return function(e){if(!va(e))return{};if(CE)return CE(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),ME=FR;function BR(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var EE=BR;function VR(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var AE=VR;var UR=800,zR=16,HR=Date.now;function WR(n){var e=0,t=0;return function(){var i=HR(),r=zR-(i-t);if(t=i,r>0){if(++e>=UR)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var TE=WR;function jR(n){return function(){return n}}var kE=jR;var GR=function(){try{var n=Qd(Object,"defineProperty");return n({},"",{}),n}catch{}}(),tu=GR;var qR=tu?function(n,e){return tu(n,"toString",{configurable:!0,enumerable:!1,value:kE(e),writable:!0})}:Gm,IE=qR;var XR=TE(IE),DE=XR;var YR=9007199254740991,$R=/^(?:0|[1-9]\d*)$/;function KR(n,e){var t=typeof n;return e=e??YR,!!e&&(t=="number"||t!="symbol"&&$R.test(n))&&n>-1&&n%1==0&&n<e}var Xm=KR;function ZR(n,e,t){e=="__proto__"&&tu?tu(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var eu=ZR;function JR(n,e){return n===e||n!==n&&e!==e}var Cl=JR;var QR=Object.prototype,tO=QR.hasOwnProperty;function eO(n,e,t){var i=n[e];(!(tO.call(n,e)&&Cl(i,t))||t===void 0&&!(e in n))&&eu(n,e,t)}var PE=eO;function iO(n,e,t,i){var r=!t;t||(t={});for(var a=-1,s=e.length;++a<s;){var o=e[a],l=i?i(t[o],n[o],o,t,n):void 0;l===void 0&&(l=n[o]),r?eu(t,o,l):PE(t,o,l)}return t}var LE=iO;var RE=Math.max;function nO(n,e,t){return e=RE(e===void 0?n.length-1:e,0),function(){for(var i=arguments,r=-1,a=RE(i.length-e,0),s=Array(a);++r<a;)s[r]=i[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=i[r];return o[e]=t(s),EE(n,this,o)}}var OE=nO;function rO(n,e){return DE(OE(n,e,Gm),n+"")}var NE=rO;var aO=9007199254740991;function sO(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=aO}var Ym=sO;function oO(n){return n!=null&&Ym(n.length)&&!Jd(n)}var iu=oO;function lO(n,e,t){if(!va(t))return!1;var i=typeof e;return(i=="number"?iu(t)&&Xm(e,t.length):i=="string"&&e in t)?Cl(t[e],n):!1}var FE=lO;function cO(n){return NE(function(e,t){var i=-1,r=t.length,a=r>1?t[r-1]:void 0,s=r>2?t[2]:void 0;for(a=n.length>3&&typeof a=="function"?(r--,a):void 0,s&&FE(t[0],t[1],s)&&(a=r<3?void 0:a,r=1),e=Object(e);++i<r;){var o=t[i];o&&n(e,o,i,a)}return e})}var BE=cO;var dO=Object.prototype;function uO(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||dO;return n===t}var $m=uO;function hO(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var VE=hO;var pO="[object Arguments]";function fO(n){return Ws(n)&&wl(n)==pO}var Rx=fO;var UE=Object.prototype,mO=UE.hasOwnProperty,gO=UE.propertyIsEnumerable,_O=Rx(function(){return arguments}())?Rx:function(n){return Ws(n)&&mO.call(n,"callee")&&!gO.call(n,"callee")},np=_O;function vO(){return!1}var zE=vO;var jE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,HE=jE&&typeof module=="object"&&module&&!module.nodeType&&module,xO=HE&&HE.exports===jE,WE=xO?Qa.Buffer:void 0,bO=WE?WE.isBuffer:void 0,yO=bO||zE,Km=yO;var SO="[object Arguments]",wO="[object Array]",CO="[object Boolean]",MO="[object Date]",EO="[object Error]",AO="[object Function]",TO="[object Map]",kO="[object Number]",IO="[object Object]",DO="[object RegExp]",PO="[object Set]",LO="[object String]",RO="[object WeakMap]",OO="[object ArrayBuffer]",NO="[object DataView]",FO="[object Float32Array]",BO="[object Float64Array]",VO="[object Int8Array]",UO="[object Int16Array]",zO="[object Int32Array]",HO="[object Uint8Array]",WO="[object Uint8ClampedArray]",jO="[object Uint16Array]",GO="[object Uint32Array]",Cn={};Cn[FO]=Cn[BO]=Cn[VO]=Cn[UO]=Cn[zO]=Cn[HO]=Cn[WO]=Cn[jO]=Cn[GO]=!0;Cn[SO]=Cn[wO]=Cn[OO]=Cn[CO]=Cn[NO]=Cn[MO]=Cn[EO]=Cn[AO]=Cn[TO]=Cn[kO]=Cn[IO]=Cn[DO]=Cn[PO]=Cn[LO]=Cn[RO]=!1;function qO(n){return Ws(n)&&Ym(n.length)&&!!Cn[wl(n)]}var GE=qO;function XO(n){return function(e){return n(e)}}var qE=XO;var XE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,rp=XE&&typeof module=="object"&&module&&!module.nodeType&&module,YO=rp&&rp.exports===XE,Ox=YO&&jm.process,$O=function(){try{var n=rp&&rp.require&&rp.require("util").types;return n||Ox&&Ox.binding&&Ox.binding("util")}catch{}}(),Nx=$O;var YE=Nx&&Nx.isTypedArray,KO=YE?qE(YE):GE,Zm=KO;var ZO=Object.prototype,JO=ZO.hasOwnProperty;function QO(n,e){var t=ip(n),i=!t&&np(n),r=!t&&!i&&Km(n),a=!t&&!i&&!r&&Zm(n),s=t||i||r||a,o=s?VE(n.length,String):[],l=o.length;for(var u in n)(e||JO.call(n,u))&&!(s&&(u=="length"||r&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Xm(u,l)))&&o.push(u);return o}var $E=QO;function tN(n,e){return function(t){return n(e(t))}}var KE=tN;function eN(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var ZE=eN;var iN=Object.prototype,nN=iN.hasOwnProperty;function rN(n){if(!va(n))return ZE(n);var e=$m(n),t=[];for(var i in n)i=="constructor"&&(e||!nN.call(n,i))||t.push(i);return t}var JE=rN;function aN(n){return iu(n)?$E(n,!0):JE(n)}var Jm=aN;var sN=Qd(Object,"create"),Mo=sN;function oN(){this.__data__=Mo?Mo(null):{},this.size=0}var QE=oN;function lN(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var tA=lN;var cN="__lodash_hash_undefined__",dN=Object.prototype,uN=dN.hasOwnProperty;function hN(n){var e=this.__data__;if(Mo){var t=e[n];return t===cN?void 0:t}return uN.call(e,n)?e[n]:void 0}var eA=hN;var pN=Object.prototype,fN=pN.hasOwnProperty;function mN(n){var e=this.__data__;return Mo?e[n]!==void 0:fN.call(e,n)}var iA=mN;var gN="__lodash_hash_undefined__";function _N(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Mo&&e===void 0?gN:e,this}var nA=_N;function nu(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}nu.prototype.clear=QE;nu.prototype.delete=tA;nu.prototype.get=eA;nu.prototype.has=iA;nu.prototype.set=nA;var Fx=nu;function vN(){this.__data__=[],this.size=0}var rA=vN;function xN(n,e){for(var t=n.length;t--;)if(Cl(n[t][0],e))return t;return-1}var Ml=xN;var bN=Array.prototype,yN=bN.splice;function SN(n){var e=this.__data__,t=Ml(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():yN.call(e,t,1),--this.size,!0}var aA=SN;function wN(n){var e=this.__data__,t=Ml(e,n);return t<0?void 0:e[t][1]}var sA=wN;function CN(n){return Ml(this.__data__,n)>-1}var oA=CN;function MN(n,e){var t=this.__data__,i=Ml(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}var lA=MN;function ru(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}ru.prototype.clear=rA;ru.prototype.delete=aA;ru.prototype.get=sA;ru.prototype.has=oA;ru.prototype.set=lA;var El=ru;var EN=Qd(Qa,"Map"),Qm=EN;function AN(){this.size=0,this.__data__={hash:new Fx,map:new(Qm||El),string:new Fx}}var cA=AN;function TN(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var dA=TN;function kN(n,e){var t=n.__data__;return dA(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Al=kN;function IN(n){var e=Al(this,n).delete(n);return this.size-=e?1:0,e}var uA=IN;function DN(n){return Al(this,n).get(n)}var hA=DN;function PN(n){return Al(this,n).has(n)}var pA=PN;function LN(n,e){var t=Al(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}var fA=LN;function au(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}au.prototype.clear=cA;au.prototype.delete=uA;au.prototype.get=hA;au.prototype.has=pA;au.prototype.set=fA;var mA=au;var RN=KE(Object.getPrototypeOf,Object),t0=RN;var ON="[object Object]",NN=Function.prototype,FN=Object.prototype,gA=NN.toString,BN=FN.hasOwnProperty,VN=gA.call(Object);function UN(n){if(!Ws(n)||wl(n)!=ON)return!1;var e=t0(n);if(e===null)return!0;var t=BN.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&gA.call(t)==VN}var _A=UN;function zN(){this.__data__=new El,this.size=0}var vA=zN;function HN(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var xA=HN;function WN(n){return this.__data__.get(n)}var bA=WN;function jN(n){return this.__data__.has(n)}var yA=jN;var GN=200;function qN(n,e){var t=this.__data__;if(t instanceof El){var i=t.__data__;if(!Qm||i.length<GN-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new mA(i)}return t.set(n,e),this.size=t.size,this}var SA=qN;function su(n){var e=this.__data__=new El(n);this.size=e.size}su.prototype.clear=vA;su.prototype.delete=xA;su.prototype.get=bA;su.prototype.has=yA;su.prototype.set=SA;var wA=su;var AA=typeof exports=="object"&&exports&&!exports.nodeType&&exports,CA=AA&&typeof module=="object"&&module&&!module.nodeType&&module,XN=CA&&CA.exports===AA,MA=XN?Qa.Buffer:void 0,EA=MA?MA.allocUnsafe:void 0;function YN(n,e){if(e)return n.slice();var t=n.length,i=EA?EA(t):new n.constructor(t);return n.copy(i),i}var TA=YN;var $N=Qa.Uint8Array,Bx=$N;function KN(n){var e=new n.constructor(n.byteLength);return new Bx(e).set(new Bx(n)),e}var kA=KN;function ZN(n,e){var t=e?kA(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var IA=ZN;function JN(n){return typeof n.constructor=="function"&&!$m(n)?ME(t0(n)):{}}var DA=JN;function QN(n){return function(e,t,i){for(var r=-1,a=Object(e),s=i(e),o=s.length;o--;){var l=s[n?o:++r];if(t(a[l],l,a)===!1)break}return e}}var PA=QN;var tF=PA(),LA=tF;function eF(n,e,t){(t!==void 0&&!Cl(n[e],t)||t===void 0&&!(e in n))&&eu(n,e,t)}var ap=eF;function iF(n){return Ws(n)&&iu(n)}var RA=iF;function nF(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var sp=nF;function rF(n){return LE(n,Jm(n))}var OA=rF;function aF(n,e,t,i,r,a,s){var o=sp(n,t),l=sp(e,t),u=s.get(l);if(u){ap(n,t,u);return}var p=a?a(o,l,t+"",n,e,s):void 0,f=p===void 0;if(f){var g=ip(l),m=!g&&Km(l),x=!g&&!m&&Zm(l);p=l,g||m||x?ip(o)?p=o:RA(o)?p=AE(o):m?(f=!1,p=TA(l,!0)):x?(f=!1,p=IA(l,!0)):p=[]:_A(l)||np(l)?(p=o,np(o)?p=OA(o):(!va(o)||Jd(o))&&(p=DA(l))):f=!1}f&&(s.set(l,p),r(p,l,i,a,s),s.delete(l)),ap(n,t,p)}var NA=aF;function FA(n,e,t,i,r){n!==e&&LA(e,function(a,s){if(r||(r=new wA),va(a))NA(n,e,s,t,FA,i,r);else{var o=i?i(sp(n,s),a,s+"",n,e,r):void 0;o===void 0&&(o=a),ap(n,s,o)}},Jm)}var BA=FA;var sF=BE(function(n,e,t){BA(n,e,t)}),e0=sF;var oF=(()=>{class n{constructor(){this.colorschemesOptions=new NS(void 0)}setColorschemesOptions(t){this.pColorschemesOptions=t,this.colorschemesOptions.next(t)}getColorschemesOptions(){return this.pColorschemesOptions}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UA=(()=>{class n{constructor(t,i,r){this.zone=i,this.themeService=r,this.type="bar",this.plugins=[],this.chartClick=new $a,this.chartHover=new $a,this.subs=[],this.ctx=t.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(WS()).subscribe(a=>this.themeChanged(a)))}ngOnChanges(t){let i=["type"],r=Object.getOwnPropertyNames(t);if(r.some(a=>i.includes(a))||r.every(a=>t[a].isFirstChange()))this.render();else{let a=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,a.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,a.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,a.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(t=>t.unsubscribe())}render(){return this.chart&&this.chart.destroy(),Co.register(...this.plugins),this.zone.runOutsideAngular(()=>this.chart=new Co(this.ctx,this.getChartConfiguration()))}update(t){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(t))}hideDataset(t,i){this.chart&&(this.chart.getDatasetMeta(t).hidden=i,this.update())}isDatasetHidden(t){return this.chart?.getDatasetMeta(t)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(t){this.themeOverrides=t,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return e0({onHover:(t,i)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:t,active:i}))},onClick:(t,i)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:t,active:i}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions()}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}}return n.\u0275fac=function(t){return new(t||n)(Vt(ia),Vt(mo),Vt(oF))},n.\u0275dir=On({type:n,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[Ed]}),n})(),lF=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],cF={datasets:{line:{backgroundColor:n=>ra(aa(n.datasetIndex),.4),borderColor:n=>ra(aa(n.datasetIndex),1),pointBackgroundColor:n=>ra(aa(n.datasetIndex),1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:n=>ra(aa(n.datasetIndex),.8)},bar:{backgroundColor:n=>ra(aa(n.datasetIndex),.6),borderColor:n=>ra(aa(n.datasetIndex),1),hoverBackgroundColor:n=>ra(aa(n.datasetIndex),.8),hoverBorderColor:n=>ra(aa(n.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:n=>ra(aa(n.dataIndex),.6),borderColor:"#fff",hoverBackgroundColor:n=>ra(aa(n.dataIndex),1),hoverBorderColor:n=>ra(aa(n.dataIndex),1)},get pie(){return this.doughnut},polarArea:{backgroundColor:n=>ra(aa(n.dataIndex),.6),borderColor:n=>ra(aa(n.dataIndex),1),hoverBackgroundColor:n=>ra(aa(n.dataIndex),.8),hoverBorderColor:n=>ra(aa(n.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function ra(n,e){return"rgba("+n.concat(e).join(",")+")"}function Vx(n,e){return Math.floor(Math.random()*(e-n+1))+n}function dF(){return[Vx(0,255),Vx(0,255),Vx(0,255)]}function aa(n=0){return lF[n]||dF()}var VA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Kn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();Co.register(...fE);var zA=(()=>{class n{constructor(t){t?.plugins&&Co.register(...t?.plugins);let i=e0(cF,t?.defaults||{});wi.set(i)}static forRoot(t){return{ngModule:n,providers:[{provide:VA,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(kr(VA,8))},n.\u0275mod=Rn({type:n}),n.\u0275inj=Ln({}),n})();var i0=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Be({type:n,selectors:[["app-home"]],decls:24,vars:0,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1"],["id","banner"],[1,"banner-text"],["src","assets/images/logo-1.png","alt","",1,"logo-size"],["src","assets/images/agasthya-font.png","alt",""],[1,"dev-txt"],[1,"pvt-txt"],[1,"welcome-txt"],["href","","routerLink","/login"],["type","submit"]],template:function(t,i){t&1&&(c(0,"html",0)(1,"head"),Lt(2,"meta",1)(3,"meta",2),c(4,"title"),h(5,"Clean Homes"),d()(),c(6,"body")(7,"section",3)(8,"div",4),Lt(9,"img",5)(10,"br")(11,"img",6),c(12,"h6",7),h(13,"DEVELOPER"),d(),c(14,"h6",8),h(15,"PRIVATE LIMITED"),d(),Lt(16,"br")(17,"br"),c(18,"h2",9),h(19,"Welcome To Agasthya CRM"),d(),Lt(20,"br"),c(21,"a",10)(22,"button",11),h(23,"Login"),d()()()()()())},dependencies:[on],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Poppins,sans-serif}#banner[_ngcontent-%COMP%]{background:linear-gradient(#00000080,#5e0f80),url(/assets/images/banner-background.png);background-size:cover;background-position:center;height:100vh;overflow:hidden;position:relative}.logo-size[_ngcontent-%COMP%]{height:150px;width:150px;animation:_ngcontent-%COMP%_continuous-rotation 5s linear infinite}@keyframes _ngcontent-%COMP%_continuous-rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.banner-text[_ngcontent-%COMP%]{text-align:center;color:#fff;padding-top:120px}.banner-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:130px;font-family:Kaushan Script,cursive}.dev-txt[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;letter-spacing:2px;margin-top:-25px;margin-left:5px;font-size:9px}.pvt-txt[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;letter-spacing:5px;margin-top:-20px;font-size:10px;color:#f48d3a}button[_ngcontent-%COMP%]{width:20%;margin-top:2%;padding:10px;border:none;border-radius:4px;background-color:#f48d3a;color:#fff;font-size:16px;cursor:pointer;transition:1s;font-family:Arial,Helvetica,sans-serif;font-weight:700}button[_ngcontent-%COMP%]:hover{background-color:#fff;color:#181818;border:#f48d3a 1px solid}",`

        @import url('https://fonts.googleapis.com/css2?family=Protest+Guerrilla&display=swap');
        .welcome-txt[_ngcontent-%COMP%] {
            display: inline-block;
            overflow: hidden;
            white-space: nowrap;
            animation: _ngcontent-%COMP%_typing 4s steps(40, end);
            font-family: "Protest Guerrilla", sans-serif;
            font-weight: 400;
            font-style: normal;
            font-size: 2rem;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            z-index: -1;
            overflow: hidden;
            opacity: 0.5;
        }

        @keyframes _ngcontent-%COMP%_typing {
            from {
                width: 0;
            }

            to {
                width: 100%;
            }
        }`]})};var HA={production:!0,apiUrl:"https://api.agasthyacrm.com/api/"};var _i=class n{apiUrl=HA.apiUrl;constructor(){}marketing_content_tracker_api(){return`${this.apiUrl}marketing_content_tracker/`}Collateraltrackerapi(){return`${this.apiUrl}marketing_collateral_tracker/`}marketingcalenderapi(){return`${this.apiUrl}marketing_calender/`}engagementanalyzingapi(){return`${this.apiUrl}marketing_engagement/`}marketingtotalleadapi(){return`${this.apiUrl}marketing_total_leads/`}marketingmiscellaneousapi(){return`${this.apiUrl}Marketing_miscellaneous/`}marketing_manage_task_api(){return`${this.apiUrl}marketing_manage_task/`}user_management_api(){return`${this.apiUrl}user_register/`}user_login_api(){return`${this.apiUrl}user_login/`}manage_department(){return`${this.apiUrl}manage_department/`}manage_designation(){return`${this.apiUrl}manage_designation/`}send_email_api(){return`${this.apiUrl}send-email/`}sales_dbtracker_api(){return`${this.apiUrl}Sales_database_tracker/`}sales_telecallers_comments_api(){return`${this.apiUrl}Sales_telecallers_commants/`}marketing_meeting_api(){return`${this.apiUrl}marketing_meeting/`}marketing_meeting_data_api(){return`${this.apiUrl}Marketing_Meeting_Data/`}sales_report_api(){return`${this.apiUrl}sales_report/`}site_details_api(){return`${this.apiUrl}site_details/`}redirect_card=null;set_redirect_card(e){this.redirect_card=e}get_redirect_card(){return this.redirect_card}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Kn({token:n,factory:n.\u0275fac,providedIn:"root"})};var oi=class n{constructor(){}saveUserData(e){sessionStorage.setItem("userData",JSON.stringify(e))}getUserData(){let e=sessionStorage.getItem("userData");return e?JSON.parse(e):null}clearUserData(){sessionStorage.removeItem("userData")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Kn({token:n,factory:n.\u0275fac,providedIn:"root"})};function hF(n,e){if(n&1){let t=Nt();c(0,"div",18)(1,"div",19)(2,"strong"),h(3,"Success!"),d(),h(4),c(5,"button",20),lt("click",function(){G(t);let r=k();return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}if(n&2){let t=k();_(4),de(" ",t.login_message," ")}}function pF(n,e){if(n&1){let t=Nt();c(0,"div",21)(1,"div",19)(2,"strong"),h(3,"Error!"),d(),h(4),c(5,"button",20),lt("click",function(){G(t);let r=k();return q(r.error_mgs_card=!1)}),h(6,"\xD7"),d()()()}if(n&2){let t=k();_(4),de(" ",t.errorMessage," ")}}var n0=class n{constructor(e,t,i,r,a){this.route=e;this.apiService=t;this.http=i;this.router=r;this.authService=a}passwordFieldType="password";togglePasswordVisibility(){this.passwordFieldType=this.passwordFieldType==="password"?"text":"password"}ngOnInit(){this.apifromservice()}login_api_url="";apifromservice(){this.login_api_url=this.apiService.user_login_api()}user_email="";user_password="";successmgs=!1;error_mgs_card=!1;errorMessage="";error_log;login_message="";login_btn(){debugger;let e=this.login_api_url,t={User_email_id:this.user_email,User_password:this.user_password},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{console.log(r),this.login_message=r.message;let a=r.user_data;this.authService.saveUserData(a),this.successmgs=!0,this.router.navigate(["/dashboard"])},r=>{this.error_log=r,this.get_error()})}get_error(){this.user_email.length==0&&(this.errorMessage="Enter Email ID!"),this.user_email.length==0?this.errorMessage="Enter Password!":(this.errorMessage=this.error_log.error?.error||"An unknown error occurred",console.error("Backend returned code:",this.error_log.status),console.error("Response body:",this.error_log.error)),this.error_mgs_card=!0}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(sn),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-login"]],decls:31,vars:6,consts:[[1,"log-container"],["class","alert-card fade-in",4,"ngIf"],["class","alert-card-error fade-in",4,"ngIf"],[1,"left-side"],[1,"img-container"],["src","assets/images/logo-1.png","alt","",1,"logo-style"],["src","assets/images/agasthya-font.png","alt","",1,"logo-font"],[1,"dev-txt"],[1,"pvt-txt"],[1,"right-side"],[1,"login-container"],[1,"form-group"],["for","username"],["required","Pleace Enter your Email id","placeholder","email","type","email","id","username","name","username",3,"ngModelChange","ngModel"],["for","password"],["placeholder","password","id","password","name","password",3,"ngModelChange","ngModel","type"],[1,"far",3,"click","ngClass"],["type","submit",1,"login-btn",3,"click"],[1,"alert-card","fade-in"],[1,"alert-content"],[1,"close-btn",3,"click"],[1,"alert-card-error","fade-in"]],template:function(t,i){t&1&&(c(0,"div",0),rt(1,hF,7,1,"div",1)(2,pF,7,1,"div",2),c(3,"div",3)(4,"div",4)(5,"div"),Lt(6,"img",5),d(),c(7,"div"),Lt(8,"img",6),c(9,"h6",7),h(10,"DEVELOPER"),d(),c(11,"h6",8),h(12,"PRIVATE LIMITED"),d(),Lt(13,"br")(14,"br"),d()()(),c(15,"div",9)(16,"div",10)(17,"h2"),h(18,"Login"),d(),c(19,"form")(20,"div",11)(21,"label",12),h(22,"Email"),d(),c(23,"input",13),vt("ngModelChange",function(a){return _t(i.user_email,a)||(i.user_email=a),a}),d()(),c(24,"div",11)(25,"label",14),h(26,"Password"),d(),c(27,"input",15),vt("ngModelChange",function(a){return _t(i.user_password,a)||(i.user_password=a),a}),d(),c(28,"i",16),lt("click",function(){return i.togglePasswordVisibility()}),d()(),c(29,"button",17),lt("click",function(){return i.login_btn()}),h(30,"Login"),d()()()()()),t&2&&(_(),D("ngIf",i.successmgs),_(),D("ngIf",i.error_mgs_card),_(21),gt("ngModel",i.user_email),_(4),gt("ngModel",i.user_password),D("type",i.passwordFieldType),_(),D("ngClass",i.passwordFieldType==="password"?"fa-eye":"fa-eye-slash"))},dependencies:[Ke,mi,aC,ln,Ki,Qw,gs,Gi,Ev],styles:[".log-container[_ngcontent-%COMP%]{display:flex;height:100vh}.left-side[_ngcontent-%COMP%]{flex:1;background-color:#582c6b;display:flex;justify-content:center;align-items:center}.right-side[_ngcontent-%COMP%]{background:linear-gradient(#00000080,#181818),url(/assets/images/login-bgimg.jpg);flex:1;background-color:#fff;display:flex;justify-content:center;align-items:center;background-size:cover;background-position:center}.img-container[_ngcontent-%COMP%]{width:80%;max-width:400px;padding:0;margin-bottom:20%;margin-left:20%}.login-container[_ngcontent-%COMP%]{width:40%;max-width:400px;padding:20px;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 8px #0000001a;background-color:#fff}.logo-style[_ngcontent-%COMP%]{height:150px;width:150px;animation:_ngcontent-%COMP%_continuous-rotation 5s linear infinite;margin-bottom:8%;margin-left:11%}.logo-font[_ngcontent-%COMP%]{margin-top:-20%}@keyframes _ngcontent-%COMP%_continuous-rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.img-container[_ngcontent-%COMP%]   .dev-txt[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;letter-spacing:2px;margin-top:-40px;margin-left:20%;color:#fff;font-size:9px}.pvt-txt[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;letter-spacing:5px;margin-top:-3%;margin-left:10%;font-size:9px;color:#f48d3a}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px;position:relative}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}input[_ngcontent-%COMP%]{width:100%;color:gray;padding:8px;border:1px solid #ccc;border-radius:4px}i[_ngcontent-%COMP%]{position:absolute;top:49px;right:2%;transform:translateY(-50%);cursor:pointer;color:#868686;padding:2px}label[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}.login-btn[_ngcontent-%COMP%]{width:100%;padding:10px;border:none;border-radius:4px;background-color:#582c6b;color:#fff;font-size:16px;cursor:pointer;transition:1s}.login-btn[_ngcontent-%COMP%]:hover{background-color:#fff;color:#181818;border:#582c6b 1px solid}@media screen and (max-width: 768px){.left-side[_ngcontent-%COMP%]{display:none}.login-container[_ngcontent-%COMP%]{width:90%}}"]})};var up={};up.d=(n,e)=>{for(var t in e)up.o(e,t)&&!up.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};up.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var ci=globalThis.pdfjsLib={};up.d(ci,{AbortException:()=>To,AnnotationEditorLayer:()=>d6,AnnotationEditorParamsType:()=>Ri,AnnotationEditorType:()=>xi,AnnotationEditorUIManager:()=>_p,AnnotationLayer:()=>ty,AnnotationMode:()=>Tl,ColorPicker:()=>V0,DOMSVGFactory:()=>Sp,DrawLayer:()=>cy,FeatureTest:()=>Pr,GlobalWorkerOptions:()=>Ac,ImageKind:()=>d0,InvalidPDFException:()=>p0,MissingPDFException:()=>Tc,OPS:()=>vs,OutputScale:()=>gp,PDFDataRangeTransport:()=>A0,PDFDateString:()=>m0,PDFWorker:()=>cu,PasswordResponses:()=>vF,PermissionFlag:()=>_F,PixelsPerInch:()=>Il,RenderingCancelledException:()=>mp,TextLayer:()=>bp,UnexpectedResponseException:()=>hu,Util:()=>We,VerbosityLevel:()=>W0,XfaLayer:()=>I0,build:()=>o6,createValidAbsoluteUrl:()=>SF,fetchData:()=>X0,getDocument:()=>n6,getFilenameFromUrl:()=>IF,getPdfFilenameFromUrl:()=>DF,getXfaPageViewport:()=>PF,isDataScheme:()=>Y0,isPdfFile:()=>hy,noContextMenu:()=>bs,normalizeUnicode:()=>AF,setLayerDimensions:()=>kc,shadow:()=>Ii,stopEvent:()=>xs,version:()=>s6});var sa=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),a3=[1,0,0,1,0,0],Gx=[.001,0,0,.001,0,0],fF=1e7,c0=1.35,mF=.35,Let=mF/c0,Pa={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Tl={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},gF="pdfjs_internal_editor_",xi={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ri={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},_F={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},zr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},d0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},gr={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var op={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var W0={ERRORS:0,WARNINGS:1,INFOS:5},vs={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},vF={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},j0=W0.WARNINGS;function xF(n){Number.isInteger(n)&&(j0=n)}function bF(){return j0}function G0(n){j0>=W0.INFOS&&console.log(`Info: ${n}`)}function Ci(n){j0>=W0.WARNINGS&&console.log(`Warning: ${n}`)}function un(n){throw new Error(n)}function ur(n,e){n||un(e)}function yF(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function SF(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=EF(n)}catch{}let i=e?new URL(n,e):new URL(n);if(yF(i))return i}catch{}return null}function Ii(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}var Dl=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}(),hp=class extends Dl{constructor(e,t){super(e,"PasswordException"),this.code=t}},pp=class extends Dl{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}},p0=class extends Dl{constructor(e){super(e,"InvalidPDFException")}},Tc=class extends Dl{constructor(e){super(e,"MissingPDFException")}},hu=class extends Dl{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}},qx=class extends Dl{constructor(e){super(e,"FormatError")}},To=class extends Dl{constructor(e){super(e,"AbortException")}};function s3(n){(typeof n!="object"||n?.length===void 0)&&un("Invalid argument for bytesToString");let e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);let i=[];for(let r=0;r<e;r+=t){let a=Math.min(r+t,e),s=n.subarray(r,a);i.push(String.fromCharCode.apply(null,s))}return i.join("")}function q0(n){typeof n!="string"&&un("Invalid argument for stringToBytes");let e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=n.charCodeAt(i)&255;return t}function wF(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function dy(n){let e=Object.create(null);for(let[t,i]of n)e[t]=i;return e}function CF(){let n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function MF(){try{return new Function(""),!0}catch{return!1}}var Pr=class{static get isLittleEndian(){return Ii(this,"isLittleEndian",CF())}static get isEvalSupported(){return Ii(this,"isEvalSupported",MF())}static get isOffscreenCanvasSupported(){return Ii(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ii(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?Ii(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):Ii(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return Ii(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},Ux=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0")),We=class{static makeHexColor(e,t,i){return`#${Ux[e]}${Ux[t]}${Ux[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){let i=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[i,r]}static applyInverseTransform(e,t){let i=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,a=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[r,a]}static getAxialAlignedBoundingBox(e,t){let i=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),a=this.applyTransform([e[0],e[3]],t),s=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],r[0],a[0],s[0]),Math.min(i[1],r[1],a[1],s[1]),Math.max(i[0],r[0],a[0],s[0]),Math.max(i[1],r[1],a[1],s[1])]}static inverseTransform(e){let t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){let t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],a=e[2]*t[0]+e[3]*t[2],s=e[2]*t[1]+e[3]*t[3],o=(i+s)/2,l=Math.sqrt((i+s)**2-4*(i*s-a*r))/2,u=o+l||1,p=o-l||1;return[Math.sqrt(u),Math.sqrt(p)]}static normalizeRect(e){let t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){let i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;let a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>s?null:[i,a,r,s]}static#t(e,t,i,r,a,s,o,l,u,p){if(u<=0||u>=1)return;let f=1-u,g=u*u,m=g*u,x=f*(f*(f*e+3*u*t)+3*g*i)+m*r,y=f*(f*(f*a+3*u*s)+3*g*o)+m*l;p[0]=Math.min(p[0],x),p[1]=Math.min(p[1],y),p[2]=Math.max(p[2],x),p[3]=Math.max(p[3],y)}static#e(e,t,i,r,a,s,o,l,u,p,f,g){if(Math.abs(u)<1e-12){Math.abs(p)>=1e-12&&this.#t(e,t,i,r,a,s,o,l,-f/p,g);return}let m=p**2-4*f*u;if(m<0)return;let x=Math.sqrt(m),y=2*u;this.#t(e,t,i,r,a,s,o,l,(-p+x)/y,g),this.#t(e,t,i,r,a,s,o,l,(-p-x)/y,g)}static bezierBoundingBox(e,t,i,r,a,s,o,l,u){return u?(u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,l)):u=[Math.min(e,o),Math.min(t,l),Math.max(e,o),Math.max(t,l)],this.#e(e,i,a,o,t,r,s,l,3*(-e+3*(i-a)+o),6*(e-2*i+a),3*(i-e),u),this.#e(e,i,a,o,t,r,s,l,3*(-t+3*(r-s)+l),6*(t-2*r+s),3*(r-t),u),u}};function EF(n){return decodeURIComponent(escape(n))}var zx=null,WA=null;function AF(n){return zx||(zx=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,WA=new Map([["\uFB05","\u017Ft"]])),n.replaceAll(zx,(e,t,i)=>t?t.normalize("NFKC"):WA.get(i))}function TF(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();let n=new Uint8Array(32);return crypto.getRandomValues(n),s3(n)}var uy="pdfjs_internal_id_",Eo={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function kF(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(s3(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});var Ao="http://www.w3.org/2000/svg",Il=class{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF};function X0(n,e="text"){return Ne(this,null,function*(){if(dp(n,document.baseURI)){let t=yield fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{let r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})})}var fp=class n{constructor({viewBox:e,scale:t,rotation:i,offsetX:r=0,offsetY:a=0,dontFlip:s=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=r,this.offsetY=a;let o=(e[2]+e[0])/2,l=(e[3]+e[1])/2,u,p,f,g;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,p=0,f=0,g=1;break;case 90:u=0,p=1,f=1,g=0;break;case 270:u=0,p=-1,f=-1,g=0;break;case 0:u=1,p=0,f=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}s&&(f=-f,g=-g);let m,x,y,S;u===0?(m=Math.abs(l-e[1])*t+r,x=Math.abs(o-e[0])*t+a,y=(e[3]-e[1])*t,S=(e[2]-e[0])*t):(m=Math.abs(o-e[0])*t+r,x=Math.abs(l-e[1])*t+a,y=(e[2]-e[0])*t,S=(e[3]-e[1])*t),this.transform=[u*t,p*t,f*t,g*t,m-u*t*o-f*t*l,x-p*t*o-g*t*l],this.width=y,this.height=S}get rawDims(){let{viewBox:e}=this;return Ii(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:a=!1}={}){return new n({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:a})}convertToViewportPoint(e,t){return We.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){let t=We.applyTransform([e[0],e[1]],this.transform),i=We.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return We.applyInverseTransform([e,t],this.transform)}},mp=class extends Dl{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}};function Y0(n){let e=n.length,t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function hy(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function IF(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function DF(n,e="document.pdf"){if(typeof n!="string")return e;if(Y0(n))return Ci('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;let t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(n),a=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(a&&(a=a[0],a.includes("%")))try{a=i.exec(decodeURIComponent(a))[0]}catch{}return a||e}var f0=class{started=Object.create(null);times=[];time(e){e in this.started&&Ci(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ci(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){let e=[],t=0;for(let{name:i}of this.times)t=Math.max(i.length,t);for(let{name:i,start:r,end:a}of this.times)e.push(`${i.padEnd(t)} ${a-r}ms
`);return e.join("")}};function dp(n,e){try{let{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function bs(n){n.preventDefault()}function xs(n){n.preventDefault(),n.stopPropagation()}function jA(n){console.log("Deprecated API usage: "+n)}var m0=class{static#t;static toDateObject(e){if(!e||typeof e!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let t=this.#t.exec(e);if(!t)return null;let i=parseInt(t[1],10),r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;let u=t[7]||"Z",p=parseInt(t[8],10);p=p>=0&&p<=23?p:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,u==="-"?(s+=p,o+=f):u==="+"&&(s-=p,o-=f),new Date(Date.UTC(i,r,a,s,o,l))}};function PF(n,{scale:e=1,rotation:t=0}){let{width:i,height:r}=n.attributes.style,a=[0,0,parseInt(i),parseInt(r)];return new fp({viewBox:a,scale:e,rotation:t})}function py(n){if(n.startsWith("#")){let e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ci(`Not a valid color format: "${n}"`),[0,0,0])}function LF(n){let e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(let t of n.keys()){e.style.color=t;let i=window.getComputedStyle(e).color;n.set(t,py(i))}e.remove()}function An(n){let{a:e,b:t,c:i,d:r,e:a,f:s}=n.getTransform();return[e,t,i,r,a,s]}function js(n){let{a:e,b:t,c:i,d:r,e:a,f:s}=n.getTransform().invertSelf();return[e,t,i,r,a,s]}function kc(n,e,t=!1,i=!0){if(e instanceof fp){let{pageWidth:r,pageHeight:a}=e.rawDims,{style:s}=n,o=Pr.isCSSRoundSupported,l=`var(--scale-factor) * ${r}px`,u=`var(--scale-factor) * ${a}px`,p=o?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,f=o?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(s.width=p,s.height=f):(s.width=f,s.height=p)}i&&n.setAttribute("data-main-rotation",e.rotation)}var gp=class{constructor(){let e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}},Xx=class n{#t=null;#e=null;#i;#n=null;#a=null;static#r=null;constructor(e){this.#i=e,n.#r||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){let e=this.#t=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");let t=this.#i._uiManager._signal;e.addEventListener("contextmenu",bs,{signal:t}),e.addEventListener("pointerdown",n.#c,{signal:t});let i=this.#n=document.createElement("div");i.className="buttons",e.append(i);let r=this.#i.toolbarPosition;if(r){let{style:a}=e,s=this.#i._uiManager.direction==="ltr"?1-r[0]:r[0];a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return this.#u(),e}get div(){return this.#t}static#c(e){e.stopPropagation()}#o(e){this.#i._focusEventsAllowed=!1,xs(e)}#d(e){this.#i._focusEventsAllowed=!0,xs(e)}#l(e){let t=this.#i._uiManager._signal;e.addEventListener("focusin",this.#o.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",bs,{signal:t})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown()}#u(){let{editorType:e,_uiManager:t}=this.#i,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",n.#r[e]),this.#l(i),i.addEventListener("click",r=>{t.delete()},{signal:t._signal}),this.#n.append(i)}get#s(){let e=document.createElement("div");return e.className="divider",e}addAltText(e){return Ne(this,null,function*(){let t=yield e.render();this.#l(t),this.#n.prepend(t,this.#s),this.#a=e})}addColorPicker(e){this.#e=e;let t=e.renderButton();this.#l(t),this.#n.prepend(t,this.#s)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}},Yx=class{#t=null;#e=null;#i;constructor(e){this.#i=e}#n(){let e=this.#e=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",bs,{signal:this.#i._signal});let t=this.#t=document.createElement("div");return t.className="buttons",e.append(t),this.#r(),e}#a(e,t){let i=0,r=0;for(let a of e){let s=a.y+a.height;if(s<i)continue;let o=a.x+(t?a.width:0);if(s>i){r=o,i=s;continue}t?o>r&&(r=o):o<r&&(r=o)}return[t?1-r:r,i]}show(e,t,i){let[r,a]=this.#a(t,i),{style:s}=this.#e||=this.#n();e.append(this.#e),s.insetInlineEnd=`${100*r}%`,s.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(){let e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");let t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");let i=this.#i._signal;e.addEventListener("contextmenu",bs,{signal:i}),e.addEventListener("click",()=>{this.#i.highlightSelection("floating_button")},{signal:i}),this.#t.append(e)}};function g0(n,e,t){for(let i of t)e.addEventListener(i,n[i].bind(n))}var $x=class{#t=0;get id(){return`${gF}${this.#t++}`}},Kx=class n{#t=TF();#e=0;#i=null;static get _isSVGFittingCanvas(){let e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;let a=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Ii(this,"_isSVGFittingCanvas",a)}#n(e,t){return Ne(this,null,function*(){this.#i||=new Map;let i=this.#i.get(e);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof t=="string"?(i.url=t,r=yield X0(t,"blob")):t instanceof File?r=i.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){let a=n._isSVGFittingCanvas,s=new FileReader,o=new Image,l=new Promise((u,p)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,u()},s.onload=()=>Ne(this,null,function*(){let f=i.svgUrl=s.result;o.src=(yield a)?`${f}#svgView(preserveAspectRatio(none))`:f}),o.onerror=s.onerror=p});s.readAsDataURL(r),yield l}else i.bitmap=yield createImageBitmap(r);i.refCounter=1}catch(r){Ci(r),i=null}return this.#i.set(e,i),i&&this.#i.set(i.id,i),i})}getFromFile(e){return Ne(this,null,function*(){let{lastModified:t,name:i,size:r,type:a}=e;return this.#n(`${t}_${i}_${r}_${a}`,e)})}getFromUrl(e){return Ne(this,null,function*(){return this.#n(e,e)})}getFromBlob(e,t){return Ne(this,null,function*(){let i=yield t;return this.#n(e,i)})}getFromId(e){return Ne(this,null,function*(){this.#i||=new Map;let t=this.#i.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){let{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)})}getFromCanvas(e,t){this.#i||=new Map;let i=this.#i.get(e);if(i?.bitmap)return i.refCounter+=1,i;let r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(e,i),this.#i.set(i.id,i),i}getSvgUrl(e){let t=this.#i.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#i||=new Map;let t=this.#i.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;let{bitmap:i}=t;if(!t.url&&!t.file){let r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=r.convertToBlob()}i.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#t}_`)}},Zx=class{#t=[];#e=!1;#i;#n=-1;constructor(e=128){this.#i=e}add({cmd:e,undo:t,post:i,mustExec:r,type:a=NaN,overwriteIfSameType:s=!1,keepUndo:o=!1}){if(r&&e(),this.#e)return;let l={cmd:e,undo:t,post:i,type:a};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(l);return}if(s&&this.#t[this.#n].type===a){o&&(l.undo=this.#t[this.#n].undo),this.#t[this.#n]=l;return}let u=this.#n+1;u===this.#i?this.#t.splice(0,1):(this.#n=u,u<this.#t.length&&this.#t.splice(u)),this.#t.push(l)}undo(){if(this.#n===-1)return;this.#e=!0;let{undo:e,post:t}=this.#t[this.#n];e(),t?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;let{cmd:e,post:t}=this.#t[this.#n];e(),t?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#t[t].type!==e){this.#t.splice(t+1,this.#n-t),this.#n=t;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}},Ic=class{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:t}=Pr.platform;for(let[i,r,a={}]of e)for(let s of i){let o=s.startsWith("mac+");t&&o?(this.callbacks.set(s.slice(4),{callback:r,options:a}),this.allKeys.add(s.split("+").at(-1))):!t&&!o&&(this.callbacks.set(s,{callback:r,options:a}),this.allKeys.add(s.split("+").at(-1)))}}#t(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);let t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;let i=this.callbacks.get(this.#t(t));if(!i)return;let{callback:r,options:{bubbles:a=!1,args:s=[],checker:o=null}}=i;o&&!o(e,t)||(r.bind(e,...s,t)(),a||xs(t))}},Jx=class n{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let e=new Map([["CanvasText",null],["Canvas",null]]);return LF(e),Ii(this,"_colors",e)}convert(e){let t=py(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(let[i,r]of this._colors)if(r.every((a,s)=>a===t[s]))return n._colorsMapping.get(i);return t}getHexCode(e){let t=this._colors.get(e);return t?We.makeHexColor(...t):e}},_p=(()=>{class n{#t=new AbortController;#e=null;#i=new Map;#n=new Map;#a=null;#r=null;#c=null;#o=new Zx;#d=null;#l=null;#u=0;#s=new Set;#h=null;#p=null;#f=new Set;_editorUndoBar=null;#g=!1;#m=!1;#_=!1;#v=null;#b=null;#y=null;#C=null;#M=!1;#E=null;#T=new $x;#S=!1;#k=!1;#A=null;#I=null;#R=null;#B=null;#w=xi.NONE;#x=new Set;#L=null;#V=null;#z=null;#H={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#N=[0,0];#P=null;#U=null;#q=null;#O=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let t=n.prototype,i=o=>o.#U.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:l})=>{if(l instanceof HTMLInputElement){let{type:u}=l;return u!=="text"&&u!=="number"}return!0},a=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Ii(this,"_keyboardManager",new Ic([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],t.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:r}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&o.#U.contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&o.#U.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:i}]]))}constructor(t,i,r,a,s,o,l,u,p,f,g,m){let x=this._signal=this.#t.signal;this.#U=t,this.#q=i,this.#a=r,this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:x}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),a._on("setpreference",this.onSetPreference.bind(this),{signal:x}),a._on("switchannotationeditorparams",y=>this.updateParams(y.type,y.value),{signal:x}),this.#et(),this.#at(),this.#Y(),this.#r=s.annotationStorage,this.#v=s.filterFactory,this.#V=o,this.#C=l||null,this.#g=u,this.#m=p,this.#_=f,this.#B=g||null,this.viewParameters={realScale:Il.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null}destroy(){this.#O?.resolve(),this.#O=null,this.#t?.abort(),this.#t=null,this._signal=null;for(let t of this.#n.values())t.destroy();this.#n.clear(),this.#i.clear(),this.#f.clear(),this.#e=null,this.#x.clear(),this.#o.destroy(),this.#a?.destroy(),this.#E?.hide(),this.#E=null,this.#b&&(clearTimeout(this.#b),this.#b=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#B}get useNewAltTextFlow(){return this.#m}get useNewAltTextWhenAddingImage(){return this.#_}get hcmFilter(){return Ii(this,"hcmFilter",this.#V?this.#v.addHCMFilter(this.#V.foreground,this.#V.background):"none")}get direction(){return Ii(this,"direction",getComputedStyle(this.#U).direction)}get highlightColors(){return Ii(this,"highlightColors",this.#C?new Map(this.#C.split(",").map(t=>t.split("=").map(i=>i.trim()))):null)}get highlightColorNames(){return Ii(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#l=t}setMainHighlightColorPicker(t){this.#R=t}editAltText(t,i=!1){this.#a?.editAltText(this,t,i)}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){switch(t){case"enableNewAltTextWhenAddingImage":this.#_=i;break}}onPageChanging({pageNumber:t}){this.#u=t-1}focusMainContainer(){this.#U.focus()}findParent(t,i){for(let r of this.#n.values()){let{x:a,y:s,width:o,height:l}=r.div.getBoundingClientRect();if(t>=a&&t<=a+o&&i>=s&&i<=s+l)return r}return null}disableUserSelect(t=!1){this.#q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#f.add(t)}removeShouldRescale(t){this.#f.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Il.PDF_TO_CSS_UNITS;for(let i of this.#f)i.onScaleChanging();this.#l?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#j({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#X(t){let{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(let r of this.#n.values())if(r.hasTextLayer(t))return r;return null}highlightSelection(t=""){let i=document.getSelection();if(!i||i.isCollapsed)return;let{anchorNode:r,anchorOffset:a,focusNode:s,focusOffset:o}=i,l=i.toString(),p=this.#j(i).closest(".textLayer"),f=this.getSelectionBoxes(p);if(!f)return;i.empty();let g=this.#X(p),m=this.#w===xi.NONE,x=()=>{g?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:f,anchorNode:r,anchorOffset:a,focusNode:s,focusOffset:o,text:l}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(xi.HIGHLIGHT,x);return}x()}#Q(){let t=document.getSelection();if(!t||t.isCollapsed)return;let r=this.#j(t).closest(".textLayer"),a=this.getSelectionBoxes(r);a&&(this.#E||=new Yx(this),this.#E.show(r,a,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#r&&!this.#r.has(t.id)&&this.#r.setValue(t.id,t)}#tt(){let t=document.getSelection();if(!t||t.isCollapsed){this.#L&&(this.#E?.hide(),this.#L=null,this.#D({hasSelectedText:!1}));return}let{anchorNode:i}=t;if(i===this.#L)return;let a=this.#j(t).closest(".textLayer");if(!a){this.#L&&(this.#E?.hide(),this.#L=null,this.#D({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#L=i,this.#D({hasSelectedText:!0}),!(this.#w!==xi.HIGHLIGHT&&this.#w!==xi.NONE)&&(this.#w===xi.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#M=this.isShiftKeyDown,!this.isShiftKeyDown)){let s=this.#w===xi.HIGHLIGHT?this.#X(a):null;s?.toggleDrawing();let o=new AbortController,l=this.combinedSignal(o),u=p=>{p.type==="pointerup"&&p.button!==0||(o.abort(),s?.toggleDrawing(!0),p.type==="pointerup"&&this.#G("main_toolbar"))};window.addEventListener("pointerup",u,{signal:l}),window.addEventListener("blur",u,{signal:l})}}#G(t=""){this.#w===xi.HIGHLIGHT?this.highlightSelection(t):this.#g&&this.#Q()}#et(){document.addEventListener("selectionchange",this.#tt.bind(this),{signal:this._signal})}#it(){if(this.#y)return;this.#y=new AbortController;let t=this.combinedSignal(this.#y);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#nt(){this.#y?.abort(),this.#y=null}blur(){if(this.isShiftKeyDown=!1,this.#M&&(this.#M=!1,this.#G("main_toolbar")),!this.hasSelection)return;let{activeElement:t}=document;for(let i of this.#x)if(i.div.contains(t)){this.#I=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#I)return;let[t,i]=this.#I;this.#I=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#Y(){if(this.#A)return;this.#A=new AbortController;let t=this.combinedSignal(this.#A);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#rt(){this.#A?.abort(),this.#A=null}#$(){if(this.#d)return;this.#d=new AbortController;let t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#K(){this.#d?.abort(),this.#d=null}#at(){let t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Y(),this.#$()}removeEditListeners(){this.#rt(),this.#K()}dragOver(t){for(let{type:i}of t.dataTransfer.items)for(let r of this.#p)if(r.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(let i of t.dataTransfer.items)for(let r of this.#p)if(r.isHandlingMimeForPasting(i.type)){r.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;let i=[];for(let r of this.#x){let a=r.serialize(!0);a&&i.push(a)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}paste(t){return Ne(this,null,function*(){t.preventDefault();let{clipboardData:i}=t;for(let s of i.items)for(let o of this.#p)if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let r=i.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(s){Ci(`paste: "${s.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();let a=this.currentLayer;try{let s=[];for(let u of r){let p=yield a.deserialize(u);if(!p)return;s.push(p)}let o=()=>{for(let u of s)this.#Z(u);this.#J(s)},l=()=>{for(let u of s)u.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(s){Ci(`paste: "${s.message}".`)}})}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#w!==xi.NONE&&!this.isEditorHandlingKeyboard&&n._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#M&&(this.#M=!1,this.#G("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#D(t){Object.entries(t).some(([r,a])=>this.#H[r]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#H,t)}),this.#w===xi.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#F([[Ri.HIGHLIGHT_FREE,!0]]))}#F(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#it(),this.#$(),this.#D({isEditing:this.#w!==xi.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#nt(),this.#K(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#p){this.#p=t;for(let i of this.#p)this.#F(i.defaultPropertiesToUpdate)}}getId(){return this.#T.id}get currentLayer(){return this.#n.get(this.#u)}getLayer(t){return this.#n.get(t)}get currentPageIndex(){return this.#u}addLayer(t){this.#n.set(t.pageIndex,t),this.#S?t.enable():t.disable()}removeLayer(t){this.#n.delete(t.pageIndex)}updateMode(t,i=null,r=!1){return Ne(this,null,function*(){if(this.#w!==t&&!(this.#O&&(yield this.#O.promise,!this.#O))){if(this.#O=Promise.withResolvers(),this.#w=t,t===xi.NONE){this.setEditingState(!1),this.#ot(),this._editorUndoBar?.hide(),this.#O.resolve();return}this.setEditingState(!0),yield this.#st(),this.unselectAll();for(let a of this.#n.values())a.updateMode(t);if(!i){r&&this.addNewEditorFromKeyboard(),this.#O.resolve();return}for(let a of this.#i.values())a.annotationElementId===i?(this.setSelected(a),a.enterInEditMode()):a.unselect();this.#O.resolve()}})}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#w&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,i){if(this.#p){switch(t){case Ri.CREATE:this.currentLayer.addNewEditor();return;case Ri.HIGHLIGHT_DEFAULT_COLOR:this.#R?.updateColor(i);break;case Ri.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#z||=new Map).set(t,i),this.showAllEditors("highlight",i);break}for(let r of this.#x)r.updateParams(t,i);for(let r of this.#p)r.updateDefaultParams(t,i)}}showAllEditors(t,i,r=!1){for(let s of this.#i.values())s.editorType===t&&s.show(i);(this.#z?.get(Ri.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#F([[Ri.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#k!==t){this.#k=t;for(let i of this.#n.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}#st(){return Ne(this,null,function*(){if(!this.#S){this.#S=!0;let t=[];for(let i of this.#n.values())t.push(i.enable());yield Promise.all(t);for(let i of this.#i.values())i.enable()}})}#ot(){if(this.unselectAll(),this.#S){this.#S=!1;for(let t of this.#n.values())t.disable();for(let t of this.#i.values())t.disable()}}getEditors(t){let i=[];for(let r of this.#i.values())r.pageIndex===t&&i.push(r);return i}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.focusMainContainer(),this.#b=null},0)),this.#i.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#s.has(t.annotationElementId))&&this.#r?.remove(t.id)}addDeletedAnnotationElement(t){this.#s.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#s.has(t)}removeDeletedAnnotationElement(t){this.#s.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#Z(t){let i=this.#n.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#F(t.propertiesToUpdate))}get#lt(){let t=null;for(t of this.#x);return t}updateUI(t){this.#lt===t&&this.#F(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#F(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#x.has(t)){this.#x.delete(t),t.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#x.add(t),t.select(),this.#F(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(t){this.#l?.commitOrRemove();for(let i of this.#x)i!==t&&i.unselect();this.#x.clear(),this.#x.add(t),t.select(),this.#F(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(t){return this.#x.has(t)}get firstSelectedEditor(){return this.#x.values().next().value}unselect(t){t.unselect(),this.#x.delete(t),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#x.size!==0}get isEnterHandled(){return this.#x.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#D({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#o.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#o.add(t),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#o.cleanType(t)}#W(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(let t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();let t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;let i=t?[t]:[...this.#x],r=()=>{this._editorUndoBar?.show(a,i.length===1?i[0].editorType:i.length);for(let s of i)s.remove()},a=()=>{for(let s of i)this.#Z(s)};this.addCommands({cmd:r,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#J(t){for(let i of this.#x)i.unselect();this.#x.clear();for(let i of t)i.isEmpty()||(this.#x.add(i),i.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(let t of this.#x)t.commit();this.#J(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#w!==xi.NONE))&&!this.#l?.commitOrRemove()&&this.hasSelection){for(let t of this.#x)t.unselect();this.#x.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#N[0]+=t,this.#N[1]+=i;let[a,s]=this.#N,o=[...this.#x],l=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#N[0]=this.#N[1]=0,this.addCommands({cmd:()=>{for(let u of o)this.#i.has(u.id)&&u.translateInPage(a,s)},undo:()=>{for(let u of o)this.#i.has(u.id)&&u.translateInPage(-a,-s)},mustExec:!1})},l);for(let u of o)u.translateInPage(t,i)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#h=new Map;for(let t of this.#x)this.#h.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#h)return!1;this.disableUserSelect(!1);let t=this.#h;this.#h=null;let i=!1;for(let[{x:a,y:s,pageIndex:o},l]of t)l.newX=a,l.newY=s,l.newPageIndex=o,i||=a!==l.savedX||s!==l.savedY||o!==l.savedPageIndex;if(!i)return!1;let r=(a,s,o,l)=>{if(this.#i.has(a.id)){let u=this.#n.get(l);u?a._setParentAndPosition(u,s,o):(a.pageIndex=l,a.x=s,a.y=o)}};return this.addCommands({cmd:()=>{for(let[a,{newX:s,newY:o,newPageIndex:l}]of t)r(a,s,o,l)},undo:()=>{for(let[a,{savedX:s,savedY:o,savedPageIndex:l}]of t)r(a,s,o,l)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#h)for(let r of this.#h.keys())r.drag(t,i)}rebuild(t){if(t.parent===null){let i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#x.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#w}get imageManager(){return Ii(this,"imageManager",new Kx)}getSelectionBoxes(t){if(!t)return null;let i=document.getSelection();for(let p=0,f=i.rangeCount;p<f;p++)if(!t.contains(i.getRangeAt(p).commonAncestorContainer))return null;let{x:r,y:a,width:s,height:o}=t.getBoundingClientRect(),l;switch(t.getAttribute("data-main-rotation")){case"90":l=(p,f,g,m)=>({x:(f-a)/o,y:1-(p+g-r)/s,width:m/o,height:g/s});break;case"180":l=(p,f,g,m)=>({x:1-(p+g-r)/s,y:1-(f+m-a)/o,width:g/s,height:m/o});break;case"270":l=(p,f,g,m)=>({x:1-(f+m-a)/o,y:(p-r)/s,width:m/o,height:g/s});break;default:l=(p,f,g,m)=>({x:(p-r)/s,y:(f-a)/o,width:g/s,height:m/o});break}let u=[];for(let p=0,f=i.rangeCount;p<f;p++){let g=i.getRangeAt(p);if(!g.collapsed)for(let{x:m,y:x,width:y,height:S}of g.getClientRects())y===0||S===0||u.push(l(m,x,y,S))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#c||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#c?.delete(t)}renderAnnotationElement(t){let i=this.#c?.get(t.data.id);if(!i)return;let r=this.#r.getRawValue(i);r&&(this.#w===xi.NONE&&!r.hasBeenModified||r.renderAnnotationElement(t))}}return n})(),GA=(()=>{class n{#t=null;#e=!1;#i=null;#n=null;#a=null;#r=null;#c=!1;#o=null;#d=null;#l=null;#u=null;#s=!1;static#h=null;static _l10n=null;constructor(t){this.#d=t,this.#s=t._uiManager.useNewAltTextFlow,n.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){n._l10n??=t}render(){return Ne(this,null,function*(){let t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";let i=this.#n=document.createElement("span");t.append(i),this.#s?(t.classList.add("new"),t.setAttribute("data-l10n-id",n.#h.missing),i.setAttribute("data-l10n-id",n.#h["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let r=this.#d._uiManager._signal;t.addEventListener("contextmenu",bs,{signal:r}),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});let a=s=>{s.preventDefault(),this.#d._uiManager.editAltText(this.#d),this.#s&&this.#d._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return t.addEventListener("click",a,{capture:!0,signal:r}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(this.#c=!0,a(s))},{signal:r}),yield this.#f(),t})}get#p(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#c}),this.#c=!1)}isEmpty(){return this.#s?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#s?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}setGuessedText(t){return Ne(this,null,function*(){this.#t===null&&(this.#l=t,this.#u=yield n._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#f())})}toggleAltTextBadge(t=!1){if(!this.#s||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){let i=this.#o=document.createElement("div");i.className="noAltTextBadge",this.#d.div.append(i)}this.#o.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#l===i&&(i=this.#u),{altText:i,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#u}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:r,textWithDisclaimer:a,cancel:s=!1}){r&&(this.#l=r,this.#u=a),!(this.#t===t&&this.#e===i)&&(s||(this.#t=t,this.#e=i),this.#f())}toggle(t=!1){this.#i&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i.disabled=!t)}shown(){this.#d._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#a=null,this.#o?.remove(),this.#o=null}#f(){return Ne(this,null,function*(){let t=this.#i;if(!t)return;if(this.#s){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",n.#h[this.#p]),this.#n?.setAttribute("data-l10n-id",n.#h[`${this.#p}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#a;if(!i){this.#a=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#d.id}`;let a=100,s=this.#d._uiManager._signal;s.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#a.classList.add("show"),this.#d._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:s}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#a?.classList.remove("show")},{signal:s})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#d.getImageForAltText()?.setAttribute("aria-describedby",i.id)})}}return n})(),Fn=class n{#t=null;#e=null;#i=null;#n=!1;#a=null;#r="";#c=!1;#o=null;#d=null;#l=null;#u=null;#s="";#h=!1;#p=null;#f=!1;#g=!1;#m=!1;#_=null;#v=0;#b=0;#y=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#C=!1;#M=n._zIndex++;static _borderLineWidth=-1;static _colorManager=new Jx;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){let e=n.prototype._resizeWithKeyboard,t=_p.TRANSLATE_SMALL,i=_p.TRANSLATE_BIG;return Ii(this,"_resizerKeyboardManager",new Ic([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],n.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;let{rotation:t,rawDims:{pageWidth:i,pageHeight:r,pageX:a,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[a,s];let[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Ii(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){let t=new Qx({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(n._l10n??=e,n._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),n._borderLineWidth!==-1)return;let i=getComputedStyle(document.documentElement);n._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){un("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#C}set _isDraggable(e){this.#C=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){let[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#M}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#P(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#h?this.#h=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){let[a,s]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/a,this.y=(t+r)/s,this.fixAndSetPosition()}#E([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#E(this.parentDimensions,e,t)}translateInPage(e,t){this.#p||=[this.x,this.y,this.width,this.height],this.#E(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#p||=[this.x,this.y,this.width,this.height];let{div:i,parentDimensions:[r,a]}=this;if(this.x+=e/r,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:f,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this,[l,u]=this.getBaseTranslation();s+=l,o+=u;let{style:p}=i;p.left=`${(100*s).toFixed(2)}%`,p.top=`${(100*o).toFixed(2)}%`,this._onTranslating(s,o),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#p&&(this.#p[0]!==this.x||this.#p[1]!==this.y)}get _hasBeenResized(){return!!this.#p&&(this.#p[2]!==this.width||this.#p[3]!==this.height)}getBaseTranslation(){let[e,t]=this.parentDimensions,{_borderLineWidth:i}=n,r=i/e,a=i/t;switch(this.rotation){case 90:return[-r,a];case 180:return[r,a];case 270:return[r,-a];default:return[-r,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){let{div:{style:t},pageDimensions:[i,r]}=this,{x:a,y:s,width:o,height:l}=this;if(o*=i,l*=r,a*=i,s*=r,this._mustFixPosition)switch(e){case 0:a=Math.max(0,Math.min(i-o,a)),s=Math.max(0,Math.min(r-l,s));break;case 90:a=Math.max(0,Math.min(i-l,a)),s=Math.min(r,Math.max(o,s));break;case 180:a=Math.min(i,Math.max(o,a)),s=Math.min(r,Math.max(l,s));break;case 270:a=Math.min(i,Math.max(l,a)),s=Math.max(0,Math.min(r-o,s));break}this.x=a/=i,this.y=s/=r;let[u,p]=this.getBaseTranslation();a+=u,s+=p,t.left=`${(100*a).toFixed(2)}%`,t.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#T(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return n.#T(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return n.#T(e,t,360-this.parentRotation)}#S(e){switch(e){case 90:{let[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{let[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){let[i,r]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*e/i).toFixed(2)}%`,this.#c||(a.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){let{style:e}=this.div,{height:t,width:i}=e,r=i.endsWith("%"),a=!this.#c&&t.endsWith("%");if(r&&a)return;let[s,o]=this.parentDimensions;r||(e.width=`${(100*parseFloat(i)/s).toFixed(2)}%`),!this.#c&&!a&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#k(){if(this.#o)return;this.#o=document.createElement("div"),this.#o.classList.add("resizers");let e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(let i of e){let r=document.createElement("div");this.#o.append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",this.#A.bind(this,i),{signal:t}),r.addEventListener("contextmenu",bs,{signal:t}),r.tabIndex=-1}this.div.prepend(this.#o)}#A(e,t){t.preventDefault();let{isMac:i}=Pr.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#i?.toggle(!1);let r=this._isDraggable;this._isDraggable=!1,this.#d=[t.screenX,t.screenY];let a=new AbortController,s=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",xs,{passive:!1,signal:s}),window.addEventListener("contextmenu",bs,{signal:s}),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;let u=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=o,this.div.style.cursor=l,this.#R()};window.addEventListener("pointerup",u,{signal:s}),window.addEventListener("blur",u,{signal:s})}#I(e,t,i,r){this.width=i,this.height=r,this.x=e,this.y=t;let[a,s]=this.parentDimensions;this.setDims(a*i,s*r),this.fixAndSetPosition(),this._onResized()}_onResized(){}#R(){if(!this.#l)return;let{savedX:e,savedY:t,savedWidth:i,savedHeight:r}=this.#l;this.#l=null;let a=this.x,s=this.y,o=this.width,l=this.height;a===e&&s===t&&o===i&&l===r||this.addCommands({cmd:this.#I.bind(this,a,s,o,l),undo:this.#I.bind(this,e,t,i,r),mustExec:!0})}#B(e,t){let[i,r]=this.parentDimensions,a=this.x,s=this.y,o=this.width,l=this.height,u=n.MIN_SIZE/i,p=n.MIN_SIZE/r,f=at=>Math.round(at*1e4)/1e4,g=this.#S(this.rotation),m=(at,Q)=>[g[0]*at+g[2]*Q,g[1]*at+g[3]*Q],x=this.#S(360-this.rotation),y=(at,Q)=>[x[0]*at+x[2]*Q,x[1]*at+x[3]*Q],S,b,M=!1,T=!1;switch(e){case"topLeft":M=!0,S=(at,Q)=>[0,0],b=(at,Q)=>[at,Q];break;case"topMiddle":S=(at,Q)=>[at/2,0],b=(at,Q)=>[at/2,Q];break;case"topRight":M=!0,S=(at,Q)=>[at,0],b=(at,Q)=>[0,Q];break;case"middleRight":T=!0,S=(at,Q)=>[at,Q/2],b=(at,Q)=>[0,Q/2];break;case"bottomRight":M=!0,S=(at,Q)=>[at,Q],b=(at,Q)=>[0,0];break;case"bottomMiddle":S=(at,Q)=>[at/2,Q],b=(at,Q)=>[at/2,0];break;case"bottomLeft":M=!0,S=(at,Q)=>[0,Q],b=(at,Q)=>[at,0];break;case"middleLeft":T=!0,S=(at,Q)=>[0,Q/2],b=(at,Q)=>[at,Q/2];break}let I=S(o,l),O=b(o,l),U=m(...O),N=f(a+U[0]),B=f(s+U[1]),R=1,F=1,P,V;if(t.fromKeyboard)({deltaX:P,deltaY:V}=t);else{let{screenX:at,screenY:Q}=t,[xt,Mt]=this.#d;[P,V]=this.screenToPageTranslation(at-xt,Q-Mt),this.#d[0]=at,this.#d[1]=Q}if([P,V]=y(P/i,V/r),M){let at=Math.hypot(o,l);R=F=Math.max(Math.min(Math.hypot(O[0]-I[0]-P,O[1]-I[1]-V)/at,1/o,1/l),u/o,p/l)}else T?R=Math.max(u,Math.min(1,Math.abs(O[0]-I[0]-P)))/o:F=Math.max(p,Math.min(1,Math.abs(O[1]-I[1]-V)))/l;let $=f(o*R),K=f(l*F);U=m(...b($,K));let ct=N-U[0],ot=B-U[1];this.#p||=[this.x,this.y,this.width,this.height],this.width=$,this.height=K,this.x=ct,this.y=ot,this.setDims(i*$,r*K),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}addEditToolbar(){return Ne(this,null,function*(){return this._editToolbar||this.#g?this._editToolbar:(this._editToolbar=new Xx(this),this.div.append(this._editToolbar.render()),this.#i&&(yield this._editToolbar.addAltText(this.#i)),this._editToolbar)})}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#i?.destroy())}addContainer(e){let t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){return Ne(this,null,function*(){this.#i||(GA.initialize(n._l10n),this.#i=new GA(this),this.#t&&(this.#i.data=this.#t,this.#t=null),yield this.addEditToolbar())})}get altTextData(){return this.#i?.data}set altTextData(e){this.#i&&(this.#i.data=e)}get guessedAltText(){return this.#i?.guessedText}setGuessedAltText(e){return Ne(this,null,function*(){yield this.#i?.setGuessedText(e)})}serializeAltText(e){return this.#i?.serialize(e)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#n?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#L();let[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);let[i,r]=this.getInitialTranslation();return this.translate(i,r),g0(this,this.div,["pointerdown"]),this._uiManager._editorUndoBar?.hide(),this.div}pointerdown(e){let{isMac:t}=Pr.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#h=!0,this._isDraggable){this.#x(e);return}this.#w(e)}get isSelected(){return this._uiManager.isSelected(this)}#w(e){let{isMac:t}=Pr.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#x(e){let{isSelected:t}=this;this._uiManager.setUpDragSession();let i=new AbortController,r=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:r},s=l=>{i.abort(),this.#a=null,this.#h=!1,this._uiManager.endDragSession()||this.#w(l)};t&&(this.#v=e.clientX,this.#b=e.clientY,this.#a=e.pointerId,this.#r=e.pointerType,window.addEventListener("pointermove",l=>{let{clientX:u,clientY:p,pointerId:f}=l;if(f!==this.#a){xs(l);return}let[g,m]=this.screenToPageTranslation(u-this.#v,p-this.#b);this.#v=u,this.#b=p,this._uiManager.dragSelectedEditors(g,m)},a),window.addEventListener("touchmove",xs,a),window.addEventListener("pointerdown",l=>{l.isPrimary&&l.pointerType===this.#r&&s(l),xs(l)},a)),this._onStartDragging();let o=l=>{if(!this.#a||this.#a===l.pointerId){s(l),this._onStopDragging();return}xs(l)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.#_=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,i=this.rotation){let r=this.parentScale,[a,s]=this.pageDimensions,[o,l]=this.pageTranslation,u=e/r,p=t/r,f=this.x*a,g=this.y*s,m=this.width*a,x=this.height*s;switch(i){case 0:return[f+u+o,s-g-p-x+l,f+u+m+o,s-g-p+l];case 90:return[f+p+o,s-g+u+l,f+p+x+o,s-g+u+m+l];case 180:return[f-u-m+o,s-g+p+l,f-u+o,s-g+p+x+l];case 270:return[f-p-x+o,s-g-u-m+l,f-p+o,s-g-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){let[i,r,a,s]=e,o=a-i,l=s-r;switch(this.rotation){case 0:return[i,t-s,o,l];case 90:return[i,t-r,l,o];case 180:return[a,t-r,o,l];case 270:return[a,t-s,l,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#g=!0}disableEditMode(){this.#g=!1}isInEditMode(){return this.#g}shouldGetKeyboardEvents(){return this.#m}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:e,left:t,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:a,innerWidth:s}=window;return t<s&&r>0&&e<a&&i>0}#L(){if(this.#u||!this.div)return;this.#u=new AbortController;let e=this._uiManager.combinedSignal(this.#u);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#L()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){un("An editor must be serializable")}static deserialize(e,t,i){return Ne(this,null,function*(){let r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});r.rotation=e.rotation,r.#t=e.accessibilityData;let[a,s]=r.pageDimensions,[o,l,u,p]=r.getRectInCurrentCoords(e.rect,s);return r.x=o/a,r.y=l/s,r.width=u/a,r.height=p/s,r})}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#u?.abort(),this.#u=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#_&&(clearTimeout(this.#_),this.#_=null),this.#P(),this.removeEditToolbar(),this.#y){for(let e of this.#y.values())clearTimeout(e);this.#y=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#k(),this.#o.classList.remove("hidden"),g0(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let t=this.#o.children;if(!this.#e){this.#e=Array.from(t);let s=this.#V.bind(this),o=this.#z.bind(this),l=this._uiManager._signal;for(let u of this.#e){let p=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",s,{signal:l}),u.addEventListener("blur",o,{signal:l}),u.addEventListener("focus",this.#H.bind(this,p),{signal:l}),u.setAttribute("data-l10n-id",n._l10nResizer[p])}}let i=this.#e[0],r=0;for(let s of t){if(s===i)break;r++}let a=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(a!==r){if(a<r)for(let o=0;o<r-a;o++)this.#o.append(this.#o.firstChild);else if(a>r)for(let o=0;o<a-r;o++)this.#o.firstChild.before(this.#o.lastChild);let s=0;for(let o of t){let u=this.#e[s++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",n._l10nResizer[u])}}this.#N(0),this.#m=!0,this.#o.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#V(e){n._resizerKeyboardManager.exec(this,e)}#z(e){this.#m&&e.relatedTarget?.parentNode!==this.#o&&this.#P()}#H(e){this.#s=this.#m?e:""}#N(e){if(this.#e)for(let t of this.#e)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#m&&this.#B(this.#s,{deltaX:e,deltaY:t,fromKeyboard:!0})}#P(){this.#m=!1,this.#N(-1),this.#R()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}unselect(){this.#o?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(e){this.#f=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#c=!0;let i=e/t,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#y||=new Map;let{action:i}=e,r=this.#y.get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),this.#y.delete(i),this.#y.size===0&&(this.#y=null)},n._telemetryTimeout),this.#y.set(i,r);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#n=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#n=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){let i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){let{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}},Qx=class extends Fn{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},qA=3285377520,ts=4294901760,Gs=65535,_0=class{constructor(e){this.h1=e?e&4294967295:qA,this.h2=e?e&4294967295:qA}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let y=0,S=e.length;y<S;y++){let b=e.charCodeAt(y);b<=255?t[i++]=b:(t[i++]=b>>>8,t[i++]=b&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let r=i>>2,a=i-r*4,s=new Uint32Array(t.buffer,0,r),o=0,l=0,u=this.h1,p=this.h2,f=3432918353,g=461845907,m=f&Gs,x=g&Gs;for(let y=0;y<r;y++)y&1?(o=s[y],o=o*f&ts|o*m&Gs,o=o<<15|o>>>17,o=o*g&ts|o*x&Gs,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(l=s[y],l=l*f&ts|l*m&Gs,l=l<<15|l>>>17,l=l*g&ts|l*x&Gs,p^=l,p=p<<13|p>>>19,p=p*5+3864292196);switch(o=0,a){case 3:o^=t[r*4+2]<<16;case 2:o^=t[r*4+1]<<8;case 1:o^=t[r*4],o=o*f&ts|o*m&Gs,o=o<<15|o>>>17,o=o*g&ts|o*x&Gs,r&1?u^=o:p^=o}this.h1=u,this.h2=p}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ts|e*36045&Gs,t=t*4283543511&ts|((t<<16|e>>>16)*2950163797&ts)>>>16,e^=t>>>1,e=e*444984403&ts|e*60499&Gs,t=t*3301882366&ts|((t<<16|e>>>16)*3120437893&ts)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}},tb=Object.freeze({map:null,hash:"",transfer:void 0}),vp=class{#t=!1;#e=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){let i=this.#i.get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return this.#i.get(e)}remove(e){if(this.#i.delete(e),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let t of this.#i.values())if(t instanceof Fn)return;this.onAnnotationEditor(null)}}setValue(e,t){let i=this.#i.get(e),r=!1;if(i!==void 0)for(let[a,s]of Object.entries(t))i[a]!==s&&(r=!0,i[a]=s);else r=!0,this.#i.set(e,t);r&&this.#n(),t instanceof Fn&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#i.has(e)}getAll(){return this.#i.size>0?dy(this.#i):null}setAll(e){for(let[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return this.#i.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new v0(this)}get serializable(){if(this.#i.size===0)return tb;let e=new Map,t=new _0,i=[],r=Object.create(null),a=!1;for(let[s,o]of this.#i){let l=o instanceof Fn?o.serialize(!1,r):o;l&&(e.set(s,l),t.update(`${s}:${JSON.stringify(l)}`),a||=!!l.bitmap)}if(a)for(let s of e.values())s.bitmap&&i.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:tb}get editorStats(){let e=null,t=new Map;for(let i of this.#i.values()){if(!(i instanceof Fn))continue;let r=i.telemetryFinalData;if(!r)continue;let{type:a}=r;t.has(a)||t.set(a,Object.getPrototypeOf(i).constructor),e||=Object.create(null);let s=e[a]||=new Map;for(let[o,l]of Object.entries(r)){if(o==="type")continue;let u=s.get(o);u||(u=new Map,s.set(o,u));let p=u.get(l)??0;u.set(l,p+1)}}for(let[i,r]of t)e[i]=r.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;let e=[];for(let t of this.#i.values())!(t instanceof Fn)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#e={ids:new Set(e),hash:e.join(",")}}},v0=class extends vp{#t;constructor(e){super();let{map:t,hash:i,transfer:r}=e.serializable,a=structuredClone(t,r?{transfer:r}:null);this.#t={map:a,hash:i,transfer:r}}get print(){un("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Ii(this,"modifiedIds",{ids:new Set,hash:""})}},eb=class{#t=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(let e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(i){return Ne(this,arguments,function*({systemFontInfo:e,_inspectFont:t}){if(!(!e||this.#t.has(e.loadedName))){if(ur(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:r,src:a,style:s}=e,o=new FontFace(r,a,s);this.addNativeFontFace(o);try{yield o.load(),this.#t.add(r),t?.(e)}catch{Ci(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}un("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(e){return Ne(this,null,function*(){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){yield this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){let i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{yield i.loaded}catch(r){throw Ci(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}let t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;yield new Promise(i=>{let r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}})}get isFontLoadingAPISupported(){let e=!!this._document?.fonts;return Ii(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(sa||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Ii(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(ur(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){let a=i.shift();setTimeout(a.callback,0)}}let{loadingRequests:i}=this,r={done:!1,complete:t,callback:e};return i.push(r),r}get _loadTestFont(){let e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ii(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(I,O){return I.charCodeAt(O)<<24|I.charCodeAt(O+1)<<16|I.charCodeAt(O+2)<<8|I.charCodeAt(O+3)&255}function r(I,O,U,N){let B=I.substring(0,O),R=I.substring(O+U);return B+N+R}let a,s,o=this._document.createElement("canvas");o.width=1,o.height=1;let l=o.getContext("2d"),u=0;function p(I,O){if(++u>30){Ci("Load test font never loaded."),O();return}if(l.font="30px "+I,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(p.bind(null,I,O))}let f=`lt${Date.now()}${this.loadTestFontId++}`,g=this._loadTestFont;g=r(g,976,f.length,f);let x=16,y=1482184792,S=i(g,x);for(a=0,s=f.length-3;a<s;a+=4)S=S-y+i(f,a)|0;a<f.length&&(S=S-y+i(f+"XXX",a)|0),g=r(g,x,4,wF(S));let b=`url(data:font/opentype;base64,${btoa(g)});`,M=`@font-face {font-family:"${f}";src:${b}}`;this.insertRule(M);let T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(let I of[e.loadedName,f]){let O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=I,T.append(O)}this._document.body.append(T),p(f,()=>{T.remove(),t.complete()})}},ib=class{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(let r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{let t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let e=`url(data:${this.mimetype};base64,${kF(this.data)});`,t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(a){Ci(`getPathGenerator - ignoring character: "${a}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(a,s){};let r=[];for(let a=0,s=i.length;a<s;)switch(i[a++]){case Eo.BEZIER_CURVE_TO:{let[o,l,u,p,f,g]=i.slice(a,a+6);r.push(m=>m.bezierCurveTo(o,l,u,p,f,g)),a+=6}break;case Eo.MOVE_TO:{let[o,l]=i.slice(a,a+2);r.push(u=>u.moveTo(o,l)),a+=2}break;case Eo.LINE_TO:{let[o,l]=i.slice(a,a+2);r.push(u=>u.lineTo(o,l)),a+=2}break;case Eo.QUADRATIC_CURVE_TO:{let[o,l,u,p]=i.slice(a,a+4);r.push(f=>f.quadraticCurveTo(o,l,u,p)),a+=4}break;case Eo.RESTORE:r.push(o=>o.restore());break;case Eo.SAVE:r.push(o=>o.save());break;case Eo.SCALE:ur(r.length===2,"Scale command is only valid at the third position.");break;case Eo.TRANSFORM:{let[o,l,u,p,f,g]=i.slice(a,a+6);r.push(m=>m.transform(o,l,u,p,f,g)),a+=6}break;case Eo.TRANSLATE:{let[o,l]=i.slice(a,a+2);r.push(u=>u.translate(o,l)),a+=2}break}return r.push(a=>a.closePath()),this.compiledGlyphs[t]=function(s,o){r[0](s),r[1](s),s.scale(o,-o);for(let l=2,u=r.length;l<u;l++)r[l](s)}}},x0=class{#t=!1;constructor({enableHWA:e=!1}){this.#t=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");let i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){un("Abstract method `_createCanvas` called.")}},nb=class extends x0{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){let i=this._document.createElement("canvas");return i.width=e,i.height=t,i}},b0=class{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}fetch(t){return Ne(this,arguments,function*({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");let i=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(i).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})})}_fetch(e){return Ne(this,null,function*(){un("Abstract method `_fetch` called.")})}},y0=class extends b0{_fetch(e){return Ne(this,null,function*(){let t=yield X0(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):q0(t)})}},S0=class{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,r,a){return"none"}destroy(e=!1){}},rb=class extends S0{#t;#e;#i;#n;#a;#r;#c=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#a=t}get#o(){return this.#e||=new Map}get#d(){return this.#r||=new Map}get#l(){if(!this.#i){let e=this.#a.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;let i=this.#a.createElementNS(Ao,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#a.createElementNS(Ao,"defs"),e.append(i),i.append(this.#i),this.#a.body.append(e)}return this.#i}#u(e){if(e.length===1){let l=e[0],u=new Array(256);for(let f=0;f<256;f++)u[f]=l[f]/255;let p=u.join(",");return[p,p,p]}let[t,i,r]=e,a=new Array(256),s=new Array(256),o=new Array(256);for(let l=0;l<256;l++)a[l]=t[l]/255,s[l]=i[l]/255,o[l]=r[l]/255;return[a.join(","),s.join(","),o.join(",")]}#s(e){if(this.#t===void 0){this.#t="";let t=this.#a.URL;t!==this.#a.baseURI&&(Y0(t)?Ci('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=t.split("#",1)[0])}return`url(${this.#t}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;let[i,r,a]=this.#u(e),s=e.length===1?i:`${i}${r}${a}`;if(t=this.#o.get(s),t)return this.#o.set(e,t),t;let o=`g_${this.#n}_transfer_map_${this.#c++}`,l=this.#s(o);this.#o.set(e,l),this.#o.set(s,l);let u=this.#f(o);return this.#m(i,r,a,u),l}addHCMFilter(e,t){let i=`${e}-${t}`,r="base",a=this.#d.get(r);if(a?.key===i||(a?(a.filter?.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},this.#d.set(r,a)),!e||!t))return a.url;let s=this.#v(e);e=We.makeHexColor(...s);let o=this.#v(t);if(t=We.makeHexColor(...o),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return a.url;let l=new Array(256);for(let m=0;m<=255;m++){let x=m/255;l[m]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}let u=l.join(","),p=`g_${this.#n}_hcm_filter`,f=a.filter=this.#f(p);this.#m(u,u,u,f),this.#p(f);let g=(m,x)=>{let y=s[m]/255,S=o[m]/255,b=new Array(x+1);for(let M=0;M<=x;M++)b[M]=y+M/x*(S-y);return b.join(",")};return this.#m(g(0,5),g(1,5),g(2,5),f),a.url=this.#s(p),a.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;let[i]=this.#u([e]),r=`alpha_${i}`;if(t=this.#o.get(r),t)return this.#o.set(e,t),t;let a=`g_${this.#n}_alpha_map_${this.#c++}`,s=this.#s(a);this.#o.set(e,s),this.#o.set(r,s);let o=this.#f(a);return this.#_(i,o),s}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let i,r;if(e?([i]=this.#u([e]),r=`luminosity_${i}`):r="luminosity",t=this.#o.get(r),t)return this.#o.set(e,t),t;let a=`g_${this.#n}_luminosity_map_${this.#c++}`,s=this.#s(a);this.#o.set(e,s),this.#o.set(r,s);let o=this.#f(a);return this.#h(o),e&&this.#_(i,o),s}addHighlightHCMFilter(e,t,i,r,a){let s=`${t}-${i}-${r}-${a}`,o=this.#d.get(e);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#d.set(e,o)),!t||!i))return o.url;let[l,u]=[t,i].map(this.#v.bind(this)),p=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[g,m]=[r,a].map(this.#v.bind(this));f<p&&([p,f,g,m]=[f,p,m,g]),this.#l.style.color="";let x=(b,M,T)=>{let I=new Array(256),O=(f-p)/T,U=b/255,N=(M-b)/(255*T),B=0;for(let R=0;R<=T;R++){let F=Math.round(p+R*O),P=U+R*N;for(let V=B;V<=F;V++)I[V]=P;B=F+1}for(let R=B;R<256;R++)I[R]=I[B-1];return I.join(",")},y=`g_${this.#n}_hcm_${e}_filter`,S=o.filter=this.#f(y);return this.#p(S),this.#m(x(g[0],m[0],5),x(g[1],m[1],5),x(g[2],m[2],5),S),o.url=this.#s(y),o.url}destroy(e=!1){e&&this.#r?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#c=0)}#h(e){let t=this.#a.createElementNS(Ao,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#p(e){let t=this.#a.createElementNS(Ao,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#f(e){let t=this.#a.createElementNS(Ao,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#g(e,t,i){let r=this.#a.createElementNS(Ao,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)}#m(e,t,i,r){let a=this.#a.createElementNS(Ao,"feComponentTransfer");r.append(a),this.#g(a,"feFuncR",e),this.#g(a,"feFuncG",t),this.#g(a,"feFuncB",i)}#_(e,t){let i=this.#a.createElementNS(Ao,"feComponentTransfer");t.append(i),this.#g(i,"feFuncA",e)}#v(e){return this.#l.style.color=e,py(getComputedStyle(this.#l).getPropertyValue("color"))}},w0=class{constructor({baseUrl:e=null}){this.baseUrl=e}fetch(t){return Ne(this,arguments,function*({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");let i=`${this.baseUrl}${e}`;return this._fetch(i).catch(r=>{throw new Error(`Unable to load font data at: ${i}`)})})}_fetch(e){return Ne(this,null,function*(){un("Abstract method `_fetch` called.")})}},C0=class extends w0{_fetch(e){return Ne(this,null,function*(){let t=yield X0(e,"arraybuffer");return new Uint8Array(t)})}};function o3(n){return Ne(this,null,function*(){let t=yield process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)})}var ab=class extends S0{},sb=class extends x0{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}},ob=class extends b0{_fetch(e){return Ne(this,null,function*(){return o3(e)})}},lb=class extends w0{_fetch(e){return Ne(this,null,function*(){return o3(e)})}},Hr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function cb(n,e){if(!e)return;let t=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,i),n.clip(r)}var xp=class{getPattern(){un("Abstract method `getPattern` called.")}},db=class extends xp{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,r){let a;if(r===Hr.STROKE||r===Hr.FILL){let s=t.current.getClippedPathBoundingBox(r,An(e))||[0,0,0,0],o=Math.ceil(s[2]-s[0])||1,l=Math.ceil(s[3]-s[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,l),p=u.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-s[0],-s[1]),i=We.transform(i,[1,0,0,1,s[0],s[1]]),p.transform(...t.baseTransform),this.matrix&&p.transform(...this.matrix),cb(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),a=e.createPattern(u.canvas,"no-repeat");let f=new DOMMatrix(i);a.setTransform(f)}else cb(e,this._bbox),a=this._createGradient(e);return a}};function Hx(n,e,t,i,r,a,s,o){let l=e.coords,u=e.colors,p=n.data,f=n.width*4,g;l[t+1]>l[i+1]&&(g=t,t=i,i=g,g=a,a=s,s=g),l[i+1]>l[r+1]&&(g=i,i=r,r=g,g=s,s=o,o=g),l[t+1]>l[i+1]&&(g=t,t=i,i=g,g=a,a=s,s=g);let m=(l[t]+e.offsetX)*e.scaleX,x=(l[t+1]+e.offsetY)*e.scaleY,y=(l[i]+e.offsetX)*e.scaleX,S=(l[i+1]+e.offsetY)*e.scaleY,b=(l[r]+e.offsetX)*e.scaleX,M=(l[r+1]+e.offsetY)*e.scaleY;if(x>=M)return;let T=u[a],I=u[a+1],O=u[a+2],U=u[s],N=u[s+1],B=u[s+2],R=u[o],F=u[o+1],P=u[o+2],V=Math.round(x),$=Math.round(M),K,ct,ot,at,Q,xt,Mt,qt;for(let z=V;z<=$;z++){if(z<S){let ft=z<x?0:(x-z)/(x-S);K=m-(m-y)*ft,ct=T-(T-U)*ft,ot=I-(I-N)*ft,at=O-(O-B)*ft}else{let ft;z>M?ft=1:S===M?ft=0:ft=(S-z)/(S-M),K=y-(y-b)*ft,ct=U-(U-R)*ft,ot=N-(N-F)*ft,at=B-(B-P)*ft}let nt;z<x?nt=0:z>M?nt=1:nt=(x-z)/(x-M),Q=m-(m-b)*nt,xt=T-(T-R)*nt,Mt=I-(I-F)*nt,qt=O-(O-P)*nt;let Z=Math.round(Math.min(K,Q)),st=Math.round(Math.max(K,Q)),pt=f*z+Z*4;for(let ft=Z;ft<=st;ft++)nt=(K-ft)/(K-Q),nt<0?nt=0:nt>1&&(nt=1),p[pt++]=ct-(ct-xt)*nt|0,p[pt++]=ot-(ot-Mt)*nt|0,p[pt++]=at-(at-qt)*nt|0,p[pt++]=255}}function RF(n,e,t){let i=e.coords,r=e.colors,a,s;switch(e.type){case"lattice":let o=e.verticesPerRow,l=Math.floor(i.length/o)-1,u=o-1;for(a=0;a<l;a++){let p=a*o;for(let f=0;f<u;f++,p++)Hx(n,t,i[p],i[p+1],i[p+o],r[p],r[p+1],r[p+o]),Hx(n,t,i[p+o+1],i[p+1],i[p+o],r[p+o+1],r[p+1],r[p+o])}break;case"triangles":for(a=0,s=i.length;a<s;a+=3)Hx(n,t,i[a],i[a+1],i[a+2],r[a],r[a+1],r[a+2]);break;default:throw new Error("illegal figure")}}var ub=class extends xp{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){let o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,p=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(p*e[1]*1.1)),3e3),m=u/f,x=p/g,y={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/m,scaleY:1/x},S=f+2*2,b=g+2*2,M=i.getCanvas("mesh",S,b),T=M.context,I=T.createImageData(f,g);if(t){let U=I.data;for(let N=0,B=U.length;N<B;N+=4)U[N]=t[0],U[N+1]=t[1],U[N+2]=t[2],U[N+3]=255}for(let U of this._figures)RF(I,U,y);return T.putImageData(I,2,2),{canvas:M.canvas,offsetX:o-2*m,offsetY:l-2*x,scaleX:m,scaleY:x}}getPattern(e,t,i,r){cb(e,this._bbox);let a;if(r===Hr.SHADING)a=We.singularValueDecompose2dScale(An(e));else if(a=We.singularValueDecompose2dScale(t.baseTransform),this.matrix){let o=We.singularValueDecompose2dScale(this.matrix);a=[a[0]*o[0],a[1]*o[1]]}let s=this._createMeshCanvas(a,r===Hr.SHADING?null:this._background,t.cachedCanvases);return r!==Hr.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}},hb=class extends xp{getPattern(){return"hotpink"}};function OF(n){switch(n[0]){case"RadialAxial":return new db(n);case"Mesh":return new ub(n);case"Dummy":return new hb}throw new Error(`Unknown IR type: ${n[0]}`)}var XA={COLORED:1,UNCOLORED:2},NF=(()=>{class n{static MAX_PATTERN_SIZE=3e3;constructor(t,i,r,a,s){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=i,this.ctx=r,this.canvasGraphicsFactory=a,this.baseTransform=s}createPatternCanvas(t){let{bbox:i,operatorList:r,paintType:a,tilingType:s,color:o,canvasGraphicsFactory:l}=this,{xstep:u,ystep:p}=this;u=Math.abs(u),p=Math.abs(p),G0("TilingType: "+s);let f=i[0],g=i[1],m=i[2],x=i[3],y=m-f,S=x-g,b=We.singularValueDecompose2dScale(this.matrix),M=We.singularValueDecompose2dScale(this.baseTransform),T=b[0]*M[0],I=b[1]*M[1],O=y,U=S,N=!1,B=!1,R=Math.ceil(u*T),F=Math.ceil(p*I),P=Math.ceil(y*T),V=Math.ceil(S*I);R>=P?O=u:N=!0,F>=V?U=p:B=!0;let $=this.getSizeAndScale(O,this.ctx.canvas.width,T),K=this.getSizeAndScale(U,this.ctx.canvas.height,I),ct=t.cachedCanvases.getCanvas("pattern",$.size,K.size),ot=ct.context,at=l.createCanvasGraphics(ot);if(at.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(at,a,o),ot.translate(-$.scale*f,-K.scale*g),at.transform($.scale,0,0,K.scale,0,0),ot.save(),this.clipBbox(at,f,g,m,x),at.baseTransform=An(at.ctx),at.executeOperatorList(r),at.endDrawing(),ot.restore(),N||B){let Q=ct.canvas;N&&(O=u),B&&(U=p);let xt=this.getSizeAndScale(O,this.ctx.canvas.width,T),Mt=this.getSizeAndScale(U,this.ctx.canvas.height,I),qt=xt.size,z=Mt.size,nt=t.cachedCanvases.getCanvas("pattern-workaround",qt,z),Z=nt.context,st=N?Math.floor(y/u):0,pt=B?Math.floor(S/p):0;for(let ft=0;ft<=st;ft++)for(let St=0;St<=pt;St++)Z.drawImage(Q,qt*ft,z*St,qt,z,0,0,qt,z);return{canvas:nt.canvas,scaleX:xt.scale,scaleY:Mt.scale,offsetX:f,offsetY:g}}return{canvas:ct.canvas,scaleX:$.scale,scaleY:K.scale,offsetX:f,offsetY:g}}getSizeAndScale(t,i,r){let a=Math.max(n.MAX_PATTERN_SIZE,i),s=Math.ceil(t*r);return s>=a?s=a:r=s/t,{scale:r,size:s}}clipBbox(t,i,r,a,s){let o=a-i,l=s-r;t.ctx.rect(i,r,o,l),t.current.updateRectMinMax(An(t.ctx),[i,r,a,s]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,r){let a=t.ctx,s=t.current;switch(i){case XA.COLORED:let o=this.ctx;a.fillStyle=o.fillStyle,a.strokeStyle=o.strokeStyle,s.fillColor=o.fillStyle,s.strokeColor=o.strokeStyle;break;case XA.UNCOLORED:let l=We.makeHexColor(r[0],r[1],r[2]);a.fillStyle=l,a.strokeStyle=l,s.fillColor=l,s.strokeColor=l;break;default:throw new qx(`Unsupported paint type: ${i}`)}}getPattern(t,i,r,a){let s=r;a!==Hr.SHADING&&(s=We.transform(s,i.baseTransform),this.matrix&&(s=We.transform(s,this.matrix)));let o=this.createPatternCanvas(i),l=new DOMMatrix(s);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);let u=t.createPattern(o.canvas,"repeat");return u.setTransform(l),u}}return n})();function FF({src:n,srcPos:e=0,dest:t,width:i,height:r,nonBlackColor:a=4294967295,inverseDecode:s=!1}){let o=Pr.isLittleEndian?4278190080:255,[l,u]=s?[a,o]:[o,a],p=i>>3,f=i&7,g=n.length;t=new Uint32Array(t.buffer);let m=0;for(let x=0;x<r;x++){for(let S=e+p;e<S;e++){let b=e<g?n[e]:255;t[m++]=b&128?u:l,t[m++]=b&64?u:l,t[m++]=b&32?u:l,t[m++]=b&16?u:l,t[m++]=b&8?u:l,t[m++]=b&4?u:l,t[m++]=b&2?u:l,t[m++]=b&1?u:l}if(f===0)continue;let y=e<g?n[e++]:255;for(let S=0;S<f;S++)t[m++]=y&1<<7-S?u:l}return{srcPos:e,destPos:m}}var YA=16,$A=100,BF=15,KA=10,ZA=1e3,ba=16;function VF(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(i,r){e.translate(i,r),this.__originalTranslate(i,r)},n.scale=function(i,r){e.scale(i,r),this.__originalScale(i,r)},n.transform=function(i,r,a,s,o,l){e.transform(i,r,a,s,o,l),this.__originalTransform(i,r,a,s,o,l)},n.setTransform=function(i,r,a,s,o,l){e.setTransform(i,r,a,s,o,l),this.__originalSetTransform(i,r,a,s,o,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){e.rotate(i),this.__originalRotate(i)},n.clip=function(i){e.clip(i),this.__originalClip(i)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,r,a,s,o){e.bezierCurveTo(t,i,r,a,s,o),this.__originalBezierCurveTo(t,i,r,a,s,o)},n.rect=function(t,i,r,a){e.rect(t,i,r,a),this.__originalRect(t,i,r,a)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}var pb=class{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(let e in this.cache){let t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}};function r0(n,e,t,i,r,a,s,o,l,u){let[p,f,g,m,x,y]=An(n);if(f===0&&g===0){let M=s*p+x,T=Math.round(M),I=o*m+y,O=Math.round(I),U=(s+l)*p+x,N=Math.abs(Math.round(U)-T)||1,B=(o+u)*m+y,R=Math.abs(Math.round(B)-O)||1;return n.setTransform(Math.sign(p),0,0,Math.sign(m),T,O),n.drawImage(e,t,i,r,a,0,0,N,R),n.setTransform(p,f,g,m,x,y),[N,R]}if(p===0&&m===0){let M=o*g+x,T=Math.round(M),I=s*f+y,O=Math.round(I),U=(o+u)*g+x,N=Math.abs(Math.round(U)-T)||1,B=(s+l)*f+y,R=Math.abs(Math.round(B)-O)||1;return n.setTransform(0,Math.sign(f),Math.sign(g),0,T,O),n.drawImage(e,t,i,r,a,0,0,R,N),n.setTransform(p,f,g,m,x,y),[R,N]}n.drawImage(e,t,i,r,a,s,o,l,u);let S=Math.hypot(p,f),b=Math.hypot(g,m);return[S*l,b*u]}function UF(n){let{width:e,height:t}=n;if(e>ZA||t>ZA)return null;let i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=e+1,s=new Uint8Array(a*(t+1)),o,l,u,p=e+7&-8,f=new Uint8Array(p*t),g=0;for(let b of n.data){let M=128;for(;M>0;)f[g++]=b&M?0:255,M>>=1}let m=0;for(g=0,f[g]!==0&&(s[0]=1,++m),l=1;l<e;l++)f[g]!==f[g+1]&&(s[l]=f[g]?2:1,++m),g++;for(f[g]!==0&&(s[l]=2,++m),o=1;o<t;o++){g=o*p,u=o*a,f[g-p]!==f[g]&&(s[u]=f[g]?1:8,++m);let b=(f[g]?4:0)+(f[g-p]?8:0);for(l=1;l<e;l++)b=(b>>2)+(f[g+1]?4:0)+(f[g-p+1]?8:0),r[b]&&(s[u+l]=r[b],++m),g++;if(f[g-p]!==f[g]&&(s[u+l]=f[g]?2:4,++m),m>i)return null}for(g=p*(t-1),u=o*a,f[g]!==0&&(s[u]=8,++m),l=1;l<e;l++)f[g]!==f[g+1]&&(s[u+l]=f[g]?4:8,++m),g++;if(f[g]!==0&&(s[u+l]=4,++m),m>i)return null;let x=new Int32Array([0,a,-1,0,-a,0,0,0,1]),y=new Path2D;for(o=0;m&&o<=t;o++){let b=o*a,M=b+e;for(;b<M&&!s[b];)b++;if(b===M)continue;y.moveTo(b%a,o);let T=b,I=s[b];do{let O=x[I];do b+=O;while(!s[b]);let U=s[b];U!==5&&U!==10?(I=U,s[b]=0):(I=U&51*I>>4,s[b]&=I>>2|I<<2),y.lineTo(b%a,b/a|0),s[b]||--m}while(T!==b);--o}return f=null,s=null,function(b){b.save(),b.scale(1/e,-1/t),b.translate(0,-t),b.fill(y),b.beginPath(),b.restore()}}var M0=class{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a3,this.textMatrixScale=1,this.fontMatrix=Gx,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=zr.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){let e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=We.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){let i=We.applyTransform(t,e),r=We.applyTransform(t.slice(2),e),a=We.applyTransform([t[0],t[3]],e),s=We.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],r[0],a[0],s[0]),this.minY=Math.min(this.minY,i[1],r[1],a[1],s[1]),this.maxX=Math.max(this.maxX,i[0],r[0],a[0],s[0]),this.maxY=Math.max(this.maxY,i[1],r[1],a[1],s[1])}updateScalingPathMinMax(e,t){We.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,a,s,o,l,u,p){let f=We.bezierBoundingBox(t,i,r,a,s,o,l,u,p);p||this.updateRectMinMax(e,f)}getPathBoundingBox(e=Hr.FILL,t=null){let i=[this.minX,this.minY,this.maxX,this.maxY];if(e===Hr.STROKE){t||un("Stroke bounding box must include transform.");let r=We.singularValueDecompose2dScale(t),a=r[0]*this.lineWidth/2,s=r[1]*this.lineWidth/2;i[0]-=a,i[1]-=s,i[2]+=a,i[3]+=s}return i}updateClipFromPath(){let e=We.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Hr.FILL,t=null){return We.intersect(this.clipBox,this.getPathBoundingBox(e,t))}};function JA(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}let t=e.height,i=e.width,r=t%ba,a=(t-r)/ba,s=r===0?a:a+1,o=n.createImageData(i,ba),l=0,u,p=e.data,f=o.data,g,m,x,y;if(e.kind===d0.GRAYSCALE_1BPP){let S=p.byteLength,b=new Uint32Array(f.buffer,0,f.byteLength>>2),M=b.length,T=i+7>>3,I=4294967295,O=Pr.isLittleEndian?4278190080:255;for(g=0;g<s;g++){for(x=g<a?ba:r,u=0,m=0;m<x;m++){let U=S-l,N=0,B=U>T?i:U*8-7,R=B&-8,F=0,P=0;for(;N<R;N+=8)P=p[l++],b[u++]=P&128?I:O,b[u++]=P&64?I:O,b[u++]=P&32?I:O,b[u++]=P&16?I:O,b[u++]=P&8?I:O,b[u++]=P&4?I:O,b[u++]=P&2?I:O,b[u++]=P&1?I:O;for(;N<B;N++)F===0&&(P=p[l++],F=128),b[u++]=P&F?I:O,F>>=1}for(;u<M;)b[u++]=0;n.putImageData(o,0,g*ba)}}else if(e.kind===d0.RGBA_32BPP){for(m=0,y=i*ba*4,g=0;g<a;g++)f.set(p.subarray(l,l+y)),l+=y,n.putImageData(o,0,m),m+=ba;g<s&&(y=i*r*4,f.set(p.subarray(l,l+y)),n.putImageData(o,0,m))}else if(e.kind===d0.RGB_24BPP)for(x=ba,y=i*x,g=0;g<s;g++){for(g>=a&&(x=r,y=i*x),u=0,m=y;m--;)f[u++]=p[l++],f[u++]=p[l++],f[u++]=p[l++],f[u++]=255;n.putImageData(o,0,g*ba)}else throw new Error(`bad image kind: ${e.kind}`)}function QA(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}let t=e.height,i=e.width,r=t%ba,a=(t-r)/ba,s=r===0?a:a+1,o=n.createImageData(i,ba),l=0,u=e.data,p=o.data;for(let f=0;f<s;f++){let g=f<a?ba:r;({srcPos:l}=FF({src:u,srcPos:l,dest:p,width:i,height:g,nonBlackColor:0})),n.putImageData(o,0,f*ba)}}function lp(n,e){let t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let i of t)n[i]!==void 0&&(e[i]=n[i]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function a0(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!sa){let{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function t3(n,e){if(e)return!0;let t=We.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);let i=Math.fround((globalThis.devicePixelRatio||1)*Il.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}var zF=["butt","round","square"],HF=["miter","round","bevel"],WF={},e3={},lu=class n{constructor(e,t,i,r,a,{optionalContentConfig:s,markedContentStack:o=null},l,u){this.ctx=e,this.current=new M0(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=r,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=s,this.cachedCanvases=new pb(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){let a=this.ctx.canvas.width,s=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=o,i){let l=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...An(this.compositeCtx))}this.ctx.save(),a0(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=An(this.ctx)}executeOperatorList(e,t,i,r){let a=e.argsArray,s=e.fnArray,o=t||0,l=a.length;if(l===o)return o;let u=l-o>KA&&typeof i=="function",p=u?Date.now()+BF:0,f=0,g=this.commonObjs,m=this.objs,x;for(;;){if(r!==void 0&&o===r.nextBreakPoint)return r.breakIt(o,i),o;if(x=s[o],x!==vs.dependency)this[x].apply(this,a[o]);else for(let y of a[o]){let S=y.startsWith("g_")?g:m;if(!S.has(y))return S.get(y,i),o}if(o++,o===l)return o;if(u&&++f>KA){if(Date.now()>p)return i(),o;f=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let e of this._cachedBitmapsMap.values()){for(let t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){let e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){let t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){let i=e.width??e.displayWidth,r=e.height??e.displayHeight,a=Math.max(Math.hypot(t[0],t[1]),1),s=Math.max(Math.hypot(t[2],t[3]),1),o=i,l=r,u="prescale1",p,f;for(;a>2&&o>1||s>2&&l>1;){let g=o,m=l;a>2&&o>1&&(g=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),a/=o/g),s>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,s/=l/m),p=this.cachedCanvases.getCanvas(u,g,m),f=p.context,f.clearRect(0,0,g,m),f.drawImage(e,0,0,o,l,0,0,g,m),e=p.canvas,o=g,l=m,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){let t=this.ctx,{width:i,height:r}=e,a=this.current.fillColor,s=this.current.patternFill,o=An(t),l,u,p,f;if((e.bitmap||e.data)&&e.count>1){let B=e.bitmap||e.data.buffer;u=JSON.stringify(s?o:[o.slice(0,4),a]),l=this._cachedBitmapsMap.get(B),l||(l=new Map,this._cachedBitmapsMap.set(B,l));let R=l.get(u);if(R&&!s){let F=Math.round(Math.min(o[0],o[2])+o[4]),P=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:R,offsetX:F,offsetY:P}}p=R}p||(f=this.cachedCanvases.getCanvas("maskCanvas",i,r),QA(f.context,e));let g=We.transform(o,[1/i,0,0,-1/r,0,0]);g=We.transform(g,[1,0,0,1,0,-r]);let[m,x,y,S]=We.getAxialAlignedBoundingBox([0,0,i,r],g),b=Math.round(y-m)||1,M=Math.round(S-x)||1,T=this.cachedCanvases.getCanvas("fillCanvas",b,M),I=T.context,O=m,U=x;I.translate(-O,-U),I.transform(...g),p||(p=this._scaleImage(f.canvas,js(I)),p=p.img,l&&s&&l.set(u,p)),I.imageSmoothingEnabled=t3(An(I),e.interpolate),r0(I,p,0,0,p.width,p.height,0,0,i,r),I.globalCompositeOperation="source-in";let N=We.transform(js(I),[1,0,0,1,-O,-U]);return I.fillStyle=s?a.getPattern(t,this,N,Hr.FILL):a,I.fillRect(0,0,i,r),l&&!s&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,T.canvas)),{canvas:T.canvas,offsetX:Math.round(O),offsetY:Math.round(U)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=zF[e]}setLineJoin(e){this.ctx.lineJoin=HF[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){let i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(let[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;let a=this.ctx;a.setTransform(...An(this.suspendedCtx)),lp(this.suspendedCtx,a),VF(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),lp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,r){let a=r[0],s=r[1],o=r[2]-a,l=r[3]-s;o===0||l===0||(this.genericComposeSMask(t.context,i,o,l,t.subtype,t.backdrop,t.transferMap,a,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,r,a,s,o,l,u,p,f){let g=e.canvas,m=l-p,x=u-f;if(s){let S=We.makeHexColor(...s);if(m<0||x<0||m+i>g.width||x+r>g.height){let b=this.cachedCanvases.getCanvas("maskExtension",i,r),M=b.context;M.drawImage(g,-m,-x),M.globalCompositeOperation="destination-atop",M.fillStyle=S,M.fillRect(0,0,i,r),M.globalCompositeOperation="source-over",g=b.canvas,m=x=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);let b=new Path2D;b.rect(m,x,i,r),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=S,e.fillRect(m,x,i,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));let y=new Path2D;y.rect(l,u,i,r),t.clip(y),t.globalCompositeOperation="destination-in",t.drawImage(g,m,x,i,r,l,u,i,r),t.restore()}save(){this.inSMaskMode?(lp(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),lp(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,r,a,s){this.ctx.transform(e,t,i,r,a,s),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){let r=this.ctx,a=this.current,s=a.x,o=a.y,l,u,p=An(r),f=p[0]===0&&p[3]===0||p[1]===0&&p[2]===0,g=f?i.slice(0):null;for(let m=0,x=0,y=e.length;m<y;m++)switch(e[m]|0){case vs.rectangle:s=t[x++],o=t[x++];let S=t[x++],b=t[x++],M=s+S,T=o+b;r.moveTo(s,o),S===0||b===0?r.lineTo(M,T):(r.lineTo(M,o),r.lineTo(M,T),r.lineTo(s,T)),f||a.updateRectMinMax(p,[s,o,M,T]),r.closePath();break;case vs.moveTo:s=t[x++],o=t[x++],r.moveTo(s,o),f||a.updatePathMinMax(p,s,o);break;case vs.lineTo:s=t[x++],o=t[x++],r.lineTo(s,o),f||a.updatePathMinMax(p,s,o);break;case vs.curveTo:l=s,u=o,s=t[x+4],o=t[x+5],r.bezierCurveTo(t[x],t[x+1],t[x+2],t[x+3],s,o),a.updateCurvePathMinMax(p,l,u,t[x],t[x+1],t[x+2],t[x+3],s,o,g),x+=6;break;case vs.curveTo2:l=s,u=o,r.bezierCurveTo(s,o,t[x],t[x+1],t[x+2],t[x+3]),a.updateCurvePathMinMax(p,l,u,s,o,t[x],t[x+1],t[x+2],t[x+3],g),s=t[x+2],o=t[x+3],x+=4;break;case vs.curveTo3:l=s,u=o,s=t[x+2],o=t[x+3],r.bezierCurveTo(t[x],t[x+1],s,o,s,o),a.updateCurvePathMinMax(p,l,u,t[x],t[x+1],s,o,s,o,g),x+=4;break;case vs.closePath:r.closePath();break}f&&a.updateScalingPathMinMax(p,g),a.setCurrentPoint(s,o)}closePath(){this.ctx.closePath()}stroke(e=!0){let t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&i?.getPattern?(t.save(),t.strokeStyle=i.getPattern(t,this,js(t),Hr.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){let t=this.ctx,i=this.current.fillColor,r=this.current.patternFill,a=!1;r&&(t.save(),t.fillStyle=i.getPattern(t,this,js(t),Hr.FILL),a=!0);let s=this.current.getClippedPathBoundingBox();this.contentVisible&&s!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),a&&t.restore(),e&&this.consumePath(s)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=WF}eoClip(){this.pendingClip=e3}beginText(){this.current.textMatrix=a3,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(let i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){let i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||Gx,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Ci("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;let a=i.loadedName||"sans-serif",s=i.systemFontInfo?.css||`"${a}", ${i.fallbackName}`,o="normal";i.black?o="900":i.bold&&(o="bold");let l=i.italic?"italic":"normal",u=t;t<YA?u=YA:t>$A&&(u=$A),this.current.fontSizeScale=t/u,this.ctx.font=`${l} ${o} ${u}px ${s}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,r,a,s){this.current.textMatrix=[e,t,i,r,a,s],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,r,a){let s=this.ctx,o=this.current,l=o.font,u=o.textRenderingMode,p=o.fontSize/o.fontSizeScale,f=u&zr.FILL_STROKE_MASK,g=!!(u&zr.ADD_TO_PATH_FLAG),m=o.patternFill&&!l.missingFile,x=o.patternStroke&&!l.missingFile,y;(l.disableFontFace||g||m||x)&&(y=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||m||x?(s.save(),s.translate(t,i),s.beginPath(),y(s,p),(f===zr.FILL||f===zr.FILL_STROKE)&&(r&&s.setTransform(...r),s.fill()),(f===zr.STROKE||f===zr.FILL_STROKE)&&(a&&s.setTransform(...a),s.stroke()),s.restore()):((f===zr.FILL||f===zr.FILL_STROKE)&&s.fillText(e,t,i),(f===zr.STROKE||f===zr.FILL_STROKE)&&s.strokeText(e,t,i)),g&&(this.pendingTextPaths||=[]).push({transform:An(s),x:t,y:i,fontSize:p,addToPath:y})}get isFontSubpixelAAEnabled(){let{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);let t=e.getImageData(0,0,10,10).data,i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return Ii(this,"isFontSubpixelAAEnabled",i)}showText(e){let t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);let r=t.fontSize;if(r===0)return;let a=this.ctx,s=t.fontSizeScale,o=t.charSpacing,l=t.wordSpacing,u=t.fontDirection,p=t.textHScale*u,f=e.length,g=i.vertical,m=g?1:-1,x=i.defaultVMetrics,y=r*t.fontMatrix[0],S=t.textRenderingMode===zr.FILL&&!i.disableFontFace&&!t.patternFill;a.save(),a.transform(...t.textMatrix),a.translate(t.x,t.y+t.textRise),u>0?a.scale(p,-1):a.scale(p,1);let b,M;if(t.patternFill){a.save();let N=t.fillColor.getPattern(a,this,js(a),Hr.FILL);b=An(a),a.restore(),a.fillStyle=N}if(t.patternStroke){a.save();let N=t.strokeColor.getPattern(a,this,js(a),Hr.STROKE);M=An(a),a.restore(),a.strokeStyle=N}let T=t.lineWidth,I=t.textMatrixScale;if(I===0||T===0){let N=t.textRenderingMode&zr.FILL_STROKE_MASK;(N===zr.STROKE||N===zr.FILL_STROKE)&&(T=this.getSinglePixelWidth())}else T/=I;if(s!==1&&(a.scale(s,s),T/=s),a.lineWidth=T,i.isInvalidPDFjsFont){let N=[],B=0;for(let R of e)N.push(R.unicode),B+=R.width;a.fillText(N.join(""),0,0),t.x+=B*y*p,a.restore(),this.compose();return}let O=0,U;for(U=0;U<f;++U){let N=e[U];if(typeof N=="number"){O+=m*N*r/1e3;continue}let B=!1,R=(N.isSpace?l:0)+o,F=N.fontChar,P=N.accent,V,$,K=N.width;if(g){let ot=N.vmetric||x,at=-(N.vmetric?ot[1]:K*.5)*y,Q=ot[2]*y;K=ot?-ot[0]:K,V=at/s,$=(O+Q)/s}else V=O/s,$=0;if(i.remeasure&&K>0){let ot=a.measureText(F).width*1e3/r*s;if(K<ot&&this.isFontSubpixelAAEnabled){let at=K/ot;B=!0,a.save(),a.scale(at,1),V/=at}else K!==ot&&(V+=(K-ot)/2e3*r/s)}if(this.contentVisible&&(N.isInFont||i.missingFile)){if(S&&!P)a.fillText(F,V,$);else if(this.paintChar(F,V,$,b,M),P){let ot=V+r*P.offset.x/s,at=$-r*P.offset.y/s;this.paintChar(P.fontChar,ot,at,b,M)}}let ct=g?K*y-R*u:K*y+R*u;O+=ct,B&&a.restore()}g?t.y-=O:t.x+=O*p,a.restore(),this.compose()}showType3Text(e){let t=this.ctx,i=this.current,r=i.font,a=i.fontSize,s=i.fontDirection,o=r.vertical?1:-1,l=i.charSpacing,u=i.wordSpacing,p=i.textHScale*s,f=i.fontMatrix||Gx,g=e.length,m=i.textRenderingMode===zr.INVISIBLE,x,y,S,b;if(!(m||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(p,s),x=0;x<g;++x){if(y=e[x],typeof y=="number"){b=o*y*a/1e3,this.ctx.translate(b,0),i.x+=b*p;continue}let M=(y.isSpace?u:0)+l,T=r.charProcOperatorList[y.operatorListId];if(!T){Ci(`Type3 character "${y.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=y,this.save(),t.scale(a,a),t.transform(...f),this.executeOperatorList(T),this.restore()),S=We.applyTransform([y.width,0],f)[0]*a+M,t.translate(S,0),i.x+=S*p}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,r,a,s){this.ctx.rect(i,r,a-i,s-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){let i=e[1],r=this.baseTransform||An(this.ctx),a={createCanvasGraphics:s=>new n(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new NF(e,i,this.ctx,a,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=We.makeHexColor(e,t,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=We.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=OF(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;let t=this.ctx;this.save();let i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,js(t),Hr.SHADING);let r=js(t);if(r){let{width:a,height:s}=t.canvas,[o,l,u,p]=We.getAxialAlignedBoundingBox([0,0,a,s],r);this.ctx.fillRect(o,l,u-o,p-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){un("Should not call beginInlineImage")}beginImageData(){un("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=An(this.ctx),t)){let i=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],i,r),this.current.updateRectMinMax(An(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let t=this.ctx;e.isolated||G0("TODO: Support non-isolated groups."),e.knockout&&Ci("Knockout groups not supported.");let i=An(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=We.getAxialAlignedBoundingBox(e.bbox,An(t)),a=[0,0,t.canvas.width,t.canvas.height];r=We.intersect(r,a)||[0,0,0,0];let s=Math.floor(r[0]),o=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-s,1),u=Math.max(Math.ceil(r[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,u]);let p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);let f=this.cachedCanvases.getCanvas(p,l,u),g=f.context;g.translate(-s,-o),g.transform(...i),e.smask?this.smaskStack.push({canvas:f.canvas,context:g,offsetX:s,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(s,o),t.save()),lp(t,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;let t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let r=An(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);let a=We.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,i,r,a){if(this.#t(),a0(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){let s=t[2]-t[0],o=t[3]-t[1];if(a&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=s,t[3]=o;let[l,u]=We.singularValueDecompose2dScale(An(this.ctx)),{viewportScale:p}=this,f=Math.ceil(s*this.outputScaleX*p),g=Math.ceil(o*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(f,g);let{canvas:m,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(e,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(l,0,0,-u,0,o*u),a0(this.ctx)}else a0(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],s,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new M0(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;let t=e.count;e=this.getObject(e.data,e),e.count=t;let i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=UF(e)),r.compiled)){r.compiled(i);return}let a=this._createMaskCanvas(e),s=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,a.offsetX,a.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,r=0,a,s){if(!this.contentVisible)return;e=this.getObject(e.data,e);let o=this.ctx;o.save();let l=An(o);o.transform(t,i,r,a,0,0);let u=this._createMaskCanvas(e);o.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let p=0,f=s.length;p<f;p+=2){let g=We.transform(l,[t,i,r,a,s[p],s[p+1]]),[m,x]=We.applyTransform([0,0],g);o.drawImage(u.canvas,m,x)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;let t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(let a of e){let{data:s,width:o,height:l,transform:u}=a,p=this.cachedCanvases.getCanvas("maskCanvas",o,l),f=p.context;f.save();let g=this.getObject(s,a);QA(f,g),f.globalCompositeOperation="source-in",f.fillStyle=r?i.getPattern(f,this,js(t),Hr.FILL):i,f.fillRect(0,0,o,l),f.restore(),t.save(),t.transform(...u),t.scale(1,-1),r0(t,p.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;let t=this.getObject(e);if(!t){Ci("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;let a=this.getObject(e);if(!a){Ci("Dependent image isn't ready yet");return}let s=a.width,o=a.height,l=[];for(let u=0,p=r.length;u<p;u+=2)l.push({transform:[t,0,0,i,r[u],r[u+1]],x:0,y:0,w:s,h:o});this.paintInlineImageXObjectGroup(a,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;let{bitmap:t,width:i,height:r}=e,a=this.cachedCanvases.getCanvas("inlineImage",i,r),s=a.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",a.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;let t=e.width,i=e.height,r=this.ctx;if(this.save(),!sa){let{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none")}r.scale(1/t,-1/i);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{let l=this.cachedCanvases.getCanvas("inlineImage",t,i).context;JA(l,e),a=this.applyTransferMapsToCanvas(l)}let s=this._scaleImage(a,js(r));r.imageSmoothingEnabled=t3(An(r),e.interpolate),r0(r,s.img,0,0,s.paintWidth,s.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;let i=this.ctx,r;if(e.bitmap)r=e.bitmap;else{let a=e.width,s=e.height,l=this.cachedCanvases.getCanvas("inlineImage",a,s).context;JA(l,e),r=this.applyTransferMapsToCanvas(l)}for(let a of t)i.save(),i.transform(...a.transform),i.scale(1,-1),r0(i,r,a.x,a.y,a.w,a.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){let t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);let i=this.ctx;this.pendingClip&&(t||(this.pendingClip===e3?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let e=An(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{let t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:e}=this.current,{a:t,b:i,c:r,d:a}=this.ctx.getTransform(),s,o;if(i===0&&r===0){let l=Math.abs(t),u=Math.abs(a);if(l===u)if(e===0)s=o=1/l;else{let p=l*e;s=o=p<1?1/p:1}else if(e===0)s=1/l,o=1/u;else{let p=l*e,f=u*e;s=p<1?1/p:1,o=f<1?1/f:1}}else{let l=Math.abs(t*a-i*r),u=Math.hypot(t,i),p=Math.hypot(r,a);if(e===0)s=p/l,o=u/l;else{let f=e*l;s=p>f?p/f:1,o=u>f?u/f:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){let{ctx:t}=this,{lineWidth:i}=this.current,[r,a]=this.getScaleForStroking();if(t.lineWidth=i||1,r===1&&a===1){t.stroke();return}let s=t.getLineDash();if(e&&t.save(),t.scale(r,a),s.length>0){let o=Math.max(r,a);t.setLineDash(s.map(l=>l/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};for(let n in vs)lu.prototype[n]!==void 0&&(lu.prototype[vs[n]]=lu.prototype[n]);var Ac=class{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#t=e}static get workerSrc(){return this.#e}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#e=e}},s0={UNKNOWN:0,DATA:1,ERROR:2},dr={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function i3(){}function es(n){switch(n instanceof Error||typeof n=="object"&&n!==null||un('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new To(n.message);case"MissingPDFException":return new Tc(n.message);case"PasswordException":return new hp(n.message,n.code);case"UnexpectedResponseException":return new hu(n.message,n.status);case"UnknownErrorException":return new pp(n.message,n.details);default:return new pp(n.message,n.toString())}}var Cc=class{#t=new AbortController;constructor(e,t,i){this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){let i=e.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===s0.DATA)r.resolve(e.data);else if(e.callback===s0.ERROR)r.reject(es(e.reason));else throw new Error("Unexpected callback case");return}let t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){let i=this.sourceName,r=e.sourceName,a=this.comObj;Promise.try(t,e.data).then(function(s){a.postMessage({sourceName:i,targetName:r,callback:s0.DATA,callbackId:e.callbackId,data:s})},function(s){a.postMessage({sourceName:i,targetName:r,callback:s0.ERROR,callbackId:e.callbackId,reason:es(s)})});return}if(e.streamId){this.#i(e);return}t(e.data)}on(e,t){let i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){let r=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[r]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(s){a.reject(s)}return a.promise}sendWithStream(e,t,i,r){let a=this.streamId++,s=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{let p=Promise.withResolvers();return this.streamControllers[a]={controller:u,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:s,targetName:o,action:e,streamId:a,data:t,desiredSize:u.desiredSize},r),p.promise},pull:u=>{let p=Promise.withResolvers();return this.streamControllers[a].pullCall=p,l.postMessage({sourceName:s,targetName:o,stream:dr.PULL,streamId:a,desiredSize:u.desiredSize}),p.promise},cancel:u=>{ur(u instanceof Error,"cancel must have a valid reason");let p=Promise.withResolvers();return this.streamControllers[a].cancelCall=p,this.streamControllers[a].isClosed=!0,l.postMessage({sourceName:s,targetName:o,stream:dr.CANCEL,streamId:a,reason:es(u)}),p.promise}},i)}#i(e){let t=e.streamId,i=this.sourceName,r=e.sourceName,a=this.comObj,s=this,o=this.actionHandler[e.action],l={enqueue(u,p=1,f){if(this.isCancelled)return;let g=this.desiredSize;this.desiredSize-=p,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:i,targetName:r,stream:dr.ENQUEUE,streamId:t,chunk:u},f)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:dr.CLOSE,streamId:t}),delete s.streamSinks[t])},error(u){ur(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:dr.ERROR,streamId:t,reason:es(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(o,e.data,l).then(function(){a.postMessage({sourceName:i,targetName:r,stream:dr.START_COMPLETE,streamId:t,success:!0})},function(u){a.postMessage({sourceName:i,targetName:r,stream:dr.START_COMPLETE,streamId:t,reason:es(u)})})}#n(e){let t=e.streamId,i=this.sourceName,r=e.sourceName,a=this.comObj,s=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case dr.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject(es(e.reason));break;case dr.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject(es(e.reason));break;case dr.PULL:if(!o){a.postMessage({sourceName:i,targetName:r,stream:dr.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||i3).then(function(){a.postMessage({sourceName:i,targetName:r,stream:dr.PULL_COMPLETE,streamId:t,success:!0})},function(u){a.postMessage({sourceName:i,targetName:r,stream:dr.PULL_COMPLETE,streamId:t,reason:es(u)})});break;case dr.ENQUEUE:if(ur(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case dr.CLOSE:if(ur(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),this.#a(s,t);break;case dr.ERROR:ur(s,"error should have stream controller"),s.controller.error(es(e.reason)),this.#a(s,t);break;case dr.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject(es(e.reason)),this.#a(s,t);break;case dr.CANCEL:if(!o)break;let l=es(e.reason);Promise.try(o.onCancel||i3,l).then(function(){a.postMessage({sourceName:i,targetName:r,stream:dr.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){a.postMessage({sourceName:i,targetName:r,stream:dr.CANCEL_COMPLETE,streamId:t,reason:es(u)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}#a(e,t){return Ne(this,null,function*(){yield Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]})}destroy(){this.#t?.abort(),this.#t=null}},fb=class{#t;#e;constructor({parsedData:e,rawData:t}){this.#t=e,this.#e=t}getRaw(){return this.#e}get(e){return this.#t.get(e)??null}getAll(){return dy(this.#t)}has(e){return this.#t.has(e)}},ou=Symbol("INTERNAL"),mb=class{#t=!1;#e=!1;#i=!1;#n=!0;constructor(e,{name:t,intent:i,usage:r,rbGroups:a}){this.#t=!!(e&Pa.DISPLAY),this.#e=!!(e&Pa.PRINT),this.name=t,this.intent=i,this.usage=r,this.rbGroups=a}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;let{print:e,view:t}=this.usage;return this.#t?t?.viewState!=="OFF":this.#e?e?.printState!=="OFF":!0}_setVisible(e,t,i=!1){e!==ou&&un("Internal method `_setVisible` called."),this.#i=i,this.#n=t}},gb=class{#t=null;#e=new Map;#i=null;#n=null;constructor(e,t=Pa.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(let i of e.groups)this.#e.set(i.id,new mb(t,i));if(e.baseState==="OFF")for(let i of this.#e.values())i._setVisible(ou,!1);for(let i of e.on)this.#e.get(i)._setVisible(ou,!0);for(let i of e.off)this.#e.get(i)._setVisible(ou,!1);this.#i=this.getHash()}}#a(e){let t=e.length;if(t<2)return!0;let i=e[0];for(let r=1;r<t;r++){let a=e[r],s;if(Array.isArray(a))s=this.#a(a);else if(this.#e.has(a))s=this.#e.get(a).visible;else return Ci(`Optional content group not found: ${a}`),!0;switch(i){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return i==="And"}isVisible(e){if(this.#e.size===0)return!0;if(!e)return G0("Optional content group not defined."),!0;if(e.type==="OCG")return this.#e.has(e.id)?this.#e.get(e.id).visible:(Ci(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#a(e.expression);if(!e.policy||e.policy==="AnyOn"){for(let t of e.ids){if(!this.#e.has(t))return Ci(`Optional content group not found: ${t}`),!0;if(this.#e.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(let t of e.ids){if(!this.#e.has(t))return Ci(`Optional content group not found: ${t}`),!0;if(!this.#e.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(let t of e.ids){if(!this.#e.has(t))return Ci(`Optional content group not found: ${t}`),!0;if(!this.#e.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(let t of e.ids){if(!this.#e.has(t))return Ci(`Optional content group not found: ${t}`),!0;if(this.#e.get(t).visible)return!1}return!0}return Ci(`Unknown optional content policy ${e.policy}.`),!0}return Ci(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){let r=this.#e.get(e);if(!r){Ci(`Optional content group not found: ${e}`);return}if(i&&t&&r.rbGroups.length)for(let a of r.rbGroups)for(let s of a)s!==e&&this.#e.get(s)?._setVisible(ou,!1,!0);r._setVisible(ou,!!t,!0),this.#t=null}setOCGState({state:e,preserveRB:t}){let i;for(let r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}let a=this.#e.get(r);if(a)switch(i){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!a.visible,t);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?dy(this.#e):null}getGroup(e){return this.#e.get(e)||null}getHash(){if(this.#t!==null)return this.#t;let e=new _0;for(let[t,i]of this.#e)e.update(`${t}:${i.visible}`);return this.#t=e.hexdigest()}},_b=class{constructor(e,{disableRange:t=!1,disableStream:i=!1}){ur(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:r,initialData:a,progressiveDone:s,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=o,a?.length>0){let l=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){let i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{let r=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(i),!0)});ur(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){let t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ur(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let e=this._queuedChunks;return this._queuedChunks=null,new vb(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let i=new xb(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}},vb=class{constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=hy(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(let a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return Ne(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},xb=class{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(let i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return Ne(this,null,function*(){if(this._queuedChunk){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function jF(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let p=o(t);return p=unescape(p),p=l(p),p=u(p),a(p)}if(t=s(n),t){let p=u(t);return a(p)}if(t=i("filename","i").exec(n),t){t=t[1];let p=o(t);return p=u(p),a(p)}function i(p,f){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function r(p,f){if(p){if(!/^[\x00-\xFF]+$/.test(f))return f;try{let g=new TextDecoder(p,{fatal:!0}),m=q0(f);f=g.decode(m),e=!1}catch{}}return f}function a(p){return e&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),e&&(p=r("iso-8859-1",p))),p}function s(p){let f=[],g,m=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=m.exec(p))!==null;){let[,y,S,b]=g;if(y=parseInt(y,10),y in f){if(y===0)break;continue}f[y]=[S,b]}let x=[];for(let y=0;y<f.length&&y in f;++y){let[S,b]=f[y];b=o(b),S&&(b=unescape(b),y===0&&(b=l(b))),x.push(b)}return x.join("")}function o(p){if(p.startsWith('"')){let f=p.slice(1).split('\\"');for(let g=0;g<f.length;++g){let m=f[g].indexOf('"');m!==-1&&(f[g]=f[g].slice(0,m),f.length=g+1),f[g]=f[g].replaceAll(/\\(.)/g,"$1")}p=f.join('"')}return p}function l(p){let f=p.indexOf("'");if(f===-1)return p;let g=p.slice(0,f),x=p.slice(f+1).replace(/^[^']*'/,"");return r(g,x)}function u(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,g,m,x){if(m==="q"||m==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,S){return String.fromCharCode(parseInt(S,16))}),r(g,x);try{x=atob(x)}catch{}return r(g,x)})}return""}function l3(n,e){let t=new Headers;if(!n||!e||typeof e!="object")return t;for(let i in e){let r=e[i];r!==void 0&&t.append(i,r)}return t}function $0(n){try{return new URL(n).origin}catch{}return null}function c3({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:i}){let r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(n.get("Content-Length"),10);return!Number.isInteger(a)||(r.suggestedLength=a,a<=2*t)||i||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function d3(n){let e=n.get("Content-Disposition");if(e){let t=jF(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(hy(t))return t}return null}function K0(n,e){return n===404||n===0&&e.startsWith("file:")?new Tc('Missing PDF "'+e+'".'):new hu(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function u3(n){return n===200||n===206}function h3(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function p3(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Ci(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}var E0=class{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=l3(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ur(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new bb(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let i=new yb(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},bb=class{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;let t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;let i=new Headers(e.headers),r=t.url;fetch(r,h3(i,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=$0(a.url),!u3(a.status))throw K0(a.status,r);this._reader=a.body.getReader(),this._headersCapability.resolve();let s=a.headers,{allowRangeRequests:o,suggestedLength:l}=c3({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=d3(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new To("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return Ne(this,null,function*(){yield this._headersCapability.promise;let{value:e,done:t}=yield this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:p3(e),done:!1})})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},yb=class{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;let r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;let a=new Headers(e.headers);a.append("Range",`bytes=${t}-${i-1}`);let s=r.url;fetch(s,h3(a,this._withCredentials,this._abortController)).then(o=>{let l=$0(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!u3(o.status))throw K0(o.status,s);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return Ne(this,null,function*(){yield this._readCapability.promise;let{value:e,done:t}=yield this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:p3(e),done:!1})})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},Wx=200,jx=206;function GF(n){let e=n.response;return typeof e!="string"?e:q0(e).buffer}var Sb=class{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=l3(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){let r={begin:e,end:t};for(let a in i)r[a]=i[a];return this.request(r)}requestFull(e){return this.request(e)}request(e){let t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(let[a,s]of this.headers)t.setRequestHeader(a,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=jx):r.expectedStatus=Wx,t.responseType="arraybuffer",e.onError&&(t.onerror=function(a){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){let i=this.pendingRequests[e];i&&i.onProgress?.(t)}onStateChange(e,t){let i=this.pendingRequests[e];if(!i)return;let r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){i.onError?.(r.status);return}let a=r.status||Wx;if(!(a===Wx&&i.expectedStatus===jx)&&a!==i.expectedStatus){i.onError?.(r.status);return}let o=GF(r);if(a===jx){let l=r.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);i.onDone({begin:parseInt(u[1],10),chunk:o})}else o?i.onDone({begin:0,chunk:o}):i.onError?.(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){let t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}},wb=class{constructor(e){this._source=e,this._manager=new Sb(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){let t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ur(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Cb(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){let i=new Mb(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},Cb=class{constructor(e,t){this._manager=e;let i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=$0(t.responseURL);let i=t.getAllResponseHeaders(),r=new Headers(i?i.trim().split(/[\r\n]+/).map(o=>{let[l,...u]=o.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:s}=c3({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=d3(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=K0(e,this._url),this._headersCapability.reject(this._storedError);for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){return Ne(this,null,function*(){if(yield this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0,this._headersCapability.reject(e);for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},Mb=class{constructor(e,t,i){this._manager=e;let r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){let e=$0(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){let t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(let i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=K0(e,this._url);for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}read(){return Ne(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},qF=/^[a-z][a-z0-9\-+.]+:/i;function XF(n){if(qF.test(n))return new URL(n);let e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}var Eb=class{constructor(e){this.source=e,this.url=XF(e.url),ur(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ur(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Ab(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let i=new Tb(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},Ab=class{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;let t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new Tc(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return Ne(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new To("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},Tb=class{constructor(e,t,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let r=e.source;this._isStreamingSupported=!r.disableStream;let a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}read(){return Ne(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}},YF=1e5,xa=30,$F=.8,bp=class n{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#r=null;#c=0;#o=0;#d=null;#l=null;#u=0;#s=0;#h=Object.create(null);#p=[];#f=null;#g=[];#m=new WeakMap;#_=null;static#v=new Map;static#b=new Map;static#y=new WeakMap;static#C=null;static#M=new Set;constructor({textContentSource:e,container:t,viewport:i}){if(e instanceof ReadableStream)this.#f=e;else if(typeof e=="object")this.#f=new ReadableStream({start(l){l.enqueue(e),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=t,this.#s=i.scale*(globalThis.devicePixelRatio||1),this.#u=i.rotation,this.#r={div:null,properties:null,ctx:null};let{pageWidth:r,pageHeight:a,pageX:s,pageY:o}=i.rawDims;this.#_=[1,0,0,-1,-s,o+a],this.#o=r,this.#c=a,n.#I(),kc(t,i),this.#t.promise.finally(()=>{n.#M.delete(this),this.#r=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:e,isFirefox:t}=Pr.platform;return Ii(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){let e=()=>{this.#d.read().then(({value:t,done:i})=>{if(i){this.#t.resolve();return}this.#a??=t.lang,Object.assign(this.#h,t.styles),this.#E(t.items),e()},this.#t.reject)};return this.#d=this.#f.getReader(),n.#M.add(this),e(),this.#t.promise}update({viewport:e,onBefore:t=null}){let i=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==this.#u&&(t?.(),this.#u=r,kc(this.#l,{rotation:r})),i!==this.#s){t?.(),this.#s=i;let a={div:null,properties:null,ctx:n.#k(this.#a)};for(let s of this.#g)a.properties=this.#m.get(s),a.div=s,this.#S(a)}}cancel(){let e=new To("TextLayer task cancelled.");this.#d?.cancel(e).catch(()=>{}),this.#d=null,this.#t.reject(e)}get textDivs(){return this.#g}get textContentItemsStr(){return this.#p}#E(e){if(this.#i)return;this.#r.ctx??=n.#k(this.#a);let t=this.#g,i=this.#p;for(let r of e){if(t.length>YF){Ci("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){let a=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id!==null&&this.#e.setAttribute("id",`${r.id}`),a.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(r.str),this.#T(r)}}#T(e){let t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#g.push(t);let r=We.transform(this.#_,e.transform),a=Math.atan2(r[1],r[0]),s=this.#h[e.fontName];s.vertical&&(a+=Math.PI/2);let o=this.#n&&s.fontSubstitution||s.fontFamily;o=n.fontFamilyMap.get(o)||o;let l=Math.hypot(r[2],r[3]),u=l*n.#R(o,this.#a),p,f;a===0?(p=r[4],f=r[5]-u):(p=r[4]+u*Math.sin(a),f=r[5]-u*Math.cos(a));let g="calc(var(--scale-factor)*",m=t.style;this.#e===this.#l?(m.left=`${(100*p/this.#o).toFixed(2)}%`,m.top=`${(100*f/this.#c).toFixed(2)}%`):(m.left=`${g}${p.toFixed(2)}px)`,m.top=`${g}${f.toFixed(2)}px)`),m.fontSize=`${g}${(n.#C*l).toFixed(2)}px)`,m.fontFamily=o,i.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),a!==0&&(i.angle=a*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){let y=Math.abs(e.transform[0]),S=Math.abs(e.transform[3]);y!==S&&Math.max(y,S)/Math.min(y,S)>1.5&&(x=!0)}if(x&&(i.canvasWidth=s.vertical?e.height:e.width),this.#m.set(t,i),this.#r.div=t,this.#r.properties=i,this.#S(this.#r),i.hasText&&this.#e.append(t),i.hasEOL){let y=document.createElement("br");y.setAttribute("role","presentation"),this.#e.append(y)}}#S(e){let{div:t,properties:i,ctx:r}=e,{style:a}=t,s="";if(n.#C>1&&(s=`scale(${1/n.#C})`),i.canvasWidth!==0&&i.hasText){let{fontFamily:o}=a,{canvasWidth:l,fontSize:u}=i;n.#A(r,u*this.#s,o);let{width:p}=r.measureText(t.textContent);p>0&&(s=`scaleX(${l*this.#s/p}) ${s}`)}i.angle!==0&&(s=`rotate(${i.angle}deg) ${s}`),s.length>0&&(a.transform=s)}static cleanup(){if(!(this.#M.size>0)){this.#v.clear();for(let{canvas:e}of this.#b.values())e.remove();this.#b.clear()}}static#k(e=null){let t=this.#b.get(e||="");if(!t){let i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(e,t),this.#y.set(t,{size:0,family:""})}return t}static#A(e,t,i){let r=this.#y.get(e);t===r.size&&i===r.family||(e.font=`${t}px ${i}`,r.size=t,r.family=i)}static#I(){if(this.#C!==null)return;let e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#C=e.getBoundingClientRect().height,e.remove()}static#R(e,t){let i=this.#v.get(e);if(i)return i;let r=this.#k(t);r.canvas.width=r.canvas.height=xa,this.#A(r,xa,e);let a=r.measureText(""),s=a.fontBoundingBoxAscent,o=Math.abs(a.fontBoundingBoxDescent);if(s){let p=s/(s+o);return this.#v.set(e,p),r.canvas.width=r.canvas.height=0,p}r.strokeStyle="red",r.clearRect(0,0,xa,xa),r.strokeText("g",0,0);let l=r.getImageData(0,0,xa,xa).data;o=0;for(let p=l.length-1-3;p>=0;p-=4)if(l[p]>0){o=Math.ceil(p/4/xa);break}r.clearRect(0,0,xa,xa),r.strokeText("A",0,xa),l=r.getImageData(0,0,xa,xa).data,s=0;for(let p=0,f=l.length;p<f;p+=4)if(l[p]>0){s=xa-Math.floor(p/4/xa);break}r.canvas.width=r.canvas.height=0;let u=s?s/(s+o):$F;return this.#v.set(e,u),u}},yp=class n{static textContent(e){let t=[],i={items:t,styles:Object.create(null)};function r(a){if(!a)return;let s=null,o=a.name;if(o==="#text")s=a.value;else if(n.shouldBuildText(o))a?.attributes?.textContent?s=a.attributes.textContent:a.value&&(s=a.value);else return;if(s!==null&&t.push({str:s}),!!a.children)for(let l of a.children)r(l)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}},KF=65536,ZF=100,JF=5e3,QF=sa?sb:nb,t6=sa?ob:y0,e6=sa?ab:rb,i6=sa?lb:C0;function n6(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});let e=new kb,{docId:t}=e,i=n.url?r6(n.url):null,r=n.data?a6(n.data):null,a=n.httpHeaders||null,s=n.withCredentials===!0,o=n.password??null,l=n.range instanceof A0?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:KF,p=n.worker instanceof cu?n.worker:null,f=n.verbosity,g=typeof n.docBaseUrl=="string"&&!Y0(n.docBaseUrl)?n.docBaseUrl:null,m=typeof n.cMapUrl=="string"?n.cMapUrl:null,x=n.cMapPacked!==!1,y=n.CMapReaderFactory||t6,S=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,b=n.StandardFontDataFactory||i6,M=n.stopAtErrors!==!0,T=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,I=n.isEvalSupported!==!1,O=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!sa,U=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!sa&&(Pr.platform.isFirefox||!globalThis.chrome),N=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,B=typeof n.disableFontFace=="boolean"?n.disableFontFace:sa,R=n.fontExtraProperties===!0,F=n.enableXfa===!0,P=n.ownerDocument||globalThis.document,V=n.disableRange===!0,$=n.disableStream===!0,K=n.disableAutoFetch===!0,ct=n.pdfBug===!0,ot=n.CanvasFactory||QF,at=n.FilterFactory||e6,Q=n.enableHWA===!0,xt=l?l.length:n.length??NaN,Mt=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!sa&&!B,qt=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:y===y0&&b===C0&&m&&S&&dp(m,document.baseURI)&&dp(S,document.baseURI);n.canvasFactory&&jA("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&jA("`filterFactory`-instance option, please use `FilterFactory` instead.");let z=null;xF(f);let nt={canvasFactory:new ot({ownerDocument:P,enableHWA:Q}),filterFactory:new at({docId:t,ownerDocument:P}),cMapReaderFactory:qt?null:new y({baseUrl:m,isCompressed:x}),standardFontDataFactory:qt?null:new b({baseUrl:S})};if(!p){let pt={verbosity:f,port:Ac.workerPort};p=pt.port?cu.fromPort(pt):new cu(pt),e._worker=p}let Z={docId:t,apiVersion:"4.9.155",data:r,password:o,disableAutoFetch:K,rangeChunkSize:u,length:xt,docBaseUrl:g,enableXfa:F,evaluatorOptions:{maxImageSize:T,disableFontFace:B,ignoreErrors:M,isEvalSupported:I,isOffscreenCanvasSupported:O,isImageDecoderSupported:U,canvasMaxAreaInBytes:N,fontExtraProperties:R,useSystemFonts:Mt,cMapUrl:qt?m:null,standardFontDataUrl:qt?S:null}},st={disableFontFace:B,fontExtraProperties:R,ownerDocument:P,pdfBug:ct,styleElement:z,loadingParams:{disableAutoFetch:K,enableXfa:F}};return p.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");let pt=p.messageHandler.sendWithPromise("GetDocRequest",Z,r?[r.buffer]:null),ft;if(l)ft=new _b(l,{disableRange:V,disableStream:$});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let St;if(sa)if(dp(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");St=E0}else St=Eb;else St=dp(i)?E0:wb;ft=new St({url:i,length:xt,httpHeaders:a,withCredentials:s,rangeChunkSize:u,disableRange:V,disableStream:$})}return pt.then(St=>{if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");let kt=new Cc(t,St,p.port),Qt=new Lb(kt,e,ft,st,nt);e._transport=Qt,kt.send("Ready",null)})}).catch(e._capability.reject),e}function r6(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(sa&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function a6(n){if(sa&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return q0(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function n3(n){return typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0}var kb=class n{static#t=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${n.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){return Ne(this,null,function*(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),yield this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null})}},A0=class{constructor(e,t,i=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(let i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(let i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(let t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){un("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},Ib=class{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ii(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},Db=class{#t=null;#e=!1;constructor(e,t,i,r=!1){this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new f0:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new T0,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:a=!1}={}){return new fp({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:a})}getAnnotations({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ii(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return Ne(this,null,function*(){return this._transport._htmlForXfa?.children[this._pageIndex]||null})}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:r=Tl.ENABLE,transform:a=null,background:s=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:p=null,isEditing:f=!1}){this._stats?.time("Overall");let g=this._transport.getRenderingIntent(i,r,p,f),{renderingIntent:m,cacheKey:x}=g;this.#e=!1,this.#n(),o||=this._transport.getOptionalContentConfig(m);let y=this._intentStates.get(x);y||(y=Object.create(null),this._intentStates.set(x,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);let S=!!(m&Pa.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(g));let b=I=>{y.renderTasks.delete(M),(this._maybeCleanupAfterRender||S)&&(this.#e=!0),this.#i(!S),I?(M.capability.reject(I),this._abortOperatorList({intentState:y,reason:I instanceof Error?I:new Error(I)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new Ob({callback:b,params:{canvasContext:e,viewport:t,transform:a,background:s},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:u});(y.renderTasks||=new Set).add(M);let T=M.task;return Promise.all([y.displayReadyCapability.promise,o]).then(([I,O])=>{if(this.destroyed){b();return}if(this._stats?.time("Rendering"),!(O.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:I,optionalContentConfig:O}),M.operatorListChanged()}).catch(b),T}getOperatorList({intent:e="display",annotationMode:t=Tl.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){function a(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}let s=this._transport.getRenderingIntent(e,t,i,r,!0),o=this._intentStates.get(s.cacheKey);o||(o=Object.create(null),this._intentStates.set(s.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=a,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>yp.textContent(i));let t=this.streamTextContent(e);return new Promise(function(i,r){function a(){s.read().then(function({value:l,done:u}){if(u){i(o);return}o.lang??=l.lang,Object.assign(o.styles,l.styles),o.items.push(...l.items),a()},r)}let s=t.getReader(),o={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(let i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#e=!1,this.#n(),Promise.all(e)}cleanup(e=!1){this.#e=!0;let t=this.#i(!1);return e&&t&&(this._stats&&=new f0),t}#i(e=!1){if(this.#n(),!this.#e||this.destroyed)return!1;if(e)return this.#t=setTimeout(()=>{this.#t=null,this.#i(!1)},JF),!1;for(let{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#n(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(e,t){let i=this._intentStates.get(t);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(let i of t.renderTasks)i.operatorListChanged();e.lastChunk&&this.#i(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:r}){let{map:a,transfer:s}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:r},s).getReader(),u=this._intentStates.get(t);u.streamReader=l;let p=()=>{l.read().then(({value:f,done:g})=>{if(g){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,u),p())},f=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(let g of u.renderTasks)g.operatorListChanged();this.#i(!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(f);else if(u.opListReadCapability)u.opListReadCapability.reject(f);else throw f}})};p()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof mp){let r=ZF;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new To(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(let[r,a]of this._intentStates)if(a===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}},Pb=class{#t=new Map;#e=Promise.resolve();postMessage(e,t){let i={data:structuredClone(e,t?{transfer:t}:null)};this.#e.then(()=>{for(let[r]of this.#t)r.call(this,i)})}addEventListener(e,t,i=null){let r=null;if(i?.signal instanceof AbortSignal){let{signal:a}=i;if(a.aborted){Ci("LoopbackPort - cannot use an `aborted` signal.");return}let s=()=>this.removeEventListener(e,t);r=()=>a.removeEventListener("abort",s),a.addEventListener("abort",s)}this.#t.set(t,r)}removeEventListener(e,t){this.#t.get(t)?.(),this.#t.delete(t)}terminate(){for(let[,e]of this.#t)e?.();this.#t.clear()}},H0,Mc,Ec,du,u0,uu,h0,En=class En{constructor({name:e=null,port:t=null,verbosity:i=bF()}={}){Cd(this,du);if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(Os(En,Ec)?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(Os(En,Ec)||Yf(En,Ec,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Cc("main","worker",e),this._messageHandler.on("ready",function(){}),$f(this,du,u0).call(this)}_initialize(){if(Os(En,Mc)||Os(En,uu,h0)){this._setupFakeWorker();return}let{workerSrc:e}=En;try{En._isSameOrigin(window.location.href,e)||(e=En._createCDNWrapper(new URL(e,window.location).href));let t=new Worker(e,{type:"module"}),i=new Cc("main","worker",t),r=()=>{a.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:a.signal}),i.on("test",o=>{if(a.abort(),this.destroyed||!o){r();return}this._messageHandler=i,this._port=t,this._webWorker=t,$f(this,du,u0).call(this)}),i.on("ready",o=>{if(a.abort(),this.destroyed){r();return}try{s()}catch{this._setupFakeWorker()}});let s=()=>{let o=new Uint8Array;i.send("test",o,[o.buffer])};s();return}catch{G0("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Os(En,Mc)||(Ci("Setting up fake worker."),Yf(En,Mc,!0)),En._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let t=new Pb;this._port=t;let i=`fake${RS(En,H0)._++}`,r=new Cc(i+"_worker",i,t);e.setup(r,t),this._messageHandler=new Cc(i,i+"_worker",t),$f(this,du,u0).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker?.terminate(),this._webWorker=null,Os(En,Ec)?.delete(this._port),this._port=null,this._messageHandler?.destroy(),this._messageHandler=null}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");let t=Os(this,Ec)?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new En(e)}static get workerSrc(){if(Ac.workerSrc)return Ac.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ii(this,"_setupFakeWorkerGlobal",Ne(this,null,function*(){return Os(this,uu,h0)?Os(this,uu,h0):(yield import(this.workerSrc)).WorkerMessageHandler}))}};H0=new WeakMap,Mc=new WeakMap,Ec=new WeakMap,du=new WeakSet,u0=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},uu=new WeakSet,h0=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Cd(En,uu),Cd(En,H0,0),Cd(En,Mc,!1),Cd(En,Ec),sa&&(Yf(En,Mc,!0),Ac.workerSrc||="./pdf.worker.mjs"),En._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}let r=new URL(t,i);return i.origin===r.origin},En._createCDNWrapper=e=>{let t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};var cu=En,Lb=class{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#a=null;constructor(e,t,i,r,a){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new T0,this.fontLoader=new eb({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#r(e,t=null){let i=this.#t.get(e);if(i)return i;let r=this.messageHandler.sendWithPromise(e,t);return this.#t.set(e,r),r}get annotationStorage(){return Ii(this,"annotationStorage",new vp)}getRenderingIntent(e,t=Tl.ENABLE,i=null,r=!1,a=!1){let s=Pa.DISPLAY,o=tb;switch(e){case"any":s=Pa.ANY;break;case"display":break;case"print":s=Pa.PRINT;break;default:Ci(`getRenderingIntent - invalid intent: ${e}`)}let l=s&Pa.PRINT&&i instanceof v0?i:this.annotationStorage;switch(t){case Tl.DISABLE:s+=Pa.ANNOTATIONS_DISABLE;break;case Tl.ENABLE:break;case Tl.ENABLE_FORMS:s+=Pa.ANNOTATIONS_FORMS;break;case Tl.ENABLE_STORAGE:s+=Pa.ANNOTATIONS_STORAGE,o=l.serializable;break;default:Ci(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(s+=Pa.IS_EDITING),a&&(s+=Pa.OPLIST);let{ids:u,hash:p}=l.modifiedIds,f=[s,o.hash,p];return{renderingIntent:s,cacheKey:f.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));let e=[];for(let i of this.#e.values())e.push(i._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),bp.cleanup(),this._networkStream?.cancelAllRequests(new To("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,r)=>{ur(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},r.onPull=()=>{this._fullReader.read().then(function({value:a,done:s}){if(s){r.close();return}ur(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{this._fullReader.cancel(a),r.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",i=>Ne(this,null,function*(){yield this._fullReader.headersReady;let{isStreamingSupported:r,isRangeSupported:a,contentLength:s}=this._fullReader;return(!r||!a)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=o=>{t.onProgress?.({loaded:o.loaded,total:o.total})}),{isStreamingSupported:r,isRangeSupported:a,contentLength:s}})),e.on("GetRangeReader",(i,r)=>{ur(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let a=this._networkStream.getRangeReader(i.begin,i.end);if(!a){r.close();return}r.onPull=()=>{a.read().then(function({value:s,done:o}){if(o){r.close();return}ur(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{a.cancel(s),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new Ib(i,this))}),e.on("DocException",function(i){let r;switch(i.name){case"PasswordException":r=new hp(i.message,i.code);break;case"InvalidPDFException":r=new p0(i.message);break;case"MissingPDFException":r=new Tc(i.message);break;case"UnexpectedResponseException":r=new hu(i.message,i.status);break;case"UnknownErrorException":r=new pp(i.message,i.details);break;default:un("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",i=>{if(this.#a=Promise.withResolvers(),t.onPassword){let r=a=>{a instanceof Error?this.#a.reject(a):this.#a.resolve({password:a})};try{t.onPassword(r,i.code)}catch(a){this.#a.reject(a)}}else this.#a.reject(new hp(i.message,i.code));return this.#a.promise}),e.on("DataLoaded",i=>{t.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,a])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":let{disableFontFace:s,fontExtraProperties:o,pdfBug:l}=this._params;if("error"in a){let g=a.error;Ci(`Error during font loading: ${g}`),this.commonObjs.resolve(i,g);break}let u=l&&globalThis.FontInspector?.enabled?(g,m)=>globalThis.FontInspector.fontAdded(g,m):null,p=new ib(a,{disableFontFace:s,inspectFont:u});this.fontLoader.bind(p).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!o&&p.data&&(p.data=null),this.commonObjs.resolve(i,p)});break;case"CopyLocalImage":let{imageRef:f}=a;ur(f,"The imageRef must be defined.");for(let g of this.#e.values())for(let[,m]of g.objs)if(m?.ref===f)return m.dataLen?(this.commonObjs.resolve(i,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,a);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,a,s])=>{if(this.destroyed)return;let o=this.#e.get(r);if(!o.objs.has(i)){if(o._intentStates.size===0){s?.bitmap?.close();return}switch(a){case"Image":o.objs.resolve(i,s),s?.dataLen>fF&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(i,s);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",i=>{this.destroyed||t.onProgress?.({loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",i=>Ne(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)})),e.on("FetchStandardFontData",i=>Ne(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ci("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));let t=e-1,i=this.#i.get(t);if(i)return i;let r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#n.set(a.refStr,e);let s=new Db(t,a,this,this._params.pdfBug);return this.#e.set(t,s),s});return this.#i.set(t,r),r}getPageIndex(e){return n3(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#r("GetOptionalContentConfig").then(t=>new gb(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let e="GetMetadata",t=this.#t.get(e);if(t)return t;let i=this.messageHandler.sendWithPromise(e,null).then(r=>({info:r[0],metadata:r[1]?new fb(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(e=!1){return Ne(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(let t of this.#e.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),bp.cleanup()}})}cachedPageNumber(e){if(!n3(e))return null;let t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}},o0=Symbol("INITIAL_DATA"),T0=class{#t=Object.create(null);#e(e){return this.#t[e]||=Sn(Li({},Promise.withResolvers()),{data:o0})}get(e,t=null){if(t){let r=this.#e(e);return r.promise.then(()=>t(r.data)),null}let i=this.#t[e];if(!i||i.data===o0)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){let t=this.#t[e];return!!t&&t.data!==o0}resolve(e,t=null){let i=this.#e(e);i.data=t,i.resolve()}clear(){for(let e in this.#t){let{data:t}=this.#t[e];t?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(let e in this.#t){let{data:t}=this.#t[e];t!==o0&&(yield[e,t])}}},Rb=class{#t=null;constructor(e){this.#t=e,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(e=0){this.#t.cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=this.#t.operatorList;if(!e)return!1;let{annotationCanvasMap:t}=this.#t;return e.form||e.canvas&&t?.size>0}},Ob=class n{#t=null;static#e=new WeakSet;constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:a,operatorList:s,pageIndex:o,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:p=!1,pdfBug:f=!1,pageColors:g=null}){this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=f,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Rb(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(n.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");n.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:i,viewport:r,transform:a,background:s}=this.params;this.gfx=new lu(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:r,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),n.#e.delete(this._canvas),this.callback(e||new mp(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return Ne(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),n.#e.delete(this._canvas),this.callback())))})}},s6="4.9.155",o6="a4eb8407c";function r3(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function cp(n){return Math.max(0,Math.min(255,255*n))}var k0=class{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=cp(e),[e,e,e]}static G_HTML([e]){let t=r3(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(cp)}static RGB_HTML(e){return`#${e.map(r3).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,r]){return[cp(1-Math.min(1,e+r)),cp(1-Math.min(1,i+r)),cp(1-Math.min(1,t+r))]}static CMYK_HTML(e){let t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){let r=1-e,a=1-t,s=1-i,o=Math.min(r,a,s);return["CMYK",r,a,s,o]}},Nb=class{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");let r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){un("Abstract method `_createSVG` called.")}},Sp=class extends Nb{_createSVG(e){return document.createElementNS(Ao,e)}},I0=class{static setupStorage(e,t,i,r,a){let s=r.getValue(t,{value:null});switch(i.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),a==="print")break;e.addEventListener("input",o=>{r.setValue(t,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(s.value===i.attributes.xfaOn?e.setAttribute("checked",!0):s.value===i.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",o=>{r.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),a==="print")break;e.addEventListener("input",o=>{r.setValue(t,{value:o.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(let o of i.children)o.attributes.value===s.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{let l=o.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:a}){let{attributes:s}=t,o=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${r}`);for(let[l,u]of Object.entries(s))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}o&&a.addLinkAttributes(e,s.href,s.newWindow),i&&s.dataId&&this.setupStorage(e,s.dataId,t,i)}static render(e){let t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,a=e.intent||"display",s=document.createElement(r.name);r.attributes&&this.setAttributes({html:s,element:r,intent:a,linkService:i});let o=a!=="richText",l=e.div;if(l.append(s),e.viewport){let f=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=f}o&&l.setAttribute("class","xfaLayer xfaFont");let u=[];if(r.children.length===0){if(r.value){let f=document.createTextNode(r.value);s.append(f),o&&yp.shouldBuildText(r.name)&&u.push(f)}return{textDivs:u}}let p=[[r,-1,s]];for(;p.length>0;){let[f,g,m]=p.at(-1);if(g+1===f.children.length){p.pop();continue}let x=f.children[++p.at(-1)[1]];if(x===null)continue;let{name:y}=x;if(y==="#text"){let b=document.createTextNode(x.value);u.push(b),m.append(b);continue}let S=x?.attributes?.xmlns?document.createElementNS(x.attributes.xmlns,y):document.createElement(y);if(m.append(S),x.attributes&&this.setAttributes({html:S,element:x,storage:t,intent:a,linkService:i}),x.children?.length>0)p.push([x,-1,S]);else if(x.value){let b=document.createTextNode(x.value);o&&yp.shouldBuildText(y)&&u.push(b),S.append(b)}}for(let f of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){let t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}},Ap=1e3,l6=9,Dc=new WeakSet;function kl(n){return{width:n[2]-n[0],height:n[3]-n[1]}}var Fb=class{static create(e){switch(e.data.annotationType){case gr.LINK:return new D0(e);case gr.TEXT:return new Bb(e);case gr.WIDGET:switch(e.data.fieldType){case"Tx":return new Vb(e);case"Btn":return e.data.radioButton?new P0(e):e.data.checkBox?new zb(e):new Hb(e);case"Ch":return new Wb(e);case"Sig":return new Ub(e)}return new ko(e);case gr.POPUP:return new wp(e);case gr.FREETEXT:return new L0(e);case gr.LINE:return new Gb(e);case gr.SQUARE:return new qb(e);case gr.CIRCLE:return new Xb(e);case gr.POLYLINE:return new R0(e);case gr.CARET:return new $b(e);case gr.INK:return new Cp(e);case gr.POLYGON:return new Yb(e);case gr.HIGHLIGHT:return new O0(e);case gr.UNDERLINE:return new Kb(e);case gr.SQUIGGLY:return new Zb(e);case gr.STRIKEOUT:return new Jb(e);case gr.STAMP:return new N0(e);case gr.FILEATTACHMENT:return new Qb(e);default:return new Jn(e)}}},Jn=class n{#t=null;#e=!1;#i=null;constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e?.str||t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return n._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};let{rect:t}=e;t&&this.#n(t),this.#i?.popup.updateEdited(e)}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(e){let{container:{style:t},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:l}}}}=this;i?.splice(0,4,...e);let{width:u,height:p}=kl(e);t.left=`${100*(e[0]-o)/a}%`,t.top=`${100*(s-e[3]+l)/s}%`,r===0?(t.width=`${100*u/a}%`,t.height=`${100*p/s}%`):this.setRotation(r)}_createContainer(e){let{data:t,parent:{page:i,viewport:r}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),this instanceof ko||(a.tabIndex=Ap);let{style:s}=a;if(s.zIndex=this.parent.zIndex++,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof wp){let{rotation:y}=t;return!t.hasOwnCanvas&&y!==0&&this.setRotation(y,a),a}let{width:o,height:l}=kl(t.rect);if(!e&&t.borderStyle.width>0){s.borderWidth=`${t.borderStyle.width}px`;let y=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(y>0||S>0){let M=`calc(${y}px * var(--scale-factor)) / calc(${S}px * var(--scale-factor))`;s.borderRadius=M}else if(this instanceof P0){let M=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;s.borderRadius=M}switch(t.borderStyle.style){case op.SOLID:s.borderStyle="solid";break;case op.DASHED:s.borderStyle="dashed";break;case op.BEVELED:Ci("Unimplemented border style: beveled");break;case op.INSET:Ci("Unimplemented border style: inset");break;case op.UNDERLINE:s.borderBottomStyle="solid";break;default:break}let b=t.borderColor||null;b?(this.#e=!0,s.borderColor=We.makeHexColor(b[0]|0,b[1]|0,b[2]|0)):s.borderWidth=0}let u=We.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:p,pageHeight:f,pageX:g,pageY:m}=r.rawDims;s.left=`${100*(u[0]-g)/p}%`,s.top=`${100*(u[1]-m)/f}%`;let{rotation:x}=t;return t.hasOwnCanvas||x===0?(s.width=`${100*o/p}%`,s.height=`${100*l/f}%`):this.setRotation(x,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;let{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:a,height:s}=kl(this.data.rect),o,l;e%180===0?(o=100*a/i,l=100*s/r):(o=100*s/i,l=100*a/r),t.style.width=`${o}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){let e=(t,i,r)=>{let a=r.detail[t],s=a[0],o=a.slice(1);r.target.style[i]=k0[`${s}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:k0[`${s}_rgb`](o)})};return Ii(this,"_commonActions",{display:t=>{let{display:i}=t.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{let{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{let i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){let i=this._commonActions;for(let r of Object.keys(t.detail))(e[r]||i[r])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;let t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;let i=this._commonActions;for(let[r,a]of Object.entries(t)){let s=i[r];if(s){let o={detail:{[r]:a},target:e};s(o),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:e}=this.data;if(!e)return;let[t,i,r,a]=this.data.rect.map(y=>Math.fround(y));if(e.length===8){let[y,S,b,M]=e.subarray(2,6);if(r===y&&a===S&&t===b&&i===M)return}let{style:s}=this.container,o;if(this.#e){let{borderColor:y,borderWidth:S}=s;s.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}let l=r-t,u=a-i,{svgFactory:p}=this,f=p.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);let g=p.createElement("defs");f.append(g);let m=p.createElement("clipPath"),x=`clippath_${this.data.id}`;m.setAttribute("id",x),m.setAttribute("clipPathUnits","objectBoundingBox"),g.append(m);for(let y=2,S=e.length;y<S;y+=8){let b=e[y],M=e[y+1],T=e[y+2],I=e[y+3],O=p.createElement("rect"),U=(T-t)/l,N=(a-M)/u,B=(b-T)/l,R=(M-I)/u;O.setAttribute("x",U),O.setAttribute("y",N),O.setAttribute("width",B),O.setAttribute("height",R),m.append(O),o?.push(`<rect vector-effect="non-scaling-stroke" x="${U}" y="${N}" width="${B}" height="${R}"/>`)}this.#e&&(o.push("</g></svg>')"),s.backgroundImage=o.join("")),this.container.append(f),this.container.style.clipPath=`url(#${x})`}_createPopup(){let{data:e}=this,t=this.#i=new wp({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){un("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){let i=[];if(this._fieldObjects){let r=this._fieldObjects[e];if(r)for(let{page:a,id:s,exportValues:o}of r){if(a===-1||s===t)continue;let l=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${s}"]`);if(u&&!Dc.has(u)){Ci(`_getElementsByName - element not allowed: ${s}`);continue}i.push({id:s,exportValue:l,domElement:u})}return i}for(let r of document.getElementsByName(e)){let{exportValue:a}=r,s=r.getAttribute("data-element-id");s!==t&&Dc.has(r)&&i.push({id:s,exportValue:a,domElement:r})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(let t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}},D0=class extends Jn{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){let{data:e,linkService:t}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action),r=!0):e.attachment?(this.#e(i,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(this.#i(i,e.setOCGState),r=!0):e.dest?(this._bindLink(i,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#t()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#t()}#e(e,t,i=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#t()}#i(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#t()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");let i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let r of Object.keys(t.actions)){let a=i.get(r);a&&(e[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1))}e.onclick||(e.onclick=()=>!1),this.#t()}_bindResetFormAction(e,t){let i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Ci('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{i?.();let{fields:r,refs:a,include:s}=t,o=[];if(r.length!==0||a.length!==0){let p=new Set(a);for(let f of r){let g=this._fieldObjects[f]||[];for(let{id:m}of g)p.add(m)}for(let f of Object.values(this._fieldObjects))for(let g of f)p.has(g.id)===s&&o.push(g)}else for(let p of Object.values(this._fieldObjects))o.push(...p);let l=this.annotationStorage,u=[];for(let p of o){let{id:f}=p;switch(u.push(f),p.type){case"text":{let m=p.defaultValue||"";l.setValue(f,{value:m});break}case"checkbox":case"radiobutton":{let m=p.defaultValue===p.exportValues;l.setValue(f,{value:m});break}case"combobox":case"listbox":{let m=p.defaultValue||"";l.setValue(f,{value:m});break}default:continue}let g=document.querySelector(`[data-element-id="${f}"]`);if(g){if(!Dc.has(g)){Ci(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}}),!1}}},Bb=class extends Jn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}},ko=class extends Jn{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Pr.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,r,a){i.includes("mouse")?e.addEventListener(i,s=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(i,s=>{if(i==="blur"){if(!t.focused||!s.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(s)}})})}_setEventListeners(e,t,i,r){for(let[a,s]of i)(s==="Action"||this.data.actions?.[s])&&((s==="Focus"||s==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,a,s,r),s==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):s==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){let t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":We.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){let t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||l6,a=e.style,s,o=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){let u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),p=Math.round(u/(c0*r))||1,f=u/p;s=Math.min(r,l(f/c0))}else{let u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);s=Math.min(r,l(u/c0))}a.fontSize=`calc(${s}px * var(--scale-factor))`,a.color=We.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}},Vb=class extends ko{constructor(e){let t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,r){let a=this.annotationStorage;for(let s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=i),a.setValue(s.id,{[r]:i})}render(){let e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){let r=e.getValue(t,{value:this.data.fieldValue}),a=r.value||"",s=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;s&&a.length>s&&(a=a.slice(0,s));let o=r.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));let l={userValue:a,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=o??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",o??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Dc.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Ap,this._setRequired(i,this.data.required),s&&(i.maxLength=s),i.addEventListener("input",p=>{e.setValue(t,{value:p.target.value}),this.setPropertyOnSiblings(i,"value",p.target.value,"value"),l.formattedValue=null}),i.addEventListener("resetform",p=>{let f=this.data.defaultFieldValue??"";i.value=l.userValue=f,l.formattedValue=null});let u=p=>{let{formattedValue:f}=l;f!=null&&(p.target.value=f),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",f=>{if(l.focused)return;let{target:g}=f;l.userValue&&(g.value=l.userValue),l.lastCommittedValue=g.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),i.addEventListener("updatefromsandbox",f=>{this.showElementAndHideCanvas(f.target);let g={value(m){l.userValue=m.detail.value??"",e.setValue(t,{value:l.userValue.toString()}),m.target.value=l.userValue},formattedValue(m){let{formattedValue:x}=m.detail;l.formattedValue=x,x!=null&&m.target!==document.activeElement&&(m.target.value=x),e.setValue(t,{formattedValue:x})},selRange(m){m.target.setSelectionRange(...m.detail.selRange)},charLimit:m=>{let{charLimit:x}=m.detail,{target:y}=m;if(x===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",x);let S=l.userValue;!S||S.length<=x||(S=S.slice(0,x),y.value=l.userValue=S,e.setValue(t,{value:S}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(g,f)}),i.addEventListener("keydown",f=>{l.commitKey=1;let g=-1;if(f.key==="Escape"?g=0:f.key==="Enter"&&!this.data.multiLine?g=2:f.key==="Tab"&&(l.commitKey=3),g===-1)return;let{value:m}=f.target;l.lastCommittedValue!==m&&(l.lastCommittedValue=m,l.userValue=m,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:g,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}))});let p=u;u=null,i.addEventListener("blur",f=>{if(!l.focused||!f.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);let{value:g}=f.target;l.userValue=g,l.lastCommittedValue!==g&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:l.commitKey,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}),p(f)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",f=>{l.lastCommittedValue=null;let{data:g,target:m}=f,{value:x,selectionStart:y,selectionEnd:S}=m,b=y,M=S;switch(f.inputType){case"deleteWordBackward":{let T=x.substring(0,y).match(/\w*[^\w]*$/);T&&(b-=T[0].length);break}case"deleteWordForward":{let T=x.substring(y).match(/^[^\w]*\w*/);T&&(M+=T[0].length);break}case"deleteContentBackward":y===S&&(b-=1);break;case"deleteContentForward":y===S&&(M+=1);break}f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,change:g||"",willCommit:!1,selStart:b,selEnd:M}})}),this._setEventListeners(i,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.value)}if(u&&i.addEventListener("blur",u),this.data.comb){let f=(this.data.rect[2]-this.data.rect[0])/s;i.classList.add("comb"),i.style.letterSpacing=`calc(${f}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},Ub=class extends ko{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}},zb=class extends ko{constructor(e){super(e,{isRenderable:e.renderForms})}render(){let e=this.annotationStorage,t=this.data,i=t.id,r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let a=document.createElement("input");return Dc.add(a),a.setAttribute("data-element-id",i),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,r&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=Ap,a.addEventListener("change",s=>{let{name:o,checked:l}=s.target;for(let u of this._getElementsByName(o,i)){let p=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=p),e.setValue(u.id,{value:p})}e.setValue(i,{value:l})}),a.addEventListener("resetform",s=>{let o=t.defaultFieldValue||"Off";s.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",s=>{let o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,s)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}},P0=class extends ko{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let e=this.annotationStorage,t=this.data,i=t.id,r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(i,{value:r})),r)for(let s of this._getElementsByName(t.fieldName,i))e.setValue(s.id,{value:!1});let a=document.createElement("input");if(Dc.add(a),a.setAttribute("data-element-id",i),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,r&&a.setAttribute("checked",!0),a.tabIndex=Ap,a.addEventListener("change",s=>{let{name:o,checked:l}=s.target;for(let u of this._getElementsByName(o,i))e.setValue(u.id,{value:!1});e.setValue(i,{value:l})}),a.addEventListener("resetform",s=>{let o=t.defaultFieldValue;s.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){let s=t.buttonValue;a.addEventListener("updatefromsandbox",o=>{let l={value:u=>{let p=s===u.detail.value;for(let f of this._getElementsByName(u.target.name)){let g=p&&f.id===i;f.domElement&&(f.domElement.checked=g),e.setValue(f.id,{value:g})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}},Hb=class extends D0{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){let e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");let t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}},Wb=class extends ko{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Dc.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Ap;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{let f=this.data.defaultFieldValue;for(let g of r.options)g.selected=g.value===f});for(let p of this.data.options){let f=document.createElement("option");f.textContent=p.displayValue,f.value=p.exportValue,i.value.includes(p.exportValue)&&(f.setAttribute("selected",!0),a=!1),r.append(f)}let s=null;if(a){let p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),s=()=>{p.remove(),r.removeEventListener("input",s),s=null},r.addEventListener("input",s)}let o=p=>{let f=p?"value":"textContent",{options:g,multiple:m}=r;return m?Array.prototype.filter.call(g,x=>x.selected).map(x=>x[f]):g.selectedIndex===-1?null:g[g.selectedIndex][f]},l=o(!1),u=p=>{let f=p.target.options;return Array.prototype.map.call(f,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{let f={value(g){s?.();let m=g.detail.value,x=new Set(Array.isArray(m)?m:[m]);for(let y of r.options)y.selected=x.has(y.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(g){r.multiple=!0},remove(g){let m=r.options,x=g.detail.remove;m[x].selected=!1,r.remove(x),m.length>0&&Array.prototype.findIndex.call(m,S=>S.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:o(!0),items:u(g)}),l=o(!1)},clear(g){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(g){let{index:m,displayValue:x,exportValue:y}=g.detail.insert,S=r.children[m],b=document.createElement("option");b.textContent=x,b.value=y,S?S.before(b):r.append(b),e.setValue(t,{value:o(!0),items:u(g)}),l=o(!1)},items(g){let{items:m}=g.detail;for(;r.length!==0;)r.remove(0);for(let x of m){let{displayValue:y,exportValue:S}=x,b=document.createElement("option");b.textContent=y,b.value=S,r.append(b)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(g)}),l=o(!1)},indices(g){let m=new Set(g.detail.indices);for(let x of g.target.options)x.selected=m.has(x.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(f,p)}),r.addEventListener("input",p=>{let f=o(!0),g=o(!1);e.setValue(t,{value:f}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:g,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}},wp=class extends Jn{constructor(e){let{data:t,elements:i}=e;super(e,{isRenderable:Jn._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");let e=this.popup=new jb({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(let i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${uy}${i}`).join(",")),this.container}},jb=class{#t=this.#E.bind(this);#e=this.#A.bind(this);#i=this.#k.bind(this);#n=this.#S.bind(this);#a=null;#r=null;#c=null;#o=null;#d=null;#l=null;#u=null;#s=!1;#h=null;#p=null;#f=null;#g=null;#m=null;#_=null;#v=!1;constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:a,contentsObj:s,richText:o,parent:l,rect:u,parentRect:p,open:f}){this.#r=e,this.#m=r,this.#c=s,this.#g=o,this.#l=l,this.#a=t,this.#f=u,this.#u=p,this.#d=i,this.#o=m0.toDateObject(a),this.trigger=i.flatMap(g=>g.getElementsToTriggerPopup());for(let g of this.trigger)g.addEventListener("click",this.#n),g.addEventListener("mouseenter",this.#i),g.addEventListener("mouseleave",this.#e),g.classList.add("popupTriggerArea");for(let g of i)g.container?.addEventListener("keydown",this.#t);this.#r.hidden=!0,f&&this.#S()}render(){if(this.#h)return;let e=this.#h=document.createElement("div");if(e.className="popup",this.#a){let a=e.style.outlineColor=We.makeHexColor(...this.#a);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`:e.style.backgroundColor=We.makeHexColor(...this.#a.map(o=>Math.floor(.7*(255-o)+o)))}let t=document.createElement("span");t.className="header";let i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=this.#m,e.append(t),this.#o){let a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),t.append(a)}let r=this.#b;if(r)I0.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{let a=this._formatContents(this.#c);e.append(a)}this.#r.append(e)}get#b(){let e=this.#g,t=this.#c;return e?.str&&(!t?.str||t.str===e.str)&&this.#g.html||null}get#y(){return this.#b?.attributes?.style?.fontSize||0}get#C(){return this.#b?.attributes?.style?.color||null}#M(e){let t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:this.#C,fontSize:this.#y?`calc(${this.#y}px * var(--scale-factor))`:""}};for(let a of e.split(`
`))t.push({name:"span",value:a,attributes:r});return i}_formatContents({str:e,dir:t}){let i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;let r=e.split(/(?:\r\n?|\n)/);for(let a=0,s=r.length;a<s;++a){let o=r[a];i.append(document.createTextNode(o)),a<s-1&&i.append(document.createElement("br"))}return i}#E(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#s)&&this.#S()}updateEdited({rect:e,popupContent:t}){this.#_||={contentsObj:this.#c,richText:this.#g},e&&(this.#p=null),t&&(this.#g=this.#M(t),this.#c=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#_&&({contentsObj:this.#c,richText:this.#g}=this.#_,this.#_=null,this.#h?.remove(),this.#h=null,this.#p=null)}#T(){if(this.#p!==null)return;let{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:a}}}=this.#l,s=!!this.#u,o=s?this.#u:this.#f;for(let x of this.#d)if(!o||We.intersect(x.data.rect,o)!==null){o=x.data.rect,s=!0;break}let l=We.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),p=s?o[2]-o[0]+5:0,f=l[0]+p,g=l[1];this.#p=[100*(f-r)/t,100*(g-a)/i];let{style:m}=this.#r;m.left=`${this.#p[0]}%`,m.top=`${this.#p[1]}%`}#S(){this.#s=!this.#s,this.#s?(this.#k(),this.#r.addEventListener("click",this.#n),this.#r.addEventListener("keydown",this.#t)):(this.#A(),this.#r.removeEventListener("click",this.#n),this.#r.removeEventListener("keydown",this.#t))}#k(){this.#h||this.render(),this.isVisible?this.#s&&this.#r.classList.add("focused"):(this.#T(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#A(){this.#r.classList.remove("focused"),!(this.#s||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#v=this.isVisible,this.#v&&(this.#r.hidden=!0)}maybeShow(){this.#v&&(this.#h||this.#k(),this.#v=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}},L0=class extends Jn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=xi.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(let t of this.textContent){let i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},Gb=class extends Jn{#t=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let e=this.data,{width:t,height:i}=kl(e.rect),r=this.svgFactory.create(t,i,!0),a=this.#t=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},qb=class extends Jn{#t=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let e=this.data,{width:t,height:i}=kl(e.rect),r=this.svgFactory.create(t,i,!0),a=e.borderStyle.width,s=this.#t=this.svgFactory.createElement("svg:rect");return s.setAttribute("x",a/2),s.setAttribute("y",a/2),s.setAttribute("width",t-a),s.setAttribute("height",i-a),s.setAttribute("stroke-width",a||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},Xb=class extends Jn{#t=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let e=this.data,{width:t,height:i}=kl(e.rect),r=this.svgFactory.create(t,i,!0),a=e.borderStyle.width,s=this.#t=this.svgFactory.createElement("svg:ellipse");return s.setAttribute("cx",t/2),s.setAttribute("cy",i/2),s.setAttribute("rx",t/2-a/2),s.setAttribute("ry",i/2-a/2),s.setAttribute("stroke-width",a||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},R0=class extends Jn{#t=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,vertices:t,borderStyle:i,popupRef:r}}=this;if(!t)return this.container;let{width:a,height:s}=kl(e),o=this.svgFactory.create(a,s,!0),l=[];for(let p=0,f=t.length;p<f;p+=2){let g=t[p]-e[0],m=e[3]-t[p+1];l.push(`${g},${m}`)}l=l.join(" ");let u=this.#t=this.svgFactory.createElement(this.svgElementName);return u.setAttribute("points",l),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},Yb=class extends R0{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},$b=class extends Jn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},Cp=class extends Jn{#t=null;#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?xi.HIGHLIGHT:xi.INK}#i(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,rotation:t,inkLists:i,borderStyle:r,popupRef:a}}=this,{transform:s,width:o,height:l}=this.#i(t,e),u=this.svgFactory.create(o,l,!0),p=this.#t=this.svgFactory.createElement("svg:g");u.append(p),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",s);for(let f=0,g=i.length;f<g;f++){let m=this.svgFactory.createElement(this.svgElementName);this.#e.push(m),m.setAttribute("points",i[f].join(",")),p.append(m)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);let{thickness:t,points:i,rect:r}=e,a=this.#t;if(t>=0&&a.setAttribute("stroke-width",t||1),i)for(let s=0,o=this.#e.length;s<o;s++)this.#e[s].setAttribute("points",i[s].join(","));if(r){let{transform:s,width:o,height:l}=this.#i(this.data.rotation,r);a.parentElement.setAttribute("viewBox",`0 0 ${o} ${l}`),a.setAttribute("transform",s)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},O0=class extends Jn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=xi.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}},Kb=class extends Jn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}},Zb=class extends Jn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}},Jb=class extends Jn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}},N0=class extends Jn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=xi.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},Qb=class extends Jn{#t=null;constructor(e){super(e,{isRenderable:!0});let{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",Li({source:this},t))}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:e,data:t}=this,i;t.hasAppearance||t.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;let{isMac:r}=Pr.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&this.#e()}),!t.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}},ty=class{#t=null;#e=null;#i=new Map;#n=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:r,page:a,viewport:s,structTreeLayer:o}){this.div=e,this.#t=t,this.#e=i,this.#n=o||null,this.page=a,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#i.size>0}#a(e,t){return Ne(this,null,function*(){let i=e.firstChild||e,r=i.id=`${uy}${t}`,a=yield this.#n?.getAriaAttributes(r);if(a)for(let[s,o]of a)i.setAttribute(s,o);this.div.append(e),this.#t?.moveElementInDOM(this.div,e,i,!1)})}render(e){return Ne(this,null,function*(){let{annotations:t}=e,i=this.div;kc(i,this.viewport);let r=new Map,a={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Sp,annotationStorage:e.annotationStorage||new vp,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(let s of t){if(s.noHTML)continue;let o=s.annotationType===gr.POPUP;if(o){let p=r.get(s.id);if(!p)continue;a.elements=p}else{let{width:p,height:f}=kl(s.rect);if(p<=0||f<=0)continue}a.data=s;let l=Fb.create(a);if(!l.isRenderable)continue;if(!o&&s.popupRef){let p=r.get(s.popupRef);p?p.push(l):r.set(s.popupRef,[l])}let u=l.render();s.hidden&&(u.style.visibility="hidden"),yield this.#a(u,s.id),l._isEditable&&(this.#i.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#r()})}update({viewport:e}){let t=this.div;this.viewport=e,kc(t,{rotation:e.rotation}),this.#r(),t.hidden=!1}#r(){if(!this.#e)return;let e=this.div;for(let[t,i]of this.#e){let r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;i.className="annotationContent";let{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):r.append(i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(e){return this.#i.get(e)}},l0=/\r\n?|\n/g,ey=class n extends Fn{#t;#e="";#i=`${this.id}-editor`;#n=null;#a;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let e=n.prototype,t=a=>a.isEmpty(),i=_p.TRANSLATE_SMALL,r=_p.TRANSLATE_BIG;return Ii(this,"_keyboardManager",new Ic([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}static _type="freetext";static _editorType=xi.FREETEXT;constructor(e){super(Sn(Li({},e),{name:"freeTextEditor"})),this.#t=e.color||n._defaultColor||Fn._defaultLineColor,this.#a=e.fontSize||n._defaultFontSize}static initialize(e,t){Fn.initialize(e,t);let i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Ri.FREETEXT_SIZE:n._defaultFontSize=t;break;case Ri.FREETEXT_COLOR:n._defaultColor=t;break}}updateParams(e,t){switch(e){case Ri.FREETEXT_SIZE:this.#r(t);break;case Ri.FREETEXT_COLOR:this.#c(t);break}}static get defaultPropertiesToUpdate(){return[[Ri.FREETEXT_SIZE,n._defaultFontSize],[Ri.FREETEXT_COLOR,n._defaultColor||Fn._defaultLineColor]]}get propertiesToUpdate(){return[[Ri.FREETEXT_SIZE,this.#a],[Ri.FREETEXT_COLOR,this.#t]]}#r(e){let t=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-this.#a)*this.parentScale),this.#a=r,this.#d()},i=this.#a;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ri.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#c(e){let t=r=>{this.#t=this.editorDiv.style.color=r},i=this.#t;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ri.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){let e=this.parentScale;return[-n._internalPadding*e,-(n._internalPadding+this.#a)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(xi.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;let e=this._uiManager.combinedSignal(this.#n);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#i),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){let e=[];this.editorDiv.normalize();let t=null;for(let i of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(e.push(n.#l(i)),t=i);return e.join(`
`)}#d(){let[e,t]=this.parentDimensions,i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{let{currentLayer:r,div:a}=this,s=a.style.display,o=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=s,a.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/t):(this.width=i.height/e,this.height=i.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let e=this.#e,t=this.#e=this.#o().trimEnd();if(e===t)return;let i=r=>{if(this.#e=r,!r){this.remove();return}this.#u(),this._uiManager.rebuild(this),this.#d()};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(e)},mustExec:!1}),this.#d()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){n._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#i),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#a}px * var(--scale-factor))`,i.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),g0(this,this.div,["dblclick","keydown"]),this.width){let[r,a]=this.parentDimensions;if(this.annotationElementId){let{position:s}=this._initialData,[o,l]=this.getInitialTranslation();[o,l]=this.pageTranslationToScreen(o,l);let[u,p]=this.pageDimensions,[f,g]=this.pageTranslation,m,x;switch(this.rotation){case 0:m=e+(s[0]-f)/u,x=t+this.height-(s[1]-g)/p;break;case 90:m=e+(s[0]-f)/u,x=t-(s[1]-g)/p,[o,l]=[l,-o];break;case 180:m=e-this.width+(s[0]-f)/u,x=t-(s[1]-g)/p,[o,l]=[-o,-l];break;case 270:m=e+(s[0]-f-this.height*p)/u,x=t+(s[1]-g-this.width*u)/p,[o,l]=[-l,o];break}this.setAt(m*r,x*a,o,l)}else this.setAt(e*r,t*a,this.width*r,this.height*a);this.#u(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#l(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(l0,"")}editorDivPaste(e){let t=e.clipboardData||window.clipboardData,{types:i}=t;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();let r=n.#h(t.getData("text")||"").replaceAll(l0,`
`);if(!r)return;let a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();let s=a.getRangeAt(0);if(!r.includes(`
`)){s.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}let{startContainer:o,startOffset:l}=s,u=[],p=[];if(o.nodeType===Node.TEXT_NODE){let m=o.parentElement;if(p.push(o.nodeValue.slice(l).replaceAll(l0,"")),m!==this.editorDiv){let x=u;for(let y of this.editorDiv.childNodes){if(y===m){x=p;continue}x.push(n.#l(y))}}u.push(o.nodeValue.slice(0,l).replaceAll(l0,""))}else if(o===this.editorDiv){let m=u,x=0;for(let y of this.editorDiv.childNodes)x++===l&&(m=p),m.push(n.#l(y))}this.#e=`${u.join(`
`)}${r}${p.join(`
`)}`,this.#u();let f=new Range,g=u.reduce((m,x)=>m+x.length,0);for(let{firstChild:m}of this.editorDiv.childNodes)if(m.nodeType===Node.TEXT_NODE){let x=m.nodeValue.length;if(g<=x){f.setStart(m,g),f.setEnd(m,g);break}g-=x}a.removeAllRanges(),a.addRange(f)}#u(){if(this.editorDiv.replaceChildren(),!!this.#e)for(let e of this.#e.split(`
`)){let t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#s(){return this.#e.replaceAll("\xA0"," ")}static#h(e){return e.replaceAll(" ","\xA0")}get contentDiv(){return this.editorDiv}static deserialize(e,t,i){return Ne(this,null,function*(){let r=null;if(e instanceof L0){let{data:{defaultAppearanceData:{fontSize:s,fontColor:o},rect:l,rotation:u,id:p,popupRef:f},textContent:g,textPosition:m,parent:{page:{pageNumber:x}}}=e;if(!g||g.length===0)return null;r=e={annotationType:xi.FREETEXT,color:Array.from(o),fontSize:s,value:g.join(`
`),position:m,pageIndex:x-1,rect:l.slice(0),rotation:u,id:p,deleted:!1,popupRef:f}}let a=yield uc(n,this,"deserialize").call(this,e,t,i);return a.#a=e.fontSize,a.#t=We.makeHexColor(...e.color),a.#e=n.#h(e.value),a.annotationElementId=e.id||null,a._initialData=r,a})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let t=n._internalPadding*this.parentScale,i=this.getRect(t,t),r=Fn._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),a={annotationType:xi.FREETEXT,color:r,fontSize:this.#a,value:this.#s(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?a:this.annotationElementId&&!this.#p(a)?null:(a.id=this.annotationElementId,a)}#p(e){let{value:t,fontSize:i,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==i||e.color.some((s,o)=>s!==r[o])||e.pageIndex!==a}renderAnnotationElement(e){let t=super.renderAnnotationElement(e);if(this.deleted)return t;let{style:i}=t;i.fontSize=`calc(${this.#a}px * var(--scale-factor))`,i.color=this.#t,t.replaceChildren();for(let a of this.#e.split(`
`)){let s=document.createElement("div");s.append(a?document.createTextNode(a):document.createElement("br")),t.append(s)}let r=n._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:this.#e}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}},Ve=(()=>{class n{static PRECISION=1e-4;toSVGPath(){un("Abstract method `toSVGPath` must be implemented.")}get box(){un("Abstract getter `box` must be implemented.")}serialize(t,i){un("Abstract method `serialize` must be implemented.")}static _rescale(t,i,r,a,s,o){o||=new Float32Array(t.length);for(let l=0,u=t.length;l<u;l+=2)o[l]=i+t[l]*a,o[l+1]=r+t[l+1]*s;return o}static _rescaleAndSwap(t,i,r,a,s,o){o||=new Float32Array(t.length);for(let l=0,u=t.length;l<u;l+=2)o[l]=i+t[l+1]*a,o[l+1]=r+t[l]*s;return o}static _translate(t,i,r,a){a||=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s+=2)a[s]=i+t[s],a[s+1]=r+t[s+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,r,a,s){switch(s){case 90:return[1-i/r,t/a];case 180:return[1-t/r,1-i/a];case 270:return[i/r,1-t/a];default:return[t/r,i/a]}}static _normalizePagePoint(t,i,r){switch(r){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,r,a,s,o){return[(t+5*r)/6,(i+5*a)/6,(5*r+s)/6,(5*a+o)/6,(r+s)/2,(a+o)/2]}}return n})(),F0=class n{#t;#e=[];#i;#n;#a=[];#r=new Float32Array(18);#c;#o;#d;#l;#u;#s;#h=[];static#p=8;static#f=2;static#g=n.#p+n.#f;constructor({x:e,y:t},i,r,a,s,o=0){this.#t=i,this.#s=a*r,this.#n=s,this.#r.set([NaN,NaN,NaN,NaN,e,t],6),this.#i=o,this.#l=n.#p*r,this.#d=n.#g*r,this.#u=r,this.#h.push(e,t)}isEmpty(){return isNaN(this.#r[8])}#m(){let e=this.#r.subarray(4,6),t=this.#r.subarray(16,18),[i,r,a,s]=this.#t;return[(this.#c+(e[0]-t[0])/2-i)/a,(this.#o+(e[1]-t[1])/2-r)/s,(this.#c+(t[0]-e[0])/2-i)/a,(this.#o+(t[1]-e[1])/2-r)/s]}add({x:e,y:t}){this.#c=e,this.#o=t;let[i,r,a,s]=this.#t,[o,l,u,p]=this.#r.subarray(8,12),f=e-u,g=t-p,m=Math.hypot(f,g);if(m<this.#d)return!1;let x=m-this.#l,y=x/m,S=y*f,b=y*g,M=o,T=l;o=u,l=p,u+=S,p+=b,this.#h?.push(e,t);let I=-b/x,O=S/x,U=I*this.#s,N=O*this.#s;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([u+U,p+N],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([u-U,p-N],16),isNaN(this.#r[6])?(this.#a.length===0&&(this.#r.set([o+U,l+N],2),this.#a.push(NaN,NaN,NaN,NaN,(o+U-i)/a,(l+N-r)/s),this.#r.set([o-U,l-N],14),this.#e.push(NaN,NaN,NaN,NaN,(o-U-i)/a,(l-N-r)/s)),this.#r.set([M,T,o,l,u,p],6),!this.isEmpty()):(this.#r.set([M,T,o,l,u,p],6),Math.abs(Math.atan2(T-l,M-o)-Math.atan2(b,S))<Math.PI/2?([o,l,u,p]=this.#r.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((o+u)/2-i)/a,((l+p)/2-r)/s),[o,l,M,T]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((M+o)/2-i)/a,((T+l)/2-r)/s),!0):([M,T,o,l,u,p]=this.#r.subarray(0,6),this.#a.push(((M+5*o)/6-i)/a,((T+5*l)/6-r)/s,((5*o+u)/6-i)/a,((5*l+p)/6-r)/s,((o+u)/2-i)/a,((l+p)/2-r)/s),[u,p,o,l,M,T]=this.#r.subarray(12,18),this.#e.push(((M+5*o)/6-i)/a,((T+5*l)/6-r)/s,((5*o+u)/6-i)/a,((5*l+p)/6-r)/s,((o+u)/2-i)/a,((l+p)/2-r)/s),!0))}toSVGPath(){if(this.isEmpty())return"";let e=this.#a,t=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#_();let i=[];i.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);this.#b(i);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return this.#v(i),i.join(" ")}#_(){let[e,t,i,r]=this.#t,[a,s,o,l]=this.#m();return`M${(this.#r[2]-e)/i} ${(this.#r[3]-t)/r} L${(this.#r[4]-e)/i} ${(this.#r[5]-t)/r} L${a} ${s} L${o} ${l} L${(this.#r[16]-e)/i} ${(this.#r[17]-t)/r} L${(this.#r[14]-e)/i} ${(this.#r[15]-t)/r} Z`}#v(e){let t=this.#e;e.push(`L${t[4]} ${t[5]} Z`)}#b(e){let[t,i,r,a]=this.#t,s=this.#r.subarray(4,6),o=this.#r.subarray(16,18),[l,u,p,f]=this.#m();e.push(`L${(s[0]-t)/r} ${(s[1]-i)/a} L${l} ${u} L${p} ${f} L${(o[0]-t)/r} ${(o[1]-i)/a}`)}newFreeDrawOutline(e,t,i,r,a,s){return new B0(e,t,i,r,a,s)}getOutlines(){let e=this.#a,t=this.#e,i=this.#r,[r,a,s,o]=this.#t,l=new Float32Array((this.#h?.length??0)+2);for(let f=0,g=l.length-2;f<g;f+=2)l[f]=(this.#h[f]-r)/s,l[f+1]=(this.#h[f+1]-a)/o;if(l[l.length-2]=(this.#c-r)/s,l[l.length-1]=(this.#o-a)/o,isNaN(i[6])&&!this.isEmpty())return this.#y(l);let u=new Float32Array(this.#a.length+24+this.#e.length),p=e.length;for(let f=0;f<p;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}p=this.#M(u,p);for(let f=t.length-6;f>=6;f-=6)for(let g=0;g<6;g+=2){if(isNaN(t[f+g])){u[p]=u[p+1]=NaN,p+=2;continue}u[p]=t[f+g],u[p+1]=t[f+g+1],p+=2}return this.#C(u,p),this.newFreeDrawOutline(u,l,this.#t,this.#u,this.#i,this.#n)}#y(e){let t=this.#r,[i,r,a,s]=this.#t,[o,l,u,p]=this.#m(),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-i)/a,(t[3]-r)/s,NaN,NaN,NaN,NaN,(t[4]-i)/a,(t[5]-r)/s,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,u,p,NaN,NaN,NaN,NaN,(t[16]-i)/a,(t[17]-r)/s,NaN,NaN,NaN,NaN,(t[14]-i)/a,(t[15]-r)/s],0),this.newFreeDrawOutline(f,e,this.#t,this.#u,this.#i,this.#n)}#C(e,t){let i=this.#e;return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6}#M(e,t){let i=this.#r.subarray(4,6),r=this.#r.subarray(16,18),[a,s,o,l]=this.#t,[u,p,f,g]=this.#m();return e.set([NaN,NaN,NaN,NaN,(i[0]-a)/o,(i[1]-s)/l,NaN,NaN,NaN,NaN,u,p,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(r[0]-a)/o,(r[1]-s)/l],t),t+=24}},B0=class extends Ve{#t;#e=new Float32Array(4);#i;#n;#a;#r;#c;constructor(e,t,i,r,a,s){super(),this.#c=e,this.#a=t,this.#t=i,this.#r=r,this.#i=a,this.#n=s,this.lastPoint=[NaN,NaN],this.#o(s);let[o,l,u,p]=this.#e;for(let f=0,g=e.length;f<g;f+=2)e[f]=(e[f]-o)/u,e[f+1]=(e[f+1]-l)/p;for(let f=0,g=t.length;f<g;f+=2)t[f]=(t[f]-o)/u,t[f+1]=(t[f+1]-l)/p}toSVGPath(){let e=[`M${this.#c[4]} ${this.#c[5]}`];for(let t=6,i=this.#c.length;t<i;t+=6){if(isNaN(this.#c[t])){e.push(`L${this.#c[t+4]} ${this.#c[t+5]}`);continue}e.push(`C${this.#c[t]} ${this.#c[t+1]} ${this.#c[t+2]} ${this.#c[t+3]} ${this.#c[t+4]} ${this.#c[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,i,r],a){let s=i-e,o=r-t,l,u;switch(a){case 0:l=Ve._rescale(this.#c,e,r,s,-o),u=Ve._rescale(this.#a,e,r,s,-o);break;case 90:l=Ve._rescaleAndSwap(this.#c,e,t,s,o),u=Ve._rescaleAndSwap(this.#a,e,t,s,o);break;case 180:l=Ve._rescale(this.#c,i,t,-s,o),u=Ve._rescale(this.#a,i,t,-s,o);break;case 270:l=Ve._rescaleAndSwap(this.#c,i,r,-s,-o),u=Ve._rescaleAndSwap(this.#a,i,r,-s,-o);break}return{outline:Array.from(l),points:[Array.from(u)]}}#o(e){let t=this.#c,i=t[4],r=t[5],a=i,s=r,o=i,l=r,u=i,p=r,f=e?Math.max:Math.min;for(let m=6,x=t.length;m<x;m+=6){if(isNaN(t[m]))a=Math.min(a,t[m+4]),s=Math.min(s,t[m+5]),o=Math.max(o,t[m+4]),l=Math.max(l,t[m+5]),p<t[m+5]?(u=t[m+4],p=t[m+5]):p===t[m+5]&&(u=f(u,t[m+4]));else{let y=We.bezierBoundingBox(i,r,...t.slice(m,m+6));a=Math.min(a,y[0]),s=Math.min(s,y[1]),o=Math.max(o,y[2]),l=Math.max(l,y[3]),p<y[3]?(u=y[2],p=y[3]):p===y[3]&&(u=f(u,y[2]))}i=t[m+4],r=t[m+5]}let g=this.#e;g[0]=a-this.#i,g[1]=s-this.#i,g[2]=o-a+2*this.#i,g[3]=l-s+2*this.#i,this.lastPoint=[u,p]}get box(){return this.#e}newOutliner(e,t,i,r,a,s=0){return new F0(e,t,i,r,a,s)}getNewOutline(e,t){let[i,r,a,s]=this.#e,[o,l,u,p]=this.#t,f=a*u,g=s*p,m=i*u+o,x=r*p+l,y=this.newOutliner({x:this.#a[0]*f+m,y:this.#a[1]*g+x},this.#t,this.#r,e,this.#n,t??this.#i);for(let S=2;S<this.#a.length;S+=2)y.add({x:this.#a[S]*f+m,y:this.#a[S+1]*g+x});return y.getOutlines()}},Mp=class{#t;#e;#i=[];#n=[];constructor(e,t=0,i=0,r=!0){let a=1/0,s=-1/0,o=1/0,l=-1/0,p=10**-4;for(let{x:b,y:M,width:T,height:I}of e){let O=Math.floor((b-t)/p)*p,U=Math.ceil((b+T+t)/p)*p,N=Math.floor((M-t)/p)*p,B=Math.ceil((M+I+t)/p)*p,R=[O,N,B,!0],F=[U,N,B,!1];this.#i.push(R,F),a=Math.min(a,O),s=Math.max(s,U),o=Math.min(o,N),l=Math.max(l,B)}let f=s-a+2*i,g=l-o+2*i,m=a-i,x=o-i,y=this.#i.at(r?-1:-2),S=[y[0],y[2]];for(let b of this.#i){let[M,T,I]=b;b[0]=(M-m)/f,b[1]=(T-x)/g,b[2]=(I-x)/g}this.#t=new Float32Array([m,x,f,g]),this.#e=S}getOutlines(){this.#i.sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);let e=[];for(let t of this.#i)t[3]?(e.push(...this.#d(t)),this.#c(t)):(this.#o(t),e.push(...this.#d(t)));return this.#a(e)}#a(e){let t=[],i=new Set;for(let s of e){let[o,l,u]=s;t.push([o,l,s],[o,u,s])}t.sort((s,o)=>s[1]-o[1]||s[0]-o[0]);for(let s=0,o=t.length;s<o;s+=2){let l=t[s][2],u=t[s+1][2];l.push(u),u.push(l),i.add(l),i.add(u)}let r=[],a;for(;i.size>0;){let s=i.values().next().value,[o,l,u,p,f]=s;i.delete(s);let g=o,m=l;for(a=[o,u],r.push(a);;){let x;if(i.has(p))x=p;else if(i.has(f))x=f;else break;i.delete(x),[o,l,u,p,f]=x,g!==o&&(a.push(g,m,o,m===l?l:u),g=o),m=m===l?u:l}a.push(g,m)}return new iy(r,this.#t,this.#e)}#r(e){let t=this.#n,i=0,r=t.length-1;for(;i<=r;){let a=i+r>>1,s=t[a][0];if(s===e)return a;s<e?i=a+1:r=a-1}return r+1}#c([,e,t]){let i=this.#r(e);this.#n.splice(i,0,[e,t])}#o([,e,t]){let i=this.#r(e);for(let r=i;r<this.#n.length;r++){let[a,s]=this.#n[r];if(a!==e)break;if(a===e&&s===t){this.#n.splice(r,1);return}}for(let r=i-1;r>=0;r--){let[a,s]=this.#n[r];if(a!==e)break;if(a===e&&s===t){this.#n.splice(r,1);return}}}#d(e){let[t,i,r]=e,a=[[t,i,r]],s=this.#r(r);for(let o=0;o<s;o++){let[l,u]=this.#n[o];for(let p=0,f=a.length;p<f;p++){let[,g,m]=a[p];if(!(u<=g||m<=l)){if(g>=l){if(m>u)a[p][1]=u;else{if(f===1)return[];a.splice(p,1),p--,f--}continue}a[p][2]=l,m>u&&a.push([t,u,m])}}}return a}},iy=class extends Ve{#t;#e;constructor(e,t,i){super(),this.#e=e,this.#t=t,this.lastPoint=i}toSVGPath(){let e=[];for(let t of this.#e){let[i,r]=t;e.push(`M${i} ${r}`);for(let a=2;a<t.length;a+=2){let s=t[a],o=t[a+1];s===i?(e.push(`V${o}`),r=o):o===r&&(e.push(`H${s}`),i=s)}e.push("Z")}return e.join(" ")}serialize([e,t,i,r],a){let s=[],o=i-e,l=r-t;for(let u of this.#e){let p=new Array(u.length);for(let f=0;f<u.length;f+=2)p[f]=e+u[f]*o,p[f+1]=r-u[f+1]*l;s.push(p)}return s}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}},Ep=class extends F0{newFreeDrawOutline(e,t,i,r,a,s){return new ny(e,t,i,r,a,s)}},ny=class extends B0{newOutliner(e,t,i,r,a,s=0){return new Ep(e,t,i,r,a,s)}},V0=class n{#t=null;#e=null;#i;#n=null;#a=!1;#r=!1;#c=null;#o;#d=null;#l=null;#u;static#s=null;static get _keyboardManager(){return Ii(this,"_keyboardManager",new Ic([[["Escape","mac+Escape"],n.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],n.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],n.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],n.prototype._moveToPrevious],[["Home","mac+Home"],n.prototype._moveToBeginning],[["End","mac+End"],n.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#r=!1,this.#u=Ri.HIGHLIGHT_COLOR,this.#c=e):(this.#r=!0,this.#u=Ri.HIGHLIGHT_DEFAULT_COLOR),this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#i=e?.color||this.#l?.highlightColors.values().next().value||"#FFFF98",n.#s||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){let e=this.#t=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);let t=this.#l._signal;e.addEventListener("click",this.#g.bind(this),{signal:t}),e.addEventListener("keydown",this.#f.bind(this),{signal:t});let i=this.#e=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#i,e.append(i),e}renderMainDropdown(){let e=this.#n=this.#h();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#h(){let e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",bs,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(let[i,r]of this.#l.highlightColors){let a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",r),a.title=i,a.setAttribute("data-l10n-id",n.#s[i]);let s=document.createElement("span");a.append(s),s.className="swatch",s.style.backgroundColor=r,a.setAttribute("aria-selected",r===this.#i),a.addEventListener("click",this.#p.bind(this,r),{signal:t}),e.append(a)}return e.addEventListener("keydown",this.#f.bind(this),{signal:t}),e}#p(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:this.#u,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#t){this.#g(e);return}let t=e.target.getAttribute("data-color");t&&this.#p(t,e)}_moveToNext(e){if(!this.#_){this.#g(e);return}if(e.target===this.#t){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#t){this.#_&&this._hideDropdownFromKeyboard();return}this.#_||this.#g(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#_){this.#g(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#_){this.#g(e);return}this.#n.lastChild?.focus()}#f(e){n._keyboardManager.exec(this,e)}#g(e){if(this.#_){this.hideDropdown();return}if(this.#a=e.detail===0,this.#d||(this.#d=new AbortController,window.addEventListener("pointerdown",this.#m.bind(this),{signal:this.#l.combinedSignal(this.#d)})),this.#n){this.#n.classList.remove("hidden");return}let t=this.#n=this.#h();this.#t.append(t)}#m(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#d?.abort(),this.#d=null}get#_(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#_){this.#c?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#e&&(this.#e.style.backgroundColor=e),!this.#n)return;let t=this.#l.highlightColors.values();for(let i of this.#n.children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}},U0=class n extends Fn{#t=null;#e=0;#i;#n=null;#a=null;#r=null;#c=null;#o=0;#d=null;#l=null;#u=null;#s=!1;#h=null;#p;#f=null;#g="";#m;#_="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=xi.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){let e=n.prototype;return Ii(this,"_keyboardManager",new Ic([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super(Sn(Li({},e),{name:"highlightEditor"})),this.color=e.color||n._defaultColor,this.#m=e.thickness||n._defaultThickness,this.#p=e.opacity||n._defaultOpacity,this.#i=e.boxes||null,this.#_=e.methodOfCreation||"",this.#g=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#s=!0,this.#b(e),this.#T()):this.#i&&(this.#t=e.anchorNode,this.#e=e.anchorOffset,this.#c=e.focusNode,this.#o=e.focusOffset,this.#v(),this.#T(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#s?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#_}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#v(){let e=new Mp(this.#i,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;let t=new Mp(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#r=t.getOutlines();let{lastPoint:i}=this.#r;this.#h=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#b({highlightOutlines:e,highlightId:t,clipPathId:i}){this.#l=e;let r=1.5;if(this.#r=e.getNewOutline(this.#m/2+r,.0025),t>=0)this.#u=t,this.#n=i,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#f=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){let p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#u,{bbox:n.#S(this.#l.box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#f,{bbox:n.#S(this.#r.box,p),path:{d:this.#r.toSVGPath()}})}let[a,s,o,l]=e.box;switch(this.rotation){case 0:this.x=a,this.y=s,this.width=o,this.height=l;break;case 90:{let[p,f]=this.parentDimensions;this.x=s,this.y=1-a,this.width=o*f/p,this.height=l*p/f;break}case 180:this.x=1-a,this.y=1-s,this.width=o,this.height=l;break;case 270:{let[p,f]=this.parentDimensions;this.x=1-s,this.y=a,this.width=o*f/p,this.height=l*p/f;break}}let{lastPoint:u}=this.#r;this.#h=[(u[0]-a)/o,(u[1]-s)/l]}static initialize(e,t){Fn.initialize(e,t),n._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case Ri.HIGHLIGHT_DEFAULT_COLOR:n._defaultColor=t;break;case Ri.HIGHLIGHT_THICKNESS:n._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#h}updateParams(e,t){switch(e){case Ri.HIGHLIGHT_COLOR:this.#y(t);break;case Ri.HIGHLIGHT_THICKNESS:this.#C(t);break}}static get defaultPropertiesToUpdate(){return[[Ri.HIGHLIGHT_DEFAULT_COLOR,n._defaultColor],[Ri.HIGHLIGHT_THICKNESS,n._defaultThickness]]}get propertiesToUpdate(){return[[Ri.HIGHLIGHT_COLOR,this.color||n._defaultColor],[Ri.HIGHLIGHT_THICKNESS,this.#m||n._defaultThickness],[Ri.HIGHLIGHT_FREE,this.#s]]}#y(e){let t=(a,s)=>{this.color=a,this.#p=s,this.parent?.drawLayer.updateProperties(this.#u,{root:{fill:a,"fill-opacity":s}}),this.#a?.updateColor(a)},i=this.color,r=this.#p;this.addCommands({cmd:t.bind(this,e,n._defaultOpacity),undo:t.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ri.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#C(e){let t=this.#m,i=r=>{this.#m=r,this.#M(r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ri.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}addEditToolbar(){return Ne(this,null,function*(){let e=yield uc(n.prototype,this,"addEditToolbar").call(this);return e?(this._uiManager.highlightColors&&(this.#a=new V0({editor:this}),e.addColorPicker(this.#a)),e):null})}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#I())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#I())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#E(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#T(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#E():e&&(this.#T(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#M(e){if(!this.#s)return;this.#b({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition();let[t,i]=this.parentDimensions;this.setDims(this.width*t,this.height*i)}#E(){this.#u===null||!this.parent||(this.parent.drawLayer.remove(this.#u),this.#u=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#T(e=this.parent){this.#u===null&&({id:this.#u,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#p},rootClass:{highlight:!0,free:this.#s},path:{d:this.#l.toSVGPath()}},!1,!0),this.#f=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#s},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#s),this.#d&&(this.#d.style.clipPath=this.#n))}static#S([e,t,i,r],a){switch(a){case 90:return[1-t-r,e,r,i];case 180:return[1-e-i,1-t-r,i,r];case 270:return[t,1-e-i,r,i]}return[e,t,i,r]}rotate(e){let{drawLayer:t}=this.parent,i;this.#s?(e=(e-this.rotation+360)%360,i=n.#S(this.#l.box,e)):i=n.#S([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#u,{bbox:i,root:{"data-main-rotation":e}}),t.updateProperties(this.#f,{bbox:n.#S(this.#r.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;let e=super.render();this.#g&&(e.setAttribute("aria-label",this.#g),e.setAttribute("role","mark")),this.#s?e.classList.add("free"):this.div.addEventListener("keydown",this.#k.bind(this),{signal:this._uiManager._signal});let t=this.#d=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n;let[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),g0(this,this.#d,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1}})}#k(e){n._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#A(!0);break;case 1:case 3:this.#A(!1);break}}#A(e){if(!this.#t)return;let t=window.getSelection();e?t.setPosition(this.#t,this.#e):t.setPosition(this.#c,this.#o)}select(){super.select(),this.#f&&this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{selected:!1}}),this.#s||this.#A(!1))}get _mustFixPosition(){return!this.#s}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#u,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!e}}))}#I(){return this.#s?this.rotation:0}#R(){if(this.#s)return null;let[e,t]=this.pageDimensions,[i,r]=this.pageTranslation,a=this.#i,s=new Float32Array(a.length*8),o=0;for(let{x:l,y:u,width:p,height:f}of a){let g=l*e+i,m=(1-u)*t+r;s[o]=s[o+4]=g,s[o+1]=s[o+3]=m,s[o+2]=s[o+6]=g+p*e,s[o+5]=s[o+7]=m-f*t,o+=8}return s}#B(e){return this.#l.serialize(e,this.#I())}static startHighlighting(e,t,{target:i,x:r,y:a}){let{x:s,y:o,width:l,height:u}=i.getBoundingClientRect(),p=new AbortController,f=e.combinedSignal(p),g=m=>{p.abort(),this.#x(e,m)};window.addEventListener("blur",g,{signal:f}),window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("pointerdown",xs,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",bs,{signal:f}),i.addEventListener("pointermove",this.#w.bind(this,e),{signal:f}),this._freeHighlight=new Ep({x:r,y:a},[s,o,l,u],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#w(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#x(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(e,t,i){return Ne(this,null,function*(){let r=null;if(e instanceof O0){let{data:{quadPoints:x,rect:y,rotation:S,id:b,color:M,opacity:T,popupRef:I},parent:{page:{pageNumber:O}}}=e;r=e={annotationType:xi.HIGHLIGHT,color:Array.from(M),opacity:T,quadPoints:x,boxes:null,pageIndex:O-1,rect:y.slice(0),rotation:S,id:b,deleted:!1,popupRef:I}}else if(e instanceof Cp){let{data:{inkLists:x,rect:y,rotation:S,id:b,color:M,borderStyle:{rawWidth:T},popupRef:I},parent:{page:{pageNumber:O}}}=e;r=e={annotationType:xi.HIGHLIGHT,color:Array.from(M),thickness:T,inkLists:x,boxes:null,pageIndex:O-1,rect:y.slice(0),rotation:S,id:b,deleted:!1,popupRef:I}}let{color:a,quadPoints:s,inkLists:o,opacity:l}=e,u=yield uc(n,this,"deserialize").call(this,e,t,i);u.color=We.makeHexColor(...a),u.#p=l||1,o&&(u.#m=e.thickness),u.annotationElementId=e.id||null,u._initialData=r;let[p,f]=u.pageDimensions,[g,m]=u.pageTranslation;if(s){let x=u.#i=[];for(let y=0;y<s.length;y+=8)x.push({x:(s[y]-g)/p,y:1-(s[y+1]-m)/f,width:(s[y+2]-s[y])/p,height:(s[y+1]-s[y+5])/f});u.#v(),u.#T(),u.rotate(u.rotation)}else if(o){u.#s=!0;let x=o[0],y={x:x[0]-g,y:f-(x[1]-m)},S=new Ep(y,[0,0,p,f],1,u.#m/2,!0,.001);for(let T=0,I=x.length;T<I;T+=2)y.x=x[T]-g,y.y=f-(x[T+1]-m),S.add(y);let{id:b,clipPathId:M}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);u.#b({highlightOutlines:S.getOutlines(),highlightId:b,clipPathId:M}),u.#T()}return u})}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();let t=this.getRect(0,0),i=Fn._colorManager.convert(this.color),r={annotationType:xi.HIGHLIGHT,color:i,opacity:this.#p,thickness:this.#m,quadPoints:this.#R(),outlines:this.#B(t),pageIndex:this.pageIndex,rect:t,rotation:this.#I(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#L(r)?null:(r.id=this.annotationElementId,r)}#L(e){let{color:t}=this._initialData;return e.color.some((i,r)=>i!==t[r])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}},ry=class{#t=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(let[t,i]of Object.entries(e))this.updateProperty(t,i)}updateSVGProperty(e,t){this.#t[e]=t}toSVGProperties(){let e=this.#t;return this.#t=Object.create(null),{root:e}}reset(){this.#t=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){un("Not implemented")}},c6=(()=>{class n extends Fn{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentDraw=null;static _currentDrawingOptions=null;static _currentParent=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,t.drawOutlines&&(this.#i(t),this.#r())}#i({drawOutlines:t,drawId:i,drawingOptions:r}){this.#t=t,this._drawingOptions||=r,i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#n(t,this.parent),this.#d(t.box)}#n(t,i){let{id:r}=i.drawLayer.draw(n._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r}static _mergeSVGProperties(t,i){let r=new Set(Object.keys(t));for(let[a,s]of Object.entries(i))r.has(a)?Object.assign(t[a],s):t[a]=s;return t}static getDefaultDrawingOptions(t){un("Not implemented")}static get typesMap(){un("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){let r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,i),this._currentParent&&(this._currentDraw.updateProperty(r,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){let r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,i)}static get defaultPropertiesToUpdate(){let t=[],i=this._defaultDrawingOptions;for(let[r,a]of this.typesMap)t.push([r,i[a]]);return t}get propertiesToUpdate(){let t=[],{_drawingOptions:i}=this;for(let[r,a]of this.constructor.typesMap)t.push([r,i[a]]);return t}_updateProperty(t,i,r){let a=this._drawingOptions,s=a[i],o=l=>{a.updateProperty(i,l);let u=this.#t.updateProperty(i,l);u&&this.#d(u),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:o.bind(this,r),undo:o.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,n._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#o()),{bbox:this.#l()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,n._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#o()),{bbox:this.#l()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#l(t,i)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,n._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#o(),this.parentDimensions),{bbox:this.#l()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),this.isOnScreen&&this.div.focus())}remove(){this.#a(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#r(),this.#d(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#a()):t&&(this._uiManager.addShouldRescale(this),this.#r(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#a(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#r(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#n(this.#t,t)}}#c([t,i,r,a]){let{parentDimensions:[s,o],rotation:l}=this;switch(l){case 90:return[i,1-t,r*(o/s),a*(s/o)];case 180:return[1-t,1-i,r,a];case 270:return[1-i,t,r*(o/s),a*(s/o)];default:return[t,i,r,a]}}#o(){let{x:t,y:i,width:r,height:a,parentDimensions:[s,o],rotation:l}=this;switch(l){case 90:return[1-i,t,r*(s/o),a*(o/s)];case 180:return[1-t,1-i,r,a];case 270:return[i,1-t,r*(s/o),a*(o/s)];default:return[t,i,r,a]}}#d(t){if([this.x,this.y,this.width,this.height]=this.#c(t),this.div){this.fixAndSetPosition();let[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)}this._onResized()}#l(){let{x:t,y:i,width:r,height:a,rotation:s,parentRotation:o,parentDimensions:[l,u]}=this;switch((s*4+o)/90){case 1:return[1-i-a,t,a,r];case 2:return[1-t-r,1-i-a,r,a];case 3:return[i,1-t-r,a,r];case 4:return[t,i-r*(l/u),a*(u/l),r*(l/u)];case 5:return[1-i,t,r*(l/u),a*(u/l)];case 6:return[1-t-a*(u/l),1-i,a*(u/l),r*(l/u)];case 7:return[i-r*(l/u),1-t-a*(u/l),r*(l/u),a*(u/l)];case 8:return[t-r,i-a,r,a];case 9:return[1-i,t-r,a,r];case 10:return[1-t,1-i,r,a];case 11:return[i-a,1-t,a,r];case 12:return[t-a*(u/l),i,a*(u/l),r*(l/u)];case 13:return[1-i-r*(l/u),t-a*(u/l),r*(l/u),a*(u/l)];case 14:return[1-t,1-i-r*(l/u),a*(u/l),r*(l/u)];case 15:return[i,1-t,r*(l/u),a*(u/l)];default:return[t,i,r,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,n._mergeSVGProperties({bbox:this.#l()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t=super.render();t.classList.add("draw");let i=document.createElement("div");t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";let[r,a]=this.parentDimensions;return this.setDims(this.width*r,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,i,r,a,s){un("Not implemented")}static startDrawing(t,i,r,{target:a,offsetX:s,offsetY:o}){let{viewport:{rotation:l}}=t,{width:u,height:p}=a.getBoundingClientRect(),f=new AbortController,g=t.combinedSignal(f);if(window.addEventListener("pointerup",m=>{f.abort(),t.toggleDrawing(!0),this._endDraw(m)},{signal:g}),window.addEventListener("pointerdown",xs,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",bs,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),t.toggleDrawing(),i._editorUndoBar?.hide(),this._currentDraw){t.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.startNew(s,o,u,p,l));return}i.updateUIForDefaultProperties(this),this._currentDraw=this.createDrawerInstance(s,o,u,p,l),this._currentDrawingOptions=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(this._currentDrawingOptions.toSVGProperties(),this._currentDraw.defaultSVGProperties),!0,!1)}static _drawMove({offsetX:t,offsetY:i}){this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.add(t,i))}static _endDraw({offsetX:t,offsetY:i}){let r=this._currentParent;if(r.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.end(t,i)),this.supportMultipleDrawings){let a=this._currentDraw,s=this._currentDrawId,o=a.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(s,a.setLastElement(o))},undo:()=>{r.drawLayer.updateProperties(s,a.removeLastElement())},mustExec:!1,type:Ri.DRAW_STEP});return}this.endDrawing(!1)}static endDrawing(t){let i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Ri.DRAW_STEP),!this._currentDraw.isEmpty()){let{pageDimensions:[r,a],scale:s}=i,o=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:this._currentDraw.getOutlines(r*s,a*s,s,this._INNER_MARGIN),drawingOptions:this._currentDrawingOptions,mustBeCommitted:!t});return this._cleanup(),o}return i.drawLayer.remove(this._currentDrawId),this._cleanup(),null}static _cleanup(){this._currentDrawId=-1,this._currentDraw=null,this._currentDrawingOptions=null,this._currentParent=null}createDrawingOptions(t){}static deserializeDraw(t,i,r,a,s,o){un("Not implemented")}static deserialize(t,i,r){return Ne(this,null,function*(){let{rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:l}}=i.viewport,u=this.deserializeDraw(o,l,a,s,this._INNER_MARGIN,t),p=yield uc(n,this,"deserialize").call(this,t,i,r);return p.createDrawingOptions(t),p.#i({drawOutlines:u}),p.#r(),p.onScaleChanging(),p.rotate(),p})}serializeDraw(t){let[i,r]=this.pageTranslation,[a,s]=this.pageDimensions;return this.#t.serialize([i,r,a,s],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}return n})(),ay=class{#t=new Float64Array(6);#e;#i;#n;#a;#r;#c="";#o=0;#d=new z0;#l;#u;constructor(e,t,i,r,a,s){this.#l=i,this.#u=r,this.#n=a,this.#a=s,[e,t]=this.#s(e,t);let o=this.#e=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t],this.#i=[{line:o,points:this.#r}],this.#t.set(o,0)}updateProperty(e,t){e==="stroke-width"&&(this.#a=t)}#s(e,t){return Ve._normalizePoint(e,t,this.#l,this.#u,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}add(e,t){[e,t]=this.#s(e,t);let[i,r,a,s]=this.#t.subarray(2,6),o=e-a,l=t-s;return Math.hypot(this.#l*o,this.#u*l)<=2?null:(this.#r.push(e,t),isNaN(i)?(this.#t.set([a,s,e,t],2),this.#e.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,r,a,s,e,t],0),this.#e.push(...Ve.createBezierPoints(i,r,a,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){let i=this.add(e,t);return i||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,r,a){this.#l=i,this.#u=r,this.#n=a,[e,t]=this.#s(e,t);let s=this.#e=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t];let o=this.#i.at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),this.#i.push({line:s,points:this.#r}),this.#t.set(s,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(e){return this.#i?(this.#i.push(e),this.#e=e.line,this.#r=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#d.setLastElement(e)}removeLastElement(){if(!this.#i)return this.#d.removeLastElement();this.#i.pop(),this.#c="";for(let e=0,t=this.#i.length;e<t;e++){let{line:i,points:r}=this.#i[e];this.#e=i,this.#r=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#c}}}toSVGPath(){let e=Ve.svgRound(this.#e[4]),t=Ve.svgRound(this.#e[5]);if(this.#r.length===2)return this.#c=`${this.#c} M ${e} ${t} Z`,this.#c;if(this.#r.length<=6){let r=this.#c.lastIndexOf("M");this.#c=`${this.#c.slice(0,r)} M ${e} ${t}`,this.#o=6}if(this.#r.length===4){let r=Ve.svgRound(this.#e[10]),a=Ve.svgRound(this.#e[11]);return this.#c=`${this.#c} L ${r} ${a}`,this.#o=12,this.#c}let i=[];this.#o===0&&(i.push(`M ${e} ${t}`),this.#o=6);for(let r=this.#o,a=this.#e.length;r<a;r+=6){let[s,o,l,u,p,f]=this.#e.slice(r,r+6).map(Ve.svgRound);i.push(`C${s} ${o} ${l} ${u} ${p} ${f}`)}return this.#c+=i.join(" "),this.#o=this.#e.length,this.#c}getOutlines(e,t,i,r){let a=this.#i.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#d.build(this.#i,e,t,i,this.#n,this.#a,r),this.#t=null,this.#e=null,this.#i=null,this.#c=null,this.#d}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}},z0=class n extends Ve{#t;#e=0;#i;#n;#a;#r;#c;#o;#d;build(e,t,i,r,a,s,o){this.#a=t,this.#r=i,this.#c=r,this.#o=a,this.#d=s,this.#i=o??0,this.#n=e,this.#s()}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let e=[];for(let{line:t}of this.#n){if(e.push(`M${Ve.svgRound(t[4])} ${Ve.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12){e.push(`L${Ve.svgRound(t[10])} ${Ve.svgRound(t[11])}`);continue}for(let i=6,r=t.length;i<r;i+=6){let[a,s,o,l,u,p]=t.subarray(i,i+6).map(Ve.svgRound);e.push(`C${a} ${s} ${o} ${l} ${u} ${p}`)}}return e.join("")}serialize([e,t,i,r],a){let s=[],o=[],[l,u,p,f]=this.#u(),g,m,x,y,S,b,M,T,I;switch(this.#o){case 0:I=Ve._rescale,g=e,m=t+r,x=i,y=-r,S=e+l*i,b=t+(1-u-f)*r,M=e+(l+p)*i,T=t+(1-u)*r;break;case 90:I=Ve._rescaleAndSwap,g=e,m=t,x=i,y=r,S=e+u*i,b=t+l*r,M=e+(u+f)*i,T=t+(l+p)*r;break;case 180:I=Ve._rescale,g=e+i,m=t,x=-i,y=r,S=e+(1-l-p)*i,b=t+u*r,M=e+(1-l)*i,T=t+(u+f)*r;break;case 270:I=Ve._rescaleAndSwap,g=e+i,m=t+r,x=-i,y=-r,S=e+(1-u-f)*i,b=t+(1-l-p)*r,M=e+(1-u)*i,T=t+(1-l)*r;break}for(let{line:O,points:U}of this.#n)s.push(I(O,g,m,x,y,a?new Array(O.length):null)),o.push(I(U,g,m,x,y,a?new Array(U.length):null));return{lines:s,points:o,rect:[S,b,M,T]}}static deserialize(e,t,i,r,a,{paths:{lines:s,points:o},rotation:l,thickness:u}){let p=[],f,g,m,x,y;switch(l){case 0:y=Ve._rescale,f=-e/i,g=t/r+1,m=1/i,x=-1/r;break;case 90:y=Ve._rescaleAndSwap,f=-t/r,g=-e/i,m=1/r,x=1/i;break;case 180:y=Ve._rescale,f=e/i+1,g=-t/r,m=-1/i,x=1/r;break;case 270:y=Ve._rescaleAndSwap,f=t/r+1,g=e/i+1,m=-1/r,x=-1/i;break}if(!s){s=[];for(let b of o){let M=b.length;if(M===2){s.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(M===4){s.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}let T=new Float32Array(3*(M-2));s.push(T);let[I,O,U,N]=b.subarray(0,4);T.set([NaN,NaN,NaN,NaN,I,O],0);for(let B=4;B<M;B+=2){let R=b[B],F=b[B+1];T.set(Ve.createBezierPoints(I,O,U,N,R,F),(B-2)*3),[I,O,U,N]=[U,N,R,F]}}}for(let b=0,M=s.length;b<M;b++)p.push({line:y(s[b].map(T=>T??NaN),f,g,m,x),points:y(o[b].map(T=>T??NaN),f,g,m,x)});let S=new n;return S.build(p,i,r,1,l,u,a),S}#l(e=this.#d){let t=this.#i+e/2*this.#c;return this.#o%180===0?[t/this.#a,t/this.#r]:[t/this.#r,t/this.#a]}#u(){let[e,t,i,r]=this.#t,[a,s]=this.#l(0);return[e+a,t+s,i-2*a,r-2*s]}#s(){let e=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(let{line:r}of this.#n){if(r.length<=12){for(let o=4,l=r.length;o<l;o+=6){let[u,p]=r.subarray(o,o+2);e[0]=Math.min(e[0],u),e[1]=Math.min(e[1],p),e[2]=Math.max(e[2],u),e[3]=Math.max(e[3],p)}continue}let a=r[4],s=r[5];for(let o=6,l=r.length;o<l;o+=6){let[u,p,f,g,m,x]=r.subarray(o,o+6);We.bezierBoundingBox(a,s,u,p,f,g,m,x,e),a=m,s=x}}let[t,i]=this.#l();e[0]=Math.min(1,Math.max(0,e[0]-t)),e[1]=Math.min(1,Math.max(0,e[1]-i)),e[2]=Math.min(1,Math.max(0,e[2]+t)),e[3]=Math.min(1,Math.max(0,e[3]+i)),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#t}updateProperty(e,t){return e==="stroke-width"?this.#h(t):null}#h(e){let[t,i]=this.#l();this.#d=e;let[r,a]=this.#l(),[s,o]=[r-t,a-i],l=this.#t;return l[0]-=s,l[1]-=o,l[2]+=2*s,l[3]+=2*o,l}updateParentDimensions([e,t],i){let[r,a]=this.#l();this.#a=e,this.#r=t,this.#c=i;let[s,o]=this.#l(),l=s-r,u=o-a,p=this.#t;return p[0]-=l,p[1]-=u,p[2]+=2*l,p[3]+=2*u,p}updateRotation(e){return this.#e=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(Ve.svgRound).join(" ")}get defaultProperties(){let[e,t]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ve.svgRound(e)} ${Ve.svgRound(t)}`}}}get rotationTransform(){let[,,e,t]=this.#t,i=0,r=0,a=0,s=0,o=0,l=0;switch(this.#e){case 90:r=t/e,a=-e/t,o=e;break;case 180:i=-1,s=-1,o=e,l=t;break;case 270:r=-t/e,a=e/t,l=t;break;default:return""}return`matrix(${i} ${r} ${a} ${s} ${Ve.svgRound(o)} ${Ve.svgRound(l)})`}getPathResizingSVGProperties([e,t,i,r]){let[a,s]=this.#l(),[o,l,u,p]=this.#t;if(Math.abs(u-a)<=Ve.PRECISION||Math.abs(p-s)<=Ve.PRECISION){let y=e+i/2-(o+u/2),S=t+r/2-(l+p/2);return{path:{"transform-origin":`${Ve.svgRound(e)} ${Ve.svgRound(t)}`,transform:`${this.rotationTransform} translate(${y} ${S})`}}}let f=(i-2*a)/(u-2*a),g=(r-2*s)/(p-2*s),m=u/i,x=p/r;return{path:{"transform-origin":`${Ve.svgRound(o)} ${Ve.svgRound(l)}`,transform:`${this.rotationTransform} scale(${m} ${x}) translate(${Ve.svgRound(a)} ${Ve.svgRound(s)}) scale(${f} ${g}) translate(${Ve.svgRound(-a)} ${Ve.svgRound(-s)})`}}}getPathResizedSVGProperties([e,t,i,r]){let[a,s]=this.#l(),o=this.#t,[l,u,p,f]=o;if(o[0]=e,o[1]=t,o[2]=i,o[3]=r,Math.abs(p-a)<=Ve.PRECISION||Math.abs(f-s)<=Ve.PRECISION){let S=e+i/2-(l+p/2),b=t+r/2-(u+f/2);for(let{line:M,points:T}of this.#n)Ve._translate(M,S,b,M),Ve._translate(T,S,b,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ve.svgRound(e)} ${Ve.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}let g=(i-2*a)/(p-2*a),m=(r-2*s)/(f-2*s),x=-g*(l+a)+e+a,y=-m*(u+s)+t+s;if(g!==1||m!==1||x!==0||y!==0)for(let{line:S,points:b}of this.#n)Ve._rescale(S,x,y,g,m,S),Ve._rescale(b,x,y,g,m,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ve.svgRound(e)} ${Ve.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],i){let[r,a]=i,s=this.#t,o=e-s[0],l=t-s[1];if(this.#a===r&&this.#r===a)for(let{line:u,points:p}of this.#n)Ve._translate(u,o,l,u),Ve._translate(p,o,l,p);else{let u=this.#a/r,p=this.#r/a;this.#a=r,this.#r=a;for(let{line:f,points:g}of this.#n)Ve._rescale(f,o,l,u,p,f),Ve._rescale(g,o,l,u,p,g);s[2]*=u,s[3]*=p}return s[0]=e,s[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Ve.svgRound(e)} ${Ve.svgRound(t)}`}}}get defaultSVGProperties(){let e=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Ve.svgRound(e[0])} ${Ve.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}},sy=class n extends ry{#t;constructor(e){super(),this.#t=e,super.updateProperties({fill:"none",stroke:Fn._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this.#t.realScale),super.updateSVGProperty(e,t)}clone(){let e=new n(this.#t);return e.updateAll(this),e}},oy=class n extends c6{static _type="ink";static _editorType=xi.INK;static _defaultDrawingOptions=null;constructor(e){super(Sn(Li({},e),{name:"inkEditor"})),this._willKeepAspectRatio=!0}static initialize(e,t){Fn.initialize(e,t),this._defaultDrawingOptions=new sy(t.viewParameters)}static getDefaultDrawingOptions(e){let t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ii(this,"typesMap",new Map([[Ri.INK_THICKNESS,"stroke-width"],[Ri.INK_COLOR,"stroke"],[Ri.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,i,r,a){return new ay(e,t,i,r,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,i,r,a,s){return z0.deserialize(e,t,i,r,a,s)}static deserialize(e,t,i){return Ne(this,null,function*(){let r=null;if(e instanceof Cp){let{data:{inkLists:s,rect:o,rotation:l,id:u,color:p,opacity:f,borderStyle:{rawWidth:g},popupRef:m},parent:{page:{pageNumber:x}}}=e;r=e={annotationType:xi.INK,color:Array.from(p),thickness:g,opacity:f,paths:{points:s},boxes:null,pageIndex:x-1,rect:o.slice(0),rotation:l,id:u,deleted:!1,popupRef:m}}let a=yield uc(n,this,"deserialize").call(this,e,t,i);return a.annotationElementId=e.id||null,a._initialData=r,a})}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:e,_drawingOptions:t,parent:i}=this;t.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){let e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:i}){this._drawingOptions=n.getDefaultDrawingOptions({stroke:We.makeHexColor(...e),"stroke-width":t,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:t,points:i,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:a,"stroke-opacity":s,"stroke-width":o}}=this,l={annotationType:xi.INK,color:Fn._colorManager.convert(a),opacity:s,thickness:o,paths:{lines:t,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?l:this.annotationElementId&&!this.#t(l)?null:(l.id=this.annotationElementId,l)}#t(e){let{color:t,thickness:i,opacity:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((s,o)=>s!==t[o])||e.thickness!==i||e.opacity!==r||e.pageIndex!==a}renderAnnotationElement(e){let{points:t,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:t}),null}},ly=class n extends Fn{#t=null;#e=null;#i=null;#n=null;#a=null;#r="";#c=null;#o=null;#d=null;#l=!1;#u=!1;static _type="stamp";static _editorType=xi.STAMP;constructor(e){super(Sn(Li({},e),{name:"stampEditor"})),this.#n=e.bitmapUrl,this.#a=e.bitmapFile}static initialize(e,t){Fn.initialize(e,t)}static get supportedTypes(){return Ii(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return Ii(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(xi.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){let t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#s(e,t=!1){if(!e){this.remove();return}this.#t=e.bitmap,t||(this.#e=e.id,this.#l=e.isSvg),e.file&&(this.#r=e.file.name),this.#f()}#h(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#c){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(e=null,t=!0){return Ne(this,null,function*(){if(this.hasAltTextData())return null;let{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!(yield i.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");let{data:r,width:a,height:s}=e||this.copyCanvas(null,null,!0).imageData,o=yield i.guess({name:"altText",request:{data:r,width:a,height:s,channels:r.length/(a*s)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");let l=o.output;return yield this.setGuessedAltText(l),t&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l})}#p(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#s(i,!0)).finally(()=>this.#h());return}if(this.#n){let i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(r=>this.#s(r)).finally(()=>this.#h());return}if(this.#a){let i=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(r=>this.#s(r)).finally(()=>this.#h());return}let e=document.createElement("input");e.type="file",e.accept=n.supportedTypesStr;let t=this._uiManager._signal;this.#i=new Promise(i=>{e.addEventListener("change",()=>Ne(this,null,function*(){if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let r=yield this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#s(r)}i()}),{signal:t}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:t})}).finally(()=>this.#h()),e.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#c?.remove(),this.#c=null,this.#o?.disconnect(),this.#o=null,this.#d&&(clearTimeout(this.#d),this.#d=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#p();return}super.rebuild(),this.div!==null&&(this.#e&&this.#c===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#a||this.#e)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#t?this.#f():this.#p(),this.width&&!this.annotationElementId){let[i,r]=this.parentDimensions;this.setAt(e*i,t*r,this.width*i,this.height*r)}return this.div}#f(){let{div:e}=this,{width:t,height:i}=this.#t,[r,a]=this.pageDimensions,s=.75;if(this.width)t=this.width*r,i=this.height*a;else if(t>s*r||i>s*a){let p=Math.min(s*r/t,s*a/i);t*=p,i*=p}let[o,l]=this.parentDimensions;this.setDims(t*o/r,i*l/a),this._uiManager.enableWaiting(!1);let u=this.#c=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#_(t,i),this.#b(),this.#u||(this.parent.addUndoableEditor(this),this.#u=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&u.setAttribute("aria-label",this.#r)}copyCanvas(e,t,i=!1){e||(e=224);let{width:r,height:a}=this.#t,s=new gp,o=this.#t,l=r,u=a,p=null;if(t){if(r>t||a>t){let U=Math.min(t/r,t/a);l=Math.floor(r*U),u=Math.floor(a*U)}p=document.createElement("canvas");let g=p.width=Math.ceil(l*s.sx),m=p.height=Math.ceil(u*s.sy);this.#l||(o=this.#m(g,m));let x=p.getContext("2d");x.filter=this._uiManager.hcmFilter;let y="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(y="#8f8f9d",S="#42414d");let b=15,M=b*s.sx,T=b*s.sy,I=new OffscreenCanvas(M*2,T*2),O=I.getContext("2d");O.fillStyle=y,O.fillRect(0,0,M*2,T*2),O.fillStyle=S,O.fillRect(0,0,M,T),O.fillRect(M,T,M,T),x.fillStyle=x.createPattern(I,"repeat"),x.fillRect(0,0,g,m),x.drawImage(o,0,0,o.width,o.height,0,0,g,m)}let f=null;if(i){let g,m;if(s.symmetric&&o.width<e&&o.height<e)g=o.width,m=o.height;else if(o=this.#t,r>e||a>e){let S=Math.min(e/r,e/a);g=Math.floor(r*S),m=Math.floor(a*S),this.#l||(o=this.#m(g,m))}let y=new OffscreenCanvas(g,m).getContext("2d",{willReadFrequently:!0});y.drawImage(o,0,0,o.width,o.height,0,0,g,m),f={width:g,height:m,data:y.getImageData(0,0,g,m).data}}return{canvas:p,width:l,height:u,imageData:f}}#g(e,t){let[i,r]=this.parentDimensions;this.width=e/i,this.height=t/r,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#d!==null&&clearTimeout(this.#d);let a=200;this.#d=setTimeout(()=>{this.#d=null,this.#_(e,t)},a)}#m(e,t){let{width:i,height:r}=this.#t,a=i,s=r,o=this.#t;for(;a>2*e||s>2*t;){let l=a,u=s;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));let p=new OffscreenCanvas(a,s);p.getContext("2d").drawImage(o,0,0,l,u,0,0,a,s),o=p.transferToImageBitmap()}return o}#_(e,t){let i=new gp,r=Math.ceil(e*i.sx),a=Math.ceil(t*i.sy),s=this.#c;if(!s||s.width===r&&s.height===a)return;s.width=r,s.height=a;let o=this.#l?this.#t:this.#m(r,a),l=s.getContext("2d");l.filter=this._uiManager.hcmFilter,l.drawImage(o,0,0,o.width,o.height,0,0,r,a)}getImageForAltText(){return this.#c}#v(e){if(e){if(this.#l){let r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}let t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#t,t.getContext("2d").drawImage(this.#t,0,0),t.toDataURL()}if(this.#l){let[t,i]=this.pageDimensions,r=Math.round(this.width*t*Il.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*Il.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(r,a);return s.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,a),s.transferToImageBitmap()}return structuredClone(this.#t)}#b(){this._uiManager._signal&&(this.#o=new ResizeObserver(e=>{let t=e[0].contentRect;t.width&&t.height&&this.#g(t.width,t.height)}),this.#o.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#o?.disconnect(),this.#o=null},{once:!0}))}static deserialize(e,t,i){return Ne(this,null,function*(){let r=null;if(e instanceof N0){let{data:{rect:x,rotation:y,id:S,structParent:b,popupRef:M},container:T,parent:{page:{pageNumber:I}}}=e,O=T.querySelector("canvas"),U=i.imageManager.getFromCanvas(T.id,O);O.remove();let N=(yield t._structTree.getAriaAttributes(`${uy}${S}`))?.get("aria-label")||"";r=e={annotationType:xi.STAMP,bitmapId:U.id,bitmap:U.bitmap,pageIndex:I-1,rect:x.slice(0),rotation:y,id:S,deleted:!1,accessibilityData:{decorative:!1,altText:N},isSvg:!1,structParent:b,popupRef:M}}let a=yield uc(n,this,"deserialize").call(this,e,t,i),{rect:s,bitmap:o,bitmapUrl:l,bitmapId:u,isSvg:p,accessibilityData:f}=e;u&&i.imageManager.isValidId(u)?(a.#e=u,o&&(a.#t=o)):a.#n=l,a.#l=p;let[g,m]=a.pageDimensions;return a.width=(s[2]-s[0])/g,a.height=(s[3]-s[1])/m,a.annotationElementId=e.id||null,f&&(a.altTextData=f),a._initialData=r,a.#u=!!r,a})}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let i={annotationType:xi.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#l,structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=this.#v(!0),i.accessibilityData=this.serializeAltText(!0),i;let{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){let o=this.#y(i);if(o.isSame)return null;o.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,t===null)return i;t.stamps||=new Map;let s=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!t.stamps.has(this.#e))t.stamps.set(this.#e,{area:s,serialized:i}),i.bitmap=this.#v(!1);else if(this.#l){let o=t.stamps.get(this.#e);s>o.area&&(o.area=s,o.serialized.bitmap.close(),o.serialized.bitmap=this.#v(!1))}return i}#y(e){let{pageIndex:t,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===t,a=(e.accessibilityData?.alt||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}},d6=(()=>{class n{#t;#e=!1;#i=null;#n=null;#a=null;#r=new Map;#c=!1;#o=!1;#d=null;#l=null;#u=null;#s;static _initialized=!1;static#h=new Map([ey,oy,ly,U0].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:r,structTreeLayer:a,accessibilityManager:s,annotationLayer:o,drawLayer:l,textLayer:u,viewport:p,l10n:f}){let g=[...n.#h.values()];if(!n._initialized){n._initialized=!0;for(let m of g)m.initialize(f,t)}t.registerEditorTypes(g),this.#s=t,this.pageIndex=i,this.div=r,this.#t=s,this.#i=o,this.viewport=p,this.#l=u,this.drawLayer=l,this._structTree=a,this.#s.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#s.getMode()===xi.NONE}updateToolbar(t){this.#s.updateToolbar(t)}updateMode(t=this.#s.getMode()){switch(this.#_(),t){case xi.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case xi.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case xi.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:i}=this.div;for(let r of n.#h.values())i.toggle(`${r._type}Editing`,t===r._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#l?.div}setEditingState(t){this.#s.setEditingState(t)}addCommands(t){this.#s.addCommands(t)}cleanUndoStack(t){this.#s.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}enable(){return Ne(this,null,function*(){this.div.tabIndex=0,this.togglePointerEvents(!0);let t=new Set;for(let r of this.#r.values())r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#s.removeChangedExistingAnnotation(r),t.add(r.annotationElementId));if(!this.#i)return;let i=this.#i.getEditableAnnotations();for(let r of i){if(r.hide(),this.#s.isDeletedAnnotationElement(r.data.id)||t.has(r.data.id))continue;let a=yield this.deserialize(r);a&&(this.addOrRebuild(a),a.enableEditing())}})}disable(){this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);let t=new Map,i=new Map;for(let a of this.#r.values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){t.set(a.annotationElementId,a);continue}else i.set(a.annotationElementId,a);this.getEditableAnnotation(a.annotationElementId)?.show(),a.remove()}if(this.#i){let a=this.#i.getEditableAnnotations();for(let s of a){let{id:o}=s.data;if(this.#s.isDeletedAnnotationElement(o))continue;let l=i.get(o);if(l){l.resetAnnotationElement(s),l.show(!1),s.show();continue}l=t.get(o),l&&(this.#s.addChangedExistingAnnotation(l),l.renderAnnotationElement(s)&&l.show(!1)),s.show()}}this.#_(),this.isEmpty&&(this.div.hidden=!0);let{classList:r}=this.div;for(let a of n.#h.values())r.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#s.getActive()!==t&&this.#s.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#l?.div&&!this.#u){this.#u=new AbortController;let t=this.#s.combinedSignal(this.#u);this.#l.div.addEventListener("pointerdown",this.#p.bind(this),{signal:t}),this.#l.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#l?.div&&this.#u&&(this.#u.abort(),this.#u=null,this.#l.div.classList.remove("highlighting"))}#p(t){this.#s.unselectAll();let{target:i}=t;if(i===this.#l.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#l.div.contains(i)){let{isMac:r}=Pr.platform;if(t.button!==0||t.ctrlKey&&r)return;this.#s.showAllEditors("highlight",!0,!0),this.#l.div.classList.add("free"),this.toggleDrawing(),U0.startHighlighting(this,this.#s.direction==="ltr",{target:this.#l.div,x:t.x,y:t.y}),this.#l.div.addEventListener("pointerup",()=>{this.#l.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#s._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;let t=this.#s.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#r.set(t.id,t);let{annotationElementId:i}=t;i&&this.#s.isDeletedAnnotationElement(i)&&this.#s.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#s.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#s.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#s.addDeletedAnnotationElement(t.annotationElementId),Fn.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#s.addEditor(t),this.attach(t),!t.isAttachedToDOM){let i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#s.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;let{activeElement:i}=document;t.div.contains(i)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#s._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){let i=()=>t._uiManager.rebuild(t),r=()=>{t.remove()};this.addCommands({cmd:i,undo:r,mustExec:!1})}getNextId(){return this.#s.getId()}get#f(){return n.#h.get(this.#s.getMode())}combinedSignal(t){return this.#s.combinedSignal(t)}#g(t){let i=this.#f;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(t,i){this.#s.updateToolbar(t),this.#s.updateMode(t);let{offsetX:r,offsetY:a}=this.#m(),s=this.getNextId(),o=this.#g(Li({parent:this,id:s,x:r,y:a,uiManager:this.#s,isCentered:!0},i));o&&this.add(o)}deserialize(t){return Ne(this,null,function*(){return(yield n.#h.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#s))||null})}createAndAddNewEditor(t,i,r={}){let a=this.getNextId(),s=this.#g(Li({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#s,isCentered:i},r));return s&&this.add(s),s}#m(){let{x:t,y:i,width:r,height:a}=this.div.getBoundingClientRect(),s=Math.max(0,t),o=Math.max(0,i),l=Math.min(window.innerWidth,t+r),u=Math.min(window.innerHeight,i+a),p=(s+l)/2-t,f=(o+u)/2-i,[g,m]=this.viewport.rotation%180===0?[p,f]:[f,p];return{offsetX:g,offsetY:m}}addNewEditor(){this.createAndAddNewEditor(this.#m(),!0)}setSelected(t){this.#s.setSelected(t)}toggleSelected(t){this.#s.toggleSelected(t)}unselect(t){this.#s.unselect(t)}pointerup(t){let{isMac:i}=Pr.platform;if(!(t.button!==0||t.ctrlKey&&i)&&t.target===this.div&&this.#c&&(this.#c=!1,!(this.#f?.isDrawer&&this.#f.supportMultipleDrawings))){if(!this.#e){this.#e=!0;return}if(this.#s.getMode()===xi.STAMP){this.#s.unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#s.getMode()===xi.HIGHLIGHT&&this.enableTextSelection(),this.#c){this.#c=!1;return}let{isMac:i}=Pr.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#c=!0,this.#f?.isDrawer){this.startDrawingSession(t);return}let r=this.#s.getActive();this.#e=!r||r.isEmpty()}startDrawingSession(t){if(this.div.focus(),this.#d){this.#f.startDrawing(this,this.#s,!1,t);return}this.#s.setCurrentDrawingSession(this),this.#d=new AbortController;let i=this.#s.combinedSignal(this.#d);this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&this.commitOrRemove()},{signal:i}),this.#f.startDrawing(this,this.#s,!1,t)}endDrawingSession(t=!1){return this.#d?(this.#s.setCurrentDrawingSession(null),this.#d.abort(),this.#d=null,this.#f.endDrawing(t)):null}findNewParent(t,i,r){let a=this.#s.findParent(i,r);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#d?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#d&&this.#f.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#s.getActive()?.parent===this&&(this.#s.commitOrRemove(),this.#s.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(let t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#s.removeLayer(this)}#_(){for(let t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,kc(this.div,t);for(let i of this.#s.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#s.commitOrRemove(),this.#_();let i=this.viewport.rotation,r=t.rotation;if(this.viewport=t,kc(this.div,{rotation:r}),i!==r)for(let a of this.#r.values())a.rotate(r)}get pageDimensions(){let{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#s.viewParameters.realScale}}return n})(),cy=class n{#t=null;#e=0;#i=new Map;#n=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#t){this.#t=e;return}if(this.#t!==e){if(this.#i.size>0)for(let t of this.#i.values())t.remove(),e.append(t);this.#t=e}}static get _svgFactory(){return Ii(this,"_svgFactory",new Sp)}static#a(e,[t,i,r,a]){let{style:s}=e;s.top=`${100*i}%`,s.left=`${100*t}%`,s.width=`${100*r}%`,s.height=`${100*a}%`}#r(){let e=n._svgFactory.create(1,1,!0);return this.#t.append(e),e.setAttribute("aria-hidden",!0),e}#c(e,t){let i=n._svgFactory.createElement("clipPath");e.append(i);let r=`clip_${t}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");let a=n._svgFactory.createElement("use");return i.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),r}#o(e,t){for(let[i,r]of Object.entries(t))r===null?e.removeAttribute(i):e.setAttribute(i,r)}draw(e,t=!1,i=!1){let r=this.#e++,a=this.#r(),s=n._svgFactory.createElement("defs");a.append(s);let o=n._svgFactory.createElement("path");s.append(o);let l=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#n.set(r,o);let u=i?this.#c(s,l):null,p=n._svgFactory.createElement("use");return a.append(p),p.setAttribute("href",`#${l}`),this.updateProperties(a,e),this.#i.set(r,a),{id:r,clipPathId:`url(#${u})`}}drawOutline(e,t){let i=this.#e++,r=this.#r(),a=n._svgFactory.createElement("defs");r.append(a);let s=n._svgFactory.createElement("path");a.append(s);let o=`path_p${this.pageIndex}_${i}`;s.setAttribute("id",o),s.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){let f=n._svgFactory.createElement("mask");a.append(f),l=`mask_p${this.pageIndex}_${i}`,f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");let g=n._svgFactory.createElement("rect");f.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");let m=n._svgFactory.createElement("use");f.append(m),m.setAttribute("href",`#${o}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}let u=n._svgFactory.createElement("use");r.append(u),u.setAttribute("href",`#${o}`),l&&u.setAttribute("mask",`url(#${l})`);let p=u.cloneNode();return r.append(p),u.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,e),this.#i.set(i,r),i}finalizeDraw(e,t){this.#n.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;let{root:i,bbox:r,rootClass:a,path:s}=t,o=typeof e=="number"?this.#i.get(e):e;if(o){if(i&&this.#o(o,i),r&&n.#a(o,r),a){let{classList:l}=o;for(let[u,p]of Object.entries(a))l.toggle(u,p)}if(s){let u=o.firstChild.firstChild;this.#o(u,s)}}}updateParent(e,t){if(t===this)return;let i=this.#i.get(e);i&&(t.#t.append(i),this.#i.delete(e),t.#i.set(e,i))}remove(e){this.#n.delete(e),this.#t!==null&&(this.#i.get(e).remove(),this.#i.delete(e))}destroy(){this.#t=null;for(let e of this.#i.values())e.remove();this.#i.clear(),this.#n.clear()}};globalThis.pdfjsTestingUtils={HighlightOutliner:Mp};var Ret=ci.AbortException,Oet=ci.AnnotationEditorLayer,Net=ci.AnnotationEditorParamsType,Fet=ci.AnnotationEditorType,Bet=ci.AnnotationEditorUIManager,Vet=ci.AnnotationLayer,Uet=ci.AnnotationMode,zet=ci.ColorPicker,Het=ci.DOMSVGFactory,Wet=ci.DrawLayer,jet=ci.FeatureTest,f3=ci.GlobalWorkerOptions,Get=ci.ImageKind,qet=ci.InvalidPDFException,Xet=ci.MissingPDFException,Yet=ci.OPS,$et=ci.OutputScale,Ket=ci.PDFDataRangeTransport,Zet=ci.PDFDateString,Jet=ci.PDFWorker,Qet=ci.PasswordResponses,tit=ci.PermissionFlag,eit=ci.PixelsPerInch,iit=ci.RenderingCancelledException,nit=ci.TextLayer,rit=ci.UnexpectedResponseException,ait=ci.Util,sit=ci.VerbosityLevel,oit=ci.XfaLayer,lit=ci.build,cit=ci.createValidAbsoluteUrl,dit=ci.fetchData,m3=ci.getDocument,uit=ci.getFilenameFromUrl,hit=ci.getPdfFilenameFromUrl,pit=ci.getXfaPageViewport,fit=ci.isDataScheme,mit=ci.isPdfFile,git=ci.noContextMenu,_it=ci.normalizeUnicode,vit=ci.setLayerDimensions,xit=ci.shadow,bit=ci.stopEvent,yit=ci.version;var Z0=class n{constructor(){f3.workerSrc="/assets/pdf.worker.min.mjs"}getPdfDocument(e){return Ne(this,null,function*(){try{let t=yield m3(e).promise;return console.log("PDF loaded successfully"),t}catch(t){throw console.error("Error loading PDF:",t),t}})}renderPdfPage(e,t,i){return Ne(this,null,function*(){try{let r=yield e.getPage(t),a=r.getViewport({scale:1.5}),s=i.getContext("2d");i.width=a.width,i.height=a.height;let o={canvasContext:s,viewport:a};yield r.render(o).promise}catch(r){throw console.error(`Error rendering page ${t}:`,r),r}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Kn({token:n,factory:n.\u0275fac,providedIn:"root"})};var p6=n=>({width:n}),g3=(n,e)=>({"fa-chevron-down":n,"fa-chevron-right":e}),f6=()=>["active"];function m6(n,e){n&1&&(c(0,"ul")(1,"li")(2,"a",15),h(3,"Submenu Item 1"),d()(),c(4,"li")(5,"a",15),h(6,"Submenu Item 2"),d()()())}function g6(n,e){if(n&1){let t=Nt();c(0,"li")(1,"a",11),lt("click",function(){G(t);let r=k();return q(r.toggleMenu("civil"))}),c(2,"span",3),Lt(3,"i",12),d(),h(4,"Civil "),Lt(5,"i",13),d(),rt(6,m6,7,0,"ul",14),d()}if(n&2){let t=k();Zn("active",t.activeMenu==="civil"),_(5),D("ngClass",ms(4,g3,t.isMenuExpanded("civil"),!t.isMenuExpanded("civil"))),_(),D("ngIf",t.isMenuExpanded("civil"))}}function _6(n,e){if(n&1){let t=Nt();c(0,"li",16)(1,"a",11),lt("click",function(){G(t);let r=k();return q(r.toggleMenu("marketing"))}),c(2,"span",3),Lt(3,"i",17),d(),h(4,"Marketing "),d()()}if(n&2){let t=k();Zn("active",t.activeMenu==="marketing")}}function v6(n,e){if(n&1){let t=Nt();c(0,"li",18)(1,"a",11),lt("click",function(){G(t);let r=k();return q(r.toggleMenu("Sales"))}),c(2,"span",3),Lt(3,"i",19),d(),h(4,"Sales "),d()()}if(n&2){let t=k();Zn("active",t.activeMenu==="Sales")}}function x6(n,e){if(n&1){let t=Nt();c(0,"li",20)(1,"a",11),lt("click",function(){G(t);let r=k();return q(r.toggleMenu("Report"))}),c(2,"span",3),Lt(3,"i",21),d(),h(4,"Report"),d()()}if(n&2){let t=k();Zn("active",t.activeMenu==="Report")}}function b6(n,e){if(n&1){let t=Nt();c(0,"li")(1,"a",11),lt("click",function(){G(t);let r=k();return q(r.toggleMenu("Purchase"))}),c(2,"span",3),Lt(3,"i",22),d(),h(4,"Purchase"),d()()}if(n&2){let t=k();Zn("active",t.activeMenu==="Purchase")}}function y6(n,e){n&1&&(c(0,"ul")(1,"li",24)(2,"a"),h(3,"Sales"),d()()())}function S6(n,e){if(n&1){let t=Nt();c(0,"li")(1,"a",11),lt("click",function(){G(t);let r=k();return q(r.toggleMenu("Accounts"))}),c(2,"span",3),Lt(3,"i",23),d(),h(4,"Accounts"),d(),rt(5,y6,4,0,"ul",14),d()}if(n&2){let t=k();Zn("active",t.activeMenu==="Accounts"),_(5),D("ngIf",t.isMenuExpanded("Accounts"))}}function w6(n,e){if(n&1){let t=Nt();c(0,"li")(1,"a",11),lt("click",function(){G(t);let r=k();return q(r.toggleMenu("Liaison"))}),c(2,"span",3),Lt(3,"i",25),d(),h(4,"Liaison"),d()()}if(n&2){let t=k();Zn("active",t.activeMenu==="Liaison")}}function C6(n,e){if(n&1){let t=Nt();c(0,"li",26)(1,"a",11),lt("click",function(){G(t);let r=k();return q(r.toggleMenu("HR"))}),c(2,"span",3),Lt(3,"i",27),d(),h(4,"HR"),d()()}if(n&2){let t=k();Zn("active",t.activeMenu==="HR")}}function M6(n,e){n&1&&(c(0,"ul")(1,"li",29)(2,"a"),h(3,"View User"),d()()()),n&2&&(_(),D("routerLinkActive",fc(1,f6)))}function E6(n,e){if(n&1){let t=Nt();c(0,"li")(1,"a",11),lt("click",function(){G(t);let r=k();return q(r.toggleMenu("IT"))}),c(2,"span",3),Lt(3,"i",28),d(),h(4,"IT "),Lt(5,"i",13),d(),rt(6,M6,4,2,"ul",14),d()}if(n&2){let t=k();Zn("active",t.activeMenu==="IT"),_(5),D("ngClass",ms(4,g3,t.isMenuExpanded("IT"),!t.isMenuExpanded("IT"))),_(),D("ngIf",t.isMenuExpanded("IT"))}}function A6(n,e){if(n&1){let t=Nt();c(0,"li",30)(1,"a",11),lt("click",function(){G(t);let r=k();return q(r.toggleMenu("Meeting"))}),c(2,"span",3),Lt(3,"i",31),d(),h(4,"Meeting"),d()()}if(n&2){let t=k();Zn("active",t.activeMenu==="Meeting")}}var ei=class n{constructor(e){this.userService=e}isOpen=!0;expandedMenu=null;toggleMenu(e){this.expandedMenu===e?this.expandedMenu=null:this.expandedMenu=e,this.activeMenu=e,localStorage.setItem("activeMenu",e)}isMenuExpanded(e){return this.expandedMenu===e}activeMenu=null;user_data=[];user_details;user_data_array;ngOnInit(){this.get_data(),this.activeMenu=localStorage.getItem("activeMenu")}image_url="";get_data(){this.user_details=this.userService.getUserData(),this.user_data=Object.entries(this.user_details),this.user_data_array=this.user_data.reduce((e,[t,i])=>(e[t]=i,e),{}),this.get_access()}is_marketing=!1;is_salse=!1;is_Purchase=!1;is_Accounts=!1;is_Liaison=!1;is_HR=!1;is_Civil=!1;is_IT=!1;get_access(){this.user_data_array.User_Department=="Marketing"?this.is_marketing=!0:this.user_data_array.User_Department=="Sales"?this.is_salse=!0:this.user_data_array.User_Department=="Purchase"?this.is_Purchase=!0:this.user_data_array.User_Department=="Accounts"?this.is_Accounts=!0:this.user_data_array.User_Department=="Liaison"?this.is_Liaison=!0:this.user_data_array.User_Department=="HR"?this.is_HR=!0:this.user_data_array.User_Department=="Civil"?this.is_Civil=!0:this.user_data_array.User_Department=="IT"&&(this.is_IT=!0)}static \u0275fac=function(t){return new(t||n)(Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-sidebar"]],inputs:{isOpen:"isOpen"},decls:20,vars:15,consts:[["id","sidenav",3,"ngStyle"],["src","assets/images/sidebar-logo.png","alt","",1,"logo-img"],["routerLink","/dashboard",3,"click"],[1,"icon-bg"],["aria-hidden","true",1,"fa","fa-home"],[3,"active",4,"ngIf"],["routerLink","/project-marketing",3,"active",4,"ngIf"],["routerLink","/Sales-projects",3,"active",4,"ngIf"],["routerLink","/Sales-Report",3,"active",4,"ngIf"],["routerLink","/hr-dashboard",3,"active",4,"ngIf"],["routerLink","/marketing-meeting",3,"active",4,"ngIf"],[3,"click"],["aria-hidden","true",1,"far","fa-building"],["aria-hidden","true",1,"fa",3,"ngClass"],[4,"ngIf"],["href","#"],["routerLink","/project-marketing"],["aria-hidden","true",1,"fas","fa-poll"],["routerLink","/Sales-projects"],["aria-hidden","true",1,"fas","fa-chart-line"],["routerLink","/Sales-Report"],["aria-hidden","true",1,"fa","fa-file-text"],["aria-hidden","true",1,"fas","fa-shopping-cart"],["aria-hidden","true",1,"fa","fa-rupee"],["routerLink","/project-accounds"],["aria-hidden","true",1,"fa","fa-balance-scale"],["routerLink","/hr-dashboard"],["aria-hidden","true",1,"fas","fa-id-card-alt"],["aria-hidden","true",1,"fa","fa-laptop"],["routerLink","/view-users",3,"routerLinkActive"],["routerLink","/marketing-meeting"],["aria-hidden","true",1,"far","fa-calendar-alt"]],template:function(t,i){t&1&&(c(0,"div",0)(1,"div"),Lt(2,"img",1),d(),c(3,"nav")(4,"ul")(5,"li")(6,"a",2),lt("click",function(){return i.toggleMenu("Dashboard")}),c(7,"span",3),Lt(8,"i",4),d(),h(9,"Dashboard"),d()(),rt(10,g6,7,7,"li",5)(11,_6,5,2,"li",6)(12,v6,5,2,"li",7)(13,x6,5,2,"li",8)(14,b6,5,2,"li",5)(15,S6,6,3,"li",5)(16,w6,5,2,"li",5)(17,C6,5,2,"li",9)(18,E6,7,7,"li",5)(19,A6,5,2,"li",10),d()()()),t&2&&(D("ngStyle",te(13,p6,i.isOpen?"250px":"0px")),_(5),Zn("active",i.activeMenu==="Dashboard"),_(5),D("ngIf",i.is_Civil),_(),D("ngIf",i.is_marketing),_(),D("ngIf",i.is_salse),_(),D("ngIf",i.is_salse),_(),D("ngIf",i.is_Purchase),_(),D("ngIf",i.is_Accounts),_(),D("ngIf",i.is_Liaison),_(),D("ngIf",i.is_HR),_(),D("ngIf",i.is_IT),_(),D("ngIf",i.is_marketing))},dependencies:[Ke,mi,Jf,on,fw],styles:['.logo-img[_ngcontent-%COMP%]{margin:12%}#sidenav[_ngcontent-%COMP%]{height:100vh;position:fixed;left:0;top:0;background:#5e0f80;z-index:2;transition:.5s;overflow-y:auto;overflow-x:hidden}#sidenav[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}#sidenav[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#5e0f80}#sidenav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#a347b5;border-radius:5px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:10px;margin:0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-bottom:10px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;display:flex;align-items:center;padding:10px 20px;border-radius:5px;position:relative;overflow:hidden;z-index:1;transition:color .3s}.icon-bg[_ngcontent-%COMP%]{background-color:#fff;padding:5px;border-radius:5px;color:gray;text-align:center;margin-right:15px;flex-shrink:0;width:15%}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;width:100%;height:100%;background-color:#3a043ace;border-radius:5px;transform:translateY(-50%) scale(0);transition:transform .3s;z-index:-1}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{transform:translateY(-50%) scale(1)}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%]{margin-left:auto;transition:transform .3s ease;font-size:12px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa.fa-chevron-down[_ngcontent-%COMP%]{transform:rotate(0)}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa.fa-chevron-right[_ngcontent-%COMP%]{transform:rotate(90deg)}li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#f48d3a;color:#000}']})};var T6=n=>({"margin-left":n});function k6(n,e){n&1&&(pe(0),Lt(1,"i",11),fe())}function I6(n,e){n&1&&(pe(0),Lt(1,"i",12),fe())}var ii=class n{constructor(e,t,i,r){this.breakpointObserver=e;this.location=t;this.router=i;this.userService=r}toggleSidebarEvent=new $a;isSidebarOpen=!1;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen,this.toggleSidebarEvent.emit()}goBack(){this.location.back()}user_data=[];user_details;user_data_array;ngOnInit(){this.get_data()}image_url="";get_data(){this.user_details=this.userService.getUserData(),this.user_data=Object.entries(this.user_details),this.user_data_array=this.user_data.reduce((e,[t,i])=>(e[t]=i,e),{})}static \u0275fac=function(t){return new(t||n)(Vt(Qf),Vt(nw),Vt(sn),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-header"]],outputs:{toggleSidebarEvent:"toggleSidebarEvent"},decls:13,vars:6,consts:[[1,"header",3,"ngStyle"],[1,"back-icon"],[1,"fa","fa-chevron-circle-left",3,"click"],[1,"tooltip-text"],[1,"nav-right"],[1,"menu-btn",3,"click"],[4,"ngIf"],[1,"msg-box"],[1,"fa-solid","fa-envelope"],[1,"circle-profile"],["alt","Profile Image",3,"src"],[1,"fa-solid","fa-xmark"],[1,"fa-solid","fa-bars"]],template:function(t,i){t&1&&(c(0,"nav",0)(1,"div",1)(2,"i",2),lt("click",function(){return i.goBack()}),d(),c(3,"span",3),h(4,"Back"),d()(),c(5,"div",4)(6,"div",5),lt("click",function(){return i.toggleSidebar()}),rt(7,k6,2,0,"ng-container",6)(8,I6,2,0,"ng-container",6),d(),c(9,"div",7),Lt(10,"i",8),d(),c(11,"div",9),Lt(12,"img",10),d()()()),t&2&&(D("ngStyle",te(4,T6,i.isSidebarOpen?"10px":"260px")),_(7),D("ngIf",!i.isSidebarOpen),_(),D("ngIf",i.isSidebarOpen),_(4),D("src",i.user_data_array.user_profile_img,cl))},dependencies:[mi,Jf],styles:[".header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;display:flex;justify-content:space-between;align-items:center;height:60px;padding:10px 20px;background:#ac5ff9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-radius:15px;box-shadow:0 4px 12px #0003;z-index:1000;transition:margin-left .5s;margin:10px 10px 10%}.back-icon[_ngcontent-%COMP%]{position:relative;color:#fff;cursor:pointer;display:inline-block;font-size:24px;transition:transform .3s ease,color .3s ease}.tooltip-text[_ngcontent-%COMP%]{visibility:hidden;width:50px;background-color:#000;color:#fff;text-align:center;border-radius:5px;padding:5px 0;position:absolute;top:100%;left:50%;transform:translate(-50%);opacity:0;transition:opacity .3s;z-index:1;font-size:12px}.back-icon[_ngcontent-%COMP%]:hover   .tooltip-text[_ngcontent-%COMP%]{visibility:visible;opacity:1;transition:transform .3s ease}.back-icon[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.nav-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.menu-btn[_ngcontent-%COMP%]{font-size:24px;color:#fff;cursor:pointer;transition:transform .3s ease,color .3s ease}.menu-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.menu-btn[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.circle-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;border:2px solid white;box-shadow:0 2px 8px #0000004d;transition:transform .3s ease;cursor:pointer}.circle-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.msg-box[_ngcontent-%COMP%]{font-size:24px;color:#fff;cursor:pointer;transition:transform .3s ease,color .3s ease}.msg-box[_ngcontent-%COMP%]:hover{transform:scale(1.2)}@media screen and (max-width: 768px){.header[_ngcontent-%COMP%]{margin-left:0;padding:10px;justify-content:space-between}.back-icon[_ngcontent-%COMP%]{display:none}.nav-right[_ngcontent-%COMP%]{justify-content:flex-end;gap:15px;position:fixed;right:10px}.menu-btn[_ngcontent-%COMP%], .msg-box[_ngcontent-%COMP%], .circle-profile[_ngcontent-%COMP%]{font-size:20px;margin-left:auto}.circle-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:25px}}"]})};var D6=n=>({"full-width":n});function P6(n,e){n&1&&(c(0,"div",9)(1,"div",10),Lt(2,"iframe",11),d()())}var J0=class n{constructor(e,t,i){this.router=e;this.userService=t;this.pdfReader=i}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}user_data=[];user_details;user_data_array;ngOnInit(){this.get_data()}image_url="";get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied"),this.user_data=Object.entries(this.user_details),this.user_data_array=this.user_data.reduce((e,[t,i])=>(e[t]=i,e),{}),console.log(this.user_data_array.User_r_and_r,"here is the url")}log_out(){this.userService.clearUserData(),this.router.navigate(["/login"])}isCardVisible=!1;toggleCard(){this.isCardVisible=!this.isCardVisible}onDocumentClick(e){let t=document.querySelector(".popup-card");t&&!t.contains(e.target)&&(this.isCardVisible=!1)}static \u0275fac=function(t){return new(t||n)(Vt(sn),Vt(oi),Vt(Z0))};static \u0275cmp=Be({type:n,selectors:[["app-dashboard"]],hostBindings:function(t,i){t&1&&lt("click",function(a){return i.onDocumentClick(a)},!1,dl)},decls:16,vars:7,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"welcome-card"],[2,"margin-left","10%"],["alt","",2,"height","8vh","width","60%","margin-left","-20px","border-radius","100%",3,"src"],[1,"logout-button",3,"click"],[1,"logout-button",2,"margin","10px",3,"click"],["class","popup-container",4,"ngIf"],[1,"popup-container"],[1,"popup-card"],["src",KS`https://drive.google.com/file/d/1dzckyF7mYmdKQb0PzgqX-1ZtTisCvVql/view?usp=drive_link`,"frameborder","0"]],template:function(t,i){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",1),c(2,"div",2)(3,"div")(4,"div",3)(5,"div",4),Lt(6,"img",5),d(),c(7,"h6"),h(8,"Welcome"),d(),c(9,"h4"),h(10),d(),c(11,"button",6),lt("click",function(){return i.log_out()}),h(12,"Log out"),d(),c(13,"button",7),lt("click",function(){return i.toggleCard()}),h(14,"R & R"),d()(),rt(15,P6,3,0,"div",8),d()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(5,D6,!i.isSidebarOpen)),_(4),D("src",i.user_data_array.user_profile_img,cl),_(4),A(i.user_data_array.User_first_name),_(5),D("ngIf",i.isCardVisible))},dependencies:[Ke,mi,ei,ii],styles:[".chart-card[_ngcontent-%COMP%]{margin-top:10%}.cards-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:20px;width:420px;box-shadow:0 4px 20px #0000001a;transition:transform .2s}.cards-container[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.time-card[_ngcontent-%COMP%]{border-radius:10px;padding:20px;width:180px;box-shadow:0 4px 20px #0000001a;background:linear-gradient(90deg,#4b6cb7,#182848);color:#fff;transition:transform .2s;height:90%}.time-font[_ngcontent-%COMP%]{font-size:50px;font-family:Protest Guerrilla,sans-serif;font-weight:400;font-style:normal;text-indent:10px;margin-left:-15px;margin-top:30px}span[_ngcontent-%COMP%]{font-size:11px}.month-txt[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-optical-sizing:auto;font-weight:400;font-style:normal;font-size:20px}.year-txt[_ngcontent-%COMP%]{font-size:30px;font-weight:700;font-family:Space Grotesk,sans-serif;margin-top:-10px}.date-card[_ngcontent-%COMP%]{margin-top:40%}.day-txt[_ngcontent-%COMP%]{font-size:14px;font-family:Protest Guerrilla,sans-serif;font-weight:400;font-style:normal}.welcome-card[_ngcontent-%COMP%]{margin-top:50%;background-color:#4b6cb7;padding:30px;border-radius:10px;color:#fff;position:relative}.welcome-card[_ngcontent-%COMP%]{background-color:#4b6cb7;padding:20px;width:100%;margin-top:50%;border-radius:12px;box-shadow:5px 5px 15px #0003,-5px -5px 15px #ffffff80;transition:transform .3s ease,box-shadow .3s ease;position:relative}.welcome-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:10px 10px 25px #0000004d,-10px -10px 25px #ffffff80}.logout-button[_ngcontent-%COMP%]{background-color:#082a7a;color:#fff;border:none;padding:10px;font-size:12px;border-radius:10px;transition:.5s}.logout-button[_ngcontent-%COMP%]:hover{background-color:#2854bb;color:#fff}.dashboard-card[_ngcontent-%COMP%]{background-color:#ccc;padding:20px;width:100%;border-radius:12px;box-shadow:5px 5px 15px #0003,-5px -5px 15px #ffffff80;transition:transform .3s ease,box-shadow .3s ease}.dashboard-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:10px 10px 25px #0000004d,-10px -10px 25px #ffffff80}.card[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(.8);opacity:0;width:50%;height:50vh;padding:20px;background:#fff;box-shadow:0 4px 10px #0003;border-radius:8px;transition:transform .3s ease-out,opacity .3s ease-out;z-index:-1;overflow-y:scroll}.card[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.card[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#efefef}.card[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#868686;border-radius:5px}.card.visible[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1);opacity:1;z-index:1000}.close-btn[_ngcontent-%COMP%]{margin-top:10px;padding:5px 10px;background:#8d8d8d;width:100px;color:#fff;border:none;border-radius:4px;cursor:pointer}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black;text-align:center}.card-container-pdf[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f9f9f9}.card-pdf[_ngcontent-%COMP%]{width:80%;max-width:600px;height:90%;background:#fff;border-radius:10px;box-shadow:0 4px 10px #0000001a;display:flex;flex-direction:column;overflow:hidden}.card-header-pdf[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:1rem;text-align:center;font-size:1.2rem}.popup-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.popup-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 5px 15px #0000004d;text-align:center;animation:popupFadeIn .3s ease;position:relative;overflow-y:auto;height:80vh}"]})};var hn=Rk(Ok());import{createRequire as L6}from"module";var R6=L6("/"),O6;try{O6=R6("worker_threads").Worker}catch{}var Wr=Uint8Array,La=Uint16Array,yy=Int32Array,Q0=new Wr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tg=new Wr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_y=new Wr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),b3=function(n,e){for(var t=new La(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new yy(t[30]),i=1;i<30;++i)for(var a=t[i];a<t[i+1];++a)r[a]=a-t[i]<<5|i;return{b:t,r}},y3=b3(Q0,2),S3=y3.b,vy=y3.r;S3[28]=258,vy[258]=28;var w3=b3(tg,0),N6=w3.b,_3=w3.r,xy=new La(32768);for(qi=0;qi<32768;++qi)Io=(qi&43690)>>1|(qi&21845)<<1,Io=(Io&52428)>>2|(Io&13107)<<2,Io=(Io&61680)>>4|(Io&3855)<<4,xy[qi]=((Io&65280)>>8|(Io&255)<<8)>>1;var Io,qi,qs=function(n,e,t){for(var i=n.length,r=0,a=new La(e);r<i;++r)n[r]&&++a[n[r]-1];var s=new La(e);for(r=1;r<e;++r)s[r]=s[r-1]+a[r-1]<<1;var o;if(t){o=new La(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var u=r<<4|n[r],p=e-n[r],f=s[n[r]-1]++<<p,g=f|(1<<p)-1;f<=g;++f)o[xy[f]>>l]=u}else for(o=new La(i),r=0;r<i;++r)n[r]&&(o[r]=xy[s[n[r]-1]++]>>15-n[r]);return o},Pl=new Wr(288);for(qi=0;qi<144;++qi)Pl[qi]=8;var qi;for(qi=144;qi<256;++qi)Pl[qi]=9;var qi;for(qi=256;qi<280;++qi)Pl[qi]=7;var qi;for(qi=280;qi<288;++qi)Pl[qi]=8;var qi,Ip=new Wr(32);for(qi=0;qi<32;++qi)Ip[qi]=5;var qi,F6=qs(Pl,9,0),B6=qs(Pl,9,1),V6=qs(Ip,5,0),U6=qs(Ip,5,1),fy=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ys=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},my=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Sy=function(n){return(n+7)/8|0},C3=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new Wr(n.subarray(e,t))};var z6=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ss=function(n,e,t){var i=new Error(e||z6[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,Ss),!t)throw i;return i},H6=function(n,e,t,i){var r=n.length,a=i?i.length:0;if(!r||e.f&&!e.l)return t||new Wr(0);var s=!t,o=s||e.i!=2,l=e.i;s&&(t=new Wr(r*3));var u=function(ie){var ue=t.length;if(ie>ue){var _e=new Wr(Math.max(ue*2,ie));_e.set(t),t=_e}},p=e.f||0,f=e.p||0,g=e.b||0,m=e.l,x=e.d,y=e.m,S=e.n,b=r*8;do{if(!m){p=ys(n,f,1);var M=ys(n,f+1,3);if(f+=3,M)if(M==1)m=B6,x=U6,y=9,S=5;else if(M==2){var U=ys(n,f,31)+257,N=ys(n,f+10,15)+4,B=U+ys(n,f+5,31)+1;f+=14;for(var R=new Wr(B),F=new Wr(19),P=0;P<N;++P)F[_y[P]]=ys(n,f+P*3,7);f+=N*3;for(var V=fy(F),$=(1<<V)-1,K=qs(F,V,1),P=0;P<B;){var ct=K[ys(n,f,$)];f+=ct&15;var T=ct>>4;if(T<16)R[P++]=T;else{var ot=0,at=0;for(T==16?(at=3+ys(n,f,3),f+=2,ot=R[P-1]):T==17?(at=3+ys(n,f,7),f+=3):T==18&&(at=11+ys(n,f,127),f+=7);at--;)R[P++]=ot}}var Q=R.subarray(0,U),xt=R.subarray(U);y=fy(Q),S=fy(xt),m=qs(Q,y,1),x=qs(xt,S,1)}else Ss(1);else{var T=Sy(f)+4,I=n[T-4]|n[T-3]<<8,O=T+I;if(O>r){l&&Ss(0);break}o&&u(g+I),t.set(n.subarray(T,O),g),e.b=g+=I,e.p=f=O*8,e.f=p;continue}if(f>b){l&&Ss(0);break}}o&&u(g+131072);for(var Mt=(1<<y)-1,qt=(1<<S)-1,z=f;;z=f){var ot=m[my(n,f)&Mt],nt=ot>>4;if(f+=ot&15,f>b){l&&Ss(0);break}if(ot||Ss(2),nt<256)t[g++]=nt;else if(nt==256){z=f,m=null;break}else{var Z=nt-254;if(nt>264){var P=nt-257,st=Q0[P];Z=ys(n,f,(1<<st)-1)+S3[P],f+=st}var pt=x[my(n,f)&qt],ft=pt>>4;pt||Ss(3),f+=pt&15;var xt=N6[ft];if(ft>3){var st=tg[ft];xt+=my(n,f)&(1<<st)-1,f+=st}if(f>b){l&&Ss(0);break}o&&u(g+131072);var St=g+Z;if(g<xt){var kt=a-xt,Qt=Math.min(xt,St);for(kt+g<0&&Ss(3);g<Qt;++g)t[g]=i[kt+g]}for(;g<St;++g)t[g]=t[g-xt]}}e.l=m,e.p=z,e.b=g,e.f=p,m&&(p=1,e.m=y,e.d=x,e.n=S)}while(!p);return g!=t.length&&s?C3(t,0,g):t.subarray(0,g)},Do=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8},Tp=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8,n[i+2]|=t>>16},gy=function(n,e){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var r=t.length,a=t.slice();if(!r)return{t:E3,l:0};if(r==1){var s=new Wr(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(O,U){return O.f-U.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],u=0,p=1,f=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};p!=r-1;)o=t[t[u].f<t[f].f?u++:f++],l=t[u!=p&&t[u].f<t[f].f?u++:f++],t[p++]={s:-1,f:o.f+l.f,l:o,r:l};for(var g=a[0].s,i=1;i<r;++i)a[i].s>g&&(g=a[i].s);var m=new La(g+1),x=by(t[p-1],m,0);if(x>e){var i=0,y=0,S=x-e,b=1<<S;for(a.sort(function(U,N){return m[N.s]-m[U.s]||U.f-N.f});i<r;++i){var M=a[i].s;if(m[M]>e)y+=b-(1<<x-m[M]),m[M]=e;else break}for(y>>=S;y>0;){var T=a[i].s;m[T]<e?y-=1<<e-m[T]++-1:++i}for(;i>=0&&y;--i){var I=a[i].s;m[I]==e&&(--m[I],++y)}x=e}return{t:new Wr(m),l:x}},by=function(n,e,t){return n.s==-1?Math.max(by(n.l,e,t+1),by(n.r,e,t+1)):e[n.s]=t},v3=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new La(++e),i=0,r=n[0],a=1,s=function(l){t[i++]=l},o=1;o<=e;++o)if(n[o]==r&&o!=e)++a;else{if(!r&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(r),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(r);a=1,r=n[o]}return{c:t.subarray(0,i),n:e}},kp=function(n,e){for(var t=0,i=0;i<e.length;++i)t+=n[i]*e[i];return t},M3=function(n,e,t){var i=t.length,r=Sy(e+2);n[r]=i&255,n[r+1]=i>>8,n[r+2]=n[r]^255,n[r+3]=n[r+1]^255;for(var a=0;a<i;++a)n[r+a+4]=t[a];return(r+4+i)*8},x3=function(n,e,t,i,r,a,s,o,l,u,p){Do(e,p++,t),++r[256];for(var f=gy(r,15),g=f.t,m=f.l,x=gy(a,15),y=x.t,S=x.l,b=v3(g),M=b.c,T=b.n,I=v3(y),O=I.c,U=I.n,N=new La(19),B=0;B<M.length;++B)++N[M[B]&31];for(var B=0;B<O.length;++B)++N[O[B]&31];for(var R=gy(N,7),F=R.t,P=R.l,V=19;V>4&&!F[_y[V-1]];--V);var $=u+5<<3,K=kp(r,Pl)+kp(a,Ip)+s,ct=kp(r,g)+kp(a,y)+s+14+3*V+kp(N,F)+2*N[16]+3*N[17]+7*N[18];if(l>=0&&$<=K&&$<=ct)return M3(e,p,n.subarray(l,l+u));var ot,at,Q,xt;if(Do(e,p,1+(ct<K)),p+=2,ct<K){ot=qs(g,m,0),at=g,Q=qs(y,S,0),xt=y;var Mt=qs(F,P,0);Do(e,p,T-257),Do(e,p+5,U-1),Do(e,p+10,V-4),p+=14;for(var B=0;B<V;++B)Do(e,p+3*B,F[_y[B]]);p+=3*V;for(var qt=[M,O],z=0;z<2;++z)for(var nt=qt[z],B=0;B<nt.length;++B){var Z=nt[B]&31;Do(e,p,Mt[Z]),p+=F[Z],Z>15&&(Do(e,p,nt[B]>>5&127),p+=nt[B]>>12)}}else ot=F6,at=Pl,Q=V6,xt=Ip;for(var B=0;B<o;++B){var st=i[B];if(st>255){var Z=st>>18&31;Tp(e,p,ot[Z+257]),p+=at[Z+257],Z>7&&(Do(e,p,st>>23&31),p+=Q0[Z]);var pt=st&31;Tp(e,p,Q[pt]),p+=xt[pt],pt>3&&(Tp(e,p,st>>5&8191),p+=tg[pt])}else Tp(e,p,ot[st]),p+=at[st]}return Tp(e,p,ot[256]),p+at[256]},W6=new yy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),E3=new Wr(0),j6=function(n,e,t,i,r,a){var s=a.z||n.length,o=new Wr(i+s+5*(1+Math.ceil(s/7e3))+r),l=o.subarray(i,o.length-r),u=a.l,p=(a.r||0)&7;if(e){p&&(l[0]=a.r>>3);for(var f=W6[e-1],g=f>>13,m=f&8191,x=(1<<t)-1,y=a.p||new La(32768),S=a.h||new La(x+1),b=Math.ceil(t/3),M=2*b,T=function(mt){return(n[mt]^n[mt+1]<<b^n[mt+2]<<M)&x},I=new yy(25e3),O=new La(288),U=new La(32),N=0,B=0,R=a.i||0,F=0,P=a.w||0,V=0;R+2<s;++R){var $=T(R),K=R&32767,ct=S[$];if(y[K]=ct,S[$]=K,P<=R){var ot=s-R;if((N>7e3||F>24576)&&(ot>423||!u)){p=x3(n,l,0,I,O,U,B,F,V,R-V,p),F=N=B=0,V=R;for(var at=0;at<286;++at)O[at]=0;for(var at=0;at<30;++at)U[at]=0}var Q=2,xt=0,Mt=m,qt=K-ct&32767;if(ot>2&&$==T(R-qt))for(var z=Math.min(g,ot)-1,nt=Math.min(32767,R),Z=Math.min(258,ot);qt<=nt&&--Mt&&K!=ct;){if(n[R+Q]==n[R+Q-qt]){for(var st=0;st<Z&&n[R+st]==n[R+st-qt];++st);if(st>Q){if(Q=st,xt=qt,st>z)break;for(var pt=Math.min(qt,st-2),ft=0,at=0;at<pt;++at){var St=R-qt+at&32767,kt=y[St],Qt=St-kt&32767;Qt>ft&&(ft=Qt,ct=St)}}}K=ct,ct=y[K],qt+=K-ct&32767}if(xt){I[F++]=268435456|vy[Q]<<18|_3[xt];var ie=vy[Q]&31,ue=_3[xt]&31;B+=Q0[ie]+tg[ue],++O[257+ie],++U[ue],P=R+Q,++N}else I[F++]=n[R],++O[n[R]]}}for(R=Math.max(R,P);R<s;++R)I[F++]=n[R],++O[n[R]];p=x3(n,l,u,I,O,U,B,F,V,R-V,p),u||(a.r=p&7|l[p/8|0]<<3,p-=7,a.h=S,a.p=y,a.i=R,a.w=P)}else{for(var R=a.w||0;R<s+u;R+=65535){var _e=R+65535;_e>=s&&(l[p/8|0]=u,_e=s),p=M3(l,p+1,n.subarray(R,_e))}a.i=s}return C3(o,0,i+Sy(p)+r)};var A3=function(){var n=1,e=0;return{p:function(t){for(var i=n,r=e,a=t.length|0,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)r+=i+=t[s];i=(i&65535)+15*(i>>16),r=(r&65535)+15*(r>>16)}n=i,e=r},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},G6=function(n,e,t,i,r){if(!r&&(r={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),s=new Wr(a.length+n.length);s.set(a),s.set(n,a.length),n=s,r.w=a.length}return j6(n,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,i,r)};var T3=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8};var q6=function(n,e){var t=e.level,i=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=i<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var r=A3();r.p(e.dictionary),T3(n,2,r.d())}},X6=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Ss(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&Ss(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function eg(n,e){e||(e={});var t=A3();t.p(n);var i=G6(n,e,e.dictionary?6:2,4);return q6(i,e),T3(i,i.length-4,t.d()),i}function k3(n,e){return H6(n.subarray(X6(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var Y6=typeof TextDecoder<"u"&&new TextDecoder,$6=0;try{Y6.decode(E3,{stream:!0}),$6=1}catch{}var ri=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function wy(){ri.console&&typeof ri.console.log=="function"&&ri.console.log.apply(ri.console,arguments)}var gn={log:wy,warn:function(n){ri.console&&(typeof ri.console.warn=="function"?ri.console.warn.apply(ri.console,arguments):wy.call(null,arguments))},error:function(n){ri.console&&(typeof ri.console.error=="function"?ri.console.error.apply(ri.console,arguments):wy(n))}};function Cy(n,e,t){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){Pc(i.response,e,t)},i.onerror=function(){gn.error("could not download file")},i.send()}function I3(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function ig(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Dp,ky,Pc=ri.saveAs||((typeof window>"u"?"undefined":(0,hn.default)(window))!=="object"||window!==ri?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var i=ri.URL||ri.webkitURL,r=document.createElement("a");e=e||n.name||"download",r.download=e,r.rel="noopener",typeof n=="string"?(r.href=n,r.origin!==location.origin?I3(r.href)?Cy(n,e,t):ig(r,r.target="_blank"):ig(r)):(r.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(r.href)},4e4),setTimeout(function(){ig(r)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(I3(n))Cy(n,e,t);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout(function(){ig(i)})}else navigator.msSaveOrOpenBlob(function(r,a){return a===void 0?a={autoBom:!1}:(0,hn.default)(a)!=="object"&&(gn.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}(n,t),e)}:function(n,e,t,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof n=="string")return Cy(n,e,t);var r=n.type==="application/octet-stream",a=/constructor/i.test(ri.HTMLElement)||ri.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||r&&a)&&(typeof FileReader>"u"?"undefined":(0,hn.default)(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var p=o.result;p=s?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=p:location=p,i=null},o.readAsDataURL(n)}else{var l=ri.URL||ri.webkitURL,u=l.createObjectURL(n);i?i.location=u:location.href=u,i=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});function X3(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],i=0;i<t.length;i++){var r=t[i].re,a=t[i].process,s=r.exec(n);s&&(e=a(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}function My(n,e){var t=n[0],i=n[1],r=n[2],a=n[3];t=jr(t,i,r,a,e[0],7,-680876936),a=jr(a,t,i,r,e[1],12,-389564586),r=jr(r,a,t,i,e[2],17,606105819),i=jr(i,r,a,t,e[3],22,-1044525330),t=jr(t,i,r,a,e[4],7,-176418897),a=jr(a,t,i,r,e[5],12,1200080426),r=jr(r,a,t,i,e[6],17,-1473231341),i=jr(i,r,a,t,e[7],22,-45705983),t=jr(t,i,r,a,e[8],7,1770035416),a=jr(a,t,i,r,e[9],12,-1958414417),r=jr(r,a,t,i,e[10],17,-42063),i=jr(i,r,a,t,e[11],22,-1990404162),t=jr(t,i,r,a,e[12],7,1804603682),a=jr(a,t,i,r,e[13],12,-40341101),r=jr(r,a,t,i,e[14],17,-1502002290),t=Gr(t,i=jr(i,r,a,t,e[15],22,1236535329),r,a,e[1],5,-165796510),a=Gr(a,t,i,r,e[6],9,-1069501632),r=Gr(r,a,t,i,e[11],14,643717713),i=Gr(i,r,a,t,e[0],20,-373897302),t=Gr(t,i,r,a,e[5],5,-701558691),a=Gr(a,t,i,r,e[10],9,38016083),r=Gr(r,a,t,i,e[15],14,-660478335),i=Gr(i,r,a,t,e[4],20,-405537848),t=Gr(t,i,r,a,e[9],5,568446438),a=Gr(a,t,i,r,e[14],9,-1019803690),r=Gr(r,a,t,i,e[3],14,-187363961),i=Gr(i,r,a,t,e[8],20,1163531501),t=Gr(t,i,r,a,e[13],5,-1444681467),a=Gr(a,t,i,r,e[2],9,-51403784),r=Gr(r,a,t,i,e[7],14,1735328473),t=qr(t,i=Gr(i,r,a,t,e[12],20,-1926607734),r,a,e[5],4,-378558),a=qr(a,t,i,r,e[8],11,-2022574463),r=qr(r,a,t,i,e[11],16,1839030562),i=qr(i,r,a,t,e[14],23,-35309556),t=qr(t,i,r,a,e[1],4,-1530992060),a=qr(a,t,i,r,e[4],11,1272893353),r=qr(r,a,t,i,e[7],16,-155497632),i=qr(i,r,a,t,e[10],23,-1094730640),t=qr(t,i,r,a,e[13],4,681279174),a=qr(a,t,i,r,e[0],11,-358537222),r=qr(r,a,t,i,e[3],16,-722521979),i=qr(i,r,a,t,e[6],23,76029189),t=qr(t,i,r,a,e[9],4,-640364487),a=qr(a,t,i,r,e[12],11,-421815835),r=qr(r,a,t,i,e[15],16,530742520),t=Xr(t,i=qr(i,r,a,t,e[2],23,-995338651),r,a,e[0],6,-198630844),a=Xr(a,t,i,r,e[7],10,1126891415),r=Xr(r,a,t,i,e[14],15,-1416354905),i=Xr(i,r,a,t,e[5],21,-57434055),t=Xr(t,i,r,a,e[12],6,1700485571),a=Xr(a,t,i,r,e[3],10,-1894986606),r=Xr(r,a,t,i,e[10],15,-1051523),i=Xr(i,r,a,t,e[1],21,-2054922799),t=Xr(t,i,r,a,e[8],6,1873313359),a=Xr(a,t,i,r,e[15],10,-30611744),r=Xr(r,a,t,i,e[6],15,-1560198380),i=Xr(i,r,a,t,e[13],21,1309151649),t=Xr(t,i,r,a,e[4],6,-145523070),a=Xr(a,t,i,r,e[11],10,-1120210379),r=Xr(r,a,t,i,e[2],15,718787259),i=Xr(i,r,a,t,e[9],21,-343485551),n[0]=Rl(t,n[0]),n[1]=Rl(i,n[1]),n[2]=Rl(r,n[2]),n[3]=Rl(a,n[3])}function hg(n,e,t,i,r,a){return e=Rl(Rl(e,n),Rl(i,a)),Rl(e<<r|e>>>32-r,t)}function jr(n,e,t,i,r,a,s){return hg(e&t|~e&i,n,e,r,a,s)}function Gr(n,e,t,i,r,a,s){return hg(e&i|t&~i,n,e,r,a,s)}function qr(n,e,t,i,r,a,s){return hg(e^t^i,n,e,r,a,s)}function Xr(n,e,t,i,r,a,s){return hg(t^(e|~i),n,e,r,a,s)}function Y3(n){var e,t=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)My(i,K6(n.substring(e-64,e)));n=n.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)r[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(My(i,r),e=0;e<16;e++)r[e]=0;return r[14]=8*t,My(i,r),i}function K6(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Dp=ri.atob.bind(ri),ky=ri.btoa.bind(ri);var D3="0123456789abcdef".split("");function Z6(n){for(var e="",t=0;t<4;t++)e+=D3[n>>8*t+4&15]+D3[n>>8*t&15];return e}function J6(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Iy(n){return Y3(n).map(J6).join("")}var Q6=function(n){for(var e=0;e<n.length;e++)n[e]=Z6(n[e]);return n.join("")}(Y3("hello"))!="5d41402abc4b2a76b9719d911017c592";function Rl(n,e){if(Q6){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function Dy(n,e){var t,i,r,a;if(n!==t){for(var s=(r=n,a=1+(256/n.length>>0),new Array(a+1).join(r)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var p=o[l];u=(u+p+s.charCodeAt(l))%256,o[l]=o[u],o[u]=p}t=n,i=o}else o=i;var f=e.length,g=0,m=0,x="";for(l=0;l<f;l++)m=(m+(p=o[g=(g+1)%256]))%256,o[g]=o[m],o[m]=p,s=o[(o[g]+o[m])%256],x+=String.fromCharCode(e.charCodeAt(l)^s);return x}var P3={print:4,modify:8,copy:16,"annot-forms":32};function mu(n,e,t,i){this.v=1,this.r=2;var r=192;n.forEach(function(o){if(P3.perm!==void 0)throw new Error("Invalid permission: "+o);r+=P3[o]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var a=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s),this.P=-(1+(255^r)),this.encryptionKey=Iy(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=Dy(this.encryptionKey,this.padding)}function gu(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,i=0;i<t;i++){var r=n.charCodeAt(i);r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?e+="#"+("0"+r.toString(16)).slice(-2):e+=n[i]}return e}function L3(n){if((0,hn.default)(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,i,r){if(r=r||!1,typeof t!="string"||typeof i!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[i,!!r],a},this.unsubscribe=function(t){for(var i in e)if(e[i][t])return delete e[i][t],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var a in e[t]){var s=e[t][a];try{s[0].apply(n,i)}catch(o){ri.console&&gn.error("jsPDF PubSub Error",o.message,o)}s[1]&&r.push(a)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function dg(n){if(!(this instanceof dg))return new dg(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function $3(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Lc(n,e,t,i,r){if(!(this instanceof Lc))return new Lc(n,e,t,i,r);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,$3.call(this,i,r)}function _u(n,e,t,i,r){if(!(this instanceof _u))return new _u(n,e,t,i,r);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,$3.call(this,i,r)}function ni(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],r=arguments[2],a=arguments[3],s=[],o=1,l=16,u="S",p=null;(0,hn.default)(n=n||{})==="object"&&(t=n.orientation,i=n.unit||i,r=n.format||r,a=n.compress||n.compressPdf||a,(p=n.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),o=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),u=n.defaultPathOperation||"S"),s=n.filters||(a===!0?["FlateEncode"]:s),i=i||"mm",t=(""+(t||"P")).toLowerCase();var f=n.putOnlyUsedFonts||!1,g={},m={internal:{},__private__:{}};m.__private__.PubSub=L3;var x="1.3",y=m.__private__.getPdfVersion=function(){return x};m.__private__.setPdfVersion=function(C){x=C};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return S};var b=m.__private__.getPageFormat=function(C){return S[C]};r=r||"a4";var M={COMPAT:"compat",ADVANCED:"advanced"},T=M.COMPAT;function I(){this.saveGraphicsState(),ut(new ze(Ut,0,0,-Ut,0,Ko()*Ut).toString()+" cm"),this.setFontSize(this.getFontSize()/Ut),u="n",T=M.ADVANCED}function O(){this.restoreGraphicsState(),u="S",T=M.COMPAT}var U=m.__private__.combineFontStyleAndFontWeight=function(C,j){if(C=="bold"&&j=="normal"||C=="bold"&&j==400||C=="normal"&&j=="italic"||C=="bold"&&j=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return j&&(C=j==400||j==="normal"?C==="italic"?"italic":"normal":j!=700&&j!=="bold"||C!=="normal"?(j==700?"bold":j)+""+C:"bold"),C};m.advancedAPI=function(C){var j=T===M.COMPAT;return j&&I.call(this),typeof C!="function"||(C(this),j&&O.call(this)),this},m.compatAPI=function(C){var j=T===M.ADVANCED;return j&&O.call(this),typeof C!="function"||(C(this),j&&I.call(this)),this},m.isAdvancedAPI=function(){return T===M.ADVANCED};var N,B=function(C){if(T!==M.ADVANCED)throw new Error(C+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=m.roundToPrecision=m.__private__.roundToPrecision=function(C,j){var ht=e||j;if(isNaN(C)||isNaN(ht))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return C.toFixed(ht).replace(/0+$/,"")};N=m.hpf=m.__private__.hpf=typeof l=="number"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return R(C,l)}:l==="smart"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return R(C,C>-1&&C<1?16:5)}:function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return R(C,16)};var F=m.f2=m.__private__.f2=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f2");return R(C,2)},P=m.__private__.f3=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f3");return R(C,3)},V=m.scale=m.__private__.scale=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.scale");return T===M.COMPAT?C*Ut:T===M.ADVANCED?C:void 0},$=function(C){return T===M.COMPAT?Ko()-C:T===M.ADVANCED?C:void 0},K=function(C){return V($(C))};m.__private__.setPrecision=m.setPrecision=function(C){typeof parseInt(C,10)=="number"&&(e=parseInt(C,10))};var ct,ot="00000000000000000000000000000000",at=m.__private__.getFileId=function(){return ot},Q=m.__private__.setFileId=function(C){return ot=C!==void 0&&/^[a-fA-F0-9]{32}$/.test(C)?C.toUpperCase():ot.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Fr=new mu(p.userPermissions,p.userPassword,p.ownerPassword,ot)),ot};m.setFileId=function(C){return Q(C),this},m.getFileId=function(){return at()};var xt=m.__private__.convertDateToPDFDate=function(C){var j=C.getTimezoneOffset(),ht=j<0?"+":"-",bt=Math.floor(Math.abs(j/60)),Ot=Math.abs(j%60),Jt=[ht,Z(bt),"'",Z(Ot),"'"].join("");return["D:",C.getFullYear(),Z(C.getMonth()+1),Z(C.getDate()),Z(C.getHours()),Z(C.getMinutes()),Z(C.getSeconds()),Jt].join("")},Mt=m.__private__.convertPDFDateToDate=function(C){var j=parseInt(C.substr(2,4),10),ht=parseInt(C.substr(6,2),10)-1,bt=parseInt(C.substr(8,2),10),Ot=parseInt(C.substr(10,2),10),Jt=parseInt(C.substr(12,2),10),me=parseInt(C.substr(14,2),10);return new Date(j,ht,bt,Ot,Jt,me,0)},qt=m.__private__.setCreationDate=function(C){var j;if(C===void 0&&(C=new Date),C instanceof Date)j=xt(C);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(C))throw new Error("Invalid argument passed to jsPDF.setCreationDate");j=C}return ct=j},z=m.__private__.getCreationDate=function(C){var j=ct;return C==="jsDate"&&(j=Mt(ct)),j};m.setCreationDate=function(C){return qt(C),this},m.getCreationDate=function(C){return z(C)};var nt,Z=m.__private__.padd2=function(C){return("0"+parseInt(C)).slice(-2)},st=m.__private__.padd2Hex=function(C){return("00"+(C=C.toString())).substr(C.length)},pt=0,ft=[],St=[],kt=0,Qt=[],ie=[],ue=!1,_e=St,mt=function(){pt=0,kt=0,St=[],ft=[],Qt=[],Va=Dn(),Or=Dn()};m.__private__.setCustomOutputDestination=function(C){ue=!0,_e=C};var Yt=function(C){ue||(_e=C)};m.__private__.resetCustomOutputDestination=function(){ue=!1,_e=St};var ut=m.__private__.out=function(C){return C=C.toString(),kt+=C.length+1,_e.push(C),_e},Ae=m.__private__.write=function(C){return ut(arguments.length===1?C.toString():Array.prototype.join.call(arguments," "))},se=m.__private__.getArrayBuffer=function(C){for(var j=C.length,ht=new ArrayBuffer(j),bt=new Uint8Array(ht);j--;)bt[j]=C.charCodeAt(j);return ht},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ee};var Zt=n.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(C){return Zt=T===M.ADVANCED?C/Ut:C,this};var tt,H=m.__private__.getFontSize=m.getFontSize=function(){return T===M.COMPAT?Zt:Zt*Ut},yt=n.R2L||!1;m.__private__.setR2L=m.setR2L=function(C){return yt=C,this},m.__private__.getR2L=m.getR2L=function(){return yt};var Ht,Xt=m.__private__.setZoomMode=function(C){var j=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(C))tt=C;else if(isNaN(C)){if(j.indexOf(C)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+C+'" is not recognized.');tt=C}else tt=parseInt(C,10)};m.__private__.getZoomMode=function(){return tt};var Wt,Se=m.__private__.setPageMode=function(C){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(C)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+C+'" is not recognized.');Ht=C};m.__private__.getPageMode=function(){return Ht};var ge=m.__private__.setLayoutMode=function(C){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(C)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+C+'" is not recognized.');Wt=C};m.__private__.getLayoutMode=function(){return Wt},m.__private__.setDisplayMode=m.setDisplayMode=function(C,j,ht){return Xt(C),ge(j),Se(ht),this};var ce={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(C){if(Object.keys(ce).indexOf(C)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ce[C]},m.__private__.getDocumentProperties=function(){return ce},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(C){for(var j in ce)ce.hasOwnProperty(j)&&C[j]&&(ce[j]=C[j]);return this},m.__private__.setDocumentProperty=function(C,j){if(Object.keys(ce).indexOf(C)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ce[C]=j};var Pe,Ut,Ce,we,je,ye={},He={},Ze=[],Ge={},It={},ve={},$t={},ne=null,be=0,ae=[],De=new L3(m),Xi=n.hotfixes||[],Ni={},bi={},Vn=[],ze=function C(j,ht,bt,Ot,Jt,me){if(!(this instanceof C))return new C(j,ht,bt,Ot,Jt,me);isNaN(j)&&(j=1),isNaN(ht)&&(ht=0),isNaN(bt)&&(bt=0),isNaN(Ot)&&(Ot=1),isNaN(Jt)&&(Jt=0),isNaN(me)&&(me=0),this._matrix=[j,ht,bt,Ot,Jt,me]};Object.defineProperty(ze.prototype,"sx",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(ze.prototype,"shy",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(ze.prototype,"shx",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(ze.prototype,"sy",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(ze.prototype,"tx",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(ze.prototype,"ty",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(ze.prototype,"a",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(ze.prototype,"b",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(ze.prototype,"c",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(ze.prototype,"d",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(ze.prototype,"e",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(ze.prototype,"f",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(ze.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ze.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ze.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ze.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ze.prototype.join=function(C){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(C)},ze.prototype.multiply=function(C){var j=C.sx*this.sx+C.shy*this.shx,ht=C.sx*this.shy+C.shy*this.sy,bt=C.shx*this.sx+C.sy*this.shx,Ot=C.shx*this.shy+C.sy*this.sy,Jt=C.tx*this.sx+C.ty*this.shx+this.tx,me=C.tx*this.shy+C.ty*this.sy+this.ty;return new ze(j,ht,bt,Ot,Jt,me)},ze.prototype.decompose=function(){var C=this.sx,j=this.shy,ht=this.shx,bt=this.sy,Ot=this.tx,Jt=this.ty,me=Math.sqrt(C*C+j*j),Le=(C/=me)*ht+(j/=me)*bt;ht-=C*Le,bt-=j*Le;var Ye=Math.sqrt(ht*ht+bt*bt);return Le/=Ye,C*(bt/=Ye)<j*(ht/=Ye)&&(C=-C,j=-j,Le=-Le,me=-me),{scale:new ze(me,0,0,Ye,0,0),translate:new ze(1,0,0,1,Ot,Jt),rotate:new ze(C,j,-j,C,0,0),skew:new ze(1,0,Le,1,0,0)}},ze.prototype.toString=function(C){return this.join(" ")},ze.prototype.inversed=function(){var C=this.sx,j=this.shy,ht=this.shx,bt=this.sy,Ot=this.tx,Jt=this.ty,me=1/(C*bt-j*ht),Le=bt*me,Ye=-j*me,pi=-ht*me,ui=C*me;return new ze(Le,Ye,pi,ui,-Le*Ot-pi*Jt,-Ye*Ot-ui*Jt)},ze.prototype.applyToPoint=function(C){var j=C.x*this.sx+C.y*this.shx+this.tx,ht=C.x*this.shy+C.y*this.sy+this.ty;return new ld(j,ht)},ze.prototype.applyToRectangle=function(C){var j=this.applyToPoint(C),ht=this.applyToPoint(new ld(C.x+C.w,C.y+C.h));return new Qu(j.x,j.y,ht.x-j.x,ht.y-j.y)},ze.prototype.clone=function(){var C=this.sx,j=this.shy,ht=this.shx,bt=this.sy,Ot=this.tx,Jt=this.ty;return new ze(C,j,ht,bt,Ot,Jt)},m.Matrix=ze;var la=m.matrixMult=function(C,j){return j.multiply(C)},wa=new ze(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=wa;var Un=function(C,j){if(!It[C]){var ht=(j instanceof Lc?"Sh":"P")+(Object.keys(Ge).length+1).toString(10);j.id=ht,It[C]=ht,Ge[ht]=j,De.publish("addPattern",j)}};m.ShadingPattern=Lc,m.TilingPattern=_u,m.addShadingPattern=function(C,j){return B("addShadingPattern()"),Un(C,j),this},m.beginTilingPattern=function(C){B("beginTilingPattern()"),Sf(C.boundingBox[0],C.boundingBox[1],C.boundingBox[2]-C.boundingBox[0],C.boundingBox[3]-C.boundingBox[1],C.matrix)},m.endTilingPattern=function(C,j){B("endTilingPattern()"),j.stream=ie[nt].join(`
`),Un(C,j),De.publish("endTilingPattern",j),Vn.pop().restore()};var In=m.__private__.newObject=function(){var C=Dn();return Rr(C,!0),C},Dn=m.__private__.newObjectDeferred=function(){return pt++,ft[pt]=function(){return kt},pt},Rr=function(C,j){return j=typeof j=="boolean"&&j,ft[C]=kt,j&&ut(C+" 0 obj"),C},ss=m.__private__.newAdditionalObject=function(){var C={objId:Dn(),content:""};return Qt.push(C),C},Va=Dn(),Or=Dn(),ca=m.__private__.decodeColorString=function(C){var j=C.split(" ");if(j.length!==2||j[1]!=="g"&&j[1]!=="G")j.length===5&&(j[4]==="k"||j[4]==="K")&&(j=[(1-j[0])*(1-j[3]),(1-j[1])*(1-j[3]),(1-j[2])*(1-j[3]),"r"]);else{var ht=parseFloat(j[0]);j=[ht,ht,ht,"r"]}for(var bt="#",Ot=0;Ot<3;Ot++)bt+=("0"+Math.floor(255*parseFloat(j[Ot])).toString(16)).slice(-2);return bt},da=m.__private__.encodeColorString=function(C){var j;typeof C=="string"&&(C={ch1:C});var ht=C.ch1,bt=C.ch2,Ot=C.ch3,Jt=C.ch4,me=C.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ht=="string"&&ht.charAt(0)!=="#"){var Le=new X3(ht);if(Le.ok)ht=Le.toHex();else if(!/^\d*\.?\d*$/.test(ht))throw new Error('Invalid color "'+ht+'" passed to jsPDF.encodeColorString.')}if(typeof ht=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ht)&&(ht="#"+ht[1]+ht[1]+ht[2]+ht[2]+ht[3]+ht[3]),typeof ht=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ht)){var Ye=parseInt(ht.substr(1),16);ht=Ye>>16&255,bt=Ye>>8&255,Ot=255&Ye}if(bt===void 0||Jt===void 0&&ht===bt&&bt===Ot)if(typeof ht=="string")j=ht+" "+me[0];else switch(C.precision){case 2:j=F(ht/255)+" "+me[0];break;case 3:default:j=P(ht/255)+" "+me[0]}else if(Jt===void 0||(0,hn.default)(Jt)==="object"){if(Jt&&!isNaN(Jt.a)&&Jt.a===0)return j=["1.","1.","1.",me[1]].join(" ");if(typeof ht=="string")j=[ht,bt,Ot,me[1]].join(" ");else switch(C.precision){case 2:j=[F(ht/255),F(bt/255),F(Ot/255),me[1]].join(" ");break;default:case 3:j=[P(ht/255),P(bt/255),P(Ot/255),me[1]].join(" ")}}else if(typeof ht=="string")j=[ht,bt,Ot,Jt,me[2]].join(" ");else switch(C.precision){case 2:j=[F(ht),F(bt),F(Ot),F(Jt),me[2]].join(" ");break;case 3:default:j=[P(ht),P(bt),P(Ot),P(Jt),me[2]].join(" ")}return j},Ua=m.__private__.getFilters=function(){return s},ua=m.__private__.putStream=function(C){var j=(C=C||{}).data||"",ht=C.filters||Ua(),bt=C.alreadyAppliedFilters||[],Ot=C.addLength1||!1,Jt=j.length,me=C.objectId,Le=function(Br){return Br};if(p!==null&&me===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Le=Fr.encryptor(me,0));var Ye={};ht===!0&&(ht=["FlateEncode"]);var pi=C.additionalKeyValues||[],ui=(Ye=ni.API.processDataByFilters!==void 0?ni.API.processDataByFilters(j,ht):{data:j,reverseChain:[]}).reverseChain+(Array.isArray(bt)?bt.join(" "):bt.toString());if(Ye.data.length!==0&&(pi.push({key:"Length",value:Ye.data.length}),Ot===!0&&pi.push({key:"Length1",value:Jt})),ui.length!=0)if(ui.split("/").length-1==1)pi.push({key:"Filter",value:ui});else{pi.push({key:"Filter",value:"["+ui+"]"});for(var Fi=0;Fi<pi.length;Fi+=1)if(pi[Fi].key==="DecodeParms"){for(var Pn=[],Hn=0;Hn<Ye.reverseChain.split("/").length-1;Hn+=1)Pn.push("null");Pn.push(pi[Fi].value),pi[Fi].value="["+Pn.join(" ")+"]"}}ut("<<");for(var ar=0;ar<pi.length;ar++)ut("/"+pi[ar].key+" "+pi[ar].value);ut(">>"),Ye.data.length!==0&&(ut("stream"),ut(Le(Ye.data)),ut("endstream"))},za=m.__private__.putPage=function(C){var j=C.number,ht=C.data,bt=C.objId,Ot=C.contentsObjId;Rr(bt,!0),ut("<</Type /Page"),ut("/Parent "+C.rootDictionaryObjId+" 0 R"),ut("/Resources "+C.resourceDictionaryObjId+" 0 R"),ut("/MediaBox ["+parseFloat(N(C.mediaBox.bottomLeftX))+" "+parseFloat(N(C.mediaBox.bottomLeftY))+" "+N(C.mediaBox.topRightX)+" "+N(C.mediaBox.topRightY)+"]"),C.cropBox!==null&&ut("/CropBox ["+N(C.cropBox.bottomLeftX)+" "+N(C.cropBox.bottomLeftY)+" "+N(C.cropBox.topRightX)+" "+N(C.cropBox.topRightY)+"]"),C.bleedBox!==null&&ut("/BleedBox ["+N(C.bleedBox.bottomLeftX)+" "+N(C.bleedBox.bottomLeftY)+" "+N(C.bleedBox.topRightX)+" "+N(C.bleedBox.topRightY)+"]"),C.trimBox!==null&&ut("/TrimBox ["+N(C.trimBox.bottomLeftX)+" "+N(C.trimBox.bottomLeftY)+" "+N(C.trimBox.topRightX)+" "+N(C.trimBox.topRightY)+"]"),C.artBox!==null&&ut("/ArtBox ["+N(C.artBox.bottomLeftX)+" "+N(C.artBox.bottomLeftY)+" "+N(C.artBox.topRightX)+" "+N(C.artBox.topRightY)+"]"),typeof C.userUnit=="number"&&C.userUnit!==1&&ut("/UserUnit "+C.userUnit),De.publish("putPage",{objId:bt,pageContext:ae[j],pageNumber:j,page:ht}),ut("/Contents "+Ot+" 0 R"),ut(">>"),ut("endobj");var Jt=ht.join(`
`);return T===M.ADVANCED&&(Jt+=`
Q`),Rr(Ot,!0),ua({data:Jt,filters:Ua(),objectId:Ot}),ut("endobj"),bt},ro=m.__private__.putPages=function(){var C,j,ht=[];for(C=1;C<=be;C++)ae[C].objId=Dn(),ae[C].contentsObjId=Dn();for(C=1;C<=be;C++)ht.push(za({number:C,data:ie[C],objId:ae[C].objId,contentsObjId:ae[C].contentsObjId,mediaBox:ae[C].mediaBox,cropBox:ae[C].cropBox,bleedBox:ae[C].bleedBox,trimBox:ae[C].trimBox,artBox:ae[C].artBox,userUnit:ae[C].userUnit,rootDictionaryObjId:Va,resourceDictionaryObjId:Or}));Rr(Va,!0),ut("<</Type /Pages");var bt="/Kids [";for(j=0;j<be;j++)bt+=ht[j]+" 0 R ";ut(bt+"]"),ut("/Count "+be),ut(">>"),ut("endobj"),De.publish("postPutPages")},qo=function(C){De.publish("putFont",{font:C,out:ut,newObject:In,putStream:ua}),C.isAlreadyPutted!==!0&&(C.objectNumber=In(),ut("<<"),ut("/Type /Font"),ut("/BaseFont /"+gu(C.postScriptName)),ut("/Subtype /Type1"),typeof C.encoding=="string"&&ut("/Encoding /"+C.encoding),ut("/FirstChar 32"),ut("/LastChar 255"),ut(">>"),ut("endobj"))},et=function(){for(var C in ye)ye.hasOwnProperty(C)&&(f===!1||f===!0&&g.hasOwnProperty(C))&&qo(ye[C])},Dt=function(C){C.objectNumber=In();var j=[];j.push({key:"Type",value:"/XObject"}),j.push({key:"Subtype",value:"/Form"}),j.push({key:"BBox",value:"["+[N(C.x),N(C.y),N(C.x+C.width),N(C.y+C.height)].join(" ")+"]"}),j.push({key:"Matrix",value:"["+C.matrix.toString()+"]"});var ht=C.pages[1].join(`
`);ua({data:ht,additionalKeyValues:j,objectId:C.objectNumber}),ut("endobj")},jt=function(){for(var C in Ni)Ni.hasOwnProperty(C)&&Dt(Ni[C])},Gt=function(C,j){var ht,bt=[],Ot=1/(j-1);for(ht=0;ht<1;ht+=Ot)bt.push(ht);if(bt.push(1),C[0].offset!=0){var Jt={offset:0,color:C[0].color};C.unshift(Jt)}if(C[C.length-1].offset!=1){var me={offset:1,color:C[C.length-1].color};C.push(me)}for(var Le="",Ye=0,pi=0;pi<bt.length;pi++){for(ht=bt[pi];ht>C[Ye+1].offset;)Ye++;var ui=C[Ye].offset,Fi=(ht-ui)/(C[Ye+1].offset-ui),Pn=C[Ye].color,Hn=C[Ye+1].color;Le+=st(Math.round((1-Fi)*Pn[0]+Fi*Hn[0]).toString(16))+st(Math.round((1-Fi)*Pn[1]+Fi*Hn[1]).toString(16))+st(Math.round((1-Fi)*Pn[2]+Fi*Hn[2]).toString(16))}return Le.trim()},Rt=function(C,j){j||(j=21);var ht=In(),bt=Gt(C.colors,j),Ot=[];Ot.push({key:"FunctionType",value:"0"}),Ot.push({key:"Domain",value:"[0.0 1.0]"}),Ot.push({key:"Size",value:"["+j+"]"}),Ot.push({key:"BitsPerSample",value:"8"}),Ot.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ot.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ua({data:bt,additionalKeyValues:Ot,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ht}),ut("endobj"),C.objectNumber=In(),ut("<< /ShadingType "+C.type),ut("/ColorSpace /DeviceRGB");var Jt="/Coords ["+N(parseFloat(C.coords[0]))+" "+N(parseFloat(C.coords[1]))+" ";C.type===2?Jt+=N(parseFloat(C.coords[2]))+" "+N(parseFloat(C.coords[3])):Jt+=N(parseFloat(C.coords[2]))+" "+N(parseFloat(C.coords[3]))+" "+N(parseFloat(C.coords[4]))+" "+N(parseFloat(C.coords[5])),ut(Jt+="]"),C.matrix&&ut("/Matrix ["+C.matrix.toString()+"]"),ut("/Function "+ht+" 0 R"),ut("/Extend [true true]"),ut(">>"),ut("endobj")},xe=function(C,j){var ht=Dn(),bt=In();j.push({resourcesOid:ht,objectOid:bt}),C.objectNumber=bt;var Ot=[];Ot.push({key:"Type",value:"/Pattern"}),Ot.push({key:"PatternType",value:"1"}),Ot.push({key:"PaintType",value:"1"}),Ot.push({key:"TilingType",value:"1"}),Ot.push({key:"BBox",value:"["+C.boundingBox.map(N).join(" ")+"]"}),Ot.push({key:"XStep",value:N(C.xStep)}),Ot.push({key:"YStep",value:N(C.yStep)}),Ot.push({key:"Resources",value:ht+" 0 R"}),C.matrix&&Ot.push({key:"Matrix",value:"["+C.matrix.toString()+"]"}),ua({data:C.stream,additionalKeyValues:Ot,objectId:C.objectNumber}),ut("endobj")},Me=function(C){var j;for(j in Ge)Ge.hasOwnProperty(j)&&(Ge[j]instanceof Lc?Rt(Ge[j]):Ge[j]instanceof _u&&xe(Ge[j],C))},Re=function(C){for(var j in C.objectNumber=In(),ut("<<"),C)switch(j){case"opacity":ut("/ca "+F(C[j]));break;case"stroke-opacity":ut("/CA "+F(C[j]))}ut(">>"),ut("endobj")},Fe=function(){var C;for(C in ve)ve.hasOwnProperty(C)&&Re(ve[C])},Je=function(){for(var C in ut("/XObject <<"),Ni)Ni.hasOwnProperty(C)&&Ni[C].objectNumber>=0&&ut("/"+C+" "+Ni[C].objectNumber+" 0 R");De.publish("putXobjectDict"),ut(">>")},ai=function(){Fr.oid=In(),ut("<<"),ut("/Filter /Standard"),ut("/V "+Fr.v),ut("/R "+Fr.r),ut("/U <"+Fr.toHexString(Fr.U)+">"),ut("/O <"+Fr.toHexString(Fr.O)+">"),ut("/P "+Fr.P),ut(">>"),ut("endobj")},qe=function(){for(var C in ut("/Font <<"),ye)ye.hasOwnProperty(C)&&(f===!1||f===!0&&g.hasOwnProperty(C))&&ut("/"+C+" "+ye[C].objectNumber+" 0 R");ut(">>")},Ei=function(){if(Object.keys(Ge).length>0){for(var C in ut("/Shading <<"),Ge)Ge.hasOwnProperty(C)&&Ge[C]instanceof Lc&&Ge[C].objectNumber>=0&&ut("/"+C+" "+Ge[C].objectNumber+" 0 R");De.publish("putShadingPatternDict"),ut(">>")}},Ai=function(C){if(Object.keys(Ge).length>0){for(var j in ut("/Pattern <<"),Ge)Ge.hasOwnProperty(j)&&Ge[j]instanceof m.TilingPattern&&Ge[j].objectNumber>=0&&Ge[j].objectNumber<C&&ut("/"+j+" "+Ge[j].objectNumber+" 0 R");De.publish("putTilingPatternDict"),ut(">>")}},Mn=function(){if(Object.keys(ve).length>0){var C;for(C in ut("/ExtGState <<"),ve)ve.hasOwnProperty(C)&&ve[C].objectNumber>=0&&ut("/"+C+" "+ve[C].objectNumber+" 0 R");De.publish("putGStateDict"),ut(">>")}},di=function(C){Rr(C.resourcesOid,!0),ut("<<"),ut("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),qe(),Ei(),Ai(C.objectOid),Mn(),Je(),ut(">>"),ut("endobj")},Ti=function(){var C=[];et(),Fe(),jt(),Me(C),De.publish("putResources"),C.forEach(di),di({resourcesOid:Or,objectOid:Number.MAX_SAFE_INTEGER}),De.publish("postPutResources")},Xe=function(){De.publish("putAdditionalObjects");for(var C=0;C<Qt.length;C++){var j=Qt[C];Rr(j.objId,!0),ut(j.content),ut("endobj")}De.publish("postPutAdditionalObjects")},zn=function(C){He[C.fontName]=He[C.fontName]||{},He[C.fontName][C.fontStyle]=C.id},Di=function(C,j,ht,bt,Ot){var Jt={id:"F"+(Object.keys(ye).length+1).toString(10),postScriptName:C,fontName:j,fontStyle:ht,encoding:bt,isStandardFont:Ot||!1,metadata:{}};return De.publish("addFont",{font:Jt,instance:this}),ye[Jt.id]=Jt,zn(Jt),Jt.id},Jr=function(C){for(var j=0,ht=ee.length;j<ht;j++){var bt=Di.call(this,C[j][0],C[j][1],C[j][2],ee[j][3],!0);f===!1&&(g[bt]=!0);var Ot=C[j][0].split("-");zn({id:bt,fontName:Ot[0],fontStyle:Ot[1]||""})}De.publish("addFonts",{fonts:ye,dictionary:He})},xr=function(C){return C.foo=function(){try{return C.apply(this,arguments)}catch(bt){var j=bt.stack||"";~j.indexOf(" at ")&&(j=j.split(" at ")[1]);var ht="Error in function "+j.split(`
`)[0].split("<")[0]+": "+bt.message;if(!ri.console)throw new Error(ht);ri.console.error(ht,bt),ri.alert&&alert(ht)}},C.foo.bar=C,C.foo},ir=function(C,j){var ht,bt,Ot,Jt,me,Le,Ye,pi,ui;if(Ot=(j=j||{}).sourceEncoding||"Unicode",me=j.outputEncoding,(j.autoencode||me)&&ye[Pe].metadata&&ye[Pe].metadata[Ot]&&ye[Pe].metadata[Ot].encoding&&(Jt=ye[Pe].metadata[Ot].encoding,!me&&ye[Pe].encoding&&(me=ye[Pe].encoding),!me&&Jt.codePages&&(me=Jt.codePages[0]),typeof me=="string"&&(me=Jt[me]),me)){for(Ye=!1,Le=[],ht=0,bt=C.length;ht<bt;ht++)(pi=me[C.charCodeAt(ht)])?Le.push(String.fromCharCode(pi)):Le.push(C[ht]),Le[ht].charCodeAt(0)>>8&&(Ye=!0);C=Le.join("")}for(ht=C.length;Ye===void 0&&ht!==0;)C.charCodeAt(ht-1)>>8&&(Ye=!0),ht--;if(!Ye)return C;for(Le=j.noBOM?[]:[254,255],ht=0,bt=C.length;ht<bt;ht++){if((ui=(pi=C.charCodeAt(ht))>>8)>>8)throw new Error("Character at position "+ht+" of string '"+C+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Le.push(ui),Le.push(pi-(ui<<8))}return String.fromCharCode.apply(void 0,Le)},nr=m.__private__.pdfEscape=m.pdfEscape=function(C,j){return ir(C,j).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Yi=m.__private__.beginPage=function(C){ie[++be]=[],ae[be]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(C[0]),topRightY:Number(C[1])}},rr(be),Yt(ie[nt])},Er=function(C,j){var ht,bt,Ot;switch(t=j||t,typeof C=="string"&&(ht=b(C.toLowerCase()),Array.isArray(ht)&&(bt=ht[0],Ot=ht[1])),Array.isArray(C)&&(bt=C[0]*Ut,Ot=C[1]*Ut),isNaN(bt)&&(bt=r[0],Ot=r[1]),(bt>14400||Ot>14400)&&(gn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),bt=Math.min(14400,bt),Ot=Math.min(14400,Ot)),r=[bt,Ot],t.substr(0,1)){case"l":Ot>bt&&(r=[Ot,bt]);break;case"p":bt>Ot&&(r=[Ot,bt])}Yi(r),_f($u),ut(ls),Zu!==0&&ut(Zu+" J"),Ju!==0&&ut(Ju+" j"),De.publish("addPage",{pageNumber:be})},Nr=function(C){C>0&&C<=be&&(ie.splice(C,1),ae.splice(C,1),be--,nt>be&&(nt=be),this.setPage(nt))},rr=function(C){C>0&&C<=be&&(nt=C)},br=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return ie.length-1},Xo=function(C,j,ht){var bt,Ot=void 0;return ht=ht||{},C=C!==void 0?C:ye[Pe].fontName,j=j!==void 0?j:ye[Pe].fontStyle,bt=C.toLowerCase(),He[bt]!==void 0&&He[bt][j]!==void 0?Ot=He[bt][j]:He[C]!==void 0&&He[C][j]!==void 0?Ot=He[C][j]:ht.disableWarning===!1&&gn.warn("Unable to look up font label for font '"+C+"', '"+j+"'. Refer to getFontList() for available fonts."),Ot||ht.noFallback||(Ot=He.times[j])==null&&(Ot=He.times.normal),Ot},os=m.__private__.putInfo=function(){var C=In(),j=function(bt){return bt};for(var ht in p!==null&&(j=Fr.encryptor(C,0)),ut("<<"),ut("/Producer ("+nr(j("jsPDF "+ni.version))+")"),ce)ce.hasOwnProperty(ht)&&ce[ht]&&ut("/"+ht.substr(0,1).toUpperCase()+ht.substr(1)+" ("+nr(j(ce[ht]))+")");ut("/CreationDate ("+nr(j(ct))+")"),ut(">>"),ut("endobj")},qu=m.__private__.putCatalog=function(C){var j=(C=C||{}).rootDictionaryObjId||Va;switch(In(),ut("<<"),ut("/Type /Catalog"),ut("/Pages "+j+" 0 R"),tt||(tt="fullwidth"),tt){case"fullwidth":ut("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ut("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ut("/OpenAction [3 0 R /Fit]");break;case"original":ut("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ht=""+tt;ht.substr(ht.length-1)==="%"&&(tt=parseInt(tt)/100),typeof tt=="number"&&ut("/OpenAction [3 0 R /XYZ null null "+F(tt)+"]")}switch(Wt||(Wt="continuous"),Wt){case"continuous":ut("/PageLayout /OneColumn");break;case"single":ut("/PageLayout /SinglePage");break;case"two":case"twoleft":ut("/PageLayout /TwoColumnLeft");break;case"tworight":ut("/PageLayout /TwoColumnRight")}Ht&&ut("/PageMode /"+Ht),De.publish("putCatalog"),ut(">>"),ut("endobj")},k1=m.__private__.putTrailer=function(){ut("trailer"),ut("<<"),ut("/Size "+(pt+1)),ut("/Root "+pt+" 0 R"),ut("/Info "+(pt-1)+" 0 R"),p!==null&&ut("/Encrypt "+Fr.oid+" 0 R"),ut("/ID [ <"+ot+"> <"+ot+"> ]"),ut(">>")},I1=m.__private__.putHeader=function(){ut("%PDF-"+x),ut("%\xBA\xDF\xAC\xE0")},D1=m.__private__.putXRef=function(){var C="0000000000";ut("xref"),ut("0 "+(pt+1)),ut("0000000000 65535 f ");for(var j=1;j<=pt;j++)typeof ft[j]=="function"?ut((C+ft[j]()).slice(-10)+" 00000 n "):ft[j]!==void 0?ut((C+ft[j]).slice(-10)+" 00000 n "):ut("0000000000 00000 n ")},ao=m.__private__.buildDocument=function(){mt(),Yt(St),De.publish("buildDocument"),I1(),ro(),Xe(),Ti(),p!==null&&ai(),os(),qu();var C=kt;return D1(),k1(),ut("startxref"),ut(""+C),ut("%%EOF"),Yt(ie[nt]),St.join(`
`)},nd=m.__private__.getBlob=function(C){return new Blob([se(C)],{type:"application/pdf"})},rd=m.output=m.__private__.output=xr(function(C,j){switch(typeof(j=j||{})=="string"?j={filename:j}:j.filename=j.filename||"generated.pdf",C){case void 0:return ao();case"save":m.save(j.filename);break;case"arraybuffer":return se(ao());case"blob":return nd(ao());case"bloburi":case"bloburl":if(ri.URL!==void 0&&typeof ri.URL.createObjectURL=="function")return ri.URL&&ri.URL.createObjectURL(nd(ao()))||void 0;gn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ht="",bt=ao();try{ht=ky(bt)}catch{ht=ky(unescape(encodeURIComponent(bt)))}return"data:application/pdf;filename="+j.filename+";base64,"+ht;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ri)==="[object Window]"){var Ot="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Jt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';j.pdfObjectUrl&&(Ot=j.pdfObjectUrl,Jt="");var me='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ot+'"'+Jt+'></script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(j)+");</script></body></html>",Le=ri.open();return Le!==null&&Le.document.write(me),Le}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ri)==="[object Window]"){var Ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(j.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+j.filename+'" width="500px" height="400px" /></body></html>',pi=ri.open();if(pi!==null){pi.document.write(Ye);var ui=this;pi.document.documentElement.querySelector("#pdfViewer").onload=function(){pi.document.title=j.filename,pi.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ui.output("bloburl"))}}return pi}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ri)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Fi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",j)+'"></iframe></body></html>',Pn=ri.open();if(Pn!==null&&(Pn.document.write(Fi),Pn.document.title=j.filename),Pn||typeof safari>"u")return Pn;break;case"datauri":case"dataurl":return ri.document.location.href=this.output("datauristring",j);default:return null}}),pf=function(C){return Array.isArray(Xi)===!0&&Xi.indexOf(C)>-1};switch(i){case"pt":Ut=1;break;case"mm":Ut=72/25.4;break;case"cm":Ut=72/2.54;break;case"in":Ut=72;break;case"px":Ut=pf("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ut=12;break;case"ex":Ut=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Ut=i}var Fr=null;qt(),Q();var P1=function(C){return p!==null?Fr.encryptor(C,0):function(j){return j}},ff=m.__private__.getPageInfo=m.getPageInfo=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ae[C].objId,pageNumber:C,pageContext:ae[C]}},li=m.__private__.getPageInfoByObjId=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var j in ae)if(ae[j].objId===C)break;return ff(j)},L1=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:ae[nt].objId,pageNumber:nt,pageContext:ae[nt]}};m.addPage=function(){return Er.apply(this,arguments),this},m.setPage=function(){return rr.apply(this,arguments),Yt.call(this,ie[nt]),this},m.insertPage=function(C){return this.addPage(),this.movePage(nt,C),this},m.movePage=function(C,j){var ht,bt;if(C>j){ht=ie[C],bt=ae[C];for(var Ot=C;Ot>j;Ot--)ie[Ot]=ie[Ot-1],ae[Ot]=ae[Ot-1];ie[j]=ht,ae[j]=bt,this.setPage(j)}else if(C<j){ht=ie[C],bt=ae[C];for(var Jt=C;Jt<j;Jt++)ie[Jt]=ie[Jt+1],ae[Jt]=ae[Jt+1];ie[j]=ht,ae[j]=bt,this.setPage(j)}return this},m.deletePage=function(){return Nr.apply(this,arguments),this},m.__private__.text=m.text=function(C,j,ht,bt,Ot){var Jt,me,Le,Ye,pi,ui,Fi,Pn,Hn,ar=(bt=bt||{}).scope||this;if(typeof C=="number"&&typeof j=="number"&&(typeof ht=="string"||Array.isArray(ht))){var Br=ht;ht=j,j=C,C=Br}if(arguments[3]instanceof ze?(B("The transform parameter of text() with a Matrix value"),Hn=Ot):(Le=arguments[4],Ye=arguments[5],(0,hn.default)(Fi=arguments[3])==="object"&&Fi!==null||(typeof Le=="string"&&(Ye=Le,Le=null),typeof Fi=="string"&&(Ye=Fi,Fi=null),typeof Fi=="number"&&(Le=Fi,Fi=null),bt={flags:Fi,angle:Le,align:Ye})),isNaN(j)||isNaN(ht)||C==null)throw new Error("Invalid arguments passed to jsPDF.text");if(C.length===0)return ar;var yr="",cs=!1,Ca=typeof bt.lineHeightFactor=="number"?bt.lineHeightFactor:ic,Ls=ar.internal.scaleFactor;function wf(_n){return _n=_n.split("	").join(Array(bt.TabLen||9).join(" ")),nr(_n,Fi)}function nh(_n){for(var vn,$n=_n.concat(),pr=[],uo=$n.length;uo--;)typeof(vn=$n.shift())=="string"?pr.push(vn):Array.isArray(_n)&&(vn.length===1||vn[1]===void 0&&vn[2]===void 0)?pr.push(vn[0]):pr.push([vn[0],vn[1],vn[2]]);return pr}function rh(_n,vn){var $n;if(typeof _n=="string")$n=vn(_n)[0];else if(Array.isArray(_n)){for(var pr,uo,hh=_n.concat(),xd=[],Tf=hh.length;Tf--;)typeof(pr=hh.shift())=="string"?xd.push(vn(pr)[0]):Array.isArray(pr)&&typeof pr[0]=="string"&&(uo=vn(pr[0],pr[1],pr[2]),xd.push([uo[0],uo[1],uo[2]]));$n=xd}return $n}var dd=!1,ah=!0;if(typeof C=="string")dd=!0;else if(Array.isArray(C)){var sh=C.concat();me=[];for(var ud,Ar=sh.length;Ar--;)(typeof(ud=sh.shift())!="string"||Array.isArray(ud)&&typeof ud[0]!="string")&&(ah=!1);dd=ah}if(dd===!1)throw new Error('Type of text must be string or Array. "'+C+'" is not recognized.');typeof C=="string"&&(C=C.match(/[\r?\n]/)?C.split(/\r\n|\r|\n/g):[C]);var hd=Zt/ar.internal.scaleFactor,pd=hd*(Ca-1);switch(bt.baseline){case"bottom":ht-=pd;break;case"top":ht+=hd-pd;break;case"hanging":ht+=hd-2*pd;break;case"middle":ht+=hd/2-pd}if((ui=bt.maxWidth||0)>0&&(typeof C=="string"?C=ar.splitTextToSize(C,ui):Object.prototype.toString.call(C)==="[object Array]"&&(C=C.reduce(function(_n,vn){return _n.concat(ar.splitTextToSize(vn,ui))},[]))),Jt={text:C,x:j,y:ht,options:bt,mutex:{pdfEscape:nr,activeFontKey:Pe,fonts:ye,activeFontSize:Zt}},De.publish("preProcessText",Jt),C=Jt.text,Le=(bt=Jt.options).angle,!(Hn instanceof ze)&&Le&&typeof Le=="number"){Le*=Math.PI/180,bt.rotationDirection===0&&(Le=-Le),T===M.ADVANCED&&(Le=-Le);var fd=Math.cos(Le),oh=Math.sin(Le);Hn=new ze(fd,oh,-oh,fd,0,0)}else Le&&Le instanceof ze&&(Hn=Le);T!==M.ADVANCED||Hn||(Hn=wa),(pi=bt.charSpace||od)!==void 0&&(yr+=N(V(pi))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Pn=bt.horizontalScale)!==void 0&&(yr+=N(100*Pn)+` Tz
`),bt.lang;var ha=-1,W1=bt.renderingMode!==void 0?bt.renderingMode:bt.stroke,lh=ar.internal.getCurrentPageInfo().pageContext;switch(W1){case 0:case!1:case"fill":ha=0;break;case 1:case!0:case"stroke":ha=1;break;case 2:case"fillThenStroke":ha=2;break;case 3:case"invisible":ha=3;break;case 4:case"fillAndAddForClipping":ha=4;break;case 5:case"strokeAndAddPathForClipping":ha=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ha=6;break;case 7:case"addToPathForClipping":ha=7}var Cf=lh.usedRenderingMode!==void 0?lh.usedRenderingMode:-1;ha!==-1?yr+=ha+` Tr
`:Cf!==-1&&(yr+=`0 Tr
`),ha!==-1&&(lh.usedRenderingMode=ha),Ye=bt.align||"left";var Ha,md=Zt*Ca,Mf=ar.internal.pageSize.getWidth(),Ef=ye[Pe];pi=bt.charSpace||od,ui=bt.maxWidth||0,Fi=Object.assign({autoencode:!0,noBOM:!0},bt.flags);var Zo=[],ac=function(_n){return ar.getStringUnitWidth(_n,{font:Ef,charSpace:pi,fontSize:Zt,doKerning:!1})*Zt/Ls};if(Object.prototype.toString.call(C)==="[object Array]"){var pa;me=nh(C),Ye!=="left"&&(Ha=me.map(ac));var Qr,Jo=0;if(Ye==="right"){j-=Ha[0],C=[],Ar=me.length;for(var oo=0;oo<Ar;oo++)oo===0?(Qr=Ps(j),pa=so(ht)):(Qr=V(Jo-Ha[oo]),pa=-md),C.push([me[oo],Qr,pa]),Jo=Ha[oo]}else if(Ye==="center"){j-=Ha[0]/2,C=[],Ar=me.length;for(var lo=0;lo<Ar;lo++)lo===0?(Qr=Ps(j),pa=so(ht)):(Qr=V((Jo-Ha[lo])/2),pa=-md),C.push([me[lo],Qr,pa]),Jo=Ha[lo]}else if(Ye==="left"){C=[],Ar=me.length;for(var gd=0;gd<Ar;gd++)C.push(me[gd])}else if(Ye==="justify"&&Ef.encoding==="Identity-H"){C=[],Ar=me.length,ui=ui!==0?ui:Mf;for(var co=0,Yn=0;Yn<Ar;Yn++)if(pa=Yn===0?so(ht):-md,Qr=Yn===0?Ps(j):co,Yn<Ar-1){var ch=V((ui-Ha[Yn])/(me[Yn].split(" ").length-1)),ta=me[Yn].split(" ");C.push([ta[0]+" ",Qr,pa]),co=0;for(var Wa=1;Wa<ta.length;Wa++){var _d=(ac(ta[Wa-1]+" "+ta[Wa])-ac(ta[Wa]))*Ls+ch;Wa==ta.length-1?C.push([ta[Wa],_d,0]):C.push([ta[Wa]+" ",_d,0]),co-=_d}}else C.push([me[Yn],Qr,pa]);C.push(["",co,0])}else{if(Ye!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(C=[],Ar=me.length,ui=ui!==0?ui:Mf,Yn=0;Yn<Ar;Yn++)pa=Yn===0?so(ht):-md,Qr=Yn===0?Ps(j):0,Yn<Ar-1?Zo.push(N(V((ui-Ha[Yn])/(me[Yn].split(" ").length-1)))):Zo.push(0),C.push([me[Yn],Qr,pa])}}var Af=typeof bt.R2L=="boolean"?bt.R2L:yt;Af===!0&&(C=rh(C,function(_n,vn,$n){return[_n.split("").reverse().join(""),vn,$n]})),Jt={text:C,x:j,y:ht,options:bt,mutex:{pdfEscape:nr,activeFontKey:Pe,fonts:ye,activeFontSize:Zt}},De.publish("postProcessText",Jt),C=Jt.text,cs=Jt.mutex.isHex||!1;var dh=ye[Pe].encoding;dh!=="WinAnsiEncoding"&&dh!=="StandardEncoding"||(C=rh(C,function(_n,vn,$n){return[wf(_n),vn,$n]})),me=nh(C),C=[];for(var sc,oc,Qo,lc=0,vd=1,cc=Array.isArray(me[0])?vd:lc,tl="",uh=function(_n,vn,$n){var pr="";return $n instanceof ze?($n=typeof bt.angle=="number"?la($n,new ze(1,0,0,1,_n,vn)):la(new ze(1,0,0,1,_n,vn),$n),T===M.ADVANCED&&($n=la(new ze(1,0,0,-1,0,0),$n)),pr=$n.join(" ")+` Tm
`):pr=N(_n)+" "+N(vn)+` Td
`,pr},ja=0;ja<me.length;ja++){switch(tl="",cc){case vd:Qo=(cs?"<":"(")+me[ja][0]+(cs?">":")"),sc=parseFloat(me[ja][1]),oc=parseFloat(me[ja][2]);break;case lc:Qo=(cs?"<":"(")+me[ja]+(cs?">":")"),sc=Ps(j),oc=so(ht)}Zo!==void 0&&Zo[ja]!==void 0&&(tl=Zo[ja]+` Tw
`),ja===0?C.push(tl+uh(sc,oc,Hn)+Qo):cc===lc?C.push(tl+Qo):cc===vd&&C.push(tl+uh(sc,oc,Hn)+Qo)}C=cc===lc?C.join(` Tj
T* `):C.join(` Tj
`),C+=` Tj
`;var Ga=`BT
/`;return Ga+=Pe+" "+Zt+` Tf
`,Ga+=N(Zt*Ca)+` TL
`,Ga+=nc+`
`,Ga+=yr,Ga+=C,ut(Ga+="ET"),g[Pe]=!0,ar};var R1=m.__private__.clip=m.clip=function(C){return ut(C==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return R1("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ut("n"),this};var Ds=m.__private__.isValidStyle=function(C){var j=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(C)!==-1&&(j=!0),j};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(C){return Ds(C)&&(u=C),this};var mf=m.__private__.getStyle=m.getStyle=function(C){var j=u;switch(C){case"D":case"S":j="S";break;case"F":j="f";break;case"FD":case"DF":j="B";break;case"f":case"f*":case"B":case"B*":j=C}return j},gf=m.close=function(){return ut("h"),this};m.stroke=function(){return ut("S"),this},m.fill=function(C){return ad("f",C),this},m.fillEvenOdd=function(C){return ad("f*",C),this},m.fillStroke=function(C){return ad("B",C),this},m.fillStrokeEvenOdd=function(C){return ad("B*",C),this};var ad=function(C,j){(0,hn.default)(j)==="object"?N1(j,C):ut(C)},Xu=function(C){C===null||T===M.ADVANCED&&C===void 0||(C=mf(C),ut(C))};function O1(C,j,ht,bt,Ot){var Jt=new _u(j||this.boundingBox,ht||this.xStep,bt||this.yStep,this.gState,Ot||this.matrix);Jt.stream=this.stream;var me=C+"$$"+this.cloneIndex+++"$$";return Un(me,Jt),Jt}var N1=function(C,j){var ht=It[C.key],bt=Ge[ht];if(bt instanceof Lc)ut("q"),ut(F1(j)),bt.gState&&m.setGState(bt.gState),ut(C.matrix.toString()+" cm"),ut("/"+ht+" sh"),ut("Q");else if(bt instanceof _u){var Ot=new ze(1,0,0,-1,0,Ko());C.matrix&&(Ot=Ot.multiply(C.matrix||wa),ht=O1.call(bt,C.key,C.boundingBox,C.xStep,C.yStep,Ot).id),ut("q"),ut("/Pattern cs"),ut("/"+ht+" scn"),bt.gState&&m.setGState(bt.gState),ut(j),ut("Q")}},F1=function(C){switch(C){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Yu=m.moveTo=function(C,j){return ut(N(V(C))+" "+N(K(j))+" m"),this},ec=m.lineTo=function(C,j){return ut(N(V(C))+" "+N(K(j))+" l"),this},Yo=m.curveTo=function(C,j,ht,bt,Ot,Jt){return ut([N(V(C)),N(K(j)),N(V(ht)),N(K(bt)),N(V(Ot)),N(K(Jt)),"c"].join(" ")),this};m.__private__.line=m.line=function(C,j,ht,bt,Ot){if(isNaN(C)||isNaN(j)||isNaN(ht)||isNaN(bt)||!Ds(Ot))throw new Error("Invalid arguments passed to jsPDF.line");return T===M.COMPAT?this.lines([[ht-C,bt-j]],C,j,[1,1],Ot||"S"):this.lines([[ht-C,bt-j]],C,j,[1,1]).stroke()},m.__private__.lines=m.lines=function(C,j,ht,bt,Ot,Jt){var me,Le,Ye,pi,ui,Fi,Pn,Hn,ar,Br,yr,cs;if(typeof C=="number"&&(cs=ht,ht=j,j=C,C=cs),bt=bt||[1,1],Jt=Jt||!1,isNaN(j)||isNaN(ht)||!Array.isArray(C)||!Array.isArray(bt)||!Ds(Ot)||typeof Jt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Yu(j,ht),me=bt[0],Le=bt[1],pi=C.length,Br=j,yr=ht,Ye=0;Ye<pi;Ye++)(ui=C[Ye]).length===2?(Br=ui[0]*me+Br,yr=ui[1]*Le+yr,ec(Br,yr)):(Fi=ui[0]*me+Br,Pn=ui[1]*Le+yr,Hn=ui[2]*me+Br,ar=ui[3]*Le+yr,Br=ui[4]*me+Br,yr=ui[5]*Le+yr,Yo(Fi,Pn,Hn,ar,Br,yr));return Jt&&gf(),Xu(Ot),this},m.path=function(C){for(var j=0;j<C.length;j++){var ht=C[j],bt=ht.c;switch(ht.op){case"m":Yu(bt[0],bt[1]);break;case"l":ec(bt[0],bt[1]);break;case"c":Yo.apply(this,bt);break;case"h":gf()}}return this},m.__private__.rect=m.rect=function(C,j,ht,bt,Ot){if(isNaN(C)||isNaN(j)||isNaN(ht)||isNaN(bt)||!Ds(Ot))throw new Error("Invalid arguments passed to jsPDF.rect");return T===M.COMPAT&&(bt=-bt),ut([N(V(C)),N(K(j)),N(V(ht)),N(V(bt)),"re"].join(" ")),Xu(Ot),this},m.__private__.triangle=m.triangle=function(C,j,ht,bt,Ot,Jt,me){if(isNaN(C)||isNaN(j)||isNaN(ht)||isNaN(bt)||isNaN(Ot)||isNaN(Jt)||!Ds(me))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ht-C,bt-j],[Ot-ht,Jt-bt],[C-Ot,j-Jt]],C,j,[1,1],me,!0),this},m.__private__.roundedRect=m.roundedRect=function(C,j,ht,bt,Ot,Jt,me){if(isNaN(C)||isNaN(j)||isNaN(ht)||isNaN(bt)||isNaN(Ot)||isNaN(Jt)||!Ds(me))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Le=4/3*(Math.SQRT2-1);return Ot=Math.min(Ot,.5*ht),Jt=Math.min(Jt,.5*bt),this.lines([[ht-2*Ot,0],[Ot*Le,0,Ot,Jt-Jt*Le,Ot,Jt],[0,bt-2*Jt],[0,Jt*Le,-Ot*Le,Jt,-Ot,Jt],[2*Ot-ht,0],[-Ot*Le,0,-Ot,-Jt*Le,-Ot,-Jt],[0,2*Jt-bt],[0,-Jt*Le,Ot*Le,-Jt,Ot,-Jt]],C+Ot,j,[1,1],me,!0),this},m.__private__.ellipse=m.ellipse=function(C,j,ht,bt,Ot){if(isNaN(C)||isNaN(j)||isNaN(ht)||isNaN(bt)||!Ds(Ot))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Jt=4/3*(Math.SQRT2-1)*ht,me=4/3*(Math.SQRT2-1)*bt;return Yu(C+ht,j),Yo(C+ht,j-me,C+Jt,j-bt,C,j-bt),Yo(C-Jt,j-bt,C-ht,j-me,C-ht,j),Yo(C-ht,j+me,C-Jt,j+bt,C,j+bt),Yo(C+Jt,j+bt,C+ht,j+me,C+ht,j),Xu(Ot),this},m.__private__.circle=m.circle=function(C,j,ht,bt){if(isNaN(C)||isNaN(j)||isNaN(ht)||!Ds(bt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(C,j,ht,ht,bt)},m.setFont=function(C,j,ht){return ht&&(j=U(j,ht)),Pe=Xo(C,j,{disableWarning:!1}),this};var B1=m.__private__.getFont=m.getFont=function(){return ye[Xo.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var C,j,ht={};for(C in He)if(He.hasOwnProperty(C))for(j in ht[C]=[],He[C])He[C].hasOwnProperty(j)&&ht[C].push(j);return ht},m.addFont=function(C,j,ht,bt,Ot){var Jt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Jt.indexOf(arguments[3])!==-1?Ot=arguments[3]:arguments[3]&&Jt.indexOf(arguments[3])==-1&&(ht=U(ht,bt)),Ot=Ot||"Identity-H",Di.call(this,C,j,ht,Ot)};var ic,$u=n.lineWidth||.200025,sd=m.__private__.getLineWidth=m.getLineWidth=function(){return $u},_f=m.__private__.setLineWidth=m.setLineWidth=function(C){return $u=C,ut(N(V(C))+" w"),this};m.__private__.setLineDash=ni.API.setLineDash=ni.API.setLineDashPattern=function(C,j){if(C=C||[],j=j||0,isNaN(j)||!Array.isArray(C))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return C=C.map(function(ht){return N(V(ht))}).join(" "),j=N(V(j)),ut("["+C+"] "+j+" d"),this};var vf=m.__private__.getLineHeight=m.getLineHeight=function(){return Zt*ic};m.__private__.getLineHeight=m.getLineHeight=function(){return Zt*ic};var xf=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(C){return typeof(C=C||1.15)=="number"&&(ic=C),this},bf=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return ic};xf(n.lineHeight);var Ps=m.__private__.getHorizontalCoordinate=function(C){return V(C)},so=m.__private__.getVerticalCoordinate=function(C){return T===M.ADVANCED?C:ae[nt].mediaBox.topRightY-ae[nt].mediaBox.bottomLeftY-V(C)},V1=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(C){return N(Ps(C))},$o=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(C){return N(so(C))},ls=n.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ca(ls)},m.__private__.setStrokeColor=m.setDrawColor=function(C,j,ht,bt){return ls=da({ch1:C,ch2:j,ch3:ht,ch4:bt,pdfColorType:"draw",precision:2}),ut(ls),this};var Ku=n.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ca(Ku)},m.__private__.setFillColor=m.setFillColor=function(C,j,ht,bt){return Ku=da({ch1:C,ch2:j,ch3:ht,ch4:bt,pdfColorType:"fill",precision:2}),ut(Ku),this};var nc=n.textColor||"0 g",U1=m.__private__.getTextColor=m.getTextColor=function(){return ca(nc)};m.__private__.setTextColor=m.setTextColor=function(C,j,ht,bt){return nc=da({ch1:C,ch2:j,ch3:ht,ch4:bt,pdfColorType:"text",precision:3}),this};var od=n.charSpace,z1=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(od||0)};m.__private__.setCharSpace=m.setCharSpace=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return od=C,this};var Zu=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(C){var j=m.CapJoinStyles[C];if(j===void 0)throw new Error("Line cap style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zu=j,ut(j+" J"),this};var Ju=0;m.__private__.setLineJoin=m.setLineJoin=function(C){var j=m.CapJoinStyles[C];if(j===void 0)throw new Error("Line join style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ju=j,ut(j+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(C){if(C=C||0,isNaN(C))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ut(N(V(C))+" M"),this},m.GState=dg,m.setGState=function(C){(C=typeof C=="string"?ve[$t[C]]:yf(null,C)).equals(ne)||(ut("/"+C.id+" gs"),ne=C)};var yf=function(C,j){if(!C||!$t[C]){var ht=!1;for(var bt in ve)if(ve.hasOwnProperty(bt)&&ve[bt].equals(j)){ht=!0;break}if(ht)j=ve[bt];else{var Ot="GS"+(Object.keys(ve).length+1).toString(10);ve[Ot]=j,j.id=Ot}return C&&($t[C]=j.id),De.publish("addGState",j),j}};m.addGState=function(C,j){return yf(C,j),this},m.saveGraphicsState=function(){return ut("q"),Ze.push({key:Pe,size:Zt,color:nc}),this},m.restoreGraphicsState=function(){ut("Q");var C=Ze.pop();return Pe=C.key,Zt=C.size,nc=C.color,ne=null,this},m.setCurrentTransformationMatrix=function(C){return ut(C.toString()+" cm"),this},m.comment=function(C){return ut("#"+C),this};var ld=function(C,j){var ht=C||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ht},set:function(Jt){isNaN(Jt)||(ht=parseFloat(Jt))}});var bt=j||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return bt},set:function(Jt){isNaN(Jt)||(bt=parseFloat(Jt))}});var Ot="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ot},set:function(Jt){Ot=Jt.toString()}}),this},Qu=function(C,j,ht,bt){ld.call(this,C,j),this.type="rect";var Ot=ht||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ot},set:function(me){isNaN(me)||(Ot=parseFloat(me))}});var Jt=bt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Jt},set:function(me){isNaN(me)||(Jt=parseFloat(me))}}),this},th=function(){this.page=be,this.currentPage=nt,this.pages=ie.slice(0),this.pagesContext=ae.slice(0),this.x=Ce,this.y=we,this.matrix=je,this.width=rc(nt),this.height=Ko(nt),this.outputDestination=_e,this.id="",this.objectNumber=-1};th.prototype.restore=function(){be=this.page,nt=this.currentPage,ae=this.pagesContext,ie=this.pages,Ce=this.x,we=this.y,je=this.matrix,eh(nt,this.width),ih(nt,this.height),_e=this.outputDestination};var Sf=function(C,j,ht,bt,Ot){Vn.push(new th),be=nt=0,ie=[],Ce=C,we=j,je=Ot,Yi([ht,bt])},H1=function(C){if(bi[C])Vn.pop().restore();else{var j=new th,ht="Xo"+(Object.keys(Ni).length+1).toString(10);j.id=ht,bi[C]=ht,Ni[ht]=j,De.publish("addFormObject",j),Vn.pop().restore()}};for(var cd in m.beginFormObject=function(C,j,ht,bt,Ot){return Sf(C,j,ht,bt,Ot),this},m.endFormObject=function(C){return H1(C),this},m.doFormObject=function(C,j){var ht=Ni[bi[C]];return ut("q"),ut(j.toString()+" cm"),ut("/"+ht.id+" Do"),ut("Q"),this},m.getFormObject=function(C){var j=Ni[bi[C]];return{x:j.x,y:j.y,width:j.width,height:j.height,matrix:j.matrix}},m.save=function(C,j){return C=C||"generated.pdf",(j=j||{}).returnPromise=j.returnPromise||!1,j.returnPromise===!1?(Pc(nd(ao()),C),typeof Pc.unload=="function"&&ri.setTimeout&&setTimeout(Pc.unload,911),this):new Promise(function(ht,bt){try{var Ot=Pc(nd(ao()),C);typeof Pc.unload=="function"&&ri.setTimeout&&setTimeout(Pc.unload,911),ht(Ot)}catch(Jt){bt(Jt.message)}})},ni.API)ni.API.hasOwnProperty(cd)&&(cd==="events"&&ni.API.events.length?function(C,j){var ht,bt,Ot;for(Ot=j.length-1;Ot!==-1;Ot--)ht=j[Ot][0],bt=j[Ot][1],C.subscribe.apply(C,[ht].concat(typeof bt=="function"?[bt]:bt))}(De,ni.API.events):m[cd]=ni.API[cd]);var rc=m.getPageWidth=function(C){return(ae[C=C||nt].mediaBox.topRightX-ae[C].mediaBox.bottomLeftX)/Ut},eh=m.setPageWidth=function(C,j){ae[C].mediaBox.topRightX=j*Ut+ae[C].mediaBox.bottomLeftX},Ko=m.getPageHeight=function(C){return(ae[C=C||nt].mediaBox.topRightY-ae[C].mediaBox.bottomLeftY)/Ut},ih=m.setPageHeight=function(C,j){ae[C].mediaBox.topRightY=j*Ut+ae[C].mediaBox.bottomLeftY};return m.internal={pdfEscape:nr,getStyle:mf,getFont:B1,getFontSize:H,getCharSpace:z1,getTextColor:U1,getLineHeight:vf,getLineHeightFactor:bf,getLineWidth:sd,write:Ae,getHorizontalCoordinate:Ps,getVerticalCoordinate:so,getCoordinateString:V1,getVerticalCoordinateString:$o,collections:{},newObject:In,newAdditionalObject:ss,newObjectDeferred:Dn,newObjectDeferredBegin:Rr,getFilters:Ua,putStream:ua,events:De,scaleFactor:Ut,pageSize:{getWidth:function(){return rc(nt)},setWidth:function(C){eh(nt,C)},getHeight:function(){return Ko(nt)},setHeight:function(C){ih(nt,C)}},encryptionOptions:p,encryption:Fr,getEncryptor:P1,output:rd,getNumberOfPages:br,pages:ie,out:ut,f2:F,f3:P,getPageInfo:ff,getPageInfoByObjId:li,getCurrentPageInfo:L1,getPDFVersion:y,Point:ld,Rectangle:Qu,Matrix:ze,hasHotfix:pf},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return rc(nt)},set:function(C){eh(nt,C)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Ko(nt)},set:function(C){ih(nt,C)},enumerable:!0,configurable:!0}),Jr.call(m,ee),Pe="F1",Er(r,t),De.publish("initialized"),m}mu.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},mu.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},mu.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},mu.prototype.processOwnerPassword=function(n,e){return Dy(Iy(e).substr(0,5),n)},mu.prototype.encryptor=function(n,e){var t=Iy(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return Dy(t,i)}},dg.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||(0,hn.default)(n)!==(0,hn.default)(this))return!1;var i=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;i++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&i--;return i===0},ni.API={events:[]},ni.version="2.5.2";var qn=ni.API,Oy=1,Oc=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},pu=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},hi=function(n){return n.toFixed(2)},Ll=function(n){return n.toFixed(5)};qn.__acroform__={};var ya=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},R3=function(n){return n*Oy},Xs=function(n){var e=new Z3,t=Ue.internal.getHeight(n)||0,i=Ue.internal.getWidth(n)||0;return e.BBox=[0,0,Number(hi(i)),Number(hi(t))],e},t8=qn.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},e8=qn.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},i8=qn.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Qn=qn.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return i8(n,e-1)},tr=qn.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return t8(n,e-1)},er=qn.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return e8(n,e-1)},n8=qn.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,r=n[0],a=n[1],s=n[2],o=n[3],l={};return l.lowerLeft_X=t(r)||0,l.lowerLeft_Y=i(a+o)||0,l.upperRight_X=t(r+s)||0,l.upperRight_Y=i(a)||0,[Number(hi(l.lowerLeft_X)),Number(hi(l.lowerLeft_Y)),Number(hi(l.upperRight_X)),Number(hi(l.upperRight_Y))]},r8=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,i=Py(n,t),r=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+r+" "+hi(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Xs(n);return a.scope=n.scope,a.stream=e.join(`
`),a}},Py=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},r=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");r=n.multiline?r.map(function(P){return P.split(`
`)}):r.map(function(P){return[P]});var a=t,s=Ue.internal.getHeight(n)||0;s=s<0?-s:s;var o=Ue.internal.getWidth(n)||0;o=o<0?-o:o;var l=function(P,V,$){if(P+1<r.length){var K=V+" "+r[P+1][0];return ng(K,n,$).width<=o-4}return!1};a++;t:for(;a>0;){e="",a--;var u,p,f=ng("3",n,a).height,g=n.multiline?s-a:(s-f)/2,m=g+=2,x=0,y=0,S=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+ng(e,n,a=12).width+", FieldWidth:"+o+`
`;break}for(var b="",M=0,T=0;T<r.length;T++)if(r.hasOwnProperty(T)){var I=!1;if(r[T].length!==1&&S!==r[T].length-1){if((f+2)*(M+2)+2>s)continue t;b+=r[T][S],I=!0,y=T,T--}else{b=(b+=r[T][S]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var O=parseInt(T),U=l(O,b,a),N=T>=r.length-1;if(U&&!N){b+=" ",S=0;continue}if(U||N){if(N)y=O;else if(n.multiline&&(f+2)*(M+2)+2>s)continue t}else{if(!n.multiline||(f+2)*(M+2)+2>s)continue t;y=O}}for(var B="",R=x;R<=y;R++){var F=r[R];if(n.multiline){if(R===y){B+=F[S]+" ",S=(S+1)%F.length;continue}if(R===x){B+=F[F.length-1]+" ";continue}}B+=F[0]+" "}switch(B=B.substr(B.length-1)==" "?B.substr(0,B.length-1):B,p=ng(B,n,a).width,n.textAlign){case"right":u=o-p-2;break;case"center":u=(o-p)/2;break;case"left":default:u=2}e+=hi(u)+" "+hi(m)+` Td
`,e+="("+Oc(B)+`) Tj
`,e+=-hi(u)+` 0 Td
`,m=-(a+2),p=0,x=I?y:y+1,M++,b=""}break}return i.text=e,i.fontSize=a,i},ng=function(n,e,t){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:r}},a8={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},s8=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(i){return i.type===t.type&&i.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},o8=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var i=t,r=n[t];e.internal.newObjectDeferredBegin(r.objId,!0),(0,hn.default)(r)==="object"&&typeof r.putStream=="function"&&r.putStream(),delete n[i]}},l8=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Cs.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(a8)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Oy=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new J3,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in i)if(i.hasOwnProperty(r)){var a=i[r];a.objId=void 0,a.hasAnnotation&&s8(a,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(i,r){var a=!i;for(var s in i||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(s)){var o=i[s],l=[],u=o.Rect;if(o.Rect&&(o.Rect=n8(o.Rect,r)),r.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Ue.createDefaultAppearanceStream(o),(0,hn.default)(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var p=r8(o);l.push({key:"AP",value:"<</N "+p+">>"}),r.internal.acroformPlugin.xForms.push(p)}if(o.appearanceStreamContent){var f="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var m=o.appearanceStreamContent[g];if(f+="/"+g+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var s in m)if(m.hasOwnProperty(s)){var x=m[s];typeof x=="function"&&(x=x.call(r,o)),f+="/"+s+" "+x+" ",r.internal.acroformPlugin.xForms.indexOf(x)>=0||r.internal.acroformPlugin.xForms.push(x)}}else typeof(x=m)=="function"&&(x=x.call(r,o)),f+="/"+s+" "+x,r.internal.acroformPlugin.xForms.indexOf(x)>=0||r.internal.acroformPlugin.xForms.push(x);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}r.internal.putStream({additionalKeyValues:l,objectId:o.objId}),r.internal.out("endobj")}a&&o8(r.internal.acroformPlugin.xForms,r)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},K3=qn.__acroform__.arrayToPdfArray=function(n,e,t){var i=function(s){return s};if(Array.isArray(n)){for(var r="[",a=0;a<n.length;a++)switch(a!==0&&(r+=" "),(0,hn.default)(n[a])){case"boolean":case"number":case"object":r+=n[a].toString();break;case"string":n[a].substr(0,1)!=="/"?(e!==void 0&&t&&(i=t.internal.getEncryptor(e)),r+="("+Oc(i(n[a].toString()))+")"):r+=n[a].toString()}return r+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ey=function(n,e,t){var i=function(r){return r};return e!==void 0&&t&&(i=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Oc(i(n))+")"},Ys=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ys.prototype.toString=function(){return this.objId+" 0 R"},Ys.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Ys.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var i=e[t],r=this[i];r&&(Array.isArray(r)?n.push({key:i,value:K3(r,this.objId,this.scope)}):r instanceof Ys?(r.scope=this.scope,n.push({key:i,value:r.objId+" 0 R"})):typeof r!="function"&&n.push({key:i,value:r}))}return n};var Z3=function(){Ys.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};ya(Z3,Ys);var J3=function(){Ys.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(i){return i};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Oc(t(n))+")"}},set:function(t){n=t}})};ya(J3,Ys);var Cs=function n(){Ys.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Qn(e,3)},set:function(b){b?this.F=tr(e,3):this.F=er(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');t=b}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(b){i=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(b){i[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(b){i[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(b){i[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(b){i[3]=b}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof ug)return;a="FieldObject"+n.FieldNum++}var b=function(M){return M};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Oc(b(a))+")"},set:function(b){a=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(b){a=b}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(b){s=b}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Oy:u},set:function(b){u=b}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(b){p=b}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof ug||this instanceof Rc))return Ey(f,this.objId,this.scope)},set:function(b){b=b.toString(),f=b}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Cr?g:Ey(g,this.objId,this.scope)},set:function(b){b=b.toString(),g=this instanceof Cr?b:b.substr(0,1)==="("?pu(b.substr(1,b.length-2)):pu(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cr?pu(g.substr(1,g.length-1)):g},set:function(b){b=b.toString(),g=this instanceof Cr?"/"+b:b}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Cr?m:Ey(m,this.objId,this.scope)},set:function(b){b=b.toString(),m=this instanceof Cr?b:b.substr(0,1)==="("?pu(b.substr(1,b.length-2)):pu(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cr?pu(m.substr(1,m.length-1)):m},set:function(b){b=b.toString(),m=this instanceof Cr?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(b){b=!!b,y=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(b){x=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,1)},set:function(b){b?this.Ff=tr(this.Ff,1):this.Ff=er(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,2)},set:function(b){b?this.Ff=tr(this.Ff,2):this.Ff=er(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,3)},set:function(b){b?this.Ff=tr(this.Ff,3):this.Ff=er(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');S=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(S){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};ya(Cs,Ys);var vu=function(){Cs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return K3(e,this.objId,this.scope)},set:function(t){var i,r;r=[],typeof(i=t)=="string"&&(r=function(a,s,o){o||(o=1);for(var l,u=[];l=s.exec(a);)u.push(l[o]);return u}(i,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,i){for(i=i||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,18)},set:function(t){t?this.Ff=tr(this.Ff,18):this.Ff=er(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=tr(this.Ff,19):this.Ff=er(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,20)},set:function(t){t?(this.Ff=tr(this.Ff,20),e.sort()):this.Ff=er(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,22)},set:function(t){t?this.Ff=tr(this.Ff,22):this.Ff=er(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,23)},set:function(t){t?this.Ff=tr(this.Ff,23):this.Ff=er(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,27)},set:function(t){t?this.Ff=tr(this.Ff,27):this.Ff=er(this.Ff,27)}}),this.hasAppearanceStream=!1};ya(vu,Cs);var xu=function(){vu.call(this),this.fontName="helvetica",this.combo=!1};ya(xu,vu);var bu=function(){xu.call(this),this.combo=!0};ya(bu,xu);var sg=function(){bu.call(this),this.edit=!0};ya(sg,bu);var Cr=function(){Cs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,15)},set:function(t){t?this.Ff=tr(this.Ff,15):this.Ff=er(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,16)},set:function(t){t?this.Ff=tr(this.Ff,16):this.Ff=er(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,17)},set:function(t){t?this.Ff=tr(this.Ff,17):this.Ff=er(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,26)},set:function(t){t?this.Ff=tr(this.Ff,26):this.Ff=er(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,r=[];for(i in r.push("<<"),e)r.push("/"+i+" ("+Oc(t(e[i]))+")");return r.push(">>"),r.join(`
`)}},set:function(t){(0,hn.default)(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};ya(Cr,Cs);var og=function(){Cr.call(this),this.pushButton=!0};ya(og,Cr);var yu=function(){Cr.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};ya(yu,Cr);var ug=function(){var n,e;Cs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(r){e=r}});var t,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var a,s=[];for(a in s.push("<<"),i)s.push("/"+a+" ("+Oc(r(i[a]))+")");return s.push(">>"),s.join(`
`)},set:function(r){(0,hn.default)(r)==="object"&&(i=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(r){typeof r=="string"&&(i.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ue.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ya(ug,Cs),yu.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},yu.prototype.createOption=function(n){var e=new ug;return e.Parent=this,e.optionName=n,this.Kids.push(e),c8.call(this.scope,e),e};var lg=function(){Cr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ue.CheckBox.createAppearanceStream()};ya(lg,Cr);var Rc=function(){Cs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,13)},set:function(e){e?this.Ff=tr(this.Ff,13):this.Ff=er(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,21)},set:function(e){e?this.Ff=tr(this.Ff,21):this.Ff=er(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,23)},set:function(e){e?this.Ff=tr(this.Ff,23):this.Ff=er(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,24)},set:function(e){e?this.Ff=tr(this.Ff,24):this.Ff=er(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,25)},set:function(e){e?this.Ff=tr(this.Ff,25):this.Ff=er(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,26)},set:function(e){e?this.Ff=tr(this.Ff,26):this.Ff=er(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ya(Rc,Cs);var cg=function(){Rc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,14)},set:function(n){n?this.Ff=tr(this.Ff,14):this.Ff=er(this.Ff,14)}}),this.password=!0};ya(cg,Rc);var Ue={CheckBox:{createAppearanceStream:function(){return{N:{On:Ue.CheckBox.YesNormal},D:{On:Ue.CheckBox.YesPushDown,Off:Ue.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Xs(n);e.scope=n.scope;var t=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),a=Py(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+hi(Ue.internal.getWidth(n))+" "+hi(Ue.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+i+" "+hi(a.fontSize)+" Tf "+r),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Xs(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),r=[],a=Ue.internal.getHeight(n),s=Ue.internal.getWidth(n),o=Py(n,n.caption);return r.push("1 g"),r.push("0 0 "+hi(s)+" "+hi(a)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+hi(s-1)+" "+hi(a-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+t+" "+hi(o.fontSize)+" Tf "+i),r.push(o.text),r.push("ET"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Xs(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+hi(Ue.internal.getWidth(n))+" "+hi(Ue.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Ue.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Ue.RadioButton.Circle.YesNormal,e.D[n]=Ue.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Xs(n);e.scope=n.scope;var t=[],i=Ue.internal.getWidth(n)<=Ue.internal.getHeight(n)?Ue.internal.getWidth(n)/4:Ue.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Ue.internal.Bezier_C,a=Number((i*r).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ll(Ue.internal.getWidth(n)/2)+" "+Ll(Ue.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Xs(n);e.scope=n.scope;var t=[],i=Ue.internal.getWidth(n)<=Ue.internal.getHeight(n)?Ue.internal.getWidth(n)/4:Ue.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),a=Number((r*Ue.internal.Bezier_C).toFixed(5)),s=Number((i*Ue.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ll(Ue.internal.getWidth(n)/2)+" "+Ll(Ue.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ll(Ue.internal.getWidth(n)/2)+" "+Ll(Ue.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Xs(n);e.scope=n.scope;var t=[],i=Ue.internal.getWidth(n)<=Ue.internal.getHeight(n)?Ue.internal.getWidth(n)/4:Ue.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),a=Number((r*Ue.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ll(Ue.internal.getWidth(n)/2)+" "+Ll(Ue.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Ue.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Ue.RadioButton.Cross.YesNormal,e.D[n]=Ue.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Xs(n);e.scope=n.scope;var t=[],i=Ue.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+hi(Ue.internal.getWidth(n)-2)+" "+hi(Ue.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(hi(i.x1.x)+" "+hi(i.x1.y)+" m"),t.push(hi(i.x2.x)+" "+hi(i.x2.y)+" l"),t.push(hi(i.x4.x)+" "+hi(i.x4.y)+" m"),t.push(hi(i.x3.x)+" "+hi(i.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Xs(n);e.scope=n.scope;var t=Ue.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+hi(Ue.internal.getWidth(n))+" "+hi(Ue.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+hi(Ue.internal.getWidth(n)-2)+" "+hi(Ue.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(hi(t.x1.x)+" "+hi(t.x1.y)+" m"),i.push(hi(t.x2.x)+" "+hi(t.x2.y)+" l"),i.push(hi(t.x4.x)+" "+hi(t.x4.y)+" m"),i.push(hi(t.x3.x)+" "+hi(t.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Xs(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+hi(Ue.internal.getWidth(n))+" "+hi(Ue.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Ue.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Ue.internal.getWidth(n),t=Ue.internal.getHeight(n),i=Math.min(e,t);return{x1:{x:(e-i)/2,y:(t-i)/2+i},x2:{x:(e-i)/2+i,y:(t-i)/2},x3:{x:(e-i)/2,y:(t-i)/2},x4:{x:(e-i)/2+i,y:(t-i)/2+i}}}},Ue.internal.getWidth=function(n){var e=0;return(0,hn.default)(n)==="object"&&(e=R3(n.Rect[2])),e},Ue.internal.getHeight=function(n){var e=0;return(0,hn.default)(n)==="object"&&(e=R3(n.Rect[3])),e};var c8=qn.addField=function(n){if(l8(this,n),!(n instanceof Cs))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};qn.AcroFormChoiceField=vu,qn.AcroFormListBox=xu,qn.AcroFormComboBox=bu,qn.AcroFormEditBox=sg,qn.AcroFormButton=Cr,qn.AcroFormPushButton=og,qn.AcroFormRadioButton=yu,qn.AcroFormCheckBox=lg,qn.AcroFormTextField=Rc,qn.AcroFormPasswordField=cg,qn.AcroFormAppearance=Ue,qn.AcroForm={ChoiceField:vu,ListBox:xu,ComboBox:bu,EditBox:sg,Button:Cr,PushButton:og,RadioButton:yu,CheckBox:lg,TextField:Rc,PasswordField:cg,Appearance:Ue},ni.AcroForm={ChoiceField:vu,ListBox:xu,ComboBox:bu,EditBox:sg,Button:Cr,PushButton:og,RadioButton:yu,CheckBox:lg,TextField:Rc,PasswordField:cg,Appearance:Ue};var Dit=ni.AcroForm;function Q3(n){return n.reduce(function(e,t,i){return e[t]=i,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(P,V){var $,K,ct,ot,at,Q=e;if((V=V||e)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(U(P))for(at in t)for(ct=t[at],$=0;$<ct.length;$+=1){for(ot=!0,K=0;K<ct[$].length;K+=1)if(ct[$][K]!==void 0&&ct[$][K]!==P[K]){ot=!1;break}if(ot===!0){Q=at;break}}else for(at in t)for(ct=t[at],$=0;$<ct.length;$+=1){for(ot=!0,K=0;K<ct[$].length;K+=1)if(ct[$][K]!==void 0&&ct[$][K]!==P.charCodeAt(K)){ot=!1;break}if(ot===!0){Q=at;break}}return Q===e&&V!==e&&(Q=V),Q},r=function P(V){for(var $=this.internal.write,K=this.internal.putStream,ct=(0,this.internal.getFilters)();ct.indexOf("FlateEncode")!==-1;)ct.splice(ct.indexOf("FlateEncode"),1);V.objectId=this.internal.newObject();var ot=[];if(ot.push({key:"Type",value:"/XObject"}),ot.push({key:"Subtype",value:"/Image"}),ot.push({key:"Width",value:V.width}),ot.push({key:"Height",value:V.height}),V.colorSpace===S.INDEXED?ot.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(V.palette.length/3-1)+" "+("sMask"in V&&V.sMask!==void 0?V.objectId+2:V.objectId+1)+" 0 R]"}):(ot.push({key:"ColorSpace",value:"/"+V.colorSpace}),V.colorSpace===S.DEVICE_CMYK&&ot.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ot.push({key:"BitsPerComponent",value:V.bitsPerComponent}),"decodeParameters"in V&&V.decodeParameters!==void 0&&ot.push({key:"DecodeParms",value:"<<"+V.decodeParameters+">>"}),"transparency"in V&&Array.isArray(V.transparency)){for(var at="",Q=0,xt=V.transparency.length;Q<xt;Q++)at+=V.transparency[Q]+" "+V.transparency[Q]+" ";ot.push({key:"Mask",value:"["+at+"]"})}V.sMask!==void 0&&ot.push({key:"SMask",value:V.objectId+1+" 0 R"});var Mt=V.filter!==void 0?["/"+V.filter]:void 0;if(K({data:V.data,additionalKeyValues:ot,alreadyAppliedFilters:Mt,objectId:V.objectId}),$("endobj"),"sMask"in V&&V.sMask!==void 0){var qt="/Predictor "+V.predictor+" /Colors 1 /BitsPerComponent "+V.bitsPerComponent+" /Columns "+V.width,z={width:V.width,height:V.height,colorSpace:"DeviceGray",bitsPerComponent:V.bitsPerComponent,decodeParameters:qt,data:V.sMask};"filter"in V&&(z.filter=V.filter),P.call(this,z)}if(V.colorSpace===S.INDEXED){var nt=this.internal.newObject();K({data:B(new Uint8Array(V.palette)),objectId:nt}),$("endobj")}},a=function(){var P=this.internal.collections.addImage_images;for(var V in P)r.call(this,P[V])},s=function(){var P,V=this.internal.collections.addImage_images,$=this.internal.write;for(var K in V)$("/I"+(P=V[K]).index,P.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var P=this.internal.collections.addImage_images;return o.call(this),P},u=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(P){return typeof n["process"+P.toUpperCase()]=="function"},f=function(P){return(0,hn.default)(P)==="object"&&P.nodeType===1},g=function(P,V){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var $=""+P.getAttribute("src");if($.indexOf("data:image/")===0)return Dp(unescape($).split("base64,").pop());var K=n.loadFile($,!0);if(K!==void 0)return K}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var ct;switch(V){case"PNG":ct="image/png";break;case"WEBP":ct="image/webp";break;case"JPEG":case"JPG":default:ct="image/jpeg"}return Dp(P.toDataURL(ct,1).split("base64,").pop())}},m=function(P){var V=this.internal.collections.addImage_images;if(V){for(var $ in V)if(P===V[$].alias)return V[$]}},x=function(P,V,$){return P||V||(P=-96,V=-96),P<0&&(P=-1*$.width*72/P/this.internal.scaleFactor),V<0&&(V=-1*$.height*72/V/this.internal.scaleFactor),P===0&&(P=V*$.width/$.height),V===0&&(V=P*$.height/$.width),[P,V]},y=function(P,V,$,K,ct,ot){var at=x.call(this,$,K,ct),Q=this.internal.getCoordinateString,xt=this.internal.getVerticalCoordinateString,Mt=l.call(this);if($=at[0],K=at[1],Mt[ct.index]=ct,ot){ot*=Math.PI/180;var qt=Math.cos(ot),z=Math.sin(ot),nt=function(st){return st.toFixed(4)},Z=[nt(qt),nt(z),nt(-1*z),nt(qt),0,0,"cm"]}this.internal.write("q"),ot?(this.internal.write([1,"0","0",1,Q(P),xt(V+K),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([Q($),"0","0",Q(K),"0","0","cm"].join(" "))):this.internal.write([Q($),"0","0",Q(K),Q(P),xt(V+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ct.index+" Do"),this.internal.write("Q")},S=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},M=n.__addimage__.sHashCode=function(P){var V,$,K=0;if(typeof P=="string")for($=P.length,V=0;V<$;V++)K=(K<<5)-K+P.charCodeAt(V),K|=0;else if(U(P))for($=P.byteLength/2,V=0;V<$;V++)K=(K<<5)-K+P[V],K|=0;return K},T=n.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var V=!0;return P.length===0&&(V=!1),P.length%4!=0&&(V=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(V=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(V=!1),V},I=n.__addimage__.extractImageFromDataUrl=function(P){var V=(P=P||"").split("base64,"),$=null;if(V.length===2){var K=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(V[0]);Array.isArray(K)&&($={mimeType:K[1],charset:K[2],data:V[1]})}return $},O=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(P){return O()&&P instanceof ArrayBuffer};var U=n.__addimage__.isArrayBufferView=function(P){return O()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},N=n.__addimage__.binaryStringToUint8Array=function(P){for(var V=P.length,$=new Uint8Array(V),K=0;K<V;K++)$[K]=P.charCodeAt(K);return $},B=n.__addimage__.arrayBufferToBinaryString=function(P){for(var V="",$=U(P)?P:new Uint8Array(P),K=0;K<$.length;K+=8192)V+=String.fromCharCode.apply(null,$.subarray(K,K+8192));return V};n.addImage=function(){var P,V,$,K,ct,ot,at,Q,xt;if(typeof arguments[1]=="number"?(V=e,$=arguments[1],K=arguments[2],ct=arguments[3],ot=arguments[4],at=arguments[5],Q=arguments[6],xt=arguments[7]):(V=arguments[1],$=arguments[2],K=arguments[3],ct=arguments[4],ot=arguments[5],at=arguments[6],Q=arguments[7],xt=arguments[8]),(0,hn.default)(P=arguments[0])==="object"&&!f(P)&&"imageData"in P){var Mt=P;P=Mt.imageData,V=Mt.format||V||e,$=Mt.x||$||0,K=Mt.y||K||0,ct=Mt.w||Mt.width||ct,ot=Mt.h||Mt.height||ot,at=Mt.alias||at,Q=Mt.compression||Q,xt=Mt.rotation||Mt.angle||xt}var qt=this.internal.getFilters();if(Q===void 0&&qt.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN($)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var z=R.call(this,P,V,at,Q);return y.call(this,$,K,ct,ot,z,xt),this};var R=function(P,V,$,K){var ct,ot,at;if(typeof P=="string"&&i(P)===e){P=unescape(P);var Q=F(P,!1);(Q!==""||(Q=n.loadFile(P,!0))!==void 0)&&(P=Q)}if(f(P)&&(P=g(P,V)),V=i(P,V),!p(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(((at=$)==null||at.length===0)&&($=function(xt){return typeof xt=="string"||U(xt)?M(xt):U(xt.data)?M(xt.data):null}(P)),(ct=m.call(this,$))||(O()&&(P instanceof Uint8Array||V==="RGBA"||(ot=P,P=N(P))),ct=this["process"+V.toUpperCase()](P,u.call(this),$,function(xt){return xt&&typeof xt=="string"&&(xt=xt.toUpperCase()),xt in n.image_compression?xt:b.NONE}(K),ot)),!ct)throw new Error("An unknown error occurred whilst processing the image.");return ct},F=n.__addimage__.convertBase64ToBinaryString=function(P,V){var $;V=typeof V!="boolean"||V;var K,ct="";if(typeof P=="string"){K=($=I(P))!==null?$.data:P;try{ct=Dp(K)}catch(ot){if(V)throw T(K)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ot.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ct};n.getImageProperties=function(P){var V,$,K="";if(f(P)&&(P=g(P)),typeof P=="string"&&i(P)===e&&((K=F(P,!1))===""&&(K=n.loadFile(P)||""),P=K),$=i(P),!p($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(!O()||P instanceof Uint8Array||(P=N(P)),!(V=this["process"+$.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return V.fileType=$,V}})(ni.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};ni.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var i,r,a,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,p=!1,f=0;f<u.length&&!p;f++)switch((i=u[f]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var g=0;g<u.length;g++){i=u[g];var m=this.internal.pdfEscape,x=this.internal.getEncryptor(t.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(y.objId),M=i.title||"Note";a="<</Type /Annot /Subtype /Text "+(r="/Rect ["+s(i.bounds.x)+" "+o(i.bounds.y+i.bounds.h)+" "+s(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y)+"] ")+"/Contents ("+m(b(i.contents))+")",a+=" /Popup "+S.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+m(b(M))+") >>",y.content=a;var T=y.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+s(i.bounds.x+30)+" "+o(i.bounds.y+i.bounds.h)+" "+s(i.bounds.x+i.bounds.w+30)+" "+o(i.bounds.y)+"] ")+" /Parent "+T,i.open&&(a+=" /Open true"),a+=" >>",S.content=a,this.internal.write(y.objId,"0 R",S.objId,"0 R");break;case"freetext":r="/Rect ["+s(i.bounds.x)+" "+o(i.bounds.y)+" "+s(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y+i.bounds.h)+"] ";var I=i.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+m(x(i.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+I+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(i.options.name){var O=this.annotations._nameMap[i.options.name];i.options.pageNumber=O.page,i.options.top=O.y}else i.options.top||(i.options.top=0);if(r="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",a="",i.options.url)a="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+m(x(i.options.url))+") >>";else if(i.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,a+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var U=o(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),a+=" /XYZ "+i.options.left+" "+U+" "+i.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var i=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":i.pageContext.annotations.push(t)}},n.link=function(t,i,r,a,s){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(t),y:u(i),w:l(t+r),h:u(i+a)},options:s,type:"link"})},n.textWithLink=function(t,i,r,a){var s,o,l=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var p=this.splitTextToSize(t,o).length;s=Math.ceil(u*p)}else o=l,s=u;return this.text(t,i,r,a),r+=.2*u,a.align==="center"&&(i-=l/2),a.align==="right"&&(i-=l),this.link(i,r-u,o,s,a),l},n.getTextWidth=function(t){var i=this.internal.getFontSize();return this.getStringUnitWidth(t)*i/this.internal.scaleFactor}}(ni.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];n.__arabicParser__={};var a=n.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},s=n.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=n.__arabicParser__.isArabicEndLetter=function(y){return s(y)&&a(y)&&e[y.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(y){return s(y)&&r.indexOf(y.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return s(y)&&a(y)&&e[y.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(y){return s(y)&&a(y)&&e[y.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(y){return s(y)&&a(y)&&e[y.charCodeAt(0)].length>=3};var p=n.__arabicParser__.arabicLetterHasMedialForm=function(y){return s(y)&&a(y)&&e[y.charCodeAt(0)].length==4},f=n.__arabicParser__.resolveLigatures=function(y){var S=0,b=t,M="",T=0;for(S=0;S<y.length;S+=1)b[y.charCodeAt(S)]!==void 0?(T++,typeof(b=b[y.charCodeAt(S)])=="number"&&(M+=String.fromCharCode(b),b=t,T=0),S===y.length-1&&(b=t,M+=y.charAt(S-(T-1)),S-=T-1,T=0)):(b=t,M+=y.charAt(S-T),S-=T,T=0);return M};n.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&i[y.charCodeAt(0)]!==void 0};var g=n.__arabicParser__.getCorrectForm=function(y,S,b){return s(y)?a(y)===!1?-1:!u(y)||!s(S)&&!s(b)||!s(b)&&o(S)||o(y)&&!s(S)||o(y)&&l(S)||o(y)&&o(S)?0:p(y)&&s(S)&&!o(S)&&s(b)&&u(b)?3:o(y)||!s(b)?1:2:-1},m=function(y){var S=0,b=0,M=0,T="",I="",O="",U=(y=y||"").split("\\s+"),N=[];for(S=0;S<U.length;S+=1){for(N.push(""),b=0;b<U[S].length;b+=1)T=U[S][b],I=U[S][b-1],O=U[S][b+1],s(T)?(M=g(T,I,O),N[S]+=M!==-1?String.fromCharCode(e[T.charCodeAt(0)][M]):T):N[S]+=T;N[S]=f(N[S])}return N.join(" ")},x=n.__arabicParser__.processArabic=n.processArabic=function(){var y,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(S)){var M=0;for(b=[],M=0;M<S.length;M+=1)Array.isArray(S[M])?b.push([m(S[M][0]),S[M][1],S[M][2]]):b.push([m(S[M])]);y=b}else y=m(S);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};n.events.push(["preProcessText",x])}(ni.API),ni.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,i){var r;if((t=t||"2d")!=="2d")return null;for(r in i)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=i[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ni.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(y){x=y}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return i.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,u){i.call(this);var p=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),g=u.scaleFactor||this.internal.scaleFactor,m=0,x=0,y=0,S=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var b=u.maxWidth;b>0?typeof l=="string"?l=this.splitTextToSize(l,b):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(T,I){return T.concat(S.splitTextToSize(I,b))},[])):l=Array.isArray(l)?l:[l];for(var M=0;M<l.length;M++)m<(y=this.getStringUnitWidth(l[M],{font:f})*p)&&(m=y);return m!==0&&(x=l.length),{w:m/=g,h:Math.max((x*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/g,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var u=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,m&&g&&(this.printHeaderRow(l.lineNumber,!0),l.y+=g[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-p,l.y+p,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+p,{align:"center",baseline:"top",maxWidth:l.width-p-p}):this.text(l.text,l.x+p,l.y+p,{align:"left",baseline:"top",maxWidth:l.width-p-p})),this.internal.__cell__.lastCell=l,this};n.table=function(l,u,p,f,g){if(i.call(this),!p)throw new Error("No data for PDF table.");var m,x,y,S,b=[],M=[],T=[],I={},O={},U=[],N=[],B=(g=g||{}).autoSize||!1,R=g.printHeaders!==!1,F=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,P=g.margins||Object.assign({width:this.getPageWidth()},e),V=typeof g.padding=="number"?g.padding:3,$=g.headerBackgroundColor||"#c8c8c8",K=g.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=V,this.internal.__cell__.headerBackgroundColor=$,this.internal.__cell__.headerTextColor=K,this.setFontSize(F),f==null)M=b=Object.keys(p[0]),T=b.map(function(){return"left"});else if(Array.isArray(f)&&(0,hn.default)(f[0])==="object")for(b=f.map(function(Mt){return Mt.name}),M=f.map(function(Mt){return Mt.prompt||Mt.name||""}),T=f.map(function(Mt){return Mt.align||"left"}),m=0;m<f.length;m+=1)O[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(M=b=f,T=b.map(function(){return"left"}));if(B||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<b.length;m+=1){for(I[S=b[m]]=p.map(function(Mt){return Mt[S]}),this.setFont(void 0,"bold"),U.push(this.getTextDimensions(M[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=I[S],this.setFont(void 0,"normal"),y=0;y<x.length;y+=1)U.push(this.getTextDimensions(x[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);O[S]=Math.max.apply(null,U)+V+V,U=[]}if(R){var ct={};for(m=0;m<b.length;m+=1)ct[b[m]]={},ct[b[m]].text=M[m],ct[b[m]].align=T[m];var ot=o.call(this,ct,O);N=b.map(function(Mt){return new a(l,u,O[Mt],ot,ct[Mt].text,void 0,ct[Mt].align)}),this.setTableHeaderRow(N),this.printHeaderRow(1,!1)}var at=f.reduce(function(Mt,qt){return Mt[qt.name]=qt.align,Mt},{});for(m=0;m<p.length;m+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:m,data:p[m]},this);var Q=o.call(this,p[m],O);for(y=0;y<b.length;y+=1){var xt=p[m][b[y]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:m,col:y,data:xt},this),s.call(this,new a(l,u,O[b[y]],Q,xt,m+2,at[b[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var p=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(l).map(function(m){var x=l[m];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,u[m]-p-p)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/g+p+p},this).reduce(function(m,x){return Math.max(m,x)},0)};n.setTableHeaderRow=function(l){i.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,u){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){p=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(p.y=this.internal.__cell__.margins.top||0,g.push(p)),p.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,p),this.setTextColor(x)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),t=!1}}(ni.API);var t5={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},e5=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ly=Q3(e5),i5=[100,200,300,400,500,600,700,800,900],d8=Q3(i5);function Ry(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(a){return t5[a=a||"normal"]?a:"normal"}(n.style),i=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(n.weight),r=function(a){return typeof Ly[a=a||"normal"]=="number"?a:"normal"}(n.stretch);return{family:e,style:t,weight:i,stretch:r,src:n.src||[],ref:n.ref||{name:e,style:[r,t,i].join(" ")}}}function O3(n,e,t,i){var r;for(r=t;r>=0&&r<e.length;r+=i)if(n[e[r]])return n[e[r]];for(r=t;r>=0&&r<e.length;r-=i)if(n[e[r]])return n[e[r]]}var u8={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},N3={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function F3(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function h8(n,e,t){for(var i=(t=t||{}).defaultFontFamily||"times",r=Object.assign({},u8,t.genericFontFamilies||{}),a=null,s=null,o=0;o<e.length;++o)if(r[(a=Ry(e[o])).family]&&(a.family=r[a.family]),n.hasOwnProperty(a.family)){s=n[a.family];break}if(!(s=s||n[i]))throw new Error("Could not find a font-family for the rule '"+F3(a)+"' and default family '"+i+"'.");if(s=function(l,u){if(u[l])return u[l];var p=Ly[l],f=p<=Ly.normal?-1:1,g=O3(u,e5,p,f);if(!g)throw new Error("Could not find a matching font-stretch value for "+l);return g}(a.stretch,s),s=function(l,u){if(u[l])return u[l];for(var p=t5[l],f=0;f<p.length;++f)if(u[p[f]])return u[p[f]];throw new Error("Could not find a matching font-style for "+l)}(a.style,s),!(s=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var p=d8[l],f=O3(u,i5,p,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f}(a.weight,s)))throw new Error("Failed to resolve a font for the rule '"+F3(a)+"'.");return s}function B3(n){return n.trimLeft()}function p8(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function f8(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var rg,V3,U3,Ay=["times"];(function(n){var e,t,i,r,a,s,o,l,u,p=function(z){return z=z||{},this.isStrokeTransparent=z.isStrokeTransparent||!1,this.strokeOpacity=z.strokeOpacity||1,this.strokeStyle=z.strokeStyle||"#000000",this.fillStyle=z.fillStyle||"#000000",this.isFillTransparent=z.isFillTransparent||!1,this.fillOpacity=z.fillOpacity||1,this.font=z.font||"10px sans-serif",this.textBaseline=z.textBaseline||"alphabetic",this.textAlign=z.textAlign||"left",this.lineWidth=z.lineWidth||1,this.lineJoin=z.lineJoin||"miter",this.lineCap=z.lineCap||"butt",this.path=z.path||[],this.transform=z.transform!==void 0?z.transform.clone():new l,this.globalCompositeOperation=z.globalCompositeOperation||"normal",this.globalAlpha=z.globalAlpha||1,this.clip_path=z.clip_path||[],this.currentPoint=z.currentPoint||new s,this.miterLimit=z.miterLimit||10,this.lastPoint=z.lastPoint||new s,this.lineDashOffset=z.lineDashOffset||0,this.lineDash=z.lineDash||[],this.margin=z.margin||[0,0,0,0],this.prevPageLastElemOffset=z.prevPageLastElemOffset||0,this.ignoreClearRect=typeof z.ignoreClearRect!="boolean"||z.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,t=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new p}]);var f=function(z){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var nt=z;Object.defineProperty(this,"pdf",{get:function(){return nt}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(Yt){Z=!!Yt}});var st=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return st},set:function(Yt){st=!!Yt}});var pt=0;Object.defineProperty(this,"posX",{get:function(){return pt},set:function(Yt){isNaN(Yt)||(pt=Yt)}});var ft=0;Object.defineProperty(this,"posY",{get:function(){return ft},set:function(Yt){isNaN(Yt)||(ft=Yt)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Yt){var ut;typeof Yt=="number"?ut=[Yt,Yt,Yt,Yt]:((ut=new Array(4))[0]=Yt[0],ut[1]=Yt.length>=2?Yt[1]:ut[0],ut[2]=Yt.length>=3?Yt[2]:ut[0],ut[3]=Yt.length>=4?Yt[3]:ut[1]),u.margin=ut}});var St=!1;Object.defineProperty(this,"autoPaging",{get:function(){return St},set:function(Yt){St=Yt}});var kt=0;Object.defineProperty(this,"lastBreak",{get:function(){return kt},set:function(Yt){kt=Yt}});var Qt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Qt},set:function(Yt){Qt=Yt}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Yt){Yt instanceof p&&(u=Yt)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Yt){u.path=Yt}});var ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return ie},set:function(Yt){ie=Yt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Yt){var ut;ut=g(Yt),this.ctx.fillStyle=ut.style,this.ctx.isFillTransparent=ut.a===0,this.ctx.fillOpacity=ut.a,this.pdf.setFillColor(ut.r,ut.g,ut.b,{a:ut.a}),this.pdf.setTextColor(ut.r,ut.g,ut.b,{a:ut.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Yt){var ut=g(Yt);this.ctx.strokeStyle=ut.style,this.ctx.isStrokeTransparent=ut.a===0,this.ctx.strokeOpacity=ut.a,ut.a===0?this.pdf.setDrawColor(255,255,255):(ut.a,this.pdf.setDrawColor(ut.r,ut.g,ut.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Yt){["butt","round","square"].indexOf(Yt)!==-1&&(this.ctx.lineCap=Yt,this.pdf.setLineCap(Yt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Yt){isNaN(Yt)||(this.ctx.lineWidth=Yt,this.pdf.setLineWidth(Yt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Yt){["bevel","round","miter"].indexOf(Yt)!==-1&&(this.ctx.lineJoin=Yt,this.pdf.setLineJoin(Yt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Yt){isNaN(Yt)||(this.ctx.miterLimit=Yt,this.pdf.setMiterLimit(Yt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Yt){this.ctx.textBaseline=Yt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Yt){["right","end","center","left","start"].indexOf(Yt)!==-1&&(this.ctx.textAlign=Yt)}});var ue=null;function _e(Yt,ut){if(ue===null){var Ae=function(se){var ee=[];return Object.keys(se).forEach(function(Zt){se[Zt].forEach(function(tt){var H=null;switch(tt){case"bold":H={family:Zt,weight:"bold"};break;case"italic":H={family:Zt,style:"italic"};break;case"bolditalic":H={family:Zt,weight:"bold",style:"italic"};break;case"":case"normal":H={family:Zt}}H!==null&&(H.ref={name:Zt,style:tt},ee.push(H))})}),ee}(Yt.getFontList());ue=function(se){for(var ee={},Zt=0;Zt<se.length;++Zt){var tt=Ry(se[Zt]),H=tt.family,yt=tt.stretch,Ht=tt.style,Xt=tt.weight;ee[H]=ee[H]||{},ee[H][yt]=ee[H][yt]||{},ee[H][yt][Ht]=ee[H][yt][Ht]||{},ee[H][yt][Ht][Xt]=tt}return ee}(Ae.concat(ut))}return ue}var mt=null;Object.defineProperty(this,"fontFaces",{get:function(){return mt},set:function(Yt){ue=null,mt=Yt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Yt){var ut;if(this.ctx.font=Yt,(ut=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Yt))!==null){var Ae=ut[1],se=(ut[2],ut[3]),ee=ut[4],Zt=(ut[5],ut[6]),tt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ee)[2];ee=Math.floor(tt==="px"?parseFloat(ee)*this.pdf.internal.scaleFactor:tt==="em"?parseFloat(ee)*this.pdf.getFontSize():parseFloat(ee)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ee);var H=function(ce){var Pe,Ut,Ce=[],we=ce.trim();if(we==="")return Ay;if(we in N3)return[N3[we]];for(;we!=="";){switch(Ut=null,Pe=(we=B3(we)).charAt(0)){case'"':case"'":Ut=p8(we.substring(1),Pe);break;default:Ut=f8(we)}if(Ut===null||(Ce.push(Ut[0]),(we=B3(Ut[1]))!==""&&we.charAt(0)!==","))return Ay;we=we.replace(/^,/,"")}return Ce}(Zt);if(this.fontFaces){var yt=h8(_e(this.pdf,this.fontFaces),H.map(function(ce){return{family:ce,stretch:"normal",weight:se,style:Ae}}));this.pdf.setFont(yt.ref.name,yt.ref.style)}else{var Ht="";(se==="bold"||parseInt(se,10)>=700||Ae==="bold")&&(Ht="bold"),Ae==="italic"&&(Ht+="italic"),Ht.length===0&&(Ht="normal");for(var Xt="",Wt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Se=0;Se<H.length;Se++){if(this.pdf.internal.getFont(H[Se],Ht,{noFallback:!0,disableWarning:!0})!==void 0){Xt=H[Se];break}if(Ht==="bolditalic"&&this.pdf.internal.getFont(H[Se],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Xt=H[Se],Ht="bold";else if(this.pdf.internal.getFont(H[Se],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Xt=H[Se],Ht="normal";break}}if(Xt===""){for(var ge=0;ge<H.length;ge++)if(Wt[H[ge]]){Xt=Wt[H[ge]];break}}Xt=Xt===""?"Times":Xt,this.pdf.setFont(Xt,Ht)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Yt){this.ctx.globalCompositeOperation=Yt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Yt){this.ctx.globalAlpha=Yt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Yt){this.ctx.lineDashOffset=Yt,qt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Yt){this.ctx.lineDash=Yt,qt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Yt){this.ctx.ignoreClearRect=!!Yt}})};f.prototype.setLineDash=function(z){this.lineDash=z},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){I.call(this,"fill",!1)},f.prototype.stroke=function(){I.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(z,nt){if(isNaN(z)||isNaN(nt))throw gn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new s(z,nt));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new s(z,nt)},f.prototype.closePath=function(){var z=new s(0,0),nt=0;for(nt=this.path.length-1;nt!==-1;nt--)if(this.path[nt].type==="begin"&&(0,hn.default)(this.path[nt+1])==="object"&&typeof this.path[nt+1].x=="number"){z=new s(this.path[nt+1].x,this.path[nt+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(z.x,z.y)},f.prototype.lineTo=function(z,nt){if(isNaN(z)||isNaN(nt))throw gn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new s(z,nt));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new s(Z.x,Z.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),I.call(this,null,!0)},f.prototype.quadraticCurveTo=function(z,nt,Z,st){if(isNaN(Z)||isNaN(st)||isNaN(z)||isNaN(nt))throw gn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var pt=this.ctx.transform.applyToPoint(new s(Z,st)),ft=this.ctx.transform.applyToPoint(new s(z,nt));this.path.push({type:"qct",x1:ft.x,y1:ft.y,x:pt.x,y:pt.y}),this.ctx.lastPoint=new s(pt.x,pt.y)},f.prototype.bezierCurveTo=function(z,nt,Z,st,pt,ft){if(isNaN(pt)||isNaN(ft)||isNaN(z)||isNaN(nt)||isNaN(Z)||isNaN(st))throw gn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var St=this.ctx.transform.applyToPoint(new s(pt,ft)),kt=this.ctx.transform.applyToPoint(new s(z,nt)),Qt=this.ctx.transform.applyToPoint(new s(Z,st));this.path.push({type:"bct",x1:kt.x,y1:kt.y,x2:Qt.x,y2:Qt.y,x:St.x,y:St.y}),this.ctx.lastPoint=new s(St.x,St.y)},f.prototype.arc=function(z,nt,Z,st,pt,ft){if(isNaN(z)||isNaN(nt)||isNaN(Z)||isNaN(st)||isNaN(pt))throw gn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ft=!!ft,!this.ctx.transform.isIdentity){var St=this.ctx.transform.applyToPoint(new s(z,nt));z=St.x,nt=St.y;var kt=this.ctx.transform.applyToPoint(new s(0,Z)),Qt=this.ctx.transform.applyToPoint(new s(0,0));Z=Math.sqrt(Math.pow(kt.x-Qt.x,2)+Math.pow(kt.y-Qt.y,2))}Math.abs(pt-st)>=2*Math.PI&&(st=0,pt=2*Math.PI),this.path.push({type:"arc",x:z,y:nt,radius:Z,startAngle:st,endAngle:pt,counterclockwise:ft})},f.prototype.arcTo=function(z,nt,Z,st,pt){throw new Error("arcTo not implemented.")},f.prototype.rect=function(z,nt,Z,st){if(isNaN(z)||isNaN(nt)||isNaN(Z)||isNaN(st))throw gn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(z,nt),this.lineTo(z+Z,nt),this.lineTo(z+Z,nt+st),this.lineTo(z,nt+st),this.lineTo(z,nt),this.lineTo(z+Z,nt),this.lineTo(z,nt)},f.prototype.fillRect=function(z,nt,Z,st){if(isNaN(z)||isNaN(nt)||isNaN(Z)||isNaN(st))throw gn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var pt={};this.lineCap!=="butt"&&(pt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(pt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(z,nt,Z,st),this.fill(),pt.hasOwnProperty("lineCap")&&(this.lineCap=pt.lineCap),pt.hasOwnProperty("lineJoin")&&(this.lineJoin=pt.lineJoin)}},f.prototype.strokeRect=function(z,nt,Z,st){if(isNaN(z)||isNaN(nt)||isNaN(Z)||isNaN(st))throw gn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(z,nt,Z,st),this.stroke())},f.prototype.clearRect=function(z,nt,Z,st){if(isNaN(z)||isNaN(nt)||isNaN(Z)||isNaN(st))throw gn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(z,nt,Z,st))},f.prototype.save=function(z){z=typeof z!="boolean"||z;for(var nt=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(nt),z){this.ctx.fontSize=this.pdf.internal.getFontSize();var st=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=st}},f.prototype.restore=function(z){z=typeof z!="boolean"||z;for(var nt=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(nt),z&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(z){var nt,Z,st,pt;if(z.isCanvasGradient===!0&&(z=z.getColor()),!z)return{r:0,g:0,b:0,a:0,style:z};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(z))nt=0,Z=0,st=0,pt=0;else{var ft=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(z);if(ft!==null)nt=parseInt(ft[1]),Z=parseInt(ft[2]),st=parseInt(ft[3]),pt=1;else if((ft=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(z))!==null)nt=parseInt(ft[1]),Z=parseInt(ft[2]),st=parseInt(ft[3]),pt=parseFloat(ft[4]);else{if(pt=1,typeof z=="string"&&z.charAt(0)!=="#"){var St=new X3(z);z=St.ok?St.toHex():"#000000"}z.length===4?(nt=z.substring(1,2),nt+=nt,Z=z.substring(2,3),Z+=Z,st=z.substring(3,4),st+=st):(nt=z.substring(1,3),Z=z.substring(3,5),st=z.substring(5,7)),nt=parseInt(nt,16),Z=parseInt(Z,16),st=parseInt(st,16)}}return{r:nt,g:Z,b:st,a:pt,style:z}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(z,nt,Z,st){if(isNaN(nt)||isNaN(Z)||typeof z!="string")throw gn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(st=isNaN(st)?void 0:st,!m.call(this)){var pt=Q(this.ctx.transform.rotation),ft=this.ctx.transform.scaleX;V.call(this,{text:z,x:nt,y:Z,scale:ft,angle:pt,align:this.textAlign,maxWidth:st})}},f.prototype.strokeText=function(z,nt,Z,st){if(isNaN(nt)||isNaN(Z)||typeof z!="string")throw gn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){st=isNaN(st)?void 0:st;var pt=Q(this.ctx.transform.rotation),ft=this.ctx.transform.scaleX;V.call(this,{text:z,x:nt,y:Z,scale:ft,renderingMode:"stroke",angle:pt,align:this.textAlign,maxWidth:st})}},f.prototype.measureText=function(z){if(typeof z!="string")throw gn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var nt=this.pdf,Z=this.pdf.internal.scaleFactor,st=nt.internal.getFontSize(),pt=nt.getStringUnitWidth(z)*st/nt.internal.scaleFactor,ft=function(St){var kt=(St=St||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return kt}}),this};return new ft({width:pt*=Math.round(96*Z/72*1e4)/1e4})},f.prototype.scale=function(z,nt){if(isNaN(z)||isNaN(nt))throw gn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new l(z,0,0,nt,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},f.prototype.rotate=function(z){if(isNaN(z))throw gn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var nt=new l(Math.cos(z),Math.sin(z),-Math.sin(z),Math.cos(z),0,0);this.ctx.transform=this.ctx.transform.multiply(nt)},f.prototype.translate=function(z,nt){if(isNaN(z)||isNaN(nt))throw gn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new l(1,0,0,1,z,nt);this.ctx.transform=this.ctx.transform.multiply(Z)},f.prototype.transform=function(z,nt,Z,st,pt,ft){if(isNaN(z)||isNaN(nt)||isNaN(Z)||isNaN(st)||isNaN(pt)||isNaN(ft))throw gn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var St=new l(z,nt,Z,st,pt,ft);this.ctx.transform=this.ctx.transform.multiply(St)},f.prototype.setTransform=function(z,nt,Z,st,pt,ft){z=isNaN(z)?1:z,nt=isNaN(nt)?0:nt,Z=isNaN(Z)?0:Z,st=isNaN(st)?1:st,pt=isNaN(pt)?0:pt,ft=isNaN(ft)?0:ft,this.ctx.transform=new l(z,nt,Z,st,pt,ft)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(z,nt,Z,st,pt,ft,St,kt,Qt){var ie=this.pdf.getImageProperties(z),ue=1,_e=1,mt=1,Yt=1;st!==void 0&&kt!==void 0&&(mt=kt/st,Yt=Qt/pt,ue=ie.width/st*kt/st,_e=ie.height/pt*Qt/pt),ft===void 0&&(ft=nt,St=Z,nt=0,Z=0),st!==void 0&&kt===void 0&&(kt=st,Qt=pt),st===void 0&&kt===void 0&&(kt=ie.width,Qt=ie.height);for(var ut,Ae=this.ctx.transform.decompose(),se=Q(Ae.rotate.shx),ee=new l,Zt=(ee=(ee=(ee=ee.multiply(Ae.translate)).multiply(Ae.skew)).multiply(Ae.scale)).applyToRectangle(new o(ft-nt*mt,St-Z*Yt,st*ue,pt*_e)),tt=S.call(this,Zt),H=[],yt=0;yt<tt.length;yt+=1)H.indexOf(tt[yt])===-1&&H.push(tt[yt]);if(T(H),this.autoPaging)for(var Ht=H[0],Xt=H[H.length-1],Wt=Ht;Wt<Xt+1;Wt++){this.pdf.setPage(Wt);var Se=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ge=Wt===1?this.posY+this.margin[0]:this.margin[0],ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ut=Wt===1?0:ce+(Wt-2)*Pe;if(this.ctx.clip_path.length!==0){var Ce=this.path;ut=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(ut,this.posX+this.margin[3],-Ut+ge+this.ctx.prevPageLastElemOffset),O.call(this,"fill",!0),this.path=Ce}var we=JSON.parse(JSON.stringify(Zt));we=M([we],this.posX+this.margin[3],-Ut+ge+this.ctx.prevPageLastElemOffset)[0];var je=(Wt>Ht||Wt<Xt)&&y.call(this);je&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Se,Pe,null).clip().discardPath()),this.pdf.addImage(z,"JPEG",we.x,we.y,we.w,we.h,null,null,se),je&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(z,"JPEG",Zt.x,Zt.y,Zt.w,Zt.h,null,null,se)};var S=function(z,nt,Z){var st=[];nt=nt||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var pt=this.posY+this.ctx.prevPageLastElemOffset;switch(z.type){default:case"mt":case"lt":st.push(Math.floor((z.y+pt)/Z)+1);break;case"arc":st.push(Math.floor((z.y+pt-z.radius)/Z)+1),st.push(Math.floor((z.y+pt+z.radius)/Z)+1);break;case"qct":var ft=xt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x,z.y);st.push(Math.floor((ft.y+pt)/Z)+1),st.push(Math.floor((ft.y+ft.h+pt)/Z)+1);break;case"bct":var St=Mt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x2,z.y2,z.x,z.y);st.push(Math.floor((St.y+pt)/Z)+1),st.push(Math.floor((St.y+St.h+pt)/Z)+1);break;case"rect":st.push(Math.floor((z.y+pt)/Z)+1),st.push(Math.floor((z.y+z.h+pt)/Z)+1)}for(var kt=0;kt<st.length;kt+=1)for(;this.pdf.internal.getNumberOfPages()<st[kt];)b.call(this);return st},b=function(){var z=this.fillStyle,nt=this.strokeStyle,Z=this.font,st=this.lineCap,pt=this.lineWidth,ft=this.lineJoin;this.pdf.addPage(),this.fillStyle=z,this.strokeStyle=nt,this.font=Z,this.lineCap=st,this.lineWidth=pt,this.lineJoin=ft},M=function(z,nt,Z){for(var st=0;st<z.length;st++)switch(z[st].type){case"bct":z[st].x2+=nt,z[st].y2+=Z;case"qct":z[st].x1+=nt,z[st].y1+=Z;case"mt":case"lt":case"arc":default:z[st].x+=nt,z[st].y+=Z}return z},T=function(z){return z.sort(function(nt,Z){return nt-Z})},I=function(z,nt){for(var Z,st,pt=this.fillStyle,ft=this.strokeStyle,St=this.lineCap,kt=this.lineWidth,Qt=Math.abs(kt*this.ctx.transform.scaleX),ie=this.lineJoin,ue=JSON.parse(JSON.stringify(this.path)),_e=JSON.parse(JSON.stringify(this.path)),mt=[],Yt=0;Yt<_e.length;Yt++)if(_e[Yt].x!==void 0)for(var ut=S.call(this,_e[Yt]),Ae=0;Ae<ut.length;Ae+=1)mt.indexOf(ut[Ae])===-1&&mt.push(ut[Ae]);for(var se=0;se<mt.length;se++)for(;this.pdf.internal.getNumberOfPages()<mt[se];)b.call(this);if(T(mt),this.autoPaging)for(var ee=mt[0],Zt=mt[mt.length-1],tt=ee;tt<Zt+1;tt++){this.pdf.setPage(tt),this.fillStyle=pt,this.strokeStyle=ft,this.lineCap=St,this.lineWidth=Qt,this.lineJoin=ie;var H=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yt=tt===1?this.posY+this.margin[0]:this.margin[0],Ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Wt=tt===1?0:Ht+(tt-2)*Xt;if(this.ctx.clip_path.length!==0){var Se=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(Z,this.posX+this.margin[3],-Wt+yt+this.ctx.prevPageLastElemOffset),O.call(this,z,!0),this.path=Se}if(st=JSON.parse(JSON.stringify(ue)),this.path=M(st,this.posX+this.margin[3],-Wt+yt+this.ctx.prevPageLastElemOffset),nt===!1||tt===0){var ge=(tt>ee||tt<Zt)&&y.call(this);ge&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],H,Xt,null).clip().discardPath()),O.call(this,z,nt),ge&&this.pdf.restoreGraphicsState()}this.lineWidth=kt}else this.lineWidth=Qt,O.call(this,z,nt),this.lineWidth=kt;this.path=ue},O=function(z,nt){if((z!=="stroke"||nt||!x.call(this))&&(z==="stroke"||nt||!m.call(this))){for(var Z,st,pt=[],ft=this.path,St=0;St<ft.length;St++){var kt=ft[St];switch(kt.type){case"begin":pt.push({begin:!0});break;case"close":pt.push({close:!0});break;case"mt":pt.push({start:kt,deltas:[],abs:[]});break;case"lt":var Qt=pt.length;if(ft[St-1]&&!isNaN(ft[St-1].x)&&(Z=[kt.x-ft[St-1].x,kt.y-ft[St-1].y],Qt>0)){for(;Qt>=0;Qt--)if(pt[Qt-1].close!==!0&&pt[Qt-1].begin!==!0){pt[Qt-1].deltas.push(Z),pt[Qt-1].abs.push(kt);break}}break;case"bct":Z=[kt.x1-ft[St-1].x,kt.y1-ft[St-1].y,kt.x2-ft[St-1].x,kt.y2-ft[St-1].y,kt.x-ft[St-1].x,kt.y-ft[St-1].y],pt[pt.length-1].deltas.push(Z);break;case"qct":var ie=ft[St-1].x+2/3*(kt.x1-ft[St-1].x),ue=ft[St-1].y+2/3*(kt.y1-ft[St-1].y),_e=kt.x+2/3*(kt.x1-kt.x),mt=kt.y+2/3*(kt.y1-kt.y),Yt=kt.x,ut=kt.y;Z=[ie-ft[St-1].x,ue-ft[St-1].y,_e-ft[St-1].x,mt-ft[St-1].y,Yt-ft[St-1].x,ut-ft[St-1].y],pt[pt.length-1].deltas.push(Z);break;case"arc":pt.push({deltas:[],abs:[],arc:!0}),Array.isArray(pt[pt.length-1].abs)&&pt[pt.length-1].abs.push(kt)}}st=nt?null:z==="stroke"?"stroke":"fill";for(var Ae=!1,se=0;se<pt.length;se++)if(pt[se].arc)for(var ee=pt[se].abs,Zt=0;Zt<ee.length;Zt++){var tt=ee[Zt];tt.type==="arc"?B.call(this,tt.x,tt.y,tt.radius,tt.startAngle,tt.endAngle,tt.counterclockwise,void 0,nt,!Ae):$.call(this,tt.x,tt.y),Ae=!0}else if(pt[se].close===!0)this.pdf.internal.out("h"),Ae=!1;else if(pt[se].begin!==!0){var H=pt[se].start.x,yt=pt[se].start.y;K.call(this,pt[se].deltas,H,yt),Ae=!0}st&&R.call(this,st),nt&&F.call(this)}},U=function(z){var nt=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=nt*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return z-Z;case"top":return z+nt-Z;case"hanging":return z+nt-2*Z;case"middle":return z+nt/2-Z;case"ideographic":return z;case"alphabetic":default:return z}},N=function(z){return z+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var z=function(){};return z.colorStops=[],z.addColorStop=function(nt,Z){this.colorStops.push([nt,Z])},z.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},z.isCanvasGradient=!0,z},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var B=function(z,nt,Z,st,pt,ft,St,kt,Qt){for(var ie=ot.call(this,Z,st,pt,ft),ue=0;ue<ie.length;ue++){var _e=ie[ue];ue===0&&(Qt?P.call(this,_e.x1+z,_e.y1+nt):$.call(this,_e.x1+z,_e.y1+nt)),ct.call(this,z,nt,_e.x2,_e.y2,_e.x3,_e.y3,_e.x4,_e.y4)}kt?F.call(this):R.call(this,St)},R=function(z){switch(z){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(z,nt){this.pdf.internal.out(t(z)+" "+i(nt)+" m")},V=function(z){var nt;switch(z.align){case"right":case"end":nt="right";break;case"center":nt="center";break;case"left":case"start":default:nt="left"}var Z=this.pdf.getTextDimensions(z.text),st=U.call(this,z.y),pt=N.call(this,st)-Z.h,ft=this.ctx.transform.applyToPoint(new s(z.x,st)),St=this.ctx.transform.decompose(),kt=new l;kt=(kt=(kt=kt.multiply(St.translate)).multiply(St.skew)).multiply(St.scale);for(var Qt,ie,ue,_e=this.ctx.transform.applyToRectangle(new o(z.x,st,Z.w,Z.h)),mt=kt.applyToRectangle(new o(z.x,pt,Z.w,Z.h)),Yt=S.call(this,mt),ut=[],Ae=0;Ae<Yt.length;Ae+=1)ut.indexOf(Yt[Ae])===-1&&ut.push(Yt[Ae]);if(T(ut),this.autoPaging)for(var se=ut[0],ee=ut[ut.length-1],Zt=se;Zt<ee+1;Zt++){this.pdf.setPage(Zt);var tt=Zt===1?this.posY+this.margin[0]:this.margin[0],H=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[2],Ht=yt-this.margin[0],Xt=this.pdf.internal.pageSize.width-this.margin[1],Wt=Xt-this.margin[3],Se=Zt===1?0:H+(Zt-2)*Ht;if(this.ctx.clip_path.length!==0){var ge=this.path;Qt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(Qt,this.posX+this.margin[3],-1*Se+tt),O.call(this,"fill",!0),this.path=ge}var ce=M([JSON.parse(JSON.stringify(mt))],this.posX+this.margin[3],-Se+tt+this.ctx.prevPageLastElemOffset)[0];z.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*z.scale),ue=this.lineWidth,this.lineWidth=ue*z.scale);var Pe=this.autoPaging!=="text";if(Pe||ce.y+ce.h<=yt){if(Pe||ce.y>=tt&&ce.x<=Xt){var Ut=Pe?z.text:this.pdf.splitTextToSize(z.text,z.maxWidth||Xt-ce.x)[0],Ce=M([JSON.parse(JSON.stringify(_e))],this.posX+this.margin[3],-Se+tt+this.ctx.prevPageLastElemOffset)[0],we=Pe&&(Zt>se||Zt<ee)&&y.call(this);we&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wt,Ht,null).clip().discardPath()),this.pdf.text(Ut,Ce.x,Ce.y,{angle:z.angle,align:nt,renderingMode:z.renderingMode}),we&&this.pdf.restoreGraphicsState()}}else ce.y<yt&&(this.ctx.prevPageLastElemOffset+=yt-ce.y);z.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=ue)}else z.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*z.scale),ue=this.lineWidth,this.lineWidth=ue*z.scale),this.pdf.text(z.text,ft.x+this.posX,ft.y+this.posY,{angle:z.angle,align:nt,renderingMode:z.renderingMode,maxWidth:z.maxWidth}),z.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=ue)},$=function(z,nt,Z,st){Z=Z||0,st=st||0,this.pdf.internal.out(t(z+Z)+" "+i(nt+st)+" l")},K=function(z,nt,Z){return this.pdf.lines(z,nt,Z,null,null)},ct=function(z,nt,Z,st,pt,ft,St,kt){this.pdf.internal.out([e(r(Z+z)),e(a(st+nt)),e(r(pt+z)),e(a(ft+nt)),e(r(St+z)),e(a(kt+nt)),"c"].join(" "))},ot=function(z,nt,Z,st){for(var pt=2*Math.PI,ft=Math.PI/2;nt>Z;)nt-=pt;var St=Math.abs(Z-nt);St<pt&&st&&(St=pt-St);for(var kt=[],Qt=st?-1:1,ie=nt;St>1e-5;){var ue=ie+Qt*Math.min(St,ft);kt.push(at.call(this,z,ie,ue)),St-=Math.abs(ue-ie),ie=ue}return kt},at=function(z,nt,Z){var st=(Z-nt)/2,pt=z*Math.cos(st),ft=z*Math.sin(st),St=pt,kt=-ft,Qt=St*St+kt*kt,ie=Qt+St*pt+kt*ft,ue=4/3*(Math.sqrt(2*Qt*ie)-ie)/(St*ft-kt*pt),_e=St-ue*kt,mt=kt+ue*St,Yt=_e,ut=-mt,Ae=st+nt,se=Math.cos(Ae),ee=Math.sin(Ae);return{x1:z*Math.cos(nt),y1:z*Math.sin(nt),x2:_e*se-mt*ee,y2:_e*ee+mt*se,x3:Yt*se-ut*ee,y3:Yt*ee+ut*se,x4:z*Math.cos(Z),y4:z*Math.sin(Z)}},Q=function(z){return 180*z/Math.PI},xt=function(z,nt,Z,st,pt,ft){var St=z+.5*(Z-z),kt=nt+.5*(st-nt),Qt=pt+.5*(Z-pt),ie=ft+.5*(st-ft),ue=Math.min(z,pt,St,Qt),_e=Math.max(z,pt,St,Qt),mt=Math.min(nt,ft,kt,ie),Yt=Math.max(nt,ft,kt,ie);return new o(ue,mt,_e-ue,Yt-mt)},Mt=function(z,nt,Z,st,pt,ft,St,kt){var Qt,ie,ue,_e,mt,Yt,ut,Ae,se,ee,Zt,tt,H,yt,Ht=Z-z,Xt=st-nt,Wt=pt-Z,Se=ft-st,ge=St-pt,ce=kt-ft;for(ie=0;ie<41;ie++)se=(ut=(ue=z+(Qt=ie/40)*Ht)+Qt*((mt=Z+Qt*Wt)-ue))+Qt*(mt+Qt*(pt+Qt*ge-mt)-ut),ee=(Ae=(_e=nt+Qt*Xt)+Qt*((Yt=st+Qt*Se)-_e))+Qt*(Yt+Qt*(ft+Qt*ce-Yt)-Ae),ie==0?(Zt=se,tt=ee,H=se,yt=ee):(Zt=Math.min(Zt,se),tt=Math.min(tt,ee),H=Math.max(H,se),yt=Math.max(yt,ee));return new o(Math.round(Zt),Math.round(tt),Math.round(H-Zt),Math.round(yt-tt))},qt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var z,nt,Z=(z=this.ctx.lineDash,nt=this.ctx.lineDashOffset,JSON.stringify({lineDash:z,lineDashOffset:nt}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(ni.API),function(n){var e=function(a){var s,o,l,u,p,f,g,m,x,y;for(/[^\x00-\xFF]/.test(a),o=[],l=0,u=(a+=s="\0\0\0\0".slice(a.length%4||4)).length;u>l;l+=4)(p=(a.charCodeAt(l)<<24)+(a.charCodeAt(l+1)<<16)+(a.charCodeAt(l+2)<<8)+a.charCodeAt(l+3))!==0?(f=(p=((p=((p=((p=(p-(y=p%85))/85)-(x=p%85))/85)-(m=p%85))/85)-(g=p%85))/85)%85,o.push(f+33,g+33,m+33,x+33,y+33)):o.push(122);return function(S,b){for(var M=b;M>0;M--)S.pop()}(o,s.length),String.fromCharCode.apply(String,o)+"~>"},t=function(a){var s,o,l,u,p,f=String,g="length",m=255,x="charCodeAt",y="slice",S="replace";for(a[y](-2),a=a[y](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),l=[],u=0,p=(a+=s="uuuuu"[y](a[g]%5||5))[g];p>u;u+=5)o=52200625*(a[x](u)-33)+614125*(a[x](u+1)-33)+7225*(a[x](u+2)-33)+85*(a[x](u+3)-33)+(a[x](u+4)-33),l.push(m&o>>24,m&o>>16,m&o>>8,m&o);return function(b,M){for(var T=M;T>0;T--)b.pop()}(l,s[g]),f.fromCharCode.apply(f,l)},i=function(a){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),s.test(a)===!1)return"";for(var o="",l=0;l<a.length;l+=2)o+=String.fromCharCode("0x"+(a[l]+a[l+1]));return o},r=function(a){for(var s=new Uint8Array(a.length),o=a.length;o--;)s[o]=a.charCodeAt(o);return a=(s=eg(s)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(a,s){var o=0,l=a||"",u=[];for(typeof(s=s||[])=="string"&&(s=[s]),o=0;o<s.length;o+=1)switch(s[o]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=r(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(ni.API),function(n){n.loadFile=function(e,t,i){return function(r,a,s){a=a!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(l,u,p){var f=new XMLHttpRequest,g=0,m=function(x){var y=x.length,S=[],b=String.fromCharCode;for(g=0;g<y;g+=1)S.push(b(255&x.charCodeAt(g)));return S.join("")};if(f.open("GET",l,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?p(m(this.responseText)):p(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(r,a,s)}catch{}return o}(e,t,i)},n.loadImageFile=n.loadFile}(ni.API),function(n){function e(){return(ri.html2canvas?Promise.resolve(ri.html2canvas):import("./chunk-GEXE2TPJ.mjs")).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function t(){return(ri.DOMPurify?Promise.resolve(ri.DOMPurify):import("./chunk-NDCMNZFU.mjs")).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var i=function(s){var o=(0,hn.default)(s);return o==="undefined"?"undefined":o==="string"||s instanceof String?"string":o==="number"||s instanceof Number?"number":o==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":o==="object"?"object":"unknown"},r=function(s,o){var l=document.createElement(s);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},a=function s(o){var l=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),u=s.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,s,1,[s])).set(o)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(s,o){return s.__proto__=o||a.prototype,s},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(s,o){return this.then(function(){switch(o=o||function(l){switch(i(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(t).then(function(l){return this.set({src:r("div",{innerHTML:s,dompurify:l})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},a.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,p){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),g=u.firstChild;g;g=g.nextSibling)p!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||f.appendChild(l(g,p));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var g=0;g<u.length;++g){var m=u[g],x=m.src.find(function(y){return y.format==="truetype"});x&&l.addFont(x.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(s,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(s,o):this.outputPdf(s,o)},a.prototype.outputPdf=function(s,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,o)})},a.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},a.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(s){if(i(s)!=="object")return this;var o=Object.keys(s||{}).map(function(l){if(l in a.template.prop)return function(){this.prop[l]=s[l]};switch(l){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[l]=s[l]}}},this);return this.then(function(){return this.thenList(o)})},a.prototype.get=function(s,o){return this.then(function(){var l=s in a.template.prop?this.prop[s]:this.opt[s];return o?o(l):l})},a.prototype.setMargin=function(s){return this.then(function(){switch(i(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},a.prototype.setPageSize=function(s){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(s=s||ni.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:o(s.inner.width,s.k),height:o(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},a.prototype.setProgress=function(s,o,l,u){return s!=null&&(this.progress.val=s),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(s,o,l,u){return this.setProgress(s?this.progress.val+s:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(s,o){var l=this;return this.thenCore(s,o,function(u,p){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return l.updateProgress(null,u),f}).then(u,p).then(function(f){return l.updateProgress(1),f})})},a.prototype.thenCore=function(s,o,l){l=l||Promise.prototype.then,s&&(s=s.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),p=l.call(u,s,o);return a.convert(p,this.__proto__)},a.prototype.thenExternal=function(s,o){return Promise.prototype.then.call(this,s,o)},a.prototype.thenList=function(s){var o=this;return s.forEach(function(l){o=o.thenCore(l)}),o},a.prototype.catch=function(s){s&&(s=s.bind(this));var o=Promise.prototype.catch.call(this,s);return a.convert(o,this)},a.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},a.prototype.error=function(s){return this.then(function(){throw new Error(s)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,ni.getPageSize=function(s,o,l){if((0,hn.default)(s)==="object"){var u=s;s=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",s=(""+(s||"P")).toLowerCase();var p,f=(""+l).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+o}var m,x=0,y=0;if(g.hasOwnProperty(f))x=g[f][1]/p,y=g[f][0]/p;else try{x=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(s==="p"||s==="portrait")s="p",y>x&&(m=y,y=x,x=m);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",x>y&&(m=y,y=x,x=m)}return{width:y,height:x,unit:o,k:p,orientation:s}},n.html=function(s,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(Ry):null;var l=new a(o);return o.worker?l:l.from(s).doCallback()}}(ni.API),ni.API.addJS=function(n){return U3=n,this.internal.events.subscribe("postPutResources",function(){rg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(rg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),V3=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+U3+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){rg!==void 0&&V3!==void 0&&this.internal.out("/Names <</JavaScript "+rg+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=t.outline.render().split(/\r\n/),a=0;a<r.length;a++){var s=r[a],o=i.exec(s);if(o!=null){var l=o[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,p=[];for(a=0;a<u;a++){var f=t.internal.newObject();p.push(f);var g=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<p.length;a++)t.internal.write("(page_"+(a+1)+")"+p[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(i,r,a){var s={title:r,options:a,children:[]};return i==null&&(i=this.root),i.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(i){i.id=t.internal.newObjectDeferred();for(var r=0;r<i.children.length;r++)this.genIds_r(i.children[r])},t.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},t.outline.renderItems=function(i){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<i.children.length;a++){var s=i.children[a];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(i)),a>0&&this.line("/Prev "+this.makeRef(i.children[a-1])),a<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[a+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var l=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var u=0;u<i.children.length;u++)this.renderItems(i.children[u])},t.outline.line=function(i){this.ctx.val+=i+`\r
`},t.outline.makeRef=function(i){return i.id+" 0 R"},t.outline.makeString=function(i){return"("+t.internal.pdfEscape(i)+")"},t.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(i,r){for(var a=0;a<r.children.length;a++)i.count++,this.count_r(i,r.children[a]);return i.count}}])}(ni.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,i,r,a,s,o){var l,u=this.decode.DCT_DECODE,p=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(f){for(var g,m=256*f.charCodeAt(4)+f.charCodeAt(5),x=f.length,y={width:0,height:0,numcomponents:1},S=4;S<x;S+=2){if(S+=m,e.indexOf(f.charCodeAt(S+1))!==-1){g=256*f.charCodeAt(S+5)+f.charCodeAt(S+6),y={width:256*f.charCodeAt(S+7)+f.charCodeAt(S+8),height:g,numcomponents:f.charCodeAt(S+9)};break}m=256*f.charCodeAt(S+2)+f.charCodeAt(S+3)}return y}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}p={data:t,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:i,alias:r}}return p}}(ni.API);var fu,ag,z3,H3,W3,m8=function(){var n,e,t;function i(a){var s,o,l,u,p,f,g,m,x,y,S,b,M,T;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(s=this.readUInt32(),x=(function(){var I,O;for(O=[],I=0;I<4;++I)O.push(String.fromCharCode(this.data[this.pos++]));return O}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*p/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,s-=4),a=f?.data||this.imgData,b=0;0<=s?b<s:b>s;0<=s?++b:--b)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(M=0;0<=y?M<y:M>y;0<=y?++M:--M)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":g=(S=this.read(s)).indexOf(0),m=String.fromCharCode.apply(String,S.slice(0,g)),this.text[m]=String.fromCharCode.apply(String,S.slice(g+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(T=this.colorType)===4||T===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(a){var s,o;for(o=[],s=0;0<=a?s<a:s>a;0<=a?++s:--s)o.push(this.data[this.pos++]);return o},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(a){var s=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*s),l=0,u=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function p(f,g,m,x){var y,S,b,M,T,I,O,U,N,B,R,F,P,V,$,K,ct,ot,at,Q,xt,Mt=Math.ceil((u.width-f)/m),qt=Math.ceil((u.height-g)/x),z=u.width==Mt&&u.height==qt;for(V=s*Mt,F=z?o:new Uint8Array(V*qt),I=a.length,P=0,S=0;P<qt&&l<I;){switch(a[l++]){case 0:for(M=ct=0;ct<V;M=ct+=1)F[S++]=a[l++];break;case 1:for(M=ot=0;ot<V;M=ot+=1)y=a[l++],T=M<s?0:F[S-s],F[S++]=(y+T)%256;break;case 2:for(M=at=0;at<V;M=at+=1)y=a[l++],b=(M-M%s)/s,$=P&&F[(P-1)*V+b*s+M%s],F[S++]=($+y)%256;break;case 3:for(M=Q=0;Q<V;M=Q+=1)y=a[l++],b=(M-M%s)/s,T=M<s?0:F[S-s],$=P&&F[(P-1)*V+b*s+M%s],F[S++]=(y+Math.floor((T+$)/2))%256;break;case 4:for(M=xt=0;xt<V;M=xt+=1)y=a[l++],b=(M-M%s)/s,T=M<s?0:F[S-s],P===0?$=K=0:($=F[(P-1)*V+b*s+M%s],K=b&&F[(P-1)*V+(b-1)*s+M%s]),O=T+$-K,U=Math.abs(O-T),B=Math.abs(O-$),R=Math.abs(O-K),N=U<=B&&U<=R?T:B<=R?$:K,F[S++]=(y+N)%256;break;default:throw new Error("Invalid filter algorithm: "+a[l-1])}if(!z){var nt=((g+P*x)*u.width+f)*s,Z=P*V;for(M=0;M<Mt;M+=1){for(var st=0;st<s;st+=1)o[nt++]=F[Z++];nt+=(m-1)*s}}P++}}return a=k3(a),u.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),o},i.prototype.decodePalette=function(){var a,s,o,l,u,p,f,g,m;for(o=this.palette,p=this.transparency.indexed||[],u=new Uint8Array((p.length||0)+o.length),l=0,a=0,s=f=0,g=o.length;f<g;s=f+=3)u[l++]=o[s],u[l++]=o[s+1],u[l++]=o[s+2],u[l++]=(m=p[a++])!=null?m:255;return u},i.prototype.copyToImageData=function(a,s){var o,l,u,p,f,g,m,x,y,S,b;if(l=this.colors,y=null,o=this.hasAlphaChannel,this.palette.length&&(y=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),l=4,o=!0),x=(u=a.data||a).length,f=y||s,p=g=0,l===1)for(;p<x;)m=y?4*s[p/4]:g,S=f[m++],u[p++]=S,u[p++]=S,u[p++]=S,u[p++]=o?f[m++]:255,g=m;else for(;p<x;)m=y?4*s[p/4]:g,u[p++]=f[m++],u[p++]=f[m++],u[p++]=f[m++],u[p++]=o?f[m++]:255,g=m},i.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var r=function(){if(Object.prototype.toString.call(ri)==="[object Window]"){try{e=ri.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return r(),n=function(a){var s;if(r()===!0)return t.width=a.width,t.height=a.height,t.clearRect(0,0,a.width,a.height),t.putImageData(a,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(a){var s,o,l,u,p,f,g,m;if(this.animation){for(m=[],o=p=0,f=(g=this.animation.frames).length;p<f;o=++p)s=g[o],l=a.createImageData(s.width,s.height),u=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(l,u),s.imageData=l,m.push(s.image=n(l));return m}},i.prototype.renderFrame=function(a,s){var o,l,u;return o=(l=this.animation.frames)[s],u=l[s-1],s===0&&a.clearRect(0,0,this.width,this.height),u?.disposeOp===1?a.clearRect(u.xOffset,u.yOffset,u.width,u.height):u?.disposeOp===2&&a.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&a.clearRect(o.xOffset,o.yOffset,o.width,o.height),a.drawImage(o.image,o.xOffset,o.yOffset)},i.prototype.animate=function(a){var s,o,l,u,p,f,g=this;return o=0,f=this.animation,u=f.numFrames,l=f.frames,p=f.numPlays,(s=function(){var m,x;if(m=o++%u,x=l[m],g.renderFrame(a,m),u>1&&o/u<p)return g.animation._timeout=setTimeout(s,x.delay)})()},i.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},i.prototype.render=function(a){var s,o;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,s=a.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(o=s.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),s.putImageData(o,0,0))},i}();function g8(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,i=n[e++]|n[e++]<<8,r=n[e++],a=r>>7,s=1<<(7&r)+1;n[e++],n[e++];var o=null,l=null;a&&(o=e,l=s,e+=3*s);var u=!0,p=[],f=0,g=null,m=0,x=null;for(this.width=t,this.height=i;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,x=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((P=n[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=n[e++];f=n[e++]|n[e++]<<8,g=n[e++],!(1&y)&&(g=null),m=y>>2&7,e++;break;case 254:for(;;){if(!((P=n[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var S=n[e++]|n[e++]<<8,b=n[e++]|n[e++]<<8,M=n[e++]|n[e++]<<8,T=n[e++]|n[e++]<<8,I=n[e++],O=I>>6&1,U=1<<(7&I)+1,N=o,B=l,R=!1;I>>7&&(R=!0,N=e,B=U,e+=3*U);var F=e;for(e++;;){var P;if(!((P=n[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}p.push({x:S,y:b,width:M,height:T,has_local_palette:R,palette_offset:N,palette_size:B,data_offset:F,data_length:e-F,transparent_index:g,interlaced:!!O,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return x},this.frameInfo=function(V){if(V<0||V>=p.length)throw new Error("Frame index out of range.");return p[V]},this.decodeAndBlitFrameBGRA=function(V,$){var K=this.frameInfo(V),ct=K.width*K.height,ot=new Uint8Array(ct);j3(n,K.data_offset,ot,ct);var at=K.palette_offset,Q=K.transparent_index;Q===null&&(Q=256);var xt=K.width,Mt=t-xt,qt=xt,z=4*(K.y*t+K.x),nt=4*((K.y+K.height)*t+K.x),Z=z,st=4*Mt;K.interlaced===!0&&(st+=4*t*7);for(var pt=8,ft=0,St=ot.length;ft<St;++ft){var kt=ot[ft];if(qt===0&&(qt=xt,(Z+=st)>=nt&&(st=4*Mt+4*t*(pt-1),Z=z+(xt+Mt)*(pt<<1),pt>>=1)),kt===Q)Z+=4;else{var Qt=n[at+3*kt],ie=n[at+3*kt+1],ue=n[at+3*kt+2];$[Z++]=ue,$[Z++]=ie,$[Z++]=Qt,$[Z++]=255}--qt}},this.decodeAndBlitFrameRGBA=function(V,$){var K=this.frameInfo(V),ct=K.width*K.height,ot=new Uint8Array(ct);j3(n,K.data_offset,ot,ct);var at=K.palette_offset,Q=K.transparent_index;Q===null&&(Q=256);var xt=K.width,Mt=t-xt,qt=xt,z=4*(K.y*t+K.x),nt=4*((K.y+K.height)*t+K.x),Z=z,st=4*Mt;K.interlaced===!0&&(st+=4*t*7);for(var pt=8,ft=0,St=ot.length;ft<St;++ft){var kt=ot[ft];if(qt===0&&(qt=xt,(Z+=st)>=nt&&(st=4*Mt+4*t*(pt-1),Z=z+(xt+Mt)*(pt<<1),pt>>=1)),kt===Q)Z+=4;else{var Qt=n[at+3*kt],ie=n[at+3*kt+1],ue=n[at+3*kt+2];$[Z++]=Qt,$[Z++]=ie,$[Z++]=ue,$[Z++]=255}--qt}}}function j3(n,e,t,i){for(var r=n[e++],a=1<<r,s=a+1,o=s+1,l=r+1,u=(1<<l)-1,p=0,f=0,g=0,m=n[e++],x=new Int32Array(4096),y=null;;){for(;p<16&&m!==0;)f|=n[e++]<<p,p+=8,m===1?m=n[e++]:--m;if(p<l)break;var S=f&u;if(f>>=l,p-=l,S!==a){if(S===s)break;for(var b=S<o?S:y,M=0,T=b;T>a;)T=x[T]>>8,++M;var I=T;if(g+M+(b!==S?1:0)>i)return void gn.log("Warning, gif stream longer than expected.");t[g++]=I;var O=g+=M;for(b!==S&&(t[g++]=I),T=b;M--;)T=x[T],t[--O]=255&T,T>>=8;y!==null&&o<4096&&(x[o++]=y<<8|I,o>=u+1&&l<12&&(++l,u=u<<1|1)),y=S}else o=s+1,u=(1<<(l=r+1))-1,y=null}return g!==i&&gn.log("Warning, gif stream shorter than expected."),t}function Ty(n){var e,t,i,r,a,s=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),p=new Array(64),f=new Array(65535),g=new Array(65535),m=new Array(64),x=new Array(64),y=[],S=0,b=7,M=new Array(64),T=new Array(64),I=new Array(64),O=new Array(256),U=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],B=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],V=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ct=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ot(z,nt){for(var Z=0,st=0,pt=new Array,ft=1;ft<=16;ft++){for(var St=1;St<=z[ft];St++)pt[nt[st]]=[],pt[nt[st]][0]=Z,pt[nt[st]][1]=ft,st++,Z++;Z*=2}return pt}function at(z){for(var nt=z[0],Z=z[1]-1;Z>=0;)nt&1<<Z&&(S|=1<<b),Z--,--b<0&&(S==255?(Q(255),Q(0)):Q(S),b=7,S=0)}function Q(z){y.push(z)}function xt(z){Q(z>>8&255),Q(255&z)}function Mt(z,nt,Z,st,pt){for(var ft,St=pt[0],kt=pt[240],Qt=function(ee,Zt){var tt,H,yt,Ht,Xt,Wt,Se,ge,ce,Pe,Ut=0;for(ce=0;ce<8;++ce){tt=ee[Ut],H=ee[Ut+1],yt=ee[Ut+2],Ht=ee[Ut+3],Xt=ee[Ut+4],Wt=ee[Ut+5],Se=ee[Ut+6];var Ce=tt+(ge=ee[Ut+7]),we=tt-ge,je=H+Se,ye=H-Se,He=yt+Wt,Ze=yt-Wt,Ge=Ht+Xt,It=Ht-Xt,ve=Ce+Ge,$t=Ce-Ge,ne=je+He,be=je-He;ee[Ut]=ve+ne,ee[Ut+4]=ve-ne;var ae=.707106781*(be+$t);ee[Ut+2]=$t+ae,ee[Ut+6]=$t-ae;var De=.382683433*((ve=It+Ze)-(be=ye+we)),Xi=.5411961*ve+De,Ni=1.306562965*be+De,bi=.707106781*(ne=Ze+ye),Vn=we+bi,ze=we-bi;ee[Ut+5]=ze+Xi,ee[Ut+3]=ze-Xi,ee[Ut+1]=Vn+Ni,ee[Ut+7]=Vn-Ni,Ut+=8}for(Ut=0,ce=0;ce<8;++ce){tt=ee[Ut],H=ee[Ut+8],yt=ee[Ut+16],Ht=ee[Ut+24],Xt=ee[Ut+32],Wt=ee[Ut+40],Se=ee[Ut+48];var la=tt+(ge=ee[Ut+56]),wa=tt-ge,Un=H+Se,In=H-Se,Dn=yt+Wt,Rr=yt-Wt,ss=Ht+Xt,Va=Ht-Xt,Or=la+ss,ca=la-ss,da=Un+Dn,Ua=Un-Dn;ee[Ut]=Or+da,ee[Ut+32]=Or-da;var ua=.707106781*(Ua+ca);ee[Ut+16]=ca+ua,ee[Ut+48]=ca-ua;var za=.382683433*((Or=Va+Rr)-(Ua=In+wa)),ro=.5411961*Or+za,qo=1.306562965*Ua+za,et=.707106781*(da=Rr+In),Dt=wa+et,jt=wa-et;ee[Ut+40]=jt+ro,ee[Ut+24]=jt-ro,ee[Ut+8]=Dt+qo,ee[Ut+56]=Dt-qo,Ut++}for(ce=0;ce<64;++ce)Pe=ee[ce]*Zt[ce],m[ce]=Pe>0?Pe+.5|0:Pe-.5|0;return m}(z,nt),ie=0;ie<64;++ie)x[N[ie]]=Qt[ie];var ue=x[0]-Z;Z=x[0],ue==0?at(st[0]):(at(st[g[ft=32767+ue]]),at(f[ft]));for(var _e=63;_e>0&&x[_e]==0;)_e--;if(_e==0)return at(St),Z;for(var mt,Yt=1;Yt<=_e;){for(var ut=Yt;x[Yt]==0&&Yt<=_e;)++Yt;var Ae=Yt-ut;if(Ae>=16){mt=Ae>>4;for(var se=1;se<=mt;++se)at(kt);Ae&=15}ft=32767+x[Yt],at(pt[(Ae<<4)+g[ft]]),at(f[ft]),Yt++}return _e!=63&&at(St),Z}function qt(z){z=Math.min(Math.max(z,1),100),a!=z&&(function(nt){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],st=0;st<64;st++){var pt=s((Z[st]*nt+50)/100);pt=Math.min(Math.max(pt,1),255),o[N[st]]=pt}for(var ft=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],St=0;St<64;St++){var kt=s((ft[St]*nt+50)/100);kt=Math.min(Math.max(kt,1),255),l[N[St]]=kt}for(var Qt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ie=0,ue=0;ue<8;ue++)for(var _e=0;_e<8;_e++)u[ie]=1/(o[N[ie]]*Qt[ue]*Qt[_e]*8),p[ie]=1/(l[N[ie]]*Qt[ue]*Qt[_e]*8),ie++}(z<50?Math.floor(5e3/z):Math.floor(200-2*z)),a=z)}this.encode=function(z,nt){nt&&qt(nt),y=new Array,S=0,b=7,xt(65496),xt(65504),xt(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),xt(1),xt(1),Q(0),Q(0),function(){xt(65499),xt(132),Q(0);for(var H=0;H<64;H++)Q(o[H]);Q(1);for(var yt=0;yt<64;yt++)Q(l[yt])}(),function(H,yt){xt(65472),xt(17),Q(8),xt(yt),xt(H),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(z.width,z.height),function(){xt(65476),xt(418),Q(0);for(var H=0;H<16;H++)Q(B[H+1]);for(var yt=0;yt<=11;yt++)Q(R[yt]);Q(16);for(var Ht=0;Ht<16;Ht++)Q(F[Ht+1]);for(var Xt=0;Xt<=161;Xt++)Q(P[Xt]);Q(1);for(var Wt=0;Wt<16;Wt++)Q(V[Wt+1]);for(var Se=0;Se<=11;Se++)Q($[Se]);Q(17);for(var ge=0;ge<16;ge++)Q(K[ge+1]);for(var ce=0;ce<=161;ce++)Q(ct[ce])}(),xt(65498),xt(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var Z=0,st=0,pt=0;S=0,b=7,this.encode.displayName="_encode_";for(var ft,St,kt,Qt,ie,ue,_e,mt,Yt,ut=z.data,Ae=z.width,se=z.height,ee=4*Ae,Zt=0;Zt<se;){for(ft=0;ft<ee;){for(ie=ee*Zt+ft,_e=-1,mt=0,Yt=0;Yt<64;Yt++)ue=ie+(mt=Yt>>3)*ee+(_e=4*(7&Yt)),Zt+mt>=se&&(ue-=ee*(Zt+1+mt-se)),ft+_e>=ee&&(ue-=ft+_e-ee+4),St=ut[ue++],kt=ut[ue++],Qt=ut[ue++],M[Yt]=(U[St]+U[kt+256>>0]+U[Qt+512>>0]>>16)-128,T[Yt]=(U[St+768>>0]+U[kt+1024>>0]+U[Qt+1280>>0]>>16)-128,I[Yt]=(U[St+1280>>0]+U[kt+1536>>0]+U[Qt+1792>>0]>>16)-128;Z=Mt(M,u,Z,e,i),st=Mt(T,p,st,t,r),pt=Mt(I,p,pt,t,r),ft+=32}Zt+=8}if(b>=0){var tt=[];tt[1]=b+1,tt[0]=(1<<b+1)-1,at(tt)}return xt(65497),new Uint8Array(y)},n=n||50,function(){for(var z=String.fromCharCode,nt=0;nt<256;nt++)O[nt]=z(nt)}(),e=ot(B,R),t=ot(V,$),i=ot(F,P),r=ot(K,ct),function(){for(var z=1,nt=2,Z=1;Z<=15;Z++){for(var st=z;st<nt;st++)g[32767+st]=Z,f[32767+st]=[],f[32767+st][1]=Z,f[32767+st][0]=st;for(var pt=-(nt-1);pt<=-z;pt++)g[32767+pt]=Z,f[32767+pt]=[],f[32767+pt][1]=Z,f[32767+pt][0]=nt-1+pt;z<<=1,nt<<=1}}(),function(){for(var z=0;z<256;z++)U[z]=19595*z,U[z+256>>0]=38470*z,U[z+512>>0]=7471*z+32768,U[z+768>>0]=-11059*z,U[z+1024>>0]=-21709*z,U[z+1280>>0]=32768*z+8421375,U[z+1536>>0]=-27439*z,U[z+1792>>0]=-5329*z}(),qt(n)}function ws(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function G3(n){function e(B){if(!B)throw Error("assert :P")}function t(B,R,F){for(var P=0;4>P;P++)if(B[R+P]!=F.charCodeAt(P))return!0;return!1}function i(B,R,F,P,V){for(var $=0;$<V;$++)B[R+$]=F[P+$]}function r(B,R,F,P){for(var V=0;V<P;V++)B[R+V]=F}function a(B){return new Int32Array(B)}function s(B,R){for(var F=[],P=0;P<B;P++)F.push(new R);return F}function o(B,R){var F=[];return function P(V,$,K){for(var ct=K[$],ot=0;ot<ct&&(V.push(K.length>$+1?[]:new R),!(K.length<$+1));ot++)P(V[ot],$+1,K)}(F,0,B),F}var l=function(){var B=this;function R(v,w){for(var E=1<<w-1>>>0;v&E;)E>>>=1;return E?(v&E-1)+E:v}function F(v,w,E,L,W){e(!(L%E));do v[w+(L-=E)]=W;while(0<L)}function P(v,w,E,L,W){if(e(2328>=W),512>=W)var X=a(512);else if((X=a(W))==null)return 0;return function(Y,J,it,dt,wt,Ft){var Bt,Pt,le=J,Kt=1<<it,Ct=a(16),Tt=a(16);for(e(wt!=0),e(dt!=null),e(Y!=null),e(0<it),Pt=0;Pt<wt;++Pt){if(15<dt[Pt])return 0;++Ct[dt[Pt]]}if(Ct[0]==wt)return 0;for(Tt[1]=0,Bt=1;15>Bt;++Bt){if(Ct[Bt]>1<<Bt)return 0;Tt[Bt+1]=Tt[Bt]+Ct[Bt]}for(Pt=0;Pt<wt;++Pt)Bt=dt[Pt],0<dt[Pt]&&(Ft[Tt[Bt]++]=Pt);if(Tt[15]==1)return(dt=new V).g=0,dt.value=Ft[0],F(Y,le,1,Kt,dt),Kt;var re,he=-1,oe=Kt-1,Oe=0,Ee=1,$e=1,Te=1<<it;for(Pt=0,Bt=1,wt=2;Bt<=it;++Bt,wt<<=1){if(Ee+=$e<<=1,0>($e-=Ct[Bt]))return 0;for(;0<Ct[Bt];--Ct[Bt])(dt=new V).g=Bt,dt.value=Ft[Pt++],F(Y,le+Oe,wt,Te,dt),Oe=R(Oe,Bt)}for(Bt=it+1,wt=2;15>=Bt;++Bt,wt<<=1){if(Ee+=$e<<=1,0>($e-=Ct[Bt]))return 0;for(;0<Ct[Bt];--Ct[Bt]){if(dt=new V,(Oe&oe)!=he){for(le+=Te,re=1<<(he=Bt)-it;15>he&&!(0>=(re-=Ct[he]));)++he,re<<=1;Kt+=Te=1<<(re=he-it),Y[J+(he=Oe&oe)].g=re+it,Y[J+he].value=le-J-he}dt.g=Bt-it,dt.value=Ft[Pt++],F(Y,le+(Oe>>it),wt,Te,dt),Oe=R(Oe,Bt)}}return Ee!=2*Tt[15]-1?0:Kt}(v,w,E,L,W,X)}function V(){this.value=this.g=0}function $(){this.value=this.g=0}function K(){this.G=s(5,V),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Ar,$)}function ct(v,w,E,L){e(v!=null),e(w!=null),e(2147483648>L),v.Ca=254,v.I=0,v.b=-8,v.Ka=0,v.oa=w,v.pa=E,v.Jd=w,v.Yc=E+L,v.Zc=4<=L?E+L-4+1:E,ft(v)}function ot(v,w){for(var E=0;0<w--;)E|=kt(v,128)<<w;return E}function at(v,w){var E=ot(v,w);return St(v)?-E:E}function Q(v,w,E,L){var W,X=0;for(e(v!=null),e(w!=null),e(4294967288>L),v.Sb=L,v.Ra=0,v.u=0,v.h=0,4<L&&(L=4),W=0;W<L;++W)X+=w[E+W]<<8*W;v.Ra=X,v.bb=L,v.oa=w,v.pa=E}function xt(v){for(;8<=v.u&&v.bb<v.Sb;)v.Ra>>>=8,v.Ra+=v.oa[v.pa+v.bb]<<fd-8>>>0,++v.bb,v.u-=8;Z(v)&&(v.h=1,v.u=0)}function Mt(v,w){if(e(0<=w),!v.h&&w<=pd){var E=nt(v)&hd[w];return v.u+=w,xt(v),E}return v.h=1,v.u=0}function qt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function nt(v){return v.Ra>>>(v.u&fd-1)>>>0}function Z(v){return e(v.bb<=v.Sb),v.h||v.bb==v.Sb&&v.u>fd}function st(v,w){v.u=w,v.h=Z(v)}function pt(v){v.u>=oh&&(e(v.u>=oh),xt(v))}function ft(v){e(v!=null&&v.oa!=null),v.pa<v.Zc?(v.I=(v.oa[v.pa++]|v.I<<8)>>>0,v.b+=8):(e(v!=null&&v.oa!=null),v.pa<v.Yc?(v.b+=8,v.I=v.oa[v.pa++]|v.I<<8):v.Ka?v.b=0:(v.I<<=8,v.b+=8,v.Ka=1))}function St(v){return ot(v,1)}function kt(v,w){var E=v.Ca;0>v.b&&ft(v);var L=v.b,W=E*w>>>8,X=(v.I>>>L>W)+0;for(X?(E-=W,v.I-=W+1<<L>>>0):E=W+1,L=E,W=0;256<=L;)W+=8,L>>=8;return L=7^W+ha[L],v.b-=L,v.Ca=(E<<L)-1,X}function Qt(v,w,E){v[w+0]=E>>24&255,v[w+1]=E>>16&255,v[w+2]=E>>8&255,v[w+3]=E>>0&255}function ie(v,w){return v[w+0]<<0|v[w+1]<<8}function ue(v,w){return ie(v,w)|v[w+2]<<16}function _e(v,w){return ie(v,w)|ie(v,w+2)<<16}function mt(v,w){var E=1<<w;return e(v!=null),e(0<w),v.X=a(E),v.X==null?0:(v.Mb=32-w,v.Xa=w,1)}function Yt(v,w){e(v!=null),e(w!=null),e(v.Xa==w.Xa),i(w.X,0,v.X,0,1<<w.Xa)}function ut(){this.X=[],this.Xa=this.Mb=0}function Ae(v,w,E,L){e(E!=null),e(L!=null);var W=E[0],X=L[0];return W==0&&(W=(v*X+w/2)/w),X==0&&(X=(w*W+v/2)/v),0>=W||0>=X?0:(E[0]=W,L[0]=X,1)}function se(v,w){return v+(1<<w)-1>>>w}function ee(v,w){return((4278255360&v)+(4278255360&w)>>>0&4278255360)+((16711935&v)+(16711935&w)>>>0&16711935)>>>0}function Zt(v,w){B[w]=function(E,L,W,X,Y,J,it){var dt;for(dt=0;dt<Y;++dt){var wt=B[v](J[it+dt-1],W,X+dt);J[it+dt]=ee(E[L+dt],wt)}}}function tt(){this.ud=this.hd=this.jd=0}function H(v,w){return((4278124286&(v^w))>>>1)+(v&w)>>>0}function yt(v){return 0<=v&&256>v?v:0>v?0:255<v?255:void 0}function Ht(v,w){return yt(v+(v-w+.5>>1))}function Xt(v,w,E){return Math.abs(w-E)-Math.abs(v-E)}function Wt(v,w,E,L,W,X,Y){for(L=X[Y-1],E=0;E<W;++E)X[Y+E]=L=ee(v[w+E],L)}function Se(v,w,E,L,W){var X;for(X=0;X<E;++X){var Y=v[w+X],J=Y>>8&255,it=16711935&(it=(it=16711935&Y)+((J<<16)+J));L[W+X]=(4278255360&Y)+it>>>0}}function ge(v,w){w.jd=v>>0&255,w.hd=v>>8&255,w.ud=v>>16&255}function ce(v,w,E,L,W,X){var Y;for(Y=0;Y<L;++Y){var J=w[E+Y],it=J>>>8,dt=J,wt=255&(wt=(wt=J>>>16)+((v.jd<<24>>24)*(it<<24>>24)>>>5));dt=255&(dt=(dt=dt+((v.hd<<24>>24)*(it<<24>>24)>>>5))+((v.ud<<24>>24)*(wt<<24>>24)>>>5)),W[X+Y]=(4278255360&J)+(wt<<16)+dt}}function Pe(v,w,E,L,W){B[w]=function(X,Y,J,it,dt,wt,Ft,Bt,Pt){for(it=Ft;it<Bt;++it)for(Ft=0;Ft<Pt;++Ft)dt[wt++]=W(J[L(X[Y++])])},B[v]=function(X,Y,J,it,dt,wt,Ft){var Bt=8>>X.b,Pt=X.Ea,le=X.K[0],Kt=X.w;if(8>Bt)for(X=(1<<X.b)-1,Kt=(1<<Bt)-1;Y<J;++Y){var Ct,Tt=0;for(Ct=0;Ct<Pt;++Ct)Ct&X||(Tt=L(it[dt++])),wt[Ft++]=W(le[Tt&Kt]),Tt>>=Bt}else B["VP8LMapColor"+E](it,dt,le,Kt,wt,Ft,Y,J,Pt)}}function Ut(v,w,E,L,W){for(E=w+E;w<E;){var X=v[w++];L[W++]=X>>16&255,L[W++]=X>>8&255,L[W++]=X>>0&255}}function Ce(v,w,E,L,W){for(E=w+E;w<E;){var X=v[w++];L[W++]=X>>16&255,L[W++]=X>>8&255,L[W++]=X>>0&255,L[W++]=X>>24&255}}function we(v,w,E,L,W){for(E=w+E;w<E;){var X=(Y=v[w++])>>16&240|Y>>12&15,Y=Y>>0&240|Y>>28&15;L[W++]=X,L[W++]=Y}}function je(v,w,E,L,W){for(E=w+E;w<E;){var X=(Y=v[w++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;L[W++]=X,L[W++]=Y}}function ye(v,w,E,L,W){for(E=w+E;w<E;){var X=v[w++];L[W++]=X>>0&255,L[W++]=X>>8&255,L[W++]=X>>16&255}}function He(v,w,E,L,W,X){if(X==0)for(E=w+E;w<E;)Qt(L,((X=v[w++])[0]>>24|X[1]>>8&65280|X[2]<<8&16711680|X[3]<<24)>>>0),W+=32;else i(L,W,v,w,E)}function Ze(v,w){B[w][0]=B[v+"0"],B[w][1]=B[v+"1"],B[w][2]=B[v+"2"],B[w][3]=B[v+"3"],B[w][4]=B[v+"4"],B[w][5]=B[v+"5"],B[w][6]=B[v+"6"],B[w][7]=B[v+"7"],B[w][8]=B[v+"8"],B[w][9]=B[v+"9"],B[w][10]=B[v+"10"],B[w][11]=B[v+"11"],B[w][12]=B[v+"12"],B[w][13]=B[v+"13"],B[w][14]=B[v+"0"],B[w][15]=B[v+"0"]}function Ge(v){return v==q1||v==X1||v==Rf||v==Y1}function It(){this.eb=[],this.size=this.A=this.fb=0}function ve(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function $t(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new It,this.f.kb=new ve,this.sd=null}function ne(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function be(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ae(v){return alert("todo:WebPSamplerProcessPlane"),v.T}function De(v,w){var E=v.T,L=w.ba.f.RGBA,W=L.eb,X=L.fb+v.ka*L.A,Y=Xa[w.ba.S],J=v.y,it=v.O,dt=v.f,wt=v.N,Ft=v.ea,Bt=v.W,Pt=w.cc,le=w.dc,Kt=w.Mc,Ct=w.Nc,Tt=v.ka,re=v.ka+v.T,he=v.U,oe=he+1>>1;for(Tt==0?Y(J,it,null,null,dt,wt,Ft,Bt,dt,wt,Ft,Bt,W,X,null,null,he):(Y(w.ec,w.fc,J,it,Pt,le,Kt,Ct,dt,wt,Ft,Bt,W,X-L.A,W,X,he),++E);Tt+2<re;Tt+=2)Pt=dt,le=wt,Kt=Ft,Ct=Bt,wt+=v.Rc,Bt+=v.Rc,X+=2*L.A,Y(J,(it+=2*v.fa)-v.fa,J,it,Pt,le,Kt,Ct,dt,wt,Ft,Bt,W,X-L.A,W,X,he);return it+=v.fa,v.j+re<v.o?(i(w.ec,w.fc,J,it,he),i(w.cc,w.dc,dt,wt,oe),i(w.Mc,w.Nc,Ft,Bt,oe),E--):1&re||Y(J,it,null,null,dt,wt,Ft,Bt,dt,wt,Ft,Bt,W,X+L.A,null,null,he),E}function Xi(v,w,E){var L=v.F,W=[v.J];if(L!=null){var X=v.U,Y=w.ba.S,J=Y==Lf||Y==Rf;w=w.ba.f.RGBA;var it=[0],dt=v.ka;it[0]=v.T,v.Kb&&(dt==0?--it[0]:(--dt,W[0]-=v.width),v.j+v.ka+v.T==v.o&&(it[0]=v.o-v.j-dt));var wt=w.eb;dt=w.fb+dt*w.A,v=vn(L,W[0],v.width,X,it,wt,dt+(J?0:3),w.A),e(E==it),v&&Ge(Y)&&Ga(wt,dt,J,X,it,w.A)}return 0}function Ni(v){var w=v.ma,E=w.ba.S,L=11>E,W=E==Df||E==Pf||E==Lf||E==G1||E==12||Ge(E);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!ah(w.Oa,v,W?11:12))return 0;if(W&&Ge(E)&&me(),v.da)alert("todo:use_scaling");else{if(L){if(w.Ib=ae,v.Kb){if(E=v.U+1>>1,w.memory=a(v.U+2*E),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+v.U,w.Mc=w.cc,w.Nc=w.dc+E,w.Ib=De,me()}}else alert("todo:EmitYUV");W&&(w.Jb=Xi,L&&Ot())}if(L&&!gS){for(v=0;256>v;++v)mk[v]=89858*(v-128)+Nf>>Of,vk[v]=-22014*(v-128)+Nf,_k[v]=-45773*(v-128),gk[v]=113618*(v-128)+Nf>>Of;for(v=fh;v<Z1;++v)w=76283*(v-16)+Nf>>Of,xk[v-fh]=Ca(w,255),bk[v-fh]=Ca(w+8>>4,15);gS=1}return 1}function bi(v){var w=v.ma,E=v.U,L=v.T;return e(!(1&v.ka)),0>=E||0>=L?0:(E=w.Ib(v,w),w.Jb!=null&&w.Jb(v,w,E),w.Dc+=E,1)}function Vn(v){v.ma.memory=null}function ze(v,w,E,L){return Mt(v,8)!=47?0:(w[0]=Mt(v,14)+1,E[0]=Mt(v,14)+1,L[0]=Mt(v,1),Mt(v,3)!=0?0:!v.h)}function la(v,w){if(4>v)return v+1;var E=v-2>>1;return(2+(1&v)<<E)+Mt(w,E)+1}function wa(v,w){return 120<w?w-120:1<=(E=((E=ek[w-1])>>4)*v+(8-(15&E)))?E:1;var E}function Un(v,w,E){var L=nt(E),W=v[w+=255&L].g-8;return 0<W&&(st(E,E.u+8),L=nt(E),w+=v[w].value,w+=L&(1<<W)-1),st(E,E.u+v[w].g),v[w].value}function In(v,w,E){return E.g+=v.g,E.value+=v.value<<w>>>0,e(8>=E.g),v.g}function Dn(v,w,E){var L=v.xc;return e((w=L==0?0:v.vc[v.md*(E>>L)+(w>>L)])<v.Wb),v.Ya[w]}function Rr(v,w,E,L){var W=v.ab,X=v.c*w,Y=v.C;w=Y+w;var J=E,it=L;for(L=v.Ta,E=v.Ua;0<W--;){var dt=v.gc[W],wt=Y,Ft=w,Bt=J,Pt=it,le=(it=L,J=E,dt.Ea);switch(e(wt<Ft),e(Ft<=dt.nc),dt.hc){case 2:Cf(Bt,Pt,(Ft-wt)*le,it,J);break;case 0:var Kt=wt,Ct=Ft,Tt=it,re=J,he=(Te=dt).Ea;Kt==0&&(W1(Bt,Pt,null,null,1,Tt,re),Wt(Bt,Pt+1,0,0,he-1,Tt,re+1),Pt+=he,re+=he,++Kt);for(var oe=1<<Te.b,Oe=oe-1,Ee=se(he,Te.b),$e=Te.K,Te=Te.w+(Kt>>Te.b)*Ee;Kt<Ct;){var ji=$e,Qi=Te,Ui=1;for(lh(Bt,Pt,Tt,re-he,1,Tt,re);Ui<he;){var Pi=(Ui&~Oe)+oe;Pi>he&&(Pi=he),(0,Zo[ji[Qi++]>>8&15])(Bt,Pt+ +Ui,Tt,re+Ui-he,Pi-Ui,Tt,re+Ui),Ui=Pi}Pt+=he,re+=he,++Kt&Oe||(Te+=Ee)}Ft!=dt.nc&&i(it,J-le,it,J+(Ft-wt-1)*le,le);break;case 1:for(le=Bt,Ct=Pt,he=(Bt=dt.Ea)-(re=Bt&~(Tt=(Pt=1<<dt.b)-1)),Kt=se(Bt,dt.b),oe=dt.K,dt=dt.w+(wt>>dt.b)*Kt;wt<Ft;){for(Oe=oe,Ee=dt,$e=new tt,Te=Ct+re,ji=Ct+Bt;Ct<Te;)ge(Oe[Ee++],$e),ac($e,le,Ct,Pt,it,J),Ct+=Pt,J+=Pt;Ct<ji&&(ge(Oe[Ee++],$e),ac($e,le,Ct,he,it,J),Ct+=he,J+=he),++wt&Tt||(dt+=Kt)}break;case 3:if(Bt==it&&Pt==J&&0<dt.b){for(Ct=it,Bt=le=J+(Ft-wt)*le-(re=(Ft-wt)*se(dt.Ea,dt.b)),Pt=it,Tt=J,Kt=[],re=(he=re)-1;0<=re;--re)Kt[re]=Pt[Tt+re];for(re=he-1;0<=re;--re)Ct[Bt+re]=Kt[re];Ha(dt,wt,Ft,it,le,it,J)}else Ha(dt,wt,Ft,Bt,Pt,it,J)}J=L,it=E}it!=E&&i(L,E,J,it,X)}function ss(v,w){var E=v.V,L=v.Ba+v.c*v.C,W=w-v.C;if(e(w<=v.l.o),e(16>=W),0<W){var X=v.l,Y=v.Ta,J=v.Ua,it=X.width;if(Rr(v,W,E,L),W=J=[J],e((E=v.C)<(L=w)),e(X.v<X.va),L>X.o&&(L=X.o),E<X.j){var dt=X.j-E;E=X.j,W[0]+=dt*it}if(E>=L?E=0:(W[0]+=4*X.v,X.ka=E-X.j,X.U=X.va-X.v,X.T=L-E,E=1),E){if(J=J[0],11>(E=v.ca).S){var wt=E.f.RGBA,Ft=(L=E.S,W=X.U,X=X.T,dt=wt.eb,wt.A),Bt=X;for(wt=wt.fb+v.Ma*wt.A;0<Bt--;){var Pt=Y,le=J,Kt=W,Ct=dt,Tt=wt;switch(L){case If:pa(Pt,le,Kt,Ct,Tt);break;case Df:Qr(Pt,le,Kt,Ct,Tt);break;case q1:Qr(Pt,le,Kt,Ct,Tt),Ga(Ct,Tt,0,Kt,1,0);break;case sS:lo(Pt,le,Kt,Ct,Tt);break;case Pf:He(Pt,le,Kt,Ct,Tt,1);break;case X1:He(Pt,le,Kt,Ct,Tt,1),Ga(Ct,Tt,0,Kt,1,0);break;case Lf:He(Pt,le,Kt,Ct,Tt,0);break;case Rf:He(Pt,le,Kt,Ct,Tt,0),Ga(Ct,Tt,1,Kt,1,0);break;case G1:Jo(Pt,le,Kt,Ct,Tt);break;case Y1:Jo(Pt,le,Kt,Ct,Tt),_n(Ct,Tt,Kt,1,0);break;case oS:oo(Pt,le,Kt,Ct,Tt);break;default:e(0)}J+=it,wt+=Ft}v.Ma+=X}else alert("todo:EmitRescaledRowsYUVA");e(v.Ma<=E.height)}}v.C=w,e(v.C<=v.i)}function Va(v){var w;if(0<v.ua)return 0;for(w=0;w<v.Wb;++w){var E=v.Ya[w].G,L=v.Ya[w].H;if(0<E[1][L[1]+0].g||0<E[2][L[2]+0].g||0<E[3][L[3]+0].g)return 0}return 1}function Or(v,w,E,L,W,X){if(v.Z!=0){var Y=v.qd,J=v.rd;for(e(il[v.Z]!=null);w<E;++w)il[v.Z](Y,J,L,W,L,W,X),Y=L,J=W,W+=X;v.qd=Y,v.rd=J}}function ca(v,w){var E=v.l.ma,L=E.Z==0||E.Z==1?v.l.j:v.C;if(L=v.C<L?L:v.C,e(w<=v.l.o),w>L){var W=v.l.width,X=E.ca,Y=E.tb+W*L,J=v.V,it=v.Ba+v.c*L,dt=v.gc;e(v.ab==1),e(dt[0].hc==3),Mf(dt[0],L,w,J,it,X,Y),Or(E,L,w,X,Y,W)}v.C=v.Ma=w}function da(v,w,E,L,W,X,Y){var J=v.$/L,it=v.$%L,dt=v.m,wt=v.s,Ft=E+v.$,Bt=Ft;W=E+L*W;var Pt=E+L*X,le=280+wt.ua,Kt=v.Pb?J:16777216,Ct=0<wt.ua?wt.Wa:null,Tt=wt.wc,re=Ft<Pt?Dn(wt,it,J):null;e(v.C<X),e(Pt<=W);var he=!1;t:for(;;){for(;he||Ft<Pt;){var oe=0;if(J>=Kt){var Oe=Ft-E;e((Kt=v).Pb),Kt.wd=Kt.m,Kt.xd=Oe,0<Kt.s.ua&&Yt(Kt.s.Wa,Kt.s.vb),Kt=J+nk}if(it&Tt||(re=Dn(wt,it,J)),e(re!=null),re.Qb&&(w[Ft]=re.qb,he=!0),!he)if(pt(dt),re.jc){oe=dt,Oe=w;var Ee=Ft,$e=re.pd[nt(oe)&Ar-1];e(re.jc),256>$e.g?(st(oe,oe.u+$e.g),Oe[Ee]=$e.value,oe=0):(st(oe,oe.u+$e.g-256),e(256<=$e.value),oe=$e.value),oe==0&&(he=!0)}else oe=Un(re.G[0],re.H[0],dt);if(dt.h)break;if(he||256>oe){if(!he)if(re.nd)w[Ft]=(re.qb|oe<<8)>>>0;else{if(pt(dt),he=Un(re.G[1],re.H[1],dt),pt(dt),Oe=Un(re.G[2],re.H[2],dt),Ee=Un(re.G[3],re.H[3],dt),dt.h)break;w[Ft]=(Ee<<24|he<<16|oe<<8|Oe)>>>0}if(he=!1,++Ft,++it>=L&&(it=0,++J,Y!=null&&J<=X&&!(J%16)&&Y(v,J),Ct!=null))for(;Bt<Ft;)oe=w[Bt++],Ct.X[(506832829*oe&4294967295)>>>Ct.Mb]=oe}else if(280>oe){if(oe=la(oe-256,dt),Oe=Un(re.G[4],re.H[4],dt),pt(dt),Oe=wa(L,Oe=la(Oe,dt)),dt.h)break;if(Ft-E<Oe||W-Ft<oe)break t;for(Ee=0;Ee<oe;++Ee)w[Ft+Ee]=w[Ft+Ee-Oe];for(Ft+=oe,it+=oe;it>=L;)it-=L,++J,Y!=null&&J<=X&&!(J%16)&&Y(v,J);if(e(Ft<=W),it&Tt&&(re=Dn(wt,it,J)),Ct!=null)for(;Bt<Ft;)oe=w[Bt++],Ct.X[(506832829*oe&4294967295)>>>Ct.Mb]=oe}else{if(!(oe<le))break t;for(he=oe-280,e(Ct!=null);Bt<Ft;)oe=w[Bt++],Ct.X[(506832829*oe&4294967295)>>>Ct.Mb]=oe;oe=Ft,e(!(he>>>(Oe=Ct).Xa)),w[oe]=Oe.X[he],he=!0}he||e(dt.h==Z(dt))}if(v.Pb&&dt.h&&Ft<W)e(v.m.h),v.a=5,v.m=v.wd,v.$=v.xd,0<v.s.ua&&Yt(v.s.vb,v.s.Wa);else{if(dt.h)break t;Y?.(v,J>X?X:J),v.a=0,v.$=Ft-E}return 1}return v.a=3,0}function Ua(v){e(v!=null),v.vc=null,v.yc=null,v.Ya=null;var w=v.Wa;w!=null&&(w.X=null),v.vb=null,e(v!=null)}function ua(){var v=new H1;return v==null?null:(v.a=0,v.xb=dS,Ze("Predictor","VP8LPredictors"),Ze("Predictor","VP8LPredictors_C"),Ze("PredictorAdd","VP8LPredictorsAdd"),Ze("PredictorAdd","VP8LPredictorsAdd_C"),Cf=Se,ac=ce,pa=Ut,Qr=Ce,Jo=we,oo=je,lo=ye,B.VP8LMapColor32b=md,B.VP8LMapColor8b=Ef,v)}function za(v,w,E,L,W){var X=1,Y=[v],J=[w],it=L.m,dt=L.s,wt=null,Ft=0;t:for(;;){if(E)for(;X&&Mt(it,1);){var Bt=Y,Pt=J,le=L,Kt=1,Ct=le.m,Tt=le.gc[le.ab],re=Mt(Ct,2);if(le.Oc&1<<re)X=0;else{switch(le.Oc|=1<<re,Tt.hc=re,Tt.Ea=Bt[0],Tt.nc=Pt[0],Tt.K=[null],++le.ab,e(4>=le.ab),re){case 0:case 1:Tt.b=Mt(Ct,3)+2,Kt=za(se(Tt.Ea,Tt.b),se(Tt.nc,Tt.b),0,le,Tt.K),Tt.K=Tt.K[0];break;case 3:var he,oe=Mt(Ct,8)+1,Oe=16<oe?0:4<oe?1:2<oe?2:3;if(Bt[0]=se(Tt.Ea,Oe),Tt.b=Oe,he=Kt=za(oe,1,0,le,Tt.K)){var Ee,$e=oe,Te=Tt,ji=1<<(8>>Te.b),Qi=a(ji);if(Qi==null)he=0;else{var Ui=Te.K[0],Pi=Te.w;for(Qi[0]=Te.K[0][0],Ee=1;Ee<1*$e;++Ee)Qi[Ee]=ee(Ui[Pi+Ee],Qi[Ee-1]);for(;Ee<4*ji;++Ee)Qi[Ee]=0;Te.K[0]=null,Te.K[0]=Qi,he=1}}Kt=he;break;case 2:break;default:e(0)}X=Kt}}if(Y=Y[0],J=J[0],X&&Mt(it,1)&&!(X=1<=(Ft=Mt(it,4))&&11>=Ft)){L.a=3;break t}var pn;if(pn=X)e:{var an,fi,sr,fa=L,or=Y,ma=J,tn=Ft,Ea=E,Aa=fa.m,Sr=fa.s,Tr=[null],ea=1,Ya=0,Rs=ik[tn];i:for(;;){if(Ea&&Mt(Aa,1)){var wr=Mt(Aa,3)+2,po=se(or,wr),dc=se(ma,wr),bd=po*dc;if(!za(po,dc,0,fa,Tr))break i;for(Tr=Tr[0],Sr.xc=wr,an=0;an<bd;++an){var nl=Tr[an]>>8&65535;Tr[an]=nl,nl>=ea&&(ea=nl+1)}}if(Aa.h)break i;for(fi=0;5>fi;++fi){var Wn=lS[fi];!fi&&0<tn&&(Wn+=1<<tn),Ya<Wn&&(Ya=Wn)}var J1=s(ea*Rs,V),xS=ea,bS=s(xS,K);if(bS==null)var Bf=null;else e(65536>=xS),Bf=bS;var mh=a(Ya);if(Bf==null||mh==null||J1==null){fa.a=1;break i}var Vf=J1;for(an=sr=0;an<ea;++an){var us=Bf[an],yd=us.G,Sd=us.H,yS=0,Uf=1,SS=0;for(fi=0;5>fi;++fi){Wn=lS[fi],yd[fi]=Vf,Sd[fi]=sr,!fi&&0<tn&&(Wn+=1<<tn);r:{var zf,Q1=Wn,Hf=fa,gh=mh,wk=Vf,Ck=sr,tv=0,rl=Hf.m,Mk=Mt(rl,1);if(r(gh,0,0,Q1),Mk){var Ek=Mt(rl,1)+1,Ak=Mt(rl,1),wS=Mt(rl,Ak==0?1:8);gh[wS]=1,Ek==2&&(gh[wS=Mt(rl,8)]=1);var Wf=1}else{var CS=a(19),MS=Mt(rl,4)+4;if(19<MS){Hf.a=3;var jf=0;break r}for(zf=0;zf<MS;++zf)CS[tk[zf]]=Mt(rl,3);var ev=void 0,_h=void 0,ES=Hf,Tk=CS,Gf=Q1,AS=gh,iv=0,al=ES.m,TS=8,kS=s(128,V);n:for(;P(kS,0,7,Tk,19);){if(Mt(al,1)){var kk=2+2*Mt(al,3);if((ev=2+Mt(al,kk))>Gf)break n}else ev=Gf;for(_h=0;_h<Gf&&ev--;){pt(al);var IS=kS[0+(127&nt(al))];st(al,al.u+IS.g);var wd=IS.value;if(16>wd)AS[_h++]=wd,wd!=0&&(TS=wd);else{var Ik=wd==16,DS=wd-16,Dk=JT[DS],PS=Mt(al,ZT[DS])+Dk;if(_h+PS>Gf)break n;for(var Pk=Ik?TS:0;0<PS--;)AS[_h++]=Pk}}iv=1;break n}iv||(ES.a=3),Wf=iv}(Wf=Wf&&!rl.h)&&(tv=P(wk,Ck,8,gh,Q1)),Wf&&tv!=0?jf=tv:(Hf.a=3,jf=0)}if(jf==0)break i;if(Uf&&QT[fi]==1&&(Uf=Vf[sr].g==0),yS+=Vf[sr].g,sr+=jf,3>=fi){var vh,nv=mh[0];for(vh=1;vh<Wn;++vh)mh[vh]>nv&&(nv=mh[vh]);SS+=nv}}if(us.nd=Uf,us.Qb=0,Uf&&(us.qb=(yd[3][Sd[3]+0].value<<24|yd[1][Sd[1]+0].value<<16|yd[2][Sd[2]+0].value)>>>0,yS==0&&256>yd[0][Sd[0]+0].value&&(us.Qb=1,us.qb+=yd[0][Sd[0]+0].value<<8)),us.jc=!us.Qb&&6>SS,us.jc){var qf,fo=us;for(qf=0;qf<Ar;++qf){var sl=qf,ol=fo.pd[sl],Xf=fo.G[0][fo.H[0]+sl];256<=Xf.value?(ol.g=Xf.g+256,ol.value=Xf.value):(ol.g=0,ol.value=0,sl>>=In(Xf,8,ol),sl>>=In(fo.G[1][fo.H[1]+sl],16,ol),sl>>=In(fo.G[2][fo.H[2]+sl],0,ol),In(fo.G[3][fo.H[3]+sl],24,ol))}}}Sr.vc=Tr,Sr.Wb=ea,Sr.Ya=Bf,Sr.yc=J1,pn=1;break e}pn=0}if(!(X=pn)){L.a=3;break t}if(0<Ft){if(dt.ua=1<<Ft,!mt(dt.Wa,Ft)){L.a=1,X=0;break t}}else dt.ua=0;var rv=L,LS=Y,Lk=J,av=rv.s,sv=av.xc;if(rv.c=LS,rv.i=Lk,av.md=se(LS,sv),av.wc=sv==0?-1:(1<<sv)-1,E){L.xb=dk;break t}if((wt=a(Y*J))==null){L.a=1,X=0;break t}X=(X=da(L,wt,0,Y,J,J,null))&&!it.h;break t}return X?(W!=null?W[0]=wt:(e(wt==null),e(E)),L.$=0,E||Ua(dt)):Ua(dt),X}function ro(v,w){var E=v.c*v.i,L=E+w+16*w;return e(v.c<=w),v.V=a(L),v.V==null?(v.Ta=null,v.Ua=0,v.a=1,0):(v.Ta=v.V,v.Ua=v.Ba+E+w,1)}function qo(v,w){var E=v.C,L=w-E,W=v.V,X=v.Ba+v.c*E;for(e(w<=v.l.o);0<L;){var Y=16<L?16:L,J=v.l.ma,it=v.l.width,dt=it*Y,wt=J.ca,Ft=J.tb+it*E,Bt=v.Ta,Pt=v.Ua;Rr(v,Y,W,X),$n(Bt,Pt,wt,Ft,dt),Or(J,E,E+Y,wt,Ft,it),L-=Y,W+=Y*v.c,E+=Y}e(E==w),v.C=v.Ma=w}function et(){this.ub=this.yd=this.td=this.Rb=0}function Dt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function jt(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Gt(){this.Yb=function(){var v=[];return function w(E,L,W){for(var X=W[L],Y=0;Y<X&&(E.push(W.length>L+1?[]:0),!(W.length<L+1));Y++)w(E[Y],L+1,W)}(v,0,[3,11]),v}()}function Rt(){this.jb=a(3),this.Wc=o([4,8],Gt),this.Xc=o([4,17],Gt)}function xe(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Me(){this.ld=this.La=this.dd=this.tc=0}function Re(){this.Na=this.la=0}function Fe(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Je(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ai(){this.uc=this.M=this.Nb=0,this.wa=Array(new Me),this.Y=0,this.ya=Array(new Je),this.aa=0,this.l=new Ai}function qe(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Ei(){this.cb=this.a=0,this.sc="",this.m=new qt,this.Od=new et,this.Kc=new Dt,this.ed=new xe,this.Qa=new jt,this.Ic=this.$c=this.Aa=0,this.D=new ai,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,qt),this.ia=0,this.pb=s(4,Fe),this.Pa=new Rt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new qe),this.Hd=0,this.rb=Array(new Re),this.sb=0,this.wa=Array(new Me),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Je),this.L=this.aa=0,this.gd=o([4,2],Me),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ai(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Mn(){var v=new Ei;return v!=null&&(v.a=0,v.sc="OK",v.cb=0,v.Xb=0,ph||(ph=zn)),v}function di(v,w,E){return v.a==0&&(v.a=w,v.sc=E,v.cb=0),0}function Ti(v,w,E){return 3<=E&&v[w+0]==157&&v[w+1]==1&&v[w+2]==42}function Xe(v,w){if(v==null)return 0;if(v.a=0,v.sc="OK",w==null)return di(v,2,"null VP8Io passed to VP8GetHeaders()");var E=w.data,L=w.w,W=w.ha;if(4>W)return di(v,7,"Truncated header.");var X=E[L+0]|E[L+1]<<8|E[L+2]<<16,Y=v.Od;if(Y.Rb=!(1&X),Y.td=X>>1&7,Y.yd=X>>4&1,Y.ub=X>>5,3<Y.td)return di(v,3,"Incorrect keyframe parameters.");if(!Y.yd)return di(v,4,"Frame not displayable.");L+=3,W-=3;var J=v.Kc;if(Y.Rb){if(7>W)return di(v,7,"cannot parse picture header");if(!Ti(E,L,W))return di(v,3,"Bad code word");J.c=16383&(E[L+4]<<8|E[L+3]),J.Td=E[L+4]>>6,J.i=16383&(E[L+6]<<8|E[L+5]),J.Ud=E[L+6]>>6,L+=7,W-=7,v.za=J.c+15>>4,v.Ub=J.i+15>>4,w.width=J.c,w.height=J.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,r((X=v.Pa).jb,0,255,X.jb.length),e((X=v.Qa)!=null),X.Cb=0,X.Bb=0,X.Fb=1,r(X.Zb,0,0,X.Zb.length),r(X.Lb,0,0,X.Lb)}if(Y.ub>W)return di(v,7,"bad partition length");ct(X=v.m,E,L,Y.ub),L+=Y.ub,W-=Y.ub,Y.Rb&&(J.Ld=St(X),J.Kd=St(X)),J=v.Qa;var it,dt=v.Pa;if(e(X!=null),e(J!=null),J.Cb=St(X),J.Cb){if(J.Bb=St(X),St(X)){for(J.Fb=St(X),it=0;4>it;++it)J.Zb[it]=St(X)?at(X,7):0;for(it=0;4>it;++it)J.Lb[it]=St(X)?at(X,6):0}if(J.Bb)for(it=0;3>it;++it)dt.jb[it]=St(X)?ot(X,8):255}else J.Bb=0;if(X.Ka)return di(v,3,"cannot parse segment header");if((J=v.ed).zd=St(X),J.Tb=ot(X,6),J.wb=ot(X,3),J.Pc=St(X),J.Pc&&St(X)){for(dt=0;4>dt;++dt)St(X)&&(J.vd[dt]=at(X,6));for(dt=0;4>dt;++dt)St(X)&&(J.od[dt]=at(X,6))}if(v.L=J.Tb==0?0:J.zd?1:2,X.Ka)return di(v,3,"cannot parse filter header");var wt=W;if(W=it=L,L=it+wt,J=wt,v.Xb=(1<<ot(v.m,2))-1,wt<3*(dt=v.Xb))E=7;else{for(it+=3*dt,J-=3*dt,wt=0;wt<dt;++wt){var Ft=E[W+0]|E[W+1]<<8|E[W+2]<<16;Ft>J&&(Ft=J),ct(v.Jc[+wt],E,it,Ft),it+=Ft,J-=Ft,W+=3}ct(v.Jc[+dt],E,it,J),E=it<L?0:5}if(E!=0)return di(v,E,"cannot parse partitions");for(E=ot(it=v.m,7),W=St(it)?at(it,4):0,L=St(it)?at(it,4):0,J=St(it)?at(it,4):0,dt=St(it)?at(it,4):0,it=St(it)?at(it,4):0,wt=v.Qa,Ft=0;4>Ft;++Ft){if(wt.Cb){var Bt=wt.Zb[Ft];wt.Fb||(Bt+=E)}else{if(0<Ft){v.pb[Ft]=v.pb[0];continue}Bt=E}var Pt=v.pb[Ft];Pt.Sc[0]=$1[Ca(Bt+W,127)],Pt.Sc[1]=K1[Ca(Bt+0,127)],Pt.Eb[0]=2*$1[Ca(Bt+L,127)],Pt.Eb[1]=101581*K1[Ca(Bt+J,127)]>>16,8>Pt.Eb[1]&&(Pt.Eb[1]=8),Pt.Qc[0]=$1[Ca(Bt+dt,117)],Pt.Qc[1]=K1[Ca(Bt+it,127)],Pt.lc=Bt+it}if(!Y.Rb)return di(v,4,"Not a key frame.");for(St(X),Y=v.Pa,E=0;4>E;++E){for(W=0;8>W;++W)for(L=0;3>L;++L)for(J=0;11>J;++J)dt=kt(X,lk[E][W][L][J])?ot(X,8):sk[E][W][L][J],Y.Wc[E][W].Yb[L][J]=dt;for(W=0;17>W;++W)Y.Xc[E][W]=Y.Wc[E][ck[W]]}return v.kc=St(X),v.kc&&(v.Bd=ot(X,8)),v.cb=1}function zn(v,w,E,L,W,X,Y){var J=w[W].Yb[E];for(E=0;16>W;++W){if(!kt(v,J[E+0]))return W;for(;!kt(v,J[E+1]);)if(J=w[++W].Yb[0],E=0,W==16)return 16;var it=w[W+1].Yb;if(kt(v,J[E+2])){var dt=v,wt=0;if(kt(dt,(Bt=J)[(Ft=E)+3]))if(kt(dt,Bt[Ft+6])){for(J=0,Ft=2*(wt=kt(dt,Bt[Ft+8]))+(Bt=kt(dt,Bt[Ft+9+wt])),wt=0,Bt=rk[Ft];Bt[J];++J)wt+=wt+kt(dt,Bt[J]);wt+=3+(8<<Ft)}else kt(dt,Bt[Ft+7])?(wt=7+2*kt(dt,165),wt+=kt(dt,145)):wt=5+kt(dt,159);else wt=kt(dt,Bt[Ft+4])?3+kt(dt,Bt[Ft+5]):2;J=it[2]}else wt=1,J=it[1];it=Y+ak[W],0>(dt=v).b&&ft(dt);var Ft,Bt=dt.b,Pt=(Ft=dt.Ca>>1)-(dt.I>>Bt)>>31;--dt.b,dt.Ca+=Pt,dt.Ca|=1,dt.I-=(Ft+1&Pt)<<Bt,X[it]=((wt^Pt)-Pt)*L[(0<W)+0]}return 16}function Di(v){var w=v.rb[v.sb-1];w.la=0,w.Na=0,r(v.zc,0,0,v.zc.length),v.ja=0}function Jr(v,w){if(v==null)return 0;if(w==null)return di(v,2,"NULL VP8Io parameter in VP8Decode().");if(!v.cb&&!Xe(v,w))return 0;if(e(v.cb),w.ac==null||w.ac(w)){w.ob&&(v.L=0);var E=Ff[v.L];if(v.L==2?(v.yb=0,v.zb=0):(v.yb=w.v-E>>4,v.zb=w.j-E>>4,0>v.yb&&(v.yb=0),0>v.zb&&(v.zb=0)),v.Va=w.o+15+E>>4,v.Hb=w.va+15+E>>4,v.Hb>v.za&&(v.Hb=v.za),v.Va>v.Ub&&(v.Va=v.Ub),0<v.L){var L=v.ed;for(E=0;4>E;++E){var W;if(v.Qa.Cb){var X=v.Qa.Lb[E];v.Qa.Fb||(X+=L.Tb)}else X=L.Tb;for(W=0;1>=W;++W){var Y=v.gd[E][W],J=X;if(L.Pc&&(J+=L.vd[0],W&&(J+=L.od[0])),0<(J=0>J?0:63<J?63:J)){var it=J;0<L.wb&&(it=4<L.wb?it>>2:it>>1)>9-L.wb&&(it=9-L.wb),1>it&&(it=1),Y.dd=it,Y.tc=2*J+it,Y.ld=40<=J?2:15<=J?1:0}else Y.tc=0;Y.La=W}}}E=0}else di(v,6,"Frame setup failed"),E=v.a;if(E=E==0){if(E){v.$c=0,0<v.Aa||(v.Ic=Sk);t:{E=v.Ic,L=4*(it=v.za);var dt=32*it,wt=it+1,Ft=0<v.L?it*(0<v.Aa?2:1):0,Bt=(v.Aa==2?2:1)*it;if((Y=L+832+(W=3*(16*E+Ff[v.L])/2*dt)+(X=v.Fa!=null&&0<v.Fa.length?v.Kc.c*v.Kc.i:0))!=Y)E=0;else{if(Y>v.Vb){if(v.Vb=0,v.Ec=a(Y),v.Fc=0,v.Ec==null){E=di(v,1,"no memory during frame initialization.");break t}v.Vb=Y}Y=v.Ec,J=v.Fc,v.Ac=Y,v.Bc=J,J+=L,v.Gd=s(dt,qe),v.Hd=0,v.rb=s(wt+1,Re),v.sb=1,v.wa=Ft?s(Ft,Me):null,v.Y=0,v.D.Nb=0,v.D.wa=v.wa,v.D.Y=v.Y,0<v.Aa&&(v.D.Y+=it),e(!0),v.oc=Y,v.pc=J,J+=832,v.ya=s(Bt,Je),v.aa=0,v.D.ya=v.ya,v.D.aa=v.aa,v.Aa==2&&(v.D.aa+=it),v.R=16*it,v.B=8*it,it=(dt=Ff[v.L])*v.R,dt=dt/2*v.B,v.sa=Y,v.ta=J+it,v.qa=v.sa,v.ra=v.ta+16*E*v.R+dt,v.Ha=v.qa,v.Ia=v.ra+8*E*v.B+dt,v.$c=0,J+=W,v.mb=X?Y:null,v.nb=X?J:null,e(J+X<=v.Fc+v.Vb),Di(v),r(v.Ac,v.Bc,0,L),E=1}}if(E){if(w.ka=0,w.y=v.sa,w.O=v.ta,w.f=v.qa,w.N=v.ra,w.ea=v.Ha,w.Vd=v.Ia,w.fa=v.R,w.Rc=v.B,w.F=null,w.J=0,!Tf){for(E=-255;255>=E;++E)pr[255+E]=0>E?-E:E;for(E=-1020;1020>=E;++E)uo[1020+E]=-128>E?-128:127<E?127:E;for(E=-112;112>=E;++E)hh[112+E]=-16>E?-16:15<E?15:E;for(E=-255;510>=E;++E)xd[255+E]=0>E?0:255<E?255:E;Tf=1}gd=os,co=Nr,ch=rr,ta=br,Wa=Xo,Yn=Er,_d=Ku,Af=nc,dh=z1,sc=Zu,oc=U1,Qo=od,lc=Ju,vd=yf,cc=bf,tl=Ps,uh=so,ja=V1,ds[0]=Ds,ds[1]=k1,ds[2]=L1,ds[3]=R1,ds[4]=mf,ds[5]=ad,ds[6]=gf,ds[7]=Xu,ds[8]=N1,ds[9]=O1,el[0]=pf,el[1]=D1,el[2]=ao,el[3]=nd,el[4]=Fr,el[5]=P1,el[6]=ff,ho[0]=Yo,ho[1]=I1,ho[2]=F1,ho[3]=Yu,ho[4]=ic,ho[5]=B1,ho[6]=$u,E=1}else E=0}E&&(E=function(Pt,le){for(Pt.M=0;Pt.M<Pt.Va;++Pt.M){var Kt,Ct=Pt.Jc[Pt.M&Pt.Xb],Tt=Pt.m,re=Pt;for(Kt=0;Kt<re.za;++Kt){var he=Tt,oe=re,Oe=oe.Ac,Ee=oe.Bc+4*Kt,$e=oe.zc,Te=oe.ya[oe.aa+Kt];if(oe.Qa.Bb?Te.$b=kt(he,oe.Pa.jb[0])?2+kt(he,oe.Pa.jb[2]):kt(he,oe.Pa.jb[1]):Te.$b=0,oe.kc&&(Te.Ad=kt(he,oe.Bd)),Te.Za=!kt(he,145)+0,Te.Za){var ji=Te.Ob,Qi=0;for(oe=0;4>oe;++oe){var Ui,Pi=$e[0+oe];for(Ui=0;4>Ui;++Ui){Pi=ok[Oe[Ee+Ui]][Pi];for(var pn=cS[kt(he,Pi[0])];0<pn;)pn=cS[2*pn+kt(he,Pi[pn])];Pi=-pn,Oe[Ee+Ui]=Pi}i(ji,Qi,Oe,Ee,4),Qi+=4,$e[0+oe]=Pi}}else Pi=kt(he,156)?kt(he,128)?1:3:kt(he,163)?2:0,Te.Ob[0]=Pi,r(Oe,Ee,Pi,4),r($e,0,Pi,4);Te.Dd=kt(he,142)?kt(he,114)?kt(he,183)?1:3:2:0}if(re.m.Ka)return di(Pt,7,"Premature end-of-partition0 encountered.");for(;Pt.ja<Pt.za;++Pt.ja){if(re=Ct,he=(Tt=Pt).rb[Tt.sb-1],Oe=Tt.rb[Tt.sb+Tt.ja],Kt=Tt.ya[Tt.aa+Tt.ja],Ee=Tt.kc?Kt.Ad:0)he.la=Oe.la=0,Kt.Za||(he.Na=Oe.Na=0),Kt.Hc=0,Kt.Gc=0,Kt.ia=0;else{var an,fi;if(he=Oe,Oe=re,Ee=Tt.Pa.Xc,$e=Tt.ya[Tt.aa+Tt.ja],Te=Tt.pb[$e.$b],oe=$e.ad,ji=0,Qi=Tt.rb[Tt.sb-1],Pi=Ui=0,r(oe,ji,0,384),$e.Za)var sr=0,fa=Ee[3];else{pn=a(16);var or=he.Na+Qi.Na;if(or=ph(Oe,Ee[1],or,Te.Eb,0,pn,0),he.Na=Qi.Na=(0<or)+0,1<or)gd(pn,0,oe,ji);else{var ma=pn[0]+3>>3;for(pn=0;256>pn;pn+=16)oe[ji+pn]=ma}sr=1,fa=Ee[0]}var tn=15&he.la,Ea=15&Qi.la;for(pn=0;4>pn;++pn){var Aa=1&Ea;for(ma=fi=0;4>ma;++ma)tn=tn>>1|(Aa=(or=ph(Oe,fa,or=Aa+(1&tn),Te.Sc,sr,oe,ji))>sr)<<7,fi=fi<<2|(3<or?3:1<or?2:oe[ji+0]!=0),ji+=16;tn>>=4,Ea=Ea>>1|Aa<<7,Ui=(Ui<<8|fi)>>>0}for(fa=tn,sr=Ea>>4,an=0;4>an;an+=2){for(fi=0,tn=he.la>>4+an,Ea=Qi.la>>4+an,pn=0;2>pn;++pn){for(Aa=1&Ea,ma=0;2>ma;++ma)or=Aa+(1&tn),tn=tn>>1|(Aa=0<(or=ph(Oe,Ee[2],or,Te.Qc,0,oe,ji)))<<3,fi=fi<<2|(3<or?3:1<or?2:oe[ji+0]!=0),ji+=16;tn>>=2,Ea=Ea>>1|Aa<<5}Pi|=fi<<4*an,fa|=tn<<4<<an,sr|=(240&Ea)<<an}he.la=fa,Qi.la=sr,$e.Hc=Ui,$e.Gc=Pi,$e.ia=43690&Pi?0:Te.ia,Ee=!(Ui|Pi)}if(0<Tt.L&&(Tt.wa[Tt.Y+Tt.ja]=Tt.gd[Kt.$b][Kt.Za],Tt.wa[Tt.Y+Tt.ja].La|=!Ee),re.Ka)return di(Pt,7,"Premature end-of-file encountered.")}if(Di(Pt),Tt=le,re=1,Kt=(Ct=Pt).D,he=0<Ct.L&&Ct.M>=Ct.zb&&Ct.M<=Ct.Va,Ct.Aa==0)t:{if(Kt.M=Ct.M,Kt.uc=he,rh(Ct,Kt),re=1,Kt=(fi=Ct.D).Nb,he=(Pi=Ff[Ct.L])*Ct.R,Oe=Pi/2*Ct.B,pn=16*Kt*Ct.R,ma=8*Kt*Ct.B,Ee=Ct.sa,$e=Ct.ta-he+pn,Te=Ct.qa,oe=Ct.ra-Oe+ma,ji=Ct.Ha,Qi=Ct.Ia-Oe+ma,Ea=(tn=fi.M)==0,Ui=tn>=Ct.Va-1,Ct.Aa==2&&rh(Ct,fi),fi.uc)for(Aa=(or=Ct).D.M,e(or.D.uc),fi=or.yb;fi<or.Hb;++fi){sr=fi,fa=Aa;var Sr=(Tr=(Wn=or).D).Nb;an=Wn.R;var Tr=Tr.wa[Tr.Y+sr],ea=Wn.sa,Ya=Wn.ta+16*Sr*an+16*sr,Rs=Tr.dd,wr=Tr.tc;if(wr!=0)if(e(3<=wr),Wn.L==1)0<sr&&tl(ea,Ya,an,wr+4),Tr.La&&ja(ea,Ya,an,wr),0<fa&&cc(ea,Ya,an,wr+4),Tr.La&&uh(ea,Ya,an,wr);else{var po=Wn.B,dc=Wn.qa,bd=Wn.ra+8*Sr*po+8*sr,nl=Wn.Ha,Wn=Wn.Ia+8*Sr*po+8*sr;Sr=Tr.ld,0<sr&&(Af(ea,Ya,an,wr+4,Rs,Sr),sc(dc,bd,nl,Wn,po,wr+4,Rs,Sr)),Tr.La&&(Qo(ea,Ya,an,wr,Rs,Sr),vd(dc,bd,nl,Wn,po,wr,Rs,Sr)),0<fa&&(_d(ea,Ya,an,wr+4,Rs,Sr),dh(dc,bd,nl,Wn,po,wr+4,Rs,Sr)),Tr.La&&(oc(ea,Ya,an,wr,Rs,Sr),lc(dc,bd,nl,Wn,po,wr,Rs,Sr))}}if(Ct.ia&&alert("todo:DitherRow"),Tt.put!=null){if(fi=16*tn,tn=16*(tn+1),Ea?(Tt.y=Ct.sa,Tt.O=Ct.ta+pn,Tt.f=Ct.qa,Tt.N=Ct.ra+ma,Tt.ea=Ct.Ha,Tt.W=Ct.Ia+ma):(fi-=Pi,Tt.y=Ee,Tt.O=$e,Tt.f=Te,Tt.N=oe,Tt.ea=ji,Tt.W=Qi),Ui||(tn-=Pi),tn>Tt.o&&(tn=Tt.o),Tt.F=null,Tt.J=null,Ct.Fa!=null&&0<Ct.Fa.length&&fi<tn&&(Tt.J=ih(Ct,Tt,fi,tn-fi),Tt.F=Ct.mb,Tt.F==null&&Tt.F.length==0)){re=di(Ct,3,"Could not decode alpha data.");break t}fi<Tt.j&&(Pi=Tt.j-fi,fi=Tt.j,e(!(1&Pi)),Tt.O+=Ct.R*Pi,Tt.N+=Ct.B*(Pi>>1),Tt.W+=Ct.B*(Pi>>1),Tt.F!=null&&(Tt.J+=Tt.width*Pi)),fi<tn&&(Tt.O+=Tt.v,Tt.N+=Tt.v>>1,Tt.W+=Tt.v>>1,Tt.F!=null&&(Tt.J+=Tt.v),Tt.ka=fi-Tt.j,Tt.U=Tt.va-Tt.v,Tt.T=tn-fi,re=Tt.put(Tt))}Kt+1!=Ct.Ic||Ui||(i(Ct.sa,Ct.ta-he,Ee,$e+16*Ct.R,he),i(Ct.qa,Ct.ra-Oe,Te,oe+8*Ct.B,Oe),i(Ct.Ha,Ct.Ia-Oe,ji,Qi+8*Ct.B,Oe))}if(!re)return di(Pt,6,"Output aborted.")}return 1}(v,w)),w.bc!=null&&w.bc(w),E&=1}return E?(v.cb=0,E):0}function xr(v,w,E,L,W){W=v[w+E+32*L]+(W>>3),v[w+E+32*L]=-256&W?0>W?0:255:W}function ir(v,w,E,L,W,X){xr(v,w,0,E,L+W),xr(v,w,1,E,L+X),xr(v,w,2,E,L-X),xr(v,w,3,E,L-W)}function nr(v){return(20091*v>>16)+v}function Yi(v,w,E,L){var W,X=0,Y=a(16);for(W=0;4>W;++W){var J=v[w+0]+v[w+8],it=v[w+0]-v[w+8],dt=(35468*v[w+4]>>16)-nr(v[w+12]),wt=nr(v[w+4])+(35468*v[w+12]>>16);Y[X+0]=J+wt,Y[X+1]=it+dt,Y[X+2]=it-dt,Y[X+3]=J-wt,X+=4,w++}for(W=X=0;4>W;++W)J=(v=Y[X+0]+4)+Y[X+8],it=v-Y[X+8],dt=(35468*Y[X+4]>>16)-nr(Y[X+12]),xr(E,L,0,0,J+(wt=nr(Y[X+4])+(35468*Y[X+12]>>16))),xr(E,L,1,0,it+dt),xr(E,L,2,0,it-dt),xr(E,L,3,0,J-wt),X++,L+=32}function Er(v,w,E,L){var W=v[w+0]+4,X=35468*v[w+4]>>16,Y=nr(v[w+4]),J=35468*v[w+1]>>16;ir(E,L,0,W+Y,v=nr(v[w+1]),J),ir(E,L,1,W+X,v,J),ir(E,L,2,W-X,v,J),ir(E,L,3,W-Y,v,J)}function Nr(v,w,E,L,W){Yi(v,w,E,L),W&&Yi(v,w+16,E,L+4)}function rr(v,w,E,L){co(v,w+0,E,L,1),co(v,w+32,E,L+128,1)}function br(v,w,E,L){var W;for(v=v[w+0]+4,W=0;4>W;++W)for(w=0;4>w;++w)xr(E,L,w,W,v)}function Xo(v,w,E,L){v[w+0]&&ta(v,w+0,E,L),v[w+16]&&ta(v,w+16,E,L+4),v[w+32]&&ta(v,w+32,E,L+128),v[w+48]&&ta(v,w+48,E,L+128+4)}function os(v,w,E,L){var W,X=a(16);for(W=0;4>W;++W){var Y=v[w+0+W]+v[w+12+W],J=v[w+4+W]+v[w+8+W],it=v[w+4+W]-v[w+8+W],dt=v[w+0+W]-v[w+12+W];X[0+W]=Y+J,X[8+W]=Y-J,X[4+W]=dt+it,X[12+W]=dt-it}for(W=0;4>W;++W)Y=(v=X[0+4*W]+3)+X[3+4*W],J=X[1+4*W]+X[2+4*W],it=X[1+4*W]-X[2+4*W],dt=v-X[3+4*W],E[L+0]=Y+J>>3,E[L+16]=dt+it>>3,E[L+32]=Y-J>>3,E[L+48]=dt-it>>3,L+=64}function qu(v,w,E){var L,W=w-32,X=Ma,Y=255-v[W-1];for(L=0;L<E;++L){var J,it=X,dt=Y+v[w-1];for(J=0;J<E;++J)v[w+J]=it[dt+v[W+J]];w+=32}}function k1(v,w){qu(v,w,4)}function I1(v,w){qu(v,w,8)}function D1(v,w){qu(v,w,16)}function ao(v,w){var E;for(E=0;16>E;++E)i(v,w+32*E,v,w-32,16)}function nd(v,w){var E;for(E=16;0<E;--E)r(v,w,v[w-1],16),w+=32}function rd(v,w,E){var L;for(L=0;16>L;++L)r(w,E+32*L,v,16)}function pf(v,w){var E,L=16;for(E=0;16>E;++E)L+=v[w-1+32*E]+v[w+E-32];rd(L>>5,v,w)}function Fr(v,w){var E,L=8;for(E=0;16>E;++E)L+=v[w-1+32*E];rd(L>>4,v,w)}function P1(v,w){var E,L=8;for(E=0;16>E;++E)L+=v[w+E-32];rd(L>>4,v,w)}function ff(v,w){rd(128,v,w)}function li(v,w,E){return v+2*w+E+2>>2}function L1(v,w){var E,L=w-32;for(L=new Uint8Array([li(v[L-1],v[L+0],v[L+1]),li(v[L+0],v[L+1],v[L+2]),li(v[L+1],v[L+2],v[L+3]),li(v[L+2],v[L+3],v[L+4])]),E=0;4>E;++E)i(v,w+32*E,L,0,L.length)}function R1(v,w){var E=v[w-1],L=v[w-1+32],W=v[w-1+64],X=v[w-1+96];Qt(v,w+0,16843009*li(v[w-1-32],E,L)),Qt(v,w+32,16843009*li(E,L,W)),Qt(v,w+64,16843009*li(L,W,X)),Qt(v,w+96,16843009*li(W,X,X))}function Ds(v,w){var E,L=4;for(E=0;4>E;++E)L+=v[w+E-32]+v[w-1+32*E];for(L>>=3,E=0;4>E;++E)r(v,w+32*E,L,4)}function mf(v,w){var E=v[w-1+0],L=v[w-1+32],W=v[w-1+64],X=v[w-1-32],Y=v[w+0-32],J=v[w+1-32],it=v[w+2-32],dt=v[w+3-32];v[w+0+96]=li(L,W,v[w-1+96]),v[w+1+96]=v[w+0+64]=li(E,L,W),v[w+2+96]=v[w+1+64]=v[w+0+32]=li(X,E,L),v[w+3+96]=v[w+2+64]=v[w+1+32]=v[w+0+0]=li(Y,X,E),v[w+3+64]=v[w+2+32]=v[w+1+0]=li(J,Y,X),v[w+3+32]=v[w+2+0]=li(it,J,Y),v[w+3+0]=li(dt,it,J)}function gf(v,w){var E=v[w+1-32],L=v[w+2-32],W=v[w+3-32],X=v[w+4-32],Y=v[w+5-32],J=v[w+6-32],it=v[w+7-32];v[w+0+0]=li(v[w+0-32],E,L),v[w+1+0]=v[w+0+32]=li(E,L,W),v[w+2+0]=v[w+1+32]=v[w+0+64]=li(L,W,X),v[w+3+0]=v[w+2+32]=v[w+1+64]=v[w+0+96]=li(W,X,Y),v[w+3+32]=v[w+2+64]=v[w+1+96]=li(X,Y,J),v[w+3+64]=v[w+2+96]=li(Y,J,it),v[w+3+96]=li(J,it,it)}function ad(v,w){var E=v[w-1+0],L=v[w-1+32],W=v[w-1+64],X=v[w-1-32],Y=v[w+0-32],J=v[w+1-32],it=v[w+2-32],dt=v[w+3-32];v[w+0+0]=v[w+1+64]=X+Y+1>>1,v[w+1+0]=v[w+2+64]=Y+J+1>>1,v[w+2+0]=v[w+3+64]=J+it+1>>1,v[w+3+0]=it+dt+1>>1,v[w+0+96]=li(W,L,E),v[w+0+64]=li(L,E,X),v[w+0+32]=v[w+1+96]=li(E,X,Y),v[w+1+32]=v[w+2+96]=li(X,Y,J),v[w+2+32]=v[w+3+96]=li(Y,J,it),v[w+3+32]=li(J,it,dt)}function Xu(v,w){var E=v[w+0-32],L=v[w+1-32],W=v[w+2-32],X=v[w+3-32],Y=v[w+4-32],J=v[w+5-32],it=v[w+6-32],dt=v[w+7-32];v[w+0+0]=E+L+1>>1,v[w+1+0]=v[w+0+64]=L+W+1>>1,v[w+2+0]=v[w+1+64]=W+X+1>>1,v[w+3+0]=v[w+2+64]=X+Y+1>>1,v[w+0+32]=li(E,L,W),v[w+1+32]=v[w+0+96]=li(L,W,X),v[w+2+32]=v[w+1+96]=li(W,X,Y),v[w+3+32]=v[w+2+96]=li(X,Y,J),v[w+3+64]=li(Y,J,it),v[w+3+96]=li(J,it,dt)}function O1(v,w){var E=v[w-1+0],L=v[w-1+32],W=v[w-1+64],X=v[w-1+96];v[w+0+0]=E+L+1>>1,v[w+2+0]=v[w+0+32]=L+W+1>>1,v[w+2+32]=v[w+0+64]=W+X+1>>1,v[w+1+0]=li(E,L,W),v[w+3+0]=v[w+1+32]=li(L,W,X),v[w+3+32]=v[w+1+64]=li(W,X,X),v[w+3+64]=v[w+2+64]=v[w+0+96]=v[w+1+96]=v[w+2+96]=v[w+3+96]=X}function N1(v,w){var E=v[w-1+0],L=v[w-1+32],W=v[w-1+64],X=v[w-1+96],Y=v[w-1-32],J=v[w+0-32],it=v[w+1-32],dt=v[w+2-32];v[w+0+0]=v[w+2+32]=E+Y+1>>1,v[w+0+32]=v[w+2+64]=L+E+1>>1,v[w+0+64]=v[w+2+96]=W+L+1>>1,v[w+0+96]=X+W+1>>1,v[w+3+0]=li(J,it,dt),v[w+2+0]=li(Y,J,it),v[w+1+0]=v[w+3+32]=li(E,Y,J),v[w+1+32]=v[w+3+64]=li(L,E,Y),v[w+1+64]=v[w+3+96]=li(W,L,E),v[w+1+96]=li(X,W,L)}function F1(v,w){var E;for(E=0;8>E;++E)i(v,w+32*E,v,w-32,8)}function Yu(v,w){var E;for(E=0;8>E;++E)r(v,w,v[w-1],8),w+=32}function ec(v,w,E){var L;for(L=0;8>L;++L)r(w,E+32*L,v,8)}function Yo(v,w){var E,L=8;for(E=0;8>E;++E)L+=v[w+E-32]+v[w-1+32*E];ec(L>>4,v,w)}function B1(v,w){var E,L=4;for(E=0;8>E;++E)L+=v[w+E-32];ec(L>>3,v,w)}function ic(v,w){var E,L=4;for(E=0;8>E;++E)L+=v[w-1+32*E];ec(L>>3,v,w)}function $u(v,w){ec(128,v,w)}function sd(v,w,E){var L=v[w-E],W=v[w+0],X=3*(W-L)+j1[1020+v[w-2*E]-v[w+E]],Y=kf[112+(X+4>>3)];v[w-E]=Ma[255+L+kf[112+(X+3>>3)]],v[w+0]=Ma[255+W-Y]}function _f(v,w,E,L){var W=v[w+0],X=v[w+E];return qa[255+v[w-2*E]-v[w-E]]>L||qa[255+X-W]>L}function vf(v,w,E,L){return 4*qa[255+v[w-E]-v[w+0]]+qa[255+v[w-2*E]-v[w+E]]<=L}function xf(v,w,E,L,W){var X=v[w-3*E],Y=v[w-2*E],J=v[w-E],it=v[w+0],dt=v[w+E],wt=v[w+2*E],Ft=v[w+3*E];return 4*qa[255+J-it]+qa[255+Y-dt]>L?0:qa[255+v[w-4*E]-X]<=W&&qa[255+X-Y]<=W&&qa[255+Y-J]<=W&&qa[255+Ft-wt]<=W&&qa[255+wt-dt]<=W&&qa[255+dt-it]<=W}function bf(v,w,E,L){var W=2*L+1;for(L=0;16>L;++L)vf(v,w+L,E,W)&&sd(v,w+L,E)}function Ps(v,w,E,L){var W=2*L+1;for(L=0;16>L;++L)vf(v,w+L*E,1,W)&&sd(v,w+L*E,1)}function so(v,w,E,L){var W;for(W=3;0<W;--W)bf(v,w+=4*E,E,L)}function V1(v,w,E,L){var W;for(W=3;0<W;--W)Ps(v,w+=4,E,L)}function $o(v,w,E,L,W,X,Y,J){for(X=2*X+1;0<W--;){if(xf(v,w,E,X,Y))if(_f(v,w,E,J))sd(v,w,E);else{var it=v,dt=w,wt=E,Ft=it[dt-2*wt],Bt=it[dt-wt],Pt=it[dt+0],le=it[dt+wt],Kt=it[dt+2*wt],Ct=27*(re=j1[1020+3*(Pt-Bt)+j1[1020+Ft-le]])+63>>7,Tt=18*re+63>>7,re=9*re+63>>7;it[dt-3*wt]=Ma[255+it[dt-3*wt]+re],it[dt-2*wt]=Ma[255+Ft+Tt],it[dt-wt]=Ma[255+Bt+Ct],it[dt+0]=Ma[255+Pt-Ct],it[dt+wt]=Ma[255+le-Tt],it[dt+2*wt]=Ma[255+Kt-re]}w+=L}}function ls(v,w,E,L,W,X,Y,J){for(X=2*X+1;0<W--;){if(xf(v,w,E,X,Y))if(_f(v,w,E,J))sd(v,w,E);else{var it=v,dt=w,wt=E,Ft=it[dt-wt],Bt=it[dt+0],Pt=it[dt+wt],le=kf[112+((Kt=3*(Bt-Ft))+4>>3)],Kt=kf[112+(Kt+3>>3)],Ct=le+1>>1;it[dt-2*wt]=Ma[255+it[dt-2*wt]+Ct],it[dt-wt]=Ma[255+Ft+Kt],it[dt+0]=Ma[255+Bt-le],it[dt+wt]=Ma[255+Pt-Ct]}w+=L}}function Ku(v,w,E,L,W,X){$o(v,w,E,1,16,L,W,X)}function nc(v,w,E,L,W,X){$o(v,w,1,E,16,L,W,X)}function U1(v,w,E,L,W,X){var Y;for(Y=3;0<Y;--Y)ls(v,w+=4*E,E,1,16,L,W,X)}function od(v,w,E,L,W,X){var Y;for(Y=3;0<Y;--Y)ls(v,w+=4,1,E,16,L,W,X)}function z1(v,w,E,L,W,X,Y,J){$o(v,w,W,1,8,X,Y,J),$o(E,L,W,1,8,X,Y,J)}function Zu(v,w,E,L,W,X,Y,J){$o(v,w,1,W,8,X,Y,J),$o(E,L,1,W,8,X,Y,J)}function Ju(v,w,E,L,W,X,Y,J){ls(v,w+4*W,W,1,8,X,Y,J),ls(E,L+4*W,W,1,8,X,Y,J)}function yf(v,w,E,L,W,X,Y,J){ls(v,w+4,1,W,8,X,Y,J),ls(E,L+4,1,W,8,X,Y,J)}function ld(){this.ba=new $t,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new be,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Qu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function th(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Sf(){this.ua=0,this.Wa=new ut,this.vb=new ut,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new K,this.yc=new V}function H1(){this.xb=this.a=0,this.l=new Ai,this.ca=new $t,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Sf,this.ab=0,this.gc=s(4,th),this.Oc=0}function cd(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ai,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function rc(v,w,E,L,W,X,Y){for(v=v==null?0:v[w+0],w=0;w<Y;++w)W[X+w]=v+E[L+w]&255,v=W[X+w]}function eh(v,w,E,L,W,X,Y){var J;if(v==null)rc(null,null,E,L,W,X,Y);else for(J=0;J<Y;++J)W[X+J]=v[w+J]+E[L+J]&255}function Ko(v,w,E,L,W,X,Y){if(v==null)rc(null,null,E,L,W,X,Y);else{var J,it=v[w+0],dt=it,wt=it;for(J=0;J<Y;++J)dt=wt+(it=v[w+J])-dt,wt=E[L+J]+(-256&dt?0>dt?0:255:dt)&255,dt=it,W[X+J]=wt}}function ih(v,w,E,L){var W=w.width,X=w.o;if(e(v!=null&&w!=null),0>E||0>=L||E+L>X)return null;if(!v.Cc){if(v.ga==null){var Y;if(v.ga=new cd,(Y=v.ga==null)||(Y=w.width*w.o,e(v.Gb.length==0),v.Gb=a(Y),v.Uc=0,v.Gb==null?Y=0:(v.mb=v.Gb,v.nb=v.Uc,v.rc=null,Y=1),Y=!Y),!Y){Y=v.ga;var J=v.Fa,it=v.P,dt=v.qc,wt=v.mb,Ft=v.nb,Bt=it+1,Pt=dt-1,le=Y.l;if(e(J!=null&&wt!=null&&w!=null),il[0]=null,il[1]=rc,il[2]=eh,il[3]=Ko,Y.ca=wt,Y.tb=Ft,Y.c=w.width,Y.i=w.height,e(0<Y.c&&0<Y.i),1>=dt)w=0;else if(Y.$a=J[it+0]>>0&3,Y.Z=J[it+0]>>2&3,Y.Lc=J[it+0]>>4&3,it=J[it+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||it)w=0;else if(le.put=bi,le.ac=Ni,le.bc=Vn,le.ma=Y,le.width=w.width,le.height=w.height,le.Da=w.Da,le.v=w.v,le.va=w.va,le.j=w.j,le.o=w.o,Y.$a)t:{e(Y.$a==1),w=ua();e:for(;;){if(w==null){w=0;break t}if(e(Y!=null),Y.mc=w,w.c=Y.c,w.i=Y.i,w.l=Y.l,w.l.ma=Y,w.l.width=Y.c,w.l.height=Y.i,w.a=0,Q(w.m,J,Bt,Pt),!za(Y.c,Y.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&Va(w.s)?(Y.ic=1,J=w.c*w.i,w.Ta=null,w.Ua=0,w.V=a(J),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(Y.ic=0,w=ro(w,Y.c)),!w))break e;w=1;break t}Y.mc=null,w=0}else w=Pt>=Y.c*Y.i;Y=!w}if(Y)return null;v.ga.Lc!=1?v.Ga=0:L=X-E}e(v.ga!=null),e(E+L<=X);t:{if(w=(J=v.ga).c,X=J.l.o,J.$a==0){if(Bt=v.rc,Pt=v.Vc,le=v.Fa,it=v.P+1+E*w,dt=v.mb,wt=v.nb+E*w,e(it<=v.P+v.qc),J.Z!=0)for(e(il[J.Z]!=null),Y=0;Y<L;++Y)il[J.Z](Bt,Pt,le,it,dt,wt,w),Bt=dt,Pt=wt,wt+=w,it+=w;else for(Y=0;Y<L;++Y)i(dt,wt,le,it,w),Bt=dt,Pt=wt,wt+=w,it+=w;v.rc=Bt,v.Vc=Pt}else{if(e(J.mc!=null),w=E+L,e((Y=J.mc)!=null),e(w<=Y.i),Y.C>=w)w=1;else if(J.ic||Ot(),J.ic){J=Y.V,Bt=Y.Ba,Pt=Y.c;var Kt=Y.i,Ct=(le=1,it=Y.$/Pt,dt=Y.$%Pt,wt=Y.m,Ft=Y.s,Y.$),Tt=Pt*Kt,re=Pt*w,he=Ft.wc,oe=Ct<re?Dn(Ft,dt,it):null;e(Ct<=Tt),e(w<=Kt),e(Va(Ft));e:for(;;){for(;!wt.h&&Ct<re;){if(dt&he||(oe=Dn(Ft,dt,it)),e(oe!=null),pt(wt),256>(Kt=Un(oe.G[0],oe.H[0],wt)))J[Bt+Ct]=Kt,++Ct,++dt>=Pt&&(dt=0,++it<=w&&!(it%16)&&ca(Y,it));else{if(!(280>Kt)){le=0;break e}Kt=la(Kt-256,wt);var Oe,Ee=Un(oe.G[4],oe.H[4],wt);if(pt(wt),!(Ct>=(Ee=wa(Pt,Ee=la(Ee,wt)))&&Tt-Ct>=Kt)){le=0;break e}for(Oe=0;Oe<Kt;++Oe)J[Bt+Ct+Oe]=J[Bt+Ct+Oe-Ee];for(Ct+=Kt,dt+=Kt;dt>=Pt;)dt-=Pt,++it<=w&&!(it%16)&&ca(Y,it);Ct<re&&dt&he&&(oe=Dn(Ft,dt,it))}e(wt.h==Z(wt))}ca(Y,it>w?w:it);break e}!le||wt.h&&Ct<Tt?(le=0,Y.a=wt.h?5:3):Y.$=Ct,w=le}else w=da(Y,Y.V,Y.Ba,Y.c,Y.i,w,qo);if(!w){L=0;break t}}E+L>=X&&(v.Cc=1),L=1}if(!L)return null;if(v.Cc&&((L=v.ga)!=null&&(L.mc=null),v.ga=null,0<v.Ga))return alert("todo:WebPDequantizeLevels"),null}return v.nb+E*W}function C(v,w,E,L,W,X){for(;0<W--;){var Y,J=v,it=w+(E?1:0),dt=v,wt=w+(E?0:3);for(Y=0;Y<L;++Y){var Ft=dt[wt+4*Y];Ft!=255&&(Ft*=32897,J[it+4*Y+0]=J[it+4*Y+0]*Ft>>23,J[it+4*Y+1]=J[it+4*Y+1]*Ft>>23,J[it+4*Y+2]=J[it+4*Y+2]*Ft>>23)}w+=X}}function j(v,w,E,L,W){for(;0<L--;){var X;for(X=0;X<E;++X){var Y=v[w+2*X+0],J=15&(dt=v[w+2*X+1]),it=4369*J,dt=(240&dt|dt>>4)*it>>16;v[w+2*X+0]=(240&Y|Y>>4)*it>>16&240|(15&Y|Y<<4)*it>>16>>4&15,v[w+2*X+1]=240&dt|J}w+=W}}function ht(v,w,E,L,W,X,Y,J){var it,dt,wt=255;for(dt=0;dt<W;++dt){for(it=0;it<L;++it){var Ft=v[w+it];X[Y+4*it]=Ft,wt&=Ft}w+=E,Y+=J}return wt!=255}function bt(v,w,E,L,W){var X;for(X=0;X<W;++X)E[L+X]=v[w+X]>>8}function Ot(){Ga=C,_n=j,vn=ht,$n=bt}function Jt(v,w,E){B[v]=function(L,W,X,Y,J,it,dt,wt,Ft,Bt,Pt,le,Kt,Ct,Tt,re,he){var oe,Oe=he-1>>1,Ee=J[it+0]|dt[wt+0]<<16,$e=Ft[Bt+0]|Pt[le+0]<<16;e(L!=null);var Te=3*Ee+$e+131074>>2;for(w(L[W+0],255&Te,Te>>16,Kt,Ct),X!=null&&(Te=3*$e+Ee+131074>>2,w(X[Y+0],255&Te,Te>>16,Tt,re)),oe=1;oe<=Oe;++oe){var ji=J[it+oe]|dt[wt+oe]<<16,Qi=Ft[Bt+oe]|Pt[le+oe]<<16,Ui=Ee+ji+$e+Qi+524296,Pi=Ui+2*(ji+$e)>>3;Te=Pi+Ee>>1,Ee=(Ui=Ui+2*(Ee+Qi)>>3)+ji>>1,w(L[W+2*oe-1],255&Te,Te>>16,Kt,Ct+(2*oe-1)*E),w(L[W+2*oe-0],255&Ee,Ee>>16,Kt,Ct+(2*oe-0)*E),X!=null&&(Te=Ui+$e>>1,Ee=Pi+Qi>>1,w(X[Y+2*oe-1],255&Te,Te>>16,Tt,re+(2*oe-1)*E),w(X[Y+2*oe+0],255&Ee,Ee>>16,Tt,re+(2*oe+0)*E)),Ee=ji,$e=Qi}1&he||(Te=3*Ee+$e+131074>>2,w(L[W+he-1],255&Te,Te>>16,Kt,Ct+(he-1)*E),X!=null&&(Te=3*$e+Ee+131074>>2,w(X[Y+he-1],255&Te,Te>>16,Tt,re+(he-1)*E)))}}function me(){Xa[If]=uk,Xa[Df]=uS,Xa[sS]=hk,Xa[Pf]=hS,Xa[Lf]=pS,Xa[G1]=fS,Xa[oS]=pk,Xa[q1]=uS,Xa[X1]=hS,Xa[Rf]=pS,Xa[Y1]=fS}function Le(v){return v&~fk?0>v?0:255:v>>mS}function Ye(v,w){return Le((19077*v>>8)+(26149*w>>8)-14234)}function pi(v,w,E){return Le((19077*v>>8)-(6419*w>>8)-(13320*E>>8)+8708)}function ui(v,w){return Le((19077*v>>8)+(33050*w>>8)-17685)}function Fi(v,w,E,L,W){L[W+0]=Ye(v,E),L[W+1]=pi(v,w,E),L[W+2]=ui(v,w)}function Pn(v,w,E,L,W){L[W+0]=ui(v,w),L[W+1]=pi(v,w,E),L[W+2]=Ye(v,E)}function Hn(v,w,E,L,W){var X=pi(v,w,E);w=X<<3&224|ui(v,w)>>3,L[W+0]=248&Ye(v,E)|X>>5,L[W+1]=w}function ar(v,w,E,L,W){var X=240&ui(v,w)|15;L[W+0]=240&Ye(v,E)|pi(v,w,E)>>4,L[W+1]=X}function Br(v,w,E,L,W){L[W+0]=255,Fi(v,w,E,L,W+1)}function yr(v,w,E,L,W){Pn(v,w,E,L,W),L[W+3]=255}function cs(v,w,E,L,W){Fi(v,w,E,L,W),L[W+3]=255}function Ca(v,w){return 0>v?0:v>w?w:v}function Ls(v,w,E){B[v]=function(L,W,X,Y,J,it,dt,wt,Ft){for(var Bt=wt+(-2&Ft)*E;wt!=Bt;)w(L[W+0],X[Y+0],J[it+0],dt,wt),w(L[W+1],X[Y+0],J[it+0],dt,wt+E),W+=2,++Y,++it,wt+=2*E;1&Ft&&w(L[W+0],X[Y+0],J[it+0],dt,wt)}}function wf(v,w,E){return E==0?v==0?w==0?6:5:w==0?4:0:E}function nh(v,w,E,L,W){switch(v>>>30){case 3:co(w,E,L,W,0);break;case 2:Yn(w,E,L,W);break;case 1:ta(w,E,L,W)}}function rh(v,w){var E,L,W=w.M,X=w.Nb,Y=v.oc,J=v.pc+40,it=v.oc,dt=v.pc+584,wt=v.oc,Ft=v.pc+600;for(E=0;16>E;++E)Y[J+32*E-1]=129;for(E=0;8>E;++E)it[dt+32*E-1]=129,wt[Ft+32*E-1]=129;for(0<W?Y[J-1-32]=it[dt-1-32]=wt[Ft-1-32]=129:(r(Y,J-32-1,127,21),r(it,dt-32-1,127,9),r(wt,Ft-32-1,127,9)),L=0;L<v.za;++L){var Bt=w.ya[w.aa+L];if(0<L){for(E=-1;16>E;++E)i(Y,J+32*E-4,Y,J+32*E+12,4);for(E=-1;8>E;++E)i(it,dt+32*E-4,it,dt+32*E+4,4),i(wt,Ft+32*E-4,wt,Ft+32*E+4,4)}var Pt=v.Gd,le=v.Hd+L,Kt=Bt.ad,Ct=Bt.Hc;if(0<W&&(i(Y,J-32,Pt[le].y,0,16),i(it,dt-32,Pt[le].f,0,8),i(wt,Ft-32,Pt[le].ea,0,8)),Bt.Za){var Tt=Y,re=J-32+16;for(0<W&&(L>=v.za-1?r(Tt,re,Pt[le].y[15],4):i(Tt,re,Pt[le+1].y,0,4)),E=0;4>E;E++)Tt[re+128+E]=Tt[re+256+E]=Tt[re+384+E]=Tt[re+0+E];for(E=0;16>E;++E,Ct<<=2)Tt=Y,re=J+_S[E],ds[Bt.Ob[E]](Tt,re),nh(Ct,Kt,16*+E,Tt,re)}else if(Tt=wf(L,W,Bt.Ob[0]),el[Tt](Y,J),Ct!=0)for(E=0;16>E;++E,Ct<<=2)nh(Ct,Kt,16*+E,Y,J+_S[E]);for(E=Bt.Gc,Tt=wf(L,W,Bt.Dd),ho[Tt](it,dt),ho[Tt](wt,Ft),Ct=Kt,Tt=it,re=dt,255&(Bt=E>>0)&&(170&Bt?ch(Ct,256,Tt,re):Wa(Ct,256,Tt,re)),Bt=wt,Ct=Ft,255&(E>>=8)&&(170&E?ch(Kt,320,Bt,Ct):Wa(Kt,320,Bt,Ct)),W<v.Ub-1&&(i(Pt[le].y,0,Y,J+480,16),i(Pt[le].f,0,it,dt+224,8),i(Pt[le].ea,0,wt,Ft+224,8)),E=8*X*v.B,Pt=v.sa,le=v.ta+16*L+16*X*v.R,Kt=v.qa,Bt=v.ra+8*L+E,Ct=v.Ha,Tt=v.Ia+8*L+E,E=0;16>E;++E)i(Pt,le+E*v.R,Y,J+32*E,16);for(E=0;8>E;++E)i(Kt,Bt+E*v.B,it,dt+32*E,8),i(Ct,Tt+E*v.B,wt,Ft+32*E,8)}}function dd(v,w,E,L,W,X,Y,J,it){var dt=[0],wt=[0],Ft=0,Bt=it!=null?it.kd:0,Pt=it??new Qu;if(v==null||12>E)return 7;Pt.data=v,Pt.w=w,Pt.ha=E,w=[w],E=[E],Pt.gb=[Pt.gb];t:{var le=w,Kt=E,Ct=Pt.gb;if(e(v!=null),e(Kt!=null),e(Ct!=null),Ct[0]=0,12<=Kt[0]&&!t(v,le[0],"RIFF")){if(t(v,le[0]+8,"WEBP")){Ct=3;break t}var Tt=_e(v,le[0]+4);if(12>Tt||4294967286<Tt){Ct=3;break t}if(Bt&&Tt>Kt[0]-8){Ct=7;break t}Ct[0]=Tt,le[0]+=12,Kt[0]-=12}Ct=0}if(Ct!=0)return Ct;for(Tt=0<Pt.gb[0],E=E[0];;){t:{var re=v;Kt=w,Ct=E;var he=dt,oe=wt,Oe=le=[0];if((Te=Ft=[Ft])[0]=0,8>Ct[0])Ct=7;else{if(!t(re,Kt[0],"VP8X")){if(_e(re,Kt[0]+4)!=10){Ct=3;break t}if(18>Ct[0]){Ct=7;break t}var Ee=_e(re,Kt[0]+8),$e=1+ue(re,Kt[0]+12);if(2147483648<=$e*(re=1+ue(re,Kt[0]+15))){Ct=3;break t}Oe!=null&&(Oe[0]=Ee),he!=null&&(he[0]=$e),oe!=null&&(oe[0]=re),Kt[0]+=18,Ct[0]-=18,Te[0]=1}Ct=0}}if(Ft=Ft[0],le=le[0],Ct!=0)return Ct;if(Kt=!!(2&le),!Tt&&Ft)return 3;if(X!=null&&(X[0]=!!(16&le)),Y!=null&&(Y[0]=Kt),J!=null&&(J[0]=0),Y=dt[0],le=wt[0],Ft&&Kt&&it==null){Ct=0;break}if(4>E){Ct=7;break}if(Tt&&Ft||!Tt&&!Ft&&!t(v,w[0],"ALPH")){E=[E],Pt.na=[Pt.na],Pt.P=[Pt.P],Pt.Sa=[Pt.Sa];t:{Ee=v,Ct=w,Tt=E;var Te=Pt.gb;he=Pt.na,oe=Pt.P,Oe=Pt.Sa,$e=22,e(Ee!=null),e(Tt!=null),re=Ct[0];var ji=Tt[0];for(e(he!=null),e(Oe!=null),he[0]=null,oe[0]=null,Oe[0]=0;;){if(Ct[0]=re,Tt[0]=ji,8>ji){Ct=7;break t}var Qi=_e(Ee,re+4);if(4294967286<Qi){Ct=3;break t}var Ui=8+Qi+1&-2;if($e+=Ui,0<Te&&$e>Te){Ct=3;break t}if(!t(Ee,re,"VP8 ")||!t(Ee,re,"VP8L")){Ct=0;break t}if(ji[0]<Ui){Ct=7;break t}t(Ee,re,"ALPH")||(he[0]=Ee,oe[0]=re+8,Oe[0]=Qi),re+=Ui,ji-=Ui}}if(E=E[0],Pt.na=Pt.na[0],Pt.P=Pt.P[0],Pt.Sa=Pt.Sa[0],Ct!=0)break}E=[E],Pt.Ja=[Pt.Ja],Pt.xa=[Pt.xa];t:if(Te=v,Ct=w,Tt=E,he=Pt.gb[0],oe=Pt.Ja,Oe=Pt.xa,Ee=Ct[0],re=!t(Te,Ee,"VP8 "),$e=!t(Te,Ee,"VP8L"),e(Te!=null),e(Tt!=null),e(oe!=null),e(Oe!=null),8>Tt[0])Ct=7;else{if(re||$e){if(Te=_e(Te,Ee+4),12<=he&&Te>he-12){Ct=3;break t}if(Bt&&Te>Tt[0]-8){Ct=7;break t}oe[0]=Te,Ct[0]+=8,Tt[0]-=8,Oe[0]=$e}else Oe[0]=5<=Tt[0]&&Te[Ee+0]==47&&!(Te[Ee+4]>>5),oe[0]=Tt[0];Ct=0}if(E=E[0],Pt.Ja=Pt.Ja[0],Pt.xa=Pt.xa[0],w=w[0],Ct!=0)break;if(4294967286<Pt.Ja)return 3;if(J==null||Kt||(J[0]=Pt.xa?2:1),Y=[Y],le=[le],Pt.xa){if(5>E){Ct=7;break}J=Y,Bt=le,Kt=X,v==null||5>E?v=0:5<=E&&v[w+0]==47&&!(v[w+4]>>5)?(Tt=[0],Te=[0],he=[0],Q(oe=new z,v,w,E),ze(oe,Tt,Te,he)?(J!=null&&(J[0]=Tt[0]),Bt!=null&&(Bt[0]=Te[0]),Kt!=null&&(Kt[0]=he[0]),v=1):v=0):v=0}else{if(10>E){Ct=7;break}J=le,v==null||10>E||!Ti(v,w+3,E-3)?v=0:(Bt=v[w+0]|v[w+1]<<8|v[w+2]<<16,Kt=16383&(v[w+7]<<8|v[w+6]),v=16383&(v[w+9]<<8|v[w+8]),1&Bt||3<(Bt>>1&7)||!(Bt>>4&1)||Bt>>5>=Pt.Ja||!Kt||!v?v=0:(Y&&(Y[0]=Kt),J&&(J[0]=v),v=1))}if(!v||(Y=Y[0],le=le[0],Ft&&(dt[0]!=Y||wt[0]!=le)))return 3;it!=null&&(it[0]=Pt,it.offset=w-it.w,e(4294967286>w-it.w),e(it.offset==it.ha-E));break}return Ct==0||Ct==7&&Ft&&it==null?(X!=null&&(X[0]|=Pt.na!=null&&0<Pt.na.length),L!=null&&(L[0]=Y),W!=null&&(W[0]=le),0):Ct}function ah(v,w,E){var L=w.width,W=w.height,X=0,Y=0,J=L,it=W;if(w.Da=v!=null&&0<v.Da,w.Da&&(J=v.cd,it=v.bd,X=v.v,Y=v.j,11>E||(X&=-2,Y&=-2),0>X||0>Y||0>=J||0>=it||X+J>L||Y+it>W))return 0;if(w.v=X,w.j=Y,w.va=X+J,w.o=Y+it,w.U=J,w.T=it,w.da=v!=null&&0<v.da,w.da){if(!Ae(J,it,E=[v.ib],X=[v.hb]))return 0;w.ib=E[0],w.hb=X[0]}return w.ob=v!=null&&v.ob,w.Kb=v==null||!v.Sd,w.da&&(w.ob=w.ib<3*L/4&&w.hb<3*W/4,w.Kb=0),1}function sh(v){if(v==null)return 2;if(11>v.S){var w=v.f.RGBA;w.fb+=(v.height-1)*w.A,w.A=-w.A}else w=v.f.kb,v=v.height,w.O+=(v-1)*w.fa,w.fa=-w.fa,w.N+=(v-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(v-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(v-1)*w.lb,w.lb=-w.lb);return 0}function ud(v,w,E,L){if(L==null||0>=v||0>=w)return 2;if(E!=null){if(E.Da){var W=E.cd,X=E.bd,Y=-2&E.v,J=-2&E.j;if(0>Y||0>J||0>=W||0>=X||Y+W>v||J+X>w)return 2;v=W,w=X}if(E.da){if(!Ae(v,w,W=[E.ib],X=[E.hb]))return 2;v=W[0],w=X[0]}}L.width=v,L.height=w;t:{var it=L.width,dt=L.height;if(v=L.S,0>=it||0>=dt||!(v>=If&&13>v))v=2;else{if(0>=L.Rd&&L.sd==null){Y=X=W=w=0;var wt=(J=it*vS[v])*dt;if(11>v||(X=(dt+1)/2*(w=(it+1)/2),v==12&&(Y=(W=it)*dt)),(dt=a(wt+2*X+Y))==null){v=1;break t}L.sd=dt,11>v?((it=L.f.RGBA).eb=dt,it.fb=0,it.A=J,it.size=wt):((it=L.f.kb).y=dt,it.O=0,it.fa=J,it.Fd=wt,it.f=dt,it.N=0+wt,it.Ab=w,it.Cd=X,it.ea=dt,it.W=0+wt+X,it.Db=w,it.Ed=X,v==12&&(it.F=dt,it.J=0+wt+2*X),it.Tc=Y,it.lb=W)}if(w=1,W=L.S,X=L.width,Y=L.height,W>=If&&13>W)if(11>W)v=L.f.RGBA,w&=(J=Math.abs(v.A))*(Y-1)+X<=v.size,w&=J>=X*vS[W],w&=v.eb!=null;else{v=L.f.kb,J=(X+1)/2,wt=(Y+1)/2,it=Math.abs(v.fa),dt=Math.abs(v.Ab);var Ft=Math.abs(v.Db),Bt=Math.abs(v.lb),Pt=Bt*(Y-1)+X;w&=it*(Y-1)+X<=v.Fd,w&=dt*(wt-1)+J<=v.Cd,w=(w&=Ft*(wt-1)+J<=v.Ed)&it>=X&dt>=J&Ft>=J,w&=v.y!=null,w&=v.f!=null,w&=v.ea!=null,W==12&&(w&=Bt>=X,w&=Pt<=v.Tc,w&=v.F!=null)}else w=0;v=w?0:2}}return v!=0||E!=null&&E.fd&&(v=sh(L)),v}var Ar=64,hd=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],pd=24,fd=32,oh=8,ha=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Zt("Predictor0","PredictorAdd0"),B.Predictor0=function(){return 4278190080},B.Predictor1=function(v){return v},B.Predictor2=function(v,w,E){return w[E+0]},B.Predictor3=function(v,w,E){return w[E+1]},B.Predictor4=function(v,w,E){return w[E-1]},B.Predictor5=function(v,w,E){return H(H(v,w[E+1]),w[E+0])},B.Predictor6=function(v,w,E){return H(v,w[E-1])},B.Predictor7=function(v,w,E){return H(v,w[E+0])},B.Predictor8=function(v,w,E){return H(w[E-1],w[E+0])},B.Predictor9=function(v,w,E){return H(w[E+0],w[E+1])},B.Predictor10=function(v,w,E){return H(H(v,w[E-1]),H(w[E+0],w[E+1]))},B.Predictor11=function(v,w,E){var L=w[E+0];return 0>=Xt(L>>24&255,v>>24&255,(w=w[E-1])>>24&255)+Xt(L>>16&255,v>>16&255,w>>16&255)+Xt(L>>8&255,v>>8&255,w>>8&255)+Xt(255&L,255&v,255&w)?L:v},B.Predictor12=function(v,w,E){var L=w[E+0];return(yt((v>>24&255)+(L>>24&255)-((w=w[E-1])>>24&255))<<24|yt((v>>16&255)+(L>>16&255)-(w>>16&255))<<16|yt((v>>8&255)+(L>>8&255)-(w>>8&255))<<8|yt((255&v)+(255&L)-(255&w)))>>>0},B.Predictor13=function(v,w,E){var L=w[E-1];return(Ht((v=H(v,w[E+0]))>>24&255,L>>24&255)<<24|Ht(v>>16&255,L>>16&255)<<16|Ht(v>>8&255,L>>8&255)<<8|Ht(v>>0&255,L>>0&255))>>>0};var W1=B.PredictorAdd0;B.PredictorAdd1=Wt,Zt("Predictor2","PredictorAdd2"),Zt("Predictor3","PredictorAdd3"),Zt("Predictor4","PredictorAdd4"),Zt("Predictor5","PredictorAdd5"),Zt("Predictor6","PredictorAdd6"),Zt("Predictor7","PredictorAdd7"),Zt("Predictor8","PredictorAdd8"),Zt("Predictor9","PredictorAdd9"),Zt("Predictor10","PredictorAdd10"),Zt("Predictor11","PredictorAdd11"),Zt("Predictor12","PredictorAdd12"),Zt("Predictor13","PredictorAdd13");var lh=B.PredictorAdd2;Pe("ColorIndexInverseTransform","MapARGB","32b",function(v){return v>>8&255},function(v){return v}),Pe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(v){return v},function(v){return v>>8&255});var Cf,Ha=B.ColorIndexInverseTransform,md=B.MapARGB,Mf=B.VP8LColorIndexInverseTransformAlpha,Ef=B.MapAlpha,Zo=B.VP8LPredictorsAdd=[];Zo.length=16,(B.VP8LPredictors=[]).length=16,(B.VP8LPredictorsAdd_C=[]).length=16,(B.VP8LPredictors_C=[]).length=16;var ac,pa,Qr,Jo,oo,lo,gd,co,Yn,ch,ta,Wa,_d,Af,dh,sc,oc,Qo,lc,vd,cc,tl,uh,ja,Ga,_n,vn,$n,pr=a(511),uo=a(2041),hh=a(225),xd=a(767),Tf=0,j1=uo,kf=hh,Ma=xd,qa=pr,If=0,Df=1,sS=2,Pf=3,Lf=4,G1=5,oS=6,q1=7,X1=8,Rf=9,Y1=10,ZT=[2,3,7],JT=[3,3,11],lS=[280,256,256,256,40],QT=[0,1,1,1,0],tk=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ek=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ik=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],nk=8,$1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],K1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ph=null,rk=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ak=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],cS=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],sk=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ok=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],lk=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ck=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],el=[],ds=[],ho=[],dk=1,dS=2,il=[],Xa=[];Jt("UpsampleRgbLinePair",Fi,3),Jt("UpsampleBgrLinePair",Pn,3),Jt("UpsampleRgbaLinePair",cs,4),Jt("UpsampleBgraLinePair",yr,4),Jt("UpsampleArgbLinePair",Br,4),Jt("UpsampleRgba4444LinePair",ar,2),Jt("UpsampleRgb565LinePair",Hn,2);var uk=B.UpsampleRgbLinePair,hk=B.UpsampleBgrLinePair,uS=B.UpsampleRgbaLinePair,hS=B.UpsampleBgraLinePair,pS=B.UpsampleArgbLinePair,fS=B.UpsampleRgba4444LinePair,pk=B.UpsampleRgb565LinePair,Of=16,Nf=1<<Of-1,fh=-227,Z1=482,mS=6,fk=(256<<mS)-1,gS=0,mk=a(256),gk=a(256),_k=a(256),vk=a(256),xk=a(Z1-fh),bk=a(Z1-fh);Ls("YuvToRgbRow",Fi,3),Ls("YuvToBgrRow",Pn,3),Ls("YuvToRgbaRow",cs,4),Ls("YuvToBgraRow",yr,4),Ls("YuvToArgbRow",Br,4),Ls("YuvToRgba4444Row",ar,2),Ls("YuvToRgb565Row",Hn,2);var _S=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ff=[0,2,8],yk=[8,7,6,4,4,2,2,2,1,1,1,1],Sk=1;this.WebPDecodeRGBA=function(v,w,E,L,W){var X=Df,Y=new ld,J=new $t;Y.ba=J,J.S=X,J.width=[J.width],J.height=[J.height];var it=J.width,dt=J.height,wt=new ne;if(wt==null||v==null)var Ft=2;else e(wt!=null),Ft=dd(v,w,E,wt.width,wt.height,wt.Pd,wt.Qd,wt.format,null);if(Ft!=0?it=0:(it!=null&&(it[0]=wt.width[0]),dt!=null&&(dt[0]=wt.height[0]),it=1),it){J.width=J.width[0],J.height=J.height[0],L!=null&&(L[0]=J.width),W!=null&&(W[0]=J.height);t:{if(L=new Ai,(W=new Qu).data=v,W.w=w,W.ha=E,W.kd=1,w=[0],e(W!=null),((v=dd(W.data,W.w,W.ha,null,null,null,w,null,W))==0||v==7)&&w[0]&&(v=4),(w=v)==0){if(e(Y!=null),L.data=W.data,L.w=W.w+W.offset,L.ha=W.ha-W.offset,L.put=bi,L.ac=Ni,L.bc=Vn,L.ma=Y,W.xa){if((v=ua())==null){Y=1;break t}if(function(Bt,Pt){var le=[0],Kt=[0],Ct=[0];e:for(;;){if(Bt==null)return 0;if(Pt==null)return Bt.a=2,0;if(Bt.l=Pt,Bt.a=0,Q(Bt.m,Pt.data,Pt.w,Pt.ha),!ze(Bt.m,le,Kt,Ct)){Bt.a=3;break e}if(Bt.xb=dS,Pt.width=le[0],Pt.height=Kt[0],!za(le[0],Kt[0],1,Bt,null))break e;return 1}return e(Bt.a!=0),0}(v,L)){if(L=(w=ud(L.width,L.height,Y.Oa,Y.ba))==0){e:{L=v;i:for(;;){if(L==null){L=0;break e}if(e(L.s.yc!=null),e(L.s.Ya!=null),e(0<L.s.Wb),e((E=L.l)!=null),e((W=E.ma)!=null),L.xb!=0){if(L.ca=W.ba,L.tb=W.tb,e(L.ca!=null),!ah(W.Oa,E,Pf)){L.a=2;break i}if(!ro(L,E.width)||E.da)break i;if((E.da||Ge(L.ca.S))&&Ot(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&Ot()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!mt(L.s.vb,L.s.Wa.Xa)){L.a=1;break i}L.xb=0}if(!da(L,L.V,L.Ba,L.c,L.i,E.o,ss))break i;W.Dc=L.Ma,L=1;break e}e(L.a!=0),L=0}L=!L}L&&(w=v.a)}else w=v.a}else{if((v=new Mn)==null){Y=1;break t}if(v.Fa=W.na,v.P=W.P,v.qc=W.Sa,Xe(v,L)){if((w=ud(L.width,L.height,Y.Oa,Y.ba))==0){if(v.Aa=0,E=Y.Oa,e((W=v)!=null),E!=null){if(0<(it=0>(it=E.Md)?0:100<it?255:255*it/100)){for(dt=wt=0;4>dt;++dt)12>(Ft=W.pb[dt]).lc&&(Ft.ia=it*yk[0>Ft.lc?0:Ft.lc]>>3),wt|=Ft.ia;wt&&(alert("todo:VP8InitRandom"),W.ia=1)}W.Ga=E.Id,100<W.Ga?W.Ga=100:0>W.Ga&&(W.Ga=0)}Jr(v,L)||(w=v.a)}}else w=v.a}w==0&&Y.Oa!=null&&Y.Oa.fd&&(w=sh(Y.ba))}Y=w}X=Y!=0?null:11>X?J.f.RGBA.eb:J.f.kb.y}else X=null;return X};var vS=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(B,R){for(var F="",P=0;P<4;P++)F+=String.fromCharCode(B[R++]);return F}function p(B,R){return(B[R+0]<<0|B[R+1]<<8|B[R+2]<<16)>>>0}function f(B,R){return(B[R+0]<<0|B[R+1]<<8|B[R+2]<<16|B[R+3]<<24)>>>0}new l;var g=[0],m=[0],x=[],y=new l,S=n,b=function(B,R){var F={},P=0,V=!1,$=0,K=0;if(F.frames=[],!function(nt,Z,st,pt){for(var ft=0;ft<pt;ft++)if(nt[Z+ft]!=st.charCodeAt(ft))return!0;return!1}(B,R,"RIFF",4)){var ct,ot;for(f(B,R+=4),R+=8;R<B.length;){var at=u(B,R),Q=f(B,R+=4);R+=4;var xt=Q+(1&Q);switch(at){case"VP8 ":case"VP8L":F.frames[P]===void 0&&(F.frames[P]={}),(z=F.frames[P]).src_off=V?K:R-8,z.src_size=$+Q+8,P++,V&&(V=!1,$=0,K=0);break;case"VP8X":(z=F.header={}).feature_flags=B[R];var Mt=R+4;z.canvas_width=1+p(B,Mt),Mt+=3,z.canvas_height=1+p(B,Mt),Mt+=3;break;case"ALPH":V=!0,$=xt+8,K=R-8;break;case"ANIM":(z=F.header).bgcolor=f(B,R),Mt=R+4,z.loop_count=(ct=B)[(ot=Mt)+0]<<0|ct[ot+1]<<8,Mt+=2;break;case"ANMF":var qt,z;(z=F.frames[P]={}).offset_x=2*p(B,R),R+=3,z.offset_y=2*p(B,R),R+=3,z.width=1+p(B,R),R+=3,z.height=1+p(B,R),R+=3,z.duration=p(B,R),R+=3,qt=B[R++],z.dispose=1&qt,z.blend=qt>>1&1}at!="ANMF"&&(R+=xt)}return F}}(S,0);b.response=S,b.rgbaoutput=!0,b.dataurl=!1;var M=b.header?b.header:null,T=b.frames?b.frames:null;if(M){M.loop_counter=M.loop_count,g=[M.canvas_height],m=[M.canvas_width];for(var I=0;I<T.length&&T[I].blend!=0;I++);}var O=T[0],U=y.WebPDecodeRGBA(S,O.src_off,O.src_size,m,g);O.rgba=U,O.imgwidth=m[0],O.imgheight=g[0];for(var N=0;N<m[0]*g[0]*4;N++)x[N]=U[N];return this.width=m,this.height=g,this.data=x,this}(function(n){var e=function(){return typeof eg=="function"},t=function(g,m,x,y){var S=4,b=s;switch(y){case n.image_compression.FAST:S=1,b=a;break;case n.image_compression.MEDIUM:S=6,b=o;break;case n.image_compression.SLOW:S=9,b=l}g=i(g,m,x,b);var M=eg(g,{level:S});return n.__addimage__.arrayBufferToBinaryString(M)},i=function(g,m,x,y){for(var S,b,M,T=g.length/m,I=new Uint8Array(g.length+T),O=p(),U=0;U<T;U+=1){if(M=U*m,S=g.subarray(M,M+m),y)I.set(y(S,x,b),M+U);else{for(var N,B=O.length,R=[];N<B;N+=1)R[N]=O[N](S,x,b);var F=f(R.concat());I.set(R[F],M+U)}b=S}return I},r=function(g){var m=Array.apply([],g);return m.unshift(0),m},a=function(g,m){var x,y=[],S=g.length;y[0]=1;for(var b=0;b<S;b+=1)x=g[b-m]||0,y[b+1]=g[b]-x+256&255;return y},s=function(g,m,x){var y,S=[],b=g.length;S[0]=2;for(var M=0;M<b;M+=1)y=x&&x[M]||0,S[M+1]=g[M]-y+256&255;return S},o=function(g,m,x){var y,S,b=[],M=g.length;b[0]=3;for(var T=0;T<M;T+=1)y=g[T-m]||0,S=x&&x[T]||0,b[T+1]=g[T]+256-(y+S>>>1)&255;return b},l=function(g,m,x){var y,S,b,M,T=[],I=g.length;T[0]=4;for(var O=0;O<I;O+=1)y=g[O-m]||0,S=x&&x[O]||0,b=x&&x[O-m]||0,M=u(y,S,b),T[O+1]=g[O]-M+256&255;return T},u=function(g,m,x){if(g===m&&m===x)return g;var y=Math.abs(m-x),S=Math.abs(g-x),b=Math.abs(g+m-x-x);return y<=S&&y<=b?g:S<=b?m:x},p=function(){return[r,a,s,o,l]},f=function(g){var m=g.map(function(x){return x.reduce(function(y,S){return y+Math.abs(S)},0)});return m.indexOf(Math.min.apply(null,m))};n.processPNG=function(g,m,x,y){var S,b,M,T,I,O,U,N,B,R,F,P,V,$,K,ct=this.decode.FLATE_DECODE,ot="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(M=new m8(g)).imgData,b=M.bits,S=M.colorSpace,I=M.colors,[4,6].indexOf(M.colorType)!==-1){if(M.bits===8){B=(N=M.pixelBitlength==32?new Uint32Array(M.decodePixels().buffer):M.pixelBitlength==16?new Uint16Array(M.decodePixels().buffer):new Uint8Array(M.decodePixels().buffer)).length,F=new Uint8Array(B*M.colors),R=new Uint8Array(B);var at,Q=M.pixelBitlength-M.bits;for($=0,K=0;$<B;$++){for(V=N[$],at=0;at<Q;)F[K++]=V>>>at&255,at+=M.bits;R[$]=V>>>at&255}}if(M.bits===16){B=(N=new Uint32Array(M.decodePixels().buffer)).length,F=new Uint8Array(B*(32/M.pixelBitlength)*M.colors),R=new Uint8Array(B*(32/M.pixelBitlength)),P=M.colors>1,$=0,K=0;for(var xt=0;$<B;)V=N[$++],F[K++]=V>>>0&255,P&&(F[K++]=V>>>16&255,V=N[$++],F[K++]=V>>>0&255),R[xt++]=V>>>16&255;b=8}y!==n.image_compression.NONE&&e()?(g=t(F,M.width*M.colors,M.colors,y),U=t(R,M.width,1,y)):(g=F,U=R,ct=void 0)}if(M.colorType===3&&(S=this.color_spaces.INDEXED,O=M.palette,M.transparency.indexed)){var Mt=M.transparency.indexed,qt=0;for($=0,B=Mt.length;$<B;++$)qt+=Mt[$];if((qt/=255)===B-1&&Mt.indexOf(0)!==-1)T=[Mt.indexOf(0)];else if(qt!==B){for(N=M.decodePixels(),R=new Uint8Array(N.length),$=0,B=N.length;$<B;$++)R[$]=Mt[N[$]];U=t(R,M.width,1)}}var z=function(nt){var Z;switch(nt){case n.image_compression.FAST:Z=11;break;case n.image_compression.MEDIUM:Z=13;break;case n.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(y);return ct===this.decode.FLATE_DECODE&&(ot="/Predictor "+z+" "),ot+="/Colors "+I+" /BitsPerComponent "+b+" /Columns "+M.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(U&&this.__addimage__.isArrayBuffer(U)||this.__addimage__.isArrayBufferView(U))&&(U=this.__addimage__.arrayBufferToBinaryString(U)),{alias:x,data:g,index:m,filter:ct,decodeParameters:ot,transparency:T,palette:O,sMask:U,predictor:z,width:M.width,height:M.height,bitsPerComponent:b,colorSpace:S}}}})(ni.API),function(n){n.processGIF89A=function(e,t,i,r){var a=new g8(e),s=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:s,height:o},p=new Ty(100).encode(u,100);return n.processJPEG.call(this,p,t,i,r)},n.processGIF87A=n.processGIF89A}(ni.API),ws.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:i,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ws.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){gn.log("bit decode error:"+t)}},ws.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<e;r++)for(var a=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+8*r*4,o=0;o<8&&8*r+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}t!==0&&(this.pos+=4-t)}},ws.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,r=0;r<n;r++){var a=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+2*r*4,o=a>>4,l=15&a,u=this.palette[o];if(this.data[s]=u.blue,this.data[s+1]=u.green,this.data[s+2]=u.red,this.data[s+3]=255,2*r+1>=this.width)break;u=this.palette[l],this.data[s+4]=u.blue,this.data[s+4+1]=u.green,this.data[s+4+2]=u.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},ws.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*i;if(r<this.palette.length){var s=this.palette[r];this.data[a]=s.red,this.data[a+1]=s.green,this.data[a+2]=s.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}n!==0&&(this.pos+=4-n)}},ws.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,u=a>>15?255:0,p=i*this.width*4+4*r;this.data[p]=l,this.data[p+1]=o,this.data[p+2]=s,this.data[p+3]=u}this.pos+=n}},ws.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&t)/t*255|0,u=(s>>11)/e*255|0,p=r*this.width*4+4*a;this.data[p]=u,this.data[p+1]=l,this.data[p+2]=o,this.data[p+3]=255}this.pos+=n}},ws.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=a,this.data[s+1]=r,this.data[s+2]=i,this.data[s+3]=255}this.pos+=this.width%4}},ws.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=a,this.data[o+1]=r,this.data[o+2]=i,this.data[o+3]=s}},ws.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,i,r){var a=new ws(e,!1),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},u=new Ty(100).encode(l,100);return n.processJPEG.call(this,u,t,i,r)}}(ni.API),G3.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,i,r){var a=new G3(e,!1),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},u=new Ty(100).encode(l,100);return n.processJPEG.call(this,u,t,i,r)}}(ni.API),ni.API.processRGBA=function(n,e,t){for(var i=n.data,r=i.length,a=new Uint8Array(r/4*3),s=new Uint8Array(r/4),o=0,l=0,u=0;u<r;u+=4){var p=i[u],f=i[u+1],g=i[u+2],m=i[u+3];a[o++]=p,a[o++]=f,a[o++]=g,s[l++]=m}var x=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:x,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},ni.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},fu=ni.API,ag=fu.getCharWidthsArray=function(n,e){var t,i,r=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:r.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:r.metadata.Unicode.kerning,p=u.fof?u.fof:1,f=e.doKerning!==!1,g=0,m=n.length,x=0,y=o[0]||l,S=[];for(t=0;t<m;t++)i=n.charCodeAt(t),typeof r.metadata.widthOfString=="function"?S.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+s*(1e3/a)||0)/1e3):(g=f&&(0,hn.default)(u[i])==="object"&&!isNaN(parseInt(u[i][x],10))?u[i][x]/p:0,S.push((o[i]||y)/l+g)),x=i;return S},z3=fu.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return fu.processArabic&&(n=fu.processArabic(n)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(n,t,r)/t:ag.apply(this,arguments).reduce(function(a,s){return a+s},0)},H3=function(n,e,t,i){for(var r=[],a=0,s=n.length,o=0;a!==s&&o+e[a]<t;)o+=e[a],a++;r.push(n.slice(0,a));var l=a;for(o=0;a!==s;)o+e[a]>i&&(r.push(n.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&r.push(n.slice(l,a)),r},W3=function(n,e,t){t||(t={});var i,r,a,s,o,l,u,p=[],f=[p],g=t.textIndent||0,m=0,x=0,y=n.split(" "),S=ag.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?y[0].length+2:t.lineIndent||0){var b=Array(l).join(" "),M=[];y.map(function(I){(I=I.split(/\s*\n/)).length>1?M=M.concat(I.map(function(O,U){return(U&&O.length?`
`:"")+O})):M.push(I[0])}),y=M,l=z3.apply(this,[b,t])}for(a=0,s=y.length;a<s;a++){var T=0;if(i=y[a],l&&i[0]==`
`&&(i=i.substr(1),T=1),g+m+(x=(r=ag.apply(this,[i,t])).reduce(function(I,O){return I+O},0))>e||T){if(x>e){for(o=H3.apply(this,[i,r,e-(g+m),e]),p.push(o.shift()),p=[o.pop()];o.length;)f.push([o.shift()]);x=r.slice(i.length-(p[0]?p[0].length:0)).reduce(function(I,O){return I+O},0)}else p=[i];f.push(p),g=x+l,m=S}else p.push(i),g+=m+x,m=S}return u=l?function(I,O){return(O?b:"")+I.join(" ")}:function(I){return I.join(" ")},f.map(u)},fu.splitTextToSize=function(n,e,t){var i,r=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var f=this.internal.getFont(p.fontName,p.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/r;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/r:0,a.lineIndent=t.lineIndent;var o,l,u=[];for(o=0,l=i.length;o<l;o++)u=u.concat(W3.apply(this,[i[o],s,a]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},i={},r=0;r<e.length;r++)t[e[r]]="0123456789abcdef"[r],i["0123456789abcdef"[r]]=e[r];var a=function(f){return"0x"+parseInt(f,10).toString(16)},s=n.__fontmetrics__.compress=function(f){var g,m,x,y,S=["{"];for(var b in f){if(g=f[b],isNaN(parseInt(b,10))?m="'"+b+"'":(b=parseInt(b,10),m=(m=a(b).slice(2)).slice(0,-1)+i[m.slice(-1)]),typeof g=="number")g<0?(x=a(g).slice(3),y="-"):(x=a(g).slice(2),y=""),x=y+x.slice(0,-1)+i[x.slice(-1)];else{if((0,hn.default)(g)!=="object")throw new Error("Don't know what to do with value type "+(0,hn.default)(g)+".");x=s(g)}S.push(m+x)}return S.push("}"),S.join("")},o=n.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,m,x,y,S={},b=1,M=S,T=[],I="",O="",U=f.length-1,N=1;N<U;N+=1)(y=f[N])=="'"?g?(x=g.join(""),g=void 0):g=[]:g?g.push(y):y=="{"?(T.push([M,x]),M={},x=void 0):y=="}"?((m=T.pop())[0][m[1]]=M,x=void 0,M=m[0]):y=="-"?b=-1:x===void 0?t.hasOwnProperty(y)?(I+=t[y],x=parseInt(I,16)*b,b=1,I=""):I+=y:t.hasOwnProperty(y)?(O+=t[y],M[x]=parseInt(O,16)*b,b=1,x=void 0,O=""):O+=y;return S},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},p={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(f){var g=f.font,m=p.Unicode[g.postScriptName];m&&(g.metadata.Unicode={},g.metadata.Unicode.widths=m.widths,g.metadata.Unicode.kerning=m.kerning);var x=u.Unicode[g.postScriptName];x&&(g.metadata.Unicode.encoding=x,g.encoding=x.codePages[0])}])}(ni.API),function(n){var e=function(t){for(var i=t.length,r=new Uint8Array(i),a=0;a<i;a++)r[a]=t.charCodeAt(a);return r};n.API.events.push(["addFont",function(t){var i=void 0,r=t.font,a=t.instance;if(!r.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(i=a.existsFileInVFS(r.postScriptName)===!1?a.loadFile(r.postScriptName):a.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Dp(o)),s.metadata=n.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(r,i)}}])}(ni),function(n){function e(){return(ri.canvg?Promise.resolve(ri.canvg):import("./chunk-ZGKBRWAQ.mjs")).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}ni.API.addSvgAsImage=function(t,i,r,a,s,o,l,u){if(isNaN(i)||isNaN(r))throw gn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(s))throw gn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=a,p.height=s;var f=p.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,p.width,p.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(x){return x.fromString(f,t,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(g)}).then(function(){m.addImage(p.toDataURL("image/jpeg",1),i,r,a,s,l,u)})}}(),ni.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(e,t);return this},ni.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var i,r,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],u=0,p=0,f=0;function g(x,y){var S,b=!1;for(S=0;S<x.length;S+=1)x[S]===y&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var m=o.length;for(f=0;f<m;f+=1)t[o[f]].value=t[o[f]].defaultValue,t[o[f]].explicitSet=!1}if((0,hn.default)(n)==="object"){for(r in n)if(a=n[r],g(o,r)&&a!==void 0){if(t[r].type==="boolean"&&typeof a=="boolean")t[r].value=a;else if(t[r].type==="name"&&g(t[r].valueSet,a))t[r].value=a;else if(t[r].type==="integer"&&Number.isInteger(a))t[r].value=a;else if(t[r].type==="array"){for(u=0;u<a.length;u+=1)if(i=!0,a[u].length===1&&typeof a[u][0]=="number")l.push(String(a[u]-1));else if(a[u].length>1){for(p=0;p<a[u].length;p+=1)typeof a[u][p]!="number"&&(i=!1);i===!0&&l.push([a[u][0]-1,a[u][1]-1].join(" "))}t[r].value="["+l.join(" ")+"]"}else t[r].value=t[r].defaultValue;t[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,y=[];for(x in t)t[x].explicitSet===!0&&(t[x].type==="name"?y.push("/"+x+" /"+t[x].value):y.push("/"+x+" "+t[x].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(i)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+s.length+o.length+r.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(r+a+s+o+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(i,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(ni.API),function(n){var e=n.API,t=e.pdfEscape16=function(a,s){for(var o,l=s.metadata.Unicode.widths,u=["","0","00","000","0000"],p=[""],f=0,g=a.length;f<g;++f){if(o=s.metadata.characterToGlyph(a.charCodeAt(f)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=a.charCodeAt(f),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return p.join("");o=o.toString(16),p.push(u[4-o.length],o)}return p.join("")},i=function(a){var s,o,l,u,p,f,g;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,g=(o=Object.keys(a).sort(function(m,x){return m-x})).length;f<g;f++)s=o[f],l.length>=100&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[s]!==void 0&&a[s]!==null&&typeof a[s].toString=="function"&&(u=("0000"+a[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+u+">"));return l.length&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,u=s.newObject,p=s.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),m="",x=0;x<g.length;x++)m+=String.fromCharCode(g[x]);var y=u();p({data:m,addLength1:!0,objectId:y}),l("endobj");var S=u();p({data:i(o.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var b=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+gu(o.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var M=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+gu(o.fontName)),l("/FontDescriptor "+b+" 0 R"),l("/W "+n.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+S+" 0 R"),l("/BaseFont /"+gu(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+M+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,u=s.newObject,p=s.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,g="",m=0;m<f.length;m++)g+=String.fromCharCode(f[m]);var x=u();p({data:g,addLength1:!0,objectId:x}),l("endobj");var y=u();p({data:i(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var S=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+gu(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var b=0;b<o.metadata.hmtx.widths.length;b++)o.metadata.hmtx.widths[b]=parseInt(o.metadata.hmtx.widths[b]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+gu(o.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var r=function(a){var s,o=a.text||"",l=a.x,u=a.y,p=a.options||{},f=a.mutex||{},g=f.pdfEscape,m=f.activeFontKey,x=f.fonts,y=m,S="",b=0,M="",T=x[y].encoding;if(x[y].encoding!=="Identity-H")return{text:o,x:l,y:u,options:p,mutex:f};for(M=o,y=m,Array.isArray(o)&&(M=o[0]),b=0;b<M.length;b+=1)x[y].metadata.hasOwnProperty("cmap")&&(s=x[y].metadata.cmap.unicode.codeMap[M[b].charCodeAt(0)]),s||M[b].charCodeAt(0)<256&&x[y].metadata.hasOwnProperty("Unicode")?S+=M[b]:S+="";var I="";return parseInt(y.slice(1))<14||T==="WinAnsiEncoding"?I=g(S,y).split("").map(function(O){return O.charCodeAt(0).toString(16)}).join(""):T==="Identity-H"&&(I=t(S,x[y])),f.isHex=!0,{text:I,x:l,y:u,options:p,mutex:f}};e.events.push(["postProcessText",function(a){var s=a.text||"",o=[],l={text:s,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(s)){var u=0;for(u=0;u<s.length;u+=1)Array.isArray(s[u])&&s[u].length===3?o.push([r(Object.assign({},l,{text:s[u][0]})).text,s[u][1],s[u][2]]):o.push(r(Object.assign({},l,{text:s[u]})).text);a.text=o}else a.text=r(Object.assign({},l,{text:s})).text}])}(ni),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,i){return e.call(this),this.internal.vFS[t]=i,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(ni.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var r,a,s,o,l,u,p,f=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),M=!1,T=0;this.__bidiEngine__={};var I=function(P){var V=P.charCodeAt(),$=V>>8,K=y[$];return K!==void 0?f[256*K+(255&V)]:$===252||$===253?"AL":b.test($)?"L":$===8?"R":"N"},O=function(P){for(var V,$=0;$<P.length;$++){if((V=I(P.charAt($)))==="L")return!1;if(V==="R")return!0}return!1},U=function(P,V,$,K){var ct,ot,at,Q,xt=V[K];switch(xt){case"L":case"R":M=!1;break;case"N":case"AN":break;case"EN":M&&(xt="AN");break;case"AL":M=!0,xt="R";break;case"WS":xt="N";break;case"CS":K<1||K+1>=V.length||(ct=$[K-1])!=="EN"&&ct!=="AN"||(ot=V[K+1])!=="EN"&&ot!=="AN"?xt="N":M&&(ot="AN"),xt=ot===ct?ot:"N";break;case"ES":xt=(ct=K>0?$[K-1]:"B")==="EN"&&K+1<V.length&&V[K+1]==="EN"?"EN":"N";break;case"ET":if(K>0&&$[K-1]==="EN"){xt="EN";break}if(M){xt="N";break}for(at=K+1,Q=V.length;at<Q&&V[at]==="ET";)at++;xt=at<Q&&V[at]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(Q=V.length,at=K+1;at<Q&&V[at]==="NSM";)at++;if(at<Q){var Mt=P[K],qt=Mt>=1425&&Mt<=2303||Mt===64286;if(ct=V[at],qt&&(ct==="R"||ct==="AL")){xt="R";break}}}xt=K<1||(ct=V[K-1])==="B"?"N":$[K-1];break;case"B":M=!1,r=!0,xt=T;break;case"S":a=!0,xt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":M=!1;break;case"BN":xt="N"}return xt},N=function(P,V,$){var K=P.split("");return $&&B(K,$,{hiLevel:T}),K.reverse(),V&&V.reverse(),K.join("")},B=function(P,V,$){var K,ct,ot,at,Q,xt=-1,Mt=P.length,qt=0,z=[],nt=T?m:g,Z=[];for(M=!1,r=!1,a=!1,ct=0;ct<Mt;ct++)Z[ct]=I(P[ct]);for(ot=0;ot<Mt;ot++){if(Q=qt,z[ot]=U(P,Z,z,ot),K=240&(qt=nt[Q][x[z[ot]]]),qt&=15,V[ot]=at=nt[qt][5],K>0)if(K===16){for(ct=xt;ct<ot;ct++)V[ct]=1;xt=-1}else xt=-1;if(nt[qt][6])xt===-1&&(xt=ot);else if(xt>-1){for(ct=xt;ct<ot;ct++)V[ct]=at;xt=-1}Z[ot]==="B"&&(V[ot]=0),$.hiLevel|=at}a&&function(st,pt,ft){for(var St=0;St<ft;St++)if(st[St]==="S"){pt[St]=T;for(var kt=St-1;kt>=0&&st[kt]==="WS";kt--)pt[kt]=T}}(Z,V,Mt)},R=function(P,V,$,K,ct){if(!(ct.hiLevel<P)){if(P===1&&T===1&&!r)return V.reverse(),void($&&$.reverse());for(var ot,at,Q,xt,Mt=V.length,qt=0;qt<Mt;){if(K[qt]>=P){for(Q=qt+1;Q<Mt&&K[Q]>=P;)Q++;for(xt=qt,at=Q-1;xt<at;xt++,at--)ot=V[xt],V[xt]=V[at],V[at]=ot,$&&(ot=$[xt],$[xt]=$[at],$[at]=ot);qt=Q}qt++}}},F=function(P,V,$){var K=P.split(""),ct={hiLevel:T};return $||($=[]),B(K,$,ct),function(ot,at,Q){if(Q.hiLevel!==0&&p)for(var xt,Mt=0;Mt<ot.length;Mt++)at[Mt]===1&&(xt=S.indexOf(ot[Mt]))>=0&&(ot[Mt]=S[xt+1])}(K,$,ct),R(2,K,V,$,ct),R(1,K,V,$,ct),K.join("")};return this.__bidiEngine__.doBidiReorder=function(P,V,$){if(function(ct,ot){if(ot)for(var at=0;at<ct.length;at++)ot[at]=at;o===void 0&&(o=O(ct)),u===void 0&&(u=O(ct))}(P,V),s||!l||u)if(s&&l&&o^u)T=o?1:0,P=N(P,V,$);else if(!s&&l&&u)T=o?1:0,P=F(P,V,$),P=N(P,V);else if(!s||o||l||u){if(s&&!l&&o^u)P=N(P,V),o?(T=0,P=F(P,V,$)):(T=1,P=F(P,V,$),P=N(P,V));else if(s&&o&&!l&&u)T=1,P=F(P,V,$),P=N(P,V);else if(!s&&!l&&o^u){var K=p;o?(T=1,P=F(P,V,$),T=0,p=!1,P=F(P,V,$),p=K):(T=0,P=F(P,V,$),P=N(P,V),T=1,p=!1,P=F(P,V,$),p=K,P=N(P,V))}}else T=0,P=F(P,V,$);else T=o?1:0,P=F(P,V,$);return P},this.__bidiEngine__.setOptions=function(P){P&&(s=P.isInputVisual,l=P.isOutputVisual,o=P.isInputRtl,u=P.isOutputRtl,p=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var r=i.text,a=(i.x,i.y,i.options||{}),s=(i.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(r)==="[object Array]"){var o=0;for(s=[],o=0;o<r.length;o+=1)Object.prototype.toString.call(r[o])==="[object Array]"?s.push([t.doBidiReorder(r[o][0]),r[o][1],r[o][2]]):s.push([t.doBidiReorder(r[o])]);i.text=s}else i.text=t.doBidiReorder(r);t.setOptions({isInputVisual:!0})}])}(ni),ni.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Ol(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new D8(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new _8(this.contents),this.head=new x8(this),this.name=new C8(this),this.cmap=new n5(this),this.toUnicode={},this.hhea=new b8(this),this.maxp=new M8(this),this.hmtx=new E8(this),this.post=new S8(this),this.os2=new y8(this),this.loca=new I8(this),this.glyf=new A8(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,i,r,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,l,u;for(u=[],s=0,o=(l=this.bbox).length;s<o;s++)e=l[s],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(i=255&(r=this.post.italic_angle),32768&(t=r>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,i){var r,a,s,o;for(s=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)r=e.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(r))+i*(1e3/t)||0;return s*(t/1e3)},n.prototype.lineHeight=function(e,t){var i;return t==null&&(t=!1),i=t?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},n}();var Ms,Ol=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,i;for(i=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)i[t]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(e){var t,i,r;for(r=[],t=0,i=e.length;0<=i?t<i:t>i;t=0<=i?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,i,r,a,s,o,l;return e=this.readByte(),t=this.readByte(),i=this.readByte(),r=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^i)+4294967296*(255^r)+16777216*(255^a)+65536*(255^s)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*i+4294967296*r+16777216*a+65536*s+256*o+l},n.prototype.writeLongLong=function(e){var t,i;return t=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,i;for(t=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)t.push(this.readByte());return t},n.prototype.write=function(e){var t,i,r,a;for(a=[],i=0,r=e.length;i<r;i++)t=e[i],a.push(this.writeByte(t));return a},n}(),_8=function(){var n;function e(t){var i,r,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},r=0,a=this.tableCount;0<=a?r<a:r>a;r=0<=a?++r:--r)i={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(t){var i,r,a,s,o,l,u,p,f,g,m,x,y;for(y in m=Object.keys(t).length,l=Math.log(2),f=16*Math.floor(Math.log(m)/l),s=Math.floor(f/l),p=16*m-f,(r=new Ol).writeInt(this.scalarType),r.writeShort(m),r.writeShort(f),r.writeShort(s),r.writeShort(p),a=16*m,u=r.pos+a,o=null,x=[],t)for(g=t[y],r.writeString(y),r.writeInt(n(g)),r.writeInt(u),r.writeInt(g.length),x=x.concat(g),y==="head"&&(o=u),u+=g.length;u%4;)x.push(0),u++;return r.write(x),i=2981146554-n(r.data),r.pos=o+8,r.writeUInt32(i),r.data},n=function(t){var i,r,a,s;for(t=r5.call(t);t.length%4;)t.push(0);for(a=new Ol(t),r=0,i=0,s=t.length;i<s;i=i+=4)r+=a.readUInt32();return 4294967295&r},e}(),v8={}.hasOwnProperty,$s=function(n,e){for(var t in e)v8.call(e,t)&&(n[t]=e[t]);function i(){this.constructor=n}return i.prototype=e.prototype,n.prototype=new i,n.__super__=e.prototype,n};Ms=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var x8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return $s(e,Ms),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var i;return(i=new Ol).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(t),i.writeShort(this.glyphDataFormat),i.data},e}(),q3=function(){function n(e,t){var i,r,a,s,o,l,u,p,f,g,m,x,y,S,b,M,T;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),g=m/2,e.pos+=6,a=function(){var I,O;for(O=[],l=I=0;0<=g?I<g:I>g;l=0<=g?++I:--I)O.push(e.readUInt16());return O}(),e.pos+=2,y=function(){var I,O;for(O=[],l=I=0;0<=g?I<g:I>g;l=0<=g?++I:--I)O.push(e.readUInt16());return O}(),u=function(){var I,O;for(O=[],l=I=0;0<=g?I<g:I>g;l=0<=g?++I:--I)O.push(e.readUInt16());return O}(),p=function(){var I,O;for(O=[],l=I=0;0<=g?I<g:I>g;l=0<=g?++I:--I)O.push(e.readUInt16());return O}(),r=(this.length-e.pos+this.offset)/2,o=function(){var I,O;for(O=[],l=I=0;0<=r?I<r:I>r;l=0<=r?++I:--I)O.push(e.readUInt16());return O}(),l=b=0,T=a.length;b<T;l=++b)for(S=a[l],i=M=x=y[l];x<=S?M<=S:M>=S;i=x<=S?++M:--M)p[l]===0?s=i+u[l]:(s=o[p[l]/2+(i-x)-(g-l)]||0)!==0&&(s+=u[l]),this.codeMap[i]=65535&s}e.pos=f}return n.encode=function(e,t){var i,r,a,s,o,l,u,p,f,g,m,x,y,S,b,M,T,I,O,U,N,B,R,F,P,V,$,K,ct,ot,at,Q,xt,Mt,qt,z,nt,Z,st,pt,ft,St,kt,Qt,ie,ue;switch(K=new Ol,s=Object.keys(e).sort(function(_e,mt){return _e-mt}),t){case"macroman":for(y=0,S=function(){var _e=[];for(x=0;x<256;++x)_e.push(0);return _e}(),M={0:0},a={},ct=0,xt=s.length;ct<xt;ct++)M[kt=e[r=s[ct]]]==null&&(M[kt]=++y),a[r]={old:e[r],new:M[e[r]]},S[r]=M[e[r]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(S),{charMap:a,subtable:K.data,maxGlyphID:y+1};case"unicode":for(V=[],f=[],T=0,M={},i={},b=u=null,ot=0,Mt=s.length;ot<Mt;ot++)M[O=e[r=s[ot]]]==null&&(M[O]=++T),i[r]={old:O,new:M[O]},o=M[O]-r,b!=null&&o===u||(b&&f.push(b),V.push(r),u=o),b=r;for(b&&f.push(b),f.push(65535),V.push(65535),F=2*(R=V.length),B=2*Math.pow(Math.log(R)/Math.LN2,2),g=Math.log(B/2)/Math.LN2,N=2*R-B,l=[],U=[],m=[],x=at=0,qt=V.length;at<qt;x=++at){if(P=V[x],p=f[x],P===65535){l.push(0),U.push(0);break}if(P-($=i[P].new)>=32768)for(l.push(0),U.push(2*(m.length+R-x)),r=Q=P;P<=p?Q<=p:Q>=p;r=P<=p?++Q:--Q)m.push(i[r].new);else l.push($-P),U.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*R+2*m.length),K.writeUInt16(0),K.writeUInt16(F),K.writeUInt16(B),K.writeUInt16(g),K.writeUInt16(N),ft=0,z=f.length;ft<z;ft++)r=f[ft],K.writeUInt16(r);for(K.writeUInt16(0),St=0,nt=V.length;St<nt;St++)r=V[St],K.writeUInt16(r);for(Qt=0,Z=l.length;Qt<Z;Qt++)o=l[Qt],K.writeUInt16(o);for(ie=0,st=U.length;ie<st;ie++)I=U[ie],K.writeUInt16(I);for(ue=0,pt=m.length;ue<pt;ue++)y=m[ue],K.writeUInt16(y);return{charMap:i,subtable:K.data,maxGlyphID:T+1}}},n}(),n5=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return $s(e,Ms),e.prototype.tag="cmap",e.prototype.parse=function(t){var i,r,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=a?r<a:r>a;r=0<=a?++r:--r)i=new q3(t,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(t,i){var r,a;return i==null&&(i="macroman"),r=q3.encode(t,i),(a=new Ol).writeUInt16(0),a.writeUInt16(1),r.table=a.data.concat(r.subtable),r},e}(),b8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return $s(e,Ms),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),y8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return $s(e,Ms),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var i,r;for(r=[],i=0;i<10;++i)r.push(t.readByte());return r}(),this.charRange=function(){var i,r;for(r=[],i=0;i<4;++i)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var i,r;for(r=[],i=0;i<2;i=++i)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),S8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return $s(e,Ms),e.prototype.tag="post",e.prototype.parse=function(t){var i,r,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var s;for(r=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)i=t.readByte(),a.push(this.names.push(t.readString(i)));return a;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)u.push(t.readUInt32());return u}).call(this)}},e}(),w8=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},C8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return $s(e,Ms),e.prototype.tag="name",e.prototype.parse=function(t){var i,r,a,s,o,l,u,p,f,g,m;for(t.pos=this.offset,t.readShort(),i=t.readShort(),l=t.readShort(),r=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(u={},s=f=0,g=r.length;f<g;s=++f)a=r[s],t.pos=a.offset,p=t.readString(a.length),o=new w8(p,a),u[m=a.nameID]==null&&(u[m]=[]),u[a.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),M8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return $s(e,Ms),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),E8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return $s(e,Ms),e.prototype.tag="hmtx",e.prototype.parse=function(t){var i,r,a,s,o,l,u;for(t.pos=this.offset,this.metrics=[],i=0,l=this.file.hhea.numberOfMetrics;0<=l?i<l:i>l;i=0<=l?++i:--i)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,f;for(f=[],i=p=0;0<=a?p<a:p>a;i=0<=a?++p:--p)f.push(t.readInt16());return f}(),this.widths=(function(){var p,f,g,m;for(m=[],p=0,f=(g=this.metrics).length;p<f;p++)s=g[p],m.push(s.advance);return m}).call(this),r=this.widths[this.widths.length-1],u=[],i=o=0;0<=a?o<a:o>a;i=0<=a?++o:--o)u.push(this.widths.push(r));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),r5=[].slice,A8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return $s(e,Ms),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var i,r,a,s,o,l,u,p,f,g;return t in this.cache?this.cache[t]:(s=this.file.loca,i=this.file.contents,r=s.indexOf(t),(a=s.lengthOf(t))===0?this.cache[t]=null:(i.pos=this.offset+r,o=(l=new Ol(i.read(a))).readShort(),p=l.readShort(),g=l.readShort(),u=l.readShort(),f=l.readShort(),this.cache[t]=o===-1?new k8(l,p,g,u,f):new T8(l,o,p,g,u,f),this.cache[t]))},e.prototype.encode=function(t,i,r){var a,s,o,l,u;for(o=[],s=[],l=0,u=i.length;l<u;l++)a=t[i[l]],s.push(o.length),a&&(o=o.concat(a.encode(r)));return s.push(o.length),{table:o,offsets:s}},e}(),T8=function(){function n(e,t,i,r,a,s){this.raw=e,this.numberOfContours=t,this.xMin=i,this.yMin=r,this.xMax=a,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),k8=function(){function n(e,t,i,r,a){var s,o;for(this.raw=e,this.xMin=t,this.yMin=i,this.xMax=r,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return n.prototype.encode=function(){var e,t,i;for(t=new Ol(r5.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),I8=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return $s(e,Ms),e.prototype.tag="loca",e.prototype.parse=function(t){var i,r;return t.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var a,s;for(s=[],r=0,a=this.length;r<a;r+=2)s.push(2*t.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],r=0,a=this.length;r<a;r+=4)s.push(t.readUInt32());return s}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,i){for(var r=new Uint32Array(this.offsets.length),a=0,s=0,o=0;o<r.length;++o)if(r[o]=a,s<i.length&&i[s]==o){++s,r[o]=a;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(a+=u)}for(var p=new Array(4*r.length),f=0;f<r.length;++f)p[4*f+3]=255&r[f],p[4*f+2]=(65280&r[f])>>8,p[4*f+1]=(16711680&r[f])>>16,p[4*f]=(4278190080&r[f])>>24;return p},e}(),D8=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,i,r,a;for(t in r=this.font.cmap.tables[0].codeMap,e={},a=this.subset)i=a[t],e[t]=r[i];return e},n.prototype.glyphsFor=function(e){var t,i,r,a,s,o,l;for(r={},s=0,o=e.length;s<o;s++)r[a=e[s]]=this.font.glyf.glyphFor(a);for(a in t=[],r)(i=r[a])!=null&&i.compound&&t.push.apply(t,i.glyphIDs);if(t.length>0)for(a in l=this.glyphsFor(t))i=l[a],r[a]=i;return r},n.prototype.encode=function(e,t){var i,r,a,s,o,l,u,p,f,g,m,x,y,S,b;for(r in i=n5.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),m={0:0},b=i.charMap)m[(l=b[r]).old]=l.new;for(x in g=i.maxGlyphID,s)x in m||(m[x]=g++);return p=function(M){var T,I;for(T in I={},M)I[M[T]]=T;return I}(m),f=Object.keys(p).sort(function(M,T){return M-T}),y=function(){var M,T,I;for(I=[],M=0,T=f.length;M<T;M++)o=f[M],I.push(p[o]);return I}(),a=this.font.glyf.encode(s,y,m),u=this.font.loca.encode(a.offsets,y),S={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},n}();ni.API.PDFObject=function(){var n;function e(){}return n=function(t,i){return(Array(i+1).join("0")+t).slice(-i)},e.convert=function(t){var i,r,a,s;if(Array.isArray(t))return"["+function(){var o,l,u;for(u=[],o=0,l=t.length;o<l;o++)i=t[o],u.push(e.convert(i));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(r in a=["<<"],t)s=t[r],a.push("/"+r+" "+e.convert(s));return a.push(">>"),a.join(`
`)}return""+t},e}();var a5=ni;var pg=class n{barChartData={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Cost (\u20B9)",data:[25e4,22e4,2e5,3e5,28e4,26e4,32e4,31e4,29e4,27e4,25e4,24e4],backgroundColor:"#FF6384",barThickness:30,yAxisID:"y"},{label:"Leads",data:[100,120,150,180,130,160,200,190,170,140,150,130],backgroundColor:"#36A2EB",barThickness:30,yAxisID:"y1"},{label:"Conversions",data:[70,80,90,100,85,95,110,105,95,85,90,80],backgroundColor:"#FFCE56",barThickness:30,yAxisID:"y"}]};barChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:e=>`${e.dataset.label}: ${e.raw}`}}},scales:{x:{beginAtZero:!0,title:{display:!0,text:"Months"}},y:{beginAtZero:!0,type:"linear",display:!0,position:"left",ticks:{callback:e=>`${e.toLocaleString()}`,maxTicksLimit:5},title:{display:!0,text:"Leads & Conversions"}},y1:{beginAtZero:!0,type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},ticks:{callback:e=>`\u20B9${e.toLocaleString()}`,maxTicksLimit:5},title:{display:!0,text:"Cost (\u20B9)"}}}};barChartPlugins=[{id:"insideDataPlugin",afterDatasetsDraw(e){let t=e.ctx;e.data.datasets.forEach((r,a)=>{e.getDatasetMeta(a).data.forEach((o,l)=>{let p=r.data[l].toLocaleString(),f=o.x,g=o.y;t.save(),t.fillStyle="white",t.font="12px Arial",t.textAlign="center",t.textBaseline="middle",t.translate(f,g),t.rotate(-Math.PI/2),t.fillText(p,0,0),t.resetTransform(),t.restore()})})}}];static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Be({type:n,selectors:[["app-marketing-bar-chart"]],decls:2,vars:5,consts:[[2,"width","100%","height","400px"],["baseChart","",3,"datasets","labels","options","type","plugins"]],template:function(t,i){t&1&&(c(0,"div",0),Lt(1,"canvas",1),d()),t&2&&(_(),D("datasets",i.barChartData.datasets)("labels",i.barChartData.labels)("options",i.barChartOptions)("type","bar")("plugins",i.barChartPlugins))},dependencies:[UA],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}"]})};var L8=n=>({"full-width":n}),Su=n=>({show:n}),R8=n=>({"active-module":n});function O8(n,e){if(n&1&&(c(0,"option",26),h(1),d()),n&2){let t=e.$implicit;D("value",t),_(),A(t)}}function N8(n,e){if(n&1){let t=Nt();c(0,"li",27),lt("click",function(){let r=G(t).$implicit,a=k();return q(a.selectModule(r))}),h(1),d()}if(n&2){let t=e.$implicit,i=k();D("ngClass",te(2,R8,t===i.selectedModule)),_(),de(" ",t," ")}}function F8(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),d(),c(4,"td",42),h(5),d(),c(6,"td",43),h(7),d(),c(8,"td",43),h(9),d(),c(10,"td",43),h(11),Et(12,"date"),d(),c(13,"td",43),h(14),Et(15,"date"),d(),c(16,"td",43),h(17),d(),c(18,"td",42),h(19),d(),c(20,"td",42),h(21),d()(),c(22,"tr")(23,"td",44),h(24),d(),c(25,"td",44),h(26),d(),c(27,"td",44),h(28),Et(29,"date"),d(),c(30,"td",44),h(31),Et(32,"date"),d(),c(33,"td",44),h(34),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.cont_Task_name),_(2),A(t.cont_goal_quantity),_(2),A(t.cont_goal_quality),_(2),A(At(12,14,t.cont_goal_start_date,"d MMM")),_(3),A(At(15,17,t.cont_goal_end_date,"d MMM")),_(3),A(t.cont_goal_no_of_days),_(2),A(t.cont_status),_(2),A(t.cont_assigned_to),_(3),A(t.cont_actual_quantity),_(2),A(t.cont_actual_quality),_(2),A(At(29,20,t.cont_actual_start_date,"d MMM")),_(3),A(At(32,23,t.cont_actual_end_date,"d MMM")),_(3),A(t.cont_actual_no_of_days)}}function B8(n,e){if(n&1&&(pe(0),rt(1,F8,35,26,"ng-container",41),fe()),n&2){let t=k(2);_(),D("ngForOf",t.filtered_content)}}function V8(n,e){n&1&&(c(0,"tr")(1,"td",45),h(2,"No task found"),d()())}function U8(n,e){if(n&1){let t=Nt();c(0,"div",28)(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"p"),h(6,"Slect From and To date"),d()(),c(7,"div",19)(8,"div",29)(9,"div",30)(10,"label",31),h(11,"From date"),d(),c(12,"input",32),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.startDate_content,r)||(a.startDate_content=r),q(r)}),d()(),c(13,"div",30)(14,"label",31),h(15,"To date"),d(),c(16,"input",33),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.endDate_content,r)||(a.endDate_content=r),q(r)}),d()()()(),c(17,"div",21)(18,"button",22),lt("click",function(){G(t);let r=k();return q(r.filterByDate_content())}),h(19,"Filter"),d(),c(20,"button",22),lt("click",function(){G(t);let r=k();return q(r.reset_filter_content())}),h(21,"Reset"),d()()()()(),c(22,"button",20),lt("click",function(){G(t);let r=k();return q(r.openModal())}),h(23,"Download"),d(),c(24,"button",34),lt("click",function(){G(t);let r=k();return q(r.filter_card_open())}),h(25,"Filter"),d(),c(26,"div",35)(27,"table",36)(28,"thead")(29,"tr")(30,"th",37),h(31,"Content Tracker (Content Creations)"),d()(),c(32,"tr",38)(33,"th"),h(34,"S.No"),d(),c(35,"th"),h(36,"Tasks"),d(),c(37,"th",39),h(38,"Quantity"),d(),c(39,"th",39),h(40,"Quality"),d(),c(41,"th",39),h(42,"Start Date"),d(),c(43,"th",39),h(44,"End Date"),d(),c(45,"th",39),h(46,"No of Days"),d(),c(47,"th"),h(48,"Status"),d(),c(49,"th"),h(50,"Assigned To"),d()()(),c(51,"tbody"),rt(52,B8,2,1,"ng-container",40),d(),rt(53,V8,3,0,"ng-template",null,0,Ie),d()()()}if(n&2){let t=Qe(54),i=k();_(),pc("display",i.filter_card_marketing?"block":"none"),D("ngClass",te(7,Su,i.filter_card_marketing)),_(11),gt("ngModel",i.startDate_content),_(4),gt("ngModel",i.endDate_content),_(36),D("ngIf",i.filtered_content&&i.filtered_content.length>0)("ngIfElse",t)}}function z8(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),d(),c(4,"td",42),h(5),d(),c(6,"td",43),h(7),d(),c(8,"td",43),h(9),d(),c(10,"td",43),h(11),d(),c(12,"td",43),h(13),Et(14,"date"),d(),c(15,"td",43),h(16),Et(17,"date"),d(),c(18,"td",43),h(19),d(),c(20,"td",42),h(21),d(),c(22,"td",42),h(23),d()(),c(24,"tr")(25,"td",44),h(26),d(),c(27,"td",44),h(28),d(),c(29,"td",44),h(30),d(),c(31,"td",44),h(32),Et(33,"date"),d(),c(34,"td",44),h(35),Et(36,"date"),d(),c(37,"td",44),h(38),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Col_Task_name),_(2),A(t.Col_goal_quantity),_(2),A(t.Col_goal_quality),_(2),A(t.Cal_goal_cost),_(2),A(At(14,16,t.Col_goal_start_date,"d MMM")),_(3),A(At(17,19,t.Col_goal_end_date,"d MMM")),_(3),A(t.Col_goal_no_of_days),_(2),A(t.Col_status),_(2),A(t.Col_assigned_to),_(3),A(t.Col_actual_quantity),_(2),A(t.Col_actual_quality),_(2),A(t.Cal_actual_cost),_(2),A(At(33,22,t.Col_actual_start_date,"d MMM")),_(3),A(At(36,25,t.Col_actual_end_date,"d MMM")),_(3),A(t.Col_actual_no_of_days)}}function H8(n,e){if(n&1&&(pe(0),rt(1,z8,39,28,"ng-container",41),fe()),n&2){let t=k(2);_(),D("ngForOf",t.filtered_collateral)}}function W8(n,e){n&1&&(c(0,"tr")(1,"td",45),h(2,"No task found"),d()())}function j8(n,e){if(n&1){let t=Nt();c(0,"div",28)(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"p"),h(6,"Slect From and To date"),d()(),c(7,"div",19)(8,"div",29)(9,"div",30)(10,"label",31),h(11,"From date"),d(),c(12,"input",32),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.startDate_collateral,r)||(a.startDate_collateral=r),q(r)}),d()(),c(13,"div",30)(14,"label",31),h(15,"To date"),d(),c(16,"input",33),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.endDate_collateral,r)||(a.endDate_collateral=r),q(r)}),d()()()(),c(17,"div",21)(18,"button",22),lt("click",function(){G(t);let r=k();return q(r.filterByDate_collateral())}),h(19,"Filter"),d(),c(20,"button",22),lt("click",function(){G(t);let r=k();return q(r.reset_filter_collateral())}),h(21,"Reset"),d()()()()(),c(22,"button",20),lt("click",function(){G(t);let r=k();return q(r.openModal())}),h(23,"Download"),d(),c(24,"button",34),lt("click",function(){G(t);let r=k();return q(r.filter_card_open())}),h(25,"Filter"),d(),c(26,"div",35)(27,"table",36)(28,"thead")(29,"tr")(30,"th",46),h(31,"Collateral Tracker (Collateral Designs & Video Making)"),d()(),c(32,"tr",38)(33,"th"),h(34,"S.No"),d(),c(35,"th"),h(36,"Tasks"),d(),c(37,"th",39),h(38,"Quantity"),d(),c(39,"th",39),h(40,"Quality"),d(),c(41,"th",39),h(42,"Cost"),d(),c(43,"th",39),h(44,"Start Date"),d(),c(45,"th",39),h(46,"End Date"),d(),c(47,"th",39),h(48,"No of Days"),d(),c(49,"th"),h(50,"Status"),d(),c(51,"th"),h(52,"Assigned To"),d()()(),c(53,"tbody"),rt(54,H8,2,1,"ng-container",40),d(),rt(55,W8,3,0,"ng-template",null,0,Ie),d()()()}if(n&2){let t=Qe(56),i=k();_(),pc("display",i.filter_card_marketing?"block":"none"),D("ngClass",te(7,Su,i.filter_card_marketing)),_(11),gt("ngModel",i.startDate_collateral),_(4),gt("ngModel",i.endDate_collateral),_(38),D("ngIf",i.filtered_collateral&&i.filtered_collateral.length>0)("ngIfElse",t)}}function G8(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),d(),c(4,"td",42),h(5),d(),c(6,"td",43),h(7),d(),c(8,"td",43),h(9),d(),c(10,"td",43),h(11),Et(12,"date"),d(),c(13,"td",43),h(14),Et(15,"date"),d(),c(16,"td",43),h(17),d(),c(18,"td",42),h(19),d(),c(20,"td",42),h(21),d()(),c(22,"tr")(23,"td",44),h(24),d(),c(25,"td",44),h(26),d(),c(27,"td",44),h(28),Et(29,"date"),d(),c(30,"td",44),h(31),Et(32,"date"),d(),c(33,"td",44),h(34),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Cal_Task_name),_(2),A(t.Cal_goal_quantity),_(2),A(t.Cal_goal_cost),_(2),A(At(12,14,t.Cal_goal_start_date,"d MMM")),_(3),A(At(15,17,t.Cal_goal_end_date,"d MMM")),_(3),A(t.Cal_goal_Frequency),_(2),A(t.Cal_status),_(2),A(t.Cal_assigned_to),_(3),A(t.Cal_actual_quantity),_(2),A(t.Cal_actual_cost),_(2),A(At(29,20,t.Cal_actual_start_date,"d MMM")),_(3),A(At(32,23,t.Cal_actual_end_date,"d MMM")),_(3),A(t.Cal_actual_Frequency)}}function q8(n,e){if(n&1&&(pe(0),rt(1,G8,35,26,"ng-container",41),fe()),n&2){let t=k(2);_(),D("ngForOf",t.filtered_calender)}}function X8(n,e){if(n&1&&(c(0,"tbody")(1,"tr")(2,"td",47),h(3,"Total Cost"),d(),c(4,"td",48),h(5),d(),Lt(6,"td",49),d(),c(7,"tr")(8,"td",50),h(9),d()()()),n&2){let t=k(2);_(5),A(t.Total_Goal_Cost),_(4),A(t.Total_Actual_Cost)}}function Y8(n,e){n&1&&(c(0,"tr")(1,"td",45),h(2,"No task found"),d()())}function $8(n,e){if(n&1){let t=Nt();c(0,"div",28)(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"p"),h(6,"Slect From and To date"),d()(),c(7,"div",19)(8,"div",29)(9,"div",30)(10,"label",31),h(11,"From date"),d(),c(12,"input",32),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.startDate_calender,r)||(a.startDate_calender=r),q(r)}),d()(),c(13,"div",30)(14,"label",31),h(15,"To date"),d(),c(16,"input",33),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.endDate_calender,r)||(a.endDate_calender=r),q(r)}),d()()()(),c(17,"div",21)(18,"button",22),lt("click",function(){G(t);let r=k();return q(r.filterByDate_calender())}),h(19,"Filter"),d(),c(20,"button",22),lt("click",function(){G(t);let r=k();return q(r.reset_filter_calender())}),h(21,"Reset"),d()()()()(),c(22,"button",20),lt("click",function(){G(t);let r=k();return q(r.openModal())}),h(23,"Download"),d(),c(24,"button",34),lt("click",function(){G(t);let r=k();return q(r.filter_card_open())}),h(25,"Filter"),d(),c(26,"div",35)(27,"table",36)(28,"thead")(29,"tr")(30,"th",46),h(31,"Marketing Calender (Online & Offline Activites)"),d()(),c(32,"tr",38)(33,"th"),h(34,"S.No"),d(),c(35,"th"),h(36,"Tasks"),d(),c(37,"th",39),h(38,"Quantity"),d(),c(39,"th",39),h(40,"Cost"),d(),c(41,"th",39),h(42,"Start Date"),d(),c(43,"th",39),h(44,"End Date"),d(),c(45,"th",39),h(46,"Frequency"),d(),c(47,"th"),h(48,"Status"),d(),c(49,"th"),h(50,"Assigned To"),d()()(),c(51,"tbody"),rt(52,q8,2,1,"ng-container",40),d(),rt(53,X8,10,2,"tbody",25)(54,Y8,3,0,"ng-template",null,0,Ie),d()()()}if(n&2){let t=Qe(55),i=k();_(),pc("display",i.filter_card_marketing?"block":"none"),D("ngClass",te(8,Su,i.filter_card_marketing)),_(11),gt("ngModel",i.startDate_calender),_(4),gt("ngModel",i.endDate_calender),_(36),D("ngIf",i.filtered_calender&&i.filtered_calender.length>0)("ngIfElse",t),_(),D("ngIf",i.get_marketing_calender&&i.get_marketing_calender.length>0)}}function K8(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),d(),c(4,"td",42),h(5),d(),c(6,"td",43),h(7),d(),c(8,"td",43),h(9),d(),c(10,"td",43),h(11),d(),c(12,"td",43),h(13),Et(14,"date"),d(),c(15,"td",43),h(16),Et(17,"date"),d(),c(18,"td",42),h(19),d()(),c(20,"tr")(21,"td",44),h(22),d(),c(23,"td",44),h(24),d(),c(25,"td",44),h(26),d(),c(27,"td",44),h(28),Et(29,"date"),d(),c(30,"td",44),h(31),Et(32,"date"),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Eng_Task_name),_(2),A(t.Eng_goal_like),_(2),A(t.Eng_goal_followers),_(2),A(t.Eng_goal_Views),_(2),A(At(14,13,t.Eng_goal_start_date,"d MMM")),_(3),A(At(17,16,t.Eng_goal_end_date,"d MMM")),_(3),A(t.Eng_status),_(3),A(t.Eng_actual_like),_(2),A(t.Eng_actual_followers),_(2),A(t.Eng_actual_Views),_(2),A(At(29,19,t.Eng_actual_start_date,"d MMM")),_(3),A(At(32,22,t.Eng_actual_end_date,"d MMM"))}}function Z8(n,e){if(n&1&&(pe(0),rt(1,K8,33,25,"ng-container",41),fe()),n&2){let t=k(2);_(),D("ngForOf",t.filtered_engagement)}}function J8(n,e){n&1&&(c(0,"tr")(1,"td",51),h(2,"No task found"),d()())}function Q8(n,e){if(n&1){let t=Nt();c(0,"div",28)(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"p"),h(6,"Slect From and To date"),d()(),c(7,"div",19)(8,"div",29)(9,"div",30)(10,"label",31),h(11,"From date"),d(),c(12,"input",32),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.startDate_engagement,r)||(a.startDate_engagement=r),q(r)}),d()(),c(13,"div",30)(14,"label",31),h(15,"To date"),d(),c(16,"input",33),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.endDate_engagement,r)||(a.endDate_engagement=r),q(r)}),d()()()(),c(17,"div",21)(18,"button",22),lt("click",function(){G(t);let r=k();return q(r.filterByDate_engagement())}),h(19,"Filter"),d(),c(20,"button",22),lt("click",function(){G(t);let r=k();return q(r.reset_filter_engagement())}),h(21,"Reset"),d()()()()(),c(22,"button",20),lt("click",function(){G(t);let r=k();return q(r.openModal())}),h(23,"Download"),d(),c(24,"button",34),lt("click",function(){G(t);let r=k();return q(r.filter_card_open())}),h(25,"Filter"),d(),c(26,"div",35)(27,"table",36)(28,"thead")(29,"tr")(30,"th",46),h(31,"Engagement Analyzing Tracker (Engagement for Online Activites)"),d()(),c(32,"tr",38)(33,"th"),h(34,"S.No"),d(),c(35,"th"),h(36,"Tasks"),d(),c(37,"th",39),h(38,"Likes"),d(),c(39,"th",39),h(40,"Followers"),d(),c(41,"th",39),h(42,"Views\\Reach"),d(),c(43,"th",39),h(44,"Start Date"),d(),c(45,"th",39),h(46,"End Date"),d(),c(47,"th"),h(48,"Status"),d()()(),c(49,"tbody"),rt(50,Z8,2,1,"ng-container",40),d(),rt(51,J8,3,0,"ng-template",null,0,Ie),d()()()}if(n&2){let t=Qe(52),i=k();_(),pc("display",i.filter_card_marketing?"block":"none"),D("ngClass",te(7,Su,i.filter_card_marketing)),_(11),gt("ngModel",i.startDate_engagement),_(4),gt("ngModel",i.endDate_engagement),_(34),D("ngIf",i.filtered_engagement&&i.filtered_engagement.length>0)("ngIfElse",t)}}function tB(n,e){if(n&1&&(pe(0),c(1,"td",61),h(2),d(),fe()),n&2){let t=k(4);_(),go("rowspan",t.get_total_leads.length),_(),de(" ",t.totalGoal," ")}}function eB(n,e){if(n&1&&(c(0,"tr",59)(1,"td",60),h(2),d(),c(3,"td",60),h(4),d(),rt(5,tB,3,2,"ng-container",25),c(6,"td",60),h(7),d()()),n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.SourceName),_(),D("ngIf",i===0),_(2),A(t.NumberOfLeads)}}function iB(n,e){if(n&1&&(pe(0),rt(1,eB,8,4,"tr",58),fe()),n&2){let t=k(2);_(),D("ngForOf",t.get_total_leads)}}function nB(n,e){if(n&1&&(c(0,"tbody")(1,"tr")(2,"td",62),h(3,"Total"),d(),c(4,"td"),h(5),d()()()),n&2){let t=k(2);_(5),A(t.totalActual)}}function rB(n,e){n&1&&(c(0,"tbody")(1,"tr")(2,"td",63),h(3,"No task found"),d()()())}function aB(n,e){if(n&1){let t=Nt();c(0,"div",52)(1,"button",20),lt("click",function(){G(t);let r=k();return q(r.openModal())}),h(2,"Download"),d(),c(3,"div",35)(4,"table",53)(5,"thead",54)(6,"tr")(7,"th",55),h(8,"Results - Total Leads"),d()(),c(9,"tr")(10,"th"),h(11,"S.No"),d(),c(12,"th"),h(13,"Source"),d(),c(14,"th",56),h(15,"Goal"),d(),c(16,"th",57),h(17,"Actual"),d()()(),c(18,"tbody"),rt(19,iB,2,1,"ng-container",40),d(),rt(20,nB,6,1,"tbody",25)(21,rB,4,0,"ng-template",null,0,Ie),d()()()}if(n&2){let t=Qe(22),i=k();_(19),D("ngIf",i.get_total_leads&&i.get_total_leads.length>0)("ngIfElse",t),_(),D("ngIf",i.get_total_leads&&i.get_total_leads.length>0)}}function sB(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),d(),c(4,"td",42),h(5),d(),c(6,"td",43),h(7),Et(8,"date"),d(),c(9,"td",43),h(10),Et(11,"date"),d(),c(12,"td",43),h(13),d(),c(14,"td",42),h(15),d(),c(16,"td",42),h(17),d()(),c(18,"tr")(19,"td",44),h(20),Et(21,"date"),d(),c(22,"td",44),h(23),Et(24,"date"),d(),c(25,"td",44),h(26),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Mls_description),_(2),A(At(8,10,t.Mls_goal_start_date,"d MMM")),_(3),A(At(11,13,t.Mls_goal_end_date,"d MMM")),_(3),A(t.Mls_goal_no_of_days),_(2),A(t.Mls_status),_(2),A(t.Mls_assigned_to),_(3),A(At(21,16,t.Mls_actual_start_date,"d MMM")),_(3),A(At(24,19,t.Mls_actual_end_date,"d MMM")),_(3),A(t.Mls_actual_no_of_days)}}function oB(n,e){if(n&1&&(pe(0),rt(1,sB,27,22,"ng-container",41),fe()),n&2){let t=k(2);_(),D("ngForOf",t.filtered_task_progress)}}function lB(n,e){n&1&&(c(0,"tr")(1,"td",51),h(2,"No task found"),d()())}function cB(n,e){if(n&1){let t=Nt();c(0,"div",28)(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"p"),h(6,"Slect From and To date"),d()(),c(7,"div",19)(8,"div",29)(9,"div",30)(10,"label",31),h(11,"From date"),d(),c(12,"input",32),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.startDate_task_progress,r)||(a.startDate_task_progress=r),q(r)}),d()(),c(13,"div",30)(14,"label",31),h(15,"To date"),d(),c(16,"input",33),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.endDate_task_progress,r)||(a.endDate_task_progress=r),q(r)}),d()()()(),c(17,"div",21)(18,"button",22),lt("click",function(){G(t);let r=k();return q(r.filterByDate_miscellaneous())}),h(19,"Filter"),d(),c(20,"button",22),lt("click",function(){G(t);let r=k();return q(r.reset_filter_miscellaneous())}),h(21,"Reset"),d()()()()(),c(22,"button",20),lt("click",function(){G(t);let r=k();return q(r.openModal())}),h(23,"Download"),d(),c(24,"button",34),lt("click",function(){G(t);let r=k();return q(r.filter_card_open())}),h(25,"Filter"),d(),c(26,"div",35)(27,"table",36)(28,"thead")(29,"tr")(30,"th",64),h(31,"Task Progress"),d()(),c(32,"tr",38)(33,"th"),h(34,"S.No"),d(),c(35,"th"),h(36,"Tasks"),d(),c(37,"th",39),h(38,"Start Date"),d(),c(39,"th",39),h(40,"End Date"),d(),c(41,"th",39),h(42,"Number of Days"),d(),c(43,"th"),h(44,"Status"),d(),c(45,"th"),h(46,"Assigned To"),d()()(),c(47,"tbody"),rt(48,oB,2,1,"ng-container",40),d(),rt(49,lB,3,0,"ng-template",null,0,Ie),d()()()}if(n&2){let t=Qe(50),i=k();_(),pc("display",i.filter_card_marketing?"block":"none"),D("ngClass",te(7,Su,i.filter_card_marketing)),_(11),gt("ngModel",i.startDate_task_progress),_(4),gt("ngModel",i.endDate_task_progress),_(32),D("ngIf",i.filtered_task_progress&&i.filtered_task_progress.length>0)("ngIfElse",t)}}function dB(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),d(),c(4,"td",42),h(5),d(),c(6,"td",43),h(7),d(),c(8,"td",43),h(9),d(),c(10,"td",43),h(11),Et(12,"date"),d(),c(13,"td",43),h(14),Et(15,"date"),d(),c(16,"td",43),h(17),d(),c(18,"td",42),h(19),d(),c(20,"td",42),h(21),d()(),c(22,"tr")(23,"td",44),h(24),d(),c(25,"td",44),h(26),d(),c(27,"td",44),h(28),Et(29,"date"),d(),c(30,"td",44),h(31),Et(32,"date"),d(),c(33,"td",44),h(34),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.cont_Task_name),_(2),A(t.cont_goal_quantity),_(2),A(t.cont_goal_quality),_(2),A(At(12,14,t.cont_goal_start_date,"d MMM")),_(3),A(At(15,17,t.cont_goal_end_date,"d MMM")),_(3),A(t.cont_goal_no_of_days),_(2),A(t.cont_status),_(2),A(t.cont_assigned_to),_(3),A(t.cont_actual_quantity),_(2),A(t.cont_actual_quality),_(2),A(At(29,20,t.cont_actual_start_date,"d MMM")),_(3),A(At(32,23,t.cont_actual_end_date,"d MMM")),_(3),A(t.cont_actual_no_of_days)}}function uB(n,e){if(n&1&&(pe(0),rt(1,dB,35,26,"ng-container",41),fe()),n&2){let t=k(3);_(),D("ngForOf",t.tactical_content)}}function hB(n,e){n&1&&(c(0,"tr")(1,"td",45),h(2,"No task found"),d()())}function pB(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),d(),c(4,"td",42),h(5),d(),c(6,"td",43),h(7),d(),c(8,"td",43),h(9),d(),c(10,"td",43),h(11),d(),c(12,"td",43),h(13),Et(14,"date"),d(),c(15,"td",43),h(16),Et(17,"date"),d(),c(18,"td",43),h(19),d(),c(20,"td",42),h(21),d(),c(22,"td",42),h(23),d()(),c(24,"tr")(25,"td",44),h(26),d(),c(27,"td",44),h(28),d(),c(29,"td",44),h(30),d(),c(31,"td",44),h(32),Et(33,"date"),d(),c(34,"td",44),h(35),Et(36,"date"),d(),c(37,"td",44),h(38),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Col_Task_name),_(2),A(t.Col_goal_quantity),_(2),A(t.Col_goal_quality),_(2),A(t.Cal_goal_cost),_(2),A(At(14,16,t.Col_goal_start_date,"d MMM")),_(3),A(At(17,19,t.Col_goal_end_date,"d MMM")),_(3),A(t.Col_goal_no_of_days),_(2),A(t.Col_status),_(2),A(t.Col_assigned_to),_(3),A(t.Col_actual_quantity),_(2),A(t.Col_actual_quality),_(2),A(t.Cal_actual_cost),_(2),A(At(33,22,t.Col_actual_start_date,"d MMM")),_(3),A(At(36,25,t.Col_actual_end_date,"d MMM")),_(3),A(t.Col_actual_no_of_days)}}function fB(n,e){if(n&1&&(pe(0),rt(1,pB,39,28,"ng-container",41),fe()),n&2){let t=k(3);_(),D("ngForOf",t.tactical_colletrel)}}function mB(n,e){n&1&&(c(0,"tr")(1,"td",68),h(2,"No task found"),d()())}function gB(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),d(),c(4,"td",42),h(5),d(),c(6,"td",43),h(7),d(),c(8,"td",43),h(9),d(),c(10,"td",43),h(11),Et(12,"date"),d(),c(13,"td",43),h(14),Et(15,"date"),d(),c(16,"td",43),h(17),d(),c(18,"td",42),h(19),d(),c(20,"td",42),h(21),d()(),c(22,"tr")(23,"td",44),h(24),d(),c(25,"td",44),h(26),d(),c(27,"td",44),h(28),Et(29,"date"),d(),c(30,"td",44),h(31),Et(32,"date"),d(),c(33,"td",44),h(34),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Cal_Task_name),_(2),A(t.Cal_goal_quantity),_(2),A(t.Cal_goal_cost),_(2),A(At(12,14,t.Cal_goal_start_date,"d MMM")),_(3),A(At(15,17,t.Cal_goal_end_date,"d MMM")),_(3),A(t.Cal_goal_Frequency),_(2),A(t.Cal_status),_(2),A(t.Cal_assigned_to),_(3),A(t.Cal_actual_quantity),_(2),A(t.Cal_actual_cost),_(2),A(At(29,20,t.Cal_actual_start_date,"d MMM")),_(3),A(At(32,23,t.Cal_actual_end_date,"d MMM")),_(3),A(t.Cal_actual_Frequency)}}function _B(n,e){if(n&1&&(pe(0),rt(1,gB,35,26,"ng-container",41),fe()),n&2){let t=k(3);_(),D("ngForOf",t.tactical_calender)}}function vB(n,e){if(n&1&&(c(0,"tbody")(1,"tr")(2,"td",47),h(3,"Total Cost"),d(),c(4,"td",48),h(5),d(),Lt(6,"td",49),d(),c(7,"tr")(8,"td",50),h(9),d()()()),n&2){let t=k(3);_(5),A(t.Strategic_Goal_Cost),_(4),A(t.Strategic_Actual_Cost)}}function xB(n,e){n&1&&(c(0,"tr")(1,"td",45),h(2,"No task found"),d()())}function bB(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),d(),c(4,"td",42),h(5),d(),c(6,"td",43),h(7),d(),c(8,"td",43),h(9),d(),c(10,"td",43),h(11),d(),c(12,"td",43),h(13),Et(14,"date"),d(),c(15,"td",43),h(16),Et(17,"date"),d(),c(18,"td",42),h(19),d()(),c(20,"tr")(21,"td",44),h(22),d(),c(23,"td",44),h(24),d(),c(25,"td",44),h(26),d(),c(27,"td",44),h(28),Et(29,"date"),d(),c(30,"td",44),h(31),Et(32,"date"),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Eng_Task_name),_(2),A(t.Eng_goal_like),_(2),A(t.Eng_goal_followers),_(2),A(t.Eng_goal_Views),_(2),A(At(14,13,t.Eng_goal_start_date,"d MMM")),_(3),A(At(17,16,t.Eng_goal_end_date,"d MMM")),_(3),A(t.Eng_status),_(3),A(t.Eng_actual_like),_(2),A(t.Eng_actual_followers),_(2),A(t.Eng_actual_Views),_(2),A(At(29,19,t.Eng_actual_start_date,"d MMM")),_(3),A(At(32,22,t.Eng_actual_end_date,"d MMM"))}}function yB(n,e){if(n&1&&(pe(0),rt(1,bB,33,25,"ng-container",41),fe()),n&2){let t=k(3);_(),D("ngForOf",t.tactical_engagement)}}function SB(n,e){n&1&&(c(0,"tr")(1,"td",51),h(2,"No task found"),d()())}function wB(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),d(),c(4,"td",42),h(5),d(),c(6,"td",43),h(7),Et(8,"date"),d(),c(9,"td",43),h(10),Et(11,"date"),d(),c(12,"td",43),h(13),d(),c(14,"td",42),h(15),d(),c(16,"td",42),h(17),d()(),c(18,"tr")(19,"td",44),h(20),Et(21,"date"),d(),c(22,"td",44),h(23),Et(24,"date"),d(),c(25,"td",44),h(26),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Mls_description),_(2),A(At(8,10,t.Mls_goal_start_date,"d MMM")),_(3),A(At(11,13,t.Mls_goal_end_date,"d MMM")),_(3),A(t.Mls_goal_no_of_days),_(2),A(t.Mls_status),_(2),A(t.Mls_assigned_to),_(3),A(At(21,16,t.Mls_actual_start_date,"d MMM")),_(3),A(At(24,19,t.Mls_actual_end_date,"d MMM")),_(3),A(t.Mls_actual_no_of_days)}}function CB(n,e){if(n&1&&(pe(0),rt(1,wB,27,22,"ng-container",41),fe()),n&2){let t=k(3);_(),D("ngForOf",t.tactical_task_progress)}}function MB(n,e){n&1&&(c(0,"tr")(1,"td",51),h(2,"No task found"),d()())}function EB(n,e){if(n&1&&(pe(0),c(1,"td",61),h(2),d(),fe()),n&2){let t=k(5);_(),go("rowspan",t.get_total_leads.length),_(),de(" ",t.totalTolGoal," ")}}function AB(n,e){if(n&1&&(c(0,"tr",59)(1,"td",60),h(2),d(),c(3,"td",60),h(4),d(),rt(5,EB,3,2,"ng-container",25),c(6,"td",60),h(7),d()()),n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.Tol_Task_Name),_(),D("ngIf",i===0),_(2),A(t.Tol_actual)}}function TB(n,e){if(n&1&&(pe(0),rt(1,AB,8,4,"tr",58),fe()),n&2){let t=k(3);_(),D("ngForOf",t.get_total_leads)}}function kB(n,e){if(n&1&&(c(0,"tbody")(1,"tr")(2,"td",62),h(3,"Total"),d(),c(4,"td"),h(5),d()()()),n&2){let t=k(3);_(5),A(t.totalActual)}}function IB(n,e){n&1&&(c(0,"tbody")(1,"tr")(2,"td",63),h(3,"No task found"),d()()())}function DB(n,e){if(n&1&&(c(0,"div")(1,"div",66)(2,"h6"),h(3,"Tactical Meeting"),d()(),c(4,"div")(5,"div",67)(6,"table",36)(7,"thead")(8,"tr")(9,"th",37),h(10,"Content Tracker (Content Creations)"),d()(),c(11,"tr",38)(12,"th"),h(13,"S.No"),d(),c(14,"th"),h(15,"Tasks"),d(),c(16,"th",39),h(17,"Quantity"),d(),c(18,"th",39),h(19,"Quality"),d(),c(20,"th",39),h(21,"Start Date"),d(),c(22,"th",39),h(23,"End Date"),d(),c(24,"th",39),h(25,"No of Days"),d(),c(26,"th"),h(27,"Status"),d(),c(28,"th"),h(29,"Assigned To"),d()()(),c(30,"tbody"),rt(31,uB,2,1,"ng-container",40),d(),rt(32,hB,3,0,"ng-template",null,0,Ie),d()(),c(34,"div",67)(35,"table",36)(36,"thead")(37,"tr")(38,"th",46),h(39,"Collateral Tracker (Collateral Designs & Video Making)"),d()(),c(40,"tr",38)(41,"th"),h(42,"S.No"),d(),c(43,"th"),h(44,"Tasks"),d(),c(45,"th",39),h(46,"Quantity"),d(),c(47,"th",39),h(48,"Quality"),d(),c(49,"th",39),h(50,"Cost"),d(),c(51,"th",39),h(52,"Start Date"),d(),c(53,"th",39),h(54,"End Date"),d(),c(55,"th",39),h(56,"No of Days"),d(),c(57,"th"),h(58,"Status"),d(),c(59,"th"),h(60,"Assigned To"),d()()(),c(61,"tbody"),rt(62,fB,2,1,"ng-container",40),d(),rt(63,mB,3,0,"ng-template",null,0,Ie),d()(),c(65,"div",67)(66,"table",36)(67,"thead")(68,"tr")(69,"th",46),h(70,"Marketing Calender (Online & Offline Activites)"),d()(),c(71,"tr",38)(72,"th"),h(73,"S.No"),d(),c(74,"th"),h(75,"Tasks"),d(),c(76,"th",39),h(77,"Quantity"),d(),c(78,"th",39),h(79,"Cost"),d(),c(80,"th",39),h(81,"Start Date"),d(),c(82,"th",39),h(83,"End Date"),d(),c(84,"th",39),h(85,"Frequency"),d(),c(86,"th"),h(87,"Status"),d(),c(88,"th"),h(89,"Assigned To"),d()()(),c(90,"tbody"),rt(91,_B,2,1,"ng-container",40),d(),rt(92,vB,10,2,"tbody",25)(93,xB,3,0,"ng-template",null,0,Ie),d()(),c(95,"div",67)(96,"table",36)(97,"thead")(98,"tr")(99,"th",46),h(100,"Engagement Analyzing Tracker (Engagement for Online Activites) "),d()(),c(101,"tr",38)(102,"th"),h(103,"S.No"),d(),c(104,"th"),h(105,"Tasks"),d(),c(106,"th",39),h(107,"Likes"),d(),c(108,"th",39),h(109,"Followers"),d(),c(110,"th",39),h(111,"Views\\Reach"),d(),c(112,"th",39),h(113,"Start Date"),d(),c(114,"th",39),h(115,"End Date"),d(),c(116,"th"),h(117,"Status"),d()()(),c(118,"tbody"),rt(119,yB,2,1,"ng-container",40),d(),rt(120,SB,3,0,"ng-template",null,0,Ie),d()(),c(122,"div",67)(123,"table",36)(124,"thead")(125,"tr")(126,"th",64),h(127,"Task Progress"),d()(),c(128,"tr",38)(129,"th"),h(130,"S.No"),d(),c(131,"th"),h(132,"Tasks"),d(),c(133,"th",39),h(134,"Start Date"),d(),c(135,"th",39),h(136,"End Date"),d(),c(137,"th",39),h(138,"Number of Days"),d(),c(139,"th"),h(140,"Status"),d(),c(141,"th"),h(142,"Assigned To"),d()()(),c(143,"tbody"),rt(144,CB,2,1,"ng-container",40),d(),rt(145,MB,3,0,"ng-template",null,0,Ie),d()(),c(147,"div",67)(148,"table",53)(149,"thead",54)(150,"tr")(151,"th",55),h(152,"Results - Total Leads"),d()(),c(153,"tr")(154,"th"),h(155,"S.No"),d(),c(156,"th"),h(157,"Source"),d(),c(158,"th",56),h(159,"Goal"),d(),c(160,"th",57),h(161,"Actual"),d()()(),c(162,"tbody"),rt(163,TB,2,1,"ng-container",40),d(),rt(164,kB,6,1,"tbody",25)(165,IB,4,0,"ng-template",null,0,Ie),d()()()()),n&2){let t=Qe(33),i=k(2);_(31),D("ngIf",i.tactical_content&&i.tactical_content.length>0)("ngIfElse",t),_(31),D("ngIf",i.tactical_colletrel&&i.tactical_colletrel.length>0)("ngIfElse",t),_(29),D("ngIf",i.tactical_calender&&i.tactical_calender.length>0)("ngIfElse",t),_(),D("ngIf",i.strategic_calender&&i.strategic_calender.length>0),_(27),D("ngIf",i.tactical_engagement&&i.tactical_engagement.length>0)("ngIfElse",t),_(25),D("ngIf",i.tactical_task_progress&&i.tactical_task_progress.length>0)("ngIfElse",t),_(19),D("ngIf",i.get_total_leads&&i.get_total_leads.length>0)("ngIfElse",t),_(),D("ngIf",i.get_total_leads&&i.get_total_leads.length>0)}}function PB(n,e){if(n&1&&(c(0,"option",26),h(1),d()),n&2){let t=e.$implicit;D("value",t.value),_(),A(t.name)}}function LB(n,e){if(n&1&&(c(0,"option",26),h(1),d()),n&2){let t=e.$implicit;D("value",t),_(),A(t)}}function RB(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),d(),c(4,"td",42),h(5),d(),c(6,"td",43),h(7),d(),c(8,"td",43),h(9),d(),c(10,"td",43),h(11),Et(12,"date"),d(),c(13,"td",43),h(14),Et(15,"date"),d(),c(16,"td",43),h(17),d(),c(18,"td",42),h(19),d(),c(20,"td",42),h(21),d()(),c(22,"tr")(23,"td",44),h(24),d(),c(25,"td",44),h(26),d(),c(27,"td",44),h(28),Et(29,"date"),d(),c(30,"td",44),h(31),Et(32,"date"),d(),c(33,"td",44),h(34),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.cont_Task_name),_(2),A(t.cont_goal_quantity),_(2),A(t.cont_goal_quality),_(2),A(At(12,14,t.cont_goal_start_date,"d MMM")),_(3),A(At(15,17,t.cont_goal_end_date,"d MMM")),_(3),A(t.cont_goal_no_of_days),_(2),A(t.cont_status),_(2),A(t.cont_assigned_to),_(3),A(t.cont_actual_quantity),_(2),A(t.cont_actual_quality),_(2),A(At(29,20,t.cont_actual_start_date,"d MMM")),_(3),A(At(32,23,t.cont_actual_end_date,"d MMM")),_(3),A(t.cont_actual_no_of_days)}}function OB(n,e){if(n&1&&(pe(0),rt(1,RB,35,26,"ng-container",41),fe()),n&2){let t=k(3);_(),D("ngForOf",t.strategic_content)}}function NB(n,e){n&1&&(c(0,"tr")(1,"td",45),h(2,"No task found"),d()())}function FB(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),d(),c(4,"td",42),h(5),d(),c(6,"td",43),h(7),d(),c(8,"td",43),h(9),d(),c(10,"td",43),h(11),d(),c(12,"td",43),h(13),Et(14,"date"),d(),c(15,"td",43),h(16),Et(17,"date"),d(),c(18,"td",43),h(19),d(),c(20,"td",42),h(21),d(),c(22,"td",42),h(23),d()(),c(24,"tr")(25,"td",44),h(26),d(),c(27,"td",44),h(28),d(),c(29,"td",44),h(30),d(),c(31,"td",44),h(32),Et(33,"date"),d(),c(34,"td",44),h(35),Et(36,"date"),d(),c(37,"td",44),h(38),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Col_Task_name),_(2),A(t.Col_goal_quantity),_(2),A(t.Col_goal_quality),_(2),A(t.Cal_goal_cost),_(2),A(At(14,16,t.Col_goal_start_date,"d MMM")),_(3),A(At(17,19,t.Col_goal_end_date,"d MMM")),_(3),A(t.Col_goal_no_of_days),_(2),A(t.Col_status),_(2),A(t.Col_assigned_to),_(3),A(t.Col_actual_quantity),_(2),A(t.Col_actual_quality),_(2),A(t.Cal_actual_cost),_(2),A(At(33,22,t.Col_actual_start_date,"d MMM")),_(3),A(At(36,25,t.Col_actual_end_date,"d MMM")),_(3),A(t.Col_actual_no_of_days)}}function BB(n,e){if(n&1&&(pe(0),rt(1,FB,39,28,"ng-container",41),fe()),n&2){let t=k(3);_(),D("ngForOf",t.strategic_colletrel)}}function VB(n,e){n&1&&(c(0,"tr")(1,"td",45),h(2,"No task found"),d()())}function UB(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),d(),c(4,"td",42),h(5),d(),c(6,"td",43),h(7),d(),c(8,"td",43),h(9),d(),c(10,"td",43),h(11),Et(12,"date"),d(),c(13,"td",43),h(14),Et(15,"date"),d(),c(16,"td",43),h(17),d(),c(18,"td",42),h(19),d(),c(20,"td",42),h(21),d()(),c(22,"tr")(23,"td",44),h(24),d(),c(25,"td",44),h(26),d(),c(27,"td",44),h(28),Et(29,"date"),d(),c(30,"td",44),h(31),Et(32,"date"),d(),c(33,"td",44),h(34),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Cal_Task_name),_(2),A(t.Cal_goal_quantity),_(2),A(t.Cal_goal_cost),_(2),A(At(12,14,t.Cal_goal_start_date,"d MMM")),_(3),A(At(15,17,t.Cal_goal_end_date,"d MMM")),_(3),A(t.Cal_goal_Frequency),_(2),A(t.Cal_status),_(2),A(t.Cal_assigned_to),_(3),A(t.Cal_actual_quantity),_(2),A(t.Cal_actual_cost),_(2),A(At(29,20,t.Cal_actual_start_date,"d MMM")),_(3),A(At(32,23,t.Cal_actual_end_date,"d MMM")),_(3),A(t.Cal_actual_Frequency)}}function zB(n,e){if(n&1&&(pe(0),rt(1,UB,35,26,"ng-container",41),fe()),n&2){let t=k(3);_(),D("ngForOf",t.strategic_calender)}}function HB(n,e){if(n&1&&(c(0,"tbody")(1,"tr")(2,"td",47),h(3,"Total Cost"),d(),c(4,"td",48),h(5),d(),Lt(6,"td",49),d(),c(7,"tr")(8,"td",50),h(9),d()()()),n&2){let t=k(3);_(5),A(t.Strategic_Goal_Cost),_(4),A(t.Strategic_Actual_Cost)}}function WB(n,e){n&1&&(c(0,"tr")(1,"td",45),h(2,"No task found"),d()())}function jB(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),d(),c(4,"td",42),h(5),d(),c(6,"td",43),h(7),d(),c(8,"td",43),h(9),d(),c(10,"td",43),h(11),d(),c(12,"td",43),h(13),Et(14,"date"),d(),c(15,"td",43),h(16),Et(17,"date"),d(),c(18,"td",42),h(19),d()(),c(20,"tr")(21,"td",44),h(22),d(),c(23,"td",44),h(24),d(),c(25,"td",44),h(26),d(),c(27,"td",44),h(28),Et(29,"date"),d(),c(30,"td",44),h(31),Et(32,"date"),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Eng_Task_name),_(2),A(t.Eng_goal_like),_(2),A(t.Eng_goal_followers),_(2),A(t.Eng_goal_Views),_(2),A(At(14,13,t.Eng_goal_start_date,"d MMM")),_(3),A(At(17,16,t.Eng_goal_end_date,"d MMM")),_(3),A(t.Eng_status),_(3),A(t.Eng_actual_like),_(2),A(t.Eng_actual_followers),_(2),A(t.Eng_actual_Views),_(2),A(At(29,19,t.Eng_actual_start_date,"d MMM")),_(3),A(At(32,22,t.Eng_actual_end_date,"d MMM"))}}function GB(n,e){if(n&1&&(pe(0),rt(1,jB,33,25,"ng-container",41),fe()),n&2){let t=k(3);_(),D("ngForOf",t.strategic_engagement)}}function qB(n,e){n&1&&(c(0,"tr")(1,"td",51),h(2,"No task found"),d()())}function XB(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",42),h(3),d(),c(4,"td",42),h(5),d(),c(6,"td",43),h(7),Et(8,"date"),d(),c(9,"td",43),h(10),Et(11,"date"),d(),c(12,"td",43),h(13),d(),c(14,"td",42),h(15),d(),c(16,"td",42),h(17),d()(),c(18,"tr")(19,"td",44),h(20),Et(21,"date"),d(),c(22,"td",44),h(23),Et(24,"date"),d(),c(25,"td",44),h(26),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Mls_description),_(2),A(At(8,10,t.Mls_goal_start_date,"d MMM")),_(3),A(At(11,13,t.Mls_goal_end_date,"d MMM")),_(3),A(t.Mls_goal_no_of_days),_(2),A(t.Mls_status),_(2),A(t.Mls_assigned_to),_(3),A(At(21,16,t.Mls_actual_start_date,"d MMM")),_(3),A(At(24,19,t.Mls_actual_end_date,"d MMM")),_(3),A(t.Mls_actual_no_of_days)}}function YB(n,e){if(n&1&&(pe(0),rt(1,XB,27,22,"ng-container",41),fe()),n&2){let t=k(3);_(),D("ngForOf",t.strategic_task_progress)}}function $B(n,e){n&1&&(c(0,"tr")(1,"td",51),h(2,"No task found"),d()())}function KB(n,e){if(n&1&&(pe(0),c(1,"td",61),h(2),d(),fe()),n&2){let t=k(5);_(),go("rowspan",t.strategic_total_leads.length),_(),de(" ",t.strategic_total_Goal," ")}}function ZB(n,e){if(n&1&&(c(0,"tr",59)(1,"td",60),h(2),d(),c(3,"td",60),h(4),d(),rt(5,KB,3,2,"ng-container",25),c(6,"td",60),h(7),d()()),n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.Tol_Task_Name),_(),D("ngIf",i===0),_(2),A(t.Tol_actual)}}function JB(n,e){if(n&1&&(pe(0),rt(1,ZB,8,4,"tr",58),fe()),n&2){let t=k(3);_(),D("ngForOf",t.strategic_total_leads)}}function QB(n,e){if(n&1&&(c(0,"tbody")(1,"tr")(2,"td",62),h(3,"Total"),d(),c(4,"td"),h(5),d()()()),n&2){let t=k(3);_(5),A(t.strategic_total_actual)}}function tV(n,e){n&1&&(c(0,"tbody")(1,"tr")(2,"td",63),h(3,"No task found"),d()()())}function eV(n,e){if(n&1){let t=Nt();c(0,"div")(1,"div",66)(2,"h6"),h(3,"Strategic Meeting"),d()(),c(4,"div",69)(5,"label",70),h(6,"Select Month:"),d(),c(7,"select",71),vt("ngModelChange",function(r){G(t);let a=k(2);return _t(a.selectedMonth,r)||(a.selectedMonth=r),q(r)}),lt("change",function(){G(t);let r=k(2);return q(r.get_strategic_data())}),rt(8,PB,2,2,"option",11),d(),c(9,"label",72),h(10,"Select Year:"),d(),c(11,"select",73),vt("ngModelChange",function(r){G(t);let a=k(2);return _t(a.selected_Year,r)||(a.selected_Year=r),q(r)}),lt("change",function(){G(t);let r=k(2);return q(r.get_strategic_data())}),rt(12,LB,2,2,"option",11),d()(),c(13,"div")(14,"div",74)(15,"table",36)(16,"thead")(17,"tr")(18,"th",37),h(19,"Content Tracker (Content Creations)"),d()(),c(20,"tr",38)(21,"th"),h(22,"S.No"),d(),c(23,"th"),h(24,"Tasks"),d(),c(25,"th",39),h(26,"Quantity"),d(),c(27,"th",39),h(28,"Quality"),d(),c(29,"th",39),h(30,"Start Date"),d(),c(31,"th",39),h(32,"End Date"),d(),c(33,"th",39),h(34,"No of Days"),d(),c(35,"th"),h(36,"Status"),d(),c(37,"th"),h(38,"Assigned To"),d()()(),c(39,"tbody"),rt(40,OB,2,1,"ng-container",40),d(),rt(41,NB,3,0,"ng-template",null,0,Ie),d()(),c(43,"div",74)(44,"table",36)(45,"thead")(46,"tr")(47,"th",46),h(48,"Collateral Tracker (Collateral Designs & Video Making)"),d()(),c(49,"tr",38)(50,"th"),h(51,"S.No"),d(),c(52,"th"),h(53,"Tasks"),d(),c(54,"th",39),h(55,"Quantity"),d(),c(56,"th",39),h(57,"Quality"),d(),c(58,"th",39),h(59,"Cost"),d(),c(60,"th",39),h(61,"Start Date"),d(),c(62,"th",39),h(63,"End Date"),d(),c(64,"th",39),h(65,"No of Days"),d(),c(66,"th"),h(67,"Status"),d(),c(68,"th"),h(69,"Assigned To"),d()()(),c(70,"tbody"),rt(71,BB,2,1,"ng-container",40),d(),rt(72,VB,3,0,"ng-template",null,0,Ie),d()(),c(74,"div",74)(75,"table",36)(76,"thead")(77,"tr")(78,"th",46),h(79,"Marketing Calender (Online & Offline Activites)"),d()(),c(80,"tr",38)(81,"th"),h(82,"S.No"),d(),c(83,"th"),h(84,"Tasks"),d(),c(85,"th",39),h(86,"Quantity"),d(),c(87,"th",39),h(88,"Cost"),d(),c(89,"th",39),h(90,"Start Date"),d(),c(91,"th",39),h(92,"End Date"),d(),c(93,"th",39),h(94,"Frequency"),d(),c(95,"th"),h(96,"Status"),d(),c(97,"th"),h(98,"Assigned To"),d()()(),c(99,"tbody"),rt(100,zB,2,1,"ng-container",40),d(),rt(101,HB,10,2,"tbody",25)(102,WB,3,0,"ng-template",null,0,Ie),d()(),c(104,"div",74)(105,"table",36)(106,"thead")(107,"tr")(108,"th",46),h(109,"Engagement Analyzing Tracker (Engagement for Online Activites) "),d()(),c(110,"tr",38)(111,"th"),h(112,"S.No"),d(),c(113,"th"),h(114,"Tasks"),d(),c(115,"th",39),h(116,"Likes"),d(),c(117,"th",39),h(118,"Followers"),d(),c(119,"th",39),h(120,"Views\\Reach"),d(),c(121,"th",39),h(122,"Start Date"),d(),c(123,"th",39),h(124,"End Date"),d(),c(125,"th"),h(126,"Status"),d()()(),c(127,"tbody"),rt(128,GB,2,1,"ng-container",40),d(),rt(129,qB,3,0,"ng-template",null,0,Ie),d()(),c(131,"div",74)(132,"table",36)(133,"thead")(134,"tr")(135,"th",64),h(136,"Task Progress"),d()(),c(137,"tr",38)(138,"th"),h(139,"S.No"),d(),c(140,"th"),h(141,"Tasks"),d(),c(142,"th",39),h(143,"Start Date"),d(),c(144,"th",39),h(145,"End Date"),d(),c(146,"th",39),h(147,"Number of Days"),d(),c(148,"th"),h(149,"Status"),d(),c(150,"th"),h(151,"Assigned To"),d()()(),c(152,"tbody"),rt(153,YB,2,1,"ng-container",40),d(),rt(154,$B,3,0,"ng-template",null,0,Ie),d()(),c(156,"div",74)(157,"table",53)(158,"thead",54)(159,"tr")(160,"th",55),h(161,"Results - Total Leads"),d()(),c(162,"tr")(163,"th"),h(164,"S.No"),d(),c(165,"th"),h(166,"Source"),d(),c(167,"th",56),h(168,"Goal"),d(),c(169,"th",57),h(170,"Actual"),d()()(),c(171,"tbody"),rt(172,JB,2,1,"ng-container",40),d(),rt(173,QB,6,1,"tbody",25)(174,tV,4,0,"ng-template",null,0,Ie),d()()()()}if(n&2){let t=Qe(42),i=k(2);_(7),gt("ngModel",i.selectedMonth),_(),D("ngForOf",i.months),_(3),gt("ngModel",i.selected_Year),_(),D("ngForOf",i.years),_(28),D("ngIf",i.strategic_content&&i.strategic_content.length>0)("ngIfElse",t),_(31),D("ngIf",i.strategic_colletrel&&i.strategic_colletrel.length>0)("ngIfElse",t),_(29),D("ngIf",i.strategic_calender&&i.strategic_calender.length>0)("ngIfElse",t),_(),D("ngIf",i.strategic_calender&&i.strategic_calender.length>0),_(27),D("ngIf",i.strategic_engagement&&i.strategic_engagement.length>0)("ngIfElse",t),_(25),D("ngIf",i.strategic_task_progress&&i.strategic_task_progress.length>0)("ngIfElse",t),_(19),D("ngIf",i.strategic_total_leads&&i.strategic_total_leads.length>0)("ngIfElse",t),_(),D("ngIf",i.strategic_total_leads&&i.strategic_total_leads.length>0)}}function iV(n,e){if(n&1){let t=Nt();c(0,"div")(1,"div",52)(2,"button",65),lt("click",function(){G(t);let r=k();return q(r.tactical_meeting())}),h(3,"Tactical"),d(),c(4,"button",65),lt("click",function(){G(t);let r=k();return q(r.strategic_meeting())}),h(5,"Strategic"),d()(),rt(6,DB,167,14,"div",25)(7,eV,176,18,"div",25),d()}if(n&2){let t=k();_(6),D("ngIf",t.is_tactical),_(),D("ngIf",t.is_strategic)}}function nV(n,e){n&1&&(c(0,"div",79)(1,"p",80),h(2,"Leads"),d(),Lt(3,"app-marketing-bar-chart"),d())}function rV(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td"),h(3),d(),c(4,"td"),h(5),d(),c(6,"td"),h(7),d(),c(8,"td"),h(9),d(),c(10,"td"),h(11),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.SourceName),_(2),A(t.ActualTotalCost),_(2),A(t.NumberOfLeads),_(2),A(t.Completed_SiteVisits)}}function aV(n,e){if(n&1&&(pe(0),rt(1,rV,12,5,"ng-container",41),fe()),n&2){let t=k(3);_(),D("ngForOf",t.Statistics_table_data)}}function sV(n,e){n&1&&(c(0,"tr")(1,"td",82),h(2,"No task found"),d()())}function oV(n,e){if(n&1&&(c(0,"div",81)(1,"table")(2,"thead")(3,"tr")(4,"th"),h(5,"S.No"),d(),c(6,"th"),h(7,"Task"),d(),c(8,"th"),h(9,"Cost"),d(),c(10,"th"),h(11,"Leads"),d(),c(12,"th"),h(13,"Conversion"),d()()(),c(14,"tbody"),rt(15,aV,2,1,"ng-container",40),d(),rt(16,sV,3,0,"ng-template",null,0,Ie),d()()),n&2){let t=Qe(17),i=k(2);_(15),D("ngIf",i.Statistics_table_data&&i.Statistics_table_data.length>0)("ngIfElse",t)}}function lV(n,e){if(n&1){let t=Nt();c(0,"div")(1,"div",75)(2,"button",76),lt("click",function(){G(t);let r=k();return q(r.Statistics_chart())}),h(3,"Chart"),d(),c(4,"button",76),lt("click",function(){G(t);let r=k();return q(r.Statistics_table())}),h(5,"Table"),d()(),rt(6,nV,4,0,"div",77)(7,oV,18,2,"div",78),d()}if(n&2){let t=k();_(6),D("ngIf",t.is_Statistics_chart),_(),D("ngIf",t.is_Statistics_table)}}var fg=class n{constructor(e,t,i,r,a){this.route=e;this.apiService=t;this.http=i;this.router=r;this.userService=a;this.route.params.subscribe(s=>{this.current_task=s.taskName,this.project_id=parseInt(s.projectid)}),this.project_id==1?this.project_names="ANBU AVENUE":this.project_id==2?this.project_names="RVS AVENUE":this.project_id==3?this.project_names="AGASTHYA PRIME":this.project_id==4&&(this.project_names="AGASTHYA DEVELOPER")}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}project_names="";current_task=null;updatetask=null;project_id=null;ngOnInit(){this.get_data();let e=new Date().getFullYear();this.years=Array.from({length:e-1999},(t,i)=>2e3+i),this.get_content_task(),this.get_collateral_task(),this.get_marketing_calender_api(),this.get_engagement_analyzing_api(),this.get_total_leads_api(),this.setTacticalDateRange(),this.get_Statistics_table()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}ngAfterViewInit(){this.get_task_progress()}selectedModule="";modules=["Content Tracker","Collateral Tracker","Marketing Calender","Engagement Analyzing","Total leads","Task Progress","Meeting","Statistics"];selectModule(e){this.selectedModule=e}downloadCSV(){let t=document.querySelector("table")?.querySelectorAll("tr"),i="";t?.forEach(s=>{let o=s.querySelectorAll("th, td"),l=[];o.forEach(u=>{let p=u.textContent?.trim().replace(/"/g,'""');l.push(`"${p}"`)}),i+=l.join(",")+`
`});let r=new Blob([i],{type:"text/csv"}),a=document.createElement("a");a.href=URL.createObjectURL(r),a.download="table_data.csv",a.click()}downloadPDF(){let e=document.getElementById("content-to-pdf");e&&mw(e).then(t=>{let a=t.height*210/t.width,s=a,o=0,l=t.toDataURL("image/png"),u=new a5("p","mm","a4");for(u.addImage(l,"PNG",0,o,210,a),s-=295;s>=0;)o=s-a,u.addPage(),u.addImage(l,"PNG",0,o,210,a),s-=295;u.save("content-tracker.pdf")})}isModalOpen=!1;openModal(){this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}filter_card_marketing=!1;filter_card_open(){this.filter_card_marketing=!0}startDate_content=null;endDate_content=null;get_content=[];filtered_content=[];get_content_task(){this.http.get(this.apiService.marketing_content_tracker_api()).subscribe(e=>{this.get_content=e.filter(t=>t.Project_id===this.project_id),this.filtered_content=this.get_content},e=>{console.error("Error fetching items",e)})}filterByDate_content(){if(this.startDate_content&&this.endDate_content){let e=new Date(this.startDate_content),t=new Date(this.endDate_content);this.filtered_content=this.get_content.filter(i=>{let r=new Date(i.cont_actual_start_date);return r>=e&&r<=t})}else this.filtered_content=this.get_content;this.filter_card_marketing=!1}reset_filter_content(){this.filtered_content=this.get_content,this.filter_card_marketing=!1}startDate_collateral=null;endDate_collateral=null;get_collateral=[];filtered_collateral=[];get_collateral_task(){this.http.get(this.apiService.Collateraltrackerapi()).subscribe(e=>{this.get_collateral=e.filter(t=>t.Project_id===this.project_id),this.filtered_collateral=this.get_collateral},e=>{console.error("Error fetching items",e)})}filterByDate_collateral(){if(this.startDate_collateral&&this.endDate_collateral){let e=new Date(this.startDate_collateral),t=new Date(this.endDate_collateral);this.filtered_collateral=this.get_collateral.filter(i=>{let r=new Date(i.Col_actual_start_date);return r>=e&&r<=t})}else this.filtered_collateral=this.get_collateral;this.filter_card_marketing=!1}reset_filter_collateral(){this.filtered_collateral=this.get_collateral,this.filter_card_marketing=!1,this.startDate_collateral="",this.endDate_collateral=""}startDate_calender=null;endDate_calender=null;get_marketing_calender=[];filtered_calender=[];Total_Actual_Cost;Total_Goal_Cost;get_marketing_calender_api(){this.http.get(this.apiService.marketingcalenderapi()).subscribe(e=>{this.get_marketing_calender=e.filter(t=>t.Project_id===this.project_id),this.filtered_calender=this.get_marketing_calender,this.Total_Goal_Cost=this.filtered_calender.reduce((t,i)=>t+i.Cal_goal_cost,0),this.Total_Actual_Cost=this.filtered_calender.reduce((t,i)=>t+i.Cal_actual_cost,0)},e=>{console.error("Error fetching items",e)})}filterByDate_calender(){if(this.startDate_calender&&this.endDate_calender){let e=new Date(this.startDate_calender),t=new Date(this.endDate_calender);this.filtered_calender=this.get_marketing_calender.filter(i=>{let r=new Date(i.Cal_actual_start_date);return r>=e&&r<=t})}else this.filtered_calender=this.get_marketing_calender;this.filter_card_marketing=!1}reset_filter_calender(){this.filtered_calender=this.get_marketing_calender,this.filter_card_marketing=!1,this.startDate_calender="",this.endDate_calender=""}startDate_engagement=null;endDate_engagement=null;filtered_engagement=[];get_engagement_analyzing=[];get_engagement_analyzing_api(){this.http.get(this.apiService.engagementanalyzingapi()).subscribe(e=>{this.get_engagement_analyzing=e.filter(t=>t.Project_id===this.project_id),this.get_engagement_analyzing.sort((t,i)=>{let r={Completed:1,"On Going":2,Pending:3},a=t.Eng_status,s=i.Eng_status;return(r[a]||4)-(r[s]||4)}),this.filtered_engagement=this.get_engagement_analyzing},e=>{console.error("Error fetching items",e)})}filterByDate_engagement(){if(this.startDate_engagement&&this.endDate_engagement){let e=new Date(this.startDate_engagement),t=new Date(this.endDate_engagement);this.filtered_engagement=this.get_engagement_analyzing.filter(i=>{let r=new Date(i.Eng_actual_start_date);return r>=e&&r<=t})}else this.filtered_engagement=this.get_engagement_analyzing;this.filter_card_marketing=!1}reset_filter_engagement(){this.filtered_engagement=this.get_engagement_analyzing,this.filter_card_marketing=!1,this.startDate_engagement="",this.endDate_engagement=""}startDate_task_progress=null;endDate_task_progress=null;filtered_task_progress=[];get_task_progress_data=[];get_task_progress(){this.http.get(this.apiService.marketingmiscellaneousapi()).subscribe(e=>{this.get_task_progress_data=e.filter(t=>t.Project_id===this.project_id),this.filtered_task_progress=this.get_task_progress_data},e=>{console.error("Error fetching items",e)})}filterByDate_miscellaneous(){if(this.startDate_task_progress&&this.endDate_task_progress){let e=new Date(this.startDate_task_progress),t=new Date(this.endDate_task_progress);this.filtered_task_progress=this.get_task_progress_data.filter(i=>{let r=new Date(i.Mls_actual_start_date);return r>=e&&r<=t})}else this.filtered_task_progress=this.get_task_progress_data;this.filter_card_marketing=!1}reset_filter_miscellaneous(){this.filtered_task_progress=this.get_task_progress_data,this.filter_card_marketing=!1,this.startDate_engagement="",this.endDate_engagement=""}formatDate(e){let t=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0");return`${t}-${i}-${r}`}is_tactical=!1;tactical_start_date=null;tactical_end_date=null;setTacticalDateRange(){let e=new Date,t=e.getFullYear(),i=e.getMonth(),s=1+(7-new Date(t,i,1).getDay()+2)%7,o=new Date(t,i,s+14),l=new Date(t,i,1);this.tactical_start_date=this.formatDate(l),this.tactical_end_date=this.formatDate(o)}tactical_content=[];tactical_colletrel=[];tactical_calender=[];tactical_engagement=[];tactical_task_progress=[];tactical_meeting(){this.is_tactical=!0,this.tactical_content=this.get_content.filter(e=>{let t=new Date(e.cont_actual_start_date),i=this.tactical_start_date?new Date(this.tactical_start_date):null,r=this.tactical_end_date?new Date(this.tactical_end_date):null;return i&&r?t>=i&&t<=r:!1}),this.tactical_colletrel=this.get_collateral.filter(e=>{let t=new Date(e.Col_actual_start_date),i=this.tactical_start_date?new Date(this.tactical_start_date):null,r=this.tactical_end_date?new Date(this.tactical_end_date):null;return i&&r?t>=i&&t<=r:!1}),this.tactical_calender=this.get_marketing_calender.filter(e=>{let t=new Date(e.Cal_actual_start_date),i=this.tactical_start_date?new Date(this.tactical_start_date):null,r=this.tactical_end_date?new Date(this.tactical_end_date):null;return i&&r?t>=i&&t<=r:!1}),this.tactical_engagement=this.get_engagement_analyzing.filter(e=>{let t=new Date(e.Eng_actual_start_date),i=this.tactical_start_date?new Date(this.tactical_start_date):null,r=this.tactical_end_date?new Date(this.tactical_end_date):null;return i&&r?t>=i&&t<=r:!1}),this.tactical_task_progress=this.get_task_progress_data.filter(e=>{let t=new Date(e.Mls_actual_start_date),i=this.tactical_start_date?new Date(this.tactical_start_date):null,r=this.tactical_end_date?new Date(this.tactical_end_date):null;return i&&r?t>=i&&t<=r:!1}),this.is_strategic=!1}selectedMonth=new Date().getMonth()+1;selected_month;selected_Year=new Date().getFullYear();months=[{name:"January",value:1},{name:"February",value:2},{name:"March",value:3},{name:"April",value:4},{name:"May",value:5},{name:"June",value:6},{name:"July",value:7},{name:"August",value:8},{name:"September",value:9},{name:"October",value:10},{name:"November",value:11},{name:"December",value:12}];years=[];strategic_content=[];strategic_colletrel=[];strategic_calender=[];strategic_engagement=[];strategic_task_progress=[];strategic_total_leads=[];strategic_total_Goal=null;strategic_total_actual=null;Strategic_Goal_Cost=null;Strategic_Actual_Cost=null;is_strategic=!1;strategic_meeting(){this.is_strategic=!0,this.is_tactical=!1,setTimeout(()=>{this.get_strategic_data()},100)}get_strategic_data(){this.selected_month=this.selectedMonth,this.strategic_content=this.get_content.filter(e=>{let t=new Date(e.cont_actual_start_date);return t.getMonth()+1===parseInt(this.selected_month)&&t.getFullYear()===this.selected_Year}),this.strategic_colletrel=this.get_collateral.filter(e=>{let t=new Date(e.Col_actual_start_date);return t.getMonth()+1===parseInt(this.selected_month)&&t.getFullYear()===this.selected_Year}),this.strategic_calender=this.get_marketing_calender.filter(e=>{let t=new Date(e.Cal_actual_start_date);return t.getMonth()+1===parseInt(this.selected_month)&&t.getFullYear()===this.selected_Year}),this.Strategic_Goal_Cost=this.strategic_calender.reduce((e,t)=>e+t.Cal_goal_cost,0),this.Strategic_Actual_Cost=this.strategic_calender.reduce((e,t)=>e+t.Cal_actual_cost,0),this.strategic_engagement=this.get_engagement_analyzing.filter(e=>{let t=new Date(e.Eng_actual_start_date);return t.getMonth()+1===parseInt(this.selected_month)&&t.getFullYear()===this.selected_Year}),this.strategic_task_progress=this.get_task_progress_data.filter(e=>{let t=new Date(e.Mls_actual_start_date);return t.getMonth()+1===parseInt(this.selected_month)&&t.getFullYear()===this.selected_Year}),this.strategic_total_leads=this.get_total_leads.filter(e=>{let t=new Date(e.Tol_actual_date);return t.getMonth()+1===parseInt(this.selected_month)&&t.getFullYear()===this.selected_Year}),this.strategic_total_Goal=this.strategic_total_leads.reduce((e,t)=>e+t.Tol_goal,0),this.strategic_total_actual=this.strategic_total_leads.reduce((e,t)=>e+t.Tol_actual,0)}is_Statistics_chart=!1;Statistics_chart(){this.is_Statistics_chart=!0,this.is_Statistics_table=!1}is_Statistics_table=!1;Statistics_table(){this.is_Statistics_table=!0,this.is_Statistics_chart=!1}Statistics_table_data=[];get_Statistics_table(){let e=`${this.apiService.marketing_meeting_data_api()}?ProjectID=${this.project_id}`;this.http.get(e).subscribe(t=>{this.Statistics_table_data=t.data,console.log(this.Statistics_table_data,"Here is meeting values")},t=>{console.error("Error fetching items",t)})}get_total_leads=[];totalActual;totalGoal;totalTolGoal=0;get_total_leads_api(){let e=`${this.apiService.marketing_meeting_data_api()}?ProjectID=${this.project_id}`;this.http.get(e).subscribe(t=>{this.get_total_leads=t.data,this.get_total_leads&&this.get_total_leads.length>0&&(this.totalTolGoal=this.get_total_leads.reduce((i,r)=>i+r.Tol_goal,0)),this.totalGoal=this.get_total_leads.reduce((i,r)=>i+r.GoalLeads,0),this.totalActual=this.get_total_leads.reduce((i,r)=>i+r.NumberOfLeads,0),console.log(this.Statistics_table_data,"Here is meeting values")},t=>{console.error("Error fetching items",t)})}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(sn),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-marketing-status"]],decls:40,vars:21,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"bradcrumb-card"],[1,"container","my-4"],[1,"form-group","module-dropdown"],["for","moduleSelect"],["id","moduleSelect",1,"custom-input",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"module-card",2,"width","100%"],[1,"module-list"],[3,"ngClass","click",4,"ngFor","ngForOf"],["tabindex","-1","role","dialog",1,"modal",3,"ngClass"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-body"],[1,"download-btn",3,"click"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["class","container my-5",4,"ngIf"],["class","mt-5",4,"ngIf"],[4,"ngIf"],[3,"value"],[3,"click","ngClass"],[1,"container","my-5"],[1,"row"],[1,"col"],["for",""],["id","fromDate","type","date",1,"custom-input",3,"ngModelChange","ngModel"],["id","toDate","type","date",1,"custom-input",3,"ngModelChange","ngModel"],[1,"filter-btn",3,"click"],["id","content-to-pdf",1,"table-responsive"],[1,"table","table-responsive","table-bordered","content-table"],["colspan","9",1,"main-header"],[1,"header-row"],[1,"headers-title"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["rowspan","2",1,"vertical-center"],[1,"goal-color"],[1,"actual-color"],["colspan","9",2,"text-align","center"],["colspan","13",1,"main-header"],["rowspan","2","colspan","2",1,"vertical-center"],["colspan","5",1,"goal-color"],["rowspan","2","colspan","2"],["colspan","5",1,"actual-color"],["colspan","8",2,"text-align","center"],[1,"mt-5"],[1,"table","table-bordered","table-striped"],[1,"table-header"],["colspan","14",1,"main-header"],[1,"goal"],[1,"actual"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[1,"table-cell"],[1,"table-cell","goal-cell"],["colspan","3"],["colspan","4",2,"text-align","center"],["colspan","7",1,"main-header"],[1,"btn","btn-secondary",3,"click"],[1,"meeting-header"],["id","content-to-pdf",1,"table-responsive","mt-5","table-size"],["colspan","10",2,"text-align","center"],[1,"filter-container"],["for","month"],["id","month",3,"ngModelChange","change","ngModel"],["for","year"],["id","year",3,"ngModelChange","change","ngModel"],[1,"table-responsive","mt-5","table-size"],[1,"mt-3"],[1,"submit-btn",3,"click"],["class","task-chart-card",4,"ngIf"],["class","table-cards",4,"ngIf"],[1,"task-chart-card"],[2,"color","#6f6f90"],[1,"table-cards"],["colspan","5",2,"text-align","center"]],template:function(t,i){t&1&&(c(0,"app-header",1),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"p"),h(6),d()(),c(7,"div",6)(8,"div",7)(9,"label",8),h(10,"Select Module"),d(),c(11,"select",9),vt("ngModelChange",function(a){return _t(i.selectedModule,a)||(i.selectedModule=a),a}),c(12,"option",10),h(13,"Select a Module"),d(),rt(14,O8,2,2,"option",11),d()(),c(15,"div",12)(16,"ul",13),rt(17,N8,2,4,"li",14),d()(),c(18,"div",15)(19,"div",16)(20,"div",17)(21,"div",18)(22,"p"),h(23,"Slect Format"),d()(),c(24,"div",19)(25,"button",20),lt("click",function(){return i.downloadPDF()}),h(26,"PDF"),d(),c(27,"button",20),lt("click",function(){return i.downloadCSV()}),h(28,"CSV"),d()(),c(29,"div",21)(30,"button",22),lt("click",function(){return i.closeModal()}),h(31,"Close"),d()()()()(),rt(32,U8,55,9,"div",23)(33,j8,57,9,"div",23)(34,$8,56,10,"div",23)(35,Q8,53,9,"div",23)(36,aB,23,3,"div",24)(37,cB,51,9,"div",23)(38,iV,8,2,"div",25)(39,lV,8,2,"div",25),d()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(17,L8,!i.isSidebarOpen)),_(4),A(i.project_names),_(5),gt("ngModel",i.selectedModule),_(3),D("ngForOf",i.modules),_(3),D("ngForOf",i.modules),_(),pc("display",i.isModalOpen?"block":"none"),D("ngClass",te(19,Su,i.isModalOpen)),_(14),D("ngIf",i.selectedModule==="Content Tracker"),_(),D("ngIf",i.selectedModule==="Collateral Tracker"),_(),D("ngIf",i.selectedModule==="Marketing Calender"),_(),D("ngIf",i.selectedModule==="Engagement Analyzing"),_(),D("ngIf",i.selectedModule==="Total leads"),_(),D("ngIf",i.selectedModule==="Task Progress"),_(),D("ngIf",i.selectedModule==="Meeting"),_(),D("ngIf",i.selectedModule==="Statistics"))},dependencies:[Ke,Hi,mi,xn,bn,ln,cn,Ki,Gi,ei,ii,pg,Vr],styles:[".sts-complete[_ngcontent-%COMP%]{background-color:green;color:#fff}.not-planed[_ngcontent-%COMP%]{background-color:#e7cef3;color:#5b3283}.team[_ngcontent-%COMP%]{background-color:#5b3283;color:#e7cef3}.not-assigned[_ngcontent-%COMP%]{background-color:#b00200;color:#fff}.goal[_ngcontent-%COMP%]{background-color:#d6a6be;text-align:center}.actual[_ngcontent-%COMP%]{background-color:#92c47d;text-align:center}.sts-all[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{text-align:center;transition:all .3s ease}tr[_ngcontent-%COMP%]{text-align:center}.main-header[_ngcontent-%COMP%]{background-color:#741b48;color:#fff}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;transition:opacity .3s ease;opacity:0;visibility:hidden}.modal.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-dialog[_ngcontent-%COMP%]{max-width:500px;margin:auto}.filter_card[_ngcontent-%COMP%]{margin:5%}.table-size[_ngcontent-%COMP%]{width:105%}.bg-green[_ngcontent-%COMP%]{background-color:green;color:#fff}.bg-orange[_ngcontent-%COMP%]{background-color:orange;color:#fff}.bg-red[_ngcontent-%COMP%]{background-color:red;color:#fff}.meeting-header[_ngcontent-%COMP%]{background-color:#5b3283;color:#fff;font-size:18px;padding:5px;margin-top:5%;text-align:center}.barchart-card[_ngcontent-%COMP%]{background-color:#fff;padding:3%;border-radius:12px;box-shadow:0 4px 12px #0000001a;transition:transform .3s ease,box-shadow .3s ease}.barchart-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 20px #0003;transform:translateY(-5px)}.barchart-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0}.filter-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:10px;background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 8px #0000001a;max-width:600px;margin:20px auto}.filter-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#555;font-size:14px}.filter-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 12px;font-size:14px;color:#333;border:1px solid #ccc;border-radius:5px;background-color:#fff;transition:border-color .3s,box-shadow .3s}.filter-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d}.filter-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:10px}.goal-cell[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}.content-table[_ngcontent-%COMP%]{margin:20px 0;font-size:16px;text-align:center}.header-row[_ngcontent-%COMP%]{background-color:#6a1b47;color:#fff}.goal-header[_ngcontent-%COMP%], .actual-header[_ngcontent-%COMP%]{color:#000;font-weight:700}.goal-header[_ngcontent-%COMP%]{background-color:#d7a0b1}.actual-header[_ngcontent-%COMP%]{background-color:#a3d5a6}.update-icon[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#6a1b47;font-size:18px;text-decoration:none}.goal-color[_ngcontent-%COMP%]{background-color:#d6a6be}.actual-color[_ngcontent-%COMP%]{background-color:#92c47d}.vertical-center[_ngcontent-%COMP%], .table-custom[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}.bg-light-pink[_ngcontent-%COMP%]{background-color:#e7c4c4}.bg-light-green[_ngcontent-%COMP%]{background-color:#98d98e}.headers-clr[_ngcontent-%COMP%]{background-color:#b9f1fe}.headers-title[_ngcontent-%COMP%]{background-color:#ffefe5}.task-chart-card[_ngcontent-%COMP%]{background-color:#ccc;padding:20px;width:100%;margin-top:5%;border-radius:12px;box-shadow:5px 5px 15px #0003,-5px -5px 15px #ffffff80;transition:transform .3s ease,box-shadow .3s ease}.task-chart-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:10px 10px 25px #0000004d,-10px -10px 25px #ffffff80}.table-cards[_ngcontent-%COMP%]{background-color:#ccc;padding:20px;width:100%;margin:50px auto;border-radius:12px;box-shadow:5px 5px 15px #0003,-5px -5px 15px #ffffff80;transition:transform .3s ease,box-shadow .3s ease}.table-cards[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:10px 10px 25px #0000004d,-10px -10px 25px #ffffff80}.table-cards[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-cards[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-cards[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 20px;text-align:center;font-size:16px;border-bottom:1px solid #ddd}.table-cards[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#3b3b3b;color:#fff;font-weight:600;text-transform:uppercase}.table-cards[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e9f5ff}.table-cards[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f1f1f1}.table-cards[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:15px;color:#333}.table-cards[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{transition:background-color .2s ease}.table-cards[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.button-container[_ngcontent-%COMP%]{text-align:center}"]})};var cV=n=>({"full-width":n}),mg=n=>["/view-goals",n],gg=n=>["/Actual-task",n],_g=n=>["/marketing-status",n],vg=class n{constructor(e){this.userService=e}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}ngOnInit(){this.get_data()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}project1=1;project2=2;project3=3;project4=4;static \u0275fac=function(t){return new(t||n)(Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-project-marketing"]],decls:70,vars:40,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container",2,"margin-top","10%"],[1,"row"],[1,"col","mt-5"],[1,"projects-card"],["src","/assets/images/Anbu-Avenue.jpg","alt","",1,"project-img"],[1,"projects-card-txt"],[2,"margin-bottom","5px"],[1,"banner-btn"],[3,"routerLink"],["src","/assets/images/RVS.jpg","alt","",1,"project-img"],["src","/assets/images/agasthya-prime.png","alt","",1,"project-img"],["src","/assets/images/loginimg.jpg","alt","",1,"project-img"]],template:function(t,i){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),Lt(7,"img",7),c(8,"div",8)(9,"h4",9),h(10,"Komarapalayam"),d()(),c(11,"div",10)(12,"a",11),Lt(13,"span"),h(14,"Add Goal"),d(),c(15,"a",11),Lt(16,"span"),h(17,"Update Actual"),d(),c(18,"a",11),Lt(19,"span"),h(20,"Status"),d()()()(),c(21,"div",5)(22,"div",6),Lt(23,"img",12),c(24,"div",8)(25,"h4",9),h(26,"Sangagiri"),d()(),c(27,"div",10)(28,"a",11),Lt(29,"span"),h(30,"Add Goal"),d(),c(31,"a",11),Lt(32,"span"),h(33,"Update Actual"),d(),c(34,"a",11),Lt(35,"span"),h(36,"Status"),d()()()()(),c(37,"div",4)(38,"div",5)(39,"div",6),Lt(40,"img",13),c(41,"div",8)(42,"h4",9),h(43,"Appakudal"),d()(),c(44,"div",10)(45,"a",11),Lt(46,"span"),h(47,"Add Goal"),d(),c(48,"a",11),Lt(49,"span"),h(50,"Update Actual"),d(),c(51,"a",11),Lt(52,"span"),h(53,"Status"),d()()()(),c(54,"div",5)(55,"div",6),Lt(56,"img",14),c(57,"div",8)(58,"h4",9),h(59,"Agasthya Developer"),d()(),c(60,"div",10)(61,"a",11),Lt(62,"span"),h(63,"Add Goal"),d(),c(64,"a",11),Lt(65,"span"),h(66,"Update Actual"),d(),c(67,"a",11),Lt(68,"span"),h(69,"Status"),d()()()()()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(14,cV,!i.isSidebarOpen)),_(10),D("routerLink",te(16,mg,i.project1)),_(3),D("routerLink",te(18,gg,i.project1)),_(3),D("routerLink",te(20,_g,i.project1)),_(10),D("routerLink",te(22,mg,i.project2)),_(3),D("routerLink",te(24,gg,i.project2)),_(3),D("routerLink",te(26,_g,i.project2)),_(11),D("routerLink",te(28,mg,i.project3)),_(3),D("routerLink",te(30,gg,i.project3)),_(3),D("routerLink",te(32,_g,i.project3)),_(10),D("routerLink",te(34,mg,i.project4)),_(3),D("routerLink",te(36,gg,i.project4)),_(3),D("routerLink",te(38,_g,i.project4)))},dependencies:[Ke,on,ei,ii],styles:[".project-img[_ngcontent-%COMP%]{height:150px;width:100%}.projects-card[_ngcontent-%COMP%]{background-color:#5e0f80;border-radius:10px;display:flex;display:inline-block;padding:10px;color:#fff;cursor:pointer;transition:transform .3s ease,color .3s ease}.projects-card[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.projects-card-txt[_ngcontent-%COMP%]{text-align:center;border:1px solid white;padding:5px}.banner-btn[_ngcontent-%COMP%]{margin:10px auto 0}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:inline-block;margin:0 10px;color:#fff;border:.5px solid #fff;position:relative;z-index:1;transition:color .5s;padding:10px}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:0;height:100%;position:absolute;top:0;left:0;background:#fff;z-index:-1;transition:.5s}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{width:100%;color:#000}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000}"]})};var dV=n=>({"full-width":n});function uV(n,e){if(n&1){let t=Nt();c(0,"div",26)(1,"div",27)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",28),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function hV(n,e){if(n&1){let t=Nt();c(0,"li",31),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.selectTask_content(r))}),h(1),d()}if(n&2){let t=e.$implicit;_(),de(" ",t.Marketing_task_name," ")}}function pV(n,e){if(n&1&&(c(0,"div",29)(1,"ul"),rt(2,hV,2,1,"li",30),d()()),n&2){let t=k(2);_(2),D("ngForOf",t.filteredTasks)}}function fV(n,e){if(n&1){let t=Nt();c(0,"div",6),rt(1,uV,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Content Tracker"),d()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"div",13)(10,"label"),h(11,"Task Name:"),d(),c(12,"input",14),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.cont_Task_name,r)||(a.cont_Task_name=r),q(r)}),lt("input",function(r){G(t);let a=k();return q(a.onSearch_content(r))}),d(),rt(13,pV,3,1,"div",15),d()(),c(14,"div",12)(15,"label"),h(16,"Task Quantity:"),d(),c(17,"input",16),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.cont_goal_quantity,r)||(a.cont_goal_quantity=r),q(r)}),d()()(),c(18,"div",11)(19,"div",12)(20,"label"),h(21,"Task Quality:"),d(),c(22,"input",17),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.cont_goal_quality,r)||(a.cont_goal_quality=r),q(r)}),d()(),c(23,"div",12)(24,"label"),h(25,"Start Date:"),d(),c(26,"input",18),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.goal_start_date,r)||(a.goal_start_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.updateEndDateLimit())}),d()()(),c(27,"div",11)(28,"div",12)(29,"label"),h(30,"End Date "),c(31,"span",19),h(32,"(End date cannot be before start date)"),d(),h(33," :"),d(),c(34,"input",20),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.goal_end_date,r)||(a.goal_end_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.calculateNumberOfDays())}),d()(),c(35,"div",12)(36,"label"),h(37,"Number of Days:"),d(),c(38,"input",21),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.goal_no_of_days,r)||(a.goal_no_of_days=r),q(r)}),d()()(),c(39,"div",11)(40,"div",12)(41,"label"),h(42,"Assign to:"),d(),c(43,"input",22),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.cont_assigned_to,r)||(a.cont_assigned_to=r),q(r)}),d()(),c(44,"div",12)(45,"label"),h(46,"Designation:"),d(),c(47,"select",23)(48,"option",24),h(49,"Select Designation"),d(),c(50,"option",24),h(51,"Marketing Head"),d(),c(52,"option",24),h(53,"Marketing Executive"),d(),c(54,"option",24),h(55,"Digital Marketing Executive"),d()()(),Lt(56,"div",12),d(),c(57,"button",25),lt("click",function(){G(t);let r=k();return q(r.create_content_task())}),h(58,"Create"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(11),gt("ngModel",t.cont_Task_name),_(),D("ngIf",t.cont_Task_name.length>0),_(4),gt("ngModel",t.cont_goal_quantity),_(5),gt("ngModel",t.cont_goal_quality),_(4),gt("ngModel",t.goal_start_date),_(8),gt("ngModel",t.goal_end_date),D("min",t.minEndDate),_(4),gt("ngModel",t.goal_no_of_days),_(5),gt("ngModel",t.cont_assigned_to)}}function mV(n,e){if(n&1){let t=Nt();c(0,"div",26)(1,"div",27)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",28),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function gV(n,e){if(n&1){let t=Nt();c(0,"li",31),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.selectTask_Collateral(r))}),h(1),d()}if(n&2){let t=e.$implicit;_(),de(" ",t.Marketing_task_name," ")}}function _V(n,e){if(n&1&&(c(0,"div",29)(1,"ul"),rt(2,gV,2,1,"li",30),d()()),n&2){let t=k(2);_(2),D("ngForOf",t.filteredTasks)}}function vV(n,e){if(n&1){let t=Nt();c(0,"div",32),rt(1,mV,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Collateral Tracker"),d()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Task Name:"),d(),c(11,"input",14),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.col_Task_name,r)||(a.col_Task_name=r),q(r)}),lt("input",function(r){G(t);let a=k();return q(a.onSearch_Collateral(r))}),d(),rt(12,_V,3,1,"div",15),d(),c(13,"div",12)(14,"label"),h(15,"Task Quantity:"),d(),c(16,"input",16),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.col_goal_quantity,r)||(a.col_goal_quantity=r),q(r)}),d()()(),c(17,"div",11)(18,"div",12)(19,"label"),h(20,"Task Quality:"),d(),c(21,"input",17),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.col_goal_quality,r)||(a.col_goal_quality=r),q(r)}),d()(),c(22,"div",12)(23,"label"),h(24,"Cost:"),d(),c(25,"input",33),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Col_goal_cost,r)||(a.Col_goal_cost=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.updateEndDateLimit())}),d()()(),c(26,"div",11)(27,"div",12)(28,"label"),h(29,"Start Date:"),d(),c(30,"input",18),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.goal_start_date,r)||(a.goal_start_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.updateEndDateLimit())}),d()(),c(31,"div",12)(32,"label"),h(33,"End Date "),c(34,"span",19),h(35,"(End date cannot be before start date)"),d(),h(36," :"),d(),c(37,"input",20),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.goal_end_date,r)||(a.goal_end_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.calculateNumberOfDays())}),d()()(),c(38,"div",11)(39,"div",12)(40,"label"),h(41,"Number of Days:"),d(),c(42,"input",34),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.goal_no_of_days,r)||(a.goal_no_of_days=r),q(r)}),d()(),c(43,"div",12)(44,"label"),h(45,"Assign to:"),d(),c(46,"input",22),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.col_assigned_to,r)||(a.col_assigned_to=r),q(r)}),d()()(),c(47,"button",25),lt("click",function(){G(t);let r=k();return q(r.create_collateral_task())}),h(48,"Create"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.col_Task_name),_(),D("ngIf",t.col_Task_name.length>0),_(4),gt("ngModel",t.col_goal_quantity),_(5),gt("ngModel",t.col_goal_quality),_(4),gt("ngModel",t.Col_goal_cost),_(5),gt("ngModel",t.goal_start_date),_(7),gt("ngModel",t.goal_end_date),D("min",t.minEndDate),_(5),gt("ngModel",t.goal_no_of_days),_(4),gt("ngModel",t.col_assigned_to)}}function xV(n,e){if(n&1){let t=Nt();c(0,"div",26)(1,"div",27)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",28),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function bV(n,e){if(n&1&&(c(0,"option",41),h(1),d()),n&2){let t=e.$implicit;D("ngValue",t),_(),A(t.Marketing_task_name)}}function yV(n,e){if(n&1){let t=Nt();c(0,"div",32),rt(1,xV,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Marketing Calender (Online & Offline Activites)"),d()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Task Name:"),d(),c(11,"select",35),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.cal_selected_task,r)||(a.cal_selected_task=r),q(r)}),rt(12,bV,2,2,"option",36),d()(),c(13,"div",12)(14,"label"),h(15,"Task Quantity:"),d(),c(16,"input",16),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.cal_goal_quantity,r)||(a.cal_goal_quantity=r),q(r)}),d()()(),c(17,"div",11)(18,"div",12)(19,"label"),h(20,"Cost:"),d(),c(21,"input",37),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.cal_goal_cost,r)||(a.cal_goal_cost=r),q(r)}),d()(),c(22,"div",12)(23,"label"),h(24,"Start Date:"),d(),c(25,"input",18),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.goal_start_date,r)||(a.goal_start_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.updateEndDateLimit())}),d()()(),c(26,"div",11)(27,"div",12)(28,"label"),h(29,"End Date "),c(30,"span",19),h(31,"(End date cannot be before start date)"),d(),h(32," :"),d(),c(33,"input",20),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.goal_end_date,r)||(a.goal_end_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.calculateNumberOfDays())}),d()(),c(34,"div",12)(35,"label"),h(36,"Frequency:"),d(),c(37,"input",38),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Cal_goal_Frequency,r)||(a.Cal_goal_Frequency=r),q(r)}),d()()(),c(38,"div",11)(39,"div",12)(40,"label"),h(41,"Assign To:"),d(),c(42,"input",22),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.cal_assigned_to,r)||(a.cal_assigned_to=r),q(r)}),d()(),c(43,"div",12)(44,"label",39),h(45,"Select Mode"),d(),c(46,"select",40),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Cal_goal_mode,r)||(a.Cal_goal_mode=r),q(r)}),c(47,"option",24),h(48,"Select a Mode"),d(),c(49,"option"),h(50,"Online"),d(),c(51,"option"),h(52,"Offline"),d()()()(),c(53,"button",25),lt("click",function(){G(t);let r=k();return q(r.create_marketing_task())}),h(54,"Create"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.cal_selected_task),_(),D("ngForOf",t.get_manage_task),_(4),gt("ngModel",t.cal_goal_quantity),_(5),gt("ngModel",t.cal_goal_cost),_(4),gt("ngModel",t.goal_start_date),_(8),gt("ngModel",t.goal_end_date),D("min",t.minEndDate),_(4),gt("ngModel",t.Cal_goal_Frequency),_(5),gt("ngModel",t.cal_assigned_to),_(4),gt("ngModel",t.Cal_goal_mode)}}function SV(n,e){if(n&1){let t=Nt();c(0,"div",26)(1,"div",27)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",28),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function wV(n,e){if(n&1){let t=Nt();c(0,"li",31),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.selectTask_engagement(r))}),h(1),d()}if(n&2){let t=e.$implicit;_(),de(" ",t.Marketing_task_name," ")}}function CV(n,e){if(n&1&&(c(0,"div",29)(1,"ul"),rt(2,wV,2,1,"li",30),d()()),n&2){let t=k(2);_(2),D("ngForOf",t.filteredTasks)}}function MV(n,e){if(n&1){let t=Nt();c(0,"div",32),rt(1,SV,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Engagement Analyzing Tracker (Engagement for Online Activites)"),d()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Task Name:"),d(),c(11,"input",14),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.eng_Task_name,r)||(a.eng_Task_name=r),q(r)}),lt("input",function(r){G(t);let a=k();return q(a.onSearch_engagement(r))}),d(),rt(12,CV,3,1,"div",15),d(),c(13,"div",12)(14,"label"),h(15,"Likes:"),d(),c(16,"input",42),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.eng_goal_like,r)||(a.eng_goal_like=r),q(r)}),d()()(),c(17,"div",11)(18,"div",12)(19,"label"),h(20,"Followers"),d(),c(21,"input",43),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.eng_goal_followers,r)||(a.eng_goal_followers=r),q(r)}),d()(),c(22,"div",12)(23,"label"),h(24,"Views\\Reach"),d(),c(25,"input",44),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Eng_goal_Views,r)||(a.Eng_goal_Views=r),q(r)}),d()()(),c(26,"div",11)(27,"div",12)(28,"label"),h(29,"Start Date:"),d(),c(30,"input",18),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.goal_start_date,r)||(a.goal_start_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.updateEndDateLimit())}),d()(),c(31,"div",12)(32,"label"),h(33,"End Date "),c(34,"span",19),h(35,"(End date cannot be before start date)"),d(),h(36," :"),d(),c(37,"input",20),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.goal_end_date,r)||(a.goal_end_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.calculateNumberOfDays())}),d()()(),c(38,"div",11)(39,"div",12)(40,"label"),h(41,"Number of Days:"),d(),c(42,"input",21),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.goal_no_of_days,r)||(a.goal_no_of_days=r),q(r)}),d()()(),c(43,"button",25),lt("click",function(){G(t);let r=k();return q(r.create_Engagement())}),h(44,"Create"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.eng_Task_name),_(),D("ngIf",t.eng_Task_name.length>0),_(4),gt("ngModel",t.eng_goal_like),_(5),gt("ngModel",t.eng_goal_followers),_(4),gt("ngModel",t.Eng_goal_Views),_(5),gt("ngModel",t.goal_start_date),_(7),gt("ngModel",t.goal_end_date),D("min",t.minEndDate),_(5),gt("ngModel",t.goal_no_of_days)}}function EV(n,e){if(n&1){let t=Nt();c(0,"div",26)(1,"div",27)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",28),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function AV(n,e){if(n&1&&(c(0,"option",41),h(1),d()),n&2){let t=e.$implicit;D("ngValue",t),_(),A(t.Marketing_task_name)}}function TV(n,e){if(n&1){let t=Nt();c(0,"div",32),rt(1,EV,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Results - Total Leads"),d()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Task Name:"),d(),c(11,"select",35),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.selected_task,r)||(a.selected_task=r),q(r)}),rt(12,AV,2,2,"option",36),d()(),c(13,"div",12)(14,"label"),h(15,"Goal Leads:"),d(),c(16,"input",45),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Tol_goal_leads,r)||(a.Tol_goal_leads=r),q(r)}),d()()(),c(17,"div",11)(18,"div",12)(19,"label",46),h(20,"Goal Conversion"),d(),c(21,"input",47),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Tol_goal_conversion,r)||(a.Tol_goal_conversion=r),q(r)}),d()(),c(22,"div",12)(23,"label",46),h(24,"Goal Registration"),d(),c(25,"input",47),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Tol_goal_registration,r)||(a.Tol_goal_registration=r),q(r)}),d()()(),c(26,"button",25),lt("click",function(){G(t);let r=k();return q(r.create_total_lead())}),h(27,"Create"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.selected_task),_(),D("ngForOf",t.get_manage_task),_(4),gt("ngModel",t.Tol_goal_leads),_(5),gt("ngModel",t.Tol_goal_conversion),_(4),gt("ngModel",t.Tol_goal_registration)}}function kV(n,e){if(n&1){let t=Nt();c(0,"div",26)(1,"div",27)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",28),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function IV(n,e){if(n&1){let t=Nt();c(0,"div",32),rt(1,kV,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Task Progress"),d()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Description:"),d(),c(11,"input",48),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Mls_description,r)||(a.Mls_description=r),q(r)}),d()(),c(12,"div",12)(13,"label"),h(14,"Start Date:"),d(),c(15,"input",18),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.goal_start_date,r)||(a.goal_start_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.updateEndDateLimit())}),d()()(),c(16,"div",11)(17,"div",12)(18,"label"),h(19,"End Date "),c(20,"span",19),h(21,"(End date cannot be before start date)"),d(),h(22," :"),d(),c(23,"input",20),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.goal_end_date,r)||(a.goal_end_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.calculateNumberOfDays())}),d()(),c(24,"div",12)(25,"label"),h(26,"Number of Days:"),d(),c(27,"input",49),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.goal_no_of_days,r)||(a.goal_no_of_days=r),q(r)}),d()()(),c(28,"div",11)(29,"div",12)(30,"label"),h(31,"Asign to:"),d(),c(32,"input",50),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Mls_assigned_to,r)||(a.Mls_assigned_to=r),q(r)}),d()()(),c(33,"button",25),lt("click",function(){G(t);let r=k();return q(r.create_miscellanous())}),h(34,"Create"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.Mls_description),_(4),gt("ngModel",t.goal_start_date),_(8),gt("ngModel",t.goal_end_date),D("min",t.minEndDate),_(4),gt("ngModel",t.goal_no_of_days),_(5),gt("ngModel",t.Mls_assigned_to)}}function DV(n,e){if(n&1){let t=Nt();c(0,"div",26)(1,"div",27)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",28),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function PV(n,e){if(n&1){let t=Nt();c(0,"div",56)(1,"div",27)(2,"strong"),h(3,"Error!"),d(),h(4),c(5,"button",28),lt("click",function(){G(t);let r=k(2);return q(r.error_mgs_card=!1)}),h(6,"\xD7"),d()()()}if(n&2){let t=k(2);_(4),de(" ",t.error_message," ")}}function LV(n,e){if(n&1){let t=Nt();c(0,"li",31),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.selectTask_dbsource(r))}),h(1),d()}if(n&2){let t=e.$implicit;_(),de(" ",t.Marketing_task_name," ")}}function RV(n,e){if(n&1&&(c(0,"div",29)(1,"ul"),rt(2,LV,2,1,"li",30),d()()),n&2){let t=k(2);_(2),D("ngForOf",t.filteredTasks)}}function OV(n,e){if(n&1){let t=Nt();c(0,"div",32),rt(1,DV,7,0,"div",7)(2,PV,7,1,"div",51),c(3,"div",8)(4,"div",9)(5,"label"),h(6,"DataBase Tracker"),d()(),c(7,"div",10)(8,"div",11)(9,"div",12)(10,"label"),h(11,"Name:"),d(),c(12,"input",50),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Db_name_client,r)||(a.Db_name_client=r),q(r)}),d()(),c(13,"div",12)(14,"label"),h(15,"Date:"),d(),c(16,"input",52),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Db_date,r)||(a.Db_date=r),q(r)}),d()()(),c(17,"div",11)(18,"div",12)(19,"div",13)(20,"label"),h(21,"Source:"),d(),c(22,"input",53),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Db_source,r)||(a.Db_source=r),q(r)}),lt("input",function(r){G(t);let a=k();return q(a.onSearch_dbsource(r))}),d(),rt(23,RV,3,1,"div",15),d()(),c(24,"div",12)(25,"label"),h(26,"Location"),d(),c(27,"input",54),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Db_location,r)||(a.Db_location=r),q(r)}),d()()(),c(28,"div",11)(29,"div",12)(30,"label"),h(31,"Contact"),d(),c(32,"input",55),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Db_contact,r)||(a.Db_contact=r),q(r)}),d()()(),c(33,"button",25),lt("click",function(){G(t);let r=k();return q(r.create_dbtracker())}),h(34,"Create"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(),D("ngIf",t.error_mgs_card),_(10),gt("ngModel",t.Db_name_client),_(4),gt("ngModel",t.Db_date),_(6),gt("ngModel",t.Db_source),_(),D("ngIf",t.Db_source.length>0),_(4),gt("ngModel",t.Db_location),_(5),gt("ngModel",t.Db_contact)}}var wu=class n{constructor(e,t,i,r,a){this.route=e;this.apiService=t;this.http=i;this.router=r;this.userService=a}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}current_task=null;updatetask=null;project_id=null;ngOnInit(){this.get_data(),this.route.params.subscribe(e=>{this.current_task=e.taskName,this.updatetask=e.updatetask,this.project_id=parseInt(e.projectid)}),this.apifromservice(),this.get_task(),this.get_task_date()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}postcontenttracker="";createCollateraltracker="";createmarketingcalender="";engagementanalyzingtracker="";marketingtotallead="";miscellaneousurl="";marketing_manage_task="";db_tracker_url="";apifromservice(){this.postcontenttracker=this.apiService.marketing_content_tracker_api(),this.createCollateraltracker=this.apiService.Collateraltrackerapi(),this.createmarketingcalender=this.apiService.marketingcalenderapi(),this.engagementanalyzingtracker=this.apiService.engagementanalyzingapi(),this.marketingtotallead=this.apiService.marketingtotalleadapi(),this.miscellaneousurl=this.apiService.marketingmiscellaneousapi(),this.marketing_manage_task=this.apiService.marketing_manage_task_api(),this.db_tracker_url=this.apiService.sales_dbtracker_api()}filter_task_names;filteredTasks=[];query="";get_task(){this.http.get(this.marketing_manage_task).subscribe(e=>{this.filter_task_names=e})}get_manage_task=[];get_task_date(){this.http.get(this.marketing_manage_task).subscribe(e=>{this.get_manage_task=e},e=>{console.error("Error fetching items",e)})}onSearch_content(e){this.cont_Task_name=e.target.value.toLowerCase(),this.filteredTasks=this.filter_task_names.filter(t=>t.Marketing_task_name.toLowerCase().includes(this.cont_Task_name)),this.cont_Task_name.length===0&&(this.filteredTasks=[])}selectTask_content(e){this.cont_Task_name=e.Marketing_task_name,this.filteredTasks=[]}onSearch_Collateral(e){this.col_Task_name=e.target.value.toLowerCase(),this.filteredTasks=this.filter_task_names.filter(t=>t.Marketing_task_name.toLowerCase().includes(this.col_Task_name)),this.col_Task_name.length===0&&(this.filteredTasks=[])}selectTask_Collateral(e){this.col_Task_name=e.Marketing_task_name,this.filteredTasks=[]}onSearch_Calender(e){this.cal_Task_name=e.target.value.toLowerCase(),this.filteredTasks=this.filter_task_names.filter(t=>t.Marketing_task_name.toLowerCase().includes(this.cal_Task_name)),this.cal_Task_name.length===0&&(this.filteredTasks=[])}selectTask_Calender(e){this.cal_Task_name=e.Marketing_task_name,this.Cal_Task_id=e.Marketing_Task_id,this.filteredTasks=[]}onSearch_engagement(e){this.eng_Task_name=e.target.value.toLowerCase(),this.filteredTasks=this.filter_task_names.filter(t=>t.Marketing_task_name.toLowerCase().includes(this.eng_Task_name)),this.eng_Task_name.length===0&&(this.filteredTasks=[])}selectTask_engagement(e){this.eng_Task_name=e.Marketing_task_name,this.filteredTasks=[]}onSearch_miscellanous(e){this.eng_Task_name=e.target.value.toLowerCase(),this.filteredTasks=this.filter_task_names.filter(t=>t.Marketing_task_name.toLowerCase().includes(this.eng_Task_name)),this.eng_Task_name.length===0&&(this.filteredTasks=[])}selectTask_miscellanous(e){this.eng_Task_name=e.Marketing_task_name,this.filteredTasks=[]}onSearch_dbsource(e){this.Db_source=e.target.value.toLowerCase(),this.filteredTasks=this.filter_task_names.filter(t=>t.Marketing_task_name.toLowerCase().includes(this.Db_source)),this.Db_source.length===0&&(this.filteredTasks=[])}selectTask_dbsource(e){this.Db_source=e.Marketing_task_name,this.task_id=e.Marketing_Task_id,this.filteredTasks=[]}cont_Task_name="";cont_goal_quality;cont_goal_quantity;cont_assigned_by="yoganandhan";cont_assigned_to=null;successmgs=!1;create_content_task(){let e=this.postcontenttracker,t={cont_Task_name:this.cont_Task_name,cont_goal_start_date:this.goal_start_date,cont_goal_end_date:this.goal_end_date,cont_goal_no_of_days:this.goal_no_of_days,cont_goal_quality:this.cont_goal_quality,cont_goal_quantity:this.cont_goal_quantity,cont_assigned_by:this.cont_assigned_by,cont_assigned_to:this.cont_assigned_to,cont_status:"New",Model_name:this.current_task,Project_id:this.project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Content Tracker"),this.router.navigate(["/view-goals",this.project_id])},1e3)},r=>{console.log("Post request failed",r)})}col_Task_name="";col_goal_quality;col_goal_quantity;col_assigned_by="yoganandhan";col_assigned_to=null;Col_goal_cost;create_collateral_task(){let e=this.createCollateraltracker,t={Col_Task_name:this.col_Task_name,Col_goal_start_date:this.goal_start_date,Col_goal_end_date:this.goal_end_date,Col_goal_no_of_days:this.goal_no_of_days,Col_goal_quality:this.col_goal_quality,Col_goal_quantity:this.col_goal_quantity,Col_goal_cost:this.Col_goal_cost,Col_assigned_by:this.col_assigned_by,Col_assigned_to:this.col_assigned_to,Col_status:"New",Model_name:this.current_task,Project_id:this.project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Collateral Tracker"),this.router.navigate(["/view-goals",this.project_id])},1e3)},r=>{console.log("Post request failed",r)})}cal_Task_name="";Cal_Task_id=null;Cal_goal_mode=null;cal_goal_quantity;cal_goal_cost;Cal_goal_Frequency=null;cal_assigned_by="yoganandhan";cal_assigned_to=null;cal_selected_task;create_marketing_task(){let e=this.createmarketingcalender,t={Cal_Task_name:this.cal_selected_task.Marketing_task_name,Cal_Task_id:this.cal_selected_task.Marketing_Task_id,Cal_goal_start_date:this.goal_start_date,Cal_goal_end_date:this.goal_end_date,Cal_goal_Frequency:this.Cal_goal_Frequency,Cal_goal_cost:this.cal_goal_cost,Cal_goal_quantity:this.cal_goal_quantity,Cal_assigned_by:this.cal_assigned_by,Cal_assigned_to:this.cal_assigned_to,Cal_goal_mode:this.Cal_goal_mode,Cal_status:"New",Model_name:this.current_task,Project_id:this.project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Marketing Calender"),this.router.navigate(["/view-goals",this.project_id])},1e3)},r=>{console.log("Post request failed",r)})}eng_Task_name="";eng_goal_like=null;eng_goal_followers=null;Eng_goal_Views=null;create_Engagement(){let e=this.engagementanalyzingtracker,t={Eng_Task_name:this.eng_Task_name,Eng_goal_like:this.eng_goal_like,Eng_goal_followers:this.eng_goal_followers,Eng_goal_Views:this.Eng_goal_Views,Eng_goal_start_date:this.goal_start_date,Eng_goal_end_date:this.goal_end_date,Eng_end_date:this.goal_end_date,Eng_goal_no_of_days:this.goal_no_of_days,Eng_status:"New",Model_name:this.current_task,Project_id:this.project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Engagement Analyzing"),this.router.navigate(["/view-goals",this.project_id])},1e3)},r=>{console.log("Post request failed",r)})}Task_Name=null;Tol_goal_leads=null;Tol_goal_conversion=null;Tol_goal_registration=null;Tol_goal_date=null;selected_task;create_total_lead(){let e=this.marketingtotallead,t={Task_Name:this.selected_task.Marketing_task_name,Task_id:this.selected_task.Marketing_Task_id,Tol_goal_leads:this.Tol_goal_leads,Tol_goal_conversion:this.Tol_goal_conversion,Tol_goal_registration:this.Tol_goal_registration,Project_id:this.project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Total leads"),this.router.navigate(["/view-goals",this.project_id])},1e3)},r=>{console.log("Post request failed",r)})}Db_date=null;Db_source="";task_id=null;Db_name_client="";Db_location="";Db_contact="";error_message="";error_mgs_card=!1;create_dbtracker(){let e=this.db_tracker_url,t={Db_date:this.Db_date,Db_source:this.Db_source,task_id:this.task_id,Db_name_client:this.Db_name_client,Db_location:this.Db_location,Db_contact:this.Db_contact,project_id:this.project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("DataBase Tracker"),this.router.navigate(["/Actual-task",this.project_id])},3e3)},r=>{r.error.Db_contact=="sales_database_tracker with this Db contact already exists."&&(this.error_message="Contact Already exist",setTimeout(()=>{this.error_mgs_card=!0},100)),console.log("Post request error",r)})}Mls_description=null;Mls_goal_no_of_days=null;Mls_assigned_to=null;Mls_assigned_by=null;Mls_status=null;create_miscellanous(){let e=this.miscellaneousurl,t={Mls_description:this.Mls_description,Mls_goal_start_date:this.goal_start_date,Mls_goal_end_date:this.goal_end_date,Mls_goal_no_of_days:this.goal_no_of_days,Mls_assigned_by:"Yoganandhan",Mls_assigned_to:this.Mls_assigned_to,Project_id:this.project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Task Progress"),this.router.navigate(["/view-goals",this.project_id])},1e3)},r=>{console.log("Post request failed",r)})}goal_start_date=null;goal_end_date=null;minEndDate=null;goal_no_of_days=null;updateEndDateLimit(){this.goal_start_date&&(this.minEndDate=this.goal_start_date,this.calculateNumberOfDays())}calculateNumberOfDays(){if(this.goal_start_date&&this.goal_end_date){let e=new Date(this.goal_start_date),i=new Date(this.goal_end_date).getTime()-e.getTime(),r=i>=0?Math.ceil(i/(1e3*3600*24))+1:0;r===1?this.goal_no_of_days=`${r} day`:this.goal_no_of_days=`${r} days`}else this.goal_no_of_days="0 day"}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(sn),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-add-goals"]],decls:11,vars:11,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mob-res"],["class","container mb-3 card-margin",4,"ngIf"],["class","container card-margin",4,"ngIf"],[1,"container","mb-3","card-margin"],["class","alert-card fade-in",4,"ngIf"],[1,"card","shadow"],[1,"heading-card"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-6"],[1,"search-container"],["type","text","placeholder","Search tasks...",1,"custom-input",3,"ngModelChange","input","ngModel"],["class","task-list",4,"ngIf"],["type","number","placeholder","Enter Quantity",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter Quality",1,"custom-input",3,"ngModelChange","ngModel"],["type","date","name","startDate",1,"custom-input",3,"ngModelChange","change","ngModel"],[2,"font-size","10px","color","red"],["type","date","name","endDate",1,"custom-input",3,"ngModelChange","change","ngModel","min"],["type","text","placeholder","Number of Days","name","numberOfDaysText","readonly","",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter name",1,"custom-input",3,"ngModelChange","ngModel"],["name","","id","",1,"custom-input"],["value",""],[1,"submit-btn",3,"click"],[1,"alert-card","fade-in"],[1,"alert-content"],[1,"close-btn",3,"click"],[1,"task-list"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"container","card-margin"],["type","number","placeholder","Enter Cost","name","startDate",1,"custom-input",3,"ngModelChange","change","ngModel"],["placeholder","Number of Days","type","text","name","numberOfDaysText","readonly","",1,"custom-input",3,"ngModelChange","ngModel"],[1,"custom-input",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],["type","number","placeholder","Enter Cost",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter Frequency",1,"custom-input",3,"ngModelChange","ngModel"],["for","modeSelect"],["id","modeSelect",1,"custom-input",3,"ngModelChange","ngModel"],[3,"ngValue"],["type","number","placeholder","Enter likes",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter Followers",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter Views",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","number","placeholder","Enter Goal Leads",1,"custom-input",3,"ngModelChange","ngModel"],["for",""],["required","","type","number","placeholder","Enter Goal Conversion",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter Description",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Number of Days",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter Name",1,"custom-input",3,"ngModelChange","ngModel"],["class","alert-card-error fade-in",4,"ngIf"],["type","date","name","sDate",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Search Source...",1,"custom-input",3,"ngModelChange","input","ngModel"],["placeholder","Enter Location","type","text","name","Location",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter Contact",1,"custom-input",3,"ngModelChange","ngModel"],[1,"alert-card-error","fade-in"]],template:function(t,i){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3),rt(4,fV,59,10,"div",4)(5,vV,49,11,"div",5)(6,yV,55,11,"div",5)(7,MV,45,10,"div",5)(8,TV,28,6,"div",5)(9,IV,35,7,"div",5)(10,OV,35,8,"div",5),d()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(9,dV,!i.isSidebarOpen)),_(2),D("ngIf",i.current_task==="Content Tracker"),_(),D("ngIf",i.current_task==="Collateral Tracker"),_(),D("ngIf",i.current_task==="Marketing Calender"),_(),D("ngIf",i.current_task==="Engagement Analyzing"),_(),D("ngIf",i.current_task==="Total leads"),_(),D("ngIf",i.current_task==="Task Progress"),_(),D("ngIf",i.current_task==="DataBase Tracker"))},dependencies:[Ke,Hi,mi,xn,bn,ln,_o,cn,Ki,gs,Gi,ei,ii],styles:[".card-margin[_ngcontent-%COMP%]{margin-top:3%}.custom-input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:5px;font-size:16px;transition:border-color .3s ease}.custom-input[_ngcontent-%COMP%]:focus{border-color:#5e1080;outline:none;box-shadow:0 0 5px #5d1285ad}.custom-label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px;display:block}label[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif}.heading-card[_ngcontent-%COMP%]{background-color:#639;color:#fff;border-top-right-radius:5px;border-top-left-radius:5px;padding:3%;text-align:center;font-size:20px}.mob-res[_ngcontent-%COMP%]{margin-top:5%}@media screen and (max-width: 768px){.mob-res[_ngcontent-%COMP%]{margin-top:20%}}.search-container[_ngcontent-%COMP%]{margin-bottom:20px}.task-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;margin-top:10px;background-color:#fff;box-shadow:0 2px 5px #0000001a;position:fixed}.task-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.task-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px;cursor:pointer;transition:background-color .3s}.task-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.content-below[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border:1px solid #ddd;border-radius:4px}"]})};var NV=n=>({"full-width":n}),FV=n=>({"active-module":n}),bg=n=>["/new-goal",n],BV=n=>["/add-task","Content Tracker",n],VV=n=>["/add-task","Collateral Tracker",n],UV=n=>["/add-task","Marketing Calender",n],zV=n=>["/add-task","Engagement Analyzing",n],HV=n=>["/add-task","Total leads",n],WV=n=>["/add-task","Task Progress",n];function jV(n,e){if(n&1&&(c(0,"option",16),h(1),d()),n&2){let t=e.$implicit;D("value",t),_(),A(t)}}function GV(n,e){if(n&1){let t=Nt();c(0,"li",17),lt("click",function(){let r=G(t).$implicit,a=k();return q(a.selectModule(r))}),h(1),d()}if(n&2){let t=e.$implicit,i=k();D("ngClass",te(2,FV,t===i.selectedModule)),_(),de(" ",t," ")}}function qV(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td"),h(10),Et(11,"date"),d(),c(12,"td"),h(13),Et(14,"date"),d(),c(15,"td"),h(16),d()()),n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.cont_Task_name),_(2),A(t.cont_goal_quantity),_(2),A(t.cont_goal_quality),_(2),A(At(11,7,t.cont_goal_start_date,"dd MMM yy")),_(3),A(At(14,10,t.cont_goal_end_date,"dd MMM yy")),_(3),A(t.cont_goal_no_of_days)}}function XV(n,e){if(n&1&&(pe(0),rt(1,qV,17,13,"tr",25),fe()),n&2){let t=k(2);_(),D("ngForOf",t.getcontent)}}function YV(n,e){n&1&&(c(0,"tr")(1,"td",26),h(2,"No task found"),d()())}function $V(n,e){if(n&1&&(c(0,"div",18)(1,"button",19),h(2,"New Task"),d(),c(3,"button",19),h(4,"Add Task"),d(),c(5,"div",20)(6,"table")(7,"thead")(8,"tr")(9,"th",21),h(10,"Content Tracker (Content Creations)"),d()(),c(11,"tr")(12,"th",22),h(13,"S.No"),d(),c(14,"th",22),h(15,"Tasks"),d(),c(16,"th",23),h(17,"Goal"),d()(),c(18,"tr")(19,"th"),h(20,"Quantity"),d(),c(21,"th"),h(22,"Quality"),d(),c(23,"th"),h(24,"Start Date"),d(),c(25,"th"),h(26,"End Date"),d(),c(27,"th"),h(28,"No of Days"),d()()(),c(29,"tbody"),rt(30,XV,2,1,"ng-container",24)(31,YV,3,0,"ng-template",null,0,Ie),d()()()()),n&2){let t=Qe(32),i=k();_(),D("routerLink",te(4,bg,i.project_id)),_(2),D("routerLink",te(6,BV,i.project_id)),_(27),D("ngIf",i.getcontent&&i.getcontent.length>0)("ngIfElse",t)}}function KV(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td"),h(10),Et(11,"date"),d(),c(12,"td"),h(13),Et(14,"date"),d(),c(15,"td"),h(16),d()()),n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.Col_Task_name),_(2),A(t.Col_goal_quantity),_(2),A(t.Col_goal_quality),_(2),A(At(11,7,t.Col_goal_start_date,"dd MMM yy")),_(3),A(At(14,10,t.Col_goal_end_date,"dd MMM yy")),_(3),A(t.Col_goal_no_of_days)}}function ZV(n,e){if(n&1&&(pe(0),rt(1,KV,17,13,"tr",25),fe()),n&2){let t=k(2);_(),D("ngForOf",t.getcollateraltask)}}function JV(n,e){n&1&&(c(0,"tr")(1,"td",26),h(2,"No task found"),d()())}function QV(n,e){if(n&1&&(c(0,"div",18)(1,"button",19),h(2,"New Task"),d(),c(3,"button",19),h(4,"Add Task"),d(),c(5,"div",20)(6,"table",27)(7,"thead",28)(8,"tr")(9,"th",29),h(10,"Collateral Tracker (Collateral Designs & Video Making) "),d()(),c(11,"tr")(12,"th",22),h(13,"S.No"),d(),c(14,"th",22),h(15,"Tasks"),d(),c(16,"th",23),h(17,"Goal"),d()(),c(18,"tr")(19,"th"),h(20,"Quantity"),d(),c(21,"th"),h(22,"Quality"),d(),c(23,"th"),h(24,"Start Date"),d(),c(25,"th"),h(26,"End Date"),d(),c(27,"th"),h(28,"No of Days"),d()()(),c(29,"tbody"),rt(30,ZV,2,1,"ng-container",24)(31,JV,3,0,"ng-template",null,0,Ie),d()()()()),n&2){let t=Qe(32),i=k();_(),D("routerLink",te(4,bg,i.project_id)),_(2),D("routerLink",te(6,VV,i.project_id)),_(27),D("ngIf",i.getcollateraltask&&i.getcollateraltask.length>0)("ngIfElse",t)}}function t7(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td"),h(10),Et(11,"date"),d(),c(12,"td"),h(13),Et(14,"date"),d(),c(15,"td"),h(16),d(),c(17,"td"),h(18),d()()),n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.Cal_Task_name),_(2),A(t.Cal_goal_quantity),_(2),A(t.Cal_goal_cost),_(2),A(At(11,8,t.Cal_goal_start_date,"dd MMM yy")),_(3),A(At(14,11,t.Cal_goal_end_date,"dd MMM yy")),_(3),A(t.Cal_goal_Frequency),_(2),A(t.Cal_goal_mode)}}function e7(n,e){if(n&1&&(pe(0),rt(1,t7,19,14,"tr",25),fe()),n&2){let t=k(2);_(),D("ngForOf",t.getcalendertask)}}function i7(n,e){n&1&&(c(0,"tr")(1,"td",26),h(2,"No task found"),d()())}function n7(n,e){if(n&1&&(c(0,"div",18)(1,"button",19),h(2,"New Task"),d(),c(3,"button",19),h(4,"Add Task"),d(),c(5,"div",20)(6,"table",27)(7,"thead",28)(8,"tr")(9,"th",30),h(10,"Marketing Calender (Online & Offline Activites) "),d()(),c(11,"tr")(12,"th",22),h(13,"S.No"),d(),c(14,"th",22),h(15,"Tasks"),d(),c(16,"th",31),h(17,"Goal"),d()(),c(18,"tr")(19,"th"),h(20,"Quantity"),d(),c(21,"th"),h(22,"Cost"),d(),c(23,"th"),h(24,"Start Date"),d(),c(25,"th"),h(26,"End Date"),d(),c(27,"th"),h(28,"Frequency"),d(),c(29,"th"),h(30,"Online/Ofline"),d()()(),c(31,"tbody"),rt(32,e7,2,1,"ng-container",24)(33,i7,3,0,"ng-template",null,0,Ie),d()()()()),n&2){let t=Qe(34),i=k();_(),D("routerLink",te(4,bg,i.project_id)),_(2),D("routerLink",te(6,UV,i.project_id)),_(29),D("ngIf",i.getcalendertask&&i.getcalendertask.length>0)("ngIfElse",t)}}function r7(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td"),h(10),Et(11,"date"),d(),c(12,"td"),h(13),Et(14,"date"),d(),c(15,"td"),h(16),d()()),n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.Eng_Task_name),_(2),A(t.Eng_goal_like),_(2),A(t.Eng_goal_followers),_(2),A(At(11,7,t.Eng_goal_start_date,"dd MMM yy")),_(3),A(At(14,10,t.Eng_goal_end_date,"dd MMM yy")),_(3),A(t.Eng_goal_no_of_days)}}function a7(n,e){if(n&1&&(pe(0),rt(1,r7,17,13,"tr",25),fe()),n&2){let t=k(2);_(),D("ngForOf",t.getengagementtask)}}function s7(n,e){n&1&&(c(0,"tr")(1,"td",32),h(2,"No task found"),d()())}function o7(n,e){if(n&1&&(c(0,"div",18)(1,"button",19),h(2,"New Task"),d(),c(3,"button",19),h(4,"Add Task"),d(),c(5,"div",20)(6,"table",27)(7,"thead",28)(8,"tr")(9,"th",29),h(10,"Engagement Analyzing Tracker (Engagement for Online Activites)"),d()(),c(11,"tr")(12,"th",22),h(13,"S.No"),d(),c(14,"th",22),h(15,"Tasks"),d(),c(16,"th",23),h(17,"Goal"),d()(),c(18,"tr")(19,"th"),h(20,"Likes"),d(),c(21,"th"),h(22,"Followers"),d(),c(23,"th"),h(24,"Start Date"),d(),c(25,"th"),h(26,"End Date"),d(),c(27,"th"),h(28,"Number of days"),d()()(),c(29,"tbody"),rt(30,a7,2,1,"ng-container",24)(31,s7,3,0,"ng-template",null,0,Ie),d()()()()),n&2){let t=Qe(32),i=k();_(),D("routerLink",te(4,bg,i.project_id)),_(2),D("routerLink",te(6,zV,i.project_id)),_(27),D("ngIf",i.getengagementtask&&i.getengagementtask.length>0)("ngIfElse",t)}}function l7(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d()()),n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.Task_Name),_(2),A(t.Tol_goal_leads)}}function c7(n,e){if(n&1&&(pe(0),rt(1,l7,7,3,"tr",25),fe()),n&2){let t=k(2);_(),D("ngForOf",t.gettotalleads)}}function d7(n,e){n&1&&(c(0,"tr")(1,"td",32),h(2,"No task found"),d()())}function u7(n,e){if(n&1&&(c(0,"div",18)(1,"button",19),h(2,"Add Task"),d(),c(3,"div",20)(4,"table",27)(5,"thead",28)(6,"tr")(7,"th",30),h(8,"Results - Total Leads"),d()(),c(9,"tr")(10,"th"),h(11,"S.No"),d(),c(12,"th"),h(13,"Source"),d(),c(14,"th"),h(15,"Goal"),d()()(),c(16,"tbody"),rt(17,c7,2,1,"ng-container",24)(18,d7,3,0,"ng-template",null,0,Ie),d()()()()),n&2){let t=Qe(19),i=k();_(),D("routerLink",te(3,HV,i.project_id)),_(16),D("ngIf",i.gettotalleads&&i.gettotalleads.length>0)("ngIfElse",t)}}function h7(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),Et(7,"date"),d(),c(8,"td"),h(9),Et(10,"date"),d(),c(11,"td"),h(12),d()()),n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.Mls_description),_(2),A(At(7,5,t.Mls_goal_start_date,"dd MMM yy")),_(3),A(At(10,8,t.Mls_goal_end_date,"dd MMM yy")),_(3),A(t.Mls_goal_no_of_days)}}function p7(n,e){if(n&1&&(pe(0),rt(1,h7,13,11,"tr",25),fe()),n&2){let t=k(2);_(),D("ngForOf",t.getmiscellaneousdata)}}function f7(n,e){n&1&&(c(0,"tr")(1,"td",32),h(2,"No task found"),d()())}function m7(n,e){if(n&1&&(c(0,"div",18)(1,"button",19),h(2,"Add Task"),d(),c(3,"div",20)(4,"table",27)(5,"thead",28)(6,"tr")(7,"th",30),h(8,"Task Progress"),d()(),c(9,"tr")(10,"th"),h(11,"S.No"),d(),c(12,"th"),h(13,"Description"),d(),c(14,"th"),h(15,"Start Date"),d(),c(16,"th"),h(17,"End Date"),d(),c(18,"th"),h(19,"Number of Days"),d()()(),c(20,"tbody"),rt(21,p7,2,1,"ng-container",24)(22,f7,3,0,"ng-template",null,0,Ie),d()()()()),n&2){let t=Qe(23),i=k();_(),D("routerLink",te(3,WV,i.project_id)),_(20),D("ngIf",i.getmiscellaneousdata&&i.getmiscellaneousdata.length>0)("ngIfElse",t)}}var xg=class n{constructor(e,t,i,r){this.route=e;this.apiService=t;this.http=i;this.userService=r}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}selectedModule="";modules=["Content Tracker","Collateral Tracker","Marketing Calender","Engagement Analyzing","Total leads","Task Progress"];selectModule(e){this.selectedModule=e}currentCard=null;project_id=null;card_name="";retrive_data(){this.card_name=this.apiService.get_redirect_card(),this.selectedModule=this.card_name}ngOnInit(){this.get_data(),this.route.params.subscribe(e=>{this.project_id=parseInt(e.projectid)}),this.getcontenttask(),this.getcollateral(),this.getmarketingcalender(),this.getengagement(),this.gettotallead(),this.getmiscellaneous(),this.project_name(),this.retrive_data()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}project_names="";project_name(){this.project_id==1?this.project_names="ANBU AVENUE":this.project_id==2?this.project_names="RVS AVENUE":this.project_id==3?this.project_names="AGASTHYA PRIME":this.project_id==4&&(this.project_names="AGASTHYA DEVELOPER")}getcontent=[];getcontenttask(){this.http.get(this.apiService.marketing_content_tracker_api()).subscribe(e=>{this.getcontent=e.filter(t=>t.Project_id===this.project_id)},e=>{console.error("Error fetching items",e)})}getcollateraltask=[];getcollateral(){this.http.get(this.apiService.Collateraltrackerapi()).subscribe(e=>{this.getcollateraltask=e.filter(t=>t.Project_id===this.project_id)},e=>{console.error("Error fetching items",e)})}getcalendertask=[];getmarketingcalender(){this.http.get(this.apiService.marketingcalenderapi()).subscribe(e=>{this.getcalendertask=e.filter(t=>t.Project_id===this.project_id)},e=>{console.error("Error fetching items",e)})}getengagementtask=[];getengagement(){this.http.get(this.apiService.engagementanalyzingapi()).subscribe(e=>{this.getengagementtask=e.filter(t=>t.Project_id===this.project_id)},e=>{console.error("Error fetching items",e)})}gettotalleads=[];gettotallead(){this.http.get(this.apiService.marketingtotalleadapi()).subscribe(e=>{this.gettotalleads=e.filter(t=>t.Project_id===this.project_id)},e=>{console.error("Error fetching items",e)})}getmiscellaneousdata=[];getmiscellaneous(){this.http.get(this.apiService.marketingmiscellaneousapi()).subscribe(e=>{this.getmiscellaneousdata=e.filter(t=>t.Project_id===this.project_id)},e=>{console.error("Error fetching items",e)})}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-view-goals"]],decls:24,vars:14,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"bradcrumb-card"],[1,"container","my-4"],[1,"form-group","module-dropdown"],["for","moduleSelect"],["id","moduleSelect",1,"custom-input",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"module-card"],[1,"module-list"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","card-margin",4,"ngIf"],[3,"value"],[3,"click","ngClass"],[1,"card-margin"],[1,"submit-btn",3,"routerLink"],[1,"table-responsive"],["colspan","14"],["rowspan","2"],["colspan","5"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["colspan","8",2,"text-align","center"],[1,"table","table-bordered","table-striped"],[1,"table-header"],["colspan","14",1,"main-header"],["colspan","13",1,"main-header"],["colspan","6"],["colspan","9",2,"text-align","center"]],template:function(t,i){t&1&&(c(0,"app-header",1),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"p"),h(6),d()(),c(7,"div",6)(8,"div",7)(9,"label",8),h(10,"Select Module"),d(),c(11,"select",9),vt("ngModelChange",function(a){return _t(i.selectedModule,a)||(i.selectedModule=a),a}),c(12,"option",10),h(13,"Select a Module"),d(),rt(14,jV,2,2,"option",11),d()(),c(15,"div",12)(16,"ul",13),rt(17,GV,2,4,"li",14),d()(),rt(18,$V,33,8,"div",15)(19,QV,33,8,"div",15)(20,n7,35,8,"div",15)(21,o7,33,8,"div",15)(22,u7,20,5,"div",15)(23,m7,24,5,"div",15),d()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(12,NV,!i.isSidebarOpen)),_(4),A(i.project_names),_(5),gt("ngModel",i.selectedModule),_(3),D("ngForOf",i.modules),_(3),D("ngForOf",i.modules),_(),D("ngIf",i.selectedModule==="Content Tracker"),_(),D("ngIf",i.selectedModule==="Collateral Tracker"),_(),D("ngIf",i.selectedModule==="Marketing Calender"),_(),D("ngIf",i.selectedModule==="Engagement Analyzing"),_(),D("ngIf",i.selectedModule==="Total leads"),_(),D("ngIf",i.selectedModule==="Task Progress"))},dependencies:[Ke,Hi,mi,on,xn,bn,cn,Ki,Gi,ei,ii,Vr],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-family:Poppins,sans-serif;margin:30px 0;background:linear-gradient(to bottom,#fff,#f0f0f5);box-shadow:0 4px 12px #0000001a;border-radius:8px;overflow:hidden}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5945c;color:#000;font-size:20px;text-transform:uppercase;padding:16px;border:1px solid;letter-spacing:1px;text-align:center}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{font-size:24px;background:#741b48;color:#fff;border-bottom:2px solid white}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease;font-size:16px;border:1px solid}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f0f0f5}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#a29bfe;color:#fff;box-shadow:0 6px 15px #0000001a;transform:scale(1.01)}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px;text-align:center;color:#333;border:none;border:1px solid;table-layout:fixed}i[_ngcontent-%COMP%]{color:gray;font-size:18px;transition:color .3s ease,transform .3s ease;margin-left:45%;cursor:pointer}i.far.fa-edit[_ngcontent-%COMP%]:hover{color:#741b48;transform:scale(1.2);cursor:pointer}.card-margin[_ngcontent-%COMP%]{margin-top:4%}.select-mt[_ngcontent-%COMP%]{margin-top:5%}"]})};var g7=n=>({"full-width":n});function _7(n,e){if(n&1){let t=Nt();c(0,"div",27)(1,"div",28)(2,"strong"),h(3,"Success!"),d(),h(4," Updated Successfully. "),c(5,"button",29),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function v7(n,e){if(n&1){let t=Nt();c(0,"div",6),rt(1,_7,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Content Tracker"),d()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Task Name:"),d(),c(11,"input",13),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_content.cont_Task_name,r)||(a.get_content.cont_Task_name=r),q(r)}),d()(),c(12,"div",12)(13,"label"),h(14,"Task Quantity:"),d(),c(15,"input",14),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_content.cont_actual_quantity,r)||(a.get_content.cont_actual_quantity=r),q(r)}),d()()(),c(16,"div",11)(17,"div",12)(18,"label"),h(19,"Task Quality:"),d(),c(20,"input",15),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_content.cont_actual_quality,r)||(a.get_content.cont_actual_quality=r),q(r)}),d()(),c(21,"div",12)(22,"label"),h(23,"Cost:"),d(),c(24,"input",16),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_content.Col_actual_cost,r)||(a.get_content.Col_actual_cost=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.updateEndDateLimit())}),d()()(),c(25,"div",11)(26,"div",12)(27,"label"),h(28,"Start Date:"),d(),c(29,"input",17),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_content.cont_actual_start_date,r)||(a.get_content.cont_actual_start_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.updateEndDateLimit())}),d()(),c(30,"div",12)(31,"label"),h(32,"End Date "),c(33,"span",18),h(34,"(End date cannot be before start date)"),d(),h(35," :"),d(),c(36,"input",19),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_content.cont_actual_end_date,r)||(a.get_content.cont_actual_end_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.calculate_No_Days())}),d()()(),c(37,"div",11)(38,"div",12)(39,"label"),h(40,"Number of Dates:"),d(),c(41,"input",20),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_content.cont_actual_no_of_days,r)||(a.get_content.cont_actual_no_of_days=r),q(r)}),d()(),c(42,"div",12)(43,"label"),h(44,"Status:"),d(),c(45,"select",21),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_content.cont_status,r)||(a.get_content.cont_status=r),q(r)}),c(46,"option",22),h(47,"Select Status"),d(),c(48,"option",23),h(49,"Completed"),d(),c(50,"option",24),h(51,"On Going"),d(),c(52,"option",25),h(53,"Pending"),d()()()(),c(54,"button",26),lt("click",function(){G(t);let r=k();return q(r.update_content_task())}),h(55,"Create"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.get_content.cont_Task_name),_(4),gt("ngModel",t.get_content.cont_actual_quantity),_(5),gt("ngModel",t.get_content.cont_actual_quality),_(4),gt("ngModel",t.get_content.Col_actual_cost),_(5),gt("ngModel",t.get_content.cont_actual_start_date),_(7),gt("ngModel",t.get_content.cont_actual_end_date),D("min",t.minEndDate),_(5),gt("ngModel",t.get_content.cont_actual_no_of_days),_(4),gt("ngModel",t.get_content.cont_status),D("value",t.get_content.cont_status)}}function x7(n,e){if(n&1){let t=Nt();c(0,"div",27)(1,"div",28)(2,"strong"),h(3,"Success!"),d(),h(4," Updated Successfully. "),c(5,"button",29),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function b7(n,e){if(n&1){let t=Nt();c(0,"div",30),rt(1,x7,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Collateral Tracker"),d()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Task Name:"),d(),c(11,"input",31),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_collateral.Col_Task_name,r)||(a.get_collateral.Col_Task_name=r),q(r)}),d()(),c(12,"div",12)(13,"label"),h(14,"Task Quantity:"),d(),c(15,"input",14),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_collateral.Col_actual_quantity,r)||(a.get_collateral.Col_actual_quantity=r),q(r)}),d()()(),c(16,"div",11)(17,"div",12)(18,"label"),h(19,"Task Quality:"),d(),c(20,"input",15),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_collateral.Col_actual_quality,r)||(a.get_collateral.Col_actual_quality=r),q(r)}),d()(),c(21,"div",12)(22,"label"),h(23,"Cost:"),d(),c(24,"input",32),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_collateral.Col_actual_cost,r)||(a.get_collateral.Col_actual_cost=r),q(r)}),d()()(),c(25,"div",11)(26,"div",12)(27,"label"),h(28,"Start Date:"),d(),c(29,"input",17),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_collateral.Col_actual_start_date,r)||(a.get_collateral.Col_actual_start_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.End_Date_Limit_collateral())}),d()(),c(30,"div",12)(31,"label"),h(32,"End Date "),c(33,"span",18),h(34,"(End date cannot be before start date)"),d(),h(35," :"),d(),c(36,"input",19),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_collateral.Col_actual_end_date,r)||(a.get_collateral.Col_actual_end_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.calculate_No_Days_collateral())}),d()()(),c(37,"div",11)(38,"div",12)(39,"label"),h(40,"Number of Dates:"),d(),c(41,"input",20),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_collateral.Col_actual_no_of_days,r)||(a.get_collateral.Col_actual_no_of_days=r),q(r)}),d()(),c(42,"div",12)(43,"label"),h(44,"Status:"),d(),c(45,"select",21),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_collateral.Col_status,r)||(a.get_collateral.Col_status=r),q(r)}),c(46,"option",22),h(47,"Select Status"),d(),c(48,"option",23),h(49,"Completed"),d(),c(50,"option",24),h(51,"On Going"),d(),c(52,"option",25),h(53,"Pending"),d()()(),Lt(54,"div",12),d(),c(55,"button",26),lt("click",function(){G(t);let r=k();return q(r.update_collateral_task())}),h(56,"Create"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),D("value",t.cont_Task_name),gt("ngModel",t.get_collateral.Col_Task_name),_(4),gt("ngModel",t.get_collateral.Col_actual_quantity),_(5),gt("ngModel",t.get_collateral.Col_actual_quality),_(4),gt("ngModel",t.get_collateral.Col_actual_cost),_(5),gt("ngModel",t.get_collateral.Col_actual_start_date),_(7),gt("ngModel",t.get_collateral.Col_actual_end_date),D("min",t.minEndDate),_(5),gt("ngModel",t.get_collateral.Col_actual_no_of_days),_(4),gt("ngModel",t.get_collateral.Col_status),D("value",t.get_collateral.Col_status)}}function y7(n,e){if(n&1){let t=Nt();c(0,"div",27)(1,"div",28)(2,"strong"),h(3,"Success!"),d(),h(4," Updated Successfully. "),c(5,"button",29),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function S7(n,e){if(n&1){let t=Nt();c(0,"div",30),rt(1,y7,7,0,"div",7),c(2,"div",33)(3,"table",34)(4,"thead",35)(5,"tr")(6,"th",36),h(7,"Goal"),d()(),c(8,"tr")(9,"th"),h(10,"Tasks"),d(),c(11,"th"),h(12,"Quantity"),d(),c(13,"th"),h(14,"Cost"),d(),c(15,"th"),h(16,"Start Date"),d(),c(17,"th"),h(18,"End Date"),d(),c(19,"th"),h(20,"Frequency"),d(),c(21,"th"),h(22,"Online/Ofline"),d()()(),c(23,"tbody")(24,"tr")(25,"td"),h(26),d(),c(27,"td"),h(28),d(),c(29,"td"),h(30),d(),c(31,"td"),h(32),Et(33,"date"),d(),c(34,"td"),h(35),Et(36,"date"),d(),c(37,"td"),h(38),d(),c(39,"td"),h(40),d()()()()(),c(41,"div",8)(42,"div",9)(43,"label"),h(44,"Marketing Calender (Online & Offline Activites)"),d()(),c(45,"div",10)(46,"div",11)(47,"div",12)(48,"label"),h(49,"Task Name:"),d(),c(50,"input",37),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_calender_task.Cal_Task_name,r)||(a.get_calender_task.Cal_Task_name=r),q(r)}),d()(),c(51,"div",12)(52,"label"),h(53,"Task Quantity:"),d(),c(54,"input",14),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_calender_task.Cal_actual_quantity,r)||(a.get_calender_task.Cal_actual_quantity=r),q(r)}),d()()(),c(55,"div",11)(56,"div",12)(57,"label"),h(58,"Cost:"),d(),c(59,"input",15),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_calender_task.Cal_actual_cost,r)||(a.get_calender_task.Cal_actual_cost=r),q(r)}),d()(),c(60,"div",12)(61,"label"),h(62,"Start Date:"),d(),c(63,"input",17),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_calender_task.Cal_actual_start_date,r)||(a.get_calender_task.Cal_actual_start_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.End_Date_Limit_calender())}),d()()(),c(64,"div",11)(65,"div",12)(66,"label"),h(67,"End Date "),c(68,"span",18),h(69,"(End date cannot be before start date)"),d(),h(70," :"),d(),c(71,"input",19),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_calender_task.Cal_actual_end_date,r)||(a.get_calender_task.Cal_actual_end_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.calculate_No_Days_calender())}),d()(),c(72,"div",12)(73,"label"),h(74,"Frequency:"),d(),c(75,"input",38),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_calender_task.Cal_actual_Frequency,r)||(a.get_calender_task.Cal_actual_Frequency=r),q(r)}),d()()(),c(76,"div",11)(77,"div",12)(78,"label"),h(79,"Status:"),d(),c(80,"select",21),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_calender_task.Cal_status,r)||(a.get_calender_task.Cal_status=r),q(r)}),c(81,"option",22),h(82,"Select Status"),d(),c(83,"option",23),h(84,"Completed"),d(),c(85,"option",24),h(86,"On Going"),d(),c(87,"option",25),h(88,"Pending"),d()()(),c(89,"div",12)(90,"label",39),h(91,"Select Mode"),d(),c(92,"select",40),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Cal_actual_mode,r)||(a.Cal_actual_mode=r),q(r)}),c(93,"option",22),h(94,"Select a Mode"),d(),c(95,"option"),h(96,"Online"),d(),c(97,"option"),h(98,"Offline"),d()()()(),c(99,"button",26),lt("click",function(){G(t);let r=k();return q(r.update_marketing_task())}),h(100,"Create"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(25),A(t.getcalendertask.Cal_Task_name),_(2),A(t.getcalendertask.Cal_goal_quantity),_(2),A(t.getcalendertask.Cal_goal_cost),_(2),A(At(33,18,t.getcalendertask.Cal_goal_start_date,"dd MMM yy")),_(3),A(At(36,21,t.getcalendertask.Cal_goal_end_date,"dd MMM yy")),_(3),A(t.getcalendertask.Cal_goal_Frequency),_(2),A(t.getcalendertask.Cal_goal_mode),_(10),gt("ngModel",t.get_calender_task.Cal_Task_name),_(4),gt("ngModel",t.get_calender_task.Cal_actual_quantity),_(5),gt("ngModel",t.get_calender_task.Cal_actual_cost),_(4),gt("ngModel",t.get_calender_task.Cal_actual_start_date),_(8),gt("ngModel",t.get_calender_task.Cal_actual_end_date),D("min",t.minEndDate),_(4),gt("ngModel",t.get_calender_task.Cal_actual_Frequency),_(5),gt("ngModel",t.get_calender_task.Cal_status),D("value",t.get_calender_task.Cal_status),_(12),gt("ngModel",t.Cal_actual_mode)}}function w7(n,e){if(n&1){let t=Nt();c(0,"div",27)(1,"div",28)(2,"strong"),h(3,"Success!"),d(),h(4," Updated Successfully. "),c(5,"button",29),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function C7(n,e){if(n&1){let t=Nt();c(0,"div",30),rt(1,w7,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Engagement Analyzing Tracker (Engagement for Online Activites)"),d()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Source:"),d(),c(11,"input",41),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_engagement_task.Eng_Task_name,r)||(a.get_engagement_task.Eng_Task_name=r),q(r)}),d()(),c(12,"div",12)(13,"label"),h(14,"Likes:"),d(),c(15,"input",42),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_engagement_task.Eng_actual_like,r)||(a.get_engagement_task.Eng_actual_like=r),q(r)}),d()()(),c(16,"div",11)(17,"div",12)(18,"label"),h(19,"Followers"),d(),c(20,"input",43),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_engagement_task.Eng_actual_followers,r)||(a.get_engagement_task.Eng_actual_followers=r),q(r)}),d()(),c(21,"div",12)(22,"label"),h(23,"Views\\Reach"),d(),c(24,"input",43),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_engagement_task.Eng_actual_Views,r)||(a.get_engagement_task.Eng_actual_Views=r),q(r)}),d()()(),c(25,"div",11)(26,"div",12)(27,"label"),h(28,"Start Date:"),d(),c(29,"input",17),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_engagement_task.Eng_actual_start_date,r)||(a.get_engagement_task.Eng_actual_start_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.End_Date_Limit_engagement())}),d()(),c(30,"div",12)(31,"label"),h(32,"End Date "),c(33,"span",18),h(34,"(End date cannot be before start date)"),d(),h(35," :"),d(),c(36,"input",19),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_engagement_task.Eng_actual_end_date,r)||(a.get_engagement_task.Eng_actual_end_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.calculate_No_Days_engagement())}),d()(),c(37,"div",44)(38,"div",12)(39,"label"),h(40,"Number of Days:"),d(),c(41,"input",45),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_engagement_task.Eng_actual_no_of_days,r)||(a.get_engagement_task.Eng_actual_no_of_days=r),q(r)}),d()(),c(42,"div",12)(43,"label"),h(44,"Status:"),d(),c(45,"select",46),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_engagement_task.Eng_status,r)||(a.get_engagement_task.Eng_status=r),q(r)}),c(46,"option",22),h(47,"Select Status"),d(),c(48,"option"),h(49,"Completed"),d(),c(50,"option"),h(51,"Pending"),d(),c(52,"option"),h(53,"On Going"),d()()()()(),c(54,"button",26),lt("click",function(){G(t);let r=k();return q(r.update_Engagement())}),h(55,"Add"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.get_engagement_task.Eng_Task_name),_(4),gt("ngModel",t.get_engagement_task.Eng_actual_like),_(5),gt("ngModel",t.get_engagement_task.Eng_actual_followers),_(4),gt("ngModel",t.get_engagement_task.Eng_actual_Views),_(5),gt("ngModel",t.get_engagement_task.Eng_actual_start_date),_(7),gt("ngModel",t.get_engagement_task.Eng_actual_end_date),D("min",t.minEndDate),_(5),gt("ngModel",t.get_engagement_task.Eng_actual_no_of_days),_(4),gt("ngModel",t.get_engagement_task.Eng_status)}}function M7(n,e){if(n&1){let t=Nt();c(0,"div",27)(1,"div",28)(2,"strong"),h(3,"Success!"),d(),h(4," Updated Successfully. "),c(5,"button",29),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function E7(n,e){if(n&1){let t=Nt();c(0,"div",30),rt(1,M7,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Results - Total Leads"),d()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Source:"),d(),c(11,"input",47),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_total_leads.Tol_Task_Name,r)||(a.get_total_leads.Tol_Task_Name=r),q(r)}),d()(),c(12,"div",12)(13,"label"),h(14,"Actual:"),d(),c(15,"input",48),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_total_leads.Tol_actual,r)||(a.get_total_leads.Tol_actual=r),q(r)}),d()()(),c(16,"div",11)(17,"div",12)(18,"label"),h(19,"Lead Date:"),d(),c(20,"input",49),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_total_leads.Tol_actual_date,r)||(a.get_total_leads.Tol_actual_date=r),q(r)}),d()()(),c(21,"button",26),lt("click",function(){G(t);let r=k();return q(r.update_total_lead())}),h(22,"Add"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.get_total_leads.Tol_Task_Name),_(4),gt("ngModel",t.get_total_leads.Tol_actual),_(5),gt("ngModel",t.get_total_leads.Tol_actual_date)}}function A7(n,e){if(n&1){let t=Nt();c(0,"div",27)(1,"div",28)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",29),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function T7(n,e){if(n&1){let t=Nt();c(0,"div",30),rt(1,A7,7,0,"div",7),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Task Progress"),d()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Description:"),d(),c(11,"input",50),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_Miscellaneous_Works.Mls_description,r)||(a.get_Miscellaneous_Works.Mls_description=r),q(r)}),d()(),c(12,"div",12)(13,"label"),h(14,"Start Date:"),d(),c(15,"input",17),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_Miscellaneous_Works.Mls_actual_start_date,r)||(a.get_Miscellaneous_Works.Mls_actual_start_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.End_Date_Limit_Miscellaneous())}),d()()(),c(16,"div",11)(17,"div",12)(18,"label"),h(19,"End Date "),c(20,"span",18),h(21,"(End date cannot be before start date)"),d(),h(22," :"),d(),c(23,"input",19),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_Miscellaneous_Works.Mls_actual_end_date,r)||(a.get_Miscellaneous_Works.Mls_actual_end_date=r),q(r)}),lt("change",function(){G(t);let r=k();return q(r.calculate_No_Days_Miscellaneous())}),d()(),c(24,"div",12)(25,"label"),h(26,"Number of Days:"),d(),c(27,"input",51),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_Miscellaneous_Works.Mls_actual_no_of_days,r)||(a.get_Miscellaneous_Works.Mls_actual_no_of_days=r),q(r)}),d()()(),c(28,"div",11)(29,"div",12)(30,"label"),h(31,"Status:"),d(),c(32,"select",21),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_Miscellaneous_Works.Mls_status,r)||(a.get_Miscellaneous_Works.Mls_status=r),q(r)}),c(33,"option",22),h(34,"Select Status"),d(),c(35,"option",23),h(36,"Completed"),d(),c(37,"option",52),h(38,"Going On"),d(),c(39,"option",25),h(40,"Pending"),d()()()(),c(41,"button",26),lt("click",function(){G(t);let r=k();return q(r.update_miscellanous())}),h(42,"Create"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.get_Miscellaneous_Works.Mls_description),_(4),gt("ngModel",t.get_Miscellaneous_Works.Mls_actual_start_date),_(8),gt("ngModel",t.get_Miscellaneous_Works.Mls_actual_end_date),D("min",t.minEndDate),_(4),gt("ngModel",t.get_Miscellaneous_Works.Mls_actual_no_of_days),_(5),gt("ngModel",t.get_Miscellaneous_Works.Mls_status),D("value",t.get_Miscellaneous_Works.Mls_status)}}var yg=class n{constructor(e,t,i,r,a){this.route=e;this.apiService=t;this.http=i;this.router=r;this.userService=a}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}update_actual_task=null;update_url_id=null;project_url_id=null;ngOnInit(){this.get_data(),this.route.params.subscribe(e=>{this.update_actual_task=e.updateactual,this.update_url_id=e.id,this.project_url_id=e.projectid}),this.apifromservice(),this.get_content_task(),this.get_collateral_task(),this.get_marketing_calender(),this.getmarketingcalender(),this.get_engagement_api(),this.get_total_leads_api(),this.get_Miscellaneous_Works_api()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}update_content_tracker="";update_Collateral_tracker="";update_marketing_calender="";update_engagement_analyzing="";update_total_lead_url="";update_Miscellaneous_Works_url="";apifromservice(){this.update_content_tracker=this.apiService.marketing_content_tracker_api(),this.update_Collateral_tracker=this.apiService.Collateraltrackerapi(),this.update_marketing_calender=this.apiService.marketingcalenderapi(),this.update_engagement_analyzing=this.apiService.engagementanalyzingapi(),this.update_total_lead_url=this.apiService.marketingtotalleadapi(),this.update_Miscellaneous_Works_url=this.apiService.marketingmiscellaneousapi()}get_content;get_content_task(){this.http.get(this.update_content_tracker+this.update_url_id).subscribe(e=>{this.get_content=e},e=>{console.error("Error fetching items",e)})}cont_Task_name="";cont_actual_quality;cont_actual_quantity;cont_assigned_by="yoganandhan";cont_assigned_to=null;cont_status=null;successmgs=!1;update_content_task(){let e=`${this.update_content_tracker}${this.update_url_id}`,t={cont_Task_name:this.get_content.cont_Task_name,cont_actual_start_date:this.get_content.cont_actual_start_date,cont_actual_end_date:this.get_content.cont_actual_end_date,cont_actual_no_of_days:this.get_content.cont_actual_no_of_days,cont_actual_quality:this.get_content.cont_actual_quality,cont_actual_quantity:this.get_content.cont_actual_quantity,cont_assigned_by:this.get_content.cont_assigned_by,cont_assigned_to:this.get_content.cont_assigned_to,cont_status:this.get_content.cont_status,Model_name:this.update_actual_task,Project_id:this.get_content.Project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.put(e,t,i).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Content Tracker"),this.router.navigate(["/Actual-task",this.get_content.Project_id])},1e3)},r=>{console.log("Post request failed",r)})}get_collateral;get_collateral_task(){this.http.get(this.update_Collateral_tracker+this.update_url_id).subscribe(e=>{this.get_collateral=e},e=>{console.error("Error fetching items",e)})}col_Task_name="";col_actual_quality;col_actual_quantity;col_assigned_by="yoganandhan";col_assigned_to=null;Col_status="";update_collateral_task(){let e=this.update_Collateral_tracker+this.update_url_id,t={Col_Task_name:this.get_collateral.Col_Task_name,Col_actual_start_date:this.get_collateral.Col_actual_start_date,Col_actual_end_date:this.get_collateral.Col_actual_end_date,Col_actual_no_of_days:this.get_collateral.Col_actual_no_of_days,Col_actual_quality:this.get_collateral.Col_actual_quality,Col_actual_quantity:this.get_collateral.Col_actual_quantity,Col_actual_cost:this.get_collateral.Col_actual_cost,Col_assigned_by:this.get_collateral.Col_assigned_by,Col_assigned_to:this.get_collateral.Col_assigned_to,Col_status:this.get_collateral.Col_status,Model_name:this.get_collateral.Model_name,Project_id:this.get_collateral.Project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.put(e,t,i).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Collateral Tracker"),this.router.navigate(["/Actual-task",this.get_collateral.Project_id])},1e3)},r=>{console.log("Post request failed",r)})}get_calender_task;get_marketing_calender(){this.http.get(this.update_marketing_calender+this.update_url_id).subscribe(e=>{this.get_calender_task=e},e=>{console.error("Error fetching items",e)})}getcalendertask;getmarketingcalender(){this.http.get(this.update_marketing_calender+this.update_url_id).subscribe(e=>{this.getcalendertask=e},e=>{console.error("Error fetching items",e)})}cal_Task_name="";Cal_actual_mode=null;cal_actual_quantity;cal_actual_cost;Cal_actual_Frequency=null;cal_assigned_by="yoganandhan";cal_assigned_to=null;update_marketing_task(){let e=this.update_marketing_calender+this.update_url_id,t={Cal_Task_name:this.get_calender_task.Cal_Task_name,Cal_actual_start_date:this.get_calender_task.Cal_actual_start_date,Cal_actual_end_date:this.get_calender_task.Cal_actual_end_date,Cal_actual_Frequency:this.get_calender_task.Cal_actual_Frequency,Cal_actual_cost:this.get_calender_task.Cal_actual_cost,Cal_actual_quantity:this.get_calender_task.Cal_actual_quantity,Cal_assigned_by:this.get_calender_task.Cal_assigned_by,Cal_assigned_to:this.get_calender_task.Cal_assigned_to,Cal_actual_mode:this.Cal_actual_mode,Cal_status:this.get_calender_task.Cal_status,Model_name:this.get_calender_task.Model_name,Project_id:this.get_calender_task.Project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.put(e,t,i).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Marketing Calender"),this.router.navigate(["/Actual-task",this.get_calender_task.Project_id])},1e3)},r=>{console.log("Post request failed",r)})}get_engagement_task;get_engagement_api(){this.http.get(this.update_engagement_analyzing+this.update_url_id).subscribe(e=>{this.get_engagement_task=e},e=>{console.error("Error fetching items",e)})}eng_Task_name=null;eng_actual_like=null;eng_actual_followers=null;update_Engagement(){let e=this.update_engagement_analyzing+this.update_url_id,t={Eng_Task_name:this.get_engagement_task.Eng_Task_name,Eng_actual_like:this.get_engagement_task.Eng_actual_like,Eng_actual_followers:this.get_engagement_task.Eng_actual_followers,Eng_actual_Views:this.get_engagement_task.Eng_actual_Views,Eng_actual_start_date:this.get_engagement_task.Eng_actual_start_date,Eng_actual_end_date:this.get_engagement_task.Eng_actual_end_date,Eng_actual_no_of_days:this.get_engagement_task.Eng_actual_no_of_days,Eng_status:this.get_engagement_task.Eng_status,Model_name:this.get_engagement_task.Model_name,Project_id:this.get_engagement_task.Project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.put(e,t,i).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Engagement Analyzing"),this.router.navigate(["/Actual-task",this.get_engagement_task.Project_id])},1e3)},r=>{console.log("Post request failed",r)})}get_total_leads;get_total_leads_api(){this.http.get(this.update_total_lead_url+this.update_url_id).subscribe(e=>{this.get_total_leads=e},e=>{console.error("Error fetching items",e)})}update_total_lead(){let e=this.update_total_lead_url+this.update_url_id,t={Tol_Task_Name:this.get_total_leads.Tol_Task_Name,Tol_actual:this.get_total_leads.Tol_actual,Tol_actual_date:this.get_total_leads.Tol_actual_date,Model_name:this.get_total_leads.Model_name,Project_id:this.get_total_leads.Project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.put(e,t,i).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Total leads"),this.router.navigate(["/Actual-task",this.get_total_leads.Project_id])},1e3)},r=>{console.log("Post request failed",r)})}get_Miscellaneous_Works;get_Miscellaneous_Works_api(){this.http.get(this.update_Miscellaneous_Works_url+this.update_url_id).subscribe(e=>{this.get_Miscellaneous_Works=e},e=>{console.error("Error fetching items",e)})}update_miscellanous(){let e=this.update_Miscellaneous_Works_url+this.update_url_id,t={Mls_description:this.get_Miscellaneous_Works.Mls_description,Mls_actual_start_date:this.get_Miscellaneous_Works.Mls_actual_start_date,Mls_actual_end_date:this.get_Miscellaneous_Works.Mls_actual_end_date,Mls_actual_no_of_days:this.get_Miscellaneous_Works.Mls_actual_no_of_days,Mls_status:this.get_Miscellaneous_Works.Mls_status,Model_name:"Task Progress",Project_id:this.get_Miscellaneous_Works.Project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.put(e,t,i).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Task Progress"),this.router.navigate(["/Actual-task",this.get_Miscellaneous_Works.Project_id])},1e3)},r=>{console.log("Post request failed",r)})}actual_start_date=null;actual_end_date=null;minEndDate=null;actual_no_of_days=null;updateEndDateLimit(){this.get_content.cont_actual_start_date&&(this.minEndDate=this.get_content.cont_actual_start_date,this.calculate_No_Days())}calculate_No_Days(){if(this.get_content.cont_actual_start_date&&this.get_content.cont_actual_end_date){let e=new Date(this.get_content.cont_actual_start_date),i=new Date(this.get_content.cont_actual_end_date).getTime()-e.getTime(),r=i>=0?Math.ceil(i/(1e3*3600*24))+1:0;r===1?this.get_content.cont_actual_no_of_days=`${r} day`:this.get_content.cont_actual_no_of_days=`${r} days`}else this.get_content.cont_actual_no_of_days="0 day"}End_Date_Limit_collateral(){this.get_collateral.Col_actual_start_date&&(this.minEndDate=this.get_collateral.Col_actual_start_date,this.calculate_No_Days())}calculate_No_Days_collateral(){if(this.get_collateral.Col_actual_start_date&&this.get_collateral.Col_actual_end_date){let e=new Date(this.get_collateral.Col_actual_start_date),i=new Date(this.get_collateral.Col_actual_end_date).getTime()-e.getTime(),r=i>=0?Math.ceil(i/(1e3*3600*24))+1:0;r===1?this.get_collateral.Col_actual_no_of_days=`${r} day`:this.get_collateral.Col_actual_no_of_days=`${r} days`}else this.get_collateral.Col_actual_no_of_days="0 day"}End_Date_Limit_calender(){this.get_calender_task.Cal_actual_start_date&&(this.minEndDate=this.get_calender_task.Cal_actual_start_date,this.calculate_No_Days())}calculate_No_Days_calender(){if(this.get_calender_task.Cal_actual_start_date&&this.get_collateral.Col_actual_end_date){let e=new Date(this.get_calender_task.Cal_actual_start_date),i=new Date(this.get_collateral.Col_actual_end_date).getTime()-e.getTime(),r=i>=0?Math.ceil(i/(1e3*3600*24))+1:0;r===1?this.get_collateral.Col_actual_no_of_days=`${r} day`:this.get_collateral.Col_actual_no_of_days=`${r} days`}else this.get_collateral.Col_actual_no_of_days="0 day"}End_Date_Limit_engagement(){this.get_engagement_task.Eng_actual_start_date&&(this.minEndDate=this.get_calender_task.Cal_actual_start_date,this.calculate_No_Days())}calculate_No_Days_engagement(){if(this.get_engagement_task.Eng_actual_start_date&&this.get_engagement_task.Eng_actual_end_date){let e=new Date(this.get_engagement_task.Eng_actual_start_date),i=new Date(this.get_engagement_task.Eng_actual_end_date).getTime()-e.getTime(),r=i>=0?Math.ceil(i/(1e3*3600*24))+1:0;r===1?this.get_engagement_task.Eng_actual_no_of_days=`${r} day`:this.get_engagement_task.Eng_actual_no_of_days=`${r} days`}else this.get_engagement_task.Eng_actual_no_of_days="0 day"}End_Date_Limit_Miscellaneous(){this.get_Miscellaneous_Works.Mls_actual_start_date&&(this.minEndDate=this.get_Miscellaneous_Works.Mls_actual_start_date,this.calculate_No_Days())}calculate_No_Days_Miscellaneous(){if(this.get_Miscellaneous_Works.Mls_actual_start_date&&this.get_Miscellaneous_Works.Mls_actual_end_date){let e=new Date(this.get_Miscellaneous_Works.Mls_actual_start_date),i=new Date(this.get_Miscellaneous_Works.Mls_actual_end_date).getTime()-e.getTime(),r=i>=0?Math.ceil(i/(1e3*3600*24))+1:0;r===1?this.get_Miscellaneous_Works.Mls_actual_no_of_days=`${r} day`:this.get_Miscellaneous_Works.Mls_actual_no_of_days=`${r} days`}else this.get_Miscellaneous_Works.Mls_actual_no_of_days="0 day"}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(sn),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-marketing-add-actuals"]],decls:10,vars:10,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container",2,"margin-top","5%","margin-bottom","5%"],["class","container mb-3 card-margin",4,"ngIf"],["class","container card-margin",4,"ngIf"],[1,"container","mb-3","card-margin"],["class","alert-card fade-in",4,"ngIf"],[1,"card","shadow"],[1,"heading-card"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-6"],["readonly","","type","text","placeholder","Enter quantity",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter quantity",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter quality",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter Cost","name","startDate",1,"custom-input",3,"ngModelChange","change","ngModel"],["type","date","name","startDate",1,"custom-input",3,"ngModelChange","change","ngModel"],[2,"font-size","10px","color","red"],["type","date","name","endDate",1,"custom-input",3,"ngModelChange","change","ngModel","min"],["type","text","name","numberOfDaysText","readonly","",1,"custom-input",3,"ngModelChange","ngModel"],["name","","id","",1,"custom-input",3,"ngModelChange","ngModel","value"],["value",""],["value","Completed"],["value","On Going"],["value","Pending"],[1,"submit-btn",3,"click"],[1,"alert-card","fade-in"],[1,"alert-content"],[1,"close-btn",3,"click"],[1,"container","card-margin"],["type","text","readonly","","placeholder","Enter quantity",1,"custom-input",3,"ngModelChange","value","ngModel"],["type","number",1,"custom-input",3,"ngModelChange","ngModel"],[1,"table-responsive"],[1,"table","table-bordered","table-striped"],[1,"table-header"],["colspan","7"],["type","text","readonly","","placeholder","Enter quantity",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter number of dates",1,"custom-input",3,"ngModelChange","ngModel"],["for","modeSelect"],["id","modeSelect",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","readonly","","placeholder","Source",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter likes",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter followers",1,"custom-input",3,"ngModelChange","ngModel"],[1,"row","mt-3","mb-3"],["type","text","placeholder","Number of Days","name","numberOfDaysText","readonly","",1,"custom-input",3,"ngModelChange","ngModel"],["name","","id","",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","text","readonly","","placeholder","Enter Source",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","number","placeholder","Enter Actual",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","date","placeholder","Enter Task",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter Description",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Number of Days",1,"custom-input",3,"ngModelChange","ngModel"],["value","Going On"]],template:function(t,i){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3),rt(4,v7,56,11,"div",4)(5,b7,57,12,"div",5)(6,S7,101,24,"div",5)(7,C7,56,10,"div",5)(8,E7,23,4,"div",5)(9,T7,43,8,"div",5),d()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(8,g7,!i.isSidebarOpen)),_(2),D("ngIf",i.update_actual_task==="Content Tracker"),_(),D("ngIf",i.update_actual_task==="Collateral Tracker"),_(),D("ngIf",i.update_actual_task==="Marketing Calender"),_(),D("ngIf",i.update_actual_task==="Engagement Analyzing"),_(),D("ngIf",i.update_actual_task==="Total leads"),_(),D("ngIf",i.update_actual_task==="Task Progress"))},dependencies:[Ke,mi,xn,bn,ln,_o,cn,Ki,gs,Gi,ei,ii,Vr],styles:[".card-margin[_ngcontent-%COMP%]{margin-top:3%}.custom-input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:5px;font-size:16px;transition:border-color .3s ease}.custom-input[_ngcontent-%COMP%]:focus{border-color:#5e1080;outline:none;box-shadow:0 0 5px #5d1285ad}.custom-label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px;display:block}label[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-family:Poppins,sans-serif;margin:30px 0;background:linear-gradient(to bottom,#fff,#f0f0f5);box-shadow:0 4px 12px #0000001a;border-radius:8px;overflow:hidden}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5945c;color:#000;font-size:20px;text-transform:uppercase;padding:16px;border:1px solid;letter-spacing:1px;text-align:center}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{font-size:24px;background:#741b48;color:#fff;border-bottom:2px solid white}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease;font-size:16px;border:1px solid}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f0f0f5}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#a29bfe;color:#fff;box-shadow:0 6px 15px #0000001a;transform:scale(1.01)}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px;text-align:center;color:#333;border:none;border:1px solid;table-layout:fixed}i[_ngcontent-%COMP%]{color:gray;font-size:18px;transition:color .3s ease,transform .3s ease;margin-left:45%;cursor:pointer}i.far.fa-edit[_ngcontent-%COMP%]:hover{color:#741b48;transform:scale(1.2);cursor:pointer}.card-margin[_ngcontent-%COMP%]{margin-top:4%}.select-mt[_ngcontent-%COMP%]{margin-top:5%}"]})};var k7=n=>({"full-width":n}),I7=n=>({"active-module":n}),D7=n=>["/Update-actual","Content Tracker",n],P7=n=>["/Update-actual","Collateral Tracker",n],L7=n=>["/Update-actual","Marketing Calender",n],R7=n=>["/Update-actual","Engagement Analyzing",n],O7=n=>["/Update-actual","Task Progress",n],N7=n=>["/add-task","DataBase Tracker",n],F7=(n,e)=>({"green-text":n,"red-text":e});function B7(n,e){if(n&1&&(c(0,"option",17),h(1),d()),n&2){let t=e.$implicit;D("value",t),_(),A(t)}}function V7(n,e){if(n&1){let t=Nt();c(0,"li",18),lt("click",function(){let r=G(t).$implicit,a=k();return q(a.selectModule(r))}),h(1),d()}if(n&2){let t=e.$implicit,i=k();D("ngClass",te(2,I7,t===i.selectedModule)),_(),de(" ",t," ")}}function U7(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",27),h(3),d(),c(4,"td",27),h(5),d(),c(6,"td",28),h(7),d(),c(8,"td",28),h(9),d(),c(10,"td",28),h(11),Et(12,"date"),d(),c(13,"td",28),h(14),Et(15,"date"),d(),c(16,"td",28),h(17),d(),c(18,"td",29),Lt(19,"i",30),d()(),c(20,"tr")(21,"td",31),h(22),d(),c(23,"td",31),h(24),d(),c(25,"td",31),h(26),Et(27,"date"),d(),c(28,"td",31),h(29),Et(30,"date"),d(),c(31,"td",31),h(32),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.cont_Task_name),_(2),A(t.cont_goal_quantity),_(2),A(t.cont_goal_quality),_(2),A(At(12,13,t.cont_goal_start_date,"d MMM")),_(3),A(At(15,16,t.cont_goal_end_date,"d MMM")),_(3),A(t.cont_goal_no_of_days),_(),D("routerLink",te(25,D7,t.content_tracker_id)),_(4),A(t.cont_actual_quantity),_(2),A(t.cont_actual_quality),_(2),A(At(27,19,t.cont_actual_start_date,"d MMM")),_(3),A(At(30,22,t.cont_actual_end_date,"d MMM")),_(3),A(t.cont_actual_no_of_days)}}function z7(n,e){if(n&1&&(pe(0),rt(1,U7,33,27,"ng-container",26),fe()),n&2){let t=k(2);_(),D("ngForOf",t.get_content)}}function H7(n,e){n&1&&(c(0,"tr")(1,"td",32),h(2,"No task found"),d()())}function W7(n,e){if(n&1&&(c(0,"div",19)(1,"div",20)(2,"table",21)(3,"thead")(4,"tr")(5,"th",22),h(6,"Content Tracker (Content Creations)"),d()(),c(7,"tr",23)(8,"th"),h(9,"S.No"),d(),c(10,"th"),h(11,"Tasks"),d(),c(12,"th",24),h(13,"Quantity"),d(),c(14,"th",24),h(15,"Quality"),d(),c(16,"th",24),h(17,"Start Date"),d(),c(18,"th",24),h(19,"End Date"),d(),c(20,"th",24),h(21,"No of Days"),d(),c(22,"th"),h(23,"Update Actual"),d()()(),c(24,"tbody"),rt(25,z7,2,1,"ng-container",25),d(),rt(26,H7,3,0,"ng-template",null,0,Ie),d()()()),n&2){let t=Qe(27),i=k();_(25),D("ngIf",i.get_content&&i.get_content.length>0)("ngIfElse",t)}}function j7(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",27),h(3),d(),c(4,"td",27),h(5),d(),c(6,"td",28),h(7),d(),c(8,"td",28),h(9),d(),c(10,"td",28),h(11),d(),c(12,"td",28),h(13),Et(14,"date"),d(),c(15,"td",28),h(16),Et(17,"date"),d(),c(18,"td",28),h(19),d(),c(20,"td",29),Lt(21,"i",30),d()(),c(22,"tr")(23,"td",31),h(24),d(),c(25,"td",31),h(26),d(),c(27,"td",31),h(28),d(),c(29,"td",31),h(30),Et(31,"date"),d(),c(32,"td",31),h(33),Et(34,"date"),d(),c(35,"td",31),h(36),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Col_Task_name),_(2),A(t.Col_goal_quantity),_(2),A(t.Col_goal_quality),_(2),A(t.Col_goal_cost),_(2),A(At(14,15,t.Col_goal_start_date,"d MMM")),_(3),A(At(17,18,t.Col_goal_end_date,"d MMM")),_(3),A(t.Col_goal_no_of_days),_(),D("routerLink",te(27,P7,t.Collateral_tracker_id)),_(4),A(t.Col_actual_quantity),_(2),A(t.Col_actual_quality),_(2),A(t.Col_actual_cost),_(2),A(At(31,21,t.Col_actual_start_date,"d MMM")),_(3),A(At(34,24,t.Col_actual_end_date,"d MMM")),_(3),A(t.Col_actual_no_of_days)}}function G7(n,e){if(n&1&&(pe(0),rt(1,j7,37,29,"ng-container",26),fe()),n&2){let t=k(2);_(),D("ngForOf",t.get_collateral)}}function q7(n,e){n&1&&(c(0,"tr")(1,"td",32),h(2,"No task found"),d()())}function X7(n,e){if(n&1&&(c(0,"div",19)(1,"div",20)(2,"table",21)(3,"thead")(4,"tr")(5,"th",22),h(6,"Collateral Tracker (Collateral Designs & Video Making)"),d()(),c(7,"tr",23)(8,"th"),h(9,"S.No"),d(),c(10,"th"),h(11,"Tasks"),d(),c(12,"th",24),h(13,"Quantity"),d(),c(14,"th",24),h(15,"Quality"),d(),c(16,"th",24),h(17,"Cost"),d(),c(18,"th",24),h(19,"Start Date"),d(),c(20,"th",24),h(21,"End Date"),d(),c(22,"th",24),h(23,"No of Days"),d(),c(24,"th"),h(25,"Update Actual"),d()()(),c(26,"tbody"),rt(27,G7,2,1,"ng-container",25),d(),rt(28,q7,3,0,"ng-template",null,0,Ie),d()()()),n&2){let t=Qe(29),i=k();_(27),D("ngIf",i.get_collateral&&i.get_collateral.length>0)("ngIfElse",t)}}function Y7(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",27),h(3),d(),c(4,"td",27),h(5),d(),c(6,"td",28),h(7),d(),c(8,"td",28),h(9),d(),c(10,"td",28),h(11),Et(12,"date"),d(),c(13,"td",28),h(14),Et(15,"date"),d(),c(16,"td",28),h(17),d(),c(18,"td",29),Lt(19,"i",30),d()(),c(20,"tr")(21,"td",31),h(22),d(),c(23,"td",31),h(24),d(),c(25,"td",31),h(26),Et(27,"date"),d(),c(28,"td",31),h(29),Et(30,"date"),d(),c(31,"td",31),h(32),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Cal_Task_name),_(2),A(t.Cal_goal_quantity),_(2),A(t.Cal_goal_cost),_(2),A(At(12,13,t.Cal_goal_start_date,"d MMM")),_(3),A(At(15,16,t.Cal_goal_end_date,"d MMM")),_(3),A(t.Cal_goal_Frequency),_(),D("routerLink",te(25,L7,t.Marketing_calender_id)),_(4),A(t.Cal_actual_quantity),_(2),A(t.Cal_actual_cost),_(2),A(At(27,19,t.Cal_actual_start_date,"d MMM")),_(3),A(At(30,22,t.Cal_actual_end_date,"d MMM")),_(3),A(t.Cal_actual_Frequency)}}function $7(n,e){if(n&1&&(pe(0),rt(1,Y7,33,27,"ng-container",26),fe()),n&2){let t=k(2);_(),D("ngForOf",t.get_marketing_calender)}}function K7(n,e){if(n&1&&(c(0,"tbody")(1,"tr")(2,"td",34),h(3,"Total Cost"),d(),c(4,"td",35),h(5),d(),Lt(6,"td",36),d(),c(7,"tr")(8,"td",37),h(9),d()()()),n&2){let t=k(2);_(5),A(t.Total_Goal_Cost),_(4),A(t.Total_Actual_Cost)}}function Z7(n,e){n&1&&(c(0,"tr")(1,"td",32),h(2,"No task found"),d()())}function J7(n,e){if(n&1&&(c(0,"div",19)(1,"div",20)(2,"table",21)(3,"thead")(4,"tr")(5,"th",22),h(6,"Marketing Calender (Online & Offline Activites)"),d()(),c(7,"tr",23)(8,"th"),h(9,"S.No"),d(),c(10,"th"),h(11,"Tasks"),d(),c(12,"th",24),h(13,"Quantity"),d(),c(14,"th",24),h(15,"Cost"),d(),c(16,"th",24),h(17,"Start Date"),d(),c(18,"th",24),h(19,"End Date"),d(),c(20,"th",24),h(21,"Frequency"),d(),c(22,"th"),h(23,"Update Actual"),d()()(),c(24,"tbody"),rt(25,$7,2,1,"ng-container",25),d(),rt(26,K7,10,2,"tbody",33)(27,Z7,3,0,"ng-template",null,0,Ie),d()()()),n&2){let t=Qe(28),i=k();_(25),D("ngIf",i.get_marketing_calender&&i.get_marketing_calender.length>0)("ngIfElse",t),_(),D("ngIf",i.get_marketing_calender&&i.get_marketing_calender.length>0)}}function Q7(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",27),h(3),d(),c(4,"td",27),h(5),d(),c(6,"td",28),h(7),d(),c(8,"td",28),h(9),d(),c(10,"td",28),h(11),d(),c(12,"td",28),h(13),Et(14,"date"),d(),c(15,"td",28),h(16),Et(17,"date"),d(),c(18,"td",29),Lt(19,"i",30),d()(),c(20,"tr")(21,"td",31),h(22),d(),c(23,"td",31),h(24),d(),c(25,"td",31),h(26),d(),c(27,"td",31),h(28),Et(29,"date"),d(),c(30,"td",31),h(31),Et(32,"date"),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Eng_Task_name),_(2),A(t.Eng_goal_like),_(2),A(t.Eng_goal_followers),_(2),A(t.Eng_goal_Views),_(2),A(At(14,13,t.Eng_goal_start_date,"d MMM")),_(3),A(At(17,16,t.Eng_goal_end_date,"d MMM")),_(2),D("routerLink",te(25,R7,t.Engagement_tracking_id)),_(4),A(t.Eng_actual_like),_(2),A(t.Eng_actual_followers),_(2),A(t.Eng_actual_Views),_(2),A(At(29,19,t.Eng_actual_start_date,"d MMM")),_(3),A(At(32,22,t.Eng_actual_end_date,"d MMM"))}}function tU(n,e){if(n&1&&(pe(0),rt(1,Q7,33,27,"ng-container",26),fe()),n&2){let t=k(2);_(),D("ngForOf",t.get_engagement_analyzing)}}function eU(n,e){n&1&&(c(0,"tr")(1,"td",32),h(2,"No task found"),d()())}function iU(n,e){if(n&1&&(c(0,"div",19)(1,"div",20)(2,"table",21)(3,"thead")(4,"tr")(5,"th",22),h(6,"Engagement Analyzing Tracker (Engagement for Online Activites)"),d()(),c(7,"tr",23)(8,"th"),h(9,"S.No"),d(),c(10,"th"),h(11,"Tasks"),d(),c(12,"th",24),h(13,"Likes"),d(),c(14,"th",24),h(15,"Followers"),d(),c(16,"th",24),h(17,"Views\\Reach"),d(),c(18,"th",24),h(19,"Start Date"),d(),c(20,"th",24),h(21,"End Date"),d(),c(22,"th"),h(23,"Update Actual"),d()()(),c(24,"tbody"),rt(25,tU,2,1,"ng-container",25),d(),rt(26,eU,3,0,"ng-template",null,0,Ie),d()()()),n&2){let t=Qe(27),i=k();_(25),D("ngIf",i.get_engagement_analyzing&&i.get_engagement_analyzing.length>0)("ngIfElse",t)}}function nU(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",27),h(3),d(),c(4,"td",27),h(5),d(),c(6,"td",28),h(7),Et(8,"date"),d(),c(9,"td",28),h(10),Et(11,"date"),d(),c(12,"td",28),h(13),d(),c(14,"td",29),Lt(15,"i",30),d()(),c(16,"tr")(17,"td",31),h(18),Et(19,"date"),d(),c(20,"td",31),h(21),Et(22,"date"),d(),c(23,"td",31),h(24),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Mls_description),_(2),A(At(8,9,t.Mls_goal_start_date,"d MMM")),_(3),A(At(11,12,t.Mls_goal_end_date,"d MMM")),_(3),A(t.Mls_goal_no_of_days),_(),D("routerLink",te(21,O7,t.Miscellaneous_id)),_(4),A(At(19,15,t.Mls_actual_start_date,"d MMM")),_(3),A(At(22,18,t.Mls_actual_end_date,"d MMM")),_(3),A(t.Mls_actual_no_of_days)}}function rU(n,e){if(n&1&&(pe(0),rt(1,nU,25,23,"ng-container",26),fe()),n&2){let t=k(2);_(),D("ngForOf",t.get_Miscellaneous_Works)}}function aU(n,e){n&1&&(c(0,"tr")(1,"td",32),h(2,"No task found"),d()())}function sU(n,e){if(n&1&&(c(0,"div",19)(1,"div",20)(2,"table",21)(3,"thead")(4,"tr")(5,"th",38),h(6,"Task Progress"),d()(),c(7,"tr",23)(8,"th"),h(9,"S.No"),d(),c(10,"th"),h(11,"Tasks"),d(),c(12,"th",24),h(13,"Start Date"),d(),c(14,"th",24),h(15,"End Date"),d(),c(16,"th",24),h(17,"Number of Days"),d(),c(18,"th"),h(19,"Update Actual"),d()()(),c(20,"tbody"),rt(21,rU,2,1,"ng-container",25),d(),rt(22,aU,3,0,"ng-template",null,0,Ie),d()()()),n&2){let t=Qe(23),i=k();_(21),D("ngIf",i.get_Miscellaneous_Works&&i.get_Miscellaneous_Works.length>0)("ngIfElse",t)}}function oU(n,e){if(n&1&&(c(0,"tr",48)(1,"td",49),h(2),d(),c(3,"td",50),h(4),d(),Lt(5,"td",50),c(6,"td",50),h(7),d(),c(8,"td",49),h(9),d(),c(10,"td"),h(11),Et(12,"date"),d(),c(13,"td",51),h(14),d()()),n&2){let t=e.$implicit,i=e.index,r=k(3);_(2),A(i+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_dbtracker),$i),_(),A(t.Db_name_client),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_dbtracker),$i),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_dbtracker),$i),_(),A(t.Db_location),_(2),A(t.Db_source),_(2),A(At(12,10,t.Db_date,"d MMM yy")),_(2),D("ngClass",ms(13,F7,t.Db_status==="Connected",t.Db_status!=="Connected"||t.Db_status===null)),_(),de(" ",t.Db_status||"Not Connected"," ")}}function lU(n,e){if(n&1&&(pe(0),rt(1,oU,15,16,"tr",47),fe()),n&2){let t=k(2);_(),D("ngForOf",t.filtereddbtracker)}}function cU(n,e){n&1&&(c(0,"tr")(1,"td",32),h(2,"No Details found"),d()())}function dU(n,e){if(n&1){let t=Nt();c(0,"div",39)(1,"button",40),h(2,"Update Leads"),d(),c(3,"div")(4,"input",41),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.contactSearchTerm_dbtracker,r)||(a.contactSearchTerm_dbtracker=r),q(r)}),d()(),c(5,"div",42)(6,"table",43)(7,"thead",44)(8,"tr")(9,"th",45),h(10,"DataBase Tracker"),d()(),c(11,"tr")(12,"th",46),h(13,"S.No"),d(),c(14,"th",46),h(15,"Name"),d(),c(16,"th",46),h(17,"Contact"),d(),c(18,"th",46),h(19,"Location"),d(),c(20,"th",46),h(21,"Source"),d(),c(22,"th",46),h(23,"Date"),d(),c(24,"th",46),h(25,"Status"),d()()(),c(26,"tbody"),rt(27,lU,2,1,"ng-container",25)(28,cU,3,0,"ng-template",null,0,Ie),d()()()()}if(n&2){let t=Qe(29),i=k();_(),D("routerLink",te(4,N7,i.project_id)),_(3),gt("ngModel",i.contactSearchTerm_dbtracker),_(23),D("ngIf",i.filtereddbtracker&&i.filtereddbtracker.length>0)("ngIfElse",t)}}var Sg=class n{constructor(e,t,i,r,a){this.route=e;this.apiService=t;this.http=i;this.domSanitizer=r;this.userService=a}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}selectedModule="";modules=["Content Tracker","Collateral Tracker","Marketing Calender","Engagement Analyzing","Task Progress","DataBase Tracker"];selectModule(e){this.selectedModule=e}updateactualtask=null;project_id=null;ngOnInit(){this.get_data(),this.url_parameters(),this.delay_functions(),this.get_contenttask(),this.get_collateral_task(),this.get_marketing_calender_api(),this.get_engagement_analyzing_api(),this.get_Miscellaneous_Works_api(),this.get_total_leads_api()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}card_name="";retrive_data(){this.card_name=this.apiService.get_redirect_card(),this.selectedModule=this.card_name}url_parameters(){this.route.params.subscribe(e=>{this.project_id=parseInt(e.projectid),this.updateactualtask=e.cardName})}delay_functions(){setTimeout(()=>{this.get_dbtracker_api(),this.project_name(),this.retrive_data()},.1)}project_names="";project_name(){this.project_id==1?this.project_names="ANBU AVENUE":this.project_id==2?this.project_names="RVS AVENUE":this.project_id==3?this.project_names="AGASTHYA PRIME":this.project_id==4&&(this.project_names="AGASTHYA DEVELOPER")}get_content=[];get_contenttask(){this.http.get(this.apiService.marketing_content_tracker_api()).subscribe(e=>{let t=new Date().getMonth(),i=new Date().getFullYear(),r=t===0?11:t-1,a=t===0?i-1:i;this.get_content=e.filter(s=>{let o=new Date(s.cont_goal_start_date),l=o.getMonth(),u=o.getFullYear();return l===t&&u===i||l===r&&u===a&&s.cont_status!=="Completed"?s.Project_id===this.project_id:!1})},e=>{console.error("Error fetching items",e)})}get_collateral;get_collateral_task(){this.http.get(this.apiService.Collateraltrackerapi()).subscribe(e=>{let t=new Date().getMonth(),i=new Date().getFullYear(),r=t===0?11:t-1,a=t===0?i-1:i;this.get_collateral=e.filter(s=>{let o=new Date(s.Col_goal_start_date),l=o.getMonth(),u=o.getFullYear();return l===t&&u===i||l===r&&u===a&&s.Col_status!=="Completed"?s.Project_id===this.project_id:!1})},e=>{console.error("Error fetching items",e)})}get_marketing_calender;Total_Actual_Cost;Total_Goal_Cost;get_marketing_calender_api(){this.http.get(this.apiService.marketingcalenderapi()).subscribe(e=>{this.get_marketing_calender=e.filter(t=>t.Project_id===this.project_id),this.Total_Goal_Cost=this.get_marketing_calender.reduce((t,i)=>t+i.Cal_goal_cost,0),this.Total_Actual_Cost=this.get_marketing_calender.reduce((t,i)=>t+i.Cal_actual_cost,0)},e=>{console.error("Error fetching items",e)})}get_engagement_analyzing;get_engagement_analyzing_api(){this.http.get(this.apiService.engagementanalyzingapi()).subscribe(e=>{this.get_engagement_analyzing=e.filter(t=>t.Project_id===this.project_id)},e=>{console.error("Error fetching items",e)})}get_total_leads;totalActual;totalGoal;get_total_leads_api(){this.http.get(this.apiService.marketingtotalleadapi()).subscribe(e=>{this.get_total_leads=e.filter(t=>t.Project_id===this.project_id),this.totalGoal=this.get_total_leads.reduce((t,i)=>t+i.Tol_goal,0),this.totalActual=this.get_total_leads.reduce((t,i)=>t+i.Tol_actual,0)},e=>{console.error("Error fetching items",e)})}get_dbtracker_data=[];get_dbtracker_api(){this.http.get(this.apiService.sales_dbtracker_api()).subscribe(e=>{this.get_dbtracker_data=e.filter(t=>t.project_id===this.project_id)},e=>{console.error("Error fetching items",e)})}contactSearchTerm_dbtracker="";get filtereddbtracker(){let e=this.contactSearchTerm_dbtracker.toLowerCase();return this.get_dbtracker_data.filter(t=>t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e))}highlightMatch(e,t){if(!t)return e;let i=new RegExp(`(${t})`,"gi"),r=e.replace(i,'<span style="background-color: yellow;">$1</span>');return this.domSanitizer.bypassSecurityTrustHtml(r)}get_Miscellaneous_Works;get_Miscellaneous_Works_api(){this.http.get(this.apiService.marketingmiscellaneousapi()).subscribe(e=>{let t=new Date().getMonth(),i=new Date().getFullYear(),r=t===0?11:t-1,a=t===0?i-1:i;this.get_Miscellaneous_Works=e.filter(s=>{let o=new Date(s.Mls_goal_start_date),l=o.getMonth(),u=o.getFullYear();return l===t&&u===i||l===r&&u===a&&s.Mls_status!=="Completed"?s.Project_id===this.project_id:!1})},e=>{console.error("Error fetching items",e)})}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(kd),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-marketing-view-actuals"]],decls:24,vars:14,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"bradcrumb-card"],[1,"container","my-4"],[1,"form-group","module-dropdown"],["for","moduleSelect"],["id","moduleSelect",1,"custom-input",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"module-card"],[1,"module-list"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","container my-5",4,"ngIf"],["class","mt-5",4,"ngIf"],[3,"value"],[3,"click","ngClass"],[1,"container","my-5"],[1,"table-responsive"],[1,"table","table-responsive","table-bordered","content-table"],["colspan","13",1,"main-header"],[1,"header-row"],[1,"headers-title"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["rowspan","2",1,"vertical-center"],[1,"goal-color"],["rowspan","2",1,"vertical-center",3,"routerLink"],[1,"far","fa-edit"],[1,"actual-color"],["colspan","8",2,"text-align","center"],[4,"ngIf"],["rowspan","2","colspan","2",1,"vertical-center"],["colspan","5",1,"goal-color"],["rowspan","2"],["colspan","5",1,"actual-color"],["colspan","6",1,"main-header"],[1,"mt-5"],[1,"submit-btn",2,"width","180px",3,"routerLink"],["type","text","placeholder","Search Details",1,"custom-input","mb-2","mt-3",3,"ngModelChange","ngModel"],["id","content-to-pdf",1,"table-responsive"],[1,"table","table-bordered","table-striped"],[1,"table-header"],["colspan","7",1,"main-header"],[1,"goal"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[1,"table-cell"],[1,"table-cell",3,"innerHTML"],[3,"ngClass"]],template:function(t,i){t&1&&(c(0,"app-header",1),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"p"),h(6),d()(),c(7,"div",6)(8,"div",7)(9,"label",8),h(10,"Select Module"),d(),c(11,"select",9),vt("ngModelChange",function(a){return _t(i.selectedModule,a)||(i.selectedModule=a),a}),c(12,"option",10),h(13,"Select a Module"),d(),rt(14,B7,2,2,"option",11),d()(),c(15,"div",12)(16,"ul",13),rt(17,V7,2,4,"li",14),d()(),rt(18,W7,28,2,"div",15)(19,X7,30,2,"div",15)(20,J7,29,3,"div",15)(21,iU,28,2,"div",15)(22,sU,24,2,"div",15)(23,dU,30,6,"div",16),d()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(12,k7,!i.isSidebarOpen)),_(4),A(i.project_names),_(5),gt("ngModel",i.selectedModule),_(3),D("ngForOf",i.modules),_(3),D("ngForOf",i.modules),_(),D("ngIf",i.selectedModule==="Content Tracker"),_(),D("ngIf",i.selectedModule==="Collateral Tracker"),_(),D("ngIf",i.selectedModule==="Marketing Calender"),_(),D("ngIf",i.selectedModule==="Engagement Analyzing"),_(),D("ngIf",i.selectedModule==="Task Progress"),_(),D("ngIf",i.selectedModule==="DataBase Tracker"))},dependencies:[Ke,Hi,mi,on,xn,bn,ln,cn,Ki,Gi,ei,ii,Vr],styles:[".sts-complete[_ngcontent-%COMP%]{background-color:green;color:#fff}.not-planed[_ngcontent-%COMP%]{background-color:#e7cef3;color:#5b3283}.team[_ngcontent-%COMP%]{background-color:#5b3283;color:#e7cef3}.not-assigned[_ngcontent-%COMP%]{background-color:#b00200;color:#fff}.goal[_ngcontent-%COMP%]{background-color:#d6a6be;text-align:center}.actual[_ngcontent-%COMP%]{background-color:#92c47d;text-align:center}.sts-all[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.main-header[_ngcontent-%COMP%]{background-color:#741b48;color:#fff}.custom-input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:5px;font-size:16px;transition:border-color .3s ease}.custom-input[_ngcontent-%COMP%]:focus{border-color:#5e1080;outline:none;box-shadow:0 0 5px #5d1285ad}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;transition:opacity .3s ease;opacity:0;visibility:hidden}.modal.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-dialog[_ngcontent-%COMP%]{max-width:500px;margin:auto}i[_ngcontent-%COMP%]{cursor:pointer;color:gray;transition:.1s}i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#492020}.goal-cell[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}.content-table[_ngcontent-%COMP%]{margin:20px 0;font-size:16px;text-align:center}.header-row[_ngcontent-%COMP%]{background-color:#6a1b47;color:#fff}.goal-header[_ngcontent-%COMP%], .actual-header[_ngcontent-%COMP%]{color:#000;font-weight:700}.goal-header[_ngcontent-%COMP%]{background-color:#d6a6be}.actual-header[_ngcontent-%COMP%]{background-color:#92c47d}.update-icon[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#6a1b47;font-size:18px;text-decoration:none}.goal-color[_ngcontent-%COMP%]{background-color:#d6a6be}.actual-color[_ngcontent-%COMP%]{background-color:#92c47d}.vertical-center[_ngcontent-%COMP%], .table-custom[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}.bg-light-pink[_ngcontent-%COMP%]{background-color:#e7c4c4}.bg-light-green[_ngcontent-%COMP%]{background-color:#98d98e}.headers-clr[_ngcontent-%COMP%]{background-color:#b9f1fe}.headers-title[_ngcontent-%COMP%]{background-color:#ffefe5}.green-text[_ngcontent-%COMP%]{color:green}.red-text[_ngcontent-%COMP%]{color:red}"]})};var uU=n=>({"full-width":n});function hU(n,e){if(n&1){let t=Nt();c(0,"div",13)(1,"div",14)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",15),lt("click",function(){G(t);let r=k();return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}var wg=class n{constructor(e,t,i,r,a){this.route=e;this.apiService=t;this.http=i;this.router=r;this.userService=a}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}project_id=null;ngOnInit(){this.route.params.subscribe(e=>{this.project_id=parseInt(e.projectid)}),this.apifromservice(),this.get_data()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}manage_task_api="";apifromservice(){this.manage_task_api=this.apiService.marketing_manage_task_api()}Marketing_task_name="";cont_goal_quality;cont_goal_quantity;cont_assigned_by="yoganandhan";cont_assigned_to=null;successmgs=!1;create_manage_task(){let e=this.manage_task_api,t={Marketing_task_name:this.Marketing_task_name},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.router.navigate(["/view-goals",this.project_id])},3e3)},r=>{console.log("Post request failed",r)})}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(sn),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-new-goals"]],decls:18,vars:6,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mob-res"],[1,"container","mb-3","card-margin"],["class","alert-card fade-in",4,"ngIf"],[1,"card","shadow"],[1,"heading-card"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-6"],["type","text","placeholder","Enter Task Name",1,"custom-input",3,"ngModelChange","ngModel"],[1,"submit-btn",3,"click"],[1,"alert-card","fade-in"],[1,"alert-content"],[1,"close-btn",3,"click"]],template:function(t,i){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3)(4,"div",4),rt(5,hU,7,0,"div",5),c(6,"div",6)(7,"div",7)(8,"label"),h(9,"Manage Task"),d()(),c(10,"div",8)(11,"div",9)(12,"div",10)(13,"label"),h(14,"Task Name:"),d(),c(15,"input",11),vt("ngModelChange",function(a){return _t(i.Marketing_task_name,a)||(i.Marketing_task_name=a),a}),d()()(),c(16,"button",12),lt("click",function(){return i.create_manage_task()}),h(17,"Create"),d()()()()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(4,uU,!i.isSidebarOpen)),_(3),D("ngIf",i.successmgs),_(10),gt("ngModel",i.Marketing_task_name))},dependencies:[Ke,mi,ln,Ki,Gi,ei,ii],styles:[".card-margin[_ngcontent-%COMP%]{margin-top:3%}.custom-input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:5px;font-size:16px;transition:border-color .3s ease}.custom-input[_ngcontent-%COMP%]:focus{border-color:#5e1080;outline:none;box-shadow:0 0 5px #5d1285ad}.custom-label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px;display:block}label[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif}.heading-card[_ngcontent-%COMP%]{background-color:#639;color:#fff;border-top-right-radius:5px;border-top-left-radius:5px;padding:3%;text-align:center;font-size:20px}.mob-res[_ngcontent-%COMP%]{margin-top:5%}@media screen and (max-width: 768px){.mob-res[_ngcontent-%COMP%]{margin-top:20%}}"]})};var pU=n=>({"full-width":n}),fU=n=>({"active-module":n}),mU=n=>["/Add-sales-details","Add DataBase Tracker",n],gU=n=>["/Add-sales-details","DataBase Tracker",n],_U=n=>["/Add-sales-details","Sales Tracker",n],Ny=n=>["/Add-sales-details","Customer Tracker",n],Mg=(n,e,t,i)=>({"today-row":n,"past-row":e,"empty-date-row":t,"upcoming-row":i});function vU(n,e){if(n&1){let t=Nt();c(0,"div",18)(1,"div",19)(2,"strong"),h(3,"Success!"),d(),h(4),c(5,"button",20),lt("click",function(){G(t);let r=k();return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}if(n&2){let t=k();_(4),de(" ",t.set_sucess_message," ")}}function xU(n,e){if(n&1&&(c(0,"option",21),h(1),d()),n&2){let t=e.$implicit;D("value",t),_(),A(t)}}function bU(n,e){if(n&1){let t=Nt();c(0,"li",22),lt("click",function(){let r=G(t).$implicit,a=k();return q(a.selectModule(r))}),h(1),d()}if(n&2){let t=e.$implicit,i=k();D("ngClass",te(2,fU,t===i.selectedModule)),_(),de(" ",t," ")}}function yU(n,e){if(n&1){let t=Nt();c(0,"div",23)(1,"p"),h(2),d(),c(3,"button",24),lt("click",function(){G(t);let r=k();return q(r.closeComments())}),h(4,"Close"),d()()}if(n&2){let t=k();_(2),A(t.currentComment)}}function SU(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function wU(n,e){if(n&1&&(c(0,"div",43)(1,"table",44)(2,"thead")(3,"tr")(4,"th"),h(5,"Date"),d(),c(6,"th"),h(7,"Customer comments"),d()()(),c(8,"tbody"),rt(9,SU,6,5,"tr",45),d()()()),n&2){let t=k(3);_(9),D("ngForOf",t.get_db_telecaller_data)}}function CU(n,e){if(n&1){let t=Nt();c(0,"div",35),rt(1,wU,10,1,"div",36),c(2,"div",37)(3,"table",38)(4,"thead")(5,"tr")(6,"th"),h(7,"Name"),d(),c(8,"th"),h(9,"Quality"),d(),c(10,"th"),h(11,"Profession"),d(),c(12,"th"),h(13,"Budgets (Capacity)"),d(),c(14,"th"),h(15,"Status"),d(),c(16,"th"),h(17,"Expected Site Visit Date"),d(),c(18,"th"),h(19,"Customer comment"),d()()(),c(20,"tbody")(21,"tr")(22,"td"),h(23),d(),c(24,"td"),h(25),d(),c(26,"td"),h(27),d(),c(28,"td"),h(29),d(),c(30,"td"),h(31),d(),c(32,"td"),h(33),d(),c(34,"td")(35,"i",39),lt("click",function(){G(t);let r=k(2);return q(r.get_telecaller_api())}),d()()()()()(),c(36,"label"),h(37,"Remarks"),d(),c(38,"textarea",40),vt("ngModelChange",function(r){G(t);let a=k(2);return _t(a.db_tracker_data.Db_comments,r)||(a.db_tracker_data.Db_comments=r),q(r)}),d(),c(39,"button",41),h(40,"Update"),d(),c(41,"button",42),lt("click",function(){G(t);let r=k(2);return q(r.create_sales_tracker(r.db_tracker_data.Db_tracker_id))}),h(42,"Submit for sales tracker"),d()()}if(n&2){let t=k(2);_(),D("ngIf",t.customers_cmt_card),_(22),A(t.db_tracker_data.Db_name_client),_(2),A(t.db_tracker_data.Db_Quality),_(2),A(t.db_tracker_data.Db_Profession),_(2),A(t.db_tracker_data.Db_budget),_(2),A(t.db_tracker_data.Db_status),_(2),A(t.db_tracker_data.Sales_site_visit_execpted_date),_(5),gt("ngModel",t.db_tracker_data.Db_comments),_(),D("routerLink",te(9,gU,t.db_tracker_data.Db_tracker_id))}}function MU(n,e){if(n&1){let t=Nt();c(0,"tr",47)(1,"td"),h(2),d(),c(3,"td",48),h(4),d(),Lt(5,"td",48),c(6,"td",48),h(7),d(),c(8,"td"),h(9),d(),c(10,"td"),h(11),Et(12,"date"),d(),c(13,"td",49),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_details_update(r))}),Lt(14,"i",50),d()()}if(n&2){let t=e.$implicit,i=e.index,r=k(3);_(2),A(i+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_dbtracker),$i),_(),de(" ",t.Db_name_client,""),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_dbtracker),$i),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_dbtracker),$i),_(),de(" ",t.Db_location,""),_(2),A(t.Db_source),_(2),A(At(12,8,t.Db_date,"dd MMM yy"))}}function EU(n,e){if(n&1&&(pe(0),rt(1,MU,15,11,"tr",46),fe()),n&2){let t=k(2);_(),D("ngForOf",t.filteredDbTrackerData)}}function AU(n,e){n&1&&(c(0,"tr")(1,"td",51),h(2,"No Data Found"),d()())}function TU(n,e){if(n&1){let t=Nt();c(0,"div",25),rt(1,CU,43,11,"div",26),c(2,"div")(3,"button",27),h(4,"Update Leads"),d(),Lt(5,"br")(6,"br"),c(7,"input",28),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.contactSearchTerm_dbtracker,r)||(a.contactSearchTerm_dbtracker=r),q(r)}),d()(),c(8,"div",29)(9,"table",30)(10,"thead",31)(11,"tr")(12,"th",32),h(13,"DataBase Tracker"),d()(),c(14,"tr")(15,"th",33),h(16,"S.No"),d(),c(17,"th",33),h(18,"Name"),d(),c(19,"th",33),h(20,"Contact"),d(),c(21,"th",33),h(22,"Location"),d(),c(23,"th",33),h(24,"Source"),d(),c(25,"th",33),h(26,"Date"),d(),c(27,"th",33),h(28,"View"),d()()(),c(29,"tbody"),rt(30,EU,2,1,"ng-container",34)(31,AU,3,0,"ng-template",null,0,Ie),d()()()()}if(n&2){let t=Qe(32),i=k();_(),D("ngIf",i.isCardVisible),_(2),D("routerLink",te(5,mU,i.project_id)),_(4),gt("ngModel",i.contactSearchTerm_dbtracker),_(23),D("ngIf",i.filteredDbTrackerData&&i.filteredDbTrackerData.length>0)("ngIfElse",t)}}function kU(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function IU(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function DU(n,e){if(n&1&&(c(0,"div",43)(1,"table",44)(2,"thead")(3,"tr")(4,"th",52),h(5,"Database Tracker"),d()()(),c(6,"thead")(7,"tr")(8,"th"),h(9,"Date"),d(),c(10,"th"),h(11,"Customer comments"),d()()(),c(12,"tbody"),rt(13,kU,6,5,"tr",45),d()(),c(14,"table",44)(15,"thead")(16,"tr")(17,"th",52),h(18,"Sales Tracker"),d()()(),c(19,"thead")(20,"tr")(21,"th"),h(22,"Date"),d(),c(23,"th"),h(24,"Customer comments"),d()()(),c(25,"tbody"),rt(26,IU,6,5,"tr",45),d()()()),n&2){let t=k(3);_(13),D("ngForOf",t.get_db_telecaller_data),_(13),D("ngForOf",t.get_sl_telecaller_data)}}function PU(n,e){if(n&1){let t=Nt();c(0,"div",35),rt(1,DU,27,2,"div",36),c(2,"h6"),h(3,"Custome Details"),d(),c(4,"div",37)(5,"table",38)(6,"thead")(7,"tr")(8,"th"),h(9,"Name"),d(),c(10,"th"),h(11,"Source"),d(),c(12,"th"),h(13,"Leads Updated Date"),d(),c(14,"th"),h(15,"Budgets (Capacity)"),d(),c(16,"th"),h(17,"Profession"),d(),c(18,"th"),h(19,"Customer Comment"),d()()(),c(20,"tbody")(21,"tr")(22,"td"),h(23),d(),c(24,"td"),h(25),d(),c(26,"td"),h(27),Et(28,"date"),d(),c(29,"td"),h(30),d(),c(31,"td"),h(32),d(),c(33,"td")(34,"i",39),lt("click",function(){G(t);let r=k(2);return q(r.get_telecaller_api())}),d()()()()()(),c(35,"h6"),h(36,"Sales Details"),d(),c(37,"div",37)(38,"table",38)(39,"thead")(40,"tr")(41,"th"),h(42,"Quality"),d(),c(43,"th"),h(44,"Expected Site Visited Date"),d(),c(45,"th"),h(46,"Actual Site Visited Date"),d(),c(47,"th"),h(48,"Expected Token Date"),d(),c(49,"th"),h(50,"Actual Token Received Date"),d(),c(51,"th"),h(52,"Assigned To"),d()()(),c(53,"tbody")(54,"tr")(55,"td"),h(56),d(),c(57,"td"),h(58),Et(59,"date"),d(),c(60,"td"),h(61),Et(62,"date"),d(),c(63,"td"),h(64),Et(65,"date"),d(),c(66,"td"),h(67),Et(68,"date"),d(),c(69,"td"),h(70),d()()()()(),c(71,"label"),h(72,"Remark:"),d(),c(73,"textarea",40),vt("ngModelChange",function(r){G(t);let a=k(2);return _t(a.db_tracker_data.Sales_remarks,r)||(a.db_tracker_data.Sales_remarks=r),q(r)}),d(),c(74,"button",41),h(75,"Update"),d(),c(76,"button",42),lt("click",function(){G(t);let r=k(2);return q(r.create_customer_trackers_data(r.db_tracker_data.Db_tracker_id))}),h(77,"Submit For Customer Tracker"),d(),c(78,"button",42),lt("click",function(){G(t);let r=k(2);return q(r.move_to_db(r.db_tracker_data.Db_tracker_id))}),h(79,"Move to Database Tracker"),d()()}if(n&2){let t=k(2);_(),D("ngIf",t.customers_cmt_card),_(22),A(t.db_tracker_data.Db_name_client),_(2),A(t.db_tracker_data.Db_source),_(2),A(At(28,14,t.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_budget),_(2),A(t.db_tracker_data.Db_Profession),_(24),A(t.db_tracker_data.Db_Quality),_(2),A(At(59,17,t.db_tracker_data.Sales_site_visit_execpted_date,"dd-MMM-yy")),_(3),A(At(62,20,t.db_tracker_data.Sales_site_visit_date,"dd MMM yy")),_(3),A(At(65,23,t.db_tracker_data.Sales_token_execpted_date,"dd-MMM-yy")),_(3),A(At(68,26,t.db_tracker_data.Sales_token_recived_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_assign_to),_(3),gt("ngModel",t.db_tracker_data.Sales_remarks),_(),D("routerLink",te(29,_U,t.db_tracker_data.Db_tracker_id))}}function LU(n,e){if(n&1){let t=Nt();c(0,"tr",47)(1,"td"),h(2),d(),c(3,"td",48),h(4),d(),Lt(5,"td",48),c(6,"td",48),h(7),d(),c(8,"td"),h(9),d(),c(10,"td",53),Et(11,"date"),h(12),d(),c(13,"td",53),Et(14,"date"),h(15),d(),c(16,"td",49),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_details_update(r))}),Lt(17,"i",50),d()()}if(n&2){let t=e.$implicit,i=e.index,r=k(3);_(2),A(i+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_salestracker_u),$i),_(),de(" ",t.Db_name_client,""),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_salestracker_u),$i),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_salestracker_u),$i),_(),de(" ",t.Db_location,""),_(2),A(t.Sales_site_no),_(),D("title",At(11,11,t.Sales_site_visit_date,"dd-MMM-yy")),_(2),de(" ",t.Sales_stage1||"Site Visit Not Completed",""),_(),D("title",At(14,14,t.Sales_token_recived_date,"dd-MMM-yy")),_(2),de(" ",t.Sales_stage2||"Token Not Received","")}}function RU(n,e){if(n&1&&(pe(0),rt(1,LU,18,17,"tr",46),fe()),n&2){let t=k(2);_(),D("ngForOf",t.filteredsalestracker_u)}}function OU(n,e){n&1&&(c(0,"tr")(1,"td",51),h(2,"No Data Found"),d()())}function NU(n,e){if(n&1){let t=Nt();c(0,"div",25),rt(1,PU,80,31,"div",26),c(2,"div")(3,"input",28),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.contactSearchTerm_salestracker_u,r)||(a.contactSearchTerm_salestracker_u=r),q(r)}),d()(),c(4,"div",29)(5,"table",30)(6,"thead",31)(7,"tr")(8,"th",32),h(9,"Sales Tracker"),d()(),c(10,"tr")(11,"th",33),h(12,"S.No"),d(),c(13,"th",33),h(14,"Name"),d(),c(15,"th",33),h(16,"Contact"),d(),c(17,"th",33),h(18,"Location"),d(),c(19,"th",33),h(20,"Site No"),d(),c(21,"th",33),h(22,"Stage 1"),d(),c(23,"th",33),h(24,"Stage 2"),d(),c(25,"th",33),h(26,"View"),d()()(),c(27,"tbody"),rt(28,RU,2,1,"ng-container",34)(29,OU,3,0,"ng-template",null,0,Ie),d()()()()}if(n&2){let t=Qe(30),i=k();_(),D("ngIf",i.isCardVisible),_(2),gt("ngModel",i.contactSearchTerm_salestracker_u),_(25),D("ngIf",i.filteredsalestracker_u&&i.filteredsalestracker_u.length>0)("ngIfElse",t)}}function FU(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function BU(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function VU(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function UU(n,e){if(n&1&&(c(0,"div",56)(1,"table",44)(2,"thead")(3,"tr")(4,"th",52),h(5,"Database Tracker"),d()()(),c(6,"thead")(7,"tr")(8,"th"),h(9,"Date"),d(),c(10,"th"),h(11,"Customer comments"),d()()(),c(12,"tbody"),rt(13,FU,6,5,"tr",45),d()(),c(14,"table",44)(15,"thead")(16,"tr")(17,"th",52),h(18,"Sales Tracker"),d()()(),c(19,"thead")(20,"tr")(21,"th"),h(22,"Date"),d(),c(23,"th"),h(24,"Customer comments"),d()()(),c(25,"tbody"),rt(26,BU,6,5,"tr",45),d()(),c(27,"table",44)(28,"thead")(29,"tr")(30,"th",52),h(31,"Customer Tracker"),d()()(),c(32,"thead")(33,"tr")(34,"th"),h(35,"Date"),d(),c(36,"th"),h(37,"Customer comments"),d()()(),c(38,"tbody"),rt(39,VU,6,5,"tr",45),d()()()),n&2){let t=k(3);_(13),D("ngForOf",t.get_db_telecaller_data),_(13),D("ngForOf",t.get_sl_telecaller_data),_(13),D("ngForOf",t.get_cl_telecaller_data)}}function zU(n,e){if(n&1){let t=Nt();c(0,"div",35),rt(1,UU,40,3,"div",54),c(2,"h6"),h(3,"Custome Details"),d(),c(4,"div",37)(5,"table",38)(6,"thead")(7,"tr")(8,"th"),h(9,"Name"),d(),c(10,"th"),h(11,"Source"),d(),c(12,"th"),h(13,"Leads Updated Date"),d(),c(14,"th"),h(15,"Budgets (Capacity)"),d(),c(16,"th"),h(17,"Profession"),d(),c(18,"th"),h(19,"Customer Comment"),d()()(),c(20,"tbody")(21,"tr")(22,"td"),h(23),d(),c(24,"td"),h(25),d(),c(26,"td"),h(27),Et(28,"date"),d(),c(29,"td"),h(30),d(),c(31,"td"),h(32),d(),c(33,"td")(34,"i",39),lt("click",function(){G(t);let r=k(2);return q(r.get_telecaller_api())}),d()()()()()(),c(35,"h6"),h(36,"Customer Tracker"),d(),c(37,"div",37)(38,"table",38)(39,"thead")(40,"tr")(41,"th"),h(42,"Quality"),d(),c(43,"th"),h(44,"Expected Agreement Date"),d(),c(45,"th"),h(46,"Actual Agreement Date"),d(),c(47,"th"),h(48,"Expected Registration Date"),d(),c(49,"th"),h(50,"Actual Registered Date"),d(),c(51,"th"),h(52,"Assigned To"),d()()(),c(53,"tbody")(54,"tr")(55,"td"),h(56),d(),c(57,"td"),h(58),Et(59,"date"),d(),c(60,"td"),h(61),Et(62,"date"),d(),c(63,"td"),h(64),Et(65,"date"),d(),c(66,"td"),h(67),Et(68,"date"),d(),c(69,"td"),h(70),d()()()()(),c(71,"label"),h(72,"Remark:"),d(),c(73,"textarea",40),vt("ngModelChange",function(r){G(t);let a=k(2);return _t(a.db_tracker_data.Customer_comments,r)||(a.db_tracker_data.Customer_comments=r),q(r)}),d(),c(74,"button",41),h(75,"Update"),d(),c(76,"button",55),lt("click",function(){G(t);let r=k(2);return q(r.create_customer_database_data(r.db_tracker_data.Db_tracker_id))}),h(77,"Submit For Customer Database"),d(),c(78,"button",42),lt("click",function(){G(t);let r=k(2);return q(r.move_to_db(r.db_tracker_data.Db_tracker_id))}),h(79,"Move to Database Tracker"),d()()}if(n&2){let t=k(2);_(),D("ngIf",t.customers_cmt_card),_(22),A(t.db_tracker_data.Db_name_client),_(2),A(t.db_tracker_data.Db_source),_(2),A(At(28,14,t.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_budget),_(2),A(t.db_tracker_data.Db_Profession),_(24),A(t.db_tracker_data.Db_Quality),_(2),A(At(59,17,t.db_tracker_data.Customer_agreement_expected_date,"dd MMM yy")),_(3),A(At(62,20,t.db_tracker_data.Customer_agreement_date,"dd MMM yy")),_(3),A(At(65,23,t.db_tracker_data.Customer_registration_expected_date,"dd MMM yy")),_(3),A(At(68,26,t.db_tracker_data.Customer_registration_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_assign_to),_(3),gt("ngModel",t.db_tracker_data.Customer_comments),_(),D("routerLink",te(29,Ny,t.db_tracker_data.Db_tracker_id))}}function HU(n,e){if(n&1){let t=Nt();c(0,"tr",47)(1,"td"),h(2),d(),c(3,"td",48),h(4),d(),Lt(5,"td",48),c(6,"td",48),h(7),d(),c(8,"td"),h(9),d(),c(10,"td",53),Et(11,"date"),h(12),d(),c(13,"td",53),Et(14,"date"),h(15),d(),c(16,"td",49),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_details_update(r))}),Lt(17,"i",50),d()()}if(n&2){let t=e.$implicit,i=e.index,r=k(3);_(2),A(i+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_customertracker),$i),_(),de(" ",t.Db_name_client,""),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_customertracker),$i),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_customertracker),$i),_(),de(" ",t.Db_location,""),_(2),A(t.Sales_site_no),_(),D("title",At(11,11,t.Customer_aggrement_date,"dd-MMM-yy")),_(2),de(" ",t.Customer_stage1||"Agreement Not Completed",""),_(),D("title",At(14,14,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Customer_stage2||"Registration Not Completed","")}}function WU(n,e){if(n&1&&(pe(0),rt(1,HU,18,17,"tr",46),fe()),n&2){let t=k(2);_(),D("ngForOf",t.filteredcustomertracker)}}function jU(n,e){n&1&&(c(0,"tr")(1,"td",51),h(2,"No Data Found"),d()())}function GU(n,e){if(n&1){let t=Nt();c(0,"div",25),rt(1,zU,80,31,"div",26),c(2,"div")(3,"input",28),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.contactSearchTerm_customertracker,r)||(a.contactSearchTerm_customertracker=r),q(r)}),d()(),c(4,"div",29)(5,"table",30)(6,"thead",31)(7,"tr")(8,"th",32),h(9,"Customer Tracker"),d()(),c(10,"tr")(11,"th",33),h(12,"S.No"),d(),c(13,"th",33),h(14,"Name"),d(),c(15,"th",33),h(16,"Contact"),d(),c(17,"th",33),h(18,"Location"),d(),c(19,"th",33),h(20,"Site No"),d(),c(21,"th",33),h(22,"Stage 1"),d(),c(23,"th",33),h(24,"Stage 2"),d(),c(25,"th",33),h(26,"View"),d()()(),c(27,"tbody"),rt(28,WU,2,1,"ng-container",34)(29,jU,3,0,"ng-template",null,0,Ie),d()()()()}if(n&2){let t=Qe(30),i=k();_(),D("ngIf",i.isCardVisible),_(2),gt("ngModel",i.contactSearchTerm_customertracker),_(25),D("ngIf",i.filteredcustomertracker&&i.filteredcustomertracker.length>0)("ngIfElse",t)}}function qU(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function XU(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function YU(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function $U(n,e){if(n&1&&(c(0,"div",56)(1,"table",44)(2,"thead")(3,"tr")(4,"th",52),h(5,"Database Tracker"),d()()(),c(6,"thead")(7,"tr")(8,"th"),h(9,"Date"),d(),c(10,"th"),h(11,"Customer comments"),d()()(),c(12,"tbody"),rt(13,qU,6,5,"tr",45),d()(),c(14,"table",44)(15,"thead")(16,"tr")(17,"th",52),h(18,"Sales Tracker"),d()()(),c(19,"thead")(20,"tr")(21,"th"),h(22,"Date"),d(),c(23,"th"),h(24,"Customer comments"),d()()(),c(25,"tbody"),rt(26,XU,6,5,"tr",45),d()(),c(27,"table",44)(28,"thead")(29,"tr")(30,"th",52),h(31,"Customer Tracker"),d()()(),c(32,"thead")(33,"tr")(34,"th"),h(35,"Date"),d(),c(36,"th"),h(37,"Customer comments"),d()()(),c(38,"tbody"),rt(39,YU,6,5,"tr",45),d()()()),n&2){let t=k(3);_(13),D("ngForOf",t.get_db_telecaller_data),_(13),D("ngForOf",t.get_sl_telecaller_data),_(13),D("ngForOf",t.get_cl_telecaller_data)}}function KU(n,e){if(n&1){let t=Nt();c(0,"div",58),rt(1,$U,40,3,"div",54),c(2,"h6"),h(3,"Custome Details"),d(),c(4,"div",37)(5,"table",38)(6,"thead")(7,"tr")(8,"th"),h(9,"Name"),d(),c(10,"th"),h(11,"Source"),d(),c(12,"th"),h(13,"Leads Updated Date"),d(),c(14,"th"),h(15,"Budgets (Capacity)"),d(),c(16,"th"),h(17,"Profession"),d(),c(18,"th"),h(19,"Customer Comment"),d()()(),c(20,"tbody")(21,"tr")(22,"td"),h(23),d(),c(24,"td"),h(25),d(),c(26,"td"),h(27),Et(28,"date"),d(),c(29,"td"),h(30),d(),c(31,"td"),h(32),d(),c(33,"td")(34,"i",39),lt("click",function(){G(t);let r=k(2);return q(r.get_telecaller_api())}),d()()()()()(),c(35,"h6"),h(36,"Sales Tracker"),d(),c(37,"div",37)(38,"table",38)(39,"thead")(40,"tr")(41,"th"),h(42,"Site Vist Status"),d(),c(43,"th"),h(44,"Actual Site Visted Date"),d(),c(45,"th"),h(46,"Token Status"),d(),c(47,"th"),h(48,"Actual Token Received Date"),d()()(),c(49,"tbody")(50,"tr")(51,"td"),h(52),d(),c(53,"td"),h(54),Et(55,"date"),d(),c(56,"td"),h(57),d(),c(58,"td"),h(59),Et(60,"date"),d()()()()(),c(61,"h6"),h(62,"Customer Tracker"),d(),c(63,"div",37)(64,"table",38)(65,"thead")(66,"tr")(67,"th"),h(68,"Agreement Status"),d(),c(69,"th"),h(70,"Actual Agreement Date"),d(),c(71,"th"),h(72,"Registered Status"),d(),c(73,"th"),h(74,"Actual Registered Date"),d()()(),c(75,"tbody")(76,"tr")(77,"td"),h(78),d(),c(79,"td"),h(80),Et(81,"date"),d(),c(82,"td"),h(83),d(),c(84,"td"),h(85),Et(86,"date"),d()()()()(),c(87,"label"),h(88,"Remark:"),d(),c(89,"textarea",40),vt("ngModelChange",function(r){G(t);let a=k(2);return _t(a.db_tracker_data.Customer_comments,r)||(a.db_tracker_data.Customer_comments=r),q(r)}),d(),c(90,"button",41),h(91,"Update"),d(),c(92,"button",42),lt("click",function(){G(t);let r=k(2);return q(r.move_to_db(r.db_tracker_data.Db_tracker_id))}),h(93,"Move to Database Tracker"),d()()}if(n&2){let t=k(2);_(),D("ngIf",t.customers_cmt_card),_(22),A(t.db_tracker_data.Db_name_client),_(2),A(t.db_tracker_data.Db_source),_(2),A(At(28,16,t.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_budget),_(2),A(t.db_tracker_data.Db_Profession),_(20),A(t.db_tracker_data.Sales_stage1),_(2),A(At(55,19,t.db_tracker_data.Sales_site_visit_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Sales_stage2),_(2),A(At(60,22,t.db_tracker_data.Sales_token_recived_date,"dd MMM yy")),_(19),A(t.db_tracker_data.Customer_stage1),_(2),A(At(81,25,t.db_tracker_data.Customer_agreement_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Customer_stage2),_(2),A(At(86,28,t.db_tracker_data.Customer_registration_date,"dd MMM yy")),_(4),gt("ngModel",t.db_tracker_data.Customer_comments),_(),D("routerLink",te(31,Ny,t.db_tracker_data.Db_tracker_id))}}function ZU(n,e){if(n&1){let t=Nt();c(0,"tr",47)(1,"td"),h(2),d(),c(3,"td",48),h(4),d(),Lt(5,"td",48),c(6,"td",48),h(7),d(),c(8,"td"),h(9),d(),c(10,"td",49),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_details_update(r))}),Lt(11,"i",50),d()()}if(n&2){let t=e.$implicit,i=e.index,r=k(3);_(2),A(i+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_customerdb),$i),_(),de(" ",t.Db_name_client,""),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_customerdb),$i),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_customerdb),$i),_(),de(" ",t.Db_location,""),_(2),A(t.Sales_site_no)}}function JU(n,e){if(n&1&&(pe(0),rt(1,ZU,12,7,"tr",46),fe()),n&2){let t=k(2);_(),D("ngForOf",t.filteredcustomerdb)}}function QU(n,e){n&1&&(c(0,"tr")(1,"td",51),h(2,"No Data Found"),d()())}function t9(n,e){if(n&1){let t=Nt();c(0,"div",25),rt(1,KU,94,33,"div",57),c(2,"div")(3,"input",28),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.contactSearchTerm_customerdb,r)||(a.contactSearchTerm_customerdb=r),q(r)}),d()(),c(4,"div",29)(5,"table",30)(6,"thead",31)(7,"tr")(8,"th",32),h(9,"Customer Database"),d()(),c(10,"tr")(11,"th",33),h(12,"S.No"),d(),c(13,"th",33),h(14,"Name"),d(),c(15,"th",33),h(16,"Contact"),d(),c(17,"th",33),h(18,"Location"),d(),c(19,"th",33),h(20,"Site No"),d(),c(21,"th",33),h(22,"View"),d()()(),c(23,"tbody"),rt(24,JU,2,1,"ng-container",34)(25,QU,3,0,"ng-template",null,0,Ie),d()()()()}if(n&2){let t=Qe(26),i=k();_(),D("ngIf",i.isCardVisible),_(2),gt("ngModel",i.contactSearchTerm_customerdb),_(21),D("ngIf",i.filteredcustomerdb&&i.filteredcustomerdb.length>0)("ngIfElse",t)}}function e9(n,e){if(n&1){let t=Nt();c(0,"div",35)(1,"h6"),h(2,"Custome Details"),d(),c(3,"div",37)(4,"table",38)(5,"thead")(6,"tr")(7,"th"),h(8,"Name"),d(),c(9,"th"),h(10,"Source"),d(),c(11,"th"),h(12,"Leads Updated Date"),d(),c(13,"th"),h(14,"Budgets (Capacity)"),d(),c(15,"th"),h(16,"Profession"),d()()(),c(17,"tbody")(18,"tr")(19,"td"),h(20),d(),c(21,"td"),h(22),d(),c(23,"td"),h(24),Et(25,"date"),d(),c(26,"td"),h(27),d(),c(28,"td"),h(29),d()()()()(),c(30,"h6"),h(31,"Customer Tracker"),d(),c(32,"div",37)(33,"table",38)(34,"thead")(35,"tr")(36,"th"),h(37,"Quality"),d(),c(38,"th"),h(39,"Actual Agreement Date"),d(),c(40,"th"),h(41,"Actual Registered Date"),d(),c(42,"th"),h(43,"Assigned To"),d()()(),c(44,"tbody")(45,"tr")(46,"td"),h(47),d(),c(48,"td"),h(49),Et(50,"date"),d(),c(51,"td"),h(52),Et(53,"date"),d(),c(54,"td"),h(55),d()()()()(),c(56,"label"),h(57,"Remark:"),d(),c(58,"textarea",40),vt("ngModelChange",function(r){G(t);let a=k(2);return _t(a.db_tracker_data.Customer_comments,r)||(a.db_tracker_data.Customer_comments=r),q(r)}),d(),c(59,"button",41),h(60,"Update"),d()()}if(n&2){let t=k(2);_(20),A(t.db_tracker_data.Db_name_client),_(2),A(t.db_tracker_data.Db_source),_(2),A(At(25,11,t.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_budget),_(2),A(t.db_tracker_data.Db_Profession),_(18),A(t.db_tracker_data.Db_Quality),_(2),A(At(50,14,t.db_tracker_data.Customer_agreement_date,"dd MMM yy")),_(3),A(At(53,17,t.db_tracker_data.Customer_registration_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Customer_assigned),_(3),gt("ngModel",t.db_tracker_data.Customer_comments),_(),D("routerLink",te(20,Ny,t.db_tracker_data.Db_tracker_id))}}function i9(n,e){if(n&1){let t=Nt();c(0,"tr",60)(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td"),h(10),Et(11,"date"),d(),c(12,"td",53),Et(13,"date"),h(14),d(),c(15,"td",49),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_details_update(r))}),Lt(16,"i",50),d()()}if(n&2){let t=e.$implicit,i=e.index,r=k(3);D("ngClass",Ns(14,Mg,r.isToday(t.Customer_registration_expected_date),r.isPast(t.Customer_registration_expected_date),r.isEmptyDate(t.Customer_registration_expected_date),r.isUpcoming(t.Customer_registration_expected_date))),_(2),A(i+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),de(" ",t.Customer_registration_expected_date?At(11,8,t.Customer_registration_expected_date,"dd MMM yy"):"Date Not Fixed"," "),_(2),D("title",At(13,11,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Customer_stage2||"Registration Not Completed"," ")}}function n9(n,e){if(n&1&&(pe(0),rt(1,i9,17,19,"tr",59),fe()),n&2){let t=k(2);_(),D("ngForOf",t.telecallers_registration)}}function r9(n,e){n&1&&(c(0,"tr")(1,"td",51),h(2,"No Data Found"),d()())}function a9(n,e){if(n&1){let t=Nt();c(0,"tr",60)(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td"),h(10),Et(11,"date"),d(),c(12,"td",53),Et(13,"date"),h(14),d(),c(15,"td",49),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_details_update(r))}),Lt(16,"i",50),d()()}if(n&2){let t=e.$implicit,i=e.index,r=k(3);D("ngClass",Ns(14,Mg,r.isToday(t.Customer_agreement_expected_date),r.isPast(t.Customer_agreement_expected_date),r.isEmptyDate(t.Customer_agreement_expected_date),r.isUpcoming(t.Customer_agreement_expected_date))),_(2),A(i+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),de(" ",t.Customer_agreement_expected_date?At(11,8,t.Customer_agreement_expected_date,"dd MMM yy"):"Date Not Fixed"," "),_(2),D("title",At(13,11,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Customer_stage1||"Agreement Not Completed"," ")}}function s9(n,e){if(n&1&&(pe(0),rt(1,a9,17,19,"tr",59),fe()),n&2){let t=k(2);_(),D("ngForOf",t.telecallers_agreement)}}function o9(n,e){n&1&&(c(0,"tr")(1,"td",51),h(2,"No Data Found"),d()())}function l9(n,e){if(n&1){let t=Nt();c(0,"tr",60)(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td"),h(10),Et(11,"date"),d(),c(12,"td",53),Et(13,"date"),h(14),d(),c(15,"td",49),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_details_update(r))}),Lt(16,"i",50),d()()}if(n&2){let t=e.$implicit,i=e.index,r=k(3);D("ngClass",Ns(14,Mg,r.isToday(t.Sales_token_execpted_date),r.isPast(t.Sales_token_execpted_date),r.isEmptyDate(t.Sales_token_execpted_date),r.isUpcoming(t.Sales_token_execpted_date))),_(2),A(i+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),de(" ",t.Sales_token_execpted_date?At(11,8,t.Sales_token_execpted_date,"dd MMM yy"):"Date Not Fixed"," "),_(2),D("title",At(13,11,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Sales_stage2||"Token Not Completed"," ")}}function c9(n,e){if(n&1&&(pe(0),rt(1,l9,17,19,"tr",59),fe()),n&2){let t=k(2);_(),D("ngForOf",t.telecallers_token)}}function d9(n,e){n&1&&(c(0,"tr")(1,"td",51),h(2,"No Data Found"),d()())}function u9(n,e){if(n&1){let t=Nt();c(0,"tr",60)(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td"),h(10),Et(11,"date"),d(),c(12,"td",53),Et(13,"date"),h(14),d(),c(15,"td",49),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_details_update(r))}),Lt(16,"i",50),d()()}if(n&2){let t=e.$implicit,i=e.index,r=k(3);D("ngClass",Ns(14,Mg,r.isToday(t.Sales_site_visit_execpted_date),r.isPast(t.Sales_site_visit_execpted_date),r.isEmptyDate(t.Sales_site_visit_execpted_date),r.isUpcoming(t.Sales_site_visit_execpted_date))),_(2),A(i+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),de(" ",t.Sales_site_visit_execpted_date?At(11,8,t.Sales_site_visit_execpted_date,"dd MMM yy"):"Date Not Fixed"," "),_(2),D("title",At(13,11,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Sales_stage1||"Site Visit Not Completed"," ")}}function h9(n,e){if(n&1&&(pe(0),rt(1,u9,17,19,"tr",59),fe()),n&2){let t=k(2);_(),D("ngForOf",t.telecallers_site_visit)}}function p9(n,e){n&1&&(c(0,"tr")(1,"td",51),h(2,"No Data Found"),d()())}function f9(n,e){if(n&1&&(c(0,"div",25),rt(1,e9,61,22,"div",26),c(2,"div",29)(3,"table",30)(4,"thead",31)(5,"tr")(6,"th",32),h(7,"Registration"),d()(),c(8,"tr")(9,"th",33),h(10,"S.No"),d(),c(11,"th",33),h(12,"Name"),d(),c(13,"th",33),h(14,"Contact"),d(),c(15,"th",33),h(16,"Location"),d(),c(17,"th",33),h(18,"Expected Registration Date"),d(),c(19,"th",33),h(20,"Stage 2"),d(),c(21,"th",33),h(22,"View"),d()()(),c(23,"tbody"),rt(24,n9,2,1,"ng-container",34)(25,r9,3,0,"ng-template",null,0,Ie),d()()(),c(27,"div",29)(28,"table",30)(29,"thead",31)(30,"tr")(31,"th",32),h(32,"Agreement"),d()(),c(33,"tr")(34,"th",33),h(35,"S.No"),d(),c(36,"th",33),h(37,"Name"),d(),c(38,"th",33),h(39,"Contact"),d(),c(40,"th",33),h(41,"Location"),d(),c(42,"th",33),h(43,"Expected Agreement Date"),d(),c(44,"th",33),h(45,"Agreement Status"),d(),c(46,"th",33),h(47,"View"),d()()(),c(48,"tbody"),rt(49,s9,2,1,"ng-container",34)(50,o9,3,0,"ng-template",null,0,Ie),d()()(),c(52,"div",29)(53,"table",30)(54,"thead",31)(55,"tr")(56,"th",32),h(57,"Token"),d()(),c(58,"tr")(59,"th",33),h(60,"S.No"),d(),c(61,"th",33),h(62,"Name"),d(),c(63,"th",33),h(64,"Contact"),d(),c(65,"th",33),h(66,"Location"),d(),c(67,"th",33),h(68,"Expected Token Date"),d(),c(69,"th",33),h(70,"Token Status"),d(),c(71,"th",33),h(72,"View"),d()()(),c(73,"tbody"),rt(74,c9,2,1,"ng-container",34)(75,d9,3,0,"ng-template",null,0,Ie),d()()(),c(77,"div",29)(78,"table",30)(79,"thead",31)(80,"tr")(81,"th",32),h(82,"Site Visit"),d()(),c(83,"tr")(84,"th",33),h(85,"S.No"),d(),c(86,"th",33),h(87,"Name"),d(),c(88,"th",33),h(89,"Contact"),d(),c(90,"th",33),h(91,"Location"),d(),c(92,"th",33),h(93,"Expected Site Visit Date"),d(),c(94,"th",33),h(95,"Site Visit Status"),d(),c(96,"th",33),h(97,"View"),d()()(),c(98,"tbody"),rt(99,h9,2,1,"ng-container",34)(100,p9,3,0,"ng-template",null,0,Ie),d()()()()),n&2){let t=Qe(26),i=k();_(),D("ngIf",i.isCardVisible),_(23),D("ngIf",i.telecallers_registration&&i.telecallers_registration.length>0)("ngIfElse",t),_(25),D("ngIf",i.telecallers_agreement&&i.telecallers_agreement.length>0)("ngIfElse",t),_(25),D("ngIf",i.telecallers_token&&i.telecallers_token.length>0)("ngIfElse",t),_(25),D("ngIf",i.telecallers_site_visit&&i.telecallers_site_visit.length>0)("ngIfElse",t)}}var Cg=class n{constructor(e,t,i,r,a){this.route=e;this.apiService=t;this.http=i;this.domSanitizer=r;this.userService=a}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}selectedModule="";modules=["Database Tracker","Sales Tracker","Customer Tracker","Customer Database","Telecaller"];selectModule(e){this.selectedModule=e}updateactualtask=null;project_id=null;dbtracker_api_url="";sales_telecallers_comments_url="";ngOnInit(){this.get_data(),this.dbtracker_api_url=this.apiService.sales_dbtracker_api(),this.sales_telecallers_comments_url=this.apiService.sales_telecallers_comments_api(),this.url_parameters(),this.project_name(),this.get_dbtracker_api(),this.retrive_data(),this.get_telecaller_data()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}card_name="";retrive_data(){this.card_name=this.apiService.get_redirect_card(),this.selectedModule=this.card_name}url_parameters(){this.route.params.subscribe(e=>{this.project_id=parseInt(e.salesprojectid),this.updateactualtask=e.cardName})}project_names="";project_name(){setTimeout(()=>{this.project_id==1?this.project_names="ANBU AVENUE":this.project_id==2&&(this.project_names="RVS AVENUE")},.1)}get_dbtracker_data=[];get_sales_tracker_data=[];get_sales_customer_tracker_data=[];get_sales_customer_database_data=[];get_telecallers_data=[];get_dbtracker_api(){let e=new Date;this.http.get(this.dbtracker_api_url).subscribe(t=>{this.get_dbtracker_data=t.filter(i=>i.project_id===this.project_id&&i.is_db_tracker===!0),this.get_sales_tracker_data=t.filter(i=>i.project_id===this.project_id&&i.is_sales_tracker===!0),this.get_sales_customer_tracker_data=t.filter(i=>i.project_id===this.project_id&&i.is_customer_tracker===!0),this.get_sales_customer_database_data=t.filter(i=>i.project_id===this.project_id&&i.is_customer_database===!0),this.get_telecallers_data=t.filter(i=>i.project_id===this.project_id)},t=>{console.error("Error fetching items",t)})}telecallers_token=[];telecallers_agreement=[];telecallers_registration=[];telecallers_site_visit=[];get_telecaller_data(){let e=new Date().setHours(0,0,0,0);this.telecallers_site_visit=this.get_telecallers_data.filter(t=>{let i=new Date(t.Sales_site_visit_execpted_date).setHours(0,0,0,0);return t.Sales_stage1!=="Site Visit Completed"}).sort((t,i)=>{let r=new Date(t.Sales_site_visit_execpted_date).setHours(0,0,0,0),a=new Date(i.Sales_site_visit_execpted_date).setHours(0,0,0,0);return r>=e&&a>=e||r<e&&a<e?r-a:r>=e?-1:1}),this.telecallers_token=this.get_telecallers_data.filter(t=>{let i=new Date(t.Sales_token_execpted_date).setHours(0,0,0,0);return t.Sales_stage2!=="Token Received"&&t.Sales_stage1==="Site Visit Completed"}).sort((t,i)=>{let r=new Date(t.Sales_token_execpted_date).setHours(0,0,0,0),a=new Date(i.Sales_token_execpted_date).setHours(0,0,0,0);return r>=e&&a>=e||r<e&&a<e?r-a:r>=e?-1:1}),this.telecallers_agreement=this.get_telecallers_data.filter(t=>{let i=new Date(t.Customer_agreement_expected_date).setHours(0,0,0,0);return t.Customer_stage1!=="Agreement Completed"&&t.Sales_stage2==="Token Received"}).sort((t,i)=>{let r=new Date(t.Customer_agreement_expected_date).setHours(0,0,0,0),a=new Date(i.Customer_agreement_expected_date).setHours(0,0,0,0);return r>=e&&a>=e||r<e&&a<e?r-a:r>=e?-1:1}),this.telecallers_registration=this.get_telecallers_data.filter(t=>{let i=new Date(t.Customer_registration_expected_date).setHours(0,0,0,0);return t.Customer_stage2!=="Registration Completed"&&t.Customer_stage1==="Agreement Completed"}).sort((t,i)=>{let r=new Date(t.Customer_registration_expected_date).setHours(0,0,0,0),a=new Date(i.Customer_registration_expected_date).setHours(0,0,0,0);return r>=e&&a>=e||r<e&&a<e?r-a:r>=e?-1:1})}isToday(e){let t=new Date().setHours(0,0,0,0),i=new Date(e).setHours(0,0,0,0);return t===i}isPast(e){let t=new Date().setHours(0,0,0,0);return new Date(e).setHours(0,0,0,0)<t}isEmptyDate(e){return!e||new Date(e).toString()==="Invalid Date"}isUpcoming(e){let t=new Date().setHours(0,0,0,0);return new Date(e).setHours(0,0,0,0)>t&&!this.isEmptyDate(e)}contactSearchTerm_dbtracker="";get filteredDbTrackerData(){let e=this.contactSearchTerm_dbtracker.toLowerCase();return this.get_dbtracker_data.filter(t=>t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e))}isCardVisible=!1;db_tracker_data;sales_details_update(e){this.isCardVisible=!0,this.db_tracker_data=e}onDocumentClick(e){let t=document.querySelector(".pop-card");t&&!t.contains(e.target)&&(this.isCardVisible=!1);let i=document.querySelector(".pop-card-cmt");i&&!i.contains(e.target)&&(this.customers_cmt_card=!1)}showCommentCard=!1;currentComment="";showComments(e){this.currentComment=e,this.showCommentCard=!0}closeComments(){this.showCommentCard=!1}contactSearchTerm_salestracker_u="";get filteredsalestracker_u(){let e=this.contactSearchTerm_salestracker_u.toLowerCase();return this.get_sales_tracker_data.filter(t=>t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e))}contactSearchTerm_customertracker="";get filteredcustomertracker(){let e=this.contactSearchTerm_customertracker.toLowerCase();return this.get_sales_customer_tracker_data.filter(t=>t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e))}contactSearchTerm_customerdb="";get filteredcustomerdb(){let e=this.contactSearchTerm_customerdb.toLowerCase();return this.get_sales_customer_database_data.filter(t=>t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e))}highlightMatch(e,t){if(!t)return e;let i=new RegExp(`(${t})`,"gi"),r=e.replace(i,'<span style="background-color: yellow;">$1</span>');return this.domSanitizer.bypassSecurityTrustHtml(r)}successmgs=!1;set_sucess_message="";create_sales_tracker(e){let t=this.dbtracker_api_url+e,i={is_db_tracker:!1,is_sales_tracker:!0},r={headers:new ti({"Content-Type":"application/json"})};this.http.put(t,i,r).subscribe(a=>{console.log(a),this.set_sucess_message="Passed To Sales Tracker",this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.set_sucess_message="",this.get_dbtracker_api()},1e3)},a=>{console.log("Post request failed",a)}),this.isCardVisible=!1}create_customer_trackers_data(e){let t=this.dbtracker_api_url+e,i={is_customer_tracker:!0,is_sales_tracker:!1},r={headers:new ti({"Content-Type":"application/json"})};this.http.put(t,i,r).subscribe(a=>{console.log(a),this.set_sucess_message="Passed To Customer Tracker",this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.set_sucess_message="",this.get_dbtracker_api()},1e3)},a=>{console.log("Post request failed",a)}),this.isCardVisible=!1}create_customer_database_data(e){let t=this.dbtracker_api_url+e,i={is_customer_database:!0,is_customer_tracker:!1},r={headers:new ti({"Content-Type":"application/json"})};this.http.put(t,i,r).subscribe(a=>{console.log(a),this.successmgs=!0,this.set_sucess_message="Passed To Customer Database",setTimeout(()=>{this.successmgs=!1,this.get_dbtracker_api()},1e3)},a=>{console.log("Post request failed",a)}),this.isCardVisible=!1}move_to_db(e){let t=this.dbtracker_api_url+e,i={headers:new ti({"Content-Type":"application/json"})};this.http.put(t,{is_db_tracker:!0,is_sales_tracker:!1,is_customer_tracker:!1,is_customer_database:!1},i).subscribe({next:r=>{console.log(r),this.successmgs=!1,this.set_sucess_message="Moved To Database Tracker",setTimeout(()=>this.get_dbtracker_api(),1e3)},error:r=>console.log("Post request failed",r)}),this.isCardVisible=!1}customers_cmt_card=!1;get_db_telecaller_data=[];get_sl_telecaller_data=[];get_cl_telecaller_data=[];get_telecaller_api(){this.http.get(this.sales_telecallers_comments_url).subscribe(e=>{this.get_db_telecaller_data=e.filter(t=>t.Db_tracker_id===this.db_tracker_data.Db_tracker_id&&t.module_name==="Databe tracker"),this.get_sl_telecaller_data=e.filter(t=>t.Db_tracker_id===this.db_tracker_data.Db_tracker_id&&t.module_name==="Sales tracker"),this.get_cl_telecaller_data=e.filter(t=>t.Db_tracker_id===this.db_tracker_data.Db_tracker_id&&t.module_name==="Customer tracker")},e=>{console.error("Error fetching items",e)}),this.customers_cmt_card=!0}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(kd),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-sales-status"]],hostBindings:function(t,i){t&1&&lt("click",function(a){return i.onDocumentClick(a)},!1,dl)},decls:25,vars:15,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"bradcrumb-card"],["style","width: 25%;","class","alert-card fade-in",4,"ngIf"],[1,"container","my-4"],[1,"form-group","module-dropdown"],["for","moduleSelect"],["id","moduleSelect",1,"custom-input",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"module-card"],[1,"module-list"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","comment-card",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"alert-card","fade-in",2,"width","25%"],[1,"alert-content"],[1,"close-btn",3,"click"],[3,"value"],[3,"click","ngClass"],[1,"comment-card"],[1,"btn","btn-secondary",3,"click"],[1,"mt-5"],["class","pop-card",4,"ngIf"],[1,"submit-btn",2,"width","180px",3,"routerLink"],["type","text","placeholder","Search Details",1,"custom-input","mb-2",3,"ngModelChange","ngModel"],["id","content-to-pdf",1,"table-responsive"],[1,"table","table-bordered","table-striped"],[1,"table-header"],["colspan","15",1,"main-header"],[1,"goal"],[4,"ngIf","ngIfElse"],[1,"pop-card"],["class","pop-card-cmt",4,"ngIf"],[1,"data-table-container"],[1,"data-table"],[1,"fas","fa-comment-alt",3,"click"],["readonly","",1,"custom-input",3,"ngModelChange","ngModel"],[1,"submit-btn",3,"routerLink"],[1,"submit-btn",2,"width","300px",3,"click"],[1,"pop-card-cmt"],[1,"custmer-table"],[4,"ngFor","ngForOf"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[3,"innerHTML"],[3,"click"],[1,"fas","fa-eye"],["colspan","15",2,"text-align","center"],["colspan","2"],[3,"title"],["class","pop-card-cmt mt-5",4,"ngIf"],[1,"submit-btn",2,"width","350px",3,"click"],[1,"pop-card-cmt","mt-5"],["class","pop-card mt-5",4,"ngIf"],[1,"pop-card","mt-5"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(t,i){t&1&&(c(0,"app-header",1),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"p"),h(6),d()(),rt(7,vU,7,1,"div",6),c(8,"div",7)(9,"div",8)(10,"label",9),h(11,"Select Module"),d(),c(12,"select",10),vt("ngModelChange",function(a){return _t(i.selectedModule,a)||(i.selectedModule=a),a}),c(13,"option",11),h(14,"Select a Module"),d(),rt(15,xU,2,2,"option",12),d()(),c(16,"div",13)(17,"ul",14),rt(18,bU,2,4,"li",15),d()(),rt(19,yU,5,1,"div",16)(20,TU,33,7,"div",17)(21,NU,31,4,"div",17)(22,GU,31,4,"div",17)(23,t9,27,4,"div",17)(24,f9,102,9,"div",17),d()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(13,pU,!i.isSidebarOpen)),_(4),A(i.project_names),_(),D("ngIf",i.successmgs),_(5),gt("ngModel",i.selectedModule),_(3),D("ngForOf",i.modules),_(3),D("ngForOf",i.modules),_(),D("ngIf",i.showCommentCard),_(),D("ngIf",i.selectedModule==="Database Tracker"),_(),D("ngIf",i.selectedModule==="Sales Tracker"),_(),D("ngIf",i.selectedModule==="Customer Tracker"),_(),D("ngIf",i.selectedModule==="Customer Database"),_(),D("ngIf",i.selectedModule==="Telecaller"))},dependencies:[Ke,Hi,mi,on,xn,bn,ln,cn,Ki,Gi,ei,ii,Vr],styles:['.sts-complete[_ngcontent-%COMP%]{background-color:green;color:#fff}.not-planed[_ngcontent-%COMP%]{background-color:#e7cef3;color:#5b3283}.team[_ngcontent-%COMP%]{background-color:#5b3283;color:#e7cef3}.not-assigned[_ngcontent-%COMP%]{background-color:#b00200;color:#fff}.goal[_ngcontent-%COMP%]{background-color:#d6a6be;text-align:center}.actual[_ngcontent-%COMP%]{background-color:#92c47d;text-align:center}.sts-all[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}td[_ngcontent-%COMP%]{text-align:center;width:15%}th[_ngcontent-%COMP%]{text-align:center}.main-header[_ngcontent-%COMP%]{background-color:#741b48;color:#fff}.custom-input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:5px;font-size:16px;transition:border-color .3s ease}.custom-input[_ngcontent-%COMP%]:focus{border-color:#5e1080;outline:none;box-shadow:0 0 5px #5d1285ad}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;transition:opacity .3s ease;opacity:0;visibility:hidden}.modal.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-dialog[_ngcontent-%COMP%]{max-width:500px;margin:auto}.filter_card[_ngcontent-%COMP%]{margin:5%}.meeting-header[_ngcontent-%COMP%]{background-color:#5b3283;color:#fff;font-size:18px;padding:5px;margin-top:5%;text-align:center}.pop-card[_ngcontent-%COMP%]{position:absolute;background-color:#f0f4f8;padding:2%;border-radius:10px;top:45%;left:50%;transform:translate(-50%,-50%);box-shadow:0 4px 10px #0003}.pop-card-cmt[_ngcontent-%COMP%]{position:fixed;background-color:#f0f4f8;padding:2%;border-radius:10px;top:45%;left:50%;transform:translate(-50%,-50%);box-shadow:0 4px 10px #0003}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:left}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#92c47d;color:#fff}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px;font-weight:700;text-transform:uppercase}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;color:#333;border-bottom:1px solid #ddd}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f4f4f4}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}@media (max-width: 600px){.data-table[_ngcontent-%COMP%]{font-size:14px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px}}.custmer-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-family:Arial,sans-serif;margin:20px 0;box-shadow:0 2px 5px #0000001a}.custmer-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.custmer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;font-size:14px;text-transform:uppercase;letter-spacing:1px}.custmer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}.custmer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.custmer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px;text-align:left;border-bottom:1px solid #ddd}.custmer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .custmer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.custmer-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover:after{content:"View Customer Comment";position:absolute;background-color:#333;color:#fff;padding:5px;font-size:12px;border-radius:5px;bottom:30px;left:50%;transform:translate(-50%);opacity:0;transition:opacity .3s}.custmer-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover:after{opacity:1}']})};var m9=n=>({"full-width":n}),Fy=n=>["/view-sales-details",n],By=n=>["/Sales-status",n],Eg=class n{constructor(e){this.userService=e}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}ngOnInit(){this.get_data()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}project1=1;project2=2;project3=3;static \u0275fac=function(t){return new(t||n)(Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-sales-projects"]],decls:44,vars:22,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container",2,"margin-top","10%"],[1,"row"],[1,"col","mt-5"],[1,"projects-card"],["src","/assets/images/Anbu-Avenue.jpg","alt","",1,"project-img"],[1,"projects-card-txt"],[2,"margin-bottom","5px"],[1,"banner-btn"],[3,"routerLink"],["src","/assets/images/RVS.jpg","alt","",1,"project-img"],["src","/assets/images/agasthya-prime.png","alt","",1,"project-img"]],template:function(t,i){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),Lt(7,"img",7),c(8,"div",8)(9,"h4",9),h(10,"Komarapalayam"),d()(),c(11,"div",10)(12,"a",11),Lt(13,"span"),h(14,"Sales Details"),d(),c(15,"a",11),Lt(16,"span"),h(17,"Status"),d()()()(),c(18,"div",5)(19,"div",6),Lt(20,"img",12),c(21,"div",8)(22,"h4",9),h(23,"Sangagiri"),d()(),c(24,"div",10)(25,"a",11),Lt(26,"span"),h(27,"Sales Details"),d(),c(28,"a",11),Lt(29,"span"),h(30,"Status"),d()()()(),c(31,"div",5)(32,"div",6),Lt(33,"img",13),c(34,"div",8)(35,"h4",9),h(36,"Appakudal"),d()(),c(37,"div",10)(38,"a",11),Lt(39,"span"),h(40,"Sales Details"),d(),c(41,"a",11),Lt(42,"span"),h(43,"Status"),d()()()()()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(8,m9,!i.isSidebarOpen)),_(10),D("routerLink",te(10,Fy,i.project1)),_(3),D("routerLink",te(12,By,i.project1)),_(10),D("routerLink",te(14,Fy,i.project2)),_(3),D("routerLink",te(16,By,i.project2)),_(10),D("routerLink",te(18,Fy,i.project3)),_(3),D("routerLink",te(20,By,i.project3)))},dependencies:[Ke,on,ei,ii],styles:[".project-img[_ngcontent-%COMP%]{height:150px;width:100%}.projects-card[_ngcontent-%COMP%]{background-color:#5e0f80;border-radius:10px;display:flex;display:inline-block;padding:10px;color:#fff;cursor:pointer;transition:transform .3s ease,color .3s ease}.projects-card[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.projects-card-txt[_ngcontent-%COMP%]{text-align:center;border:1px solid white;padding:5px}.banner-btn[_ngcontent-%COMP%]{margin:10px auto 0}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:inline-block;margin:0 10px;color:#fff;border:.5px solid #fff;position:relative;z-index:1;transition:color .5s;padding:10px}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:0;height:100%;position:absolute;top:0;left:0;background:#fff;z-index:-1;transition:.5s}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{width:100%;color:#000}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000}"]})};var g9=n=>({"full-width":n});function _9(n,e){if(n&1){let t=Nt();c(0,"div",31)(1,"div",32)(2,"strong"),h(3,"Success!"),d(),h(4," Updated Successfully. "),c(5,"button",33),lt("click",function(){G(t);let r=k();return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function v9(n,e){if(n&1&&(c(0,"option",34),h(1),d()),n&2){let t=e.$implicit;_(),A(t.department_name)}}var Ag=class n{constructor(e,t,i,r){this.route=e;this.apiService=t;this.http=i;this.router=r}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}ngOnInit(){this.apifromservice(),this.get_department_api()}get_department_data=[];get_department_api(){this.http.get(this.apiService.manage_department()).subscribe(e=>{this.get_department_data=e},e=>{console.error("Error fetching items",e)})}create_user_api_url="";email_sender_api_url="";apifromservice(){this.create_user_api_url=this.apiService.user_management_api(),this.email_sender_api_url=this.apiService.send_email_api()}user_img_selectedFile=null;onFileSelected(e){let t=e.target;t.files&&(this.user_img_selectedFile=t.files[0])}successmgs=!1;select_designation;select_department;User_first_name="";User_Last_name="";User_ID_Card_no="";User_email_id="";User_password="";User_mobile_no="";User_Designation="";User_Department="";User_Department_id="";User_dob=null;User_is_active=null;create_user(){let e=this.create_user_api_url,t=new FormData;t.append("User_first_name",this.User_first_name),t.append("User_Last_name",this.User_Last_name),t.append("User_ID_Card_no",this.User_ID_Card_no),t.append("User_email_id",this.User_email_id),t.append("User_password",this.User_password),t.append("User_mobile_no",this.User_mobile_no),t.append("User_Department",this.User_Department),t.append("User_Department_id",this.User_Department_id),t.append("User_Designation",this.User_Designation),t.append("User_dob",this.User_dob?.toString()||""),t.append("User_is_active",this.User_is_active?"true":"false"),this.user_img_selectedFile&&t.append("user_profile_img",this.user_img_selectedFile),this.http.post(e,t).subscribe(i=>{console.log(i),this.send_email(),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1},2e3),this.router.navigate(["/view-users"])},i=>{console.log("Post request failed",i)})}send_email(){let e=this.email_sender_api_url,i=`
    <h1>Welcome to AGASTHYA DEVELOPER PRIVATE LIMITED</h1>
    <p>Dear User,</p>
    <p>Here are your account details:</p>
    <ul>
      <li><strong>User Email:</strong> {{username}}</li>
      <li><strong>Password:</strong> {{password}}</li>
    </ul>
    <p>Thank you for using AMS!</p>
  `.replace("{{username}}",this.User_email_id).replace("{{password}}",this.User_password),r={to:this.User_email_id,subject:"AMS Account Details",body:i},a={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,r,a).subscribe(s=>{console.log(s)},s=>{console.log("Post request failed",s)})}clancel_btn(){this.router.navigate(["/view-users"])}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(sn))};static \u0275cmp=Be({type:n,selectors:[["app-create-users"]],decls:74,vars:15,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],["class","alert-card fade-in",4,"ngIf"],[1,"container","mt-5","mb-3"],[1,"card","mt-5","shadow"],[1,"heading-card"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-6"],["required","","type","text","placeholder","Enter First Name",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","text","placeholder","Enter Last Name",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","text","placeholder","Enter ID No",1,"custom-input",3,"ngModelChange","ngModel"],["required","","placeholder","Mobile Number","type","text",1,"custom-input",3,"ngModelChange","ngModel"],["required","","placeholder","Enter Email ID","type","email",1,"custom-input",3,"ngModelChange","ngModel"],["required","","placeholder","Enter Password","type","password",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","date",1,"custom-input",3,"ngModelChange","ngModel"],[1,"custom-input"],["value","",4,"ngFor","ngForOf"],[1,"col"],["required","","placeholder","Enter Designation","type","text",1,"custom-input",3,"ngModelChange","ngModel"],["name","","id","",1,"custom-input",3,"ngModelChange","ngModel"],["disabled",""],["value","true"],["value","false"],["for",""],[1,"custom-file-upload"],["for","img-upload"],["required","","id","img-upload","type","file",3,"change"],[1,"submit-btn",3,"click"],["type","reset",1,"submit-btn",3,"click"],[1,"alert-card","fade-in"],[1,"alert-content"],[1,"close-btn",3,"click"],["value",""]],template:function(t,i){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",1),c(2,"div",2),rt(3,_9,7,0,"div",3),c(4,"div",4)(5,"div",5)(6,"div",6)(7,"label"),h(8,"Create Users"),d()(),c(9,"div",7)(10,"div",8)(11,"div",9)(12,"label"),h(13,"First Name:"),d(),c(14,"input",10),vt("ngModelChange",function(a){return _t(i.User_first_name,a)||(i.User_first_name=a),a}),d()(),c(15,"div",9)(16,"label"),h(17,"Last Name:"),d(),c(18,"input",11),vt("ngModelChange",function(a){return _t(i.User_Last_name,a)||(i.User_Last_name=a),a}),d()()(),c(19,"div",8)(20,"div",9)(21,"label"),h(22,"ID:"),d(),c(23,"input",12),vt("ngModelChange",function(a){return _t(i.User_ID_Card_no,a)||(i.User_ID_Card_no=a),a}),d()(),c(24,"div",9)(25,"label"),h(26,"Mobile Number:"),d(),c(27,"input",13),vt("ngModelChange",function(a){return _t(i.User_mobile_no,a)||(i.User_mobile_no=a),a}),d()()(),c(28,"div",8)(29,"div",9)(30,"label"),h(31,"Email ID:"),d(),c(32,"input",14),vt("ngModelChange",function(a){return _t(i.User_email_id,a)||(i.User_email_id=a),a}),d()(),c(33,"div",9)(34,"label"),h(35,"Password:"),d(),c(36,"input",15),vt("ngModelChange",function(a){return _t(i.User_password,a)||(i.User_password=a),a}),d()()(),c(37,"div",8)(38,"div",9)(39,"label"),h(40,"DOB:"),d(),c(41,"input",16),vt("ngModelChange",function(a){return _t(i.User_dob,a)||(i.User_dob=a),a}),d()(),c(42,"div",9)(43,"label"),h(44,"Department:"),d(),c(45,"select",17),rt(46,v9,2,1,"option",18),d()()(),c(47,"div",8)(48,"div",19)(49,"label"),h(50,"Designation:"),d(),c(51,"input",20),vt("ngModelChange",function(a){return _t(i.User_Designation,a)||(i.User_Designation=a),a}),d()(),c(52,"div",19)(53,"label"),h(54,"Active User:"),d(),c(55,"select",21),vt("ngModelChange",function(a){return _t(i.User_is_active,a)||(i.User_is_active=a),a}),c(56,"option",22),h(57,"Select"),d(),c(58,"option",23),h(59,"Yes"),d(),c(60,"option",24),h(61,"No"),d()()(),c(62,"div",19)(63,"label",25),h(64,"Profile Image:"),d(),Lt(65,"br"),c(66,"div",26)(67,"label",27),h(68,"Select Image"),d(),c(69,"input",28),lt("change",function(a){return i.onFileSelected(a)}),d()()()(),c(70,"button",29),lt("click",function(){return i.create_user()}),h(71,"Create"),d(),c(72,"button",30),lt("click",function(){return i.clancel_btn()}),h(73,"Cancel"),d()()()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(13,g9,!i.isSidebarOpen)),_(),D("ngIf",i.successmgs),_(11),gt("ngModel",i.User_first_name),_(4),gt("ngModel",i.User_Last_name),_(5),gt("ngModel",i.User_ID_Card_no),_(4),gt("ngModel",i.User_mobile_no),_(5),gt("ngModel",i.User_email_id),_(4),gt("ngModel",i.User_password),_(5),gt("ngModel",i.User_dob),_(5),D("ngForOf",i.get_department_data),_(5),gt("ngModel",i.User_Designation),_(4),gt("ngModel",i.User_is_active))},dependencies:[Ke,Hi,mi,xn,bn,ln,cn,Ki,gs,Gi,ei,ii],styles:[".custom-file-upload[_ngcontent-%COMP%]{position:relative;display:inline-block;margin-top:0%}.custom-file-upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background-color:#347536;color:#fff;padding:10px 20px;border-radius:5px;cursor:pointer;transition:background-color .3s ease;font-size:14px}.custom-file-upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{background-color:#45a049}.custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.file-name[_ngcontent-%COMP%]{margin-left:10px;font-size:14px;font-style:italic;color:#555;display:inline-block;vertical-align:middle;max-width:300px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})};var x9=n=>({"full-width":n}),b9=()=>["/create-users"],y9=(n,e)=>({"active-user":n,"inactive-user":e});function S9(n,e){if(n&1&&(c(0,"tr")(1,"td")(2,"div",10),Lt(3,"img",11),c(4,"div",12)(5,"p",13),h(6),d()()()(),c(7,"td")(8,"p",14),h(9),d()(),c(10,"td")(11,"p",14),h(12),d()(),c(13,"td"),h(14),Et(15,"date"),d(),c(16,"td",15),h(17),d(),c(18,"td"),Lt(19,"i",16),d()()),n&2){let t=e.$implicit;_(3),D("src",t.user_profile_img,cl),_(3),A(t.User_first_name),_(3),A(t.User_Department),_(3),A(t.User_Designation),_(2),de(" ",t.User_dob?At(15,7,t.User_dob,"dd-MM-yyy"):"N/A"," "),_(2),D("ngClass",ms(10,y9,t.User_is_active,!t.User_is_active)),_(),de(" ",t.User_is_active?"Active":"Inactive"," ")}}var Tg=class n{constructor(e,t,i){this.route=e;this.apiService=t;this.http=i}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}ngOnInit(){this.get_user_api()}get_user_data=[];get_user_api(){this.http.get(this.apiService.user_management_api()).subscribe(e=>{this.get_user_data=e},e=>{console.error("Error fetching items",e)})}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi))};static \u0275cmp=Be({type:n,selectors:[["app-view-users"]],decls:25,vars:7,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"mt-5"],[1,"submit-btn",2,"width","150px",3,"routerLink"],[1,"mt-5","table-responsive"],[1,"table","align-middle","mb-0","bg-white"],[1,"bg-light"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],["alt","",1,"rounded-circle",2,"width","45px","height","45px",3,"src"],[1,"ms-3"],[1,"fw-bold","mb-1"],[1,"fw-normal","mb-1"],[3,"ngClass"],[1,"far","fa-edit"]],template:function(t,i){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),h(6,"Add Users"),d()(),c(7,"div",6)(8,"table",7)(9,"thead",8)(10,"tr")(11,"th"),h(12,"Name"),d(),c(13,"th"),h(14,"Department"),d(),c(15,"th"),h(16,"Designation"),d(),c(17,"th"),h(18,"DOB"),d(),c(19,"th"),h(20,"Status"),d(),c(21,"th"),h(22,"Actions"),d()()(),c(23,"tbody"),rt(24,S9,20,13,"tr",9),d()()()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(4,x9,!i.isSidebarOpen)),_(3),D("routerLink",fc(6,b9)),_(19),D("ngForOf",i.get_user_data))},dependencies:[Ke,Hi,on,ei,ii,Vr],styles:[".active-user[_ngcontent-%COMP%]{color:green;font-weight:700}.inactive-user[_ngcontent-%COMP%]{color:red;font-weight:700}"]})};var w9=n=>({"full-width":n});function C9(n,e){if(n&1){let t=Nt();c(0,"div",21)(1,"div",22)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",23),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function M9(n,e){if(n&1){let t=Nt();c(0,"div",24)(1,"div",22)(2,"strong"),h(3,"Error!"),d(),h(4),c(5,"button",23),lt("click",function(){G(t);let r=k(2);return q(r.error_mgs_card=!1)}),h(6,"\xD7"),d()()()}if(n&2){let t=k(2);_(4),de(" ",t.error_message," ")}}function E9(n,e){if(n&1){let t=Nt();c(0,"li",27),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.selectTask_dbtask(r))}),h(1),d()}if(n&2){let t=e.$implicit;_(),de(" ",t.Marketing_task_name," ")}}function A9(n,e){if(n&1&&(c(0,"div",25)(1,"ul"),rt(2,E9,2,1,"li",26),d()()),n&2){let t=k(2);_(2),D("ngForOf",t.filteredTasks)}}function T9(n,e){if(n&1){let t=Nt();c(0,"div",5),rt(1,C9,7,0,"div",6)(2,M9,7,1,"div",7),c(3,"div",8)(4,"div",9)(5,"label"),h(6,"Add Leads"),d()(),c(7,"div",10)(8,"div",11)(9,"div",12)(10,"label"),h(11,"Name:"),d(),c(12,"input",13),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Db_name_client,r)||(a.Db_name_client=r),q(r)}),d()(),c(13,"div",12)(14,"label"),h(15,"Date:"),d(),c(16,"input",14),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Db_date,r)||(a.Db_date=r),q(r)}),d()()(),c(17,"div",11)(18,"div",12)(19,"div",15)(20,"label"),h(21,"Source:"),d(),c(22,"input",16),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Db_source,r)||(a.Db_source=r),q(r)}),lt("input",function(r){G(t);let a=k();return q(a.onSearch_dbtask(r))}),d(),rt(23,A9,3,1,"div",17),d()(),c(24,"div",12)(25,"label"),h(26,"Location"),d(),c(27,"input",18),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Db_location,r)||(a.Db_location=r),q(r)}),d()()(),c(28,"div",11)(29,"div",12)(30,"label"),h(31,"Contact"),d(),c(32,"input",19),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.Db_contact,r)||(a.Db_contact=r),q(r)}),d()()(),c(33,"button",20),lt("click",function(){G(t);let r=k();return q(r.create_dbtracker())}),h(34,"Create"),d(),c(35,"button",20),lt("click",function(){G(t);let r=k();return q(r.back_btn("DataBase Tracker"))}),h(36,"Back"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(),D("ngIf",t.error_mgs_card),_(10),gt("ngModel",t.Db_name_client),_(4),gt("ngModel",t.Db_date),_(6),gt("ngModel",t.Db_source),_(),D("ngIf",t.Db_source.length>0),_(4),gt("ngModel",t.Db_location),_(5),gt("ngModel",t.Db_contact)}}function k9(n,e){if(n&1){let t=Nt();c(0,"div",21)(1,"div",22)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",23),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function I9(n,e){if(n&1){let t=Nt();c(0,"div")(1,"label",45),h(2),d(),c(3,"textarea",46),vt("ngModelChange",function(r){let a=G(t).$implicit;return _t(a.value,r)||(a.value=r),q(r)}),d()()}if(n&2){let t=e.$implicit,i=e.index;_(),Zf("for","comment_",i,""),_(),de("Customers comment ",i+1,""),_(),gt("ngModel",t.value)}}function D9(n,e){if(n&1){let t=Nt();c(0,"div",5),rt(1,k9,7,0,"div",6),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"DataBase Tracker"),d()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label"),h(10,"Quality:"),d(),c(11,"select",28),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Db_Quality,r)||(a.get_dbtaracker.Db_Quality=r),q(r)}),c(12,"option",29),h(13,"Select Quality"),d(),c(14,"option",30),h(15,"Grade A"),d(),c(16,"option",31),h(17,"Grade B"),d(),c(18,"option",32),h(19,"Grade C"),d(),c(20,"option",33),h(21,"Grade D"),d()()(),c(22,"div",12)(23,"label"),h(24,"Profession:"),d(),c(25,"input",34),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Db_Profession,r)||(a.get_dbtaracker.Db_Profession=r),q(r)}),d()()(),c(26,"div",11)(27,"div",12)(28,"label"),h(29,"Budget(Capability)"),d(),c(30,"input",35),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Db_budget,r)||(a.get_dbtaracker.Db_budget=r),q(r)}),d()(),c(31,"div",12)(32,"label"),h(33,"Contact Status:"),d(),c(34,"select",28),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Db_status,r)||(a.get_dbtaracker.Db_status=r),q(r)}),c(35,"option",29),h(36,"Select Status"),d(),c(37,"option",36),h(38,"Connected"),d(),c(39,"option",37),h(40,"Not Connected"),d()()()(),c(41,"div",11)(42,"div",12)(43,"label"),h(44,"Expected Site Visit Date:"),d(),c(45,"input",38),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Sales_site_visit_execpted_date,r)||(a.get_dbtaracker.Sales_site_visit_execpted_date=r),q(r)}),d()(),c(46,"div",12)(47,"label"),h(48,"Assign to:"),d(),c(49,"input",39),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Db_assign_to,r)||(a.get_dbtaracker.Db_assign_to=r),q(r)}),d()()(),c(50,"div",11)(51,"div")(52,"label",40),h(53,"Remarks"),d(),c(54,"textarea",41),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Db_comments,r)||(a.get_dbtaracker.Db_comments=r),q(r)}),d()(),rt(55,I9,4,4,"div",42),d(),c(56,"button",20),lt("click",function(){G(t);let r=k();return q(r.click_db_tracker(r.module_name_1))}),h(57,"Update"),d(),c(58,"button",43),lt("click",function(){G(t);let r=k();return q(r.addTextArea())}),Lt(59,"i",44),h(60,"Add More"),d(),c(61,"button",20),lt("click",function(){G(t);let r=k();return q(r.removeTextArea())}),h(62,"Remove"),d(),c(63,"button",20),lt("click",function(){G(t);let r=k();return q(r.back_btn("DataBase Tracker"))}),h(64,"Back"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.get_dbtaracker.Db_Quality),_(14),gt("ngModel",t.get_dbtaracker.Db_Profession),_(5),gt("ngModel",t.get_dbtaracker.Db_budget),_(4),gt("ngModel",t.get_dbtaracker.Db_status),_(11),gt("ngModel",t.get_dbtaracker.Sales_site_visit_execpted_date),_(4),gt("ngModel",t.get_dbtaracker.Db_assign_to),_(5),gt("ngModel",t.get_dbtaracker.Db_comments),_(),D("ngForOf",t.textAreas)}}function P9(n,e){if(n&1){let t=Nt();c(0,"div",21)(1,"div",22)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",23),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function L9(n,e){if(n&1){let t=Nt();c(0,"div")(1,"label"),h(2,"Site Visited Date:"),d(),c(3,"input",47),vt("ngModelChange",function(r){G(t);let a=k(3);return _t(a.get_dbtaracker.Sales_site_visit_date,r)||(a.get_dbtaracker.Sales_site_visit_date=r),q(r)}),d()()}if(n&2){let t=k(3);_(3),gt("ngModel",t.get_dbtaracker.Sales_site_visit_date)}}function R9(n,e){if(n&1&&(c(0,"div",12),rt(1,L9,4,1,"div",54),d()),n&2){let t=k(2);_(),D("ngIf",t.get_dbtaracker.Sales_stage1==="Site Visit Completed")}}function O9(n,e){if(n&1){let t=Nt();c(0,"div",12)(1,"label"),h(2,"Site No:"),d(),c(3,"button",55),lt("click",function(){G(t);let r=k(2);return q(r.openPopup())}),h(4,"Select site"),d()()}}function N9(n,e){if(n&1){let t=Nt();c(0,"div",60),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.selectSite(r))}),h(1),d()}if(n&2){let t=e.$implicit;Zn("selected",t.selected),_(),de(" ",t.site_no," ")}}function F9(n,e){if(n&1){let t=Nt();c(0,"div",56)(1,"div",57)(2,"span",23),lt("click",function(){G(t);let r=k(2);return q(r.closePopup())}),h(3,"\xD7"),d(),c(4,"div",58),rt(5,N9,2,3,"div",59),d()()()}if(n&2){let t=k(2);_(5),D("ngForOf",t.site_details)}}function B9(n,e){if(n&1){let t=Nt();c(0,"div",12)(1,"label",40),h(2,"Expected Token Date"),d(),c(3,"input",47),vt("ngModelChange",function(r){G(t);let a=k(3);return _t(a.get_dbtaracker.Sales_token_execpted_date,r)||(a.get_dbtaracker.Sales_token_execpted_date=r),q(r)}),d()()}if(n&2){let t=k(3);_(3),gt("ngModel",t.get_dbtaracker.Sales_token_execpted_date)}}function V9(n,e){if(n&1){let t=Nt();c(0,"div",11)(1,"div",12)(2,"label"),h(3,"Site visit attend by:"),d(),c(4,"input",61),vt("ngModelChange",function(r){G(t);let a=k(2);return _t(a.get_dbtaracker.Sales_site_visit_attend_by,r)||(a.get_dbtaracker.Sales_site_visit_attend_by=r),q(r)}),d()(),rt(5,B9,4,1,"div",50),d()}if(n&2){let t=k(2);_(4),gt("ngModel",t.get_dbtaracker.Sales_site_visit_attend_by),_(),D("ngIf",t.get_dbtaracker.Sales_stage1==="Site Visit Completed")}}function U9(n,e){if(n&1){let t=Nt();c(0,"div")(1,"label",45),h(2),d(),c(3,"textarea",46),vt("ngModelChange",function(r){let a=G(t).$implicit;return _t(a.value,r)||(a.value=r),q(r)}),d()()}if(n&2){let t=e.$implicit,i=e.index;_(),Zf("for","comment_",i,""),_(),de("Customers comment ",i+1,""),_(),gt("ngModel",t.value)}}function z9(n,e){if(n&1){let t=Nt();c(0,"div",5),rt(1,P9,7,0,"div",6),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Sales Tracker"),d()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label",40),h(10,"Expected Site Visit Date"),d(),c(11,"input",47),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Sales_site_visit_execpted_date,r)||(a.get_dbtaracker.Sales_site_visit_execpted_date=r),q(r)}),d()(),c(12,"div",12)(13,"label"),h(14,"Site Visit Status:"),d(),c(15,"select",41),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Sales_stage1,r)||(a.get_dbtaracker.Sales_stage1=r),q(r)}),c(16,"option",29),h(17,"Selcet Site Visit Status"),d(),c(18,"option",48),h(19,"Site Visit Completed"),d(),c(20,"option",49),h(21,"Site Not Visit Completed"),d()()()(),c(22,"div",11),rt(23,R9,2,1,"div",50)(24,O9,5,0,"div",50)(25,F9,6,1,"div",51),d(),rt(26,V9,6,2,"div",52),c(27,"div")(28,"label"),h(29,"Remark"),d(),c(30,"textarea",53),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Sales_remarks,r)||(a.get_dbtaracker.Sales_remarks=r),q(r)}),d()(),rt(31,U9,4,4,"div",42),c(32,"button",20),lt("click",function(){G(t);let r=k();return q(r.click_sales(r.module_name_2))}),h(33,"Update"),d(),c(34,"button",43),lt("click",function(){G(t);let r=k();return q(r.addTextArea())}),Lt(35,"i",44),h(36,"Add More"),d(),c(37,"button",20),lt("click",function(){G(t);let r=k();return q(r.removeTextArea())}),h(38,"Remove"),d(),c(39,"button",20),lt("click",function(){G(t);let r=k();return q(r.back_btn("Sales Tracker"))}),h(40,"Back"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.get_dbtaracker.Sales_site_visit_execpted_date),_(4),gt("ngModel",t.get_dbtaracker.Sales_stage1),_(8),D("ngIf",t.get_dbtaracker.Sales_stage1==="Site Visit Completed"||t.get_dbtaracker.Sales_stage2==="Token Received"),_(),D("ngIf",t.get_dbtaracker.Sales_stage1==="Site Visit Completed"),_(),D("ngIf",t.isPopupVisible),_(),D("ngIf",t.get_dbtaracker.Sales_stage1==="Site Visit Completed"),_(4),gt("ngModel",t.get_dbtaracker.Sales_remarks),_(),D("ngForOf",t.textAreas)}}function H9(n,e){if(n&1){let t=Nt();c(0,"div",21)(1,"div",22)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",23),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function W9(n,e){if(n&1){let t=Nt();c(0,"div",12)(1,"label",40),h(2,"Expected Registration Date"),d(),c(3,"input",47),vt("ngModelChange",function(r){G(t);let a=k(2);return _t(a.get_dbtaracker.Customer_registration_expected_date,r)||(a.get_dbtaracker.Customer_registration_expected_date=r),q(r)}),d()()}if(n&2){let t=k(2);_(3),gt("ngModel",t.get_dbtaracker.Customer_registration_expected_date)}}function j9(n,e){if(n&1){let t=Nt();c(0,"div")(1,"label",45),h(2),d(),c(3,"textarea",46),vt("ngModelChange",function(r){let a=G(t).$implicit;return _t(a.value,r)||(a.value=r),q(r)}),d()()}if(n&2){let t=e.$implicit,i=e.index;_(),Zf("for","comment_",i,""),_(),de("Customers comment ",i+1,""),_(),gt("ngModel",t.value)}}function G9(n,e){if(n&1){let t=Nt();c(0,"div",5),rt(1,H9,7,0,"div",6),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Customer Tracker"),d()(),c(6,"div",10)(7,"div",11)(8,"div",12)(9,"label",40),h(10,"Expected Agreement Date"),d(),c(11,"input",47),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Customer_agreement_expected_date,r)||(a.get_dbtaracker.Customer_agreement_expected_date=r),q(r)}),d()(),rt(12,W9,4,1,"div",50),d(),c(13,"label"),h(14,"Remark:"),d(),c(15,"textarea",41),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Customer_comments,r)||(a.get_dbtaracker.Customer_comments=r),q(r)}),d(),rt(16,j9,4,4,"div",42),c(17,"button",20),lt("click",function(){G(t);let r=k();return q(r.create_customer(r.module_name_3))}),h(18,"Update"),d(),c(19,"button",43),lt("click",function(){G(t);let r=k();return q(r.addTextArea())}),Lt(20,"i",44),h(21,"Add More"),d(),c(22,"button",20),lt("click",function(){G(t);let r=k();return q(r.removeTextArea())}),h(23,"Remove"),d(),c(24,"button",20),lt("click",function(){G(t);let r=k();return q(r.back_btn("Customer Tracker"))}),h(25,"Back"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.get_dbtaracker.Customer_agreement_expected_date),_(),D("ngIf",t.get_dbtaracker.Customer_stage1==="Agreement Completed"),_(3),gt("ngModel",t.get_dbtaracker.Customer_comments),_(),D("ngForOf",t.textAreas)}}function q9(n,e){if(n&1){let t=Nt();c(0,"div",21)(1,"div",22)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",23),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function X9(n,e){if(n&1){let t=Nt();c(0,"div",5),rt(1,q9,7,0,"div",6),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Add Site"),d()(),c(6,"div",10)(7,"div",62)(8,"div",12)(9,"label",40),h(10,"Site No:"),d(),c(11,"input",63),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.site_no,r)||(a.site_no=r),q(r)}),d()(),c(12,"div",12)(13,"label",40),h(14,"Project:"),d(),c(15,"select",41),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.site_project,r)||(a.site_project=r),q(r)}),c(16,"option",64),h(17,"Select Project"),d(),c(18,"option",65),h(19,"Anbu Avenue"),d(),c(20,"option",66),h(21,"Rvs Avenue"),d()()()(),c(22,"button",20),lt("click",function(){G(t);let r=k();return q(r.create_site_details())}),h(23,"Update"),d(),c(24,"button",67),h(25,"Back"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.site_no),_(4),gt("ngModel",t.site_project)}}function Y9(n,e){if(n&1){let t=Nt();c(0,"div",21)(1,"div",22)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",23),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function $9(n,e){if(n&1){let t=Nt();c(0,"div",5),rt(1,Y9,7,0,"div",6),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"Financial Goal"),d()(),c(6,"div",10)(7,"div",62)(8,"div",12)(9,"label",40),h(10,"Goal Amount"),d(),c(11,"input",68),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.goal_amount,r)||(a.goal_amount=r),q(r)}),d()(),c(12,"div",12)(13,"label",40),h(14,"Actual Amount"),d(),c(15,"input",69),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.actual_amount,r)||(a.actual_amount=r),q(r)}),d()(),c(16,"div",12)(17,"label",40),h(18,"Difference"),d(),c(19,"input",70),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.diffrent_amount,r)||(a.diffrent_amount=r),q(r)}),d()()(),c(20,"div")(21,"label",40),h(22,"Remark"),d(),c(23,"textarea",41),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.financial_remarks,r)||(a.financial_remarks=r),q(r)}),d()(),c(24,"button",20),lt("click",function(){G(t);let r=k();return q(r.create_financial_report())}),h(25,"Update"),d(),c(26,"button",20),lt("click",function(){G(t);let r=k();return q(r.back_btn("Manage Report"))}),h(27,"Back"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.goal_amount),_(4),gt("ngModel",t.actual_amount),_(4),gt("ngModel",t.diffrent_amount),_(4),gt("ngModel",t.financial_remarks)}}function K9(n,e){if(n&1){let t=Nt();c(0,"div",21)(1,"div",22)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",23),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function Z9(n,e){if(n&1){let t=Nt();c(0,"div",5),rt(1,K9,7,0,"div",6),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"New Booking"),d()(),c(6,"div",10)(7,"div",62)(8,"div",12)(9,"label",40),h(10,"New Booking Goal"),d(),c(11,"input",68),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.new_booking_goal,r)||(a.new_booking_goal=r),q(r)}),d()(),c(12,"div",12)(13,"label",40),h(14,"New Booking Actual"),d(),c(15,"input",69),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.new_booking_actual,r)||(a.new_booking_actual=r),q(r)}),d()(),c(16,"div",12)(17,"label",40),h(18,"New Booking Difference"),d(),c(19,"input",70),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.new_booking_diffrence,r)||(a.new_booking_diffrence=r),q(r)}),d()()(),c(20,"div")(21,"label",40),h(22,"Remark"),d(),c(23,"textarea",41),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.new_booking_remarks,r)||(a.new_booking_remarks=r),q(r)}),d()(),c(24,"button",20),lt("click",function(){G(t);let r=k();return q(r.create_new_booking())}),h(25,"Update"),d(),c(26,"button",20),lt("click",function(){G(t);let r=k();return q(r.back_btn("Manage Report"))}),h(27,"Back"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.new_booking_goal),_(4),gt("ngModel",t.new_booking_actual),_(4),gt("ngModel",t.new_booking_diffrence),_(4),gt("ngModel",t.new_booking_remarks)}}function J9(n,e){if(n&1){let t=Nt();c(0,"div",21)(1,"div",22)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",23),lt("click",function(){G(t);let r=k(2);return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function Q9(n,e){if(n&1){let t=Nt();c(0,"div",5),rt(1,J9,7,0,"div",6),c(2,"div",8)(3,"div",9)(4,"label"),h(5,"New Booking"),d()(),c(6,"div",10)(7,"div",62)(8,"div",12)(9,"label",40),h(10,"Agreement Goal"),d(),c(11,"input",71),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.agreement_goal,r)||(a.agreement_goal=r),q(r)}),d()(),c(12,"div",12)(13,"label",40),h(14,"Agreement Actual"),d(),c(15,"input",72),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.agreement_actual,r)||(a.agreement_actual=r),q(r)}),d()(),c(16,"div",12)(17,"label",40),h(18,"Agreement Difference"),d(),c(19,"input",73),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.agreement_diffrence,r)||(a.agreement_diffrence=r),q(r)}),d()()(),c(20,"div",62)(21,"div",12)(22,"label",40),h(23,"Registration Goal"),d(),c(24,"input",74),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.registration_goal,r)||(a.registration_goal=r),q(r)}),d()(),c(25,"div",12)(26,"label",40),h(27,"Registration Actual"),d(),c(28,"input",75),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.registration_actual,r)||(a.registration_actual=r),q(r)}),d()(),c(29,"div",12)(30,"label",40),h(31,"Registration Difference"),d(),c(32,"input",76),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.registration_diffrence,r)||(a.registration_diffrence=r),q(r)}),d()()(),c(33,"div")(34,"label",40),h(35,"Remark"),d(),c(36,"textarea",41),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.functional_remark,r)||(a.functional_remark=r),q(r)}),d()(),c(37,"button",20),lt("click",function(){G(t);let r=k();return q(r.create_functional_status())}),h(38,"Update"),d(),h(39,"& "),c(40,"button",20),lt("click",function(){G(t);let r=k();return q(r.back_btn("Manage Report"))}),h(41,"Back"),d()()()()}if(n&2){let t=k();_(),D("ngIf",t.successmgs),_(10),gt("ngModel",t.agreement_goal),_(4),gt("ngModel",t.agreement_actual),_(4),gt("ngModel",t.agreement_diffrence),_(5),gt("ngModel",t.registration_goal),_(4),gt("ngModel",t.registration_actual),_(4),gt("ngModel",t.registration_diffrence),_(4),gt("ngModel",t.functional_remark)}}var kg=class n{constructor(e,t,i,r,a){this.route=e;this.apiService=t;this.http=i;this.router=r;this.userService=a}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}current_task=null;updatetask=null;project_id=null;sales_id=null;ngOnInit(){this.get_data(),this.route.params.subscribe(e=>{this.current_task=e.salescardname,this.sales_id=e.sales_id,this.project_id=e.sales_id}),this.apifromservice(),setTimeout(()=>{this.get_dbtaracker_data_api(),this.get_task(),this.get_site_details()},100)}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}sales_dbtracker_url="";customer_tracker_url="";sales_telecallers_comments_url="";marketing_manage_task="";site_details_url="";sales_report_url="";apifromservice(){this.sales_dbtracker_url=this.apiService.sales_dbtracker_api(),this.sales_telecallers_comments_url=this.apiService.sales_telecallers_comments_api(),this.marketing_manage_task=this.apiService.marketing_manage_task_api(),this.site_details_url=this.apiService.site_details_api(),this.sales_report_url=this.apiService.sales_report_api()}filter_task_names;filteredTasks=[];query="";get_task(){this.http.get(this.marketing_manage_task).subscribe(e=>{this.filter_task_names=e}),console.log(this.filter_task_names,"task name")}onSearch_dbtask(e){this.Db_source=e.target.value.toLowerCase(),this.filteredTasks=this.filter_task_names.filter(t=>t.Marketing_task_name.toLowerCase().includes(this.Db_source)),this.Db_source.length===0&&(this.filteredTasks=[])}selectTask_dbtask(e){this.Db_source=e.Marketing_task_name,this.task_id=e.Marketing_Task_id,this.filteredTasks=[]}Db_date=null;Db_source="";task_id=null;Db_name_client="";Db_location="";Db_contact="";error_message="";error_mgs_card=!1;create_dbtracker(){debugger;let e=this.sales_dbtracker_url,t={Db_date:this.Db_date,Db_source:this.Db_source,task_id:this.task_id,Db_name_client:this.Db_name_client,Db_location:this.Db_location,Db_contact:this.Db_contact,project_id:this.project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Database Tracker"),this.router.navigate(["/view-sales-details",this.project_id])},1e3)},r=>{r.error.Db_contact=="sales_database_tracker with this Db contact already exists."&&(this.error_message="Contact Already exist",setTimeout(()=>{this.error_mgs_card=!0},100)),console.log("Post request error",r)})}get_dbtaracker;get_dbtaracker_data_api(){this.http.get(this.sales_dbtracker_url+this.sales_id).subscribe(e=>{this.get_dbtaracker=e},e=>{console.error("Error fetching items",e)})}successmgs=!1;create_database_tracker(){let e=this.sales_dbtracker_url+this.sales_id,t={Db_Quality:this.get_dbtaracker.Db_Quality,Db_Profession:this.get_dbtaracker.Db_Profession,Db_budget:this.get_dbtaracker.Db_budget,Db_status:this.get_dbtaracker.Db_status,Sales_site_visit_execpted_date:this.get_dbtaracker.Sales_site_visit_execpted_date,Db_comments:this.get_dbtaracker.Db_comments,Db_assign_to:this.get_dbtaracker.Db_assign_to,project_id:this.get_dbtaracker.project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.put(e,t,i).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Database Tracker"),this.router.navigate(["/view-sales-details",this.get_dbtaracker.project_id])},1e3)},r=>{console.log("Post request failed",r)})}textAreas=[{value:""}];rows=[];addTextArea(){this.textAreas.push({value:""})}removeTextArea(){this.textAreas.length>1&&this.textAreas.pop()}click_db_tracker(e){this.createRows(e),this.create_database_tracker()}tele_comments=[];createRows(e){this.tele_comments=this.textAreas.map(t=>t.value),this.create_db_telecallers_comment(e),this.textAreas=[{value:""}]}current_datetime="";module_name_1="Databe tracker";module_name_2="Sales tracker";module_name_3="Customer tracker";create_db_telecallers_comment(e){this.current_datetime=new Date().toISOString();let t={headers:new ti({"Content-Type":"application/json"})};this.tele_comments.forEach((i,r)=>{if(i.trim()){let a={Db_tracker_id:this.sales_id,tele_date:this.current_datetime,module_name:e,tele_comments:i};this.http.post(this.sales_telecallers_comments_url,a,t).subscribe(s=>{console.log(`Comment ${r+1} saved successfully`,s),r===this.tele_comments.length-1&&(this.successmgs=!0,setTimeout(()=>{this.successmgs=!1},1e3))},s=>{console.log(`Post request for comment ${r+1} failed`,s)})}else console.log(`Skipping empty comment at index ${r}`)})}click_sales(e){this.createRows(e),this.create_sales_tracker()}site_details=[];selected_site;available_site=[];get_site_details(){this.http.get(this.site_details_url).subscribe(e=>{this.available_site=e.filter(t=>t.is_site_booked===!1),this.site_details=this.available_site.map(t=>Sn(Li({},t),{selected:!1}))},e=>{console.error("Error fetching items",e)})}selectSite(e){this.selected_site&&(this.selected_site.selected=!1),e.selected=!0,this.selected_site=e}create_sales_tracker(){let e=this.sales_dbtracker_url+this.sales_id,t={Sales_stage1:this.get_dbtaracker.Sales_stage1,Sales_remarks:this.get_dbtaracker.Sales_remarks,Sales_assigned:this.get_dbtaracker.Sales_assigned,Sales_site_visit_date:this.get_dbtaracker.Sales_site_visit_date,Sales_site_no:this.selected_site.site_no,Customer_agreement_expected_date:this.get_dbtaracker.Customer_agreement_expected_date,Sales_site_visit_execpted_date:this.get_dbtaracker.Sales_site_visit_execpted_date,Sales_token_execpted_date:this.get_dbtaracker.Sales_token_execpted_date,Sales_site_visit_attend_by:this.get_dbtaracker.Sales_site_visit_attend_by},i={headers:new ti({"Content-Type":"application/json"})};this.http.put(e,t,i).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Sales Tracker"),this.router.navigate(["/view-sales-details",this.get_dbtaracker.project_id])},1e3)},r=>{console.log("Post request failed",r)})}create_customer(e){this.create_customer_tracker(),this.createRows(e)}create_customer_tracker(){let e=this.sales_dbtracker_url+this.sales_id,t={Customer_agreement_expected_date:this.get_dbtaracker.Customer_agreement_expected_date,Customer_registration_expected_date:this.get_dbtaracker.Customer_registration_expected_date,Customer_comments:this.get_dbtaracker.Customer_comments,Customer_assigned:this.get_dbtaracker.Customer_assigned},i={headers:new ti({"Content-Type":"application/json"})};this.http.put(e,t,i).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Customer Tracker"),this.router.navigate(["/view-sales-details",this.get_dbtaracker.project_id])},1e3)},r=>{console.log("Post request failed",r)})}back_btn(e){this.apiService.set_redirect_card(e),this.router.navigate(["/view-sales-details",this.get_dbtaracker.project_id])}site_no="";site_project=null;create_site_details(){let e=this.site_details_url,t={site_no:this.site_no,Project_id:this.site_project},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Site Details"),this.router.navigate(["/view-sales-details",this.site_project])},1e3)},r=>{console.log("Post request failed",r)})}isPopupVisible=!1;openPopup(){this.isPopupVisible=!0}closePopup(){this.isPopupVisible=!1}goal_amount="";actual_amount="";diffrent_amount="";financial_remarks="";create_financial_report(){let e=this.sales_report_url,t={goal_amount:this.goal_amount,actual_amount:this.actual_amount,diffrent_amount:this.diffrent_amount,financial_remarks:this.financial_remarks,project_id:this.project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Manage Report"),this.router.navigate(["/view-sales-details",this.get_dbtaracker.project_id])},1e3)},r=>{console.log("Post request failed",r)})}new_booking_goal=null;new_booking_actual=null;new_booking_diffrence=null;new_booking_remarks="";create_new_booking(){let e=this.sales_report_url,t={new_booking_goal:this.new_booking_goal,new_booking_actual:this.new_booking_actual,new_booking_diffrence:this.new_booking_diffrence,new_booking_remarks:this.new_booking_remarks,project_id:this.project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Manage Report"),this.router.navigate(["/view-sales-details",this.get_dbtaracker.project_id])},1e3)},r=>{console.log("Post request failed",r)})}agreement_goal=null;agreement_actual=null;agreement_diffrence=null;registration_goal=null;registration_actual=null;registration_diffrence=null;functional_remark="";create_functional_status(){let e=this.sales_report_url,t={agreement_goal:this.agreement_goal,agreement_actual:this.agreement_actual,agreement_diffrence:this.agreement_diffrence,registration_goal:this.registration_goal,registration_actual:this.registration_actual,registration_diffrence:this.registration_diffrence,functional_remark:this.functional_remark,project_id:this.project_id},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Manage Report"),this.router.navigate(["/view-sales-details",this.get_dbtaracker.project_id])},1e3)},r=>{console.log("Post request failed",r)})}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(sn),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-add-details"]],decls:12,vars:12,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mob-res"],["class","container card-margin",4,"ngIf"],[1,"container","card-margin"],["class","alert-card fade-in",4,"ngIf"],["class","alert-card-error fade-in",4,"ngIf"],[1,"card","shadow"],[1,"heading-card"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-6"],["type","text","placeholder","Enter Name",1,"custom-input",3,"ngModelChange","ngModel"],["type","date","name","sDate",1,"custom-input",3,"ngModelChange","ngModel"],[1,"search-container"],["type","text","placeholder","Search Source...",1,"custom-input",3,"ngModelChange","input","ngModel"],["class","task-list",4,"ngIf"],["placeholder","Enter Location","type","text","name","Location",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter Contact",1,"custom-input",3,"ngModelChange","ngModel"],[1,"submit-btn",3,"click"],[1,"alert-card","fade-in"],[1,"alert-content"],[1,"close-btn",3,"click"],[1,"alert-card-error","fade-in"],[1,"task-list"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"custom-input",3,"ngModelChange","ngModel"],["disabled",""],["value","Grade A"],["value","Grade B"],["value","Grade C"],["value","Grade D"],["type","text","placeholder","Enter Profession","name","startDate",1,"custom-input",3,"ngModelChange","ngModel"],["placeholder","Enter Budget","type","text",1,"custom-input",3,"ngModelChange","ngModel"],["value","Connected"],["value","Not Connected"],["type","date","placeholder","Enter Quality",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Assign to",1,"custom-input",3,"ngModelChange","ngModel"],["for",""],["name","","id","",1,"custom-input",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],[1,"submit-btn",2,"width","150px",3,"click"],[1,"fa","fa-plus"],[3,"for"],["placeholder","Enter Customers comment",1,"custom-input",3,"ngModelChange","ngModel"],["type","date",1,"custom-input",3,"ngModelChange","ngModel"],["value","Site Visit Completed"],["value","Site Not Visit Completed"],["class","col-md-6",4,"ngIf"],["class","popup-container",4,"ngIf"],["class","row mb-3",4,"ngIf"],["placeholder","Enter Remarks","name","","id","",1,"custom-input",3,"ngModelChange","ngModel"],[4,"ngIf"],[1,"custom-input",3,"click"],[1,"popup-container"],[1,"popup-card"],[1,"site-container"],["class","site-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"site-item",3,"click"],["type","text","placeholder","Site visit attend by",1,"custom-input",3,"ngModelChange","ngModel"],[1,"row","mb-2"],["type","text","placeholder","Enter Site Number",1,"custom-input",3,"ngModelChange","ngModel"],["value",""],["value","1"],["value","2"],[1,"submit-btn"],["type","text","placeholder","Enter Goal Amount",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter Actual Amount",1,"custom-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter Difference Amount",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Agreement Goal",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Agreement Actual",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Agreement Difference",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Registration Goal",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Registration Actual",1,"custom-input",3,"ngModelChange","ngModel"],["type","number","placeholder","Registration Difference",1,"custom-input",3,"ngModelChange","ngModel"]],template:function(t,i){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3),rt(4,T9,37,8,"div",4)(5,D9,65,9,"div",4)(6,z9,41,9,"div",4)(7,G9,26,5,"div",4)(8,X9,26,3,"div",4)(9,$9,28,5,"div",4)(10,Z9,28,5,"div",4)(11,Q9,42,8,"div",4),d()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(10,w9,!i.isSidebarOpen)),_(2),D("ngIf",i.current_task==="Add DataBase Tracker"),_(),D("ngIf",i.current_task==="DataBase Tracker"),_(),D("ngIf",i.current_task==="Sales Tracker"),_(),D("ngIf",i.current_task==="Customer Tracker"),_(),D("ngIf",i.current_task==="Site Details"),_(),D("ngIf",i.current_task==="Financial Goal"),_(),D("ngIf",i.current_task==="New Booking"),_(),D("ngIf",i.current_task==="Functional Status"))},dependencies:[Ke,Hi,mi,xn,bn,ln,_o,cn,Ki,Gi,ei,ii],styles:[".card-margin[_ngcontent-%COMP%]{margin-top:3%}.custom-input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ced4da;border-radius:5px;font-size:16px;transition:border-color .3s ease}.custom-input[_ngcontent-%COMP%]:focus{border-color:#5e1080;outline:none;box-shadow:0 0 5px #5d1285ad}.custom-label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px;display:block}label[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif}.heading-card[_ngcontent-%COMP%]{background-color:#639;color:#fff;border-top-right-radius:5px;border-top-left-radius:5px;padding:3%;text-align:center;font-size:20px}.mob-res[_ngcontent-%COMP%]{margin-top:5%}@media screen and (max-width: 768px){.mob-res[_ngcontent-%COMP%]{margin-top:20%}}.content-below[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border:1px solid #ddd;border-radius:4px}.textarea-container[_ngcontent-%COMP%]{margin-bottom:20px}.hidden-placeholder[_ngcontent-%COMP%]{visibility:hidden;height:0}.search-container[_ngcontent-%COMP%]{margin-bottom:20px}.task-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;margin-top:10px;background-color:#fff;box-shadow:0 2px 5px #0000001a;position:fixed}.task-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.task-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px;cursor:pointer;transition:background-color .3s}.task-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.site-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(50px,1fr));gap:15px;margin:20px 0}.site-item[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;align-items:center;justify-content:center;border:2px solid #ccc;border-radius:8px;font-size:16px;font-weight:700;background-color:#f9f9f9;cursor:pointer;transition:all .3s ease-in-out}.site-item[_ngcontent-%COMP%]:hover{border-color:#4caf50;background-color:#e8f5e9}.site-item.selected[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:2px solid #388e3c}.popup-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.popup-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;width:400px;padding:20px;box-shadow:0 5px 15px #0000004d;text-align:center;animation:_ngcontent-%COMP%_popupFadeIn .3s ease;position:relative}.close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;font-size:24px;font-weight:700;color:#333;cursor:pointer;transition:color .3s ease}.close-btn[_ngcontent-%COMP%]:hover{color:red}@keyframes _ngcontent-%COMP%_popupFadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}"]})};var tz=n=>({"full-width":n}),ez=n=>({"active-module":n}),iz=n=>["/Add-sales-details","Add DataBase Tracker",n],nz=n=>["/Add-sales-details","DataBase Tracker",n],rz=(n,e)=>({"green-text":n,"red-text":e}),o5=n=>["/Add-sales-details","Sales Tracker",n],Vy=n=>["/Add-sales-details","Customer Tracker",n],Dg=(n,e,t,i)=>({"today-row":n,"past-row":e,"empty-date-row":t,"upcoming-row":i}),az=n=>["/Add-sales-details","Site Details",n],sz=n=>["/Add-sales-details","Financial Goal",n],oz=n=>["/Add-sales-details","New Booking",n],lz=n=>["/Add-sales-details","Functional Status",n];function cz(n,e){if(n&1){let t=Nt();c(0,"div",18)(1,"div",19)(2,"strong"),h(3,"Success!"),d(),h(4),c(5,"button",20),lt("click",function(){G(t);let r=k();return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}if(n&2){let t=k();_(4),de(" ",t.set_sucess_message," ")}}function dz(n,e){if(n&1&&(c(0,"option",21),h(1),d()),n&2){let t=e.$implicit;D("value",t),_(),A(t)}}function uz(n,e){if(n&1){let t=Nt();c(0,"li",22),lt("click",function(){let r=G(t).$implicit,a=k();return q(a.selectModule(r))}),h(1),d()}if(n&2){let t=e.$implicit,i=k();D("ngClass",te(2,ez,t===i.selectedModule)),_(),de(" ",t," ")}}function hz(n,e){if(n&1){let t=Nt();c(0,"div",23)(1,"p"),h(2),d(),c(3,"button",24),lt("click",function(){G(t);let r=k();return q(r.closeComments())}),h(4,"Close"),d()()}if(n&2){let t=k();_(2),A(t.currentComment)}}function pz(n,e){if(n&1){let t=Nt();c(0,"div",44)(1,"label"),h(2,"Remarks"),d(),c(3,"textarea",45),vt("ngModelChange",function(r){G(t);let a=k(3);return _t(a.db_tracker_data.Db_comments,r)||(a.db_tracker_data.Db_comments=r),q(r)}),d()()}if(n&2){let t=k(3);_(3),gt("ngModel",t.db_tracker_data.Db_comments)}}function fz(n,e){if(n&1&&(c(0,"tr",47)(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function mz(n,e){if(n&1&&(pe(0),rt(1,fz,6,5,"tr",46),fe()),n&2){let t=k(3);_(),D("ngForOf",t.get_db_telecaller_data)}}function gz(n,e){n&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),d()())}function _z(n,e){if(n&1){let t=Nt();c(0,"div",35)(1,"div",36)(2,"span",20),lt("click",function(){G(t);let r=k(2);return q(r.closePopup())}),h(3,"\xD7"),d(),rt(4,pz,4,1,"div",37),c(5,"div",38)(6,"table",39)(7,"thead")(8,"tr")(9,"th"),h(10,"Name"),d(),c(11,"th"),h(12,"Quality"),d(),c(13,"th"),h(14,"Profession"),d(),c(15,"th"),h(16,"Budgets (Capacity)"),d(),c(17,"th"),h(18,"Status"),d(),c(19,"th"),h(20,"Expecting For Site Visit"),d(),c(21,"th"),h(22,"Remark"),d()()(),c(23,"tbody")(24,"tr")(25,"td"),h(26),d(),c(27,"td"),h(28),d(),c(29,"td"),h(30),d(),c(31,"td"),h(32),d(),c(33,"td"),h(34),d(),c(35,"td"),h(36),d(),c(37,"td")(38,"i",40),lt("click",function(){G(t);let r=k(2);return q(r.remarks_card())}),d()()()()()(),c(39,"div",41)(40,"table",39)(41,"thead")(42,"tr")(43,"th"),h(44,"Date"),d(),c(45,"th"),h(46,"Customer comments"),d()()(),c(47,"tbody"),rt(48,mz,2,1,"ng-container",34)(49,gz,3,0,"ng-template",null,0,Ie),d()()(),c(51,"button",42),h(52,"Update"),d(),c(53,"button",43),lt("click",function(){G(t);let r=k(2);return q(r.create_sales_tracker(r.db_tracker_data.Db_tracker_id))}),h(54,"Submit for sales tracker"),d()()()}if(n&2){let t=Qe(50),i=k(2);_(4),D("ngIf",i.customers_cmt_card),_(22),A(i.db_tracker_data.Db_name_client),_(2),A(i.db_tracker_data.Db_Quality),_(2),A(i.db_tracker_data.Db_Profession),_(2),A(i.db_tracker_data.Db_budget),_(2),A(i.db_tracker_data.Db_status),_(2),A(i.db_tracker_data.Sales_site_visit_execpted_date),_(12),D("ngIf",i.get_db_telecaller_data.length>0)("ngIfElse",t),_(3),D("routerLink",te(10,nz,i.db_tracker_data.Db_tracker_id))}}function vz(n,e){if(n&1){let t=Nt();c(0,"tr",47)(1,"td"),h(2),d(),c(3,"td",49),h(4),d(),Lt(5,"td",49),c(6,"td",49),h(7),d(),c(8,"td"),h(9),d(),c(10,"td"),h(11),Et(12,"date"),d(),c(13,"td",50),h(14),d(),c(15,"td",51),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_details_update(r))}),Lt(16,"i",52),d()()}if(n&2){let t=e.$implicit,i=e.index,r=k(3);_(2),A(i+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_dbtracker),$i),_(),de(" ",t.Db_name_client,""),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_dbtracker),$i),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_dbtracker),$i),_(),de(" ",t.Db_location,""),_(2),A(t.Db_source),_(2),A(At(12,10,t.Db_date,"dd MMM yy")),_(2),D("ngClass",ms(13,rz,t.Db_status==="Connected",t.Db_status!=="Connected"||t.Db_status===null)),_(),de(" ",t.Db_status||"Not Connected"," ")}}function xz(n,e){if(n&1&&(pe(0),rt(1,vz,17,16,"tr",46),fe()),n&2){let t=k(2);_(),D("ngForOf",t.filteredDbTrackerData)}}function bz(n,e){n&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),d()())}function yz(n,e){if(n&1){let t=Nt();c(0,"div",25),rt(1,_z,55,12,"div",26),c(2,"div")(3,"button",27),h(4,"Update Leads"),d(),Lt(5,"br")(6,"br"),c(7,"input",28),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.contactSearchTerm_dbtracker,r)||(a.contactSearchTerm_dbtracker=r),q(r)}),d()(),c(8,"div",29)(9,"table",30)(10,"thead",31)(11,"tr")(12,"th",32),h(13,"DataBase Tracker"),d()(),c(14,"tr")(15,"th",33),h(16,"S.No"),d(),c(17,"th",33),h(18,"Name"),d(),c(19,"th",33),h(20,"Contact"),d(),c(21,"th",33),h(22,"Location"),d(),c(23,"th",33),h(24,"Source"),d(),c(25,"th",33),h(26,"Date"),d(),c(27,"th",33),h(28,"Status"),d(),c(29,"th",33),h(30,"View"),d()()(),c(31,"tbody"),rt(32,xz,2,1,"ng-container",34)(33,bz,3,0,"ng-template",null,0,Ie),d()()()()}if(n&2){let t=Qe(34),i=k();_(),D("ngIf",i.isCardVisible),_(2),D("routerLink",te(5,iz,i.project_id)),_(4),gt("ngModel",i.contactSearchTerm_dbtracker),_(25),D("ngIf",i.filteredDbTrackerData&&i.filteredDbTrackerData.length>0)("ngIfElse",t)}}function Sz(n,e){if(n&1){let t=Nt();c(0,"div",44)(1,"label"),h(2,"Remarks"),d(),c(3,"textarea",45),vt("ngModelChange",function(r){G(t);let a=k(3);return _t(a.db_tracker_data.Sales_remarks,r)||(a.db_tracker_data.Sales_remarks=r),q(r)}),d()()}if(n&2){let t=k(3);_(3),gt("ngModel",t.db_tracker_data.Sales_remarks)}}function wz(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function Cz(n,e){if(n&1&&(pe(0),rt(1,wz,6,5,"tr",55),fe()),n&2){let t=k(3);_(),D("ngForOf",t.get_db_telecaller_data)}}function Mz(n,e){n&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),d()())}function Ez(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function Az(n,e){if(n&1&&(pe(0),rt(1,Ez,6,5,"tr",55),fe()),n&2){let t=k(3);_(),D("ngForOf",t.get_sl_telecaller_data)}}function Tz(n,e){n&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),d()())}function kz(n,e){if(n&1){let t=Nt();c(0,"div",35)(1,"div",36)(2,"span",20),lt("click",function(){G(t);let r=k(2);return q(r.closePopup())}),h(3,"\xD7"),d(),rt(4,Sz,4,1,"div",37),c(5,"h6"),h(6,"Custome Details"),d(),c(7,"div",38)(8,"table",39)(9,"thead")(10,"tr")(11,"th"),h(12,"Name"),d(),c(13,"th"),h(14,"Source"),d(),c(15,"th"),h(16,"Leads Updated Date"),d(),c(17,"th"),h(18,"Budgets (Capacity)"),d(),c(19,"th"),h(20,"Profession"),d(),c(21,"th"),h(22,"Remarks"),d()()(),c(23,"tbody")(24,"tr")(25,"td"),h(26),d(),c(27,"td"),h(28),d(),c(29,"td"),h(30),Et(31,"date"),d(),c(32,"td"),h(33),d(),c(34,"td"),h(35),d(),c(36,"td")(37,"i",40),lt("click",function(){G(t);let r=k(2);return q(r.remarks_card())}),d()()()()()(),c(38,"h6"),h(39,"Sales Details"),d(),c(40,"div",38)(41,"table",39)(42,"thead")(43,"tr")(44,"th"),h(45,"Quality"),d(),c(46,"th"),h(47,"Expected Site Visited Date"),d(),c(48,"th"),h(49,"Actual Site Visited Date"),d(),c(50,"th"),h(51,"Expecting For Token"),d(),c(52,"th"),h(53,"Actual Token Received Date"),d(),c(54,"th"),h(55,"Assigned To"),d()()(),c(56,"tbody")(57,"tr")(58,"td"),h(59),d(),c(60,"td"),h(61),Et(62,"date"),d(),c(63,"td"),h(64),Et(65,"date"),d(),c(66,"td"),h(67),Et(68,"date"),d(),c(69,"td"),h(70),Et(71,"date"),d(),c(72,"td"),h(73),d()()()()(),c(74,"div",53)(75,"table",39)(76,"thead")(77,"tr")(78,"th",54),h(79,"Database Tracker"),d()()(),c(80,"thead")(81,"tr")(82,"th"),h(83,"Date"),d(),c(84,"th"),h(85,"Customer comments"),d()()(),c(86,"tbody"),rt(87,Cz,2,1,"ng-container",34)(88,Mz,3,0,"ng-template",null,0,Ie),d()(),c(90,"table",39)(91,"thead")(92,"tr")(93,"th",54),h(94,"Sales Tracker"),d()()(),c(95,"thead")(96,"tr")(97,"th"),h(98,"Date"),d(),c(99,"th"),h(100,"Customer comments"),d()()(),c(101,"tbody"),rt(102,Az,2,1,"ng-container",34)(103,Tz,3,0,"ng-template",null,0,Ie),d()()(),c(105,"button",42),h(106,"Update"),d(),c(107,"button",43),lt("click",function(){G(t);let r=k(2);return q(r.move_to_db(r.db_tracker_data.Db_tracker_id))}),h(108,"Move to Database Tracker"),d()()()}if(n&2){let t=Qe(89),i=k(2);_(4),D("ngIf",i.customers_cmt_card),_(22),A(i.db_tracker_data.Db_name_client),_(2),A(i.db_tracker_data.Db_source),_(2),A(At(31,17,i.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(i.db_tracker_data.Db_budget),_(2),A(i.db_tracker_data.Db_Profession),_(24),A(i.db_tracker_data.Db_Quality),_(2),de("",At(62,20,i.db_tracker_data.Sales_site_visit_execpted_date,"dd-MMM-yy")," "),_(3),A(At(65,23,i.db_tracker_data.Sales_site_visit_date,"dd MMM yy")),_(3),A(At(68,26,i.db_tracker_data.Sales_token_execpted_date,"dd-MMM-yy")),_(3),A(At(71,29,i.db_tracker_data.Sales_token_recived_date,"dd MMM yy")),_(3),A(i.db_tracker_data.Db_assign_to),_(14),D("ngIf",i.get_db_telecaller_data.length>0)("ngIfElse",t),_(15),D("ngIf",i.get_sl_telecaller_data.length>0)("ngIfElse",t),_(3),D("routerLink",te(32,o5,i.db_tracker_data.Db_tracker_id))}}function Iz(n,e){if(n&1){let t=Nt();c(0,"tr",47)(1,"td"),h(2),d(),c(3,"td",49),h(4),d(),Lt(5,"td",49),c(6,"td",49),h(7),d(),c(8,"td"),h(9),d(),c(10,"td",56),Et(11,"date"),h(12),d(),c(13,"td",56),Et(14,"date"),h(15),d(),c(16,"td",51),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_details_update(r))}),Lt(17,"i",52),d()()}if(n&2){let t=e.$implicit,i=e.index,r=k(3);_(2),A(i+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_salestracker_u),$i),_(),de(" ",t.Db_name_client,""),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_salestracker_u),$i),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_salestracker_u),$i),_(),de(" ",t.Db_location,""),_(2),A(t.Sales_site_no),_(),D("title",At(11,11,t.Sales_site_visit_date,"dd-MMM-yy")),_(2),de(" ",t.Sales_stage1||"Site Visit Not Completed",""),_(),D("title",At(14,14,t.Sales_token_recived_date,"dd-MMM-yy")),_(2),de(" ",t.Sales_stage2||"Token Not Received","")}}function Dz(n,e){if(n&1&&(pe(0),rt(1,Iz,18,17,"tr",46),fe()),n&2){let t=k(2);_(),D("ngForOf",t.filteredsalestracker_u)}}function Pz(n,e){n&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),d()())}function Lz(n,e){if(n&1){let t=Nt();c(0,"div",25),rt(1,kz,109,34,"div",26),c(2,"div")(3,"input",28),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.contactSearchTerm_salestracker_u,r)||(a.contactSearchTerm_salestracker_u=r),q(r)}),d()(),c(4,"div",29)(5,"table",30)(6,"thead",31)(7,"tr")(8,"th",32),h(9,"Sales Tracker"),d()(),c(10,"tr")(11,"th",33),h(12,"S.No"),d(),c(13,"th",33),h(14,"Name"),d(),c(15,"th",33),h(16,"Contact"),d(),c(17,"th",33),h(18,"Location"),d(),c(19,"th",33),h(20,"Site No"),d(),c(21,"th",33),h(22,"Site vist Status"),d(),c(23,"th",33),h(24,"Token Status"),d(),c(25,"th",33),h(26,"View"),d()()(),c(27,"tbody"),rt(28,Dz,2,1,"ng-container",34)(29,Pz,3,0,"ng-template",null,0,Ie),d()()()()}if(n&2){let t=Qe(30),i=k();_(),D("ngIf",i.isCardVisible),_(2),gt("ngModel",i.contactSearchTerm_salestracker_u),_(25),D("ngIf",i.filteredsalestracker_u&&i.filteredsalestracker_u.length>0)("ngIfElse",t)}}function Rz(n,e){if(n&1){let t=Nt();c(0,"div",58)(1,"label"),h(2,"Remark:"),d(),c(3,"textarea",45),vt("ngModelChange",function(r){G(t);let a=k(3);return _t(a.db_tracker_data.Customer_comments,r)||(a.db_tracker_data.Customer_comments=r),q(r)}),d()()}if(n&2){let t=k(3);_(3),gt("ngModel",t.db_tracker_data.Customer_comments)}}function Oz(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function Nz(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function Fz(n,e){if(n&1&&(pe(0),rt(1,Nz,6,5,"tr",55),fe()),n&2){let t=k(3);_(),D("ngForOf",t.get_sl_telecaller_data)}}function Bz(n,e){n&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),d()())}function Vz(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function Uz(n,e){if(n&1&&(pe(0),rt(1,Vz,6,5,"tr",55),fe()),n&2){let t=k(3);_(),D("ngForOf",t.get_cl_telecaller_data)}}function zz(n,e){n&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),d()())}function Hz(n,e){if(n&1){let t=Nt();c(0,"div",35)(1,"div",36)(2,"span",20),lt("click",function(){G(t);let r=k(2);return q(r.closePopup())}),h(3,"\xD7"),d(),rt(4,Rz,4,1,"div",57),c(5,"h6"),h(6,"Custome Details"),d(),c(7,"div",38)(8,"table",39)(9,"thead")(10,"tr")(11,"th"),h(12,"Name"),d(),c(13,"th"),h(14,"Source"),d(),c(15,"th"),h(16,"Leads Updated Date"),d(),c(17,"th"),h(18,"Budgets (Capacity)"),d(),c(19,"th"),h(20,"Profession"),d(),c(21,"th"),h(22,"Remarks"),d()()(),c(23,"tbody")(24,"tr")(25,"td"),h(26),d(),c(27,"td"),h(28),d(),c(29,"td"),h(30),Et(31,"date"),d(),c(32,"td"),h(33),d(),c(34,"td"),h(35),d(),c(36,"td")(37,"i",40),lt("click",function(){G(t);let r=k(2);return q(r.remarks_card())}),d()()()()()(),c(38,"h6"),h(39,"Customer Tracker"),d(),c(40,"div",38)(41,"table",39)(42,"thead")(43,"tr")(44,"th"),h(45,"Quality"),d(),c(46,"th"),h(47,"Expecting For Agreement"),d(),c(48,"th"),h(49,"Actual Agreement Date"),d(),c(50,"th"),h(51,"Expecting For Agreement"),d(),c(52,"th"),h(53,"Actual Registered Date"),d(),c(54,"th"),h(55,"Assigned To"),d()()(),c(56,"tbody")(57,"tr")(58,"td"),h(59),d(),c(60,"td"),h(61),Et(62,"date"),d(),c(63,"td"),h(64),Et(65,"date"),d(),c(66,"td"),h(67),Et(68,"date"),d(),c(69,"td"),h(70),Et(71,"date"),d(),c(72,"td"),h(73),d()()()()(),c(74,"div",53)(75,"table",39)(76,"thead")(77,"tr")(78,"th",54),h(79,"Database Tracker"),d()()(),c(80,"thead")(81,"tr")(82,"th"),h(83,"Date"),d(),c(84,"th"),h(85,"Customer comments"),d()()(),c(86,"tbody"),rt(87,Oz,6,5,"tr",55),d()(),c(88,"table",39)(89,"thead")(90,"tr")(91,"th",54),h(92,"Sales Tracker"),d()()(),c(93,"thead")(94,"tr")(95,"th"),h(96,"Date"),d(),c(97,"th"),h(98,"Customer comments"),d()()(),c(99,"tbody"),rt(100,Fz,2,1,"ng-container",34)(101,Bz,3,0,"ng-template",null,0,Ie),d()(),c(103,"table",39)(104,"thead")(105,"tr")(106,"th",54),h(107,"Customer Tracker"),d()()(),c(108,"thead")(109,"tr")(110,"th"),h(111,"Date"),d(),c(112,"th"),h(113,"Customer comments"),d()()(),c(114,"tbody"),rt(115,Uz,2,1,"ng-container",34)(116,zz,3,0,"ng-template",null,0,Ie),d()()(),c(118,"button",42),h(119,"Update"),d(),c(120,"button",43),lt("click",function(){G(t);let r=k(2);return q(r.move_to_db(r.db_tracker_data.Db_tracker_id))}),h(121,"Move to Database Tracker"),d()()()}if(n&2){let t=Qe(102),i=k(2);_(4),D("ngIf",i.customers_cmt_card),_(22),A(i.db_tracker_data.Db_name_client),_(2),A(i.db_tracker_data.Db_source),_(2),A(At(31,18,i.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(i.db_tracker_data.Db_budget),_(2),A(i.db_tracker_data.Db_Profession),_(24),A(i.db_tracker_data.Db_Quality),_(2),de("",At(62,21,i.db_tracker_data.Customer_agreement_expected_date,"dd MMM yy")," "),_(3),A(At(65,24,i.db_tracker_data.Customer_agreement_date,"dd MMM yy")),_(3),de("",At(68,27,i.db_tracker_data.Customer_registration_expected_date,"dd MMM yy")," "),_(3),A(At(71,30,i.db_tracker_data.Customer_registration_date,"dd MMM yy")),_(3),A(i.db_tracker_data.Db_assign_to),_(14),D("ngForOf",i.get_db_telecaller_data),_(13),D("ngIf",i.get_sl_telecaller_data.length>0)("ngIfElse",t),_(15),D("ngIf",i.get_cl_telecaller_data.length>0)("ngIfElse",t),_(3),D("routerLink",te(33,Vy,i.db_tracker_data.Db_tracker_id))}}function Wz(n,e){if(n&1){let t=Nt();c(0,"tr",47)(1,"td"),h(2),d(),c(3,"td",49),h(4),d(),Lt(5,"td",49),c(6,"td",49),h(7),d(),c(8,"td"),h(9),d(),c(10,"td",56),Et(11,"date"),h(12),d(),c(13,"td",56),Et(14,"date"),h(15),d(),c(16,"td",51),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_details_update(r))}),Lt(17,"i",52),d()()}if(n&2){let t=e.$implicit,i=e.index,r=k(3);_(2),A(i+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_customertracker),$i),_(),de(" ",t.Db_name_client,""),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_customertracker),$i),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_customertracker),$i),_(),de(" ",t.Db_location,""),_(2),A(t.Sales_site_no),_(),D("title",At(11,11,t.Customer_aggrement_date,"dd-MMM-yy")),_(2),de(" ",t.Customer_stage1||"Agreement Not Completed",""),_(),D("title",At(14,14,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Customer_stage2||"Registration Not Completed","")}}function jz(n,e){if(n&1&&(pe(0),rt(1,Wz,18,17,"tr",46),fe()),n&2){let t=k(2);_(),D("ngForOf",t.filteredcustomertracker)}}function Gz(n,e){n&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),d()())}function qz(n,e){if(n&1){let t=Nt();c(0,"div",25),rt(1,Hz,122,35,"div",26),c(2,"div")(3,"input",28),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.contactSearchTerm_customertracker,r)||(a.contactSearchTerm_customertracker=r),q(r)}),d()(),c(4,"div",29)(5,"table",30)(6,"thead",31)(7,"tr")(8,"th",32),h(9,"Customer Tracker"),d()(),c(10,"tr")(11,"th",33),h(12,"S.No"),d(),c(13,"th",33),h(14,"Name"),d(),c(15,"th",33),h(16,"Contact"),d(),c(17,"th",33),h(18,"Location"),d(),c(19,"th",33),h(20,"Site No"),d(),c(21,"th",33),h(22,"Agreement Status"),d(),c(23,"th",33),h(24,"Registration Status"),d(),c(25,"th",33),h(26,"View"),d()()(),c(27,"tbody"),rt(28,jz,2,1,"ng-container",34)(29,Gz,3,0,"ng-template",null,0,Ie),d()()()()}if(n&2){let t=Qe(30),i=k();_(),D("ngIf",i.isCardVisible),_(2),gt("ngModel",i.contactSearchTerm_customertracker),_(25),D("ngIf",i.filteredcustomertracker&&i.filteredcustomertracker.length>0)("ngIfElse",t)}}function Xz(n,e){if(n&1){let t=Nt();c(0,"div",58)(1,"label"),h(2,"Remark:"),d(),c(3,"textarea",45),vt("ngModelChange",function(r){G(t);let a=k(3);return _t(a.db_tracker_data.Customer_comments,r)||(a.db_tracker_data.Customer_comments=r),q(r)}),d()()}if(n&2){let t=k(3);_(3),gt("ngModel",t.db_tracker_data.Customer_comments)}}function Yz(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function $z(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function Kz(n,e){if(n&1&&(pe(0),rt(1,$z,6,5,"tr",55),fe()),n&2){let t=k(3);_(),D("ngForOf",t.get_sl_telecaller_data)}}function Zz(n,e){n&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),d()())}function Jz(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function Qz(n,e){if(n&1&&(pe(0),rt(1,Jz,6,5,"tr",55),fe()),n&2){let t=k(3);_(),D("ngForOf",t.get_cl_telecaller_data)}}function tH(n,e){n&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),d()())}function eH(n,e){if(n&1){let t=Nt();c(0,"div",35)(1,"div",36)(2,"span",20),lt("click",function(){G(t);let r=k(2);return q(r.closePopup())}),h(3,"\xD7"),d(),c(4,"div",59),rt(5,Xz,4,1,"div",57),c(6,"h6"),h(7,"Custome Details"),d(),c(8,"div",38)(9,"table",39)(10,"thead")(11,"tr")(12,"th"),h(13,"Name"),d(),c(14,"th"),h(15,"Source"),d(),c(16,"th"),h(17,"Leads Updated Date"),d(),c(18,"th"),h(19,"Budgets (Capacity)"),d(),c(20,"th"),h(21,"Profession"),d()()(),c(22,"tbody")(23,"tr")(24,"td"),h(25),d(),c(26,"td"),h(27),d(),c(28,"td"),h(29),Et(30,"date"),d(),c(31,"td"),h(32),d(),c(33,"td"),h(34),d()()()()(),c(35,"h6"),h(36,"Sales Tracker"),d(),c(37,"div",38)(38,"table",39)(39,"thead")(40,"tr")(41,"th"),h(42,"Site Vist Status"),d(),c(43,"th"),h(44,"Actual Site Visted Date"),d(),c(45,"th"),h(46,"Token Status"),d(),c(47,"th"),h(48,"Actual Token Received Date"),d()()(),c(49,"tbody")(50,"tr")(51,"td"),h(52),d(),c(53,"td"),h(54),Et(55,"date"),d(),c(56,"td"),h(57),d(),c(58,"td"),h(59),Et(60,"date"),d()()()()(),c(61,"h6"),h(62,"Customer Tracker"),d(),c(63,"div",38)(64,"table",39)(65,"thead")(66,"tr")(67,"th"),h(68,"Agreement Status"),d(),c(69,"th"),h(70,"Actual Agreement Date"),d(),c(71,"th"),h(72,"Registered Status"),d(),c(73,"th"),h(74,"Actual Registered Date"),d()()(),c(75,"tbody")(76,"tr")(77,"td"),h(78),d(),c(79,"td"),h(80),Et(81,"date"),d(),c(82,"td"),h(83),d(),c(84,"td"),h(85),Et(86,"date"),d()()()()()(),c(87,"div",53)(88,"table",39)(89,"thead")(90,"tr")(91,"th",54),h(92,"Database Tracker"),d()()(),c(93,"thead")(94,"tr")(95,"th"),h(96,"Date"),d(),c(97,"th"),h(98,"Customer comments"),d()()(),c(99,"tbody"),rt(100,Yz,6,5,"tr",55),d()(),c(101,"table",39)(102,"thead")(103,"tr")(104,"th",54),h(105,"Sales Tracker"),d()()(),c(106,"thead")(107,"tr")(108,"th"),h(109,"Date"),d(),c(110,"th"),h(111,"Customer comments"),d()()(),c(112,"tbody"),rt(113,Kz,2,1,"ng-container",34)(114,Zz,3,0,"ng-template",null,0,Ie),d()(),c(116,"table",39)(117,"thead")(118,"tr")(119,"th",54),h(120,"Customer Tracker"),d()()(),c(121,"thead")(122,"tr")(123,"th"),h(124,"Date"),d(),c(125,"th"),h(126,"Customer comments"),d()()(),c(127,"tbody"),rt(128,Qz,2,1,"ng-container",34)(129,tH,3,0,"ng-template",null,0,Ie),d()()(),c(131,"button",42),h(132,"Update"),d(),c(133,"button",43),lt("click",function(){G(t);let r=k(2);return q(r.move_to_db(r.db_tracker_data.Db_tracker_id))}),h(134,"Move to Database Tracker"),d()()()}if(n&2){let t=Qe(115),i=k(2);_(5),D("ngIf",i.customers_cmt_card),_(20),A(i.db_tracker_data.Db_name_client),_(2),A(i.db_tracker_data.Db_source),_(2),A(At(30,20,i.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(i.db_tracker_data.Db_budget),_(2),A(i.db_tracker_data.Db_Profession),_(18),A(i.db_tracker_data.Sales_stage1),_(2),A(At(55,23,i.db_tracker_data.Sales_site_visit_date,"dd MMM yy")),_(3),A(i.db_tracker_data.Sales_stage2),_(2),A(At(60,26,i.db_tracker_data.Sales_token_recived_date,"dd MMM yy")),_(19),A(i.db_tracker_data.Customer_stage1),_(2),A(At(81,29,i.db_tracker_data.Customer_agreement_date,"dd MMM yy")),_(3),A(i.db_tracker_data.Customer_stage2),_(2),A(At(86,32,i.db_tracker_data.Customer_registration_date,"dd MMM yy")),_(15),D("ngForOf",i.get_db_telecaller_data),_(13),D("ngIf",i.get_sl_telecaller_data.length>0)("ngIfElse",t),_(15),D("ngIf",i.get_cl_telecaller_data.length>0)("ngIfElse",t),_(3),D("routerLink",te(35,Vy,i.db_tracker_data.Db_tracker_id))}}function iH(n,e){if(n&1){let t=Nt();c(0,"tr",47)(1,"td"),h(2),d(),c(3,"td",49),h(4),d(),Lt(5,"td",49),c(6,"td",49),h(7),d(),c(8,"td"),h(9),d(),c(10,"td",51),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_details_update(r))}),Lt(11,"i",52),d()()}if(n&2){let t=e.$implicit,i=e.index,r=k(3);_(2),A(i+1),_(),D("innerHTML",r.highlightMatch(t.Db_name_client,r.contactSearchTerm_customerdb),$i),_(),de(" ",t.Db_name_client,""),_(),D("innerHTML",r.highlightMatch(t.Db_contact,r.contactSearchTerm_customerdb),$i),_(),D("innerHTML",r.highlightMatch(t.Db_location,r.contactSearchTerm_customerdb),$i),_(),de(" ",t.Db_location,""),_(2),A(t.Sales_site_no)}}function nH(n,e){if(n&1&&(pe(0),rt(1,iH,12,7,"tr",46),fe()),n&2){let t=k(2);_(),D("ngForOf",t.filteredcustomerdb)}}function rH(n,e){n&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),d()())}function aH(n,e){if(n&1){let t=Nt();c(0,"div",25),rt(1,eH,135,37,"div",26),c(2,"div")(3,"input",28),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.contactSearchTerm_customerdb,r)||(a.contactSearchTerm_customerdb=r),q(r)}),d()(),c(4,"div",29)(5,"table",30)(6,"thead",31)(7,"tr")(8,"th",32),h(9,"Customer Database"),d()(),c(10,"tr")(11,"th",33),h(12,"S.No"),d(),c(13,"th",33),h(14,"Name"),d(),c(15,"th",33),h(16,"Contact"),d(),c(17,"th",33),h(18,"Location"),d(),c(19,"th",33),h(20,"Site No"),d(),c(21,"th",33),h(22,"View"),d()()(),c(23,"tbody"),rt(24,nH,2,1,"ng-container",34)(25,rH,3,0,"ng-template",null,0,Ie),d()()()()}if(n&2){let t=Qe(26),i=k();_(),D("ngIf",i.isCardVisible),_(2),gt("ngModel",i.contactSearchTerm_customerdb),_(21),D("ngIf",i.filteredcustomerdb&&i.filteredcustomerdb.length>0)("ngIfElse",t)}}function sH(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function oH(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function lH(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function cH(n,e){if(n&1&&(c(0,"div",58)(1,"table",39)(2,"thead")(3,"tr")(4,"th",54),h(5,"Database Tracker"),d()()(),c(6,"thead")(7,"tr")(8,"th"),h(9,"Date"),d(),c(10,"th"),h(11,"Customer comments"),d()()(),c(12,"tbody"),rt(13,sH,6,5,"tr",55),d()(),c(14,"table",39)(15,"thead")(16,"tr")(17,"th",54),h(18,"Sales Tracker"),d()()(),c(19,"thead")(20,"tr")(21,"th"),h(22,"Date"),d(),c(23,"th"),h(24,"Customer comments"),d()()(),c(25,"tbody"),rt(26,oH,6,5,"tr",55),d()(),c(27,"table",39)(28,"thead")(29,"tr")(30,"th",54),h(31,"Customer Tracker"),d()()(),c(32,"thead")(33,"tr")(34,"th"),h(35,"Date"),d(),c(36,"th"),h(37,"Customer comments"),d()()(),c(38,"tbody"),rt(39,lH,6,5,"tr",55),d()()()),n&2){let t=k(3);_(13),D("ngForOf",t.get_db_telecaller_data),_(13),D("ngForOf",t.get_sl_telecaller_data),_(13),D("ngForOf",t.get_cl_telecaller_data)}}function dH(n,e){if(n&1){let t=Nt();c(0,"div",61),rt(1,cH,40,3,"div",57),c(2,"h6"),h(3,"Custome Details"),d(),c(4,"div",38)(5,"table",39)(6,"thead")(7,"tr")(8,"th"),h(9,"Name"),d(),c(10,"th"),h(11,"Source"),d(),c(12,"th"),h(13,"Leads Updated Date"),d(),c(14,"th"),h(15,"Budgets (Capacity)"),d(),c(16,"th"),h(17,"Profession"),d(),c(18,"th"),h(19,"Customer Comment"),d()()(),c(20,"tbody")(21,"tr")(22,"td"),h(23),d(),c(24,"td"),h(25),d(),c(26,"td"),h(27),Et(28,"date"),d(),c(29,"td"),h(30),d(),c(31,"td"),h(32),d(),c(33,"td")(34,"i",40),lt("click",function(){G(t);let r=k(2);return q(r.get_telecaller_api())}),d()()()()()(),c(35,"h6"),h(36,"Customer Tracker"),d(),c(37,"div",38)(38,"table",39)(39,"thead")(40,"tr")(41,"th"),h(42,"Quality"),d(),c(43,"th"),h(44,"Expecting For Agreement"),d(),c(45,"th"),h(46,"Actual Agreement Date"),d(),c(47,"th"),h(48,"Expecting For Agreement"),d(),c(49,"th"),h(50,"Actual Registered Date"),d(),c(51,"th"),h(52,"Assigned To"),d()()(),c(53,"tbody")(54,"tr")(55,"td"),h(56),d(),c(57,"td"),h(58),Et(59,"date"),d(),c(60,"td"),h(61),Et(62,"date"),d(),c(63,"td"),h(64),Et(65,"date"),d(),c(66,"td"),h(67),Et(68,"date"),d(),c(69,"td"),h(70),d()()()()(),c(71,"label"),h(72,"Remark:"),d(),c(73,"textarea",45),vt("ngModelChange",function(r){G(t);let a=k(2);return _t(a.db_tracker_data.Customer_comments,r)||(a.db_tracker_data.Customer_comments=r),q(r)}),d(),c(74,"button",42),h(75,"Update"),d(),c(76,"button",43),lt("click",function(){G(t);let r=k(2);return q(r.move_to_db(r.db_tracker_data.Db_tracker_id))}),h(77,"Move to Database Tracker"),d()()}if(n&2){let t=k(2);_(),D("ngIf",t.customers_cmt_card),_(22),A(t.db_tracker_data.Db_name_client),_(2),A(t.db_tracker_data.Db_source),_(2),A(At(28,14,t.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_budget),_(2),A(t.db_tracker_data.Db_Profession),_(24),A(t.db_tracker_data.Db_Quality),_(2),A(At(59,17,t.db_tracker_data.Customer_agreement_expected_date,"dd MMM yy")),_(3),A(At(62,20,t.db_tracker_data.Customer_agreement_date,"dd MMM yy")),_(3),A(At(65,23,t.db_tracker_data.Customer_registration_expected_date,"dd MMM yy")),_(3),A(At(68,26,t.db_tracker_data.Customer_registration_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_assign_to),_(3),gt("ngModel",t.db_tracker_data.Customer_comments),_(),D("routerLink",te(29,Vy,t.db_tracker_data.Db_tracker_id))}}function uH(n,e){if(n&1){let t=Nt();c(0,"tr",50)(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td"),h(10),Et(11,"date"),d(),c(12,"td",56),Et(13,"date"),h(14),d(),c(15,"td",51),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_telle_customer(r))}),Lt(16,"i",52),d()()}if(n&2){let t=e.$implicit,i=e.index,r=k(3);D("ngClass",Ns(14,Dg,r.isToday(t.Customer_registration_expected_date),r.isPast(t.Customer_registration_expected_date),r.isEmptyDate(t.Customer_registration_expected_date),r.isUpcoming(t.Customer_registration_expected_date))),_(2),A(i+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),de(" ",t.Customer_registration_expected_date?At(11,8,t.Customer_registration_expected_date,"dd MMM yy"):"Date Not Fixed"," "),_(2),D("title",At(13,11,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Customer_stage2||"Registration Not Completed"," ")}}function hH(n,e){if(n&1&&(pe(0),rt(1,uH,17,19,"tr",62),fe()),n&2){let t=k(2);_(),D("ngForOf",t.telecallers_registration)}}function pH(n,e){n&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),d()())}function fH(n,e){if(n&1){let t=Nt();c(0,"tr",50)(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td"),h(10),Et(11,"date"),d(),c(12,"td",56),Et(13,"date"),h(14),d(),c(15,"td",51),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_telle_customer(r))}),Lt(16,"i",52),d()()}if(n&2){let t=e.$implicit,i=e.index,r=k(3);D("ngClass",Ns(14,Dg,r.isToday(t.Customer_agreement_expected_date),r.isPast(t.Customer_agreement_expected_date),r.isEmptyDate(t.Customer_agreement_expected_date),r.isUpcoming(t.Customer_agreement_expected_date))),_(2),A(i+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),de(" ",t.Customer_agreement_expected_date?At(11,8,t.Customer_agreement_expected_date,"dd MMM yy"):"Date Not Fixed"," "),_(2),D("title",At(13,11,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Customer_stage1||"Agreement Not Completed"," ")}}function mH(n,e){if(n&1&&(pe(0),rt(1,fH,17,19,"tr",62),fe()),n&2){let t=k(2);_(),D("ngForOf",t.telecallers_agreement)}}function gH(n,e){n&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),d()())}function _H(n,e){if(n&1){let t=Nt();c(0,"tr",50)(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td"),h(10),Et(11,"date"),d(),c(12,"td",56),Et(13,"date"),h(14),d(),c(15,"td",51),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_telle_update(r))}),Lt(16,"i",52),d()()}if(n&2){let t=e.$implicit,i=e.index,r=k(3);D("ngClass",Ns(14,Dg,r.isToday(t.Sales_token_execpted_date),r.isPast(t.Sales_token_execpted_date),r.isEmptyDate(t.Sales_token_execpted_date),r.isUpcoming(t.Sales_token_execpted_date))),_(2),A(i+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),de(" ",t.Sales_token_execpted_date?At(11,8,t.Sales_token_execpted_date,"dd MMM yy"):"Date Not Fixed"," "),_(2),D("title",At(13,11,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Sales_stage2||"Token Not Completed"," ")}}function vH(n,e){if(n&1&&(pe(0),rt(1,_H,17,19,"tr",62),fe()),n&2){let t=k(2);_(),D("ngForOf",t.telecallers_token)}}function xH(n,e){n&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),d()())}function bH(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function yH(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),Et(3,"date"),d(),c(4,"td"),h(5),d()()),n&2){let t=e.$implicit;_(2),A(At(3,2,t.tele_date,"dd MMM yy (hh:mm a)")),_(3),A(t.tele_comments)}}function SH(n,e){if(n&1&&(c(0,"div",44)(1,"table",39)(2,"thead")(3,"tr")(4,"th",54),h(5,"Database Tracker"),d()()(),c(6,"thead")(7,"tr")(8,"th"),h(9,"Date"),d(),c(10,"th"),h(11,"Customer comments"),d()()(),c(12,"tbody"),rt(13,bH,6,5,"tr",55),d()(),c(14,"table",39)(15,"thead")(16,"tr")(17,"th",54),h(18,"Sales Tracker"),d()()(),c(19,"thead")(20,"tr")(21,"th"),h(22,"Date"),d(),c(23,"th"),h(24,"Customer comments"),d()()(),c(25,"tbody"),rt(26,yH,6,5,"tr",55),d()()()),n&2){let t=k(3);_(13),D("ngForOf",t.get_db_telecaller_data),_(13),D("ngForOf",t.get_sl_telecaller_data)}}function wH(n,e){if(n&1){let t=Nt();c(0,"div",61),rt(1,SH,27,2,"div",37),c(2,"h6"),h(3,"Custome Details"),d(),c(4,"div",38)(5,"table",39)(6,"thead")(7,"tr")(8,"th"),h(9,"Name"),d(),c(10,"th"),h(11,"Source"),d(),c(12,"th"),h(13,"Leads Updated Date"),d(),c(14,"th"),h(15,"Budgets (Capacity)"),d(),c(16,"th"),h(17,"Profession"),d(),c(18,"th"),h(19,"Customer Comment"),d()()(),c(20,"tbody")(21,"tr")(22,"td"),h(23),d(),c(24,"td"),h(25),d(),c(26,"td"),h(27),Et(28,"date"),d(),c(29,"td"),h(30),d(),c(31,"td"),h(32),d(),c(33,"td")(34,"i",40),lt("click",function(){G(t);let r=k(2);return q(r.get_telecaller_api())}),d()()()()()(),c(35,"h6"),h(36,"Sales Details"),d(),c(37,"div",38)(38,"table",39)(39,"thead")(40,"tr")(41,"th"),h(42,"Quality"),d(),c(43,"th"),h(44,"Expected Site Visited Date"),d(),c(45,"th"),h(46,"Actual Site Visited Date"),d(),c(47,"th"),h(48,"Expecting For Token"),d(),c(49,"th"),h(50,"Actual Token Received Date"),d(),c(51,"th"),h(52,"Assigned To"),d()()(),c(53,"tbody")(54,"tr")(55,"td"),h(56),d(),c(57,"td"),h(58),Et(59,"date"),d(),c(60,"td"),h(61),Et(62,"date"),d(),c(63,"td"),h(64),Et(65,"date"),d(),c(66,"td"),h(67),Et(68,"date"),d(),c(69,"td"),h(70),d()()()()(),c(71,"label"),h(72,"Remark:"),d(),c(73,"textarea",45),vt("ngModelChange",function(r){G(t);let a=k(2);return _t(a.db_tracker_data.Sales_remarks,r)||(a.db_tracker_data.Sales_remarks=r),q(r)}),d(),c(74,"button",42),h(75,"Update"),d(),c(76,"button",43),lt("click",function(){G(t);let r=k(2);return q(r.move_to_db(r.db_tracker_data.Db_tracker_id))}),h(77,"Move to Database Tracker"),d()()}if(n&2){let t=k(2);_(),D("ngIf",t.customers_cmt_card),_(22),A(t.db_tracker_data.Db_name_client),_(2),A(t.db_tracker_data.Db_source),_(2),A(At(28,14,t.db_tracker_data.Db_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_budget),_(2),A(t.db_tracker_data.Db_Profession),_(24),A(t.db_tracker_data.Db_Quality),_(2),A(At(59,17,t.db_tracker_data.Sales_site_visit_execpted_date,"dd-MMM-yy")),_(3),A(At(62,20,t.db_tracker_data.Sales_site_visit_date,"dd MMM yy")),_(3),A(At(65,23,t.db_tracker_data.Sales_token_execpted_date,"dd-MMM-yy")),_(3),A(At(68,26,t.db_tracker_data.Sales_token_recived_date,"dd MMM yy")),_(3),A(t.db_tracker_data.Db_assign_to),_(3),gt("ngModel",t.db_tracker_data.Sales_remarks),_(),D("routerLink",te(29,o5,t.db_tracker_data.Db_tracker_id))}}function CH(n,e){if(n&1){let t=Nt();c(0,"tr",50)(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td"),h(10),Et(11,"date"),d(),c(12,"td",56),Et(13,"date"),h(14),d(),c(15,"td",51),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_telle_update(r))}),Lt(16,"i",52),d()()}if(n&2){let t=e.$implicit,i=e.index,r=k(3);D("ngClass",Ns(14,Dg,r.isToday(t.Sales_site_visit_execpted_date),r.isPast(t.Sales_site_visit_execpted_date),r.isEmptyDate(t.Sales_site_visit_execpted_date),r.isUpcoming(t.Sales_site_visit_execpted_date))),_(2),A(i+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),de(" ",t.Sales_site_visit_execpted_date?At(11,8,t.Sales_site_visit_execpted_date,"dd MMM yy"):"Date Not Fixed"," "),_(2),D("title",At(13,11,t.Customer_registration_date,"dd-MMM-yy")),_(2),de(" ",t.Sales_stage1||"Site Visit Not Completed"," ")}}function MH(n,e){if(n&1&&(pe(0),rt(1,CH,17,19,"tr",62),fe()),n&2){let t=k(2);_(),D("ngForOf",t.telecallers_site_visit)}}function EH(n,e){n&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),d()())}function AH(n,e){if(n&1&&(c(0,"div",25),rt(1,dH,78,31,"div",60),c(2,"div",29)(3,"table",30)(4,"thead",31)(5,"tr")(6,"th",32),h(7,"Registration"),d()(),c(8,"tr")(9,"th",33),h(10,"S.No"),d(),c(11,"th",33),h(12,"Name"),d(),c(13,"th",33),h(14,"Contact"),d(),c(15,"th",33),h(16,"Location"),d(),c(17,"th",33),h(18,"Expecting For Agreement"),d(),c(19,"th",33),h(20,"Status"),d(),c(21,"th",33),h(22,"View"),d()()(),c(23,"tbody"),rt(24,hH,2,1,"ng-container",34)(25,pH,3,0,"ng-template",null,0,Ie),d()()(),c(27,"div",29)(28,"table",30)(29,"thead",31)(30,"tr")(31,"th",32),h(32,"Agreement"),d()(),c(33,"tr")(34,"th",33),h(35,"S.No"),d(),c(36,"th",33),h(37,"Name"),d(),c(38,"th",33),h(39,"Contact"),d(),c(40,"th",33),h(41,"Location"),d(),c(42,"th",33),h(43,"Expecting For Agreement"),d(),c(44,"th",33),h(45,"Status"),d(),c(46,"th",33),h(47,"View"),d()()(),c(48,"tbody"),rt(49,mH,2,1,"ng-container",34)(50,gH,3,0,"ng-template",null,0,Ie),d()()(),c(52,"div",29)(53,"table",30)(54,"thead",31)(55,"tr")(56,"th",32),h(57,"Token"),d()(),c(58,"tr")(59,"th",33),h(60,"S.No"),d(),c(61,"th",33),h(62,"Name"),d(),c(63,"th",33),h(64,"Contact"),d(),c(65,"th",33),h(66,"Location"),d(),c(67,"th",33),h(68,"Expecting For Token"),d(),c(69,"th",33),h(70,"Status"),d(),c(71,"th",33),h(72,"View"),d()()(),c(73,"tbody"),rt(74,vH,2,1,"ng-container",34)(75,xH,3,0,"ng-template",null,0,Ie),d()()(),rt(77,wH,78,31,"div",60),c(78,"div",29)(79,"table",30)(80,"thead",31)(81,"tr")(82,"th",32),h(83,"Site Visit"),d()(),c(84,"tr")(85,"th",33),h(86,"S.No"),d(),c(87,"th",33),h(88,"Name"),d(),c(89,"th",33),h(90,"Contact"),d(),c(91,"th",33),h(92,"Location"),d(),c(93,"th",33),h(94,"Expecting For Site Visit"),d(),c(95,"th",33),h(96,"Status"),d(),c(97,"th",33),h(98,"View"),d()()(),c(99,"tbody"),rt(100,MH,2,1,"ng-container",34)(101,EH,3,0,"ng-template",null,0,Ie),d()()()()),n&2){let t=Qe(26),i=k();_(),D("ngIf",i.is_telle_customer_Card),_(23),D("ngIf",i.telecallers_registration&&i.telecallers_registration.length>0)("ngIfElse",t),_(25),D("ngIf",i.telecallers_agreement&&i.telecallers_agreement.length>0)("ngIfElse",t),_(25),D("ngIf",i.telecallers_token&&i.telecallers_token.length>0)("ngIfElse",t),_(3),D("ngIf",i.is_telle_sales_Card),_(23),D("ngIf",i.telecallers_site_visit&&i.telecallers_site_visit.length>0)("ngIfElse",t)}}function TH(n,e){if(n&1){let t=Nt();c(0,"tr",47)(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td",51),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.sales_details_update(r))}),Lt(10,"i",52),d()()}if(n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.site_no),_(2),A(t.is_site_booked?"Not Available":"Available"),_(2),A(t.Project_id===1?"Anbu Avenue":t.Project_id===2?"RVS Avenue":"")}}function kH(n,e){if(n&1&&(pe(0),rt(1,TH,11,4,"tr",46),fe()),n&2){let t=k(2);_(),D("ngForOf",t.site_details)}}function IH(n,e){n&1&&(c(0,"tr")(1,"td",48),h(2,"No Data Found"),d()())}function DH(n,e){if(n&1&&(c(0,"div",25)(1,"button",27),h(2,"Add Site"),d(),Lt(3,"br")(4,"br"),c(5,"div",29)(6,"table",30)(7,"thead",31)(8,"tr")(9,"th",32),h(10,"Site Details"),d()(),c(11,"tr")(12,"th",33),h(13,"S.No"),d(),c(14,"th",33),h(15,"Site Number"),d(),c(16,"th",33),h(17,"Status"),d(),c(18,"th",33),h(19,"Project"),d(),c(20,"th",33),h(21,"View"),d()()(),c(22,"tbody"),rt(23,kH,2,1,"ng-container",34)(24,IH,3,0,"ng-template",null,0,Ie),d()()()()),n&2){let t=Qe(25),i=k();_(),D("routerLink",te(3,az,i.project_id)),_(22),D("ngIf",i.site_details&&i.site_details.length>0)("ngIfElse",t)}}function PH(n,e){if(n&1&&(c(0,"div",25)(1,"button",27),h(2,"Financial Goal"),d(),c(3,"button",27),h(4,"New Booking"),d(),c(5,"button",63),h(6,"Functional Status"),d()()),n&2){let t=k();_(),D("routerLink",te(3,sz,t.project_id)),_(2),D("routerLink",te(5,oz,t.project_id)),_(2),D("routerLink",te(7,lz,t.project_id))}}var Ig=class n{constructor(e,t,i,r,a){this.route=e;this.apiService=t;this.http=i;this.domSanitizer=r;this.userService=a}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}selectedModule="";modules=["Database Tracker","Sales Tracker","Customer Tracker","Customer Database","Telecaller","Manage Site","Manage Report"];selectModule(e){this.selectedModule=e}updateactualtask=null;project_id=null;dbtracker_api_url="";sales_telecallers_comments_url="";site_details_url="";ngOnInit(){this.get_data(),this.dbtracker_api_url=this.apiService.sales_dbtracker_api(),this.sales_telecallers_comments_url=this.apiService.sales_telecallers_comments_api(),this.site_details_url=this.apiService.site_details_api(),this.url_parameters(),this.project_name(),this.get_dbtracker_api(),this.retrive_data(),setTimeout(()=>{this.get_telecaller_data(),this.get_telecaller_api(),this.get_site_details()},2e3)}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}card_name="";retrive_data(){this.card_name=this.apiService.get_redirect_card(),this.selectedModule=this.card_name}url_parameters(){this.route.params.subscribe(e=>{this.project_id=parseInt(e.salesprojectid),this.updateactualtask=e.cardName})}project_names="";project_name(){setTimeout(()=>{this.project_id==1?this.project_names="ANBU AVENUE":this.project_id==2&&(this.project_names="RVS AVENUE")},.1)}get_dbtracker_data=[];get_sales_tracker_data=[];get_sales_customer_tracker_data=[];get_sales_customer_database_data=[];get_telecallers_data=[];get_dbtracker_api(){let e=new Date;this.http.get(this.dbtracker_api_url).subscribe(t=>{this.get_dbtracker_data=t.filter(i=>i.project_id===this.project_id&&i.is_db_tracker===!0),this.get_sales_tracker_data=t.filter(i=>i.project_id===this.project_id&&i.is_sales_tracker===!0),this.get_sales_customer_tracker_data=t.filter(i=>i.project_id===this.project_id&&i.is_customer_tracker===!0),this.get_sales_customer_database_data=t.filter(i=>i.project_id===this.project_id&&i.is_customer_database===!0),this.get_telecallers_data=t.filter(i=>i.project_id===this.project_id)},t=>{console.error("Error fetching items",t)})}telecallers_token=[];telecallers_agreement=[];telecallers_registration=[];telecallers_site_visit=[];get_telecaller_data(){let e=new Date().setHours(0,0,0,0);this.telecallers_site_visit=this.get_telecallers_data.filter(t=>{let i=new Date(t.Sales_site_visit_execpted_date).setHours(0,0,0,0);return t.Sales_stage1!=="Site Visit Completed"&&t.Db_status==="Connected"}).sort((t,i)=>{let r=new Date(t.Sales_site_visit_execpted_date).setHours(0,0,0,0),a=new Date(i.Sales_site_visit_execpted_date).setHours(0,0,0,0);return r>=e&&a>=e||r<e&&a<e?r-a:r>=e?-1:1}),this.telecallers_token=this.get_telecallers_data.filter(t=>{let i=new Date(t.Sales_token_execpted_date).setHours(0,0,0,0);return t.Sales_stage2!=="Token Received"&&t.Sales_stage1==="Site Visit Completed"}).sort((t,i)=>{let r=new Date(t.Sales_token_execpted_date).setHours(0,0,0,0),a=new Date(i.Sales_token_execpted_date).setHours(0,0,0,0);return r>=e&&a>=e||r<e&&a<e?r-a:r>=e?-1:1}),this.telecallers_agreement=this.get_telecallers_data.filter(t=>{let i=new Date(t.Customer_agreement_expected_date).setHours(0,0,0,0);return t.Customer_stage1!=="Agreement Completed"&&t.Sales_stage2==="Token Received"}).sort((t,i)=>{let r=new Date(t.Customer_agreement_expected_date).setHours(0,0,0,0),a=new Date(i.Customer_agreement_expected_date).setHours(0,0,0,0);return r>=e&&a>=e||r<e&&a<e?r-a:r>=e?-1:1}),this.telecallers_registration=this.get_telecallers_data.filter(t=>{let i=new Date(t.Customer_registration_expected_date).setHours(0,0,0,0);return t.Customer_stage2!=="Registration Completed"&&t.Customer_stage1==="Agreement Completed"}).sort((t,i)=>{let r=new Date(t.Customer_registration_expected_date).setHours(0,0,0,0),a=new Date(i.Customer_registration_expected_date).setHours(0,0,0,0);return r>=e&&a>=e||r<e&&a<e?r-a:r>=e?-1:1})}isToday(e){let t=new Date().setHours(0,0,0,0),i=new Date(e).setHours(0,0,0,0);return t===i}isPast(e){let t=new Date().setHours(0,0,0,0);return new Date(e).setHours(0,0,0,0)<t}isEmptyDate(e){return!e||new Date(e).toString()==="Invalid Date"}isUpcoming(e){let t=new Date().setHours(0,0,0,0);return new Date(e).setHours(0,0,0,0)>t&&!this.isEmptyDate(e)}contactSearchTerm_dbtracker="";get filteredDbTrackerData(){let e=this.contactSearchTerm_dbtracker.toLowerCase();return this.get_dbtracker_data.filter(t=>{let i=t.Db_status?t.Db_status.toLowerCase():null;return e==="Connected"?i==="Connected":e==="Not Connected"?i==="Not Connected"&&i===null:t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e)||i&&i.includes(e)})}isCardVisible=!1;db_tracker_data;sales_details_update(e){this.isCardVisible=!0,this.db_tracker_data=e,this.get_telecaller_api()}is_telle_sales_Card=!1;sales_telle_update(e){this.is_telle_sales_Card=!0,this.db_tracker_data=e}is_telle_customer_Card=!1;sales_telle_customer(e){this.is_telle_customer_Card=!0,this.db_tracker_data=e}onDocumentClick(e){let t=document.querySelector(".pop-card");t&&!t.contains(e.target)&&(this.isCardVisible=!1,this.is_telle_sales_Card=!1,this.is_telle_customer_Card=!1);let i=document.querySelector(".pop-card-cmt");i&&!i.contains(e.target)&&(this.customers_cmt_card=!1);let r=document.querySelector(".popup-card");r&&!r.contains(e.target)&&(this.isCardVisible=!1)}closePopup(){this.isCardVisible=!1}showCommentCard=!1;currentComment="";showComments(e){this.currentComment=e,this.showCommentCard=!0}closeComments(){this.showCommentCard=!1}contactSearchTerm_salestracker_u="";get filteredsalestracker_u(){let e=this.contactSearchTerm_salestracker_u.toLowerCase();return this.get_sales_tracker_data.filter(t=>t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e))}contactSearchTerm_customertracker="";get filteredcustomertracker(){let e=this.contactSearchTerm_customertracker.toLowerCase();return this.get_sales_customer_tracker_data.filter(t=>t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e))}contactSearchTerm_customerdb="";get filteredcustomerdb(){let e=this.contactSearchTerm_customerdb.toLowerCase();return this.get_sales_customer_database_data.filter(t=>t.Db_contact.toLowerCase().includes(e)||t.Db_name_client.toLowerCase().includes(e)||t.Db_location.toLowerCase().includes(e))}highlightMatch(e,t){if(!t)return e;let i=new RegExp(`(${t})`,"gi"),r=e.replace(i,'<span style="background-color: yellow;">$1</span>');return this.domSanitizer.bypassSecurityTrustHtml(r)}successmgs=!1;set_sucess_message="";create_sales_tracker(e){let t=this.dbtracker_api_url+e,i={is_db_tracker:!1,is_sales_tracker:!0},r={headers:new ti({"Content-Type":"application/json"})};this.http.put(t,i,r).subscribe(a=>{console.log(a),this.set_sucess_message="Passed To Sales Tracker",this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.set_sucess_message="",this.get_dbtracker_api()},1e3)},a=>{console.log("Post request failed",a)}),this.isCardVisible=!1}move_to_db(e){let t=this.dbtracker_api_url+e,i={headers:new ti({"Content-Type":"application/json"})};this.http.put(t,{is_db_tracker:!0,is_sales_tracker:!1,is_customer_tracker:!1,is_customer_database:!1},i).subscribe({next:r=>{console.log(r),this.successmgs=!1,this.set_sucess_message="Moved To Database Tracker",setTimeout(()=>this.get_dbtracker_api(),1e3)},error:r=>console.log("Post request failed",r)}),this.isCardVisible=!1}customers_cmt_card=!1;get_db_telecaller_data=[];get_sl_telecaller_data=[];get_cl_telecaller_data=[];get_telecaller_api(){this.http.get(this.sales_telecallers_comments_url).subscribe(e=>{this.get_db_telecaller_data=e.filter(t=>t.Db_tracker_id===this.db_tracker_data.Db_tracker_id&&t.module_name==="Databe tracker"),this.get_sl_telecaller_data=e.filter(t=>t.Db_tracker_id===this.db_tracker_data.Db_tracker_id&&t.module_name==="Sales tracker"),this.get_cl_telecaller_data=e.filter(t=>t.Db_tracker_id===this.db_tracker_data.Db_tracker_id&&t.module_name==="Customer tracker")},e=>{console.error("Error fetching items",e)})}remarks_card(){this.customers_cmt_card=!0}site_details=[];get_site_details(){this.http.get(this.site_details_url).subscribe(e=>{this.site_details=e.filter(t=>t.Project_id==this.project_id)},e=>{console.error("Error fetching items",e)})}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(kd),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-view-sales-details"]],hostBindings:function(t,i){t&1&&lt("click",function(a){return i.onDocumentClick(a)},!1,dl)},decls:27,vars:17,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"bradcrumb-card"],["style","width: 25%;","class","alert-card fade-in",4,"ngIf"],[1,"container","my-4"],[1,"form-group","module-dropdown"],["for","moduleSelect"],["id","moduleSelect",1,"custom-input",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"module-card"],[1,"module-list"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","comment-card",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"alert-card","fade-in",2,"width","25%"],[1,"alert-content"],[1,"close-btn",3,"click"],[3,"value"],[3,"click","ngClass"],[1,"comment-card"],[1,"btn","btn-secondary",3,"click"],[1,"mt-5"],["class","popup-container",4,"ngIf"],[1,"submit-btn",2,"width","180px",3,"routerLink"],["type","text","placeholder","Search Details",1,"custom-input","mb-2",3,"ngModelChange","ngModel"],["id","content-to-pdf",1,"table-responsive"],[1,"table","table-bordered","table-striped"],[1,"table-header"],["colspan","15",1,"main-header"],[1,"goal"],[4,"ngIf","ngIfElse"],[1,"popup-container"],[1,"popup-card"],["class","pop-card-cmt",4,"ngIf"],[1,"table-responsive"],[1,"custmer-table"],[1,"fas","fa-comment-alt",3,"click"],[1,"custome-cmd","table-responsive"],[1,"submit-btn",3,"routerLink"],[1,"submit-btn",2,"width","300px",3,"click"],[1,"pop-card-cmt"],["readonly","",1,"custom-input",3,"ngModelChange","ngModel"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],["colspan","15",2,"text-align","center"],[3,"innerHTML"],[3,"ngClass"],[3,"click"],[1,"fas","fa-eye"],[1,"custome-cmd"],["colspan","2"],[4,"ngFor","ngForOf"],[3,"title"],["class","pop-card-cmt mt-5",4,"ngIf"],[1,"pop-card-cmt","mt-5"],[1,"scrol-card"],["class","pop-card",4,"ngIf"],[1,"pop-card"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"submit-btn",2,"width","200px",3,"routerLink"]],template:function(t,i){t&1&&(c(0,"app-header",1),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"p"),h(6),d()(),rt(7,cz,7,1,"div",6),c(8,"div",7)(9,"div",8)(10,"label",9),h(11,"Select Module"),d(),c(12,"select",10),vt("ngModelChange",function(a){return _t(i.selectedModule,a)||(i.selectedModule=a),a}),c(13,"option",11),h(14,"Select a Module"),d(),rt(15,dz,2,2,"option",12),d()(),c(16,"div",13)(17,"ul",14),rt(18,uz,2,4,"li",15),d()(),rt(19,hz,5,1,"div",16)(20,yz,35,7,"div",17)(21,Lz,31,4,"div",17)(22,qz,31,4,"div",17)(23,aH,27,4,"div",17)(24,AH,103,10,"div",17)(25,DH,26,5,"div",17)(26,PH,7,9,"div",17),d()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(15,tz,!i.isSidebarOpen)),_(4),A(i.project_names),_(),D("ngIf",i.successmgs),_(5),gt("ngModel",i.selectedModule),_(3),D("ngForOf",i.modules),_(3),D("ngForOf",i.modules),_(),D("ngIf",i.showCommentCard),_(),D("ngIf",i.selectedModule==="Database Tracker"),_(),D("ngIf",i.selectedModule==="Sales Tracker"),_(),D("ngIf",i.selectedModule==="Customer Tracker"),_(),D("ngIf",i.selectedModule==="Customer Database"),_(),D("ngIf",i.selectedModule==="Telecaller"),_(),D("ngIf",i.selectedModule==="Manage Site"),_(),D("ngIf",i.selectedModule==="Manage Report"))},dependencies:[Ke,Hi,mi,on,xn,bn,ln,cn,Ki,Gi,ei,ii,Vr],styles:['.goal[_ngcontent-%COMP%]{background-color:#d6a6be;text-align:center}.actual[_ngcontent-%COMP%]{background-color:#92c47d;text-align:center}.sts-all[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.table-row[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.main-header[_ngcontent-%COMP%]{background-color:#741b48;color:#fff}i[_ngcontent-%COMP%]{cursor:pointer;color:gray;transition:.1s}i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#492020}.comment-card[_ngcontent-%COMP%]{padding:1rem;background:#f9f9f9;border:1px solid #ddd;border-radius:8px;position:fixed;top:20%;left:50%;transform:translate(-50%,-50%);max-width:300px;box-shadow:0 2px 10px #0000001a;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translate(-50%,-60%)}to{opacity:1;transform:translate(-50%,-50%)}}.popup-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.popup-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:20px;box-shadow:0 5px 15px #0000004d;text-align:center;animation:_ngcontent-%COMP%_popupFadeIn .3s ease;position:relative}.scrol-card[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:auto;max-width:100%;box-sizing:border-box;margin-bottom:2%}.close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;font-size:24px;font-weight:700;color:#333;cursor:pointer;transition:color .3s ease}.close-btn[_ngcontent-%COMP%]:hover{color:red}@keyframes _ngcontent-%COMP%_popupFadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@media screen and (max-width: 768px){.popup-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.popup-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:20px;width:100%;box-shadow:0 5px 15px #0000004d;text-align:center;animation:_ngcontent-%COMP%_popupFadeIn .3s ease;position:relative}.scrol-card[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:auto;max-height:200px;max-width:100%;box-sizing:border-box;margin-bottom:2%}}.pop-card-cmt[_ngcontent-%COMP%]{position:fixed;background-color:#f0f4f8;padding:2%;border-radius:10px;top:45%;left:50%;transform:translate(-50%,-50%);box-shadow:0 4px 10px #0003}@media (max-width: 600px){.data-table[_ngcontent-%COMP%]{font-size:14px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px}}.custmer-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-family:Arial,sans-serif;margin:20px 0;box-shadow:0 2px 5px #0000001a}.custmer-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.custmer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;font-size:14px;text-transform:uppercase;letter-spacing:1px}.custmer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}.custmer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.custmer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px;text-align:left;border-bottom:1px solid #ddd}.custmer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .custmer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.custmer-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover:after{content:"View Customer Comment";position:absolute;background-color:#333;color:#fff;padding:5px;font-size:12px;border-radius:5px;bottom:30px;left:50%;transform:translate(-50%);opacity:0;transition:opacity .3s}.custmer-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover:after{opacity:1}.green-text[_ngcontent-%COMP%]{color:green}.red-text[_ngcontent-%COMP%]{color:red}.custome-cmd[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:auto;max-height:200px;max-width:100%;box-sizing:border-box;margin-bottom:2%}.custome-cmd[_ngcontent-%COMP%]::-webkit-scrollbar{width:2px;height:8px}.custome-cmd[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.custome-cmd[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.custome-cmd[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.custome-cmd[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.custome-cmd[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .custome-cmd[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}table.table-bordered[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.today-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff!important;font-weight:lighter}table.table-bordered[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.past-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:red!important;color:#fff!important;font-weight:lighter}table.table-bordered[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.empty-date-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#ff0!important;color:#000!important;font-weight:400}table.table-bordered[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.upcoming-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:orange!important;color:#fff!important;font-weight:400}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{background-clip:padding-box}table.table-bordered[_ngcontent-%COMP%]{background-color:transparent!important}table.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:inherit!important}']})};var LH=n=>({"full-width":n});function RH(n,e){if(n&1&&(c(0,"div",5)(1,"div",13)(2,"p"),h(3),d()()()),n&2){let t=k();_(3),A(t.project_name)}}function OH(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",21),h(3),d(),c(4,"td",21),h(5),d(),c(6,"td",22),h(7),d(),c(8,"td",22),h(9),d(),c(10,"td",22),h(11),d(),c(12,"td",22),h(13),d()(),c(14,"tr")(15,"td",23),h(16),d(),c(17,"td",23),h(18),d(),c(19,"td",23),h(20),d(),c(21,"td",23),h(22),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.SourceName),_(2),A(t.GoalLeads),_(2),A(t.GoalTotalCost),_(2),A(t.GoalConversions),_(2),A(t.GoalRegistrations),_(3),A(t.NumberOfLeads),_(2),A(t.ActualTotalCost),_(2),A(t.Completed_SiteVisits),_(2),A(t.Completed_Registration)}}function NH(n,e){if(n&1&&(pe(0),rt(1,OH,23,10,"ng-container",20),fe()),n&2){let t=k(2);_(),D("ngForOf",t.final_maeeting_data)}}function FH(n,e){n&1&&(c(0,"tr")(1,"td",24),h(2,"No task found"),d()())}function BH(n,e){if(n&1&&(c(0,"div",14)(1,"table",15)(2,"thead")(3,"tr")(4,"th",16),h(5,"Leads"),d()(),c(6,"tr",17)(7,"th"),h(8,"S.No"),d(),c(9,"th"),h(10,"Tasks"),d(),c(11,"th",18),h(12,"Leads"),d(),c(13,"th",18),h(14,"Cost"),d(),c(15,"th",18),h(16,"Conversion"),d(),c(17,"th",18),h(18,"Registration"),d()()(),c(19,"tbody"),rt(20,NH,2,1,"ng-container",19),d(),rt(21,FH,3,0,"ng-template",null,0,Ie),d()()),n&2){let t=Qe(22),i=k();_(20),D("ngIf",i.final_maeeting_data&&i.final_maeeting_data.length>0)("ngIfElse",t)}}var Pg=class n{constructor(e,t,i,r,a){this.route=e;this.apiService=t;this.http=i;this.router=r;this.userService=a}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}project_id=null;ngOnInit(){this.get_data(),this.route.params.subscribe(e=>{this.project_id=parseInt(e.projectid)}),this.apifromservice(),this.total_values_anbu(),this.total_values_rvs(),this.total_values_agasthya_prime()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}marketing_meeting_url="";apifromservice(){this.marketing_meeting_url=this.apiService.marketing_meeting_api()}get_meeting_data=[];project_anubu_avenue=[];project_rvs_avenue=[];total_actual_leads_1=null;total_actual_cost_1=null;total_actual_conversion_1=null;total_goal_leads_1=null;total_goal_cost_1=null;total_goal_conversion_1=null;total_actual_leads_2=null;total_actual_cost_2=null;total_actual_conversion_2=null;total_goal_leads_2=null;total_goal_cost_2=null;total_goal_conversion_2=null;total_actual_leads_3=null;total_actual_cost_3=null;total_actual_conversion_3=null;total_goal_leads_3=null;total_goal_cost_3=null;total_goal_conversion_3=null;total_values_anbu(){let e=`${this.apiService.marketing_meeting_data_api()}?ProjectID= 1`;this.http.get(e).subscribe(t=>{this.final_maeeting_data=t.data,this.total_actual_leads_1=this.final_maeeting_data.reduce((i,r)=>i+(r.NumberOfLeads||0),0),this.total_actual_cost_1=this.final_maeeting_data.reduce((i,r)=>i+(r.ActualTotalCost||0),0),this.total_actual_conversion_1=this.final_maeeting_data.reduce((i,r)=>i+(r.Completed_SiteVisits||0),0),this.total_goal_leads_1=this.final_maeeting_data.reduce((i,r)=>i+(r.GoalLeads||0),0),this.total_goal_cost_1=this.final_maeeting_data.reduce((i,r)=>i+(r.GoalTotalCost||0),0),this.total_goal_conversion_1=this.final_maeeting_data.reduce((i,r)=>i+(r.GoalConversions||0),0)},t=>{console.error("Error fetching items",t)})}total_values_rvs(){let e=`${this.apiService.marketing_meeting_data_api()}?ProjectID= 2`;this.http.get(e).subscribe(t=>{this.final_maeeting_data=t.data,this.total_actual_leads_2=this.final_maeeting_data.reduce((i,r)=>i+(r.NumberOfLeads||0),0),this.total_actual_cost_2=this.final_maeeting_data.reduce((i,r)=>i+(r.ActualTotalCost||0),0),this.total_actual_conversion_2=this.final_maeeting_data.reduce((i,r)=>i+(r.Completed_SiteVisits||0),0),this.total_goal_leads_2=this.final_maeeting_data.reduce((i,r)=>i+(r.GoalLeads||0),0),this.total_goal_cost_2=this.final_maeeting_data.reduce((i,r)=>i+(r.GoalTotalCost||0),0),this.total_goal_conversion_2=this.final_maeeting_data.reduce((i,r)=>i+(r.GoalConversions||0),0)},t=>{console.error("Error fetching items",t)})}total_values_agasthya_prime(){let e=`${this.apiService.marketing_meeting_data_api()}?ProjectID= 3`;this.http.get(e).subscribe(t=>{this.final_maeeting_data=t.data,this.total_actual_leads_3=this.final_maeeting_data.reduce((i,r)=>i+(r.NumberOfLeads||0),0),this.total_actual_cost_3=this.final_maeeting_data.reduce((i,r)=>i+(r.ActualTotalCost||0),0),this.total_actual_conversion_3=this.final_maeeting_data.reduce((i,r)=>i+(r.Completed_SiteVisits||0),0),this.total_goal_leads_3=this.final_maeeting_data.reduce((i,r)=>i+(r.GoalLeads||0),0),this.total_goal_cost_3=this.final_maeeting_data.reduce((i,r)=>i+(r.GoalTotalCost||0),0),this.total_goal_conversion_3=this.final_maeeting_data.reduce((i,r)=>i+(r.GoalConversions||0),0)},t=>{console.error("Error fetching items",t)})}project1=1;project2=2;is_tablevisible=!1;project_name="";final_maeeting_data=[];get_meeting_datas(e){this.is_tablevisible=!0;let t=`${this.apiService.marketing_meeting_data_api()}?ProjectID=${e}`;this.http.get(t).subscribe(i=>{this.final_maeeting_data=i.data,console.log(this.final_maeeting_data,"Here is meeting values")},i=>{console.error("Error fetching items",i)}),e==1?this.project_name="ANBU AVENUE":e==2?this.project_name="RVS AVENUE":e==3?this.project_name="AGASTHYA PRIME":e==4&&(this.project_name="AGASTHYA DEVELOPER")}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(sn),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-marketing-meeting"]],decls:63,vars:24,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"mt-5"],[1,"row"],[1,"col","project-card",3,"click"],[2,"text-align","center"],[1,"col"],[1,"col","project-card",2,"margin-left","15px",3,"click"],["class","mt-5",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"bradcrumb-card"],[1,"table-responsive"],[1,"table","table-responsive","table-bordered","content-table"],["colspan","7",1,"main-header"],[1,"header-row"],[1,"headers-title"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["rowspan","2",1,"vertical-center"],[1,"goal-color"],[1,"actual-color"],["colspan","8",2,"text-align","center"]],template:function(t,i){t&1&&(c(0,"app-header",1),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",5)(6,"div",6)(7,"div",7),lt("click",function(){return i.get_meeting_datas(1)}),c(8,"h6",8),h(9,"ANBU AVENUE"),d(),c(10,"div",6)(11,"div",9)(12,"p"),h(13),d(),c(14,"p"),h(15),d(),c(16,"p"),h(17),d()(),c(18,"div",9)(19,"p"),h(20),d(),c(21,"p"),h(22),d(),c(23,"p"),h(24),d()()()(),c(25,"div",10),lt("click",function(){return i.get_meeting_datas(2)}),c(26,"h6",8),h(27,"RVS AVENUE"),d(),c(28,"div",6)(29,"div",9)(30,"p"),h(31),d(),c(32,"p"),h(33),d(),c(34,"p"),h(35),d()(),c(36,"div",9)(37,"p"),h(38),d(),c(39,"p"),h(40),d(),c(41,"p"),h(42),d()()()(),c(43,"div",10),lt("click",function(){return i.get_meeting_datas(3)}),c(44,"h6",8),h(45,"AGASTHYA PRIME"),d(),c(46,"div",6)(47,"div",9)(48,"p"),h(49),d(),c(50,"p"),h(51),d(),c(52,"p"),h(53),d()(),c(54,"div",9)(55,"p"),h(56),d(),c(57,"p"),h(58),d(),c(59,"p"),h(60),d()()()()()(),rt(61,RH,4,1,"div",11)(62,BH,23,2,"div",12),d()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(22,LH,!i.isSidebarOpen)),_(11),de("Goal Leads: ",i.total_goal_leads_1,""),_(2),de("Goal Conversion: ",i.total_goal_conversion_1,""),_(2),de("Goal Cost: \u20B9 ",i.total_goal_cost_1," "),_(3),de("Actual Leads: ",i.total_actual_leads_1,""),_(2),de("Actual Conversion: ",i.total_actual_conversion_1,""),_(2),de("Actual Cost: \u20B9 ",i.total_actual_cost_1," "),_(7),de("Goal Leads: ",i.total_goal_leads_2,""),_(2),de("Goal Conversion: ",i.total_goal_conversion_2,""),_(2),de("Goal Cost: \u20B9 ",i.total_goal_cost_2," "),_(3),de("Actual Leads: ",i.total_actual_leads_2,""),_(2),de("Actual Conversion: ",i.total_actual_conversion_2,""),_(2),de("Actual Cost: \u20B9 ",i.total_actual_cost_2," "),_(7),de("Goal Leads: ",i.total_goal_leads_3,""),_(2),de("Goal Conversion: ",i.total_goal_conversion_3,""),_(2),de("Goal Cost: \u20B9 ",i.total_goal_cost_3," "),_(3),de("Actual Leads: ",i.total_actual_leads_3,""),_(2),de("Actual Conversion: ",i.total_actual_conversion_3,""),_(2),de("Actual Cost: \u20B9 ",i.total_actual_cost_3," "),_(),D("ngIf",i.is_tablevisible),_(),D("ngIf",i.is_tablevisible))},dependencies:[Ke,Hi,mi,ei,ii],styles:[".project-card[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:10px;background:linear-gradient(135deg,indigo,#9370db);box-shadow:0 4px 6px #0000001a,0 1px 3px #00000014;transition:transform .3s ease,box-shadow .3s ease;padding:20px;overflow:hidden;color:#fff}.project-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 15px #0003,0 4px 6px #0000001a;cursor:pointer;background:linear-gradient(135deg,#9370db,indigo)}.goal[_ngcontent-%COMP%]{background-color:#d6a6be;text-align:center}.actual[_ngcontent-%COMP%]{background-color:#92c47d;text-align:center}.sts-all[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{text-align:center;transition:all .3s ease}tr[_ngcontent-%COMP%]{text-align:center}.main-header[_ngcontent-%COMP%]{background-color:#741b48;color:#fff}.table-size[_ngcontent-%COMP%]{width:105%}.meeting-header[_ngcontent-%COMP%]{background-color:#5b3283;color:#fff;font-size:18px;padding:5px;margin-top:5%;text-align:center}.content-table[_ngcontent-%COMP%]{margin:20px 0;font-size:16px;text-align:center}.goal-header[_ngcontent-%COMP%], .actual-header[_ngcontent-%COMP%]{color:#000;font-weight:700}.goal-header[_ngcontent-%COMP%]{background-color:#d7a0b1}.actual-header[_ngcontent-%COMP%]{background-color:#a3d5a6}.goal-color[_ngcontent-%COMP%]{background-color:#d6a6be}.actual-color[_ngcontent-%COMP%]{background-color:#92c47d}.vertical-center[_ngcontent-%COMP%], .table-custom[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}.bg-light-pink[_ngcontent-%COMP%]{background-color:#e7c4c4}.bg-light-green[_ngcontent-%COMP%]{background-color:#98d98e}.headers-clr[_ngcontent-%COMP%]{background-color:#b9f1fe}.headers-title[_ngcontent-%COMP%]{background-color:#ffefe5}"]})};var VH=n=>({"full-width":n});function UH(n,e){if(n&1&&(pe(0),c(1,"tr")(2,"td",14),h(3),d(),c(4,"td",14),h(5),d(),c(6,"td",15),h(7),d(),c(8,"td",15),h(9),d(),c(10,"td",15),h(11),d()(),c(12,"tr")(13,"td",16),h(14),d(),c(15,"td",16),h(16),d(),c(17,"td",16),h(18),d()(),fe()),n&2){let t=e.$implicit,i=e.index;_(3),A(i+1),_(2),A(t.Meeting_source),_(2),A(t.Meeting_goal_leads_no),_(2),A(t.Meeting_goal_cost_no),_(2),A(t.Meeting_goal_conversion_no),_(3),A(t.Meeting_actual_leads_no),_(2),A(t.Meeting_actual_cost_no),_(2),A(t.Meeting_actual_conversion_no)}}function zH(n,e){if(n&1&&(pe(0),rt(1,UH,19,8,"ng-container",13),fe()),n&2){let t=k();_(),D("ngForOf",t.get_task_progress_data)}}function HH(n,e){n&1&&(c(0,"tr")(1,"td",17),h(2,"No task found"),d()())}var Lg=class n{constructor(e,t,i,r,a){this.route=e;this.apiService=t;this.http=i;this.router=r;this.userService=a}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}project_id;ngOnInit(){this.get_data(),this.route.params.subscribe(e=>{this.project_id=parseInt(e.projectid)}),this.get_task_progress()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}project_name="";get_task_progress_data=[];get_task_progress(){this.http.get(this.apiService.marketing_meeting_api()).subscribe(e=>{this.get_task_progress_data=e.filter(t=>t.Project_id===this.project_id)},e=>{console.error("Error fetching items",e)}),this.project_id==1?this.project_name="Anbu Avenue":this.project_id==2&&(this.project_name="RVS Avenue")}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(sn),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-marketing-meeting-table"]],decls:29,vars:7,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"mt-5"],[1,"bradcrumb-card"],["id","content-to-pdf",1,"table-responsive"],[1,"table","table-responsive","table-bordered","content-table"],["colspan","7",1,"main-header"],[1,"header-row"],[1,"headers-title"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["rowspan","2",1,"vertical-center"],[1,"goal-color"],[1,"actual-color"],["colspan","8",2,"text-align","center"]],template:function(t,i){if(t&1){let r=Nt();c(0,"app-header",1),lt("toggleSidebarEvent",function(){return G(r),q(i.toggleSidebar())}),d(),Lt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"p"),h(7),d()()(),c(8,"div",7)(9,"table",8)(10,"thead")(11,"tr")(12,"th",9),h(13,"Leads"),d()(),c(14,"tr",10)(15,"th"),h(16,"S.No"),d(),c(17,"th"),h(18,"Tasks"),d(),c(19,"th",11),h(20,"Leads"),d(),c(21,"th",11),h(22,"Cost"),d(),c(23,"th",11),h(24,"Conversion"),d()()(),c(25,"tbody"),rt(26,zH,2,1,"ng-container",12),d(),rt(27,HH,3,0,"ng-template",null,0,Ie),d()()()()}if(t&2){let r=Qe(28);_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(5,VH,!i.isSidebarOpen)),_(5),A(i.project_name),_(19),D("ngIf",i.get_task_progress_data&&i.get_task_progress_data.length>0)("ngIfElse",r)}},dependencies:[Ke,Hi,mi,ei,ii],styles:[".goal[_ngcontent-%COMP%]{background-color:#d6a6be;text-align:center}.actual[_ngcontent-%COMP%]{background-color:#92c47d;text-align:center}.sts-all[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{text-align:center;transition:all .3s ease}tr[_ngcontent-%COMP%]{text-align:center}.main-header[_ngcontent-%COMP%]{background-color:#741b48;color:#fff}.table-size[_ngcontent-%COMP%]{width:105%}.meeting-header[_ngcontent-%COMP%]{background-color:#5b3283;color:#fff;font-size:18px;padding:5px;margin-top:5%;text-align:center}.content-table[_ngcontent-%COMP%]{margin:20px 0;font-size:16px;text-align:center}.goal-header[_ngcontent-%COMP%], .actual-header[_ngcontent-%COMP%]{color:#000;font-weight:700}.goal-header[_ngcontent-%COMP%]{background-color:#d7a0b1}.actual-header[_ngcontent-%COMP%]{background-color:#a3d5a6}.goal-color[_ngcontent-%COMP%]{background-color:#d6a6be}.actual-color[_ngcontent-%COMP%]{background-color:#92c47d}.vertical-center[_ngcontent-%COMP%], .table-custom[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}.bg-light-pink[_ngcontent-%COMP%]{background-color:#e7c4c4}.bg-light-green[_ngcontent-%COMP%]{background-color:#98d98e}.headers-clr[_ngcontent-%COMP%]{background-color:#b9f1fe}.headers-title[_ngcontent-%COMP%]{background-color:#ffefe5}"]})};var WH=n=>({"full-width":n});function jH(n,e){if(n&1){let t=Nt();c(0,"div",18)(1,"div",19)(2,"strong"),h(3,"Success!"),d(),h(4," Saved Successfully. "),c(5,"button",20),lt("click",function(){G(t);let r=k();return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}var Rg=class n{constructor(e,t,i,r,a){this.route=e;this.apiService=t;this.http=i;this.router=r;this.userService=a}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}add_meeting_url="";ngOnInit(){this.get_data(),this.add_meeting_url=this.apiService.marketing_meeting_api()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}successmgs=!1;Meeting_source="";Meeting_goal_leads_no;Meeting_goal_cost_no;Meeting_goal_conversion_no;Meeting_actual_leads_no;Meeting_actual_cost_no;Meeting_actual_conversion_no;Project_id;create_meeting(){let e=this.add_meeting_url,t={Meeting_source:this.Meeting_source,Meeting_goal_leads_no:this.Meeting_goal_leads_no,Meeting_goal_cost_no:this.Meeting_goal_cost_no,Meeting_goal_conversion_no:this.Meeting_goal_conversion_no,Meeting_actual_leads_no:this.Meeting_actual_leads_no,Meeting_actual_cost_no:this.Meeting_actual_cost_no,Meeting_actual_conversion_no:this.Meeting_actual_conversion_no,Project_id:Number(this.Project_id)},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Task Progress")},1e3)},r=>{console.log("Post request failed",r)})}back(e){this.router.navigate(["/marketing-meeting-table",e])}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(sn),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-add-marketing-meeting"]],decls:56,vars:13,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","card-margin","mt-5"],["class","alert-card fade-in",4,"ngIf"],[1,"card","shadow","mt-5"],[1,"heading-card"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-6"],["for",""],["type","text",1,"custom-input",3,"ngModelChange","ngModel"],["type","number",1,"custom-input",3,"ngModelChange","ngModel"],[1,"custom-input",3,"ngModelChange","ngModel"],["value",""],["value","1"],["value","2"],[1,"submit-btn",3,"click"],[1,"alert-card","fade-in"],[1,"alert-content"],[1,"close-btn",3,"click"]],template:function(t,i){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3),rt(4,jH,7,0,"div",4),c(5,"div",5)(6,"div",6)(7,"label"),h(8,"Meeting"),d()(),c(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10),h(13,"Source"),d(),c(14,"input",11),vt("ngModelChange",function(a){return _t(i.Meeting_source,a)||(i.Meeting_source=a),a}),d()(),c(15,"div",9)(16,"label",10),h(17,"Goal Leads"),d(),c(18,"input",12),vt("ngModelChange",function(a){return _t(i.Meeting_goal_leads_no,a)||(i.Meeting_goal_leads_no=a),a}),d()()(),c(19,"div",8)(20,"div",9)(21,"label"),h(22,"Goal Cost"),d(),c(23,"input",12),vt("ngModelChange",function(a){return _t(i.Meeting_goal_cost_no,a)||(i.Meeting_goal_cost_no=a),a}),d()(),c(24,"div",9)(25,"label"),h(26,"Goal Conversion"),d(),c(27,"input",12),vt("ngModelChange",function(a){return _t(i.Meeting_goal_conversion_no,a)||(i.Meeting_goal_conversion_no=a),a}),d()()(),c(28,"div",8)(29,"div",9)(30,"label",10),h(31,"Actual Leads"),d(),c(32,"input",12),vt("ngModelChange",function(a){return _t(i.Meeting_actual_leads_no,a)||(i.Meeting_actual_leads_no=a),a}),d()(),c(33,"div",9)(34,"label"),h(35,"Actual Cost"),d(),c(36,"input",12),vt("ngModelChange",function(a){return _t(i.Meeting_actual_cost_no,a)||(i.Meeting_actual_cost_no=a),a}),d()()(),c(37,"div",8)(38,"div",9)(39,"label"),h(40,"Actual Conversion"),d(),c(41,"input",12),vt("ngModelChange",function(a){return _t(i.Meeting_actual_conversion_no,a)||(i.Meeting_actual_conversion_no=a),a}),d()(),c(42,"div",9)(43,"label"),h(44,"Project"),d(),c(45,"select",13),vt("ngModelChange",function(a){return _t(i.Project_id,a)||(i.Project_id=a),a}),c(46,"option",14),h(47,"Select Project"),d(),c(48,"option",15),h(49,"Anbu Avenue"),d(),c(50,"option",16),h(51,"RVS Avenue"),d()()()(),c(52,"button",17),lt("click",function(){return i.create_meeting()}),h(53,"Update"),d(),c(54,"button",17),lt("click",function(){return i.back(1)}),h(55,"Back"),d()()()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(11,WH,!i.isSidebarOpen)),_(2),D("ngIf",i.successmgs),_(10),gt("ngModel",i.Meeting_source),_(4),gt("ngModel",i.Meeting_goal_leads_no),_(5),gt("ngModel",i.Meeting_goal_cost_no),_(4),gt("ngModel",i.Meeting_goal_conversion_no),_(5),gt("ngModel",i.Meeting_actual_leads_no),_(4),gt("ngModel",i.Meeting_actual_cost_no),_(5),gt("ngModel",i.Meeting_actual_conversion_no),_(4),gt("ngModel",i.Project_id))},dependencies:[Ke,mi,xn,bn,ln,_o,cn,Ki,Gi,ei,ii]})};var C_="171";var T5=0,x2=1,k5=2;var b2=1,I5=2,Qs=3,Bo=0,oa=1,to=2,Wo=0,Hc=1,y2=2,S2=3,w2=4,D5=5,jl=100,P5=101,L5=102,R5=103,O5=104,N5=200,F5=201,B5=202,V5=203,t_=204,e_=205,U5=206,z5=207,H5=208,W5=209,j5=210,G5=211,q5=212,X5=213,Y5=214,M_=0,E_=1,A_=2,Wc=3,T_=4,k_=5,I_=6,D_=7,C2=0,$5=1,K5=2,jo=0,Z5=1,J5=2,Q5=3,tT=4,eT=5,iT=6,nT=7;var d2=300,Yc=301,$c=302,P_=303,L_=304,nf=306,i_=1e3,Wl=1001,n_=1002,ns=1003,rT=1004;var rf=1005;var ks=1006,R_=1007;var Zl=1008;var eo=1009,M2=1010,E2=1011,Vu=1012,O_=1013,Jl=1014,io=1015,Uu=1016,N_=1017,F_=1018,Kc=1020,A2=35902,T2=1021,k2=1022,as=1023,I2=1024,D2=1025,zc=1026,jc=1027,P2=1028,B_=1029,L2=1030,V_=1031;var U_=1033,af=33776,sf=33777,of=33778,lf=33779,z_=35840,H_=35841,W_=35842,j_=35843,G_=36196,q_=37492,X_=37496,Y_=37808,$_=37809,K_=37810,Z_=37811,J_=37812,Q_=37813,t1=37814,e1=37815,i1=37816,n1=37817,r1=37818,a1=37819,s1=37820,o1=37821,cf=36492,l1=36494,c1=36495,R2=36283,d1=36284,u1=36285,h1=36286;var Bp=2300,r_=2301,Qg=2302,u2=2400,h2=2401,p2=2402;var aT=3200,sT=3201;var O2=0,oT=1,Go="",Na="srgb",Gc="srgb-linear",Vp="linear",rn="srgb";var Uc=7680;var f2=519,lT=512,cT=513,dT=514,N2=515,uT=516,hT=517,pT=518,fT=519,m2=35044;var F2="300 es",Zs=2e3,Up=2001,Vo=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let i=this._listeners[e.type];if(i!==void 0){e.target=this;let r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}},Yr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];var Uy=Math.PI/180,a_=180/Math.PI;function df(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Yr[n&255]+Yr[n>>8&255]+Yr[n>>16&255]+Yr[n>>24&255]+"-"+Yr[e&255]+Yr[e>>8&255]+"-"+Yr[e>>16&15|64]+Yr[e>>24&255]+"-"+Yr[t&63|128]+Yr[t>>8&255]+"-"+Yr[t>>16&255]+Yr[t>>24&255]+Yr[i&255]+Yr[i>>8&255]+Yr[i>>16&255]+Yr[i>>24&255]).toLowerCase()}function Oi(n,e,t){return Math.max(e,Math.min(t,n))}function GH(n,e){return(n%e+e)%e}function zy(n,e,t){return(1-t)*n+t*e}function Pp(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Sa(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Wi=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Oi(this.x,e.x,t.x),this.y=Oi(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Oi(this.x,e,t),this.y=Oi(this.y,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Oi(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Oi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*i-s*r+e.x,this.y=a*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},vi=class n{constructor(e,t,i,r,a,s,o,l,u){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,s,o,l,u)}set(e,t,i,r,a,s,o,l,u){let p=this.elements;return p[0]=e,p[1]=r,p[2]=o,p[3]=t,p[4]=a,p[5]=l,p[6]=i,p[7]=s,p[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,a=this.elements,s=i[0],o=i[3],l=i[6],u=i[1],p=i[4],f=i[7],g=i[2],m=i[5],x=i[8],y=r[0],S=r[3],b=r[6],M=r[1],T=r[4],I=r[7],O=r[2],U=r[5],N=r[8];return a[0]=s*y+o*M+l*O,a[3]=s*S+o*T+l*U,a[6]=s*b+o*I+l*N,a[1]=u*y+p*M+f*O,a[4]=u*S+p*T+f*U,a[7]=u*b+p*I+f*N,a[2]=g*y+m*M+x*O,a[5]=g*S+m*T+x*U,a[8]=g*b+m*I+x*N,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],p=e[8];return t*s*p-t*o*u-i*a*p+i*o*l+r*a*u-r*s*l}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],p=e[8],f=p*s-o*u,g=o*l-p*a,m=u*a-s*l,x=t*f+i*g+r*m;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);let y=1/x;return e[0]=f*y,e[1]=(r*u-p*i)*y,e[2]=(o*i-r*s)*y,e[3]=g*y,e[4]=(p*t-r*l)*y,e[5]=(r*a-o*t)*y,e[6]=m*y,e[7]=(i*l-u*t)*y,e[8]=(s*t-i*a)*y,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,a,s,o){let l=Math.cos(a),u=Math.sin(a);return this.set(i*l,i*u,-i*(l*s+u*o)+s+e,-r*u,r*l,-r*(-u*s+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(Hy.makeScale(e,t)),this}rotate(e){return this.premultiply(Hy.makeRotation(-e)),this}translate(e,t){return this.premultiply(Hy.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},Hy=new vi;function B2(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function zp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function mT(){let n=zp("canvas");return n.style.display="block",n}var l5={};function Zc(n){n in l5||(l5[n]=!0,console.warn(n))}function gT(n,e,t){return new Promise(function(i,r){function a(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:i()}}setTimeout(a,t)})}function _T(n){let e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function vT(n){let e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}var c5=new vi().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),d5=new vi().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function qH(){let n={enabled:!0,workingColorSpace:Gc,spaces:{},convert:function(r,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===rn&&(r.r=Fo(r.r),r.g=Fo(r.g),r.b=Fo(r.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===rn&&(r.r=Nu(r.r),r.g=Nu(r.g),r.b=Nu(r.b))),r},fromWorkingColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},toWorkingColorSpace:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Go?Vp:this.spaces[r].transfer},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,s){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Gc]:{primaries:e,whitePoint:i,transfer:Vp,toXYZ:c5,fromXYZ:d5,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Na},outputColorSpaceConfig:{drawingBufferColorSpace:Na}},[Na]:{primaries:e,whitePoint:i,transfer:rn,toXYZ:c5,fromXYZ:d5,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Na}}}),n}var zi=qH();function Fo(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Nu(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var Cu,s_=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Cu===void 0&&(Cu=zp("canvas")),Cu.width=e.width,Cu.height=e.height;let i=Cu.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Cu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=zp("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let s=0;s<a.length;s++)a[s]=Fo(a[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Fo(t[i]/255)*255):t[i]=Fo(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},XH=0,Hp=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:XH++}),this.uuid=df(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let s=0,o=r.length;s<o;s++)r[s].isDataTexture?a.push(Wy(r[s].image)):a.push(Wy(r[s]))}else a=Wy(r);i.url=a}return t||(e.images[this.uuid]=i),i}};function Wy(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?s_.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var YH=0,Ql=(()=>{class n extends Vo{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Wl,a=Wl,s=ks,o=Zl,l=as,u=eo,p=n.DEFAULT_ANISOTROPY,f=Go){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:YH++}),this.uuid=df(),this.name="",this.source=new Hp(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=a,this.magFilter=s,this.minFilter=o,this.anisotropy=p,this.format=l,this.internalFormat=null,this.type=u,this.offset=new Wi(0,0),this.repeat=new Wi(1,1),this.center=new Wi(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==d2)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case i_:t.x=t.x-Math.floor(t.x);break;case Wl:t.x=t.x<0?0:1;break;case n_:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case i_:t.y=t.y-Math.floor(t.y);break;case Wl:t.y=t.y<0?0:1;break;case n_:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=d2,n.DEFAULT_ANISOTROPY=1,n})(),nn=class n{constructor(e=0,t=0,i=0,r=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*a,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*a,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*a,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,a,l=e.elements,u=l[0],p=l[4],f=l[8],g=l[1],m=l[5],x=l[9],y=l[2],S=l[6],b=l[10];if(Math.abs(p-g)<.01&&Math.abs(f-y)<.01&&Math.abs(x-S)<.01){if(Math.abs(p+g)<.1&&Math.abs(f+y)<.1&&Math.abs(x+S)<.1&&Math.abs(u+m+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let T=(u+1)/2,I=(m+1)/2,O=(b+1)/2,U=(p+g)/4,N=(f+y)/4,B=(x+S)/4;return T>I&&T>O?T<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(T),r=U/i,a=N/i):I>O?I<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(I),i=U/r,a=B/r):O<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(O),i=N/a,r=B/a),this.set(i,r,a,t),this}let M=Math.sqrt((S-x)*(S-x)+(f-y)*(f-y)+(g-p)*(g-p));return Math.abs(M)<.001&&(M=1),this.x=(S-x)/M,this.y=(f-y)/M,this.z=(g-p)/M,this.w=Math.acos((u+m+b-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Oi(this.x,e.x,t.x),this.y=Oi(this.y,e.y,t.y),this.z=Oi(this.z,e.z,t.z),this.w=Oi(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Oi(this.x,e,t),this.y=Oi(this.y,e,t),this.z=Oi(this.z,e,t),this.w=Oi(this.w,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Oi(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},o_=class extends Vo{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new nn(0,0,e,t),this.scissorTest=!1,this.viewport=new nn(0,0,e,t);let r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ks,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);let a=new Ql(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);a.flipY=!1,a.generateMipmaps=i.generateMipmaps,a.internalFormat=i.internalFormat,this.textures=[];let s=i.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new Hp(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Js=class extends o_{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}},Wp=class extends Ql{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ns,this.minFilter=ns,this.wrapR=Wl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};var l_=class extends Ql{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ns,this.minFilter=ns,this.wrapR=Wl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Uo=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,a,s,o){let l=i[r+0],u=i[r+1],p=i[r+2],f=i[r+3],g=a[s+0],m=a[s+1],x=a[s+2],y=a[s+3];if(o===0){e[t+0]=l,e[t+1]=u,e[t+2]=p,e[t+3]=f;return}if(o===1){e[t+0]=g,e[t+1]=m,e[t+2]=x,e[t+3]=y;return}if(f!==y||l!==g||u!==m||p!==x){let S=1-o,b=l*g+u*m+p*x+f*y,M=b>=0?1:-1,T=1-b*b;if(T>Number.EPSILON){let O=Math.sqrt(T),U=Math.atan2(O,b*M);S=Math.sin(S*U)/O,o=Math.sin(o*U)/O}let I=o*M;if(l=l*S+g*I,u=u*S+m*I,p=p*S+x*I,f=f*S+y*I,S===1-o){let O=1/Math.sqrt(l*l+u*u+p*p+f*f);l*=O,u*=O,p*=O,f*=O}}e[t]=l,e[t+1]=u,e[t+2]=p,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,a,s){let o=i[r],l=i[r+1],u=i[r+2],p=i[r+3],f=a[s],g=a[s+1],m=a[s+2],x=a[s+3];return e[t]=o*x+p*f+l*m-u*g,e[t+1]=l*x+p*g+u*f-o*m,e[t+2]=u*x+p*m+o*g-l*f,e[t+3]=p*x-o*f-l*g-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let i=e._x,r=e._y,a=e._z,s=e._order,o=Math.cos,l=Math.sin,u=o(i/2),p=o(r/2),f=o(a/2),g=l(i/2),m=l(r/2),x=l(a/2);switch(s){case"XYZ":this._x=g*p*f+u*m*x,this._y=u*m*f-g*p*x,this._z=u*p*x+g*m*f,this._w=u*p*f-g*m*x;break;case"YXZ":this._x=g*p*f+u*m*x,this._y=u*m*f-g*p*x,this._z=u*p*x-g*m*f,this._w=u*p*f+g*m*x;break;case"ZXY":this._x=g*p*f-u*m*x,this._y=u*m*f+g*p*x,this._z=u*p*x+g*m*f,this._w=u*p*f-g*m*x;break;case"ZYX":this._x=g*p*f-u*m*x,this._y=u*m*f+g*p*x,this._z=u*p*x-g*m*f,this._w=u*p*f+g*m*x;break;case"YZX":this._x=g*p*f+u*m*x,this._y=u*m*f+g*p*x,this._z=u*p*x-g*m*f,this._w=u*p*f-g*m*x;break;case"XZY":this._x=g*p*f-u*m*x,this._y=u*m*f-g*p*x,this._z=u*p*x+g*m*f,this._w=u*p*f+g*m*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],a=t[8],s=t[1],o=t[5],l=t[9],u=t[2],p=t[6],f=t[10],g=i+o+f;if(g>0){let m=.5/Math.sqrt(g+1);this._w=.25/m,this._x=(p-l)*m,this._y=(a-u)*m,this._z=(s-r)*m}else if(i>o&&i>f){let m=2*Math.sqrt(1+i-o-f);this._w=(p-l)/m,this._x=.25*m,this._y=(r+s)/m,this._z=(a+u)/m}else if(o>f){let m=2*Math.sqrt(1+o-i-f);this._w=(a-u)/m,this._x=(r+s)/m,this._y=.25*m,this._z=(l+p)/m}else{let m=2*Math.sqrt(1+f-i-o);this._w=(s-r)/m,this._x=(a+u)/m,this._y=(l+p)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Oi(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,a=e._z,s=e._w,o=t._x,l=t._y,u=t._z,p=t._w;return this._x=i*p+s*o+r*u-a*l,this._y=r*p+s*l+a*o-i*u,this._z=a*p+s*u+i*l-r*o,this._w=s*p-i*o-r*l-a*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,r=this._y,a=this._z,s=this._w,o=s*e._w+i*e._x+r*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=i,this._y=r,this._z=a,this;let l=1-o*o;if(l<=Number.EPSILON){let m=1-t;return this._w=m*s+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*a+t*this._z,this.normalize(),this}let u=Math.sqrt(l),p=Math.atan2(u,o),f=Math.sin((1-t)*p)/u,g=Math.sin(t*p)/u;return this._w=s*f+this._w*g,this._x=i*f+this._x*g,this._y=r*f+this._y*g,this._z=a*f+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},zt=class n{constructor(e=0,t=0,i=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(u5.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(u5.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6]*r,this.y=a[1]*t+a[4]*i+a[7]*r,this.z=a[2]*t+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,a=e.elements,s=1/(a[3]*t+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*i+a[8]*r+a[12])*s,this.y=(a[1]*t+a[5]*i+a[9]*r+a[13])*s,this.z=(a[2]*t+a[6]*i+a[10]*r+a[14])*s,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,a=e.x,s=e.y,o=e.z,l=e.w,u=2*(s*r-o*i),p=2*(o*t-a*r),f=2*(a*i-s*t);return this.x=t+l*u+s*f-o*p,this.y=i+l*p+o*u-a*f,this.z=r+l*f+a*p-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r,this.y=a[1]*t+a[5]*i+a[9]*r,this.z=a[2]*t+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Oi(this.x,e.x,t.x),this.y=Oi(this.y,e.y,t.y),this.z=Oi(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Oi(this.x,e,t),this.y=Oi(this.y,e,t),this.z=Oi(this.z,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Oi(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,a=e.z,s=t.x,o=t.y,l=t.z;return this.x=r*l-a*o,this.y=a*s-i*l,this.z=i*o-r*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return jy.copy(this).projectOnVector(e),this.sub(jy)}reflect(e){return this.sub(jy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Oi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},jy=new zt,u5=new Uo,Gl=class{constructor(e=new zt(1/0,1/0,1/0),t=new zt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Es.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Es.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=Es.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0){let a=i.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,Es):Es.fromBufferAttribute(a,s),Es.applyMatrix4(e.matrixWorld),this.expandByPoint(Es);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Og.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Og.copy(i.boundingBox)),Og.applyMatrix4(e.matrixWorld),this.union(Og)}let r=e.children;for(let a=0,s=r.length;a<s;a++)this.expandByObject(r[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Es),Es.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Lp),Ng.subVectors(this.max,Lp),Mu.subVectors(e.a,Lp),Eu.subVectors(e.b,Lp),Au.subVectors(e.c,Lp),Nl.subVectors(Eu,Mu),Fl.subVectors(Au,Eu),Nc.subVectors(Mu,Au);let t=[0,-Nl.z,Nl.y,0,-Fl.z,Fl.y,0,-Nc.z,Nc.y,Nl.z,0,-Nl.x,Fl.z,0,-Fl.x,Nc.z,0,-Nc.x,-Nl.y,Nl.x,0,-Fl.y,Fl.x,0,-Nc.y,Nc.x,0];return!Gy(t,Mu,Eu,Au,Ng)||(t=[1,0,0,0,1,0,0,0,1],!Gy(t,Mu,Eu,Au,Ng))?!1:(Fg.crossVectors(Nl,Fl),t=[Fg.x,Fg.y,Fg.z],Gy(t,Mu,Eu,Au,Ng))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Es).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Es).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Po[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Po[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Po[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Po[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Po[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Po[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Po[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Po[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Po),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Po=[new zt,new zt,new zt,new zt,new zt,new zt,new zt,new zt],Es=new zt,Og=new Gl,Mu=new zt,Eu=new zt,Au=new zt,Nl=new zt,Fl=new zt,Nc=new zt,Lp=new zt,Ng=new zt,Fg=new zt,Fc=new zt;function Gy(n,e,t,i,r){for(let a=0,s=n.length-3;a<=s;a+=3){Fc.fromArray(n,a);let o=r.x*Math.abs(Fc.x)+r.y*Math.abs(Fc.y)+r.z*Math.abs(Fc.z),l=e.dot(Fc),u=t.dot(Fc),p=i.dot(Fc);if(Math.max(-Math.max(l,u,p),Math.min(l,u,p))>o)return!1}return!0}var $H=new Gl,Rp=new zt,qy=new zt,Fu=class{constructor(e=new zt,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):$H.setFromPoints(e).getCenter(i);let r=0;for(let a=0,s=e.length;a<s;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Rp.subVectors(e,this.center);let t=Rp.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Rp,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(qy.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Rp.copy(e.center).add(qy)),this.expandByPoint(Rp.copy(e.center).sub(qy))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Lo=new zt,Xy=new zt,Bg=new zt,Bl=new zt,Yy=new zt,Vg=new zt,$y=new zt,c_=class{constructor(e=new zt,t=new zt(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Lo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Lo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Lo.copy(this.origin).addScaledVector(this.direction,t),Lo.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Xy.copy(e).add(t).multiplyScalar(.5),Bg.copy(t).sub(e).normalize(),Bl.copy(this.origin).sub(Xy);let a=e.distanceTo(t)*.5,s=-this.direction.dot(Bg),o=Bl.dot(this.direction),l=-Bl.dot(Bg),u=Bl.lengthSq(),p=Math.abs(1-s*s),f,g,m,x;if(p>0)if(f=s*l-o,g=s*o-l,x=a*p,f>=0)if(g>=-x)if(g<=x){let y=1/p;f*=y,g*=y,m=f*(f+s*g+2*o)+g*(s*f+g+2*l)+u}else g=a,f=Math.max(0,-(s*g+o)),m=-f*f+g*(g+2*l)+u;else g=-a,f=Math.max(0,-(s*g+o)),m=-f*f+g*(g+2*l)+u;else g<=-x?(f=Math.max(0,-(-s*a+o)),g=f>0?-a:Math.min(Math.max(-a,-l),a),m=-f*f+g*(g+2*l)+u):g<=x?(f=0,g=Math.min(Math.max(-a,-l),a),m=g*(g+2*l)+u):(f=Math.max(0,-(s*a+o)),g=f>0?a:Math.min(Math.max(-a,-l),a),m=-f*f+g*(g+2*l)+u);else g=s>0?-a:a,f=Math.max(0,-(s*g+o)),m=-f*f+g*(g+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(Xy).addScaledVector(Bg,g),m}intersectSphere(e,t){Lo.subVectors(e.center,this.origin);let i=Lo.dot(this.direction),r=Lo.dot(Lo)-i*i,a=e.radius*e.radius;if(r>a)return null;let s=Math.sqrt(a-r),o=i-s,l=i+s;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,a,s,o,l,u=1/this.direction.x,p=1/this.direction.y,f=1/this.direction.z,g=this.origin;return u>=0?(i=(e.min.x-g.x)*u,r=(e.max.x-g.x)*u):(i=(e.max.x-g.x)*u,r=(e.min.x-g.x)*u),p>=0?(a=(e.min.y-g.y)*p,s=(e.max.y-g.y)*p):(a=(e.max.y-g.y)*p,s=(e.min.y-g.y)*p),i>s||a>r||((a>i||isNaN(i))&&(i=a),(s<r||isNaN(r))&&(r=s),f>=0?(o=(e.min.z-g.z)*f,l=(e.max.z-g.z)*f):(o=(e.max.z-g.z)*f,l=(e.min.z-g.z)*f),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Lo)!==null}intersectTriangle(e,t,i,r,a){Yy.subVectors(t,e),Vg.subVectors(i,e),$y.crossVectors(Yy,Vg);let s=this.direction.dot($y),o;if(s>0){if(r)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Bl.subVectors(this.origin,e);let l=o*this.direction.dot(Vg.crossVectors(Bl,Vg));if(l<0)return null;let u=o*this.direction.dot(Yy.cross(Bl));if(u<0||l+u>s)return null;let p=-o*Bl.dot($y);return p<0?null:this.at(p/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Bn=class n{constructor(e,t,i,r,a,s,o,l,u,p,f,g,m,x,y,S){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,s,o,l,u,p,f,g,m,x,y,S)}set(e,t,i,r,a,s,o,l,u,p,f,g,m,x,y,S){let b=this.elements;return b[0]=e,b[4]=t,b[8]=i,b[12]=r,b[1]=a,b[5]=s,b[9]=o,b[13]=l,b[2]=u,b[6]=p,b[10]=f,b[14]=g,b[3]=m,b[7]=x,b[11]=y,b[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/Tu.setFromMatrixColumn(e,0).length(),a=1/Tu.setFromMatrixColumn(e,1).length(),s=1/Tu.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*a,t[5]=i[5]*a,t[6]=i[6]*a,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,a=e.z,s=Math.cos(i),o=Math.sin(i),l=Math.cos(r),u=Math.sin(r),p=Math.cos(a),f=Math.sin(a);if(e.order==="XYZ"){let g=s*p,m=s*f,x=o*p,y=o*f;t[0]=l*p,t[4]=-l*f,t[8]=u,t[1]=m+x*u,t[5]=g-y*u,t[9]=-o*l,t[2]=y-g*u,t[6]=x+m*u,t[10]=s*l}else if(e.order==="YXZ"){let g=l*p,m=l*f,x=u*p,y=u*f;t[0]=g+y*o,t[4]=x*o-m,t[8]=s*u,t[1]=s*f,t[5]=s*p,t[9]=-o,t[2]=m*o-x,t[6]=y+g*o,t[10]=s*l}else if(e.order==="ZXY"){let g=l*p,m=l*f,x=u*p,y=u*f;t[0]=g-y*o,t[4]=-s*f,t[8]=x+m*o,t[1]=m+x*o,t[5]=s*p,t[9]=y-g*o,t[2]=-s*u,t[6]=o,t[10]=s*l}else if(e.order==="ZYX"){let g=s*p,m=s*f,x=o*p,y=o*f;t[0]=l*p,t[4]=x*u-m,t[8]=g*u+y,t[1]=l*f,t[5]=y*u+g,t[9]=m*u-x,t[2]=-u,t[6]=o*l,t[10]=s*l}else if(e.order==="YZX"){let g=s*l,m=s*u,x=o*l,y=o*u;t[0]=l*p,t[4]=y-g*f,t[8]=x*f+m,t[1]=f,t[5]=s*p,t[9]=-o*p,t[2]=-u*p,t[6]=m*f+x,t[10]=g-y*f}else if(e.order==="XZY"){let g=s*l,m=s*u,x=o*l,y=o*u;t[0]=l*p,t[4]=-f,t[8]=u*p,t[1]=g*f+y,t[5]=s*p,t[9]=m*f-x,t[2]=x*f-m,t[6]=o*p,t[10]=y*f+g}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(KH,e,ZH)}lookAt(e,t,i){let r=this.elements;return Ra.subVectors(e,t),Ra.lengthSq()===0&&(Ra.z=1),Ra.normalize(),Vl.crossVectors(i,Ra),Vl.lengthSq()===0&&(Math.abs(i.z)===1?Ra.x+=1e-4:Ra.z+=1e-4,Ra.normalize(),Vl.crossVectors(i,Ra)),Vl.normalize(),Ug.crossVectors(Ra,Vl),r[0]=Vl.x,r[4]=Ug.x,r[8]=Ra.x,r[1]=Vl.y,r[5]=Ug.y,r[9]=Ra.y,r[2]=Vl.z,r[6]=Ug.z,r[10]=Ra.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,a=this.elements,s=i[0],o=i[4],l=i[8],u=i[12],p=i[1],f=i[5],g=i[9],m=i[13],x=i[2],y=i[6],S=i[10],b=i[14],M=i[3],T=i[7],I=i[11],O=i[15],U=r[0],N=r[4],B=r[8],R=r[12],F=r[1],P=r[5],V=r[9],$=r[13],K=r[2],ct=r[6],ot=r[10],at=r[14],Q=r[3],xt=r[7],Mt=r[11],qt=r[15];return a[0]=s*U+o*F+l*K+u*Q,a[4]=s*N+o*P+l*ct+u*xt,a[8]=s*B+o*V+l*ot+u*Mt,a[12]=s*R+o*$+l*at+u*qt,a[1]=p*U+f*F+g*K+m*Q,a[5]=p*N+f*P+g*ct+m*xt,a[9]=p*B+f*V+g*ot+m*Mt,a[13]=p*R+f*$+g*at+m*qt,a[2]=x*U+y*F+S*K+b*Q,a[6]=x*N+y*P+S*ct+b*xt,a[10]=x*B+y*V+S*ot+b*Mt,a[14]=x*R+y*$+S*at+b*qt,a[3]=M*U+T*F+I*K+O*Q,a[7]=M*N+T*P+I*ct+O*xt,a[11]=M*B+T*V+I*ot+O*Mt,a[15]=M*R+T*$+I*at+O*qt,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],a=e[12],s=e[1],o=e[5],l=e[9],u=e[13],p=e[2],f=e[6],g=e[10],m=e[14],x=e[3],y=e[7],S=e[11],b=e[15];return x*(+a*l*f-r*u*f-a*o*g+i*u*g+r*o*m-i*l*m)+y*(+t*l*m-t*u*g+a*s*g-r*s*m+r*u*p-a*l*p)+S*(+t*u*f-t*o*m-a*s*f+i*s*m+a*o*p-i*u*p)+b*(-r*o*p-t*l*f+t*o*g+r*s*f-i*s*g+i*l*p)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],p=e[8],f=e[9],g=e[10],m=e[11],x=e[12],y=e[13],S=e[14],b=e[15],M=f*S*u-y*g*u+y*l*m-o*S*m-f*l*b+o*g*b,T=x*g*u-p*S*u-x*l*m+s*S*m+p*l*b-s*g*b,I=p*y*u-x*f*u+x*o*m-s*y*m-p*o*b+s*f*b,O=x*f*l-p*y*l-x*o*g+s*y*g+p*o*S-s*f*S,U=t*M+i*T+r*I+a*O;if(U===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let N=1/U;return e[0]=M*N,e[1]=(y*g*a-f*S*a-y*r*m+i*S*m+f*r*b-i*g*b)*N,e[2]=(o*S*a-y*l*a+y*r*u-i*S*u-o*r*b+i*l*b)*N,e[3]=(f*l*a-o*g*a-f*r*u+i*g*u+o*r*m-i*l*m)*N,e[4]=T*N,e[5]=(p*S*a-x*g*a+x*r*m-t*S*m-p*r*b+t*g*b)*N,e[6]=(x*l*a-s*S*a-x*r*u+t*S*u+s*r*b-t*l*b)*N,e[7]=(s*g*a-p*l*a+p*r*u-t*g*u-s*r*m+t*l*m)*N,e[8]=I*N,e[9]=(x*f*a-p*y*a-x*i*m+t*y*m+p*i*b-t*f*b)*N,e[10]=(s*y*a-x*o*a+x*i*u-t*y*u-s*i*b+t*o*b)*N,e[11]=(p*o*a-s*f*a-p*i*u+t*f*u+s*i*m-t*o*m)*N,e[12]=O*N,e[13]=(p*y*r-x*f*r+x*i*g-t*y*g-p*i*S+t*f*S)*N,e[14]=(x*o*r-s*y*r-x*i*l+t*y*l+s*i*S-t*o*S)*N,e[15]=(s*f*r-p*o*r+p*i*l-t*f*l-s*i*g+t*o*g)*N,this}scale(e){let t=this.elements,i=e.x,r=e.y,a=e.z;return t[0]*=i,t[4]*=r,t[8]*=a,t[1]*=i,t[5]*=r,t[9]*=a,t[2]*=i,t[6]*=r,t[10]*=a,t[3]*=i,t[7]*=r,t[11]*=a,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),a=1-i,s=e.x,o=e.y,l=e.z,u=a*s,p=a*o;return this.set(u*s+i,u*o-r*l,u*l+r*o,0,u*o+r*l,p*o+i,p*l-r*s,0,u*l-r*o,p*l+r*s,a*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,a,s){return this.set(1,i,a,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,a=t._x,s=t._y,o=t._z,l=t._w,u=a+a,p=s+s,f=o+o,g=a*u,m=a*p,x=a*f,y=s*p,S=s*f,b=o*f,M=l*u,T=l*p,I=l*f,O=i.x,U=i.y,N=i.z;return r[0]=(1-(y+b))*O,r[1]=(m+I)*O,r[2]=(x-T)*O,r[3]=0,r[4]=(m-I)*U,r[5]=(1-(g+b))*U,r[6]=(S+M)*U,r[7]=0,r[8]=(x+T)*N,r[9]=(S-M)*N,r[10]=(1-(g+y))*N,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,a=Tu.set(r[0],r[1],r[2]).length(),s=Tu.set(r[4],r[5],r[6]).length(),o=Tu.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],As.copy(this);let u=1/a,p=1/s,f=1/o;return As.elements[0]*=u,As.elements[1]*=u,As.elements[2]*=u,As.elements[4]*=p,As.elements[5]*=p,As.elements[6]*=p,As.elements[8]*=f,As.elements[9]*=f,As.elements[10]*=f,t.setFromRotationMatrix(As),i.x=a,i.y=s,i.z=o,this}makePerspective(e,t,i,r,a,s,o=Zs){let l=this.elements,u=2*a/(t-e),p=2*a/(i-r),f=(t+e)/(t-e),g=(i+r)/(i-r),m,x;if(o===Zs)m=-(s+a)/(s-a),x=-2*s*a/(s-a);else if(o===Up)m=-s/(s-a),x=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=u,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=p,l[9]=g,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=x,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,a,s,o=Zs){let l=this.elements,u=1/(t-e),p=1/(i-r),f=1/(s-a),g=(t+e)*u,m=(i+r)*p,x,y;if(o===Zs)x=(s+a)*f,y=-2*f;else if(o===Up)x=a*f,y=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-g,l[1]=0,l[5]=2*p,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=y,l[14]=-x,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},Tu=new zt,As=new Bn,KH=new zt(0,0,0),ZH=new zt(1,1,1),Vl=new zt,Ug=new zt,Ra=new zt,h5=new Bn,p5=new Uo,ql=(()=>{class n{constructor(t=0,i=0,r=0,a=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=a}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,a=this._order){return this._x=t,this._y=i,this._z=r,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){let a=t.elements,s=a[0],o=a[4],l=a[8],u=a[1],p=a[5],f=a[9],g=a[2],m=a[6],x=a[10];switch(i){case"XYZ":this._y=Math.asin(Oi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,x),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,p),this._z=0);break;case"YXZ":this._x=Math.asin(-Oi(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,x),this._z=Math.atan2(u,p)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin(Oi(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-g,x),this._z=Math.atan2(-o,p)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-Oi(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(m,x),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-o,p));break;case"YZX":this._z=Math.asin(Oi(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-f,p),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(l,x));break;case"XZY":this._z=Math.asin(-Oi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,p),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-f,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return h5.makeRotationFromQuaternion(t),this.setFromRotationMatrix(h5,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return p5.setFromEuler(this),this.setFromQuaternion(p5,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),jp=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},JH=0,f5=new zt,ku=new Uo,Ro=new Bn,zg=new zt,Op=new zt,QH=new zt,tW=new Uo,m5=new zt(1,0,0),g5=new zt(0,1,0),_5=new zt(0,0,1),v5={type:"added"},eW={type:"removed"},Iu={type:"childadded",child:null},Ky={type:"childremoved",child:null},tc=(()=>{class n extends Vo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:JH++}),this.uuid=df(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let t=new zt,i=new ql,r=new Uo,a=new zt(1,1,1);function s(){r.setFromEuler(i,!1)}function o(){i.setFromQuaternion(r,void 0,!1)}i._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Bn},normalMatrix:{value:new vi}}),this.matrix=new Bn,this.matrixWorld=new Bn,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new jp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return ku.setFromAxisAngle(t,i),this.quaternion.multiply(ku),this}rotateOnWorldAxis(t,i){return ku.setFromAxisAngle(t,i),this.quaternion.premultiply(ku),this}rotateX(t){return this.rotateOnAxis(m5,t)}rotateY(t){return this.rotateOnAxis(g5,t)}rotateZ(t){return this.rotateOnAxis(_5,t)}translateOnAxis(t,i){return f5.copy(t).applyQuaternion(this.quaternion),this.position.add(f5.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(m5,t)}translateY(t){return this.translateOnAxis(g5,t)}translateZ(t){return this.translateOnAxis(_5,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ro.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?zg.copy(t):zg.set(t,i,r);let a=this.parent;this.updateWorldMatrix(!0,!1),Op.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ro.lookAt(Op,zg,this.up):Ro.lookAt(zg,Op,this.up),this.quaternion.setFromRotationMatrix(Ro),a&&(Ro.extractRotation(a.matrixWorld),ku.setFromRotationMatrix(Ro),this.quaternion.premultiply(ku.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(v5),Iu.child=t,this.dispatchEvent(Iu),Iu.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(eW),Ky.child=t,this.dispatchEvent(Ky),Ky.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Ro.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Ro.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ro),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(v5),Iu.child=t,this.dispatchEvent(Iu),Iu.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,a=this.children.length;r<a;r++){let o=this.children[r].getObjectByProperty(t,i);if(o!==void 0)return o}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);let a=this.children;for(let s=0,o=a.length;s<o;s++)a[s].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Op,t,QH),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Op,tW,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);let i=this.children;for(let r=0,a=i.length;r<a;r++)i[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let i=this.children;for(let r=0,a=i.length;r<a;r++)i[r].traverseVisible(t)}traverseAncestors(t){let i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let i=this.children;for(let r=0,a=i.length;r<a;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let a=this.children;for(let s=0,o=a.length;s<o;s++)a[s].updateWorldMatrix(!1,!0)}}toJSON(t){let i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.visibility=this._visibility,a.active=this._active,a.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.geometryCount=this._geometryCount,a.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(a.boundingSphere={center:a.boundingSphere.center.toArray(),radius:a.boundingSphere.radius}),this.boundingBox!==null&&(a.boundingBox={min:a.boundingBox.min.toArray(),max:a.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(t)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=s(t.geometries,this.geometry);let l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){let u=l.shapes;if(Array.isArray(u))for(let p=0,f=u.length;p<f;p++){let g=u[p];s(t.shapes,g)}else s(t.shapes,u)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let l=[];for(let u=0,p=this.material.length;u<p;u++)l.push(s(t.materials,this.material[u]));a.material=l}else a.material=s(t.materials,this.material);if(this.children.length>0){a.children=[];for(let l=0;l<this.children.length;l++)a.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){a.animations=[];for(let l=0;l<this.animations.length;l++){let u=this.animations[l];a.animations.push(s(t.animations,u))}}if(i){let l=o(t.geometries),u=o(t.materials),p=o(t.textures),f=o(t.images),g=o(t.shapes),m=o(t.skeletons),x=o(t.animations),y=o(t.nodes);l.length>0&&(r.geometries=l),u.length>0&&(r.materials=u),p.length>0&&(r.textures=p),f.length>0&&(r.images=f),g.length>0&&(r.shapes=g),m.length>0&&(r.skeletons=m),x.length>0&&(r.animations=x),y.length>0&&(r.nodes=y)}return r.object=a,r;function o(l){let u=[];for(let p in l){let f=l[p];delete f.metadata,u.push(f)}return u}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let a=t.children[r];this.add(a.clone())}return this}}return n.DEFAULT_UP=new zt(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),Ts=new zt,Oo=new zt,Zy=new zt,No=new zt,Du=new zt,Pu=new zt,x5=new zt,Jy=new zt,Qy=new zt,t2=new zt,e2=new nn,i2=new nn,n2=new nn,Hl=class n{constructor(e=new zt,t=new zt,i=new zt){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Ts.subVectors(e,t),r.cross(Ts);let a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,t,i,r,a){Ts.subVectors(r,t),Oo.subVectors(i,t),Zy.subVectors(e,t);let s=Ts.dot(Ts),o=Ts.dot(Oo),l=Ts.dot(Zy),u=Oo.dot(Oo),p=Oo.dot(Zy),f=s*u-o*o;if(f===0)return a.set(0,0,0),null;let g=1/f,m=(u*l-o*p)*g,x=(s*p-o*l)*g;return a.set(1-m-x,x,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,No)===null?!1:No.x>=0&&No.y>=0&&No.x+No.y<=1}static getInterpolation(e,t,i,r,a,s,o,l){return this.getBarycoord(e,t,i,r,No)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,No.x),l.addScaledVector(s,No.y),l.addScaledVector(o,No.z),l)}static getInterpolatedAttribute(e,t,i,r,a,s){return e2.setScalar(0),i2.setScalar(0),n2.setScalar(0),e2.fromBufferAttribute(e,t),i2.fromBufferAttribute(e,i),n2.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(e2,a.x),s.addScaledVector(i2,a.y),s.addScaledVector(n2,a.z),s}static isFrontFacing(e,t,i,r){return Ts.subVectors(i,t),Oo.subVectors(e,t),Ts.cross(Oo).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ts.subVectors(this.c,this.b),Oo.subVectors(this.a,this.b),Ts.cross(Oo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,a){return n.getInterpolation(e,this.a,this.b,this.c,t,i,r,a)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,a=this.c,s,o;Du.subVectors(r,i),Pu.subVectors(a,i),Jy.subVectors(e,i);let l=Du.dot(Jy),u=Pu.dot(Jy);if(l<=0&&u<=0)return t.copy(i);Qy.subVectors(e,r);let p=Du.dot(Qy),f=Pu.dot(Qy);if(p>=0&&f<=p)return t.copy(r);let g=l*f-p*u;if(g<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(i).addScaledVector(Du,s);t2.subVectors(e,a);let m=Du.dot(t2),x=Pu.dot(t2);if(x>=0&&m<=x)return t.copy(a);let y=m*u-l*x;if(y<=0&&u>=0&&x<=0)return o=u/(u-x),t.copy(i).addScaledVector(Pu,o);let S=p*x-m*f;if(S<=0&&f-p>=0&&m-x>=0)return x5.subVectors(a,r),o=(f-p)/(f-p+(m-x)),t.copy(r).addScaledVector(x5,o);let b=1/(S+y+g);return s=y*b,o=g*b,t.copy(i).addScaledVector(Du,s).addScaledVector(Pu,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},xT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ul={h:0,s:0,l:0},Hg={h:0,s:0,l:0};function r2(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var Vi=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Na){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,zi.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=zi.workingColorSpace){return this.r=e,this.g=t,this.b=i,zi.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=zi.workingColorSpace){if(e=GH(e,1),t=Oi(t,0,1),i=Oi(i,0,1),t===0)this.r=this.g=this.b=i;else{let a=i<=.5?i*(1+t):i+t-i*t,s=2*i-a;this.r=r2(s,a,e+1/3),this.g=r2(s,a,e),this.b=r2(s,a,e-1/3)}return zi.toWorkingColorSpace(this,r),this}setStyle(e,t=Na){function i(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a,s=r[1],o=r[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let a=r[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Na){let i=xT[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Fo(e.r),this.g=Fo(e.g),this.b=Fo(e.b),this}copyLinearToSRGB(e){return this.r=Nu(e.r),this.g=Nu(e.g),this.b=Nu(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Na){return zi.fromWorkingColorSpace($r.copy(this),e),Math.round(Oi($r.r*255,0,255))*65536+Math.round(Oi($r.g*255,0,255))*256+Math.round(Oi($r.b*255,0,255))}getHexString(e=Na){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=zi.workingColorSpace){zi.fromWorkingColorSpace($r.copy(this),t);let i=$r.r,r=$r.g,a=$r.b,s=Math.max(i,r,a),o=Math.min(i,r,a),l,u,p=(o+s)/2;if(o===s)l=0,u=0;else{let f=s-o;switch(u=p<=.5?f/(s+o):f/(2-s-o),s){case i:l=(r-a)/f+(r<a?6:0);break;case r:l=(a-i)/f+2;break;case a:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=p,e}getRGB(e,t=zi.workingColorSpace){return zi.fromWorkingColorSpace($r.copy(this),t),e.r=$r.r,e.g=$r.g,e.b=$r.b,e}getStyle(e=Na){zi.fromWorkingColorSpace($r.copy(this),e);let t=$r.r,i=$r.g,r=$r.b;return e!==Na?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ul),this.setHSL(Ul.h+e,Ul.s+t,Ul.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ul),e.getHSL(Hg);let i=zy(Ul.h,Hg.h,t),r=zy(Ul.s,Hg.s,t),a=zy(Ul.l,Hg.l,t);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*t+a[3]*i+a[6]*r,this.g=a[1]*t+a[4]*i+a[7]*r,this.b=a[2]*t+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},$r=new Vi;Vi.NAMES=xT;var iW=0,Xl=class extends Vo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iW++}),this.uuid=df(),this.name="",this.type="Material",this.blending=Hc,this.side=Bo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=t_,this.blendDst=e_,this.blendEquation=jl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Vi(0,0,0),this.blendAlpha=0,this.depthFunc=Wc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=f2,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Uc,this.stencilZFail=Uc,this.stencilZPass=Uc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Hc&&(i.blending=this.blending),this.side!==Bo&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==t_&&(i.blendSrc=this.blendSrc),this.blendDst!==e_&&(i.blendDst=this.blendDst),this.blendEquation!==jl&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Wc&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==f2&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Uc&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Uc&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Uc&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){let s=[];for(let o in a){let l=a[o];delete l.metadata,s.push(l)}return s}if(t){let a=r(e.textures),s=r(e.images);a.length>0&&(i.textures=a),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=t[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}},qc=class extends Xl{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Vi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ql,this.combine=C2,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var hr=new zt,Wg=new Wi,Fa=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=m2,this.updateRanges=[],this.gpuType=io,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Wg.fromBufferAttribute(this,t),Wg.applyMatrix3(e),this.setXY(t,Wg.x,Wg.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)hr.fromBufferAttribute(this,t),hr.applyMatrix3(e),this.setXYZ(t,hr.x,hr.y,hr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)hr.fromBufferAttribute(this,t),hr.applyMatrix4(e),this.setXYZ(t,hr.x,hr.y,hr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)hr.fromBufferAttribute(this,t),hr.applyNormalMatrix(e),this.setXYZ(t,hr.x,hr.y,hr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)hr.fromBufferAttribute(this,t),hr.transformDirection(e),this.setXYZ(t,hr.x,hr.y,hr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Pp(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Sa(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Pp(t,this.array)),t}setX(e,t){return this.normalized&&(t=Sa(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Pp(t,this.array)),t}setY(e,t){return this.normalized&&(t=Sa(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Pp(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Sa(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Pp(t,this.array)),t}setW(e,t){return this.normalized&&(t=Sa(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Sa(t,this.array),i=Sa(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Sa(t,this.array),i=Sa(i,this.array),r=Sa(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=Sa(t,this.array),i=Sa(i,this.array),r=Sa(r,this.array),a=Sa(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==m2&&(e.usage=this.usage),e}};var Gp=class extends Fa{constructor(e,t,i){super(new Uint16Array(e),t,i)}};var qp=class extends Fa{constructor(e,t,i){super(new Uint32Array(e),t,i)}};var Ba=class extends Fa{constructor(e,t,i){super(new Float32Array(e),t,i)}},nW=0,is=new Bn,a2=new tc,Lu=new zt,Oa=new Gl,Np=new Gl,Mr=new zt,zo=class n extends Vo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:nW++}),this.uuid=df(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(B2(e)?qp:Gp)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let a=new vi().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return is.makeRotationFromQuaternion(e),this.applyMatrix4(is),this}rotateX(e){return is.makeRotationX(e),this.applyMatrix4(is),this}rotateY(e){return is.makeRotationY(e),this.applyMatrix4(is),this}rotateZ(e){return is.makeRotationZ(e),this.applyMatrix4(is),this}translate(e,t,i){return is.makeTranslation(e,t,i),this.applyMatrix4(is),this}scale(e,t,i){return is.makeScale(e,t,i),this.applyMatrix4(is),this}lookAt(e){return a2.lookAt(e),a2.updateMatrix(),this.applyMatrix4(a2.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Lu).negate(),this.translate(Lu.x,Lu.y,Lu.z),this}setFromPoints(e){let t=this.getAttribute("position");if(t===void 0){let i=[];for(let r=0,a=e.length;r<a;r++){let s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Ba(i,3))}else{let i=Math.min(e.length,t.count);for(let r=0;r<i;r++){let a=e[r];t.setXYZ(r,a.x,a.y,a.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gl);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new zt(-1/0,-1/0,-1/0),new zt(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let a=t[i];Oa.setFromBufferAttribute(a),this.morphTargetsRelative?(Mr.addVectors(this.boundingBox.min,Oa.min),this.boundingBox.expandByPoint(Mr),Mr.addVectors(this.boundingBox.max,Oa.max),this.boundingBox.expandByPoint(Mr)):(this.boundingBox.expandByPoint(Oa.min),this.boundingBox.expandByPoint(Oa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fu);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new zt,1/0);return}if(e){let i=this.boundingSphere.center;if(Oa.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){let o=t[a];Np.setFromBufferAttribute(o),this.morphTargetsRelative?(Mr.addVectors(Oa.min,Np.min),Oa.expandByPoint(Mr),Mr.addVectors(Oa.max,Np.max),Oa.expandByPoint(Mr)):(Oa.expandByPoint(Np.min),Oa.expandByPoint(Np.max))}Oa.getCenter(i);let r=0;for(let a=0,s=e.count;a<s;a++)Mr.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(Mr));if(t)for(let a=0,s=t.length;a<s;a++){let o=t[a],l=this.morphTargetsRelative;for(let u=0,p=o.count;u<p;u++)Mr.fromBufferAttribute(o,u),l&&(Lu.fromBufferAttribute(e,u),Mr.add(Lu)),r=Math.max(r,i.distanceToSquared(Mr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=t.position,r=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Fa(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),o=[],l=[];for(let B=0;B<i.count;B++)o[B]=new zt,l[B]=new zt;let u=new zt,p=new zt,f=new zt,g=new Wi,m=new Wi,x=new Wi,y=new zt,S=new zt;function b(B,R,F){u.fromBufferAttribute(i,B),p.fromBufferAttribute(i,R),f.fromBufferAttribute(i,F),g.fromBufferAttribute(a,B),m.fromBufferAttribute(a,R),x.fromBufferAttribute(a,F),p.sub(u),f.sub(u),m.sub(g),x.sub(g);let P=1/(m.x*x.y-x.x*m.y);isFinite(P)&&(y.copy(p).multiplyScalar(x.y).addScaledVector(f,-m.y).multiplyScalar(P),S.copy(f).multiplyScalar(m.x).addScaledVector(p,-x.x).multiplyScalar(P),o[B].add(y),o[R].add(y),o[F].add(y),l[B].add(S),l[R].add(S),l[F].add(S))}let M=this.groups;M.length===0&&(M=[{start:0,count:e.count}]);for(let B=0,R=M.length;B<R;++B){let F=M[B],P=F.start,V=F.count;for(let $=P,K=P+V;$<K;$+=3)b(e.getX($+0),e.getX($+1),e.getX($+2))}let T=new zt,I=new zt,O=new zt,U=new zt;function N(B){O.fromBufferAttribute(r,B),U.copy(O);let R=o[B];T.copy(R),T.sub(O.multiplyScalar(O.dot(R))).normalize(),I.crossVectors(U,R);let P=I.dot(l[B])<0?-1:1;s.setXYZW(B,T.x,T.y,T.z,P)}for(let B=0,R=M.length;B<R;++B){let F=M[B],P=F.start,V=F.count;for(let $=P,K=P+V;$<K;$+=3)N(e.getX($+0)),N(e.getX($+1)),N(e.getX($+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Fa(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let g=0,m=i.count;g<m;g++)i.setXYZ(g,0,0,0);let r=new zt,a=new zt,s=new zt,o=new zt,l=new zt,u=new zt,p=new zt,f=new zt;if(e)for(let g=0,m=e.count;g<m;g+=3){let x=e.getX(g+0),y=e.getX(g+1),S=e.getX(g+2);r.fromBufferAttribute(t,x),a.fromBufferAttribute(t,y),s.fromBufferAttribute(t,S),p.subVectors(s,a),f.subVectors(r,a),p.cross(f),o.fromBufferAttribute(i,x),l.fromBufferAttribute(i,y),u.fromBufferAttribute(i,S),o.add(p),l.add(p),u.add(p),i.setXYZ(x,o.x,o.y,o.z),i.setXYZ(y,l.x,l.y,l.z),i.setXYZ(S,u.x,u.y,u.z)}else for(let g=0,m=t.count;g<m;g+=3)r.fromBufferAttribute(t,g+0),a.fromBufferAttribute(t,g+1),s.fromBufferAttribute(t,g+2),p.subVectors(s,a),f.subVectors(r,a),p.cross(f),i.setXYZ(g+0,p.x,p.y,p.z),i.setXYZ(g+1,p.x,p.y,p.z),i.setXYZ(g+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Mr.fromBufferAttribute(e,t),Mr.normalize(),e.setXYZ(t,Mr.x,Mr.y,Mr.z)}toNonIndexed(){function e(o,l){let u=o.array,p=o.itemSize,f=o.normalized,g=new u.constructor(l.length*p),m=0,x=0;for(let y=0,S=l.length;y<S;y++){o.isInterleavedBufferAttribute?m=l[y]*o.data.stride+o.offset:m=l[y]*p;for(let b=0;b<p;b++)g[x++]=u[m++]}return new Fa(g,p,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,i=this.index.array,r=this.attributes;for(let o in r){let l=r[o],u=e(l,i);t.setAttribute(o,u)}let a=this.morphAttributes;for(let o in a){let l=[],u=a[o];for(let p=0,f=u.length;p<f;p++){let g=u[p],m=e(g,i);l.push(m)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let o=0,l=s.length;o<l;o++){let u=s[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let l in i){let u=i[l];e.data.attributes[l]=u.toJSON(e.data)}let r={},a=!1;for(let l in this.morphAttributes){let u=this.morphAttributes[l],p=[];for(let f=0,g=u.length;f<g;f++){let m=u[f];p.push(m.toJSON(e.data))}p.length>0&&(r[l]=p,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone(t));let r=e.attributes;for(let u in r){let p=r[u];this.setAttribute(u,p.clone(t))}let a=e.morphAttributes;for(let u in a){let p=[],f=a[u];for(let g=0,m=f.length;g<m;g++)p.push(f[g].clone(t));this.morphAttributes[u]=p}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let u=0,p=s.length;u<p;u++){let f=s[u];this.addGroup(f.start,f.count,f.materialIndex)}let o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());let l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},b5=new Bn,Bc=new c_,jg=new Fu,y5=new zt,Gg=new zt,qg=new zt,Xg=new zt,s2=new zt,Yg=new zt,S5=new zt,$g=new zt,Kr=class extends tc{constructor(e=new zo,t=new qc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){let o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let o=this.morphTargetInfluences;if(a&&o){Yg.set(0,0,0);for(let l=0,u=a.length;l<u;l++){let p=o[l],f=a[l];p!==0&&(s2.fromBufferAttribute(f,e),s?Yg.addScaledVector(s2,p):Yg.addScaledVector(s2.sub(t),p))}t.add(Yg)}return t}raycast(e,t){let i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),jg.copy(i.boundingSphere),jg.applyMatrix4(a),Bc.copy(e.ray).recast(e.near),!(jg.containsPoint(Bc.origin)===!1&&(Bc.intersectSphere(jg,y5)===null||Bc.origin.distanceToSquared(y5)>(e.far-e.near)**2))&&(b5.copy(a).invert(),Bc.copy(e.ray).applyMatrix4(b5),!(i.boundingBox!==null&&Bc.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Bc)))}_computeIntersections(e,t,i){let r,a=this.geometry,s=this.material,o=a.index,l=a.attributes.position,u=a.attributes.uv,p=a.attributes.uv1,f=a.attributes.normal,g=a.groups,m=a.drawRange;if(o!==null)if(Array.isArray(s))for(let x=0,y=g.length;x<y;x++){let S=g[x],b=s[S.materialIndex],M=Math.max(S.start,m.start),T=Math.min(o.count,Math.min(S.start+S.count,m.start+m.count));for(let I=M,O=T;I<O;I+=3){let U=o.getX(I),N=o.getX(I+1),B=o.getX(I+2);r=Kg(this,b,e,i,u,p,f,U,N,B),r&&(r.faceIndex=Math.floor(I/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{let x=Math.max(0,m.start),y=Math.min(o.count,m.start+m.count);for(let S=x,b=y;S<b;S+=3){let M=o.getX(S),T=o.getX(S+1),I=o.getX(S+2);r=Kg(this,s,e,i,u,p,f,M,T,I),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let x=0,y=g.length;x<y;x++){let S=g[x],b=s[S.materialIndex],M=Math.max(S.start,m.start),T=Math.min(l.count,Math.min(S.start+S.count,m.start+m.count));for(let I=M,O=T;I<O;I+=3){let U=I,N=I+1,B=I+2;r=Kg(this,b,e,i,u,p,f,U,N,B),r&&(r.faceIndex=Math.floor(I/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{let x=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);for(let S=x,b=y;S<b;S+=3){let M=S,T=S+1,I=S+2;r=Kg(this,s,e,i,u,p,f,M,T,I),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}};function rW(n,e,t,i,r,a,s,o){let l;if(e.side===oa?l=i.intersectTriangle(s,a,r,!0,o):l=i.intersectTriangle(r,a,s,e.side===Bo,o),l===null)return null;$g.copy(o),$g.applyMatrix4(n.matrixWorld);let u=t.ray.origin.distanceTo($g);return u<t.near||u>t.far?null:{distance:u,point:$g.clone(),object:n}}function Kg(n,e,t,i,r,a,s,o,l,u){n.getVertexPosition(o,Gg),n.getVertexPosition(l,qg),n.getVertexPosition(u,Xg);let p=rW(n,e,t,i,Gg,qg,Xg,S5);if(p){let f=new zt;Hl.getBarycoord(S5,Gg,qg,Xg,f),r&&(p.uv=Hl.getInterpolatedAttribute(r,o,l,u,f,new Wi)),a&&(p.uv1=Hl.getInterpolatedAttribute(a,o,l,u,f,new Wi)),s&&(p.normal=Hl.getInterpolatedAttribute(s,o,l,u,f,new zt),p.normal.dot(i.direction)>0&&p.normal.multiplyScalar(-1));let g={a:o,b:l,c:u,normal:new zt,materialIndex:0};Hl.getNormal(Gg,qg,Xg,g.normal),p.face=g,p.barycoord=f}return p}var Yl=class n extends zo{constructor(e=1,t=1,i=1,r=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:a,depthSegments:s};let o=this;r=Math.floor(r),a=Math.floor(a),s=Math.floor(s);let l=[],u=[],p=[],f=[],g=0,m=0;x("z","y","x",-1,-1,i,t,e,s,a,0),x("z","y","x",1,-1,i,t,-e,s,a,1),x("x","z","y",1,1,e,i,t,r,s,2),x("x","z","y",1,-1,e,i,-t,r,s,3),x("x","y","z",1,-1,e,t,i,r,a,4),x("x","y","z",-1,-1,e,t,-i,r,a,5),this.setIndex(l),this.setAttribute("position",new Ba(u,3)),this.setAttribute("normal",new Ba(p,3)),this.setAttribute("uv",new Ba(f,2));function x(y,S,b,M,T,I,O,U,N,B,R){let F=I/N,P=O/B,V=I/2,$=O/2,K=U/2,ct=N+1,ot=B+1,at=0,Q=0,xt=new zt;for(let Mt=0;Mt<ot;Mt++){let qt=Mt*P-$;for(let z=0;z<ct;z++){let nt=z*F-V;xt[y]=nt*M,xt[S]=qt*T,xt[b]=K,u.push(xt.x,xt.y,xt.z),xt[y]=0,xt[S]=0,xt[b]=U>0?1:-1,p.push(xt.x,xt.y,xt.z),f.push(z/N),f.push(1-Mt/B),at+=1}}for(let Mt=0;Mt<B;Mt++)for(let qt=0;qt<N;qt++){let z=g+qt+ct*Mt,nt=g+qt+ct*(Mt+1),Z=g+(qt+1)+ct*(Mt+1),st=g+(qt+1)+ct*Mt;l.push(z,nt,st),l.push(nt,Z,st),Q+=6}o.addGroup(m,Q,R),m+=Q,g+=at}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Jc(n){let e={};for(let t in n){e[t]={};for(let i in n[t]){let r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Zr(n){let e={};for(let t=0;t<n.length;t++){let i=Jc(n[t]);for(let r in i)e[r]=i[r]}return e}function aW(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function V2(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:zi.workingColorSpace}var bT={clone:Jc,merge:Zr},sW=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,oW=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Is=class extends Xl{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=sW,this.fragmentShader=oW,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Jc(e.uniforms),this.uniformsGroups=aW(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},Xp=class extends tc{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Bn,this.projectionMatrix=new Bn,this.projectionMatrixInverse=new Bn,this.coordinateSystem=Zs}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},zl=new zt,w5=new Wi,C5=new Wi,Lr=class extends Xp{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=a_*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Uy*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return a_*2*Math.atan(Math.tan(Uy*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){zl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(zl.x,zl.y).multiplyScalar(-e/zl.z),zl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(zl.x,zl.y).multiplyScalar(-e/zl.z)}getViewSize(e,t){return this.getViewBounds(e,w5,C5),t.subVectors(C5,w5)}setViewOffset(e,t,i,r,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Uy*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,a=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let l=s.fullWidth,u=s.fullHeight;a+=s.offsetX*r/l,t-=s.offsetY*i/u,r*=s.width/l,i*=s.height/u}let o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},Ru=-90,Ou=1,d_=class extends tc{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new Lr(Ru,Ou,e,t);r.layers=this.layers,this.add(r);let a=new Lr(Ru,Ou,e,t);a.layers=this.layers,this.add(a);let s=new Lr(Ru,Ou,e,t);s.layers=this.layers,this.add(s);let o=new Lr(Ru,Ou,e,t);o.layers=this.layers,this.add(o);let l=new Lr(Ru,Ou,e,t);l.layers=this.layers,this.add(l);let u=new Lr(Ru,Ou,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,r,a,s,o,l]=t;for(let u of t)this.remove(u);if(e===Zs)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Up)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[a,s,o,l,u,p]=this.children,f=e.getRenderTarget(),g=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;let y=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,a),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=y,e.setRenderTarget(i,5,r),e.render(t,p),e.setRenderTarget(f,g,m),e.xr.enabled=x,i.texture.needsPMREMUpdate=!0}},Yp=class extends Ql{constructor(e,t,i,r,a,s,o,l,u,p){e=e!==void 0?e:[],t=t!==void 0?t:Yc,super(e,t,i,r,a,s,o,l,u,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},u_=class extends Js{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Yp(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ks}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Yl(5,5,5),a=new Is({name:"CubemapFromEquirect",uniforms:Jc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:oa,blending:Wo});a.uniforms.tEquirect.value=t;let s=new Kr(r,a),o=t.minFilter;return t.minFilter===Zl&&(t.minFilter=ks),new d_(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,i,r){let a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(a)}};var $p=class extends tc{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ql,this.environmentIntensity=1,this.environmentRotation=new ql,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};var o2=new zt,lW=new zt,cW=new vi,Ks=class{constructor(e=new zt(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=o2.subVectors(i,t).cross(lW.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let i=e.delta(o2),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(e.start).addScaledVector(i,a)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||cW.getNormalMatrix(e),r=this.coplanarPoint(o2).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Vc=new Fu,Zg=new zt,Bu=class{constructor(e=new Ks,t=new Ks,i=new Ks,r=new Ks,a=new Ks,s=new Ks){this.planes=[e,t,i,r,a,s]}set(e,t,i,r,a,s){let o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(a),o[5].copy(s),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Zs){let i=this.planes,r=e.elements,a=r[0],s=r[1],o=r[2],l=r[3],u=r[4],p=r[5],f=r[6],g=r[7],m=r[8],x=r[9],y=r[10],S=r[11],b=r[12],M=r[13],T=r[14],I=r[15];if(i[0].setComponents(l-a,g-u,S-m,I-b).normalize(),i[1].setComponents(l+a,g+u,S+m,I+b).normalize(),i[2].setComponents(l+s,g+p,S+x,I+M).normalize(),i[3].setComponents(l-s,g-p,S-x,I-M).normalize(),i[4].setComponents(l-o,g-f,S-y,I-T).normalize(),t===Zs)i[5].setComponents(l+o,g+f,S+y,I+T).normalize();else if(t===Up)i[5].setComponents(o,f,y,T).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Vc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Vc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Vc)}intersectsSprite(e){return Vc.center.set(0,0,0),Vc.radius=.7071067811865476,Vc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Vc)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(Zg.x=r.normal.x>0?e.max.x:e.min.x,Zg.y=r.normal.y>0?e.max.y:e.min.y,Zg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Zg)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var Ho=class extends tc{constructor(){super(),this.isGroup=!0,this.type="Group"}};var Kp=class extends Ql{constructor(e,t,i,r,a,s,o,l,u,p=zc){if(p!==zc&&p!==jc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&p===zc&&(i=Jl),i===void 0&&p===jc&&(i=Kc),super(null,r,a,s,o,l,p,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:ns,this.minFilter=l!==void 0?l:ns,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}};var Zp=class n extends zo{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let a=e/2,s=t/2,o=Math.floor(i),l=Math.floor(r),u=o+1,p=l+1,f=e/o,g=t/l,m=[],x=[],y=[],S=[];for(let b=0;b<p;b++){let M=b*g-s;for(let T=0;T<u;T++){let I=T*f-a;x.push(I,-M,0),y.push(0,0,1),S.push(T/o),S.push(1-b/l)}}for(let b=0;b<l;b++)for(let M=0;M<o;M++){let T=M+u*b,I=M+u*(b+1),O=M+1+u*(b+1),U=M+1+u*b;m.push(T,I,U),m.push(I,O,U)}this.setIndex(m),this.setAttribute("position",new Ba(x,3)),this.setAttribute("normal",new Ba(y,3)),this.setAttribute("uv",new Ba(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}};var Jp=class n extends zo{constructor(e=1,t=32,i=16,r=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:a,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));let l=Math.min(s+o,Math.PI),u=0,p=[],f=new zt,g=new zt,m=[],x=[],y=[],S=[];for(let b=0;b<=i;b++){let M=[],T=b/i,I=0;b===0&&s===0?I=.5/t:b===i&&l===Math.PI&&(I=-.5/t);for(let O=0;O<=t;O++){let U=O/t;f.x=-e*Math.cos(r+U*a)*Math.sin(s+T*o),f.y=e*Math.cos(s+T*o),f.z=e*Math.sin(r+U*a)*Math.sin(s+T*o),x.push(f.x,f.y,f.z),g.copy(f).normalize(),y.push(g.x,g.y,g.z),S.push(U+I,1-T),M.push(u++)}p.push(M)}for(let b=0;b<i;b++)for(let M=0;M<t;M++){let T=p[b][M+1],I=p[b][M],O=p[b+1][M],U=p[b+1][M+1];(b!==0||s>0)&&m.push(T,I,U),(b!==i-1||l<Math.PI)&&m.push(I,O,U)}this.setIndex(m),this.setAttribute("position",new Ba(x,3)),this.setAttribute("normal",new Ba(y,3)),this.setAttribute("uv",new Ba(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}};var Qp=class extends Xl{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Vi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Vi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=O2,this.normalScale=new Wi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ql,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};var h_=class extends Xl{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=aT,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},p_=class extends Xl{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function Jg(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function dW(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}var Xc=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],a=t[i-1];t:{e:{let s;i:{r:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<a)break r;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(a=r,r=t[++i],e<r)break e}s=t.length;break i}if(!(e>=a)){let o=t[1];e<o&&(i=2,a=o);for(let l=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=a,a=t[--i-1],e>=a)break e}s=i,i=0;break i}break t}for(;i<s;){let o=i+s>>>1;e<t[o]?s=o:i=o+1}if(r=t[i],a=t[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let s=0;s!==r;++s)t[s]=i[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},f_=class extends Xc{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:u2,endingEnd:u2}}intervalChanged_(e,t,i){let r=this.parameterPositions,a=e-2,s=e+1,o=r[a],l=r[s];if(o===void 0)switch(this.getSettings_().endingStart){case h2:a=e,o=2*t-i;break;case p2:a=r.length-2,o=t+r[a]-r[a+1];break;default:a=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case h2:s=e,l=2*i-t;break;case p2:s=1,l=i+r[1]-r[0];break;default:s=e-1,l=t}let u=(i-t)*.5,p=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(l-i),this._offsetPrev=a*p,this._offsetNext=s*p}interpolate_(e,t,i,r){let a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,p=this._offsetPrev,f=this._offsetNext,g=this._weightPrev,m=this._weightNext,x=(i-t)/(r-t),y=x*x,S=y*x,b=-g*S+2*g*y-g*x,M=(1+g)*S+(-1.5-2*g)*y+(-.5+g)*x+1,T=(-1-m)*S+(1.5+m)*y+.5*x,I=m*S-m*y;for(let O=0;O!==o;++O)a[O]=b*s[p+O]+M*s[u+O]+T*s[l+O]+I*s[f+O];return a}},m_=class extends Xc{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,p=(i-t)/(r-t),f=1-p;for(let g=0;g!==o;++g)a[g]=s[u+g]*f+s[l+g]*p;return a}},g_=class extends Xc{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},rs=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Jg(t,this.TimeBufferType),this.values=Jg(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Jg(e.times,Array),values:Jg(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new g_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new m_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new f_(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Bp:t=this.InterpolantFactoryMethodDiscrete;break;case r_:t=this.InterpolantFactoryMethodLinear;break;case Qg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Bp;case this.InterpolantFactoryMethodLinear:return r_;case this.InterpolantFactoryMethodSmooth:return Qg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,a=0,s=r-1;for(;a!==r&&i[a]<e;)++a;for(;s!==-1&&i[s]>t;)--s;if(++s,a!==0||s!==r){a>=s&&(s=Math.max(s,1),a=s-1);let o=this.getValueSize();this.times=i.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,a=i.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){let l=i[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,s),e=!1;break}s=l}if(r!==void 0&&dW(r))for(let o=0,l=r.length;o!==l;++o){let u=r[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Qg,a=e.length-1,s=1;for(let o=1;o<a;++o){let l=!1,u=e[o],p=e[o+1];if(u!==p&&(o!==1||u!==e[0]))if(r)l=!0;else{let f=o*i,g=f-i,m=f+i;for(let x=0;x!==i;++x){let y=t[f+x];if(y!==t[g+x]||y!==t[m+x]){l=!0;break}}}if(l){if(o!==s){e[s]=e[o];let f=o*i,g=s*i;for(let m=0;m!==i;++m)t[g+m]=t[f+m]}++s}}if(a>0){e[s]=e[a];for(let o=a*i,l=s*i,u=0;u!==i;++u)t[l+u]=t[o+u];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};rs.prototype.TimeBufferType=Float32Array;rs.prototype.ValueBufferType=Float32Array;rs.prototype.DefaultInterpolation=r_;var $l=class extends rs{constructor(e,t,i){super(e,t,i)}};$l.prototype.ValueTypeName="bool";$l.prototype.ValueBufferType=Array;$l.prototype.DefaultInterpolation=Bp;$l.prototype.InterpolantFactoryMethodLinear=void 0;$l.prototype.InterpolantFactoryMethodSmooth=void 0;var __=class extends rs{};__.prototype.ValueTypeName="color";var v_=class extends rs{};v_.prototype.ValueTypeName="number";var x_=class extends Xc{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=(i-t)/(r-t),u=e*o;for(let p=u+o;u!==p;u+=4)Uo.slerpFlat(a,0,s,u-o,s,u,l);return a}},tf=class extends rs{InterpolantFactoryMethodLinear(e){return new x_(this.times,this.values,this.getValueSize(),e)}};tf.prototype.ValueTypeName="quaternion";tf.prototype.InterpolantFactoryMethodSmooth=void 0;var Kl=class extends rs{constructor(e,t,i){super(e,t,i)}};Kl.prototype.ValueTypeName="string";Kl.prototype.ValueBufferType=Array;Kl.prototype.DefaultInterpolation=Bp;Kl.prototype.InterpolantFactoryMethodLinear=void 0;Kl.prototype.InterpolantFactoryMethodSmooth=void 0;var b_=class extends rs{};b_.prototype.ValueTypeName="vector";var y_=class extends tc{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Vi(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}};var l2=new Bn,M5=new zt,E5=new zt,g2=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Wi(512,512),this.map=null,this.mapPass=null,this.matrix=new Bn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Bu,this._frameExtents=new Wi(1,1),this._viewportCount=1,this._viewports=[new nn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;M5.setFromMatrixPosition(e.matrixWorld),t.position.copy(M5),E5.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(E5),t.updateMatrixWorld(),l2.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(l2),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(l2)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}};var A5=new Bn,Fp=new zt,c2=new zt,_2=class extends g2{constructor(){super(new Lr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Wi(4,2),this._viewportCount=6,this._viewports=[new nn(2,1,1,1),new nn(0,1,1,1),new nn(3,1,1,1),new nn(1,1,1,1),new nn(3,0,1,1),new nn(1,0,1,1)],this._cubeDirections=[new zt(1,0,0),new zt(-1,0,0),new zt(0,0,1),new zt(0,0,-1),new zt(0,1,0),new zt(0,-1,0)],this._cubeUps=[new zt(0,1,0),new zt(0,1,0),new zt(0,1,0),new zt(0,1,0),new zt(0,0,1),new zt(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,a=e.distance||i.far;a!==i.far&&(i.far=a,i.updateProjectionMatrix()),Fp.setFromMatrixPosition(e.matrixWorld),i.position.copy(Fp),c2.copy(i.position),c2.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(c2),i.updateMatrixWorld(),r.makeTranslation(-Fp.x,-Fp.y,-Fp.z),A5.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(A5)}},ef=class extends y_{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new _2}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},S_=class extends Xp{constructor(e=-1,t=1,i=1,r=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,a=i-e,s=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){let u=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,s=a+u*this.view.width,o-=p*this.view.offsetY,l=o-p*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};var w_=class extends Lr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}};var U2="\\[\\]\\.:\\/",uW=new RegExp("["+U2+"]","g"),z2="[^"+U2+"]",hW="[^"+U2.replace("\\.","")+"]",pW=/((?:WC+[\/:])*)/.source.replace("WC",z2),fW=/(WCOD+)?/.source.replace("WCOD",hW),mW=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",z2),gW=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",z2),_W=new RegExp("^"+pW+fW+mW+gW+"$"),vW=["material","materials","bones","map"],v2=class{constructor(e,t,i){let r=i||Xn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},Xn=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(uW,"")}static parseTrackName(t){let i=_W.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},a=r.nodeName&&r.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){let s=r.nodeName.substring(a+1);vW.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,a),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){let r=function(s){for(let o=0;o<s.length;o++){let l=s[o];if(l.name===i||l.uuid===i)return l;let u=r(l.children);if(u)return u}return null},a=r(t.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){let r=this.resolvedProperty;for(let a=0,s=r.length;a!==s;++a)t[i++]=r[a]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){let r=this.resolvedProperty;for(let a=0,s=r.length;a!==s;++a)r[a]=t[i++]}_setValue_array_setNeedsUpdate(t,i){let r=this.resolvedProperty;for(let a=0,s=r.length;a!==s;++a)r[a]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){let r=this.resolvedProperty;for(let a=0,s=r.length;a!==s;++a)r[a]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node,i=this.parsedPath,r=i.objectName,a=i.propertyName,s=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let p=i.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let f=0;f<t.length;f++)if(t[f].name===p){p=f;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(p!==void 0){if(t[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[p]}}let o=t[a];if(o===void 0){let p=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+a+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(a==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=a;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=v2,n})();Xn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Xn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Xn.prototype.GetterByBindingType=[Xn.prototype._getValue_direct,Xn.prototype._getValue_array,Xn.prototype._getValue_arrayElement,Xn.prototype._getValue_toArray];Xn.prototype.SetterByBindingTypeAndVersioning=[[Xn.prototype._setValue_direct,Xn.prototype._setValue_direct_setNeedsUpdate,Xn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Xn.prototype._setValue_array,Xn.prototype._setValue_array_setNeedsUpdate,Xn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Xn.prototype._setValue_arrayElement,Xn.prototype._setValue_arrayElement_setNeedsUpdate,Xn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Xn.prototype._setValue_fromArray,Xn.prototype._setValue_fromArray_setNeedsUpdate,Xn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var fnt=new Float32Array(1);function H2(n,e,t,i){let r=xW(i);switch(t){case T2:return n*e;case I2:return n*e;case D2:return n*e*2;case P2:return n*e/r.components*r.byteLength;case B_:return n*e/r.components*r.byteLength;case L2:return n*e*2/r.components*r.byteLength;case V_:return n*e*2/r.components*r.byteLength;case k2:return n*e*3/r.components*r.byteLength;case as:return n*e*4/r.components*r.byteLength;case U_:return n*e*4/r.components*r.byteLength;case af:case sf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case of:case lf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case H_:case j_:return Math.max(n,16)*Math.max(e,8)/4;case z_:case W_:return Math.max(n,8)*Math.max(e,8)/2;case G_:case q_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case X_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Y_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case $_:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case K_:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Z_:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case J_:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Q_:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case t1:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case e1:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case i1:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case n1:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case r1:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case a1:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case s1:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case o1:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case cf:case l1:case c1:return Math.ceil(n/4)*Math.ceil(e/4)*16;case R2:case d1:return Math.ceil(n/4)*Math.ceil(e/4)*8;case u1:case h1:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function xW(n){switch(n){case eo:case M2:return{byteLength:1,components:1};case Vu:case E2:case Uu:return{byteLength:2,components:1};case N_:case F_:return{byteLength:2,components:4};case Jl:case O_:case io:return{byteLength:4,components:1};case A2:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:C_}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=C_);function jT(){let n=null,e=!1,t=null,i=null;function r(a,s){t(a,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function bW(n){let e=new WeakMap;function t(o,l){let u=o.array,p=o.usage,f=u.byteLength,g=n.createBuffer();n.bindBuffer(l,g),n.bufferData(l,u,p),o.onUploadCallback();let m;if(u instanceof Float32Array)m=n.FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)m=n.SHORT;else if(u instanceof Uint32Array)m=n.UNSIGNED_INT;else if(u instanceof Int32Array)m=n.INT;else if(u instanceof Int8Array)m=n.BYTE;else if(u instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:g,type:m,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:f}}function i(o,l,u){let p=l.array,f=l.updateRanges;if(n.bindBuffer(u,o),f.length===0)n.bufferSubData(u,0,p);else{f.sort((m,x)=>m.start-x.start);let g=0;for(let m=1;m<f.length;m++){let x=f[g],y=f[m];y.start<=x.start+x.count+1?x.count=Math.max(x.count,y.start+y.count-x.start):(++g,f[g]=y)}f.length=g+1;for(let m=0,x=f.length;m<x;m++){let y=f[m];n.bufferSubData(u,y.start*p.BYTES_PER_ELEMENT,p,y.start,y.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);let l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function s(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){let p=e.get(o);(!p||p.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}let u=e.get(o);if(u===void 0)e.set(o,t(o,l));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,o,l),u.version=o.version}}return{get:r,remove:a,update:s}}var yW=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,SW=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,wW=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,CW=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,MW=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,EW=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,AW=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,TW=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,kW=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,IW=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,DW=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,PW=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,LW=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,RW=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,OW=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,NW=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,FW=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,BW=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,VW=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,UW=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,zW=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,HW=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,WW=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,jW=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,GW=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,qW=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,XW=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,YW=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,$W=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,KW=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,ZW="gl_FragColor = linearToOutputTexel( gl_FragColor );",JW=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,QW=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,tj=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,ej=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,ij=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,nj=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,rj=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,aj=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,sj=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,oj=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,lj=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,cj=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,dj=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,uj=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,hj=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,pj=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,fj=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,mj=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,gj=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,_j=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,vj=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,xj=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,bj=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,yj=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Sj=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,wj=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Cj=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Mj=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ej=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Aj=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Tj=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,kj=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Ij=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Dj=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Pj=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Lj=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Rj=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Oj=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Nj=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Fj=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Bj=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Vj=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Uj=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zj=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Hj=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Wj=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,jj=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Gj=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,qj=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Xj=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Yj=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,$j=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Kj=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Zj=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Jj=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Qj=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,tG=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,eG=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,iG=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,nG=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,rG=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,aG=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,sG=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,oG=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,lG=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,cG=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,dG=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,uG=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,hG=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,pG=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,fG=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,mG=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,gG=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_G=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,vG=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,xG=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,bG=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,yG=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,SG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,wG=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,CG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,MG=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EG=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,AG=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,TG=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,kG=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,IG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,DG=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,PG=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,LG=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,RG=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,OG=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NG=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FG=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BG=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,VG=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UG=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,zG=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,HG=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WG=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jG=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,GG=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qG=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XG=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YG=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,$G=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,KG=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ZG=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,JG=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,QG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Si={alphahash_fragment:yW,alphahash_pars_fragment:SW,alphamap_fragment:wW,alphamap_pars_fragment:CW,alphatest_fragment:MW,alphatest_pars_fragment:EW,aomap_fragment:AW,aomap_pars_fragment:TW,batching_pars_vertex:kW,batching_vertex:IW,begin_vertex:DW,beginnormal_vertex:PW,bsdfs:LW,iridescence_fragment:RW,bumpmap_pars_fragment:OW,clipping_planes_fragment:NW,clipping_planes_pars_fragment:FW,clipping_planes_pars_vertex:BW,clipping_planes_vertex:VW,color_fragment:UW,color_pars_fragment:zW,color_pars_vertex:HW,color_vertex:WW,common:jW,cube_uv_reflection_fragment:GW,defaultnormal_vertex:qW,displacementmap_pars_vertex:XW,displacementmap_vertex:YW,emissivemap_fragment:$W,emissivemap_pars_fragment:KW,colorspace_fragment:ZW,colorspace_pars_fragment:JW,envmap_fragment:QW,envmap_common_pars_fragment:tj,envmap_pars_fragment:ej,envmap_pars_vertex:ij,envmap_physical_pars_fragment:pj,envmap_vertex:nj,fog_vertex:rj,fog_pars_vertex:aj,fog_fragment:sj,fog_pars_fragment:oj,gradientmap_pars_fragment:lj,lightmap_pars_fragment:cj,lights_lambert_fragment:dj,lights_lambert_pars_fragment:uj,lights_pars_begin:hj,lights_toon_fragment:fj,lights_toon_pars_fragment:mj,lights_phong_fragment:gj,lights_phong_pars_fragment:_j,lights_physical_fragment:vj,lights_physical_pars_fragment:xj,lights_fragment_begin:bj,lights_fragment_maps:yj,lights_fragment_end:Sj,logdepthbuf_fragment:wj,logdepthbuf_pars_fragment:Cj,logdepthbuf_pars_vertex:Mj,logdepthbuf_vertex:Ej,map_fragment:Aj,map_pars_fragment:Tj,map_particle_fragment:kj,map_particle_pars_fragment:Ij,metalnessmap_fragment:Dj,metalnessmap_pars_fragment:Pj,morphinstance_vertex:Lj,morphcolor_vertex:Rj,morphnormal_vertex:Oj,morphtarget_pars_vertex:Nj,morphtarget_vertex:Fj,normal_fragment_begin:Bj,normal_fragment_maps:Vj,normal_pars_fragment:Uj,normal_pars_vertex:zj,normal_vertex:Hj,normalmap_pars_fragment:Wj,clearcoat_normal_fragment_begin:jj,clearcoat_normal_fragment_maps:Gj,clearcoat_pars_fragment:qj,iridescence_pars_fragment:Xj,opaque_fragment:Yj,packing:$j,premultiplied_alpha_fragment:Kj,project_vertex:Zj,dithering_fragment:Jj,dithering_pars_fragment:Qj,roughnessmap_fragment:tG,roughnessmap_pars_fragment:eG,shadowmap_pars_fragment:iG,shadowmap_pars_vertex:nG,shadowmap_vertex:rG,shadowmask_pars_fragment:aG,skinbase_vertex:sG,skinning_pars_vertex:oG,skinning_vertex:lG,skinnormal_vertex:cG,specularmap_fragment:dG,specularmap_pars_fragment:uG,tonemapping_fragment:hG,tonemapping_pars_fragment:pG,transmission_fragment:fG,transmission_pars_fragment:mG,uv_pars_fragment:gG,uv_pars_vertex:_G,uv_vertex:vG,worldpos_vertex:xG,background_vert:bG,background_frag:yG,backgroundCube_vert:SG,backgroundCube_frag:wG,cube_vert:CG,cube_frag:MG,depth_vert:EG,depth_frag:AG,distanceRGBA_vert:TG,distanceRGBA_frag:kG,equirect_vert:IG,equirect_frag:DG,linedashed_vert:PG,linedashed_frag:LG,meshbasic_vert:RG,meshbasic_frag:OG,meshlambert_vert:NG,meshlambert_frag:FG,meshmatcap_vert:BG,meshmatcap_frag:VG,meshnormal_vert:UG,meshnormal_frag:zG,meshphong_vert:HG,meshphong_frag:WG,meshphysical_vert:jG,meshphysical_frag:GG,meshtoon_vert:qG,meshtoon_frag:XG,points_vert:YG,points_frag:$G,shadow_vert:KG,shadow_frag:ZG,sprite_vert:JG,sprite_frag:QG},ke={common:{diffuse:{value:new Vi(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new vi},alphaMap:{value:null},alphaMapTransform:{value:new vi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new vi}},envmap:{envMap:{value:null},envMapRotation:{value:new vi},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new vi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new vi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new vi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new vi},normalScale:{value:new Wi(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new vi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new vi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new vi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new vi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Vi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Vi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new vi},alphaTest:{value:0},uvTransform:{value:new vi}},sprite:{diffuse:{value:new Vi(16777215)},opacity:{value:1},center:{value:new Wi(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new vi},alphaMap:{value:null},alphaMapTransform:{value:new vi},alphaTest:{value:0}}},no={basic:{uniforms:Zr([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.fog]),vertexShader:Si.meshbasic_vert,fragmentShader:Si.meshbasic_frag},lambert:{uniforms:Zr([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,ke.lights,{emissive:{value:new Vi(0)}}]),vertexShader:Si.meshlambert_vert,fragmentShader:Si.meshlambert_frag},phong:{uniforms:Zr([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,ke.lights,{emissive:{value:new Vi(0)},specular:{value:new Vi(1118481)},shininess:{value:30}}]),vertexShader:Si.meshphong_vert,fragmentShader:Si.meshphong_frag},standard:{uniforms:Zr([ke.common,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.roughnessmap,ke.metalnessmap,ke.fog,ke.lights,{emissive:{value:new Vi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Si.meshphysical_vert,fragmentShader:Si.meshphysical_frag},toon:{uniforms:Zr([ke.common,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.gradientmap,ke.fog,ke.lights,{emissive:{value:new Vi(0)}}]),vertexShader:Si.meshtoon_vert,fragmentShader:Si.meshtoon_frag},matcap:{uniforms:Zr([ke.common,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,{matcap:{value:null}}]),vertexShader:Si.meshmatcap_vert,fragmentShader:Si.meshmatcap_frag},points:{uniforms:Zr([ke.points,ke.fog]),vertexShader:Si.points_vert,fragmentShader:Si.points_frag},dashed:{uniforms:Zr([ke.common,ke.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Si.linedashed_vert,fragmentShader:Si.linedashed_frag},depth:{uniforms:Zr([ke.common,ke.displacementmap]),vertexShader:Si.depth_vert,fragmentShader:Si.depth_frag},normal:{uniforms:Zr([ke.common,ke.bumpmap,ke.normalmap,ke.displacementmap,{opacity:{value:1}}]),vertexShader:Si.meshnormal_vert,fragmentShader:Si.meshnormal_frag},sprite:{uniforms:Zr([ke.sprite,ke.fog]),vertexShader:Si.sprite_vert,fragmentShader:Si.sprite_frag},background:{uniforms:{uvTransform:{value:new vi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Si.background_vert,fragmentShader:Si.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new vi}},vertexShader:Si.backgroundCube_vert,fragmentShader:Si.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Si.cube_vert,fragmentShader:Si.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Si.equirect_vert,fragmentShader:Si.equirect_frag},distanceRGBA:{uniforms:Zr([ke.common,ke.displacementmap,{referencePosition:{value:new zt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Si.distanceRGBA_vert,fragmentShader:Si.distanceRGBA_frag},shadow:{uniforms:Zr([ke.lights,ke.fog,{color:{value:new Vi(0)},opacity:{value:1}}]),vertexShader:Si.shadow_vert,fragmentShader:Si.shadow_frag}};no.physical={uniforms:Zr([no.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new vi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new vi},clearcoatNormalScale:{value:new Wi(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new vi},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new vi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new vi},sheen:{value:0},sheenColor:{value:new Vi(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new vi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new vi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new vi},transmissionSamplerSize:{value:new Wi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new vi},attenuationDistance:{value:0},attenuationColor:{value:new Vi(0)},specularColor:{value:new Vi(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new vi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new vi},anisotropyVector:{value:new Wi},anisotropyMap:{value:null},anisotropyMapTransform:{value:new vi}}]),vertexShader:Si.meshphysical_vert,fragmentShader:Si.meshphysical_frag};var p1={r:0,b:0,g:0},Qc=new ql,tq=new Bn;function eq(n,e,t,i,r,a,s){let o=new Vi(0),l=a===!0?0:1,u,p,f=null,g=0,m=null;function x(T){let I=T.isScene===!0?T.background:null;return I&&I.isTexture&&(I=(T.backgroundBlurriness>0?t:e).get(I)),I}function y(T){let I=!1,O=x(T);O===null?b(o,l):O&&O.isColor&&(b(O,1),I=!0);let U=n.xr.getEnvironmentBlendMode();U==="additive"?i.buffers.color.setClear(0,0,0,1,s):U==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||I)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function S(T,I){let O=x(I);O&&(O.isCubeTexture||O.mapping===nf)?(p===void 0&&(p=new Kr(new Yl(1,1,1),new Is({name:"BackgroundCubeMaterial",uniforms:Jc(no.backgroundCube.uniforms),vertexShader:no.backgroundCube.vertexShader,fragmentShader:no.backgroundCube.fragmentShader,side:oa,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(U,N,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),Qc.copy(I.backgroundRotation),Qc.x*=-1,Qc.y*=-1,Qc.z*=-1,O.isCubeTexture&&O.isRenderTargetTexture===!1&&(Qc.y*=-1,Qc.z*=-1),p.material.uniforms.envMap.value=O,p.material.uniforms.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=I.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(tq.makeRotationFromEuler(Qc)),p.material.toneMapped=zi.getTransfer(O.colorSpace)!==rn,(f!==O||g!==O.version||m!==n.toneMapping)&&(p.material.needsUpdate=!0,f=O,g=O.version,m=n.toneMapping),p.layers.enableAll(),T.unshift(p,p.geometry,p.material,0,0,null)):O&&O.isTexture&&(u===void 0&&(u=new Kr(new Zp(2,2),new Is({name:"BackgroundMaterial",uniforms:Jc(no.background.uniforms),vertexShader:no.background.vertexShader,fragmentShader:no.background.fragmentShader,side:Bo,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=O,u.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,u.material.toneMapped=zi.getTransfer(O.colorSpace)!==rn,O.matrixAutoUpdate===!0&&O.updateMatrix(),u.material.uniforms.uvTransform.value.copy(O.matrix),(f!==O||g!==O.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,f=O,g=O.version,m=n.toneMapping),u.layers.enableAll(),T.unshift(u,u.geometry,u.material,0,0,null))}function b(T,I){T.getRGB(p1,V2(n)),i.buffers.color.setClear(p1.r,p1.g,p1.b,I,s)}function M(){p!==void 0&&(p.geometry.dispose(),p.material.dispose()),u!==void 0&&(u.geometry.dispose(),u.material.dispose())}return{getClearColor:function(){return o},setClearColor:function(T,I=1){o.set(T),l=I,b(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(T){l=T,b(o,l)},render:y,addToRenderList:S,dispose:M}}function iq(n,e){let t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=g(null),a=r,s=!1;function o(F,P,V,$,K){let ct=!1,ot=f($,V,P);a!==ot&&(a=ot,u(a.object)),ct=m(F,$,V,K),ct&&x(F,$,V,K),K!==null&&e.update(K,n.ELEMENT_ARRAY_BUFFER),(ct||s)&&(s=!1,I(F,P,V,$),K!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(K).buffer))}function l(){return n.createVertexArray()}function u(F){return n.bindVertexArray(F)}function p(F){return n.deleteVertexArray(F)}function f(F,P,V){let $=V.wireframe===!0,K=i[F.id];K===void 0&&(K={},i[F.id]=K);let ct=K[P.id];ct===void 0&&(ct={},K[P.id]=ct);let ot=ct[$];return ot===void 0&&(ot=g(l()),ct[$]=ot),ot}function g(F){let P=[],V=[],$=[];for(let K=0;K<t;K++)P[K]=0,V[K]=0,$[K]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:V,attributeDivisors:$,object:F,attributes:{},index:null}}function m(F,P,V,$){let K=a.attributes,ct=P.attributes,ot=0,at=V.getAttributes();for(let Q in at)if(at[Q].location>=0){let Mt=K[Q],qt=ct[Q];if(qt===void 0&&(Q==="instanceMatrix"&&F.instanceMatrix&&(qt=F.instanceMatrix),Q==="instanceColor"&&F.instanceColor&&(qt=F.instanceColor)),Mt===void 0||Mt.attribute!==qt||qt&&Mt.data!==qt.data)return!0;ot++}return a.attributesNum!==ot||a.index!==$}function x(F,P,V,$){let K={},ct=P.attributes,ot=0,at=V.getAttributes();for(let Q in at)if(at[Q].location>=0){let Mt=ct[Q];Mt===void 0&&(Q==="instanceMatrix"&&F.instanceMatrix&&(Mt=F.instanceMatrix),Q==="instanceColor"&&F.instanceColor&&(Mt=F.instanceColor));let qt={};qt.attribute=Mt,Mt&&Mt.data&&(qt.data=Mt.data),K[Q]=qt,ot++}a.attributes=K,a.attributesNum=ot,a.index=$}function y(){let F=a.newAttributes;for(let P=0,V=F.length;P<V;P++)F[P]=0}function S(F){b(F,0)}function b(F,P){let V=a.newAttributes,$=a.enabledAttributes,K=a.attributeDivisors;V[F]=1,$[F]===0&&(n.enableVertexAttribArray(F),$[F]=1),K[F]!==P&&(n.vertexAttribDivisor(F,P),K[F]=P)}function M(){let F=a.newAttributes,P=a.enabledAttributes;for(let V=0,$=P.length;V<$;V++)P[V]!==F[V]&&(n.disableVertexAttribArray(V),P[V]=0)}function T(F,P,V,$,K,ct,ot){ot===!0?n.vertexAttribIPointer(F,P,V,K,ct):n.vertexAttribPointer(F,P,V,$,K,ct)}function I(F,P,V,$){y();let K=$.attributes,ct=V.getAttributes(),ot=P.defaultAttributeValues;for(let at in ct){let Q=ct[at];if(Q.location>=0){let xt=K[at];if(xt===void 0&&(at==="instanceMatrix"&&F.instanceMatrix&&(xt=F.instanceMatrix),at==="instanceColor"&&F.instanceColor&&(xt=F.instanceColor)),xt!==void 0){let Mt=xt.normalized,qt=xt.itemSize,z=e.get(xt);if(z===void 0)continue;let nt=z.buffer,Z=z.type,st=z.bytesPerElement,pt=Z===n.INT||Z===n.UNSIGNED_INT||xt.gpuType===O_;if(xt.isInterleavedBufferAttribute){let ft=xt.data,St=ft.stride,kt=xt.offset;if(ft.isInstancedInterleavedBuffer){for(let Qt=0;Qt<Q.locationSize;Qt++)b(Q.location+Qt,ft.meshPerAttribute);F.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=ft.meshPerAttribute*ft.count)}else for(let Qt=0;Qt<Q.locationSize;Qt++)S(Q.location+Qt);n.bindBuffer(n.ARRAY_BUFFER,nt);for(let Qt=0;Qt<Q.locationSize;Qt++)T(Q.location+Qt,qt/Q.locationSize,Z,Mt,St*st,(kt+qt/Q.locationSize*Qt)*st,pt)}else{if(xt.isInstancedBufferAttribute){for(let ft=0;ft<Q.locationSize;ft++)b(Q.location+ft,xt.meshPerAttribute);F.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=xt.meshPerAttribute*xt.count)}else for(let ft=0;ft<Q.locationSize;ft++)S(Q.location+ft);n.bindBuffer(n.ARRAY_BUFFER,nt);for(let ft=0;ft<Q.locationSize;ft++)T(Q.location+ft,qt/Q.locationSize,Z,Mt,qt*st,qt/Q.locationSize*ft*st,pt)}}else if(ot!==void 0){let Mt=ot[at];if(Mt!==void 0)switch(Mt.length){case 2:n.vertexAttrib2fv(Q.location,Mt);break;case 3:n.vertexAttrib3fv(Q.location,Mt);break;case 4:n.vertexAttrib4fv(Q.location,Mt);break;default:n.vertexAttrib1fv(Q.location,Mt)}}}}M()}function O(){B();for(let F in i){let P=i[F];for(let V in P){let $=P[V];for(let K in $)p($[K].object),delete $[K];delete P[V]}delete i[F]}}function U(F){if(i[F.id]===void 0)return;let P=i[F.id];for(let V in P){let $=P[V];for(let K in $)p($[K].object),delete $[K];delete P[V]}delete i[F.id]}function N(F){for(let P in i){let V=i[P];if(V[F.id]===void 0)continue;let $=V[F.id];for(let K in $)p($[K].object),delete $[K];delete V[F.id]}}function B(){R(),s=!0,a!==r&&(a=r,u(a.object))}function R(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:B,resetDefaultState:R,dispose:O,releaseStatesOfGeometry:U,releaseStatesOfProgram:N,initAttributes:y,enableAttribute:S,disableUnusedAttributes:M}}function nq(n,e,t){let i;function r(u){i=u}function a(u,p){n.drawArrays(i,u,p),t.update(p,i,1)}function s(u,p,f){f!==0&&(n.drawArraysInstanced(i,u,p,f),t.update(p,i,f))}function o(u,p,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,p,0,f);let m=0;for(let x=0;x<f;x++)m+=p[x];t.update(m,i,1)}function l(u,p,f,g){if(f===0)return;let m=e.get("WEBGL_multi_draw");if(m===null)for(let x=0;x<u.length;x++)s(u[x],p[x],g[x]);else{m.multiDrawArraysInstancedWEBGL(i,u,0,p,0,g,0,f);let x=0;for(let y=0;y<f;y++)x+=p[y]*g[y];t.update(x,i,1)}}this.setMode=r,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function rq(n,e,t,i){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let N=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(N){return!(N!==as&&i.convert(N)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(N){let B=N===Uu&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(N!==eo&&i.convert(N)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&N!==io&&!B)}function l(N){if(N==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp",p=l(u);p!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",p,"instead."),u=p);let f=t.logarithmicDepthBuffer===!0,g=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_TEXTURE_SIZE),S=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),b=n.getParameter(n.MAX_VERTEX_ATTRIBS),M=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),T=n.getParameter(n.MAX_VARYING_VECTORS),I=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),O=x>0,U=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:f,reverseDepthBuffer:g,maxTextures:m,maxVertexTextures:x,maxTextureSize:y,maxCubemapSize:S,maxAttributes:b,maxVertexUniforms:M,maxVaryings:T,maxFragmentUniforms:I,vertexTextures:O,maxSamples:U}}function aq(n){let e=this,t=null,i=0,r=!1,a=!1,s=new Ks,o=new vi,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,g){let m=f.length!==0||g||i!==0||r;return r=g,i=f.length,m},this.beginShadows=function(){a=!0,p(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(f,g){t=p(f,g,0)},this.setState=function(f,g,m){let x=f.clippingPlanes,y=f.clipIntersection,S=f.clipShadows,b=n.get(f);if(!r||x===null||x.length===0||a&&!S)a?p(null):u();else{let M=a?0:i,T=M*4,I=b.clippingState||null;l.value=I,I=p(x,g,T,m);for(let O=0;O!==T;++O)I[O]=t[O];b.clippingState=I,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=M}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function p(f,g,m,x){let y=f!==null?f.length:0,S=null;if(y!==0){if(S=l.value,x!==!0||S===null){let b=m+y*4,M=g.matrixWorldInverse;o.getNormalMatrix(M),(S===null||S.length<b)&&(S=new Float32Array(b));for(let T=0,I=m;T!==y;++T,I+=4)s.copy(f[T]).applyMatrix4(M,o),s.normal.toArray(S,I),S[I+3]=s.constant}l.value=S,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,S}}function sq(n){let e=new WeakMap;function t(s,o){return o===P_?s.mapping=Yc:o===L_&&(s.mapping=$c),s}function i(s){if(s&&s.isTexture){let o=s.mapping;if(o===P_||o===L_)if(e.has(s)){let l=e.get(s).texture;return t(l,s.mapping)}else{let l=s.image;if(l&&l.height>0){let u=new u_(l.height);return u.fromEquirectangularTexture(n,s),e.set(s,u),s.addEventListener("dispose",r),t(u.texture,s.mapping)}else return null}}return s}function r(s){let o=s.target;o.removeEventListener("dispose",r);let l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}var Hu=4,yT=[.125,.215,.35,.446,.526,.582],id=20,W2=new S_,ST=new Vi,j2=null,G2=0,q2=0,X2=!1,ed=(1+Math.sqrt(5))/2,zu=1/ed,wT=[new zt(-ed,zu,0),new zt(ed,zu,0),new zt(-zu,0,ed),new zt(zu,0,ed),new zt(0,ed,-zu),new zt(0,ed,zu),new zt(-1,1,-1),new zt(1,1,-1),new zt(-1,1,1),new zt(1,1,1)],g1=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){j2=this._renderer.getRenderTarget(),G2=this._renderer.getActiveCubeFace(),q2=this._renderer.getActiveMipmapLevel(),X2=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,i,r,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ET(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=MT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(j2,G2,q2),this._renderer.xr.enabled=X2,e.scissorTest=!1,f1(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Yc||e.mapping===$c?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),j2=this._renderer.getRenderTarget(),G2=this._renderer.getActiveCubeFace(),q2=this._renderer.getActiveMipmapLevel(),X2=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:ks,minFilter:ks,generateMipmaps:!1,type:Uu,format:as,colorSpace:Gc,depthBuffer:!1},r=CT(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=CT(e,t,i);let{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=oq(a)),this._blurMaterial=lq(a,e,t)}return r}_compileMaterial(e){let t=new Kr(this._lodPlanes[0],e);this._renderer.compile(t,W2)}_sceneToCubeUV(e,t,i,r){let o=new Lr(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],p=this._renderer,f=p.autoClear,g=p.toneMapping;p.getClearColor(ST),p.toneMapping=jo,p.autoClear=!1;let m=new qc({name:"PMREM.Background",side:oa,depthWrite:!1,depthTest:!1}),x=new Kr(new Yl,m),y=!1,S=e.background;S?S.isColor&&(m.color.copy(S),e.background=null,y=!0):(m.color.copy(ST),y=!0);for(let b=0;b<6;b++){let M=b%3;M===0?(o.up.set(0,l[b],0),o.lookAt(u[b],0,0)):M===1?(o.up.set(0,0,l[b]),o.lookAt(0,u[b],0)):(o.up.set(0,l[b],0),o.lookAt(0,0,u[b]));let T=this._cubeSize;f1(r,M*T,b>2?T:0,T,T),p.setRenderTarget(r),y&&p.render(x,o),p.render(e,o)}x.geometry.dispose(),x.material.dispose(),p.toneMapping=g,p.autoClear=f,e.background=S}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===Yc||e.mapping===$c;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=ET()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=MT());let a=r?this._cubemapMaterial:this._equirectMaterial,s=new Kr(this._lodPlanes[0],a),o=a.uniforms;o.envMap.value=e;let l=this._cubeSize;f1(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(s,W2)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;let r=this._lodPlanes.length;for(let a=1;a<r;a++){let s=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),o=wT[(r-a-1)%wT.length];this._blur(e,a-1,a,s,o)}t.autoClear=i}_blur(e,t,i,r,a){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",a),this._halfBlur(s,e,i,i,r,"longitudinal",a)}_halfBlur(e,t,i,r,a,s,o){let l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let p=3,f=new Kr(this._lodPlanes[r],u),g=u.uniforms,m=this._sizeLods[i]-1,x=isFinite(a)?Math.PI/(2*m):2*Math.PI/(2*id-1),y=a/x,S=isFinite(a)?1+Math.floor(p*y):id;S>id&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${id}`);let b=[],M=0;for(let N=0;N<id;++N){let B=N/y,R=Math.exp(-B*B/2);b.push(R),N===0?M+=R:N<S&&(M+=2*R)}for(let N=0;N<b.length;N++)b[N]=b[N]/M;g.envMap.value=e.texture,g.samples.value=S,g.weights.value=b,g.latitudinal.value=s==="latitudinal",o&&(g.poleAxis.value=o);let{_lodMax:T}=this;g.dTheta.value=x,g.mipInt.value=T-i;let I=this._sizeLods[r],O=3*I*(r>T-Hu?r-T+Hu:0),U=4*(this._cubeSize-I);f1(t,O,U,3*I,2*I),l.setRenderTarget(t),l.render(f,W2)}};function oq(n){let e=[],t=[],i=[],r=n,a=n-Hu+1+yT.length;for(let s=0;s<a;s++){let o=Math.pow(2,r);t.push(o);let l=1/o;s>n-Hu?l=yT[s-n+Hu-1]:s===0&&(l=0),i.push(l);let u=1/(o-2),p=-u,f=1+u,g=[p,p,f,p,f,f,p,p,f,f,p,f],m=6,x=6,y=3,S=2,b=1,M=new Float32Array(y*x*m),T=new Float32Array(S*x*m),I=new Float32Array(b*x*m);for(let U=0;U<m;U++){let N=U%3*2/3-1,B=U>2?0:-1,R=[N,B,0,N+2/3,B,0,N+2/3,B+1,0,N,B,0,N+2/3,B+1,0,N,B+1,0];M.set(R,y*x*U),T.set(g,S*x*U);let F=[U,U,U,U,U,U];I.set(F,b*x*U)}let O=new zo;O.setAttribute("position",new Fa(M,y)),O.setAttribute("uv",new Fa(T,S)),O.setAttribute("faceIndex",new Fa(I,b)),e.push(O),r>Hu&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function CT(n,e,t){let i=new Js(n,e,t);return i.texture.mapping=nf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function f1(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function lq(n,e,t){let i=new Float32Array(id),r=new zt(0,1,0);return new Is({name:"SphericalGaussianBlur",defines:{n:id,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:nS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Wo,depthTest:!1,depthWrite:!1})}function MT(){return new Is({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:nS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Wo,depthTest:!1,depthWrite:!1})}function ET(){return new Is({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:nS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Wo,depthTest:!1,depthWrite:!1})}function nS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function cq(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){let l=o.mapping,u=l===P_||l===L_,p=l===Yc||l===$c;if(u||p){let f=e.get(o),g=f!==void 0?f.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==g)return t===null&&(t=new g1(n)),f=u?t.fromEquirectangular(o,f):t.fromCubemap(o,f),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),f.texture;if(f!==void 0)return f.texture;{let m=o.image;return u&&m&&m.height>0||p&&m&&r(m)?(t===null&&(t=new g1(n)),f=u?t.fromEquirectangular(o):t.fromCubemap(o),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),o.addEventListener("dispose",a),f.texture):null}}}return o}function r(o){let l=0,u=6;for(let p=0;p<u;p++)o[p]!==void 0&&l++;return l===u}function a(o){let l=o.target;l.removeEventListener("dispose",a);let u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function dq(n){let e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){let r=t(i);return r===null&&Zc("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function uq(n,e,t,i){let r={},a=new WeakMap;function s(f){let g=f.target;g.index!==null&&e.remove(g.index);for(let x in g.attributes)e.remove(g.attributes[x]);g.removeEventListener("dispose",s),delete r[g.id];let m=a.get(g);m&&(e.remove(m),a.delete(g)),i.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,t.memory.geometries--}function o(f,g){return r[g.id]===!0||(g.addEventListener("dispose",s),r[g.id]=!0,t.memory.geometries++),g}function l(f){let g=f.attributes;for(let m in g)e.update(g[m],n.ARRAY_BUFFER)}function u(f){let g=[],m=f.index,x=f.attributes.position,y=0;if(m!==null){let M=m.array;y=m.version;for(let T=0,I=M.length;T<I;T+=3){let O=M[T+0],U=M[T+1],N=M[T+2];g.push(O,U,U,N,N,O)}}else if(x!==void 0){let M=x.array;y=x.version;for(let T=0,I=M.length/3-1;T<I;T+=3){let O=T+0,U=T+1,N=T+2;g.push(O,U,U,N,N,O)}}else return;let S=new(B2(g)?qp:Gp)(g,1);S.version=y;let b=a.get(f);b&&e.remove(b),a.set(f,S)}function p(f){let g=a.get(f);if(g){let m=f.index;m!==null&&g.version<m.version&&u(f)}else u(f);return a.get(f)}return{get:o,update:l,getWireframeAttribute:p}}function hq(n,e,t){let i;function r(g){i=g}let a,s;function o(g){a=g.type,s=g.bytesPerElement}function l(g,m){n.drawElements(i,m,a,g*s),t.update(m,i,1)}function u(g,m,x){x!==0&&(n.drawElementsInstanced(i,m,a,g*s,x),t.update(m,i,x))}function p(g,m,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,m,0,a,g,0,x);let S=0;for(let b=0;b<x;b++)S+=m[b];t.update(S,i,1)}function f(g,m,x,y){if(x===0)return;let S=e.get("WEBGL_multi_draw");if(S===null)for(let b=0;b<g.length;b++)u(g[b]/s,m[b],y[b]);else{S.multiDrawElementsInstancedWEBGL(i,m,0,a,g,0,y,0,x);let b=0;for(let M=0;M<x;M++)b+=m[M]*y[M];t.update(b,i,1)}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=u,this.renderMultiDraw=p,this.renderMultiDrawInstances=f}function pq(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,s,o){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=o*(a/3);break;case n.LINES:t.lines+=o*(a/2);break;case n.LINE_STRIP:t.lines+=o*(a-1);break;case n.LINE_LOOP:t.lines+=o*a;break;case n.POINTS:t.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function fq(n,e,t){let i=new WeakMap,r=new nn;function a(s,o,l){let u=s.morphTargetInfluences,p=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,f=p!==void 0?p.length:0,g=i.get(o);if(g===void 0||g.count!==f){let F=function(){B.dispose(),i.delete(o),o.removeEventListener("dispose",F)};var m=F;g!==void 0&&g.texture.dispose();let x=o.morphAttributes.position!==void 0,y=o.morphAttributes.normal!==void 0,S=o.morphAttributes.color!==void 0,b=o.morphAttributes.position||[],M=o.morphAttributes.normal||[],T=o.morphAttributes.color||[],I=0;x===!0&&(I=1),y===!0&&(I=2),S===!0&&(I=3);let O=o.attributes.position.count*I,U=1;O>e.maxTextureSize&&(U=Math.ceil(O/e.maxTextureSize),O=e.maxTextureSize);let N=new Float32Array(O*U*4*f),B=new Wp(N,O,U,f);B.type=io,B.needsUpdate=!0;let R=I*4;for(let P=0;P<f;P++){let V=b[P],$=M[P],K=T[P],ct=O*U*4*P;for(let ot=0;ot<V.count;ot++){let at=ot*R;x===!0&&(r.fromBufferAttribute(V,ot),N[ct+at+0]=r.x,N[ct+at+1]=r.y,N[ct+at+2]=r.z,N[ct+at+3]=0),y===!0&&(r.fromBufferAttribute($,ot),N[ct+at+4]=r.x,N[ct+at+5]=r.y,N[ct+at+6]=r.z,N[ct+at+7]=0),S===!0&&(r.fromBufferAttribute(K,ot),N[ct+at+8]=r.x,N[ct+at+9]=r.y,N[ct+at+10]=r.z,N[ct+at+11]=K.itemSize===4?r.w:1)}}g={count:f,texture:B,size:new Wi(O,U)},i.set(o,g),o.addEventListener("dispose",F)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let x=0;for(let S=0;S<u.length;S++)x+=u[S];let y=o.morphTargetsRelative?1:1-x;l.getUniforms().setValue(n,"morphTargetBaseInfluence",y),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}return{update:a}}function mq(n,e,t,i){let r=new WeakMap;function a(l){let u=i.render.frame,p=l.geometry,f=e.get(l,p);if(r.get(f)!==u&&(e.update(f),r.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){let g=l.skeleton;r.get(g)!==u&&(g.update(),r.set(g,u))}return f}function s(){r=new WeakMap}function o(l){let u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:a,dispose:s}}var GT=new Ql,AT=new Kp(1,1),qT=new Wp,XT=new l_,YT=new Yp,TT=[],kT=[],IT=new Float32Array(16),DT=new Float32Array(9),PT=new Float32Array(4);function ju(n,e,t){let i=n[0];if(i<=0||i>0)return n;let r=e*t,a=TT[r];if(a===void 0&&(a=new Float32Array(r),TT[r]=a),e!==0){i.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=t,n[s].toArray(a,o)}return a}function _r(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function vr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function v1(n,e){let t=kT[e];t===void 0&&(t=new Int32Array(e),kT[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function gq(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function _q(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(_r(t,e))return;n.uniform2fv(this.addr,e),vr(t,e)}}function vq(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(_r(t,e))return;n.uniform3fv(this.addr,e),vr(t,e)}}function xq(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(_r(t,e))return;n.uniform4fv(this.addr,e),vr(t,e)}}function bq(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(_r(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),vr(t,e)}else{if(_r(t,i))return;PT.set(i),n.uniformMatrix2fv(this.addr,!1,PT),vr(t,i)}}function yq(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(_r(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),vr(t,e)}else{if(_r(t,i))return;DT.set(i),n.uniformMatrix3fv(this.addr,!1,DT),vr(t,i)}}function Sq(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(_r(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),vr(t,e)}else{if(_r(t,i))return;IT.set(i),n.uniformMatrix4fv(this.addr,!1,IT),vr(t,i)}}function wq(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Cq(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(_r(t,e))return;n.uniform2iv(this.addr,e),vr(t,e)}}function Mq(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(_r(t,e))return;n.uniform3iv(this.addr,e),vr(t,e)}}function Eq(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(_r(t,e))return;n.uniform4iv(this.addr,e),vr(t,e)}}function Aq(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Tq(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(_r(t,e))return;n.uniform2uiv(this.addr,e),vr(t,e)}}function kq(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(_r(t,e))return;n.uniform3uiv(this.addr,e),vr(t,e)}}function Iq(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(_r(t,e))return;n.uniform4uiv(this.addr,e),vr(t,e)}}function Dq(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let a;this.type===n.SAMPLER_2D_SHADOW?(AT.compareFunction=N2,a=AT):a=GT,t.setTexture2D(e||a,r)}function Pq(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||XT,r)}function Lq(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||YT,r)}function Rq(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||qT,r)}function Oq(n){switch(n){case 5126:return gq;case 35664:return _q;case 35665:return vq;case 35666:return xq;case 35674:return bq;case 35675:return yq;case 35676:return Sq;case 5124:case 35670:return wq;case 35667:case 35671:return Cq;case 35668:case 35672:return Mq;case 35669:case 35673:return Eq;case 5125:return Aq;case 36294:return Tq;case 36295:return kq;case 36296:return Iq;case 35678:case 36198:case 36298:case 36306:case 35682:return Dq;case 35679:case 36299:case 36307:return Pq;case 35680:case 36300:case 36308:case 36293:return Lq;case 36289:case 36303:case 36311:case 36292:return Rq}}function Nq(n,e){n.uniform1fv(this.addr,e)}function Fq(n,e){let t=ju(e,this.size,2);n.uniform2fv(this.addr,t)}function Bq(n,e){let t=ju(e,this.size,3);n.uniform3fv(this.addr,t)}function Vq(n,e){let t=ju(e,this.size,4);n.uniform4fv(this.addr,t)}function Uq(n,e){let t=ju(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function zq(n,e){let t=ju(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Hq(n,e){let t=ju(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Wq(n,e){n.uniform1iv(this.addr,e)}function jq(n,e){n.uniform2iv(this.addr,e)}function Gq(n,e){n.uniform3iv(this.addr,e)}function qq(n,e){n.uniform4iv(this.addr,e)}function Xq(n,e){n.uniform1uiv(this.addr,e)}function Yq(n,e){n.uniform2uiv(this.addr,e)}function $q(n,e){n.uniform3uiv(this.addr,e)}function Kq(n,e){n.uniform4uiv(this.addr,e)}function Zq(n,e,t){let i=this.cache,r=e.length,a=v1(t,r);_r(i,a)||(n.uniform1iv(this.addr,a),vr(i,a));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||GT,a[s])}function Jq(n,e,t){let i=this.cache,r=e.length,a=v1(t,r);_r(i,a)||(n.uniform1iv(this.addr,a),vr(i,a));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||XT,a[s])}function Qq(n,e,t){let i=this.cache,r=e.length,a=v1(t,r);_r(i,a)||(n.uniform1iv(this.addr,a),vr(i,a));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||YT,a[s])}function tX(n,e,t){let i=this.cache,r=e.length,a=v1(t,r);_r(i,a)||(n.uniform1iv(this.addr,a),vr(i,a));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||qT,a[s])}function eX(n){switch(n){case 5126:return Nq;case 35664:return Fq;case 35665:return Bq;case 35666:return Vq;case 35674:return Uq;case 35675:return zq;case 35676:return Hq;case 5124:case 35670:return Wq;case 35667:case 35671:return jq;case 35668:case 35672:return Gq;case 35669:case 35673:return qq;case 5125:return Xq;case 36294:return Yq;case 36295:return $q;case 36296:return Kq;case 35678:case 36198:case 36298:case 36306:case 35682:return Zq;case 35679:case 36299:case 36307:return Jq;case 35680:case 36300:case 36308:case 36293:return Qq;case 36289:case 36303:case 36311:case 36292:return tX}}var $2=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=Oq(t.type)}},K2=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=eX(t.type)}},Z2=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let a=0,s=r.length;a!==s;++a){let o=r[a];o.setValue(e,t[o.id],i)}}},Y2=/(\w+)(\])?(\[|\.)?/g;function LT(n,e){n.seq.push(e),n.map[e.id]=e}function iX(n,e,t){let i=n.name,r=i.length;for(Y2.lastIndex=0;;){let a=Y2.exec(i),s=Y2.lastIndex,o=a[1],l=a[2]==="]",u=a[3];if(l&&(o=o|0),u===void 0||u==="["&&s+2===r){LT(t,u===void 0?new $2(o,n,e):new K2(o,n,e));break}else{let f=t.map[o];f===void 0&&(f=new Z2(o),LT(t,f)),t=f}}}var Wu=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let a=e.getActiveUniform(t,r),s=e.getUniformLocation(t,a.name);iX(a,s,this)}}setValue(e,t,i,r){let a=this.map[t];a!==void 0&&a.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let a=0,s=t.length;a!==s;++a){let o=t[a],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,a=e.length;r!==a;++r){let s=e[r];s.id in t&&i.push(s)}return i}};function RT(n,e,t){let i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}var nX=37297,rX=0;function aX(n,e){let t=n.split(`
`),i=[],r=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=r;s<a;s++){let o=s+1;i.push(`${o===e?">":" "} ${o}: ${t[s]}`)}return i.join(`
`)}var OT=new vi;function sX(n){zi._getMatrix(OT,zi.workingColorSpace,n);let e=`mat3( ${OT.elements.map(t=>t.toFixed(4))} )`;switch(zi.getTransfer(n)){case Vp:return[e,"LinearTransferOETF"];case rn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function NT(n,e,t){let i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";let a=/ERROR: 0:(\d+)/.exec(r);if(a){let s=parseInt(a[1]);return t.toUpperCase()+`

`+r+`

`+aX(n.getShaderSource(e),s)}else return r}function oX(n,e){let t=sX(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function lX(n,e){let t;switch(e){case Z5:t="Linear";break;case J5:t="Reinhard";break;case Q5:t="Cineon";break;case tT:t="ACESFilmic";break;case iT:t="AgX";break;case nT:t="Neutral";break;case eT:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var m1=new zt;function cX(){zi.getLuminanceCoefficients(m1);let n=m1.x.toFixed(4),e=m1.y.toFixed(4),t=m1.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function dX(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(uf).join(`
`)}function uX(n){let e=[];for(let t in n){let i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function hX(n,e){let t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let a=n.getActiveAttrib(e,r),s=a.name,o=1;a.type===n.FLOAT_MAT2&&(o=2),a.type===n.FLOAT_MAT3&&(o=3),a.type===n.FLOAT_MAT4&&(o=4),t[s]={type:a.type,location:n.getAttribLocation(e,s),locationSize:o}}return t}function uf(n){return n!==""}function FT(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function BT(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var pX=/^[ \t]*#include +<([\w\d./]+)>/gm;function J2(n){return n.replace(pX,mX)}var fX=new Map;function mX(n,e){let t=Si[e];if(t===void 0){let i=fX.get(e);if(i!==void 0)t=Si[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return J2(t)}var gX=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function VT(n){return n.replace(gX,_X)}function _X(n,e,t,i){let r="";for(let a=parseInt(e);a<parseInt(t);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function UT(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function vX(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===b2?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===I5?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Qs&&(e="SHADOWMAP_TYPE_VSM"),e}function xX(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Yc:case $c:e="ENVMAP_TYPE_CUBE";break;case nf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function bX(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case $c:e="ENVMAP_MODE_REFRACTION";break}return e}function yX(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case C2:e="ENVMAP_BLENDING_MULTIPLY";break;case $5:e="ENVMAP_BLENDING_MIX";break;case K5:e="ENVMAP_BLENDING_ADD";break}return e}function SX(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function wX(n,e,t,i){let r=n.getContext(),a=t.defines,s=t.vertexShader,o=t.fragmentShader,l=vX(t),u=xX(t),p=bX(t),f=yX(t),g=SX(t),m=dX(t),x=uX(a),y=r.createProgram(),S,b,M=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(uf).join(`
`),S.length>0&&(S+=`
`),b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(uf).join(`
`),b.length>0&&(b+=`
`)):(S=[UT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(uf).join(`
`),b=[UT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+p:"",t.envMap?"#define "+f:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==jo?"#define TONE_MAPPING":"",t.toneMapping!==jo?Si.tonemapping_pars_fragment:"",t.toneMapping!==jo?lX("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Si.colorspace_pars_fragment,oX("linearToOutputTexel",t.outputColorSpace),cX(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(uf).join(`
`)),s=J2(s),s=FT(s,t),s=BT(s,t),o=J2(o),o=FT(o,t),o=BT(o,t),s=VT(s),o=VT(o),t.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,S=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,b=["#define varying in",t.glslVersion===F2?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===F2?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);let T=M+S+s,I=M+b+o,O=RT(r,r.VERTEX_SHADER,T),U=RT(r,r.FRAGMENT_SHADER,I);r.attachShader(y,O),r.attachShader(y,U),t.index0AttributeName!==void 0?r.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y);function N(P){if(n.debug.checkShaderErrors){let V=r.getProgramInfoLog(y).trim(),$=r.getShaderInfoLog(O).trim(),K=r.getShaderInfoLog(U).trim(),ct=!0,ot=!0;if(r.getProgramParameter(y,r.LINK_STATUS)===!1)if(ct=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,y,O,U);else{let at=NT(r,O,"vertex"),Q=NT(r,U,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,r.VALIDATE_STATUS)+`

Material Name: `+P.name+`
Material Type: `+P.type+`

Program Info Log: `+V+`
`+at+`
`+Q)}else V!==""?console.warn("THREE.WebGLProgram: Program Info Log:",V):($===""||K==="")&&(ot=!1);ot&&(P.diagnostics={runnable:ct,programLog:V,vertexShader:{log:$,prefix:S},fragmentShader:{log:K,prefix:b}})}r.deleteShader(O),r.deleteShader(U),B=new Wu(r,y),R=hX(r,y)}let B;this.getUniforms=function(){return B===void 0&&N(this),B};let R;this.getAttributes=function(){return R===void 0&&N(this),R};let F=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return F===!1&&(F=r.getProgramParameter(y,nX)),F},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=rX++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=O,this.fragmentShader=U,this}var CX=0,Q2=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),a=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new tS(e),t.set(e,i)),i}},tS=class{constructor(e){this.id=CX++,this.code=e,this.usedTimes=0}};function MX(n,e,t,i,r,a,s){let o=new jp,l=new Q2,u=new Set,p=[],f=r.logarithmicDepthBuffer,g=r.vertexTextures,m=r.precision,x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(R){return u.add(R),R===0?"uv":`uv${R}`}function S(R,F,P,V,$){let K=V.fog,ct=$.geometry,ot=R.isMeshStandardMaterial?V.environment:null,at=(R.isMeshStandardMaterial?t:e).get(R.envMap||ot),Q=at&&at.mapping===nf?at.image.height:null,xt=x[R.type];R.precision!==null&&(m=r.getMaxPrecision(R.precision),m!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",m,"instead."));let Mt=ct.morphAttributes.position||ct.morphAttributes.normal||ct.morphAttributes.color,qt=Mt!==void 0?Mt.length:0,z=0;ct.morphAttributes.position!==void 0&&(z=1),ct.morphAttributes.normal!==void 0&&(z=2),ct.morphAttributes.color!==void 0&&(z=3);let nt,Z,st,pt;if(xt){let bi=no[xt];nt=bi.vertexShader,Z=bi.fragmentShader}else nt=R.vertexShader,Z=R.fragmentShader,l.update(R),st=l.getVertexShaderID(R),pt=l.getFragmentShaderID(R);let ft=n.getRenderTarget(),St=n.state.buffers.depth.getReversed(),kt=$.isInstancedMesh===!0,Qt=$.isBatchedMesh===!0,ie=!!R.map,ue=!!R.matcap,_e=!!at,mt=!!R.aoMap,Yt=!!R.lightMap,ut=!!R.bumpMap,Ae=!!R.normalMap,se=!!R.displacementMap,ee=!!R.emissiveMap,Zt=!!R.metalnessMap,tt=!!R.roughnessMap,H=R.anisotropy>0,yt=R.clearcoat>0,Ht=R.dispersion>0,Xt=R.iridescence>0,Wt=R.sheen>0,Se=R.transmission>0,ge=H&&!!R.anisotropyMap,ce=yt&&!!R.clearcoatMap,Pe=yt&&!!R.clearcoatNormalMap,Ut=yt&&!!R.clearcoatRoughnessMap,Ce=Xt&&!!R.iridescenceMap,we=Xt&&!!R.iridescenceThicknessMap,je=Wt&&!!R.sheenColorMap,ye=Wt&&!!R.sheenRoughnessMap,He=!!R.specularMap,Ze=!!R.specularColorMap,Ge=!!R.specularIntensityMap,It=Se&&!!R.transmissionMap,ve=Se&&!!R.thicknessMap,$t=!!R.gradientMap,ne=!!R.alphaMap,be=R.alphaTest>0,ae=!!R.alphaHash,De=!!R.extensions,Xi=jo;R.toneMapped&&(ft===null||ft.isXRRenderTarget===!0)&&(Xi=n.toneMapping);let Ni={shaderID:xt,shaderType:R.type,shaderName:R.name,vertexShader:nt,fragmentShader:Z,defines:R.defines,customVertexShaderID:st,customFragmentShaderID:pt,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:m,batching:Qt,batchingColor:Qt&&$._colorsTexture!==null,instancing:kt,instancingColor:kt&&$.instanceColor!==null,instancingMorph:kt&&$.morphTexture!==null,supportsVertexTextures:g,outputColorSpace:ft===null?n.outputColorSpace:ft.isXRRenderTarget===!0?ft.texture.colorSpace:Gc,alphaToCoverage:!!R.alphaToCoverage,map:ie,matcap:ue,envMap:_e,envMapMode:_e&&at.mapping,envMapCubeUVHeight:Q,aoMap:mt,lightMap:Yt,bumpMap:ut,normalMap:Ae,displacementMap:g&&se,emissiveMap:ee,normalMapObjectSpace:Ae&&R.normalMapType===oT,normalMapTangentSpace:Ae&&R.normalMapType===O2,metalnessMap:Zt,roughnessMap:tt,anisotropy:H,anisotropyMap:ge,clearcoat:yt,clearcoatMap:ce,clearcoatNormalMap:Pe,clearcoatRoughnessMap:Ut,dispersion:Ht,iridescence:Xt,iridescenceMap:Ce,iridescenceThicknessMap:we,sheen:Wt,sheenColorMap:je,sheenRoughnessMap:ye,specularMap:He,specularColorMap:Ze,specularIntensityMap:Ge,transmission:Se,transmissionMap:It,thicknessMap:ve,gradientMap:$t,opaque:R.transparent===!1&&R.blending===Hc&&R.alphaToCoverage===!1,alphaMap:ne,alphaTest:be,alphaHash:ae,combine:R.combine,mapUv:ie&&y(R.map.channel),aoMapUv:mt&&y(R.aoMap.channel),lightMapUv:Yt&&y(R.lightMap.channel),bumpMapUv:ut&&y(R.bumpMap.channel),normalMapUv:Ae&&y(R.normalMap.channel),displacementMapUv:se&&y(R.displacementMap.channel),emissiveMapUv:ee&&y(R.emissiveMap.channel),metalnessMapUv:Zt&&y(R.metalnessMap.channel),roughnessMapUv:tt&&y(R.roughnessMap.channel),anisotropyMapUv:ge&&y(R.anisotropyMap.channel),clearcoatMapUv:ce&&y(R.clearcoatMap.channel),clearcoatNormalMapUv:Pe&&y(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ut&&y(R.clearcoatRoughnessMap.channel),iridescenceMapUv:Ce&&y(R.iridescenceMap.channel),iridescenceThicknessMapUv:we&&y(R.iridescenceThicknessMap.channel),sheenColorMapUv:je&&y(R.sheenColorMap.channel),sheenRoughnessMapUv:ye&&y(R.sheenRoughnessMap.channel),specularMapUv:He&&y(R.specularMap.channel),specularColorMapUv:Ze&&y(R.specularColorMap.channel),specularIntensityMapUv:Ge&&y(R.specularIntensityMap.channel),transmissionMapUv:It&&y(R.transmissionMap.channel),thicknessMapUv:ve&&y(R.thicknessMap.channel),alphaMapUv:ne&&y(R.alphaMap.channel),vertexTangents:!!ct.attributes.tangent&&(Ae||H),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!ct.attributes.color&&ct.attributes.color.itemSize===4,pointsUvs:$.isPoints===!0&&!!ct.attributes.uv&&(ie||ne),fog:!!K,useFog:R.fog===!0,fogExp2:!!K&&K.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:St,skinning:$.isSkinnedMesh===!0,morphTargets:ct.morphAttributes.position!==void 0,morphNormals:ct.morphAttributes.normal!==void 0,morphColors:ct.morphAttributes.color!==void 0,morphTargetsCount:qt,morphTextureStride:z,numDirLights:F.directional.length,numPointLights:F.point.length,numSpotLights:F.spot.length,numSpotLightMaps:F.spotLightMap.length,numRectAreaLights:F.rectArea.length,numHemiLights:F.hemi.length,numDirLightShadows:F.directionalShadowMap.length,numPointLightShadows:F.pointShadowMap.length,numSpotLightShadows:F.spotShadowMap.length,numSpotLightShadowsWithMaps:F.numSpotLightShadowsWithMaps,numLightProbes:F.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&P.length>0,shadowMapType:n.shadowMap.type,toneMapping:Xi,decodeVideoTexture:ie&&R.map.isVideoTexture===!0&&zi.getTransfer(R.map.colorSpace)===rn,decodeVideoTextureEmissive:ee&&R.emissiveMap.isVideoTexture===!0&&zi.getTransfer(R.emissiveMap.colorSpace)===rn,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===to,flipSided:R.side===oa,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionClipCullDistance:De&&R.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(De&&R.extensions.multiDraw===!0||Qt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()};return Ni.vertexUv1s=u.has(1),Ni.vertexUv2s=u.has(2),Ni.vertexUv3s=u.has(3),u.clear(),Ni}function b(R){let F=[];if(R.shaderID?F.push(R.shaderID):(F.push(R.customVertexShaderID),F.push(R.customFragmentShaderID)),R.defines!==void 0)for(let P in R.defines)F.push(P),F.push(R.defines[P]);return R.isRawShaderMaterial===!1&&(M(F,R),T(F,R),F.push(n.outputColorSpace)),F.push(R.customProgramCacheKey),F.join()}function M(R,F){R.push(F.precision),R.push(F.outputColorSpace),R.push(F.envMapMode),R.push(F.envMapCubeUVHeight),R.push(F.mapUv),R.push(F.alphaMapUv),R.push(F.lightMapUv),R.push(F.aoMapUv),R.push(F.bumpMapUv),R.push(F.normalMapUv),R.push(F.displacementMapUv),R.push(F.emissiveMapUv),R.push(F.metalnessMapUv),R.push(F.roughnessMapUv),R.push(F.anisotropyMapUv),R.push(F.clearcoatMapUv),R.push(F.clearcoatNormalMapUv),R.push(F.clearcoatRoughnessMapUv),R.push(F.iridescenceMapUv),R.push(F.iridescenceThicknessMapUv),R.push(F.sheenColorMapUv),R.push(F.sheenRoughnessMapUv),R.push(F.specularMapUv),R.push(F.specularColorMapUv),R.push(F.specularIntensityMapUv),R.push(F.transmissionMapUv),R.push(F.thicknessMapUv),R.push(F.combine),R.push(F.fogExp2),R.push(F.sizeAttenuation),R.push(F.morphTargetsCount),R.push(F.morphAttributeCount),R.push(F.numDirLights),R.push(F.numPointLights),R.push(F.numSpotLights),R.push(F.numSpotLightMaps),R.push(F.numHemiLights),R.push(F.numRectAreaLights),R.push(F.numDirLightShadows),R.push(F.numPointLightShadows),R.push(F.numSpotLightShadows),R.push(F.numSpotLightShadowsWithMaps),R.push(F.numLightProbes),R.push(F.shadowMapType),R.push(F.toneMapping),R.push(F.numClippingPlanes),R.push(F.numClipIntersection),R.push(F.depthPacking)}function T(R,F){o.disableAll(),F.supportsVertexTextures&&o.enable(0),F.instancing&&o.enable(1),F.instancingColor&&o.enable(2),F.instancingMorph&&o.enable(3),F.matcap&&o.enable(4),F.envMap&&o.enable(5),F.normalMapObjectSpace&&o.enable(6),F.normalMapTangentSpace&&o.enable(7),F.clearcoat&&o.enable(8),F.iridescence&&o.enable(9),F.alphaTest&&o.enable(10),F.vertexColors&&o.enable(11),F.vertexAlphas&&o.enable(12),F.vertexUv1s&&o.enable(13),F.vertexUv2s&&o.enable(14),F.vertexUv3s&&o.enable(15),F.vertexTangents&&o.enable(16),F.anisotropy&&o.enable(17),F.alphaHash&&o.enable(18),F.batching&&o.enable(19),F.dispersion&&o.enable(20),F.batchingColor&&o.enable(21),R.push(o.mask),o.disableAll(),F.fog&&o.enable(0),F.useFog&&o.enable(1),F.flatShading&&o.enable(2),F.logarithmicDepthBuffer&&o.enable(3),F.reverseDepthBuffer&&o.enable(4),F.skinning&&o.enable(5),F.morphTargets&&o.enable(6),F.morphNormals&&o.enable(7),F.morphColors&&o.enable(8),F.premultipliedAlpha&&o.enable(9),F.shadowMapEnabled&&o.enable(10),F.doubleSided&&o.enable(11),F.flipSided&&o.enable(12),F.useDepthPacking&&o.enable(13),F.dithering&&o.enable(14),F.transmission&&o.enable(15),F.sheen&&o.enable(16),F.opaque&&o.enable(17),F.pointsUvs&&o.enable(18),F.decodeVideoTexture&&o.enable(19),F.decodeVideoTextureEmissive&&o.enable(20),F.alphaToCoverage&&o.enable(21),R.push(o.mask)}function I(R){let F=x[R.type],P;if(F){let V=no[F];P=bT.clone(V.uniforms)}else P=R.uniforms;return P}function O(R,F){let P;for(let V=0,$=p.length;V<$;V++){let K=p[V];if(K.cacheKey===F){P=K,++P.usedTimes;break}}return P===void 0&&(P=new wX(n,F,R,a),p.push(P)),P}function U(R){if(--R.usedTimes===0){let F=p.indexOf(R);p[F]=p[p.length-1],p.pop(),R.destroy()}}function N(R){l.remove(R)}function B(){l.dispose()}return{getParameters:S,getProgramCacheKey:b,getUniforms:I,acquireProgram:O,releaseProgram:U,releaseShaderCache:N,programs:p,dispose:B}}function EX(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function i(s){n.delete(s)}function r(s,o,l){n.get(s)[o]=l}function a(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:a}}function AX(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function zT(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function HT(){let n=[],e=0,t=[],i=[],r=[];function a(){e=0,t.length=0,i.length=0,r.length=0}function s(f,g,m,x,y,S){let b=n[e];return b===void 0?(b={id:f.id,object:f,geometry:g,material:m,groupOrder:x,renderOrder:f.renderOrder,z:y,group:S},n[e]=b):(b.id=f.id,b.object=f,b.geometry=g,b.material=m,b.groupOrder=x,b.renderOrder=f.renderOrder,b.z=y,b.group=S),e++,b}function o(f,g,m,x,y,S){let b=s(f,g,m,x,y,S);m.transmission>0?i.push(b):m.transparent===!0?r.push(b):t.push(b)}function l(f,g,m,x,y,S){let b=s(f,g,m,x,y,S);m.transmission>0?i.unshift(b):m.transparent===!0?r.unshift(b):t.unshift(b)}function u(f,g){t.length>1&&t.sort(f||AX),i.length>1&&i.sort(g||zT),r.length>1&&r.sort(g||zT)}function p(){for(let f=e,g=n.length;f<g;f++){let m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:a,push:o,unshift:l,finish:p,sort:u}}function TX(){let n=new WeakMap;function e(i,r){let a=n.get(i),s;return a===void 0?(s=new HT,n.set(i,[s])):r>=a.length?(s=new HT,a.push(s)):s=a[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function kX(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new zt,color:new Vi};break;case"SpotLight":t={position:new zt,direction:new zt,color:new Vi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new zt,color:new Vi,distance:0,decay:0};break;case"HemisphereLight":t={direction:new zt,skyColor:new Vi,groundColor:new Vi};break;case"RectAreaLight":t={color:new Vi,position:new zt,halfWidth:new zt,halfHeight:new zt};break}return n[e.id]=t,t}}}function IX(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wi};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wi};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wi,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var DX=0;function PX(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function LX(n){let e=new kX,t=IX(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new zt);let r=new zt,a=new Bn,s=new Bn;function o(u){let p=0,f=0,g=0;for(let R=0;R<9;R++)i.probe[R].set(0,0,0);let m=0,x=0,y=0,S=0,b=0,M=0,T=0,I=0,O=0,U=0,N=0;u.sort(PX);for(let R=0,F=u.length;R<F;R++){let P=u[R],V=P.color,$=P.intensity,K=P.distance,ct=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)p+=V.r*$,f+=V.g*$,g+=V.b*$;else if(P.isLightProbe){for(let ot=0;ot<9;ot++)i.probe[ot].addScaledVector(P.sh.coefficients[ot],$);N++}else if(P.isDirectionalLight){let ot=e.get(P);if(ot.color.copy(P.color).multiplyScalar(P.intensity),P.castShadow){let at=P.shadow,Q=t.get(P);Q.shadowIntensity=at.intensity,Q.shadowBias=at.bias,Q.shadowNormalBias=at.normalBias,Q.shadowRadius=at.radius,Q.shadowMapSize=at.mapSize,i.directionalShadow[m]=Q,i.directionalShadowMap[m]=ct,i.directionalShadowMatrix[m]=P.shadow.matrix,M++}i.directional[m]=ot,m++}else if(P.isSpotLight){let ot=e.get(P);ot.position.setFromMatrixPosition(P.matrixWorld),ot.color.copy(V).multiplyScalar($),ot.distance=K,ot.coneCos=Math.cos(P.angle),ot.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),ot.decay=P.decay,i.spot[y]=ot;let at=P.shadow;if(P.map&&(i.spotLightMap[O]=P.map,O++,at.updateMatrices(P),P.castShadow&&U++),i.spotLightMatrix[y]=at.matrix,P.castShadow){let Q=t.get(P);Q.shadowIntensity=at.intensity,Q.shadowBias=at.bias,Q.shadowNormalBias=at.normalBias,Q.shadowRadius=at.radius,Q.shadowMapSize=at.mapSize,i.spotShadow[y]=Q,i.spotShadowMap[y]=ct,I++}y++}else if(P.isRectAreaLight){let ot=e.get(P);ot.color.copy(V).multiplyScalar($),ot.halfWidth.set(P.width*.5,0,0),ot.halfHeight.set(0,P.height*.5,0),i.rectArea[S]=ot,S++}else if(P.isPointLight){let ot=e.get(P);if(ot.color.copy(P.color).multiplyScalar(P.intensity),ot.distance=P.distance,ot.decay=P.decay,P.castShadow){let at=P.shadow,Q=t.get(P);Q.shadowIntensity=at.intensity,Q.shadowBias=at.bias,Q.shadowNormalBias=at.normalBias,Q.shadowRadius=at.radius,Q.shadowMapSize=at.mapSize,Q.shadowCameraNear=at.camera.near,Q.shadowCameraFar=at.camera.far,i.pointShadow[x]=Q,i.pointShadowMap[x]=ct,i.pointShadowMatrix[x]=P.shadow.matrix,T++}i.point[x]=ot,x++}else if(P.isHemisphereLight){let ot=e.get(P);ot.skyColor.copy(P.color).multiplyScalar($),ot.groundColor.copy(P.groundColor).multiplyScalar($),i.hemi[b]=ot,b++}}S>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ke.LTC_FLOAT_1,i.rectAreaLTC2=ke.LTC_FLOAT_2):(i.rectAreaLTC1=ke.LTC_HALF_1,i.rectAreaLTC2=ke.LTC_HALF_2)),i.ambient[0]=p,i.ambient[1]=f,i.ambient[2]=g;let B=i.hash;(B.directionalLength!==m||B.pointLength!==x||B.spotLength!==y||B.rectAreaLength!==S||B.hemiLength!==b||B.numDirectionalShadows!==M||B.numPointShadows!==T||B.numSpotShadows!==I||B.numSpotMaps!==O||B.numLightProbes!==N)&&(i.directional.length=m,i.spot.length=y,i.rectArea.length=S,i.point.length=x,i.hemi.length=b,i.directionalShadow.length=M,i.directionalShadowMap.length=M,i.pointShadow.length=T,i.pointShadowMap.length=T,i.spotShadow.length=I,i.spotShadowMap.length=I,i.directionalShadowMatrix.length=M,i.pointShadowMatrix.length=T,i.spotLightMatrix.length=I+O-U,i.spotLightMap.length=O,i.numSpotLightShadowsWithMaps=U,i.numLightProbes=N,B.directionalLength=m,B.pointLength=x,B.spotLength=y,B.rectAreaLength=S,B.hemiLength=b,B.numDirectionalShadows=M,B.numPointShadows=T,B.numSpotShadows=I,B.numSpotMaps=O,B.numLightProbes=N,i.version=DX++)}function l(u,p){let f=0,g=0,m=0,x=0,y=0,S=p.matrixWorldInverse;for(let b=0,M=u.length;b<M;b++){let T=u[b];if(T.isDirectionalLight){let I=i.directional[f];I.direction.setFromMatrixPosition(T.matrixWorld),r.setFromMatrixPosition(T.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(S),f++}else if(T.isSpotLight){let I=i.spot[m];I.position.setFromMatrixPosition(T.matrixWorld),I.position.applyMatrix4(S),I.direction.setFromMatrixPosition(T.matrixWorld),r.setFromMatrixPosition(T.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(S),m++}else if(T.isRectAreaLight){let I=i.rectArea[x];I.position.setFromMatrixPosition(T.matrixWorld),I.position.applyMatrix4(S),s.identity(),a.copy(T.matrixWorld),a.premultiply(S),s.extractRotation(a),I.halfWidth.set(T.width*.5,0,0),I.halfHeight.set(0,T.height*.5,0),I.halfWidth.applyMatrix4(s),I.halfHeight.applyMatrix4(s),x++}else if(T.isPointLight){let I=i.point[g];I.position.setFromMatrixPosition(T.matrixWorld),I.position.applyMatrix4(S),g++}else if(T.isHemisphereLight){let I=i.hemi[y];I.direction.setFromMatrixPosition(T.matrixWorld),I.direction.transformDirection(S),y++}}}return{setup:o,setupView:l,state:i}}function WT(n){let e=new LX(n),t=[],i=[];function r(p){u.camera=p,t.length=0,i.length=0}function a(p){t.push(p)}function s(p){i.push(p)}function o(){e.setup(t)}function l(p){e.setupView(t,p)}let u={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:o,setupLightsView:l,pushLight:a,pushShadow:s}}function RX(n){let e=new WeakMap;function t(r,a=0){let s=e.get(r),o;return s===void 0?(o=new WT(n),e.set(r,[o])):a>=s.length?(o=new WT(n),s.push(o)):o=s[a],o}function i(){e=new WeakMap}return{get:t,dispose:i}}var OX=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,NX=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function FX(n,e,t){let i=new Bu,r=new Wi,a=new Wi,s=new nn,o=new h_({depthPacking:sT}),l=new p_,u={},p=t.maxTextureSize,f={[Bo]:oa,[oa]:Bo,[to]:to},g=new Is({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Wi},radius:{value:4}},vertexShader:OX,fragmentShader:NX}),m=g.clone();m.defines.HORIZONTAL_PASS=1;let x=new zo;x.setAttribute("position",new Fa(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let y=new Kr(x,g),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=b2;let b=this.type;this.render=function(U,N,B){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||U.length===0)return;let R=n.getRenderTarget(),F=n.getActiveCubeFace(),P=n.getActiveMipmapLevel(),V=n.state;V.setBlending(Wo),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);let $=b!==Qs&&this.type===Qs,K=b===Qs&&this.type!==Qs;for(let ct=0,ot=U.length;ct<ot;ct++){let at=U[ct],Q=at.shadow;if(Q===void 0){console.warn("THREE.WebGLShadowMap:",at,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;r.copy(Q.mapSize);let xt=Q.getFrameExtents();if(r.multiply(xt),a.copy(Q.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(a.x=Math.floor(p/xt.x),r.x=a.x*xt.x,Q.mapSize.x=a.x),r.y>p&&(a.y=Math.floor(p/xt.y),r.y=a.y*xt.y,Q.mapSize.y=a.y)),Q.map===null||$===!0||K===!0){let qt=this.type!==Qs?{minFilter:ns,magFilter:ns}:{};Q.map!==null&&Q.map.dispose(),Q.map=new Js(r.x,r.y,qt),Q.map.texture.name=at.name+".shadowMap",Q.camera.updateProjectionMatrix()}n.setRenderTarget(Q.map),n.clear();let Mt=Q.getViewportCount();for(let qt=0;qt<Mt;qt++){let z=Q.getViewport(qt);s.set(a.x*z.x,a.y*z.y,a.x*z.z,a.y*z.w),V.viewport(s),Q.updateMatrices(at,qt),i=Q.getFrustum(),I(N,B,Q.camera,at,this.type)}Q.isPointLightShadow!==!0&&this.type===Qs&&M(Q,B),Q.needsUpdate=!1}b=this.type,S.needsUpdate=!1,n.setRenderTarget(R,F,P)};function M(U,N){let B=e.update(y);g.defines.VSM_SAMPLES!==U.blurSamples&&(g.defines.VSM_SAMPLES=U.blurSamples,m.defines.VSM_SAMPLES=U.blurSamples,g.needsUpdate=!0,m.needsUpdate=!0),U.mapPass===null&&(U.mapPass=new Js(r.x,r.y)),g.uniforms.shadow_pass.value=U.map.texture,g.uniforms.resolution.value=U.mapSize,g.uniforms.radius.value=U.radius,n.setRenderTarget(U.mapPass),n.clear(),n.renderBufferDirect(N,null,B,g,y,null),m.uniforms.shadow_pass.value=U.mapPass.texture,m.uniforms.resolution.value=U.mapSize,m.uniforms.radius.value=U.radius,n.setRenderTarget(U.map),n.clear(),n.renderBufferDirect(N,null,B,m,y,null)}function T(U,N,B,R){let F=null,P=B.isPointLight===!0?U.customDistanceMaterial:U.customDepthMaterial;if(P!==void 0)F=P;else if(F=B.isPointLight===!0?l:o,n.localClippingEnabled&&N.clipShadows===!0&&Array.isArray(N.clippingPlanes)&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0||N.map&&N.alphaTest>0){let V=F.uuid,$=N.uuid,K=u[V];K===void 0&&(K={},u[V]=K);let ct=K[$];ct===void 0&&(ct=F.clone(),K[$]=ct,N.addEventListener("dispose",O)),F=ct}if(F.visible=N.visible,F.wireframe=N.wireframe,R===Qs?F.side=N.shadowSide!==null?N.shadowSide:N.side:F.side=N.shadowSide!==null?N.shadowSide:f[N.side],F.alphaMap=N.alphaMap,F.alphaTest=N.alphaTest,F.map=N.map,F.clipShadows=N.clipShadows,F.clippingPlanes=N.clippingPlanes,F.clipIntersection=N.clipIntersection,F.displacementMap=N.displacementMap,F.displacementScale=N.displacementScale,F.displacementBias=N.displacementBias,F.wireframeLinewidth=N.wireframeLinewidth,F.linewidth=N.linewidth,B.isPointLight===!0&&F.isMeshDistanceMaterial===!0){let V=n.properties.get(F);V.light=B}return F}function I(U,N,B,R,F){if(U.visible===!1)return;if(U.layers.test(N.layers)&&(U.isMesh||U.isLine||U.isPoints)&&(U.castShadow||U.receiveShadow&&F===Qs)&&(!U.frustumCulled||i.intersectsObject(U))){U.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,U.matrixWorld);let $=e.update(U),K=U.material;if(Array.isArray(K)){let ct=$.groups;for(let ot=0,at=ct.length;ot<at;ot++){let Q=ct[ot],xt=K[Q.materialIndex];if(xt&&xt.visible){let Mt=T(U,xt,R,F);U.onBeforeShadow(n,U,N,B,$,Mt,Q),n.renderBufferDirect(B,null,$,Mt,U,Q),U.onAfterShadow(n,U,N,B,$,Mt,Q)}}}else if(K.visible){let ct=T(U,K,R,F);U.onBeforeShadow(n,U,N,B,$,ct,null),n.renderBufferDirect(B,null,$,ct,U,null),U.onAfterShadow(n,U,N,B,$,ct,null)}}let V=U.children;for(let $=0,K=V.length;$<K;$++)I(V[$],N,B,R,F)}function O(U){U.target.removeEventListener("dispose",O);for(let B in u){let R=u[B],F=U.target.uuid;F in R&&(R[F].dispose(),delete R[F])}}}var BX={[M_]:E_,[A_]:I_,[T_]:D_,[Wc]:k_,[E_]:M_,[I_]:A_,[D_]:T_,[k_]:Wc};function VX(n,e){function t(){let It=!1,ve=new nn,$t=null,ne=new nn(0,0,0,0);return{setMask:function(be){$t!==be&&!It&&(n.colorMask(be,be,be,be),$t=be)},setLocked:function(be){It=be},setClear:function(be,ae,De,Xi,Ni){Ni===!0&&(be*=Xi,ae*=Xi,De*=Xi),ve.set(be,ae,De,Xi),ne.equals(ve)===!1&&(n.clearColor(be,ae,De,Xi),ne.copy(ve))},reset:function(){It=!1,$t=null,ne.set(-1,0,0,0)}}}function i(){let It=!1,ve=!1,$t=null,ne=null,be=null;return{setReversed:function(ae){if(ve!==ae){let De=e.get("EXT_clip_control");ve?De.clipControlEXT(De.LOWER_LEFT_EXT,De.ZERO_TO_ONE_EXT):De.clipControlEXT(De.LOWER_LEFT_EXT,De.NEGATIVE_ONE_TO_ONE_EXT);let Xi=be;be=null,this.setClear(Xi)}ve=ae},getReversed:function(){return ve},setTest:function(ae){ae?ft(n.DEPTH_TEST):St(n.DEPTH_TEST)},setMask:function(ae){$t!==ae&&!It&&(n.depthMask(ae),$t=ae)},setFunc:function(ae){if(ve&&(ae=BX[ae]),ne!==ae){switch(ae){case M_:n.depthFunc(n.NEVER);break;case E_:n.depthFunc(n.ALWAYS);break;case A_:n.depthFunc(n.LESS);break;case Wc:n.depthFunc(n.LEQUAL);break;case T_:n.depthFunc(n.EQUAL);break;case k_:n.depthFunc(n.GEQUAL);break;case I_:n.depthFunc(n.GREATER);break;case D_:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ne=ae}},setLocked:function(ae){It=ae},setClear:function(ae){be!==ae&&(ve&&(ae=1-ae),n.clearDepth(ae),be=ae)},reset:function(){It=!1,$t=null,ne=null,be=null,ve=!1}}}function r(){let It=!1,ve=null,$t=null,ne=null,be=null,ae=null,De=null,Xi=null,Ni=null;return{setTest:function(bi){It||(bi?ft(n.STENCIL_TEST):St(n.STENCIL_TEST))},setMask:function(bi){ve!==bi&&!It&&(n.stencilMask(bi),ve=bi)},setFunc:function(bi,Vn,ze){($t!==bi||ne!==Vn||be!==ze)&&(n.stencilFunc(bi,Vn,ze),$t=bi,ne=Vn,be=ze)},setOp:function(bi,Vn,ze){(ae!==bi||De!==Vn||Xi!==ze)&&(n.stencilOp(bi,Vn,ze),ae=bi,De=Vn,Xi=ze)},setLocked:function(bi){It=bi},setClear:function(bi){Ni!==bi&&(n.clearStencil(bi),Ni=bi)},reset:function(){It=!1,ve=null,$t=null,ne=null,be=null,ae=null,De=null,Xi=null,Ni=null}}}let a=new t,s=new i,o=new r,l=new WeakMap,u=new WeakMap,p={},f={},g=new WeakMap,m=[],x=null,y=!1,S=null,b=null,M=null,T=null,I=null,O=null,U=null,N=new Vi(0,0,0),B=0,R=!1,F=null,P=null,V=null,$=null,K=null,ct=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ot=!1,at=0,Q=n.getParameter(n.VERSION);Q.indexOf("WebGL")!==-1?(at=parseFloat(/^WebGL (\d)/.exec(Q)[1]),ot=at>=1):Q.indexOf("OpenGL ES")!==-1&&(at=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),ot=at>=2);let xt=null,Mt={},qt=n.getParameter(n.SCISSOR_BOX),z=n.getParameter(n.VIEWPORT),nt=new nn().fromArray(qt),Z=new nn().fromArray(z);function st(It,ve,$t,ne){let be=new Uint8Array(4),ae=n.createTexture();n.bindTexture(It,ae),n.texParameteri(It,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(It,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let De=0;De<$t;De++)It===n.TEXTURE_3D||It===n.TEXTURE_2D_ARRAY?n.texImage3D(ve,0,n.RGBA,1,1,ne,0,n.RGBA,n.UNSIGNED_BYTE,be):n.texImage2D(ve+De,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,be);return ae}let pt={};pt[n.TEXTURE_2D]=st(n.TEXTURE_2D,n.TEXTURE_2D,1),pt[n.TEXTURE_CUBE_MAP]=st(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),pt[n.TEXTURE_2D_ARRAY]=st(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),pt[n.TEXTURE_3D]=st(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),ft(n.DEPTH_TEST),s.setFunc(Wc),ut(!1),Ae(x2),ft(n.CULL_FACE),mt(Wo);function ft(It){p[It]!==!0&&(n.enable(It),p[It]=!0)}function St(It){p[It]!==!1&&(n.disable(It),p[It]=!1)}function kt(It,ve){return f[It]!==ve?(n.bindFramebuffer(It,ve),f[It]=ve,It===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=ve),It===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=ve),!0):!1}function Qt(It,ve){let $t=m,ne=!1;if(It){$t=g.get(ve),$t===void 0&&($t=[],g.set(ve,$t));let be=It.textures;if($t.length!==be.length||$t[0]!==n.COLOR_ATTACHMENT0){for(let ae=0,De=be.length;ae<De;ae++)$t[ae]=n.COLOR_ATTACHMENT0+ae;$t.length=be.length,ne=!0}}else $t[0]!==n.BACK&&($t[0]=n.BACK,ne=!0);ne&&n.drawBuffers($t)}function ie(It){return x!==It?(n.useProgram(It),x=It,!0):!1}let ue={[jl]:n.FUNC_ADD,[P5]:n.FUNC_SUBTRACT,[L5]:n.FUNC_REVERSE_SUBTRACT};ue[R5]=n.MIN,ue[O5]=n.MAX;let _e={[N5]:n.ZERO,[F5]:n.ONE,[B5]:n.SRC_COLOR,[t_]:n.SRC_ALPHA,[j5]:n.SRC_ALPHA_SATURATE,[H5]:n.DST_COLOR,[U5]:n.DST_ALPHA,[V5]:n.ONE_MINUS_SRC_COLOR,[e_]:n.ONE_MINUS_SRC_ALPHA,[W5]:n.ONE_MINUS_DST_COLOR,[z5]:n.ONE_MINUS_DST_ALPHA,[G5]:n.CONSTANT_COLOR,[q5]:n.ONE_MINUS_CONSTANT_COLOR,[X5]:n.CONSTANT_ALPHA,[Y5]:n.ONE_MINUS_CONSTANT_ALPHA};function mt(It,ve,$t,ne,be,ae,De,Xi,Ni,bi){if(It===Wo){y===!0&&(St(n.BLEND),y=!1);return}if(y===!1&&(ft(n.BLEND),y=!0),It!==D5){if(It!==S||bi!==R){if((b!==jl||I!==jl)&&(n.blendEquation(n.FUNC_ADD),b=jl,I=jl),bi)switch(It){case Hc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case y2:n.blendFunc(n.ONE,n.ONE);break;case S2:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case w2:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",It);break}else switch(It){case Hc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case y2:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case S2:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case w2:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",It);break}M=null,T=null,O=null,U=null,N.set(0,0,0),B=0,S=It,R=bi}return}be=be||ve,ae=ae||$t,De=De||ne,(ve!==b||be!==I)&&(n.blendEquationSeparate(ue[ve],ue[be]),b=ve,I=be),($t!==M||ne!==T||ae!==O||De!==U)&&(n.blendFuncSeparate(_e[$t],_e[ne],_e[ae],_e[De]),M=$t,T=ne,O=ae,U=De),(Xi.equals(N)===!1||Ni!==B)&&(n.blendColor(Xi.r,Xi.g,Xi.b,Ni),N.copy(Xi),B=Ni),S=It,R=!1}function Yt(It,ve){It.side===to?St(n.CULL_FACE):ft(n.CULL_FACE);let $t=It.side===oa;ve&&($t=!$t),ut($t),It.blending===Hc&&It.transparent===!1?mt(Wo):mt(It.blending,It.blendEquation,It.blendSrc,It.blendDst,It.blendEquationAlpha,It.blendSrcAlpha,It.blendDstAlpha,It.blendColor,It.blendAlpha,It.premultipliedAlpha),s.setFunc(It.depthFunc),s.setTest(It.depthTest),s.setMask(It.depthWrite),a.setMask(It.colorWrite);let ne=It.stencilWrite;o.setTest(ne),ne&&(o.setMask(It.stencilWriteMask),o.setFunc(It.stencilFunc,It.stencilRef,It.stencilFuncMask),o.setOp(It.stencilFail,It.stencilZFail,It.stencilZPass)),ee(It.polygonOffset,It.polygonOffsetFactor,It.polygonOffsetUnits),It.alphaToCoverage===!0?ft(n.SAMPLE_ALPHA_TO_COVERAGE):St(n.SAMPLE_ALPHA_TO_COVERAGE)}function ut(It){F!==It&&(It?n.frontFace(n.CW):n.frontFace(n.CCW),F=It)}function Ae(It){It!==T5?(ft(n.CULL_FACE),It!==P&&(It===x2?n.cullFace(n.BACK):It===k5?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):St(n.CULL_FACE),P=It}function se(It){It!==V&&(ot&&n.lineWidth(It),V=It)}function ee(It,ve,$t){It?(ft(n.POLYGON_OFFSET_FILL),($!==ve||K!==$t)&&(n.polygonOffset(ve,$t),$=ve,K=$t)):St(n.POLYGON_OFFSET_FILL)}function Zt(It){It?ft(n.SCISSOR_TEST):St(n.SCISSOR_TEST)}function tt(It){It===void 0&&(It=n.TEXTURE0+ct-1),xt!==It&&(n.activeTexture(It),xt=It)}function H(It,ve,$t){$t===void 0&&(xt===null?$t=n.TEXTURE0+ct-1:$t=xt);let ne=Mt[$t];ne===void 0&&(ne={type:void 0,texture:void 0},Mt[$t]=ne),(ne.type!==It||ne.texture!==ve)&&(xt!==$t&&(n.activeTexture($t),xt=$t),n.bindTexture(It,ve||pt[It]),ne.type=It,ne.texture=ve)}function yt(){let It=Mt[xt];It!==void 0&&It.type!==void 0&&(n.bindTexture(It.type,null),It.type=void 0,It.texture=void 0)}function Ht(){try{n.compressedTexImage2D.apply(n,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function Xt(){try{n.compressedTexImage3D.apply(n,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function Wt(){try{n.texSubImage2D.apply(n,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function Se(){try{n.texSubImage3D.apply(n,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function ge(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function ce(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function Pe(){try{n.texStorage2D.apply(n,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function Ut(){try{n.texStorage3D.apply(n,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function Ce(){try{n.texImage2D.apply(n,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function we(){try{n.texImage3D.apply(n,arguments)}catch(It){console.error("THREE.WebGLState:",It)}}function je(It){nt.equals(It)===!1&&(n.scissor(It.x,It.y,It.z,It.w),nt.copy(It))}function ye(It){Z.equals(It)===!1&&(n.viewport(It.x,It.y,It.z,It.w),Z.copy(It))}function He(It,ve){let $t=u.get(ve);$t===void 0&&($t=new WeakMap,u.set(ve,$t));let ne=$t.get(It);ne===void 0&&(ne=n.getUniformBlockIndex(ve,It.name),$t.set(It,ne))}function Ze(It,ve){let ne=u.get(ve).get(It);l.get(ve)!==ne&&(n.uniformBlockBinding(ve,ne,It.__bindingPointIndex),l.set(ve,ne))}function Ge(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},xt=null,Mt={},f={},g=new WeakMap,m=[],x=null,y=!1,S=null,b=null,M=null,T=null,I=null,O=null,U=null,N=new Vi(0,0,0),B=0,R=!1,F=null,P=null,V=null,$=null,K=null,nt.set(0,0,n.canvas.width,n.canvas.height),Z.set(0,0,n.canvas.width,n.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:ft,disable:St,bindFramebuffer:kt,drawBuffers:Qt,useProgram:ie,setBlending:mt,setMaterial:Yt,setFlipSided:ut,setCullFace:Ae,setLineWidth:se,setPolygonOffset:ee,setScissorTest:Zt,activeTexture:tt,bindTexture:H,unbindTexture:yt,compressedTexImage2D:Ht,compressedTexImage3D:Xt,texImage2D:Ce,texImage3D:we,updateUBOMapping:He,uniformBlockBinding:Ze,texStorage2D:Pe,texStorage3D:Ut,texSubImage2D:Wt,texSubImage3D:Se,compressedTexSubImage2D:ge,compressedTexSubImage3D:ce,scissor:je,viewport:ye,reset:Ge}}function UX(n,e,t,i,r,a,s){let o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Wi,p=new WeakMap,f,g=new WeakMap,m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(tt,H){return m?new OffscreenCanvas(tt,H):zp("canvas")}function y(tt,H,yt){let Ht=1,Xt=Zt(tt);if((Xt.width>yt||Xt.height>yt)&&(Ht=yt/Math.max(Xt.width,Xt.height)),Ht<1)if(typeof HTMLImageElement<"u"&&tt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&tt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&tt instanceof ImageBitmap||typeof VideoFrame<"u"&&tt instanceof VideoFrame){let Wt=Math.floor(Ht*Xt.width),Se=Math.floor(Ht*Xt.height);f===void 0&&(f=x(Wt,Se));let ge=H?x(Wt,Se):f;return ge.width=Wt,ge.height=Se,ge.getContext("2d").drawImage(tt,0,0,Wt,Se),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Xt.width+"x"+Xt.height+") to ("+Wt+"x"+Se+")."),ge}else return"data"in tt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Xt.width+"x"+Xt.height+")."),tt;return tt}function S(tt){return tt.generateMipmaps}function b(tt){n.generateMipmap(tt)}function M(tt){return tt.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:tt.isWebGL3DRenderTarget?n.TEXTURE_3D:tt.isWebGLArrayRenderTarget||tt.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function T(tt,H,yt,Ht,Xt=!1){if(tt!==null){if(n[tt]!==void 0)return n[tt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+tt+"'")}let Wt=H;if(H===n.RED&&(yt===n.FLOAT&&(Wt=n.R32F),yt===n.HALF_FLOAT&&(Wt=n.R16F),yt===n.UNSIGNED_BYTE&&(Wt=n.R8)),H===n.RED_INTEGER&&(yt===n.UNSIGNED_BYTE&&(Wt=n.R8UI),yt===n.UNSIGNED_SHORT&&(Wt=n.R16UI),yt===n.UNSIGNED_INT&&(Wt=n.R32UI),yt===n.BYTE&&(Wt=n.R8I),yt===n.SHORT&&(Wt=n.R16I),yt===n.INT&&(Wt=n.R32I)),H===n.RG&&(yt===n.FLOAT&&(Wt=n.RG32F),yt===n.HALF_FLOAT&&(Wt=n.RG16F),yt===n.UNSIGNED_BYTE&&(Wt=n.RG8)),H===n.RG_INTEGER&&(yt===n.UNSIGNED_BYTE&&(Wt=n.RG8UI),yt===n.UNSIGNED_SHORT&&(Wt=n.RG16UI),yt===n.UNSIGNED_INT&&(Wt=n.RG32UI),yt===n.BYTE&&(Wt=n.RG8I),yt===n.SHORT&&(Wt=n.RG16I),yt===n.INT&&(Wt=n.RG32I)),H===n.RGB_INTEGER&&(yt===n.UNSIGNED_BYTE&&(Wt=n.RGB8UI),yt===n.UNSIGNED_SHORT&&(Wt=n.RGB16UI),yt===n.UNSIGNED_INT&&(Wt=n.RGB32UI),yt===n.BYTE&&(Wt=n.RGB8I),yt===n.SHORT&&(Wt=n.RGB16I),yt===n.INT&&(Wt=n.RGB32I)),H===n.RGBA_INTEGER&&(yt===n.UNSIGNED_BYTE&&(Wt=n.RGBA8UI),yt===n.UNSIGNED_SHORT&&(Wt=n.RGBA16UI),yt===n.UNSIGNED_INT&&(Wt=n.RGBA32UI),yt===n.BYTE&&(Wt=n.RGBA8I),yt===n.SHORT&&(Wt=n.RGBA16I),yt===n.INT&&(Wt=n.RGBA32I)),H===n.RGB&&yt===n.UNSIGNED_INT_5_9_9_9_REV&&(Wt=n.RGB9_E5),H===n.RGBA){let Se=Xt?Vp:zi.getTransfer(Ht);yt===n.FLOAT&&(Wt=n.RGBA32F),yt===n.HALF_FLOAT&&(Wt=n.RGBA16F),yt===n.UNSIGNED_BYTE&&(Wt=Se===rn?n.SRGB8_ALPHA8:n.RGBA8),yt===n.UNSIGNED_SHORT_4_4_4_4&&(Wt=n.RGBA4),yt===n.UNSIGNED_SHORT_5_5_5_1&&(Wt=n.RGB5_A1)}return(Wt===n.R16F||Wt===n.R32F||Wt===n.RG16F||Wt===n.RG32F||Wt===n.RGBA16F||Wt===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Wt}function I(tt,H){let yt;return tt?H===null||H===Jl||H===Kc?yt=n.DEPTH24_STENCIL8:H===io?yt=n.DEPTH32F_STENCIL8:H===Vu&&(yt=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):H===null||H===Jl||H===Kc?yt=n.DEPTH_COMPONENT24:H===io?yt=n.DEPTH_COMPONENT32F:H===Vu&&(yt=n.DEPTH_COMPONENT16),yt}function O(tt,H){return S(tt)===!0||tt.isFramebufferTexture&&tt.minFilter!==ns&&tt.minFilter!==ks?Math.log2(Math.max(H.width,H.height))+1:tt.mipmaps!==void 0&&tt.mipmaps.length>0?tt.mipmaps.length:tt.isCompressedTexture&&Array.isArray(tt.image)?H.mipmaps.length:1}function U(tt){let H=tt.target;H.removeEventListener("dispose",U),B(H),H.isVideoTexture&&p.delete(H)}function N(tt){let H=tt.target;H.removeEventListener("dispose",N),F(H)}function B(tt){let H=i.get(tt);if(H.__webglInit===void 0)return;let yt=tt.source,Ht=g.get(yt);if(Ht){let Xt=Ht[H.__cacheKey];Xt.usedTimes--,Xt.usedTimes===0&&R(tt),Object.keys(Ht).length===0&&g.delete(yt)}i.remove(tt)}function R(tt){let H=i.get(tt);n.deleteTexture(H.__webglTexture);let yt=tt.source,Ht=g.get(yt);delete Ht[H.__cacheKey],s.memory.textures--}function F(tt){let H=i.get(tt);if(tt.depthTexture&&(tt.depthTexture.dispose(),i.remove(tt.depthTexture)),tt.isWebGLCubeRenderTarget)for(let Ht=0;Ht<6;Ht++){if(Array.isArray(H.__webglFramebuffer[Ht]))for(let Xt=0;Xt<H.__webglFramebuffer[Ht].length;Xt++)n.deleteFramebuffer(H.__webglFramebuffer[Ht][Xt]);else n.deleteFramebuffer(H.__webglFramebuffer[Ht]);H.__webglDepthbuffer&&n.deleteRenderbuffer(H.__webglDepthbuffer[Ht])}else{if(Array.isArray(H.__webglFramebuffer))for(let Ht=0;Ht<H.__webglFramebuffer.length;Ht++)n.deleteFramebuffer(H.__webglFramebuffer[Ht]);else n.deleteFramebuffer(H.__webglFramebuffer);if(H.__webglDepthbuffer&&n.deleteRenderbuffer(H.__webglDepthbuffer),H.__webglMultisampledFramebuffer&&n.deleteFramebuffer(H.__webglMultisampledFramebuffer),H.__webglColorRenderbuffer)for(let Ht=0;Ht<H.__webglColorRenderbuffer.length;Ht++)H.__webglColorRenderbuffer[Ht]&&n.deleteRenderbuffer(H.__webglColorRenderbuffer[Ht]);H.__webglDepthRenderbuffer&&n.deleteRenderbuffer(H.__webglDepthRenderbuffer)}let yt=tt.textures;for(let Ht=0,Xt=yt.length;Ht<Xt;Ht++){let Wt=i.get(yt[Ht]);Wt.__webglTexture&&(n.deleteTexture(Wt.__webglTexture),s.memory.textures--),i.remove(yt[Ht])}i.remove(tt)}let P=0;function V(){P=0}function $(){let tt=P;return tt>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+tt+" texture units while this GPU supports only "+r.maxTextures),P+=1,tt}function K(tt){let H=[];return H.push(tt.wrapS),H.push(tt.wrapT),H.push(tt.wrapR||0),H.push(tt.magFilter),H.push(tt.minFilter),H.push(tt.anisotropy),H.push(tt.internalFormat),H.push(tt.format),H.push(tt.type),H.push(tt.generateMipmaps),H.push(tt.premultiplyAlpha),H.push(tt.flipY),H.push(tt.unpackAlignment),H.push(tt.colorSpace),H.join()}function ct(tt,H){let yt=i.get(tt);if(tt.isVideoTexture&&se(tt),tt.isRenderTargetTexture===!1&&tt.version>0&&yt.__version!==tt.version){let Ht=tt.image;if(Ht===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ht.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Z(yt,tt,H);return}}t.bindTexture(n.TEXTURE_2D,yt.__webglTexture,n.TEXTURE0+H)}function ot(tt,H){let yt=i.get(tt);if(tt.version>0&&yt.__version!==tt.version){Z(yt,tt,H);return}t.bindTexture(n.TEXTURE_2D_ARRAY,yt.__webglTexture,n.TEXTURE0+H)}function at(tt,H){let yt=i.get(tt);if(tt.version>0&&yt.__version!==tt.version){Z(yt,tt,H);return}t.bindTexture(n.TEXTURE_3D,yt.__webglTexture,n.TEXTURE0+H)}function Q(tt,H){let yt=i.get(tt);if(tt.version>0&&yt.__version!==tt.version){st(yt,tt,H);return}t.bindTexture(n.TEXTURE_CUBE_MAP,yt.__webglTexture,n.TEXTURE0+H)}let xt={[i_]:n.REPEAT,[Wl]:n.CLAMP_TO_EDGE,[n_]:n.MIRRORED_REPEAT},Mt={[ns]:n.NEAREST,[rT]:n.NEAREST_MIPMAP_NEAREST,[rf]:n.NEAREST_MIPMAP_LINEAR,[ks]:n.LINEAR,[R_]:n.LINEAR_MIPMAP_NEAREST,[Zl]:n.LINEAR_MIPMAP_LINEAR},qt={[lT]:n.NEVER,[fT]:n.ALWAYS,[cT]:n.LESS,[N2]:n.LEQUAL,[dT]:n.EQUAL,[pT]:n.GEQUAL,[uT]:n.GREATER,[hT]:n.NOTEQUAL};function z(tt,H){if(H.type===io&&e.has("OES_texture_float_linear")===!1&&(H.magFilter===ks||H.magFilter===R_||H.magFilter===rf||H.magFilter===Zl||H.minFilter===ks||H.minFilter===R_||H.minFilter===rf||H.minFilter===Zl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(tt,n.TEXTURE_WRAP_S,xt[H.wrapS]),n.texParameteri(tt,n.TEXTURE_WRAP_T,xt[H.wrapT]),(tt===n.TEXTURE_3D||tt===n.TEXTURE_2D_ARRAY)&&n.texParameteri(tt,n.TEXTURE_WRAP_R,xt[H.wrapR]),n.texParameteri(tt,n.TEXTURE_MAG_FILTER,Mt[H.magFilter]),n.texParameteri(tt,n.TEXTURE_MIN_FILTER,Mt[H.minFilter]),H.compareFunction&&(n.texParameteri(tt,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(tt,n.TEXTURE_COMPARE_FUNC,qt[H.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(H.magFilter===ns||H.minFilter!==rf&&H.minFilter!==Zl||H.type===io&&e.has("OES_texture_float_linear")===!1)return;if(H.anisotropy>1||i.get(H).__currentAnisotropy){let yt=e.get("EXT_texture_filter_anisotropic");n.texParameterf(tt,yt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(H.anisotropy,r.getMaxAnisotropy())),i.get(H).__currentAnisotropy=H.anisotropy}}}function nt(tt,H){let yt=!1;tt.__webglInit===void 0&&(tt.__webglInit=!0,H.addEventListener("dispose",U));let Ht=H.source,Xt=g.get(Ht);Xt===void 0&&(Xt={},g.set(Ht,Xt));let Wt=K(H);if(Wt!==tt.__cacheKey){Xt[Wt]===void 0&&(Xt[Wt]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,yt=!0),Xt[Wt].usedTimes++;let Se=Xt[tt.__cacheKey];Se!==void 0&&(Xt[tt.__cacheKey].usedTimes--,Se.usedTimes===0&&R(H)),tt.__cacheKey=Wt,tt.__webglTexture=Xt[Wt].texture}return yt}function Z(tt,H,yt){let Ht=n.TEXTURE_2D;(H.isDataArrayTexture||H.isCompressedArrayTexture)&&(Ht=n.TEXTURE_2D_ARRAY),H.isData3DTexture&&(Ht=n.TEXTURE_3D);let Xt=nt(tt,H),Wt=H.source;t.bindTexture(Ht,tt.__webglTexture,n.TEXTURE0+yt);let Se=i.get(Wt);if(Wt.version!==Se.__version||Xt===!0){t.activeTexture(n.TEXTURE0+yt);let ge=zi.getPrimaries(zi.workingColorSpace),ce=H.colorSpace===Go?null:zi.getPrimaries(H.colorSpace),Pe=H.colorSpace===Go||ge===ce?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,H.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,H.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Pe);let Ut=y(H.image,!1,r.maxTextureSize);Ut=ee(H,Ut);let Ce=a.convert(H.format,H.colorSpace),we=a.convert(H.type),je=T(H.internalFormat,Ce,we,H.colorSpace,H.isVideoTexture);z(Ht,H);let ye,He=H.mipmaps,Ze=H.isVideoTexture!==!0,Ge=Se.__version===void 0||Xt===!0,It=Wt.dataReady,ve=O(H,Ut);if(H.isDepthTexture)je=I(H.format===jc,H.type),Ge&&(Ze?t.texStorage2D(n.TEXTURE_2D,1,je,Ut.width,Ut.height):t.texImage2D(n.TEXTURE_2D,0,je,Ut.width,Ut.height,0,Ce,we,null));else if(H.isDataTexture)if(He.length>0){Ze&&Ge&&t.texStorage2D(n.TEXTURE_2D,ve,je,He[0].width,He[0].height);for(let $t=0,ne=He.length;$t<ne;$t++)ye=He[$t],Ze?It&&t.texSubImage2D(n.TEXTURE_2D,$t,0,0,ye.width,ye.height,Ce,we,ye.data):t.texImage2D(n.TEXTURE_2D,$t,je,ye.width,ye.height,0,Ce,we,ye.data);H.generateMipmaps=!1}else Ze?(Ge&&t.texStorage2D(n.TEXTURE_2D,ve,je,Ut.width,Ut.height),It&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ut.width,Ut.height,Ce,we,Ut.data)):t.texImage2D(n.TEXTURE_2D,0,je,Ut.width,Ut.height,0,Ce,we,Ut.data);else if(H.isCompressedTexture)if(H.isCompressedArrayTexture){Ze&&Ge&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ve,je,He[0].width,He[0].height,Ut.depth);for(let $t=0,ne=He.length;$t<ne;$t++)if(ye=He[$t],H.format!==as)if(Ce!==null)if(Ze){if(It)if(H.layerUpdates.size>0){let be=H2(ye.width,ye.height,H.format,H.type);for(let ae of H.layerUpdates){let De=ye.data.subarray(ae*be/ye.data.BYTES_PER_ELEMENT,(ae+1)*be/ye.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,$t,0,0,ae,ye.width,ye.height,1,Ce,De)}H.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,$t,0,0,0,ye.width,ye.height,Ut.depth,Ce,ye.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,$t,je,ye.width,ye.height,Ut.depth,0,ye.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ze?It&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,$t,0,0,0,ye.width,ye.height,Ut.depth,Ce,we,ye.data):t.texImage3D(n.TEXTURE_2D_ARRAY,$t,je,ye.width,ye.height,Ut.depth,0,Ce,we,ye.data)}else{Ze&&Ge&&t.texStorage2D(n.TEXTURE_2D,ve,je,He[0].width,He[0].height);for(let $t=0,ne=He.length;$t<ne;$t++)ye=He[$t],H.format!==as?Ce!==null?Ze?It&&t.compressedTexSubImage2D(n.TEXTURE_2D,$t,0,0,ye.width,ye.height,Ce,ye.data):t.compressedTexImage2D(n.TEXTURE_2D,$t,je,ye.width,ye.height,0,ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ze?It&&t.texSubImage2D(n.TEXTURE_2D,$t,0,0,ye.width,ye.height,Ce,we,ye.data):t.texImage2D(n.TEXTURE_2D,$t,je,ye.width,ye.height,0,Ce,we,ye.data)}else if(H.isDataArrayTexture)if(Ze){if(Ge&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ve,je,Ut.width,Ut.height,Ut.depth),It)if(H.layerUpdates.size>0){let $t=H2(Ut.width,Ut.height,H.format,H.type);for(let ne of H.layerUpdates){let be=Ut.data.subarray(ne*$t/Ut.data.BYTES_PER_ELEMENT,(ne+1)*$t/Ut.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ne,Ut.width,Ut.height,1,Ce,we,be)}H.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ut.width,Ut.height,Ut.depth,Ce,we,Ut.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,je,Ut.width,Ut.height,Ut.depth,0,Ce,we,Ut.data);else if(H.isData3DTexture)Ze?(Ge&&t.texStorage3D(n.TEXTURE_3D,ve,je,Ut.width,Ut.height,Ut.depth),It&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ut.width,Ut.height,Ut.depth,Ce,we,Ut.data)):t.texImage3D(n.TEXTURE_3D,0,je,Ut.width,Ut.height,Ut.depth,0,Ce,we,Ut.data);else if(H.isFramebufferTexture){if(Ge)if(Ze)t.texStorage2D(n.TEXTURE_2D,ve,je,Ut.width,Ut.height);else{let $t=Ut.width,ne=Ut.height;for(let be=0;be<ve;be++)t.texImage2D(n.TEXTURE_2D,be,je,$t,ne,0,Ce,we,null),$t>>=1,ne>>=1}}else if(He.length>0){if(Ze&&Ge){let $t=Zt(He[0]);t.texStorage2D(n.TEXTURE_2D,ve,je,$t.width,$t.height)}for(let $t=0,ne=He.length;$t<ne;$t++)ye=He[$t],Ze?It&&t.texSubImage2D(n.TEXTURE_2D,$t,0,0,Ce,we,ye):t.texImage2D(n.TEXTURE_2D,$t,je,Ce,we,ye);H.generateMipmaps=!1}else if(Ze){if(Ge){let $t=Zt(Ut);t.texStorage2D(n.TEXTURE_2D,ve,je,$t.width,$t.height)}It&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ce,we,Ut)}else t.texImage2D(n.TEXTURE_2D,0,je,Ce,we,Ut);S(H)&&b(Ht),Se.__version=Wt.version,H.onUpdate&&H.onUpdate(H)}tt.__version=H.version}function st(tt,H,yt){if(H.image.length!==6)return;let Ht=nt(tt,H),Xt=H.source;t.bindTexture(n.TEXTURE_CUBE_MAP,tt.__webglTexture,n.TEXTURE0+yt);let Wt=i.get(Xt);if(Xt.version!==Wt.__version||Ht===!0){t.activeTexture(n.TEXTURE0+yt);let Se=zi.getPrimaries(zi.workingColorSpace),ge=H.colorSpace===Go?null:zi.getPrimaries(H.colorSpace),ce=H.colorSpace===Go||Se===ge?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,H.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,H.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ce);let Pe=H.isCompressedTexture||H.image[0].isCompressedTexture,Ut=H.image[0]&&H.image[0].isDataTexture,Ce=[];for(let ne=0;ne<6;ne++)!Pe&&!Ut?Ce[ne]=y(H.image[ne],!0,r.maxCubemapSize):Ce[ne]=Ut?H.image[ne].image:H.image[ne],Ce[ne]=ee(H,Ce[ne]);let we=Ce[0],je=a.convert(H.format,H.colorSpace),ye=a.convert(H.type),He=T(H.internalFormat,je,ye,H.colorSpace),Ze=H.isVideoTexture!==!0,Ge=Wt.__version===void 0||Ht===!0,It=Xt.dataReady,ve=O(H,we);z(n.TEXTURE_CUBE_MAP,H);let $t;if(Pe){Ze&&Ge&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ve,He,we.width,we.height);for(let ne=0;ne<6;ne++){$t=Ce[ne].mipmaps;for(let be=0;be<$t.length;be++){let ae=$t[be];H.format!==as?je!==null?Ze?It&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,be,0,0,ae.width,ae.height,je,ae.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,be,He,ae.width,ae.height,0,ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ze?It&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,be,0,0,ae.width,ae.height,je,ye,ae.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,be,He,ae.width,ae.height,0,je,ye,ae.data)}}}else{if($t=H.mipmaps,Ze&&Ge){$t.length>0&&ve++;let ne=Zt(Ce[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,ve,He,ne.width,ne.height)}for(let ne=0;ne<6;ne++)if(Ut){Ze?It&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,0,0,Ce[ne].width,Ce[ne].height,je,ye,Ce[ne].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,He,Ce[ne].width,Ce[ne].height,0,je,ye,Ce[ne].data);for(let be=0;be<$t.length;be++){let De=$t[be].image[ne].image;Ze?It&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,be+1,0,0,De.width,De.height,je,ye,De.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,be+1,He,De.width,De.height,0,je,ye,De.data)}}else{Ze?It&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,0,0,je,ye,Ce[ne]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,He,je,ye,Ce[ne]);for(let be=0;be<$t.length;be++){let ae=$t[be];Ze?It&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,be+1,0,0,je,ye,ae.image[ne]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ne,be+1,He,je,ye,ae.image[ne])}}}S(H)&&b(n.TEXTURE_CUBE_MAP),Wt.__version=Xt.version,H.onUpdate&&H.onUpdate(H)}tt.__version=H.version}function pt(tt,H,yt,Ht,Xt,Wt){let Se=a.convert(yt.format,yt.colorSpace),ge=a.convert(yt.type),ce=T(yt.internalFormat,Se,ge,yt.colorSpace),Pe=i.get(H),Ut=i.get(yt);if(Ut.__renderTarget=H,!Pe.__hasExternalTextures){let Ce=Math.max(1,H.width>>Wt),we=Math.max(1,H.height>>Wt);Xt===n.TEXTURE_3D||Xt===n.TEXTURE_2D_ARRAY?t.texImage3D(Xt,Wt,ce,Ce,we,H.depth,0,Se,ge,null):t.texImage2D(Xt,Wt,ce,Ce,we,0,Se,ge,null)}t.bindFramebuffer(n.FRAMEBUFFER,tt),Ae(H)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ht,Xt,Ut.__webglTexture,0,ut(H)):(Xt===n.TEXTURE_2D||Xt>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Xt<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ht,Xt,Ut.__webglTexture,Wt),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ft(tt,H,yt){if(n.bindRenderbuffer(n.RENDERBUFFER,tt),H.depthBuffer){let Ht=H.depthTexture,Xt=Ht&&Ht.isDepthTexture?Ht.type:null,Wt=I(H.stencilBuffer,Xt),Se=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ge=ut(H);Ae(H)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ge,Wt,H.width,H.height):yt?n.renderbufferStorageMultisample(n.RENDERBUFFER,ge,Wt,H.width,H.height):n.renderbufferStorage(n.RENDERBUFFER,Wt,H.width,H.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Se,n.RENDERBUFFER,tt)}else{let Ht=H.textures;for(let Xt=0;Xt<Ht.length;Xt++){let Wt=Ht[Xt],Se=a.convert(Wt.format,Wt.colorSpace),ge=a.convert(Wt.type),ce=T(Wt.internalFormat,Se,ge,Wt.colorSpace),Pe=ut(H);yt&&Ae(H)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Pe,ce,H.width,H.height):Ae(H)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Pe,ce,H.width,H.height):n.renderbufferStorage(n.RENDERBUFFER,ce,H.width,H.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function St(tt,H){if(H&&H.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,tt),!(H.depthTexture&&H.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let Ht=i.get(H.depthTexture);Ht.__renderTarget=H,(!Ht.__webglTexture||H.depthTexture.image.width!==H.width||H.depthTexture.image.height!==H.height)&&(H.depthTexture.image.width=H.width,H.depthTexture.image.height=H.height,H.depthTexture.needsUpdate=!0),ct(H.depthTexture,0);let Xt=Ht.__webglTexture,Wt=ut(H);if(H.depthTexture.format===zc)Ae(H)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Xt,0,Wt):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Xt,0);else if(H.depthTexture.format===jc)Ae(H)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Xt,0,Wt):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Xt,0);else throw new Error("Unknown depthTexture format")}function kt(tt){let H=i.get(tt),yt=tt.isWebGLCubeRenderTarget===!0;if(H.__boundDepthTexture!==tt.depthTexture){let Ht=tt.depthTexture;if(H.__depthDisposeCallback&&H.__depthDisposeCallback(),Ht){let Xt=()=>{delete H.__boundDepthTexture,delete H.__depthDisposeCallback,Ht.removeEventListener("dispose",Xt)};Ht.addEventListener("dispose",Xt),H.__depthDisposeCallback=Xt}H.__boundDepthTexture=Ht}if(tt.depthTexture&&!H.__autoAllocateDepthBuffer){if(yt)throw new Error("target.depthTexture not supported in Cube render targets");St(H.__webglFramebuffer,tt)}else if(yt){H.__webglDepthbuffer=[];for(let Ht=0;Ht<6;Ht++)if(t.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer[Ht]),H.__webglDepthbuffer[Ht]===void 0)H.__webglDepthbuffer[Ht]=n.createRenderbuffer(),ft(H.__webglDepthbuffer[Ht],tt,!1);else{let Xt=tt.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Wt=H.__webglDepthbuffer[Ht];n.bindRenderbuffer(n.RENDERBUFFER,Wt),n.framebufferRenderbuffer(n.FRAMEBUFFER,Xt,n.RENDERBUFFER,Wt)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer),H.__webglDepthbuffer===void 0)H.__webglDepthbuffer=n.createRenderbuffer(),ft(H.__webglDepthbuffer,tt,!1);else{let Ht=tt.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Xt=H.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Xt),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ht,n.RENDERBUFFER,Xt)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Qt(tt,H,yt){let Ht=i.get(tt);H!==void 0&&pt(Ht.__webglFramebuffer,tt,tt.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),yt!==void 0&&kt(tt)}function ie(tt){let H=tt.texture,yt=i.get(tt),Ht=i.get(H);tt.addEventListener("dispose",N);let Xt=tt.textures,Wt=tt.isWebGLCubeRenderTarget===!0,Se=Xt.length>1;if(Se||(Ht.__webglTexture===void 0&&(Ht.__webglTexture=n.createTexture()),Ht.__version=H.version,s.memory.textures++),Wt){yt.__webglFramebuffer=[];for(let ge=0;ge<6;ge++)if(H.mipmaps&&H.mipmaps.length>0){yt.__webglFramebuffer[ge]=[];for(let ce=0;ce<H.mipmaps.length;ce++)yt.__webglFramebuffer[ge][ce]=n.createFramebuffer()}else yt.__webglFramebuffer[ge]=n.createFramebuffer()}else{if(H.mipmaps&&H.mipmaps.length>0){yt.__webglFramebuffer=[];for(let ge=0;ge<H.mipmaps.length;ge++)yt.__webglFramebuffer[ge]=n.createFramebuffer()}else yt.__webglFramebuffer=n.createFramebuffer();if(Se)for(let ge=0,ce=Xt.length;ge<ce;ge++){let Pe=i.get(Xt[ge]);Pe.__webglTexture===void 0&&(Pe.__webglTexture=n.createTexture(),s.memory.textures++)}if(tt.samples>0&&Ae(tt)===!1){yt.__webglMultisampledFramebuffer=n.createFramebuffer(),yt.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,yt.__webglMultisampledFramebuffer);for(let ge=0;ge<Xt.length;ge++){let ce=Xt[ge];yt.__webglColorRenderbuffer[ge]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,yt.__webglColorRenderbuffer[ge]);let Pe=a.convert(ce.format,ce.colorSpace),Ut=a.convert(ce.type),Ce=T(ce.internalFormat,Pe,Ut,ce.colorSpace,tt.isXRRenderTarget===!0),we=ut(tt);n.renderbufferStorageMultisample(n.RENDERBUFFER,we,Ce,tt.width,tt.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ge,n.RENDERBUFFER,yt.__webglColorRenderbuffer[ge])}n.bindRenderbuffer(n.RENDERBUFFER,null),tt.depthBuffer&&(yt.__webglDepthRenderbuffer=n.createRenderbuffer(),ft(yt.__webglDepthRenderbuffer,tt,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Wt){t.bindTexture(n.TEXTURE_CUBE_MAP,Ht.__webglTexture),z(n.TEXTURE_CUBE_MAP,H);for(let ge=0;ge<6;ge++)if(H.mipmaps&&H.mipmaps.length>0)for(let ce=0;ce<H.mipmaps.length;ce++)pt(yt.__webglFramebuffer[ge][ce],tt,H,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,ce);else pt(yt.__webglFramebuffer[ge],tt,H,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0);S(H)&&b(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Se){for(let ge=0,ce=Xt.length;ge<ce;ge++){let Pe=Xt[ge],Ut=i.get(Pe);t.bindTexture(n.TEXTURE_2D,Ut.__webglTexture),z(n.TEXTURE_2D,Pe),pt(yt.__webglFramebuffer,tt,Pe,n.COLOR_ATTACHMENT0+ge,n.TEXTURE_2D,0),S(Pe)&&b(n.TEXTURE_2D)}t.unbindTexture()}else{let ge=n.TEXTURE_2D;if((tt.isWebGL3DRenderTarget||tt.isWebGLArrayRenderTarget)&&(ge=tt.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(ge,Ht.__webglTexture),z(ge,H),H.mipmaps&&H.mipmaps.length>0)for(let ce=0;ce<H.mipmaps.length;ce++)pt(yt.__webglFramebuffer[ce],tt,H,n.COLOR_ATTACHMENT0,ge,ce);else pt(yt.__webglFramebuffer,tt,H,n.COLOR_ATTACHMENT0,ge,0);S(H)&&b(ge),t.unbindTexture()}tt.depthBuffer&&kt(tt)}function ue(tt){let H=tt.textures;for(let yt=0,Ht=H.length;yt<Ht;yt++){let Xt=H[yt];if(S(Xt)){let Wt=M(tt),Se=i.get(Xt).__webglTexture;t.bindTexture(Wt,Se),b(Wt),t.unbindTexture()}}}let _e=[],mt=[];function Yt(tt){if(tt.samples>0){if(Ae(tt)===!1){let H=tt.textures,yt=tt.width,Ht=tt.height,Xt=n.COLOR_BUFFER_BIT,Wt=tt.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Se=i.get(tt),ge=H.length>1;if(ge)for(let ce=0;ce<H.length;ce++)t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ce,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ce,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Se.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Se.__webglFramebuffer);for(let ce=0;ce<H.length;ce++){if(tt.resolveDepthBuffer&&(tt.depthBuffer&&(Xt|=n.DEPTH_BUFFER_BIT),tt.stencilBuffer&&tt.resolveStencilBuffer&&(Xt|=n.STENCIL_BUFFER_BIT)),ge){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Se.__webglColorRenderbuffer[ce]);let Pe=i.get(H[ce]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Pe,0)}n.blitFramebuffer(0,0,yt,Ht,0,0,yt,Ht,Xt,n.NEAREST),l===!0&&(_e.length=0,mt.length=0,_e.push(n.COLOR_ATTACHMENT0+ce),tt.depthBuffer&&tt.resolveDepthBuffer===!1&&(_e.push(Wt),mt.push(Wt),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,mt)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,_e))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),ge)for(let ce=0;ce<H.length;ce++){t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ce,n.RENDERBUFFER,Se.__webglColorRenderbuffer[ce]);let Pe=i.get(H[ce]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ce,n.TEXTURE_2D,Pe,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Se.__webglMultisampledFramebuffer)}else if(tt.depthBuffer&&tt.resolveDepthBuffer===!1&&l){let H=tt.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[H])}}}function ut(tt){return Math.min(r.maxSamples,tt.samples)}function Ae(tt){let H=i.get(tt);return tt.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&H.__useRenderToTexture!==!1}function se(tt){let H=s.render.frame;p.get(tt)!==H&&(p.set(tt,H),tt.update())}function ee(tt,H){let yt=tt.colorSpace,Ht=tt.format,Xt=tt.type;return tt.isCompressedTexture===!0||tt.isVideoTexture===!0||yt!==Gc&&yt!==Go&&(zi.getTransfer(yt)===rn?(Ht!==as||Xt!==eo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",yt)),H}function Zt(tt){return typeof HTMLImageElement<"u"&&tt instanceof HTMLImageElement?(u.width=tt.naturalWidth||tt.width,u.height=tt.naturalHeight||tt.height):typeof VideoFrame<"u"&&tt instanceof VideoFrame?(u.width=tt.displayWidth,u.height=tt.displayHeight):(u.width=tt.width,u.height=tt.height),u}this.allocateTextureUnit=$,this.resetTextureUnits=V,this.setTexture2D=ct,this.setTexture2DArray=ot,this.setTexture3D=at,this.setTextureCube=Q,this.rebindTextures=Qt,this.setupRenderTarget=ie,this.updateRenderTargetMipmap=ue,this.updateMultisampleRenderTarget=Yt,this.setupDepthRenderbuffer=kt,this.setupFrameBufferTexture=pt,this.useMultisampledRTT=Ae}function zX(n,e){function t(i,r=Go){let a,s=zi.getTransfer(r);if(i===eo)return n.UNSIGNED_BYTE;if(i===N_)return n.UNSIGNED_SHORT_4_4_4_4;if(i===F_)return n.UNSIGNED_SHORT_5_5_5_1;if(i===A2)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===M2)return n.BYTE;if(i===E2)return n.SHORT;if(i===Vu)return n.UNSIGNED_SHORT;if(i===O_)return n.INT;if(i===Jl)return n.UNSIGNED_INT;if(i===io)return n.FLOAT;if(i===Uu)return n.HALF_FLOAT;if(i===T2)return n.ALPHA;if(i===k2)return n.RGB;if(i===as)return n.RGBA;if(i===I2)return n.LUMINANCE;if(i===D2)return n.LUMINANCE_ALPHA;if(i===zc)return n.DEPTH_COMPONENT;if(i===jc)return n.DEPTH_STENCIL;if(i===P2)return n.RED;if(i===B_)return n.RED_INTEGER;if(i===L2)return n.RG;if(i===V_)return n.RG_INTEGER;if(i===U_)return n.RGBA_INTEGER;if(i===af||i===sf||i===of||i===lf)if(s===rn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===af)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===sf)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===of)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===lf)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===af)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===sf)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===of)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===lf)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===z_||i===H_||i===W_||i===j_)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===z_)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===H_)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===W_)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===j_)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===G_||i===q_||i===X_)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===G_||i===q_)return s===rn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===X_)return s===rn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Y_||i===$_||i===K_||i===Z_||i===J_||i===Q_||i===t1||i===e1||i===i1||i===n1||i===r1||i===a1||i===s1||i===o1)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===Y_)return s===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===$_)return s===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===K_)return s===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Z_)return s===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===J_)return s===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Q_)return s===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===t1)return s===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===e1)return s===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===i1)return s===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===n1)return s===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===r1)return s===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===a1)return s===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===s1)return s===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===o1)return s===rn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===cf||i===l1||i===c1)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===cf)return s===rn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===l1)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===c1)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===R2||i===d1||i===u1||i===h1)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===cf)return a.COMPRESSED_RED_RGTC1_EXT;if(i===d1)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===u1)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===h1)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Kc?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}var HX={type:"move"},hf=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ho,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ho,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new zt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new zt),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ho,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new zt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new zt),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,a=null,s=null,o=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(let y of e.hand.values()){let S=t.getJointPose(y,i),b=this._getHandJoint(u,y);S!==null&&(b.matrix.fromArray(S.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=S.radius),b.visible=S!==null}let p=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],g=p.position.distanceTo(f.position),m=.02,x=.005;u.inputState.pinching&&g>m+x?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=m-x&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,i),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(HX)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=a!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new Ho;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}},WX=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,jX=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,eS=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){let r=new Ql,a=e.properties.get(r);a.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,i=new Is({vertexShader:WX,fragmentShader:jX,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Kr(new Zp(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},iS=class extends Vo{constructor(e,t){super();let i=this,r=null,a=1,s=null,o="local-floor",l=1,u=null,p=null,f=null,g=null,m=null,x=null,y=new eS,S=t.getContextAttributes(),b=null,M=null,T=[],I=[],O=new Wi,U=null,N=new Lr;N.viewport=new nn;let B=new Lr;B.viewport=new nn;let R=[N,B],F=new w_,P=null,V=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Z){let st=T[Z];return st===void 0&&(st=new hf,T[Z]=st),st.getTargetRaySpace()},this.getControllerGrip=function(Z){let st=T[Z];return st===void 0&&(st=new hf,T[Z]=st),st.getGripSpace()},this.getHand=function(Z){let st=T[Z];return st===void 0&&(st=new hf,T[Z]=st),st.getHandSpace()};function $(Z){let st=I.indexOf(Z.inputSource);if(st===-1)return;let pt=T[st];pt!==void 0&&(pt.update(Z.inputSource,Z.frame,u||s),pt.dispatchEvent({type:Z.type,data:Z.inputSource}))}function K(){r.removeEventListener("select",$),r.removeEventListener("selectstart",$),r.removeEventListener("selectend",$),r.removeEventListener("squeeze",$),r.removeEventListener("squeezestart",$),r.removeEventListener("squeezeend",$),r.removeEventListener("end",K),r.removeEventListener("inputsourceschange",ct);for(let Z=0;Z<T.length;Z++){let st=I[Z];st!==null&&(I[Z]=null,T[Z].disconnect(st))}P=null,V=null,y.reset(),e.setRenderTarget(b),m=null,g=null,f=null,r=null,M=null,nt.stop(),i.isPresenting=!1,e.setPixelRatio(U),e.setSize(O.width,O.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Z){a=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Z){o=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(Z){u=Z},this.getBaseLayer=function(){return g!==null?g:m},this.getBinding=function(){return f},this.getFrame=function(){return x},this.getSession=function(){return r},this.setSession=function(Z){return Ne(this,null,function*(){if(r=Z,r!==null){if(b=e.getRenderTarget(),r.addEventListener("select",$),r.addEventListener("selectstart",$),r.addEventListener("selectend",$),r.addEventListener("squeeze",$),r.addEventListener("squeezestart",$),r.addEventListener("squeezeend",$),r.addEventListener("end",K),r.addEventListener("inputsourceschange",ct),S.xrCompatible!==!0&&(yield t.makeXRCompatible()),U=e.getPixelRatio(),e.getSize(O),r.renderState.layers===void 0){let st={antialias:S.antialias,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:a};m=new XRWebGLLayer(r,t,st),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),M=new Js(m.framebufferWidth,m.framebufferHeight,{format:as,type:eo,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil})}else{let st=null,pt=null,ft=null;S.depth&&(ft=S.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,st=S.stencil?jc:zc,pt=S.stencil?Kc:Jl);let St={colorFormat:t.RGBA8,depthFormat:ft,scaleFactor:a};f=new XRWebGLBinding(r,t),g=f.createProjectionLayer(St),r.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),M=new Js(g.textureWidth,g.textureHeight,{format:as,type:eo,depthTexture:new Kp(g.textureWidth,g.textureHeight,pt,void 0,void 0,void 0,void 0,void 0,void 0,st),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0,resolveDepthBuffer:g.ignoreDepthValues===!1})}M.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=yield r.requestReferenceSpace(o),nt.setContext(r),nt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return y.getDepthTexture()};function ct(Z){for(let st=0;st<Z.removed.length;st++){let pt=Z.removed[st],ft=I.indexOf(pt);ft>=0&&(I[ft]=null,T[ft].disconnect(pt))}for(let st=0;st<Z.added.length;st++){let pt=Z.added[st],ft=I.indexOf(pt);if(ft===-1){for(let kt=0;kt<T.length;kt++)if(kt>=I.length){I.push(pt),ft=kt;break}else if(I[kt]===null){I[kt]=pt,ft=kt;break}if(ft===-1)break}let St=T[ft];St&&St.connect(pt)}}let ot=new zt,at=new zt;function Q(Z,st,pt){ot.setFromMatrixPosition(st.matrixWorld),at.setFromMatrixPosition(pt.matrixWorld);let ft=ot.distanceTo(at),St=st.projectionMatrix.elements,kt=pt.projectionMatrix.elements,Qt=St[14]/(St[10]-1),ie=St[14]/(St[10]+1),ue=(St[9]+1)/St[5],_e=(St[9]-1)/St[5],mt=(St[8]-1)/St[0],Yt=(kt[8]+1)/kt[0],ut=Qt*mt,Ae=Qt*Yt,se=ft/(-mt+Yt),ee=se*-mt;if(st.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Z.translateX(ee),Z.translateZ(se),Z.matrixWorld.compose(Z.position,Z.quaternion,Z.scale),Z.matrixWorldInverse.copy(Z.matrixWorld).invert(),St[10]===-1)Z.projectionMatrix.copy(st.projectionMatrix),Z.projectionMatrixInverse.copy(st.projectionMatrixInverse);else{let Zt=Qt+se,tt=ie+se,H=ut-ee,yt=Ae+(ft-ee),Ht=ue*ie/tt*Zt,Xt=_e*ie/tt*Zt;Z.projectionMatrix.makePerspective(H,yt,Ht,Xt,Zt,tt),Z.projectionMatrixInverse.copy(Z.projectionMatrix).invert()}}function xt(Z,st){st===null?Z.matrixWorld.copy(Z.matrix):Z.matrixWorld.multiplyMatrices(st.matrixWorld,Z.matrix),Z.matrixWorldInverse.copy(Z.matrixWorld).invert()}this.updateCamera=function(Z){if(r===null)return;let st=Z.near,pt=Z.far;y.texture!==null&&(y.depthNear>0&&(st=y.depthNear),y.depthFar>0&&(pt=y.depthFar)),F.near=B.near=N.near=st,F.far=B.far=N.far=pt,(P!==F.near||V!==F.far)&&(r.updateRenderState({depthNear:F.near,depthFar:F.far}),P=F.near,V=F.far),N.layers.mask=Z.layers.mask|2,B.layers.mask=Z.layers.mask|4,F.layers.mask=N.layers.mask|B.layers.mask;let ft=Z.parent,St=F.cameras;xt(F,ft);for(let kt=0;kt<St.length;kt++)xt(St[kt],ft);St.length===2?Q(F,N,B):F.projectionMatrix.copy(N.projectionMatrix),Mt(Z,F,ft)};function Mt(Z,st,pt){pt===null?Z.matrix.copy(st.matrixWorld):(Z.matrix.copy(pt.matrixWorld),Z.matrix.invert(),Z.matrix.multiply(st.matrixWorld)),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale),Z.updateMatrixWorld(!0),Z.projectionMatrix.copy(st.projectionMatrix),Z.projectionMatrixInverse.copy(st.projectionMatrixInverse),Z.isPerspectiveCamera&&(Z.fov=a_*2*Math.atan(1/Z.projectionMatrix.elements[5]),Z.zoom=1)}this.getCamera=function(){return F},this.getFoveation=function(){if(!(g===null&&m===null))return l},this.setFoveation=function(Z){l=Z,g!==null&&(g.fixedFoveation=Z),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=Z)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(F)};let qt=null;function z(Z,st){if(p=st.getViewerPose(u||s),x=st,p!==null){let pt=p.views;m!==null&&(e.setRenderTargetFramebuffer(M,m.framebuffer),e.setRenderTarget(M));let ft=!1;pt.length!==F.cameras.length&&(F.cameras.length=0,ft=!0);for(let kt=0;kt<pt.length;kt++){let Qt=pt[kt],ie=null;if(m!==null)ie=m.getViewport(Qt);else{let _e=f.getViewSubImage(g,Qt);ie=_e.viewport,kt===0&&(e.setRenderTargetTextures(M,_e.colorTexture,g.ignoreDepthValues?void 0:_e.depthStencilTexture),e.setRenderTarget(M))}let ue=R[kt];ue===void 0&&(ue=new Lr,ue.layers.enable(kt),ue.viewport=new nn,R[kt]=ue),ue.matrix.fromArray(Qt.transform.matrix),ue.matrix.decompose(ue.position,ue.quaternion,ue.scale),ue.projectionMatrix.fromArray(Qt.projectionMatrix),ue.projectionMatrixInverse.copy(ue.projectionMatrix).invert(),ue.viewport.set(ie.x,ie.y,ie.width,ie.height),kt===0&&(F.matrix.copy(ue.matrix),F.matrix.decompose(F.position,F.quaternion,F.scale)),ft===!0&&F.cameras.push(ue)}let St=r.enabledFeatures;if(St&&St.includes("depth-sensing")){let kt=f.getDepthInformation(pt[0]);kt&&kt.isValid&&kt.texture&&y.init(e,kt,r.renderState)}}for(let pt=0;pt<T.length;pt++){let ft=I[pt],St=T[pt];ft!==null&&St!==void 0&&St.update(ft,st,u||s)}qt&&qt(Z,st),st.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:st}),x=null}let nt=new jT;nt.setAnimationLoop(z),this.setAnimationLoop=function(Z){qt=Z},this.dispose=function(){}}},td=new ql,GX=new Bn;function qX(n,e){function t(S,b){S.matrixAutoUpdate===!0&&S.updateMatrix(),b.value.copy(S.matrix)}function i(S,b){b.color.getRGB(S.fogColor.value,V2(n)),b.isFog?(S.fogNear.value=b.near,S.fogFar.value=b.far):b.isFogExp2&&(S.fogDensity.value=b.density)}function r(S,b,M,T,I){b.isMeshBasicMaterial||b.isMeshLambertMaterial?a(S,b):b.isMeshToonMaterial?(a(S,b),f(S,b)):b.isMeshPhongMaterial?(a(S,b),p(S,b)):b.isMeshStandardMaterial?(a(S,b),g(S,b),b.isMeshPhysicalMaterial&&m(S,b,I)):b.isMeshMatcapMaterial?(a(S,b),x(S,b)):b.isMeshDepthMaterial?a(S,b):b.isMeshDistanceMaterial?(a(S,b),y(S,b)):b.isMeshNormalMaterial?a(S,b):b.isLineBasicMaterial?(s(S,b),b.isLineDashedMaterial&&o(S,b)):b.isPointsMaterial?l(S,b,M,T):b.isSpriteMaterial?u(S,b):b.isShadowMaterial?(S.color.value.copy(b.color),S.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function a(S,b){S.opacity.value=b.opacity,b.color&&S.diffuse.value.copy(b.color),b.emissive&&S.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(S.map.value=b.map,t(b.map,S.mapTransform)),b.alphaMap&&(S.alphaMap.value=b.alphaMap,t(b.alphaMap,S.alphaMapTransform)),b.bumpMap&&(S.bumpMap.value=b.bumpMap,t(b.bumpMap,S.bumpMapTransform),S.bumpScale.value=b.bumpScale,b.side===oa&&(S.bumpScale.value*=-1)),b.normalMap&&(S.normalMap.value=b.normalMap,t(b.normalMap,S.normalMapTransform),S.normalScale.value.copy(b.normalScale),b.side===oa&&S.normalScale.value.negate()),b.displacementMap&&(S.displacementMap.value=b.displacementMap,t(b.displacementMap,S.displacementMapTransform),S.displacementScale.value=b.displacementScale,S.displacementBias.value=b.displacementBias),b.emissiveMap&&(S.emissiveMap.value=b.emissiveMap,t(b.emissiveMap,S.emissiveMapTransform)),b.specularMap&&(S.specularMap.value=b.specularMap,t(b.specularMap,S.specularMapTransform)),b.alphaTest>0&&(S.alphaTest.value=b.alphaTest);let M=e.get(b),T=M.envMap,I=M.envMapRotation;T&&(S.envMap.value=T,td.copy(I),td.x*=-1,td.y*=-1,td.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(td.y*=-1,td.z*=-1),S.envMapRotation.value.setFromMatrix4(GX.makeRotationFromEuler(td)),S.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=b.reflectivity,S.ior.value=b.ior,S.refractionRatio.value=b.refractionRatio),b.lightMap&&(S.lightMap.value=b.lightMap,S.lightMapIntensity.value=b.lightMapIntensity,t(b.lightMap,S.lightMapTransform)),b.aoMap&&(S.aoMap.value=b.aoMap,S.aoMapIntensity.value=b.aoMapIntensity,t(b.aoMap,S.aoMapTransform))}function s(S,b){S.diffuse.value.copy(b.color),S.opacity.value=b.opacity,b.map&&(S.map.value=b.map,t(b.map,S.mapTransform))}function o(S,b){S.dashSize.value=b.dashSize,S.totalSize.value=b.dashSize+b.gapSize,S.scale.value=b.scale}function l(S,b,M,T){S.diffuse.value.copy(b.color),S.opacity.value=b.opacity,S.size.value=b.size*M,S.scale.value=T*.5,b.map&&(S.map.value=b.map,t(b.map,S.uvTransform)),b.alphaMap&&(S.alphaMap.value=b.alphaMap,t(b.alphaMap,S.alphaMapTransform)),b.alphaTest>0&&(S.alphaTest.value=b.alphaTest)}function u(S,b){S.diffuse.value.copy(b.color),S.opacity.value=b.opacity,S.rotation.value=b.rotation,b.map&&(S.map.value=b.map,t(b.map,S.mapTransform)),b.alphaMap&&(S.alphaMap.value=b.alphaMap,t(b.alphaMap,S.alphaMapTransform)),b.alphaTest>0&&(S.alphaTest.value=b.alphaTest)}function p(S,b){S.specular.value.copy(b.specular),S.shininess.value=Math.max(b.shininess,1e-4)}function f(S,b){b.gradientMap&&(S.gradientMap.value=b.gradientMap)}function g(S,b){S.metalness.value=b.metalness,b.metalnessMap&&(S.metalnessMap.value=b.metalnessMap,t(b.metalnessMap,S.metalnessMapTransform)),S.roughness.value=b.roughness,b.roughnessMap&&(S.roughnessMap.value=b.roughnessMap,t(b.roughnessMap,S.roughnessMapTransform)),b.envMap&&(S.envMapIntensity.value=b.envMapIntensity)}function m(S,b,M){S.ior.value=b.ior,b.sheen>0&&(S.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),S.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(S.sheenColorMap.value=b.sheenColorMap,t(b.sheenColorMap,S.sheenColorMapTransform)),b.sheenRoughnessMap&&(S.sheenRoughnessMap.value=b.sheenRoughnessMap,t(b.sheenRoughnessMap,S.sheenRoughnessMapTransform))),b.clearcoat>0&&(S.clearcoat.value=b.clearcoat,S.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(S.clearcoatMap.value=b.clearcoatMap,t(b.clearcoatMap,S.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,t(b.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(S.clearcoatNormalMap.value=b.clearcoatNormalMap,t(b.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===oa&&S.clearcoatNormalScale.value.negate())),b.dispersion>0&&(S.dispersion.value=b.dispersion),b.iridescence>0&&(S.iridescence.value=b.iridescence,S.iridescenceIOR.value=b.iridescenceIOR,S.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(S.iridescenceMap.value=b.iridescenceMap,t(b.iridescenceMap,S.iridescenceMapTransform)),b.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=b.iridescenceThicknessMap,t(b.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),b.transmission>0&&(S.transmission.value=b.transmission,S.transmissionSamplerMap.value=M.texture,S.transmissionSamplerSize.value.set(M.width,M.height),b.transmissionMap&&(S.transmissionMap.value=b.transmissionMap,t(b.transmissionMap,S.transmissionMapTransform)),S.thickness.value=b.thickness,b.thicknessMap&&(S.thicknessMap.value=b.thicknessMap,t(b.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=b.attenuationDistance,S.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(S.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(S.anisotropyMap.value=b.anisotropyMap,t(b.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=b.specularIntensity,S.specularColor.value.copy(b.specularColor),b.specularColorMap&&(S.specularColorMap.value=b.specularColorMap,t(b.specularColorMap,S.specularColorMapTransform)),b.specularIntensityMap&&(S.specularIntensityMap.value=b.specularIntensityMap,t(b.specularIntensityMap,S.specularIntensityMapTransform))}function x(S,b){b.matcap&&(S.matcap.value=b.matcap)}function y(S,b){let M=e.get(b).light;S.referencePosition.value.setFromMatrixPosition(M.matrixWorld),S.nearDistance.value=M.shadow.camera.near,S.farDistance.value=M.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function XX(n,e,t,i){let r={},a={},s=[],o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(M,T){let I=T.program;i.uniformBlockBinding(M,I)}function u(M,T){let I=r[M.id];I===void 0&&(x(M),I=p(M),r[M.id]=I,M.addEventListener("dispose",S));let O=T.program;i.updateUBOMapping(M,O);let U=e.render.frame;a[M.id]!==U&&(g(M),a[M.id]=U)}function p(M){let T=f();M.__bindingPointIndex=T;let I=n.createBuffer(),O=M.__size,U=M.usage;return n.bindBuffer(n.UNIFORM_BUFFER,I),n.bufferData(n.UNIFORM_BUFFER,O,U),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,T,I),I}function f(){for(let M=0;M<o;M++)if(s.indexOf(M)===-1)return s.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(M){let T=r[M.id],I=M.uniforms,O=M.__cache;n.bindBuffer(n.UNIFORM_BUFFER,T);for(let U=0,N=I.length;U<N;U++){let B=Array.isArray(I[U])?I[U]:[I[U]];for(let R=0,F=B.length;R<F;R++){let P=B[R];if(m(P,U,R,O)===!0){let V=P.__offset,$=Array.isArray(P.value)?P.value:[P.value],K=0;for(let ct=0;ct<$.length;ct++){let ot=$[ct],at=y(ot);typeof ot=="number"||typeof ot=="boolean"?(P.__data[0]=ot,n.bufferSubData(n.UNIFORM_BUFFER,V+K,P.__data)):ot.isMatrix3?(P.__data[0]=ot.elements[0],P.__data[1]=ot.elements[1],P.__data[2]=ot.elements[2],P.__data[3]=0,P.__data[4]=ot.elements[3],P.__data[5]=ot.elements[4],P.__data[6]=ot.elements[5],P.__data[7]=0,P.__data[8]=ot.elements[6],P.__data[9]=ot.elements[7],P.__data[10]=ot.elements[8],P.__data[11]=0):(ot.toArray(P.__data,K),K+=at.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,V,P.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(M,T,I,O){let U=M.value,N=T+"_"+I;if(O[N]===void 0)return typeof U=="number"||typeof U=="boolean"?O[N]=U:O[N]=U.clone(),!0;{let B=O[N];if(typeof U=="number"||typeof U=="boolean"){if(B!==U)return O[N]=U,!0}else if(B.equals(U)===!1)return B.copy(U),!0}return!1}function x(M){let T=M.uniforms,I=0,O=16;for(let N=0,B=T.length;N<B;N++){let R=Array.isArray(T[N])?T[N]:[T[N]];for(let F=0,P=R.length;F<P;F++){let V=R[F],$=Array.isArray(V.value)?V.value:[V.value];for(let K=0,ct=$.length;K<ct;K++){let ot=$[K],at=y(ot),Q=I%O,xt=Q%at.boundary,Mt=Q+xt;I+=xt,Mt!==0&&O-Mt<at.storage&&(I+=O-Mt),V.__data=new Float32Array(at.storage/Float32Array.BYTES_PER_ELEMENT),V.__offset=I,I+=at.storage}}}let U=I%O;return U>0&&(I+=O-U),M.__size=I,M.__cache={},this}function y(M){let T={boundary:0,storage:0};return typeof M=="number"||typeof M=="boolean"?(T.boundary=4,T.storage=4):M.isVector2?(T.boundary=8,T.storage=8):M.isVector3||M.isColor?(T.boundary=16,T.storage=12):M.isVector4?(T.boundary=16,T.storage=16):M.isMatrix3?(T.boundary=48,T.storage=48):M.isMatrix4?(T.boundary=64,T.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),T}function S(M){let T=M.target;T.removeEventListener("dispose",S);let I=s.indexOf(T.__bindingPointIndex);s.splice(I,1),n.deleteBuffer(r[T.id]),delete r[T.id],delete a[T.id]}function b(){for(let M in r)n.deleteBuffer(r[M]);s=[],r={},a={}}return{bind:l,update:u,dispose:b}}var _1=class{constructor(e={}){let{canvas:t=mT(),context:i=null,depth:r=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:g=!1}=e;this.isWebGLRenderer=!0;let m;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=i.getContextAttributes().alpha}else m=s;let x=new Uint32Array(4),y=new Int32Array(4),S=null,b=null,M=[],T=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Na,this.toneMapping=jo,this.toneMappingExposure=1;let I=this,O=!1,U=0,N=0,B=null,R=-1,F=null,P=new nn,V=new nn,$=null,K=new Vi(0),ct=0,ot=t.width,at=t.height,Q=1,xt=null,Mt=null,qt=new nn(0,0,ot,at),z=new nn(0,0,ot,at),nt=!1,Z=new Bu,st=!1,pt=!1,ft=new Bn,St=new Bn,kt=new zt,Qt=new nn,ie={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},ue=!1;function _e(){return B===null?Q:1}let mt=i;function Yt(et,Dt){return t.getContext(et,Dt)}try{let et={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:p,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${C_}`),t.addEventListener("webglcontextlost",ne,!1),t.addEventListener("webglcontextrestored",be,!1),t.addEventListener("webglcontextcreationerror",ae,!1),mt===null){let Dt="webgl2";if(mt=Yt(Dt,et),mt===null)throw Yt(Dt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(et){throw console.error("THREE.WebGLRenderer: "+et.message),et}let ut,Ae,se,ee,Zt,tt,H,yt,Ht,Xt,Wt,Se,ge,ce,Pe,Ut,Ce,we,je,ye,He,Ze,Ge,It;function ve(){ut=new dq(mt),ut.init(),Ze=new zX(mt,ut),Ae=new rq(mt,ut,e,Ze),se=new VX(mt,ut),Ae.reverseDepthBuffer&&g&&se.buffers.depth.setReversed(!0),ee=new pq(mt),Zt=new EX,tt=new UX(mt,ut,se,Zt,Ae,Ze,ee),H=new sq(I),yt=new cq(I),Ht=new bW(mt),Ge=new iq(mt,Ht),Xt=new uq(mt,Ht,ee,Ge),Wt=new mq(mt,Xt,Ht,ee),je=new fq(mt,Ae,tt),Ut=new aq(Zt),Se=new MX(I,H,yt,ut,Ae,Ge,Ut),ge=new qX(I,Zt),ce=new TX,Pe=new RX(ut),we=new eq(I,H,yt,se,Wt,m,l),Ce=new FX(I,Wt,Ae),It=new XX(mt,ee,Ae,se),ye=new nq(mt,ut,ee),He=new hq(mt,ut,ee),ee.programs=Se.programs,I.capabilities=Ae,I.extensions=ut,I.properties=Zt,I.renderLists=ce,I.shadowMap=Ce,I.state=se,I.info=ee}ve();let $t=new iS(I,mt);this.xr=$t,this.getContext=function(){return mt},this.getContextAttributes=function(){return mt.getContextAttributes()},this.forceContextLoss=function(){let et=ut.get("WEBGL_lose_context");et&&et.loseContext()},this.forceContextRestore=function(){let et=ut.get("WEBGL_lose_context");et&&et.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(et){et!==void 0&&(Q=et,this.setSize(ot,at,!1))},this.getSize=function(et){return et.set(ot,at)},this.setSize=function(et,Dt,jt=!0){if($t.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ot=et,at=Dt,t.width=Math.floor(et*Q),t.height=Math.floor(Dt*Q),jt===!0&&(t.style.width=et+"px",t.style.height=Dt+"px"),this.setViewport(0,0,et,Dt)},this.getDrawingBufferSize=function(et){return et.set(ot*Q,at*Q).floor()},this.setDrawingBufferSize=function(et,Dt,jt){ot=et,at=Dt,Q=jt,t.width=Math.floor(et*jt),t.height=Math.floor(Dt*jt),this.setViewport(0,0,et,Dt)},this.getCurrentViewport=function(et){return et.copy(P)},this.getViewport=function(et){return et.copy(qt)},this.setViewport=function(et,Dt,jt,Gt){et.isVector4?qt.set(et.x,et.y,et.z,et.w):qt.set(et,Dt,jt,Gt),se.viewport(P.copy(qt).multiplyScalar(Q).round())},this.getScissor=function(et){return et.copy(z)},this.setScissor=function(et,Dt,jt,Gt){et.isVector4?z.set(et.x,et.y,et.z,et.w):z.set(et,Dt,jt,Gt),se.scissor(V.copy(z).multiplyScalar(Q).round())},this.getScissorTest=function(){return nt},this.setScissorTest=function(et){se.setScissorTest(nt=et)},this.setOpaqueSort=function(et){xt=et},this.setTransparentSort=function(et){Mt=et},this.getClearColor=function(et){return et.copy(we.getClearColor())},this.setClearColor=function(){we.setClearColor.apply(we,arguments)},this.getClearAlpha=function(){return we.getClearAlpha()},this.setClearAlpha=function(){we.setClearAlpha.apply(we,arguments)},this.clear=function(et=!0,Dt=!0,jt=!0){let Gt=0;if(et){let Rt=!1;if(B!==null){let xe=B.texture.format;Rt=xe===U_||xe===V_||xe===B_}if(Rt){let xe=B.texture.type,Me=xe===eo||xe===Jl||xe===Vu||xe===Kc||xe===N_||xe===F_,Re=we.getClearColor(),Fe=we.getClearAlpha(),Je=Re.r,ai=Re.g,qe=Re.b;Me?(x[0]=Je,x[1]=ai,x[2]=qe,x[3]=Fe,mt.clearBufferuiv(mt.COLOR,0,x)):(y[0]=Je,y[1]=ai,y[2]=qe,y[3]=Fe,mt.clearBufferiv(mt.COLOR,0,y))}else Gt|=mt.COLOR_BUFFER_BIT}Dt&&(Gt|=mt.DEPTH_BUFFER_BIT),jt&&(Gt|=mt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),mt.clear(Gt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ne,!1),t.removeEventListener("webglcontextrestored",be,!1),t.removeEventListener("webglcontextcreationerror",ae,!1),we.dispose(),ce.dispose(),Pe.dispose(),Zt.dispose(),H.dispose(),yt.dispose(),Wt.dispose(),Ge.dispose(),It.dispose(),Se.dispose(),$t.dispose(),$t.removeEventListener("sessionstart",la),$t.removeEventListener("sessionend",wa),Un.stop()};function ne(et){et.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),O=!0}function be(){console.log("THREE.WebGLRenderer: Context Restored."),O=!1;let et=ee.autoReset,Dt=Ce.enabled,jt=Ce.autoUpdate,Gt=Ce.needsUpdate,Rt=Ce.type;ve(),ee.autoReset=et,Ce.enabled=Dt,Ce.autoUpdate=jt,Ce.needsUpdate=Gt,Ce.type=Rt}function ae(et){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",et.statusMessage)}function De(et){let Dt=et.target;Dt.removeEventListener("dispose",De),Xi(Dt)}function Xi(et){Ni(et),Zt.remove(et)}function Ni(et){let Dt=Zt.get(et).programs;Dt!==void 0&&(Dt.forEach(function(jt){Se.releaseProgram(jt)}),et.isShaderMaterial&&Se.releaseShaderCache(et))}this.renderBufferDirect=function(et,Dt,jt,Gt,Rt,xe){Dt===null&&(Dt=ie);let Me=Rt.isMesh&&Rt.matrixWorld.determinant()<0,Re=Ua(et,Dt,jt,Gt,Rt);se.setMaterial(Gt,Me);let Fe=jt.index,Je=1;if(Gt.wireframe===!0){if(Fe=Xt.getWireframeAttribute(jt),Fe===void 0)return;Je=2}let ai=jt.drawRange,qe=jt.attributes.position,Ei=ai.start*Je,Ai=(ai.start+ai.count)*Je;xe!==null&&(Ei=Math.max(Ei,xe.start*Je),Ai=Math.min(Ai,(xe.start+xe.count)*Je)),Fe!==null?(Ei=Math.max(Ei,0),Ai=Math.min(Ai,Fe.count)):qe!=null&&(Ei=Math.max(Ei,0),Ai=Math.min(Ai,qe.count));let Mn=Ai-Ei;if(Mn<0||Mn===1/0)return;Ge.setup(Rt,Gt,Re,jt,Fe);let di,Ti=ye;if(Fe!==null&&(di=Ht.get(Fe),Ti=He,Ti.setIndex(di)),Rt.isMesh)Gt.wireframe===!0?(se.setLineWidth(Gt.wireframeLinewidth*_e()),Ti.setMode(mt.LINES)):Ti.setMode(mt.TRIANGLES);else if(Rt.isLine){let Xe=Gt.linewidth;Xe===void 0&&(Xe=1),se.setLineWidth(Xe*_e()),Rt.isLineSegments?Ti.setMode(mt.LINES):Rt.isLineLoop?Ti.setMode(mt.LINE_LOOP):Ti.setMode(mt.LINE_STRIP)}else Rt.isPoints?Ti.setMode(mt.POINTS):Rt.isSprite&&Ti.setMode(mt.TRIANGLES);if(Rt.isBatchedMesh)if(Rt._multiDrawInstances!==null)Ti.renderMultiDrawInstances(Rt._multiDrawStarts,Rt._multiDrawCounts,Rt._multiDrawCount,Rt._multiDrawInstances);else if(ut.get("WEBGL_multi_draw"))Ti.renderMultiDraw(Rt._multiDrawStarts,Rt._multiDrawCounts,Rt._multiDrawCount);else{let Xe=Rt._multiDrawStarts,zn=Rt._multiDrawCounts,Di=Rt._multiDrawCount,Jr=Fe?Ht.get(Fe).bytesPerElement:1,xr=Zt.get(Gt).currentProgram.getUniforms();for(let ir=0;ir<Di;ir++)xr.setValue(mt,"_gl_DrawID",ir),Ti.render(Xe[ir]/Jr,zn[ir])}else if(Rt.isInstancedMesh)Ti.renderInstances(Ei,Mn,Rt.count);else if(jt.isInstancedBufferGeometry){let Xe=jt._maxInstanceCount!==void 0?jt._maxInstanceCount:1/0,zn=Math.min(jt.instanceCount,Xe);Ti.renderInstances(Ei,Mn,zn)}else Ti.render(Ei,Mn)};function bi(et,Dt,jt){et.transparent===!0&&et.side===to&&et.forceSinglePass===!1?(et.side=oa,et.needsUpdate=!0,Or(et,Dt,jt),et.side=Bo,et.needsUpdate=!0,Or(et,Dt,jt),et.side=to):Or(et,Dt,jt)}this.compile=function(et,Dt,jt=null){jt===null&&(jt=et),b=Pe.get(jt),b.init(Dt),T.push(b),jt.traverseVisible(function(Rt){Rt.isLight&&Rt.layers.test(Dt.layers)&&(b.pushLight(Rt),Rt.castShadow&&b.pushShadow(Rt))}),et!==jt&&et.traverseVisible(function(Rt){Rt.isLight&&Rt.layers.test(Dt.layers)&&(b.pushLight(Rt),Rt.castShadow&&b.pushShadow(Rt))}),b.setupLights();let Gt=new Set;return et.traverse(function(Rt){if(!(Rt.isMesh||Rt.isPoints||Rt.isLine||Rt.isSprite))return;let xe=Rt.material;if(xe)if(Array.isArray(xe))for(let Me=0;Me<xe.length;Me++){let Re=xe[Me];bi(Re,jt,Rt),Gt.add(Re)}else bi(xe,jt,Rt),Gt.add(xe)}),T.pop(),b=null,Gt},this.compileAsync=function(et,Dt,jt=null){let Gt=this.compile(et,Dt,jt);return new Promise(Rt=>{function xe(){if(Gt.forEach(function(Me){Zt.get(Me).currentProgram.isReady()&&Gt.delete(Me)}),Gt.size===0){Rt(et);return}setTimeout(xe,10)}ut.get("KHR_parallel_shader_compile")!==null?xe():setTimeout(xe,10)})};let Vn=null;function ze(et){Vn&&Vn(et)}function la(){Un.stop()}function wa(){Un.start()}let Un=new jT;Un.setAnimationLoop(ze),typeof self<"u"&&Un.setContext(self),this.setAnimationLoop=function(et){Vn=et,$t.setAnimationLoop(et),et===null?Un.stop():Un.start()},$t.addEventListener("sessionstart",la),$t.addEventListener("sessionend",wa),this.render=function(et,Dt){if(Dt!==void 0&&Dt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(O===!0)return;if(et.matrixWorldAutoUpdate===!0&&et.updateMatrixWorld(),Dt.parent===null&&Dt.matrixWorldAutoUpdate===!0&&Dt.updateMatrixWorld(),$t.enabled===!0&&$t.isPresenting===!0&&($t.cameraAutoUpdate===!0&&$t.updateCamera(Dt),Dt=$t.getCamera()),et.isScene===!0&&et.onBeforeRender(I,et,Dt,B),b=Pe.get(et,T.length),b.init(Dt),T.push(b),St.multiplyMatrices(Dt.projectionMatrix,Dt.matrixWorldInverse),Z.setFromProjectionMatrix(St),pt=this.localClippingEnabled,st=Ut.init(this.clippingPlanes,pt),S=ce.get(et,M.length),S.init(),M.push(S),$t.enabled===!0&&$t.isPresenting===!0){let xe=I.xr.getDepthSensingMesh();xe!==null&&In(xe,Dt,-1/0,I.sortObjects)}In(et,Dt,0,I.sortObjects),S.finish(),I.sortObjects===!0&&S.sort(xt,Mt),ue=$t.enabled===!1||$t.isPresenting===!1||$t.hasDepthSensing()===!1,ue&&we.addToRenderList(S,et),this.info.render.frame++,st===!0&&Ut.beginShadows();let jt=b.state.shadowsArray;Ce.render(jt,et,Dt),st===!0&&Ut.endShadows(),this.info.autoReset===!0&&this.info.reset();let Gt=S.opaque,Rt=S.transmissive;if(b.setupLights(),Dt.isArrayCamera){let xe=Dt.cameras;if(Rt.length>0)for(let Me=0,Re=xe.length;Me<Re;Me++){let Fe=xe[Me];Rr(Gt,Rt,et,Fe)}ue&&we.render(et);for(let Me=0,Re=xe.length;Me<Re;Me++){let Fe=xe[Me];Dn(S,et,Fe,Fe.viewport)}}else Rt.length>0&&Rr(Gt,Rt,et,Dt),ue&&we.render(et),Dn(S,et,Dt);B!==null&&(tt.updateMultisampleRenderTarget(B),tt.updateRenderTargetMipmap(B)),et.isScene===!0&&et.onAfterRender(I,et,Dt),Ge.resetDefaultState(),R=-1,F=null,T.pop(),T.length>0?(b=T[T.length-1],st===!0&&Ut.setGlobalState(I.clippingPlanes,b.state.camera)):b=null,M.pop(),M.length>0?S=M[M.length-1]:S=null};function In(et,Dt,jt,Gt){if(et.visible===!1)return;if(et.layers.test(Dt.layers)){if(et.isGroup)jt=et.renderOrder;else if(et.isLOD)et.autoUpdate===!0&&et.update(Dt);else if(et.isLight)b.pushLight(et),et.castShadow&&b.pushShadow(et);else if(et.isSprite){if(!et.frustumCulled||Z.intersectsSprite(et)){Gt&&Qt.setFromMatrixPosition(et.matrixWorld).applyMatrix4(St);let Me=Wt.update(et),Re=et.material;Re.visible&&S.push(et,Me,Re,jt,Qt.z,null)}}else if((et.isMesh||et.isLine||et.isPoints)&&(!et.frustumCulled||Z.intersectsObject(et))){let Me=Wt.update(et),Re=et.material;if(Gt&&(et.boundingSphere!==void 0?(et.boundingSphere===null&&et.computeBoundingSphere(),Qt.copy(et.boundingSphere.center)):(Me.boundingSphere===null&&Me.computeBoundingSphere(),Qt.copy(Me.boundingSphere.center)),Qt.applyMatrix4(et.matrixWorld).applyMatrix4(St)),Array.isArray(Re)){let Fe=Me.groups;for(let Je=0,ai=Fe.length;Je<ai;Je++){let qe=Fe[Je],Ei=Re[qe.materialIndex];Ei&&Ei.visible&&S.push(et,Me,Ei,jt,Qt.z,qe)}}else Re.visible&&S.push(et,Me,Re,jt,Qt.z,null)}}let xe=et.children;for(let Me=0,Re=xe.length;Me<Re;Me++)In(xe[Me],Dt,jt,Gt)}function Dn(et,Dt,jt,Gt){let Rt=et.opaque,xe=et.transmissive,Me=et.transparent;b.setupLightsView(jt),st===!0&&Ut.setGlobalState(I.clippingPlanes,jt),Gt&&se.viewport(P.copy(Gt)),Rt.length>0&&ss(Rt,Dt,jt),xe.length>0&&ss(xe,Dt,jt),Me.length>0&&ss(Me,Dt,jt),se.buffers.depth.setTest(!0),se.buffers.depth.setMask(!0),se.buffers.color.setMask(!0),se.setPolygonOffset(!1)}function Rr(et,Dt,jt,Gt){if((jt.isScene===!0?jt.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget[Gt.id]===void 0&&(b.state.transmissionRenderTarget[Gt.id]=new Js(1,1,{generateMipmaps:!0,type:ut.has("EXT_color_buffer_half_float")||ut.has("EXT_color_buffer_float")?Uu:eo,minFilter:Zl,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:zi.workingColorSpace}));let xe=b.state.transmissionRenderTarget[Gt.id],Me=Gt.viewport||P;xe.setSize(Me.z,Me.w);let Re=I.getRenderTarget();I.setRenderTarget(xe),I.getClearColor(K),ct=I.getClearAlpha(),ct<1&&I.setClearColor(16777215,.5),I.clear(),ue&&we.render(jt);let Fe=I.toneMapping;I.toneMapping=jo;let Je=Gt.viewport;if(Gt.viewport!==void 0&&(Gt.viewport=void 0),b.setupLightsView(Gt),st===!0&&Ut.setGlobalState(I.clippingPlanes,Gt),ss(et,jt,Gt),tt.updateMultisampleRenderTarget(xe),tt.updateRenderTargetMipmap(xe),ut.has("WEBGL_multisampled_render_to_texture")===!1){let ai=!1;for(let qe=0,Ei=Dt.length;qe<Ei;qe++){let Ai=Dt[qe],Mn=Ai.object,di=Ai.geometry,Ti=Ai.material,Xe=Ai.group;if(Ti.side===to&&Mn.layers.test(Gt.layers)){let zn=Ti.side;Ti.side=oa,Ti.needsUpdate=!0,Va(Mn,jt,Gt,di,Ti,Xe),Ti.side=zn,Ti.needsUpdate=!0,ai=!0}}ai===!0&&(tt.updateMultisampleRenderTarget(xe),tt.updateRenderTargetMipmap(xe))}I.setRenderTarget(Re),I.setClearColor(K,ct),Je!==void 0&&(Gt.viewport=Je),I.toneMapping=Fe}function ss(et,Dt,jt){let Gt=Dt.isScene===!0?Dt.overrideMaterial:null;for(let Rt=0,xe=et.length;Rt<xe;Rt++){let Me=et[Rt],Re=Me.object,Fe=Me.geometry,Je=Gt===null?Me.material:Gt,ai=Me.group;Re.layers.test(jt.layers)&&Va(Re,Dt,jt,Fe,Je,ai)}}function Va(et,Dt,jt,Gt,Rt,xe){et.onBeforeRender(I,Dt,jt,Gt,Rt,xe),et.modelViewMatrix.multiplyMatrices(jt.matrixWorldInverse,et.matrixWorld),et.normalMatrix.getNormalMatrix(et.modelViewMatrix),Rt.onBeforeRender(I,Dt,jt,Gt,et,xe),Rt.transparent===!0&&Rt.side===to&&Rt.forceSinglePass===!1?(Rt.side=oa,Rt.needsUpdate=!0,I.renderBufferDirect(jt,Dt,Gt,Rt,et,xe),Rt.side=Bo,Rt.needsUpdate=!0,I.renderBufferDirect(jt,Dt,Gt,Rt,et,xe),Rt.side=to):I.renderBufferDirect(jt,Dt,Gt,Rt,et,xe),et.onAfterRender(I,Dt,jt,Gt,Rt,xe)}function Or(et,Dt,jt){Dt.isScene!==!0&&(Dt=ie);let Gt=Zt.get(et),Rt=b.state.lights,xe=b.state.shadowsArray,Me=Rt.state.version,Re=Se.getParameters(et,Rt.state,xe,Dt,jt),Fe=Se.getProgramCacheKey(Re),Je=Gt.programs;Gt.environment=et.isMeshStandardMaterial?Dt.environment:null,Gt.fog=Dt.fog,Gt.envMap=(et.isMeshStandardMaterial?yt:H).get(et.envMap||Gt.environment),Gt.envMapRotation=Gt.environment!==null&&et.envMap===null?Dt.environmentRotation:et.envMapRotation,Je===void 0&&(et.addEventListener("dispose",De),Je=new Map,Gt.programs=Je);let ai=Je.get(Fe);if(ai!==void 0){if(Gt.currentProgram===ai&&Gt.lightsStateVersion===Me)return da(et,Re),ai}else Re.uniforms=Se.getUniforms(et),et.onBeforeCompile(Re,I),ai=Se.acquireProgram(Re,Fe),Je.set(Fe,ai),Gt.uniforms=Re.uniforms;let qe=Gt.uniforms;return(!et.isShaderMaterial&&!et.isRawShaderMaterial||et.clipping===!0)&&(qe.clippingPlanes=Ut.uniform),da(et,Re),Gt.needsLights=za(et),Gt.lightsStateVersion=Me,Gt.needsLights&&(qe.ambientLightColor.value=Rt.state.ambient,qe.lightProbe.value=Rt.state.probe,qe.directionalLights.value=Rt.state.directional,qe.directionalLightShadows.value=Rt.state.directionalShadow,qe.spotLights.value=Rt.state.spot,qe.spotLightShadows.value=Rt.state.spotShadow,qe.rectAreaLights.value=Rt.state.rectArea,qe.ltc_1.value=Rt.state.rectAreaLTC1,qe.ltc_2.value=Rt.state.rectAreaLTC2,qe.pointLights.value=Rt.state.point,qe.pointLightShadows.value=Rt.state.pointShadow,qe.hemisphereLights.value=Rt.state.hemi,qe.directionalShadowMap.value=Rt.state.directionalShadowMap,qe.directionalShadowMatrix.value=Rt.state.directionalShadowMatrix,qe.spotShadowMap.value=Rt.state.spotShadowMap,qe.spotLightMatrix.value=Rt.state.spotLightMatrix,qe.spotLightMap.value=Rt.state.spotLightMap,qe.pointShadowMap.value=Rt.state.pointShadowMap,qe.pointShadowMatrix.value=Rt.state.pointShadowMatrix),Gt.currentProgram=ai,Gt.uniformsList=null,ai}function ca(et){if(et.uniformsList===null){let Dt=et.currentProgram.getUniforms();et.uniformsList=Wu.seqWithValue(Dt.seq,et.uniforms)}return et.uniformsList}function da(et,Dt){let jt=Zt.get(et);jt.outputColorSpace=Dt.outputColorSpace,jt.batching=Dt.batching,jt.batchingColor=Dt.batchingColor,jt.instancing=Dt.instancing,jt.instancingColor=Dt.instancingColor,jt.instancingMorph=Dt.instancingMorph,jt.skinning=Dt.skinning,jt.morphTargets=Dt.morphTargets,jt.morphNormals=Dt.morphNormals,jt.morphColors=Dt.morphColors,jt.morphTargetsCount=Dt.morphTargetsCount,jt.numClippingPlanes=Dt.numClippingPlanes,jt.numIntersection=Dt.numClipIntersection,jt.vertexAlphas=Dt.vertexAlphas,jt.vertexTangents=Dt.vertexTangents,jt.toneMapping=Dt.toneMapping}function Ua(et,Dt,jt,Gt,Rt){Dt.isScene!==!0&&(Dt=ie),tt.resetTextureUnits();let xe=Dt.fog,Me=Gt.isMeshStandardMaterial?Dt.environment:null,Re=B===null?I.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:Gc,Fe=(Gt.isMeshStandardMaterial?yt:H).get(Gt.envMap||Me),Je=Gt.vertexColors===!0&&!!jt.attributes.color&&jt.attributes.color.itemSize===4,ai=!!jt.attributes.tangent&&(!!Gt.normalMap||Gt.anisotropy>0),qe=!!jt.morphAttributes.position,Ei=!!jt.morphAttributes.normal,Ai=!!jt.morphAttributes.color,Mn=jo;Gt.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(Mn=I.toneMapping);let di=jt.morphAttributes.position||jt.morphAttributes.normal||jt.morphAttributes.color,Ti=di!==void 0?di.length:0,Xe=Zt.get(Gt),zn=b.state.lights;if(st===!0&&(pt===!0||et!==F)){let rr=et===F&&Gt.id===R;Ut.setState(Gt,et,rr)}let Di=!1;Gt.version===Xe.__version?(Xe.needsLights&&Xe.lightsStateVersion!==zn.state.version||Xe.outputColorSpace!==Re||Rt.isBatchedMesh&&Xe.batching===!1||!Rt.isBatchedMesh&&Xe.batching===!0||Rt.isBatchedMesh&&Xe.batchingColor===!0&&Rt.colorTexture===null||Rt.isBatchedMesh&&Xe.batchingColor===!1&&Rt.colorTexture!==null||Rt.isInstancedMesh&&Xe.instancing===!1||!Rt.isInstancedMesh&&Xe.instancing===!0||Rt.isSkinnedMesh&&Xe.skinning===!1||!Rt.isSkinnedMesh&&Xe.skinning===!0||Rt.isInstancedMesh&&Xe.instancingColor===!0&&Rt.instanceColor===null||Rt.isInstancedMesh&&Xe.instancingColor===!1&&Rt.instanceColor!==null||Rt.isInstancedMesh&&Xe.instancingMorph===!0&&Rt.morphTexture===null||Rt.isInstancedMesh&&Xe.instancingMorph===!1&&Rt.morphTexture!==null||Xe.envMap!==Fe||Gt.fog===!0&&Xe.fog!==xe||Xe.numClippingPlanes!==void 0&&(Xe.numClippingPlanes!==Ut.numPlanes||Xe.numIntersection!==Ut.numIntersection)||Xe.vertexAlphas!==Je||Xe.vertexTangents!==ai||Xe.morphTargets!==qe||Xe.morphNormals!==Ei||Xe.morphColors!==Ai||Xe.toneMapping!==Mn||Xe.morphTargetsCount!==Ti)&&(Di=!0):(Di=!0,Xe.__version=Gt.version);let Jr=Xe.currentProgram;Di===!0&&(Jr=Or(Gt,Dt,Rt));let xr=!1,ir=!1,nr=!1,Yi=Jr.getUniforms(),Er=Xe.uniforms;if(se.useProgram(Jr.program)&&(xr=!0,ir=!0,nr=!0),Gt.id!==R&&(R=Gt.id,ir=!0),xr||F!==et){se.buffers.depth.getReversed()?(ft.copy(et.projectionMatrix),_T(ft),vT(ft),Yi.setValue(mt,"projectionMatrix",ft)):Yi.setValue(mt,"projectionMatrix",et.projectionMatrix),Yi.setValue(mt,"viewMatrix",et.matrixWorldInverse);let br=Yi.map.cameraPosition;br!==void 0&&br.setValue(mt,kt.setFromMatrixPosition(et.matrixWorld)),Ae.logarithmicDepthBuffer&&Yi.setValue(mt,"logDepthBufFC",2/(Math.log(et.far+1)/Math.LN2)),(Gt.isMeshPhongMaterial||Gt.isMeshToonMaterial||Gt.isMeshLambertMaterial||Gt.isMeshBasicMaterial||Gt.isMeshStandardMaterial||Gt.isShaderMaterial)&&Yi.setValue(mt,"isOrthographic",et.isOrthographicCamera===!0),F!==et&&(F=et,ir=!0,nr=!0)}if(Rt.isSkinnedMesh){Yi.setOptional(mt,Rt,"bindMatrix"),Yi.setOptional(mt,Rt,"bindMatrixInverse");let rr=Rt.skeleton;rr&&(rr.boneTexture===null&&rr.computeBoneTexture(),Yi.setValue(mt,"boneTexture",rr.boneTexture,tt))}Rt.isBatchedMesh&&(Yi.setOptional(mt,Rt,"batchingTexture"),Yi.setValue(mt,"batchingTexture",Rt._matricesTexture,tt),Yi.setOptional(mt,Rt,"batchingIdTexture"),Yi.setValue(mt,"batchingIdTexture",Rt._indirectTexture,tt),Yi.setOptional(mt,Rt,"batchingColorTexture"),Rt._colorsTexture!==null&&Yi.setValue(mt,"batchingColorTexture",Rt._colorsTexture,tt));let Nr=jt.morphAttributes;if((Nr.position!==void 0||Nr.normal!==void 0||Nr.color!==void 0)&&je.update(Rt,jt,Jr),(ir||Xe.receiveShadow!==Rt.receiveShadow)&&(Xe.receiveShadow=Rt.receiveShadow,Yi.setValue(mt,"receiveShadow",Rt.receiveShadow)),Gt.isMeshGouraudMaterial&&Gt.envMap!==null&&(Er.envMap.value=Fe,Er.flipEnvMap.value=Fe.isCubeTexture&&Fe.isRenderTargetTexture===!1?-1:1),Gt.isMeshStandardMaterial&&Gt.envMap===null&&Dt.environment!==null&&(Er.envMapIntensity.value=Dt.environmentIntensity),ir&&(Yi.setValue(mt,"toneMappingExposure",I.toneMappingExposure),Xe.needsLights&&ua(Er,nr),xe&&Gt.fog===!0&&ge.refreshFogUniforms(Er,xe),ge.refreshMaterialUniforms(Er,Gt,Q,at,b.state.transmissionRenderTarget[et.id]),Wu.upload(mt,ca(Xe),Er,tt)),Gt.isShaderMaterial&&Gt.uniformsNeedUpdate===!0&&(Wu.upload(mt,ca(Xe),Er,tt),Gt.uniformsNeedUpdate=!1),Gt.isSpriteMaterial&&Yi.setValue(mt,"center",Rt.center),Yi.setValue(mt,"modelViewMatrix",Rt.modelViewMatrix),Yi.setValue(mt,"normalMatrix",Rt.normalMatrix),Yi.setValue(mt,"modelMatrix",Rt.matrixWorld),Gt.isShaderMaterial||Gt.isRawShaderMaterial){let rr=Gt.uniformsGroups;for(let br=0,Xo=rr.length;br<Xo;br++){let os=rr[br];It.update(os,Jr),It.bind(os,Jr)}}return Jr}function ua(et,Dt){et.ambientLightColor.needsUpdate=Dt,et.lightProbe.needsUpdate=Dt,et.directionalLights.needsUpdate=Dt,et.directionalLightShadows.needsUpdate=Dt,et.pointLights.needsUpdate=Dt,et.pointLightShadows.needsUpdate=Dt,et.spotLights.needsUpdate=Dt,et.spotLightShadows.needsUpdate=Dt,et.rectAreaLights.needsUpdate=Dt,et.hemisphereLights.needsUpdate=Dt}function za(et){return et.isMeshLambertMaterial||et.isMeshToonMaterial||et.isMeshPhongMaterial||et.isMeshStandardMaterial||et.isShadowMaterial||et.isShaderMaterial&&et.lights===!0}this.getActiveCubeFace=function(){return U},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(et,Dt,jt){Zt.get(et.texture).__webglTexture=Dt,Zt.get(et.depthTexture).__webglTexture=jt;let Gt=Zt.get(et);Gt.__hasExternalTextures=!0,Gt.__autoAllocateDepthBuffer=jt===void 0,Gt.__autoAllocateDepthBuffer||ut.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Gt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(et,Dt){let jt=Zt.get(et);jt.__webglFramebuffer=Dt,jt.__useDefaultFramebuffer=Dt===void 0},this.setRenderTarget=function(et,Dt=0,jt=0){B=et,U=Dt,N=jt;let Gt=!0,Rt=null,xe=!1,Me=!1;if(et){let Fe=Zt.get(et);if(Fe.__useDefaultFramebuffer!==void 0)se.bindFramebuffer(mt.FRAMEBUFFER,null),Gt=!1;else if(Fe.__webglFramebuffer===void 0)tt.setupRenderTarget(et);else if(Fe.__hasExternalTextures)tt.rebindTextures(et,Zt.get(et.texture).__webglTexture,Zt.get(et.depthTexture).__webglTexture);else if(et.depthBuffer){let qe=et.depthTexture;if(Fe.__boundDepthTexture!==qe){if(qe!==null&&Zt.has(qe)&&(et.width!==qe.image.width||et.height!==qe.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");tt.setupDepthRenderbuffer(et)}}let Je=et.texture;(Je.isData3DTexture||Je.isDataArrayTexture||Je.isCompressedArrayTexture)&&(Me=!0);let ai=Zt.get(et).__webglFramebuffer;et.isWebGLCubeRenderTarget?(Array.isArray(ai[Dt])?Rt=ai[Dt][jt]:Rt=ai[Dt],xe=!0):et.samples>0&&tt.useMultisampledRTT(et)===!1?Rt=Zt.get(et).__webglMultisampledFramebuffer:Array.isArray(ai)?Rt=ai[jt]:Rt=ai,P.copy(et.viewport),V.copy(et.scissor),$=et.scissorTest}else P.copy(qt).multiplyScalar(Q).floor(),V.copy(z).multiplyScalar(Q).floor(),$=nt;if(se.bindFramebuffer(mt.FRAMEBUFFER,Rt)&&Gt&&se.drawBuffers(et,Rt),se.viewport(P),se.scissor(V),se.setScissorTest($),xe){let Fe=Zt.get(et.texture);mt.framebufferTexture2D(mt.FRAMEBUFFER,mt.COLOR_ATTACHMENT0,mt.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,Fe.__webglTexture,jt)}else if(Me){let Fe=Zt.get(et.texture),Je=Dt||0;mt.framebufferTextureLayer(mt.FRAMEBUFFER,mt.COLOR_ATTACHMENT0,Fe.__webglTexture,jt||0,Je)}R=-1},this.readRenderTargetPixels=function(et,Dt,jt,Gt,Rt,xe,Me){if(!(et&&et.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Re=Zt.get(et).__webglFramebuffer;if(et.isWebGLCubeRenderTarget&&Me!==void 0&&(Re=Re[Me]),Re){se.bindFramebuffer(mt.FRAMEBUFFER,Re);try{let Fe=et.texture,Je=Fe.format,ai=Fe.type;if(!Ae.textureFormatReadable(Je)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ae.textureTypeReadable(ai)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Dt>=0&&Dt<=et.width-Gt&&jt>=0&&jt<=et.height-Rt&&mt.readPixels(Dt,jt,Gt,Rt,Ze.convert(Je),Ze.convert(ai),xe)}finally{let Fe=B!==null?Zt.get(B).__webglFramebuffer:null;se.bindFramebuffer(mt.FRAMEBUFFER,Fe)}}},this.readRenderTargetPixelsAsync=function(et,Dt,jt,Gt,Rt,xe,Me){return Ne(this,null,function*(){if(!(et&&et.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Re=Zt.get(et).__webglFramebuffer;if(et.isWebGLCubeRenderTarget&&Me!==void 0&&(Re=Re[Me]),Re){let Fe=et.texture,Je=Fe.format,ai=Fe.type;if(!Ae.textureFormatReadable(Je))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ae.textureTypeReadable(ai))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Dt>=0&&Dt<=et.width-Gt&&jt>=0&&jt<=et.height-Rt){se.bindFramebuffer(mt.FRAMEBUFFER,Re);let qe=mt.createBuffer();mt.bindBuffer(mt.PIXEL_PACK_BUFFER,qe),mt.bufferData(mt.PIXEL_PACK_BUFFER,xe.byteLength,mt.STREAM_READ),mt.readPixels(Dt,jt,Gt,Rt,Ze.convert(Je),Ze.convert(ai),0);let Ei=B!==null?Zt.get(B).__webglFramebuffer:null;se.bindFramebuffer(mt.FRAMEBUFFER,Ei);let Ai=mt.fenceSync(mt.SYNC_GPU_COMMANDS_COMPLETE,0);return mt.flush(),yield gT(mt,Ai,4),mt.bindBuffer(mt.PIXEL_PACK_BUFFER,qe),mt.getBufferSubData(mt.PIXEL_PACK_BUFFER,0,xe),mt.deleteBuffer(qe),mt.deleteSync(Ai),xe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}})},this.copyFramebufferToTexture=function(et,Dt=null,jt=0){et.isTexture!==!0&&(Zc("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Dt=arguments[0]||null,et=arguments[1]);let Gt=Math.pow(2,-jt),Rt=Math.floor(et.image.width*Gt),xe=Math.floor(et.image.height*Gt),Me=Dt!==null?Dt.x:0,Re=Dt!==null?Dt.y:0;tt.setTexture2D(et,0),mt.copyTexSubImage2D(mt.TEXTURE_2D,jt,0,0,Me,Re,Rt,xe),se.unbindTexture()};let ro=mt.createFramebuffer(),qo=mt.createFramebuffer();this.copyTextureToTexture=function(et,Dt,jt=null,Gt=null,Rt=0,xe=null){et.isTexture!==!0&&(Zc("WebGLRenderer: copyTextureToTexture function signature has changed."),Gt=arguments[0]||null,et=arguments[1],Dt=arguments[2],xe=arguments[3]||0,jt=null),xe===null&&(Rt!==0?(Zc("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),xe=Rt,Rt=0):xe=0);let Me,Re,Fe,Je,ai,qe,Ei,Ai,Mn,di=et.isCompressedTexture?et.mipmaps[xe]:et.image;if(jt!==null)Me=jt.max.x-jt.min.x,Re=jt.max.y-jt.min.y,Fe=jt.isBox3?jt.max.z-jt.min.z:1,Je=jt.min.x,ai=jt.min.y,qe=jt.isBox3?jt.min.z:0;else{let Nr=Math.pow(2,-Rt);Me=Math.floor(di.width*Nr),Re=Math.floor(di.height*Nr),et.isDataArrayTexture?Fe=di.depth:et.isData3DTexture?Fe=Math.floor(di.depth*Nr):Fe=1,Je=0,ai=0,qe=0}Gt!==null?(Ei=Gt.x,Ai=Gt.y,Mn=Gt.z):(Ei=0,Ai=0,Mn=0);let Ti=Ze.convert(Dt.format),Xe=Ze.convert(Dt.type),zn;Dt.isData3DTexture?(tt.setTexture3D(Dt,0),zn=mt.TEXTURE_3D):Dt.isDataArrayTexture||Dt.isCompressedArrayTexture?(tt.setTexture2DArray(Dt,0),zn=mt.TEXTURE_2D_ARRAY):(tt.setTexture2D(Dt,0),zn=mt.TEXTURE_2D),mt.pixelStorei(mt.UNPACK_FLIP_Y_WEBGL,Dt.flipY),mt.pixelStorei(mt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Dt.premultiplyAlpha),mt.pixelStorei(mt.UNPACK_ALIGNMENT,Dt.unpackAlignment);let Di=mt.getParameter(mt.UNPACK_ROW_LENGTH),Jr=mt.getParameter(mt.UNPACK_IMAGE_HEIGHT),xr=mt.getParameter(mt.UNPACK_SKIP_PIXELS),ir=mt.getParameter(mt.UNPACK_SKIP_ROWS),nr=mt.getParameter(mt.UNPACK_SKIP_IMAGES);mt.pixelStorei(mt.UNPACK_ROW_LENGTH,di.width),mt.pixelStorei(mt.UNPACK_IMAGE_HEIGHT,di.height),mt.pixelStorei(mt.UNPACK_SKIP_PIXELS,Je),mt.pixelStorei(mt.UNPACK_SKIP_ROWS,ai),mt.pixelStorei(mt.UNPACK_SKIP_IMAGES,qe);let Yi=et.isDataArrayTexture||et.isData3DTexture,Er=Dt.isDataArrayTexture||Dt.isData3DTexture;if(et.isDepthTexture){let Nr=Zt.get(et),rr=Zt.get(Dt),br=Zt.get(Nr.__renderTarget),Xo=Zt.get(rr.__renderTarget);se.bindFramebuffer(mt.READ_FRAMEBUFFER,br.__webglFramebuffer),se.bindFramebuffer(mt.DRAW_FRAMEBUFFER,Xo.__webglFramebuffer);for(let os=0;os<Fe;os++)Yi&&(mt.framebufferTextureLayer(mt.READ_FRAMEBUFFER,mt.COLOR_ATTACHMENT0,Zt.get(et).__webglTexture,Rt,qe+os),mt.framebufferTextureLayer(mt.DRAW_FRAMEBUFFER,mt.COLOR_ATTACHMENT0,Zt.get(Dt).__webglTexture,xe,Mn+os)),mt.blitFramebuffer(Je,ai,Me,Re,Ei,Ai,Me,Re,mt.DEPTH_BUFFER_BIT,mt.NEAREST);se.bindFramebuffer(mt.READ_FRAMEBUFFER,null),se.bindFramebuffer(mt.DRAW_FRAMEBUFFER,null)}else if(Rt!==0||et.isRenderTargetTexture||Zt.has(et)){let Nr=Zt.get(et),rr=Zt.get(Dt);se.bindFramebuffer(mt.READ_FRAMEBUFFER,ro),se.bindFramebuffer(mt.DRAW_FRAMEBUFFER,qo);for(let br=0;br<Fe;br++)Yi?mt.framebufferTextureLayer(mt.READ_FRAMEBUFFER,mt.COLOR_ATTACHMENT0,Nr.__webglTexture,Rt,qe+br):mt.framebufferTexture2D(mt.READ_FRAMEBUFFER,mt.COLOR_ATTACHMENT0,mt.TEXTURE_2D,Nr.__webglTexture,Rt),Er?mt.framebufferTextureLayer(mt.DRAW_FRAMEBUFFER,mt.COLOR_ATTACHMENT0,rr.__webglTexture,xe,Mn+br):mt.framebufferTexture2D(mt.DRAW_FRAMEBUFFER,mt.COLOR_ATTACHMENT0,mt.TEXTURE_2D,rr.__webglTexture,xe),Rt!==0?mt.blitFramebuffer(Je,ai,Me,Re,Ei,Ai,Me,Re,mt.COLOR_BUFFER_BIT,mt.NEAREST):Er?mt.copyTexSubImage3D(zn,xe,Ei,Ai,Mn+br,Je,ai,Me,Re):mt.copyTexSubImage2D(zn,xe,Ei,Ai,Je,ai,Me,Re);se.bindFramebuffer(mt.READ_FRAMEBUFFER,null),se.bindFramebuffer(mt.DRAW_FRAMEBUFFER,null)}else Er?et.isDataTexture||et.isData3DTexture?mt.texSubImage3D(zn,xe,Ei,Ai,Mn,Me,Re,Fe,Ti,Xe,di.data):Dt.isCompressedArrayTexture?mt.compressedTexSubImage3D(zn,xe,Ei,Ai,Mn,Me,Re,Fe,Ti,di.data):mt.texSubImage3D(zn,xe,Ei,Ai,Mn,Me,Re,Fe,Ti,Xe,di):et.isDataTexture?mt.texSubImage2D(mt.TEXTURE_2D,xe,Ei,Ai,Me,Re,Ti,Xe,di.data):et.isCompressedTexture?mt.compressedTexSubImage2D(mt.TEXTURE_2D,xe,Ei,Ai,di.width,di.height,Ti,di.data):mt.texSubImage2D(mt.TEXTURE_2D,xe,Ei,Ai,Me,Re,Ti,Xe,di);mt.pixelStorei(mt.UNPACK_ROW_LENGTH,Di),mt.pixelStorei(mt.UNPACK_IMAGE_HEIGHT,Jr),mt.pixelStorei(mt.UNPACK_SKIP_PIXELS,xr),mt.pixelStorei(mt.UNPACK_SKIP_ROWS,ir),mt.pixelStorei(mt.UNPACK_SKIP_IMAGES,nr),xe===0&&Dt.generateMipmaps&&mt.generateMipmap(zn),se.unbindTexture()},this.copyTextureToTexture3D=function(et,Dt,jt=null,Gt=null,Rt=0){return et.isTexture!==!0&&(Zc("WebGLRenderer: copyTextureToTexture3D function signature has changed."),jt=arguments[0]||null,Gt=arguments[1]||null,et=arguments[2],Dt=arguments[3],Rt=arguments[4]||0),Zc('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(et,Dt,jt,Gt,Rt)},this.initRenderTarget=function(et){Zt.get(et).__webglFramebuffer===void 0&&tt.setupRenderTarget(et)},this.initTexture=function(et){et.isCubeTexture?tt.setTextureCube(et,0):et.isData3DTexture?tt.setTexture3D(et,0):et.isDataArrayTexture||et.isCompressedArrayTexture?tt.setTexture2DArray(et,0):tt.setTexture2D(et,0),se.unbindTexture()},this.resetState=function(){U=0,N=0,B=null,se.reset(),Ge.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Zs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorspace=zi._getDrawingBufferColorSpace(e),t.unpackColorSpace=zi._getUnpackColorSpace()}};var x1=class n{constructor(e){this.el=e}scene;camera;renderer;robot;ngOnInit(){this.initScene(),this.addRobot(),this.animate()}initScene(){let e=this.el.nativeElement.querySelector("#robotCanvas");this.scene=new $p,this.camera=new Lr(75,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.z=5,this.renderer=new _1({canvas:e,antialias:!0,alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight)}addRobot(){let e=new Yl(1,1,1),t=new Qp({color:65280}),i=new Kr(e,t),r=new Jp(.1,32,32),a=new qc({color:16777215}),s=new Kr(r,a),o=new Kr(r,a);s.position.set(-.3,.3,.6),o.position.set(.3,.3,.6),this.robot=new Ho,this.robot.add(i,s,o),this.scene.add(this.robot);let l=new ef(16777215,1,100);l.position.set(10,10,10),this.scene.add(l)}animate(){requestAnimationFrame(()=>this.animate()),this.robot.rotation.y+=.01,this.renderer.render(this.scene,this.camera)}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}onDocumentMouseMove(e){let t=e.clientX/window.innerWidth*2-1,i=-(e.clientY/window.innerHeight)*2+1;this.robot.rotation.x=i*.2,this.robot.rotation.y=t*.2}static \u0275fac=function(t){return new(t||n)(Vt(ia))};static \u0275cmp=Be({type:n,selectors:[["app-access-denied"]],hostBindings:function(t,i){t&1&&lt("resize",function(a){return i.onWindowResize(a)},!1,ZS)("mousemove",function(a){return i.onDocumentMouseMove(a)},!1,dl)},decls:9,vars:0,consts:[["id","container"],["id","message"],["width","50%","src","assets/images/access-denied.png","alt","",1,"logo-style"],["routerLink","/login"]],template:function(t,i){t&1&&(c(0,"div",0)(1,"div",1),Lt(2,"img",2),c(3,"h1"),h(4,"Access Denied"),d(),c(5,"p"),h(6,"Please login to access this page."),d(),c(7,"button",3),h(8,"Login"),d()()())},dependencies:[on],styles:["#container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background:linear-gradient(135deg,#1d1d1d,#3a3a3a);color:#fff;overflow:hidden}#message[_ngcontent-%COMP%]{text-align:center;z-index:10;position:relative}#message[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}#message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem}button[_ngcontent-%COMP%]{width:100%;margin-top:2%;padding:10px;border:none;border-radius:4px;background-color:#f48d3a;color:#fff;font-size:16px;cursor:pointer;transition:1s;font-family:Arial,Helvetica,sans-serif;font-weight:700}button[_ngcontent-%COMP%]:hover{background-color:#fff;color:#181818;border:#f48d3a 1px solid}"]})};var $X=n=>({"full-width":n}),KX=n=>({"active-module":n}),ZX=n=>["/add-sales-accounts","Token",n],JX=n=>["/add-sales-accounts","Agreement",n],QX=n=>["/add-sales-accounts","Registration",n];function tY(n,e){if(n&1&&(c(0,"option",16),h(1),d()),n&2){let t=e.$implicit;D("value",t),_(),A(t)}}function eY(n,e){if(n&1){let t=Nt();c(0,"li",17),lt("click",function(){let r=G(t).$implicit,a=k();return q(a.selectModule(r))}),h(1),d()}if(n&2){let t=e.$implicit,i=k();D("ngClass",te(2,KX,t===i.selectedModule)),_(),de(" ",t," ")}}function iY(n,e){if(n&1&&(c(0,"tr",26)(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td"),h(10),d(),c(11,"td",27),Lt(12,"i",28),d()()),n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),A(t.Sales_stage2||"Token Not Received"),_(),D("routerLink",te(6,ZX,t.Db_tracker_id))}}function nY(n,e){if(n&1&&(pe(0),rt(1,iY,13,8,"tr",25),fe()),n&2){let t=k(2);_(),D("ngForOf",t.get_token)}}function rY(n,e){n&1&&(c(0,"tr")(1,"td",29),h(2,"No Data Found"),d()())}function aY(n,e){if(n&1&&(c(0,"div",18)(1,"div",19)(2,"table",20)(3,"thead",21)(4,"tr")(5,"th",22),h(6,"Token"),d()(),c(7,"tr")(8,"th",23),h(9,"S.No"),d(),c(10,"th",23),h(11,"Name"),d(),c(12,"th",23),h(13,"Contact"),d(),c(14,"th",23),h(15,"Location"),d(),c(16,"th",23),h(17,"Token Status"),d(),c(18,"th",23),h(19,"Edit"),d()()(),c(20,"tbody"),rt(21,nY,2,1,"ng-container",24)(22,rY,3,0,"ng-template",null,0,Ie),d()()()()),n&2){let t=Qe(23),i=k();_(21),D("ngIf",i.get_token&&i.get_token.length>0)("ngIfElse",t)}}function sY(n,e){if(n&1&&(c(0,"tr",26)(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td"),h(10),d(),c(11,"td",27),Lt(12,"i",28),d()()),n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),A(t.Customer_stage1||"Agreement Not Completed"),_(),D("routerLink",te(6,JX,t.Db_tracker_id))}}function oY(n,e){if(n&1&&(pe(0),rt(1,sY,13,8,"tr",25),fe()),n&2){let t=k(2);_(),D("ngForOf",t.get_agreement)}}function lY(n,e){n&1&&(c(0,"tr")(1,"td",29),h(2,"No Data Found"),d()())}function cY(n,e){if(n&1&&(c(0,"div",18)(1,"div",19)(2,"table",20)(3,"thead",21)(4,"tr")(5,"th",22),h(6,"Agreement"),d()(),c(7,"tr")(8,"th",23),h(9,"S.No"),d(),c(10,"th",23),h(11,"Name"),d(),c(12,"th",23),h(13,"Contact"),d(),c(14,"th",23),h(15,"Location"),d(),c(16,"th",23),h(17,"Agreement Status"),d(),c(18,"th",23),h(19,"Edit"),d()()(),c(20,"tbody"),rt(21,oY,2,1,"ng-container",24)(22,lY,3,0,"ng-template",null,0,Ie),d()()()()),n&2){let t=Qe(23),i=k();_(21),D("ngIf",i.get_agreement&&i.get_agreement.length>0)("ngIfElse",t)}}function dY(n,e){if(n&1&&(c(0,"tr",26)(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td"),h(10),d(),c(11,"td",27),Lt(12,"i",28),d()()),n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.Db_name_client),_(2),A(t.Db_contact),_(2),A(t.Db_location),_(2),A(t.Customer_stage2||"Registration Not Completed"),_(),D("routerLink",te(6,QX,t.Db_tracker_id))}}function uY(n,e){if(n&1&&(pe(0),rt(1,dY,13,8,"tr",25),fe()),n&2){let t=k(2);_(),D("ngForOf",t.get_registration)}}function hY(n,e){n&1&&(c(0,"tr")(1,"td",29),h(2,"No Data Found"),d()())}function pY(n,e){if(n&1&&(c(0,"div",18)(1,"div",19)(2,"table",20)(3,"thead",21)(4,"tr")(5,"th",22),h(6,"Registration"),d()(),c(7,"tr")(8,"th",23),h(9,"S.No"),d(),c(10,"th",23),h(11,"Name"),d(),c(12,"th",23),h(13,"Contact"),d(),c(14,"th",23),h(15,"Location"),d(),c(16,"th",23),h(17,"Registration Status"),d(),c(18,"th",23),h(19,"Edit"),d()()(),c(20,"tbody"),rt(21,uY,2,1,"ng-container",24)(22,hY,3,0,"ng-template",null,0,Ie),d()()()()),n&2){let t=Qe(23),i=k();_(21),D("ngIf",i.get_registration&&i.get_registration.length>0)("ngIfElse",t)}}var b1=class n{constructor(e,t,i,r){this.route=e;this.apiService=t;this.http=i;this.userService=r}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}project_id=null;dbtracker_api_url="";ngOnInit(){this.dbtracker_api_url=this.apiService.sales_dbtracker_api(),this.route.params.subscribe(e=>{this.project_id=parseInt(e.projectid)}),this.project_name(),this.get_dbtracker_api(),this.retrive_data()}card_name="";retrive_data(){this.card_name=this.apiService.get_redirect_card(),this.selectedModule=this.card_name}project_names="";project_name(){this.project_id==1?this.project_names="ANBU AVENUE":this.project_id==2&&(this.project_names="RVS AVENUE")}selectedModule="";modules=["Token","Agreement","Registration"];selectModule(e){this.selectedModule=e}get_dbtracker_data;get_token;get_agreement;get_registration;get_dbtracker_api(){let e=new Date;this.http.get(this.dbtracker_api_url).subscribe(t=>{this.get_dbtracker_data=t.filter(i=>i.project_id===this.project_id),this.get_token=this.get_dbtracker_data.filter(i=>i.Sales_stage1==="Site Visit Completed"&&i.Sales_stage2!=="Token Received"),this.get_agreement=this.get_dbtracker_data.filter(i=>i.Sales_stage2==="Token Received"&&i.Customer_stage1!=="Agreement Completed"),this.get_registration=this.get_dbtracker_data.filter(i=>i.Customer_stage1==="Agreement Completed"&&i.Customer_stage2!=="Registration Completed")},t=>{console.error("Error fetching items",t)})}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-sales-view-accounts"]],decls:21,vars:11,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"bradcrumb-card"],[1,"container","my-4"],[1,"form-group","module-dropdown"],["for","moduleSelect"],["id","moduleSelect",1,"custom-input",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"module-card"],[1,"module-list"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","mt-5",4,"ngIf"],[3,"value"],[3,"click","ngClass"],[1,"mt-5"],["id","content-to-pdf",1,"table-responsive"],[1,"table","table-bordered","table-striped"],[1,"table-header"],["colspan","15",1,"main-header"],[1,"goal"],[4,"ngIf","ngIfElse"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[3,"routerLink"],[1,"fa","fa-edit"],["colspan","15",2,"text-align","center"]],template:function(t,i){t&1&&(c(0,"app-header",1),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"p"),h(6),d()(),c(7,"div",6)(8,"div",7)(9,"label",8),h(10,"Select Module"),d(),c(11,"select",9),vt("ngModelChange",function(a){return _t(i.selectedModule,a)||(i.selectedModule=a),a}),c(12,"option",10),h(13,"Select a Module"),d(),rt(14,tY,2,2,"option",11),d()(),c(15,"div",12)(16,"ul",13),rt(17,eY,2,4,"li",14),d()(),rt(18,aY,24,2,"div",15)(19,cY,24,2,"div",15)(20,pY,24,2,"div",15),d()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(9,$X,!i.isSidebarOpen)),_(4),A(i.project_names),_(5),gt("ngModel",i.selectedModule),_(3),D("ngForOf",i.modules),_(3),D("ngForOf",i.modules),_(),D("ngIf",i.selectedModule==="Token"),_(),D("ngIf",i.selectedModule==="Agreement"),_(),D("ngIf",i.selectedModule==="Registration"))},dependencies:[Ke,Hi,mi,on,xn,bn,cn,Ki,Gi,ei,ii],styles:['.goal[_ngcontent-%COMP%]{background-color:#d6a6be;text-align:center}.actual[_ngcontent-%COMP%]{background-color:#92c47d;text-align:center}.sts-all[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}.table-row[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.main-header[_ngcontent-%COMP%]{background-color:#741b48;color:#fff}i[_ngcontent-%COMP%]{cursor:pointer;color:gray;transition:.1s}i[_ngcontent-%COMP%]:hover{cursor:pointer;color:#492020}.comment-card[_ngcontent-%COMP%]{padding:1rem;background:#f9f9f9;border:1px solid #ddd;border-radius:8px;position:fixed;top:20%;left:50%;transform:translate(-50%,-50%);max-width:300px;box-shadow:0 2px 10px #0000001a;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translate(-50%,-60%)}to{opacity:1;transform:translate(-50%,-50%)}}.pop-card[_ngcontent-%COMP%]{position:absolute;background-color:#f0f4f8;padding:2%;border-radius:10px;top:45%;left:50%;transform:translate(-50%,-50%);box-shadow:0 4px 10px #0003}.pop-card-cmt[_ngcontent-%COMP%]{position:fixed;background-color:#f0f4f8;padding:2%;border-radius:10px;top:45%;left:50%;transform:translate(-50%,-50%);box-shadow:0 4px 10px #0003}.data-table-container[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:20px auto;border-radius:8px;background-color:#f9f9f9;overflow:hidden;box-shadow:0 2px 5px #0000001a}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:left}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#92c47d;color:#fff}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px;font-weight:700;text-transform:uppercase}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;color:#333;border-bottom:1px solid #ddd}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f4f4f4}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}@media (max-width: 600px){.data-table[_ngcontent-%COMP%]{font-size:14px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px}}.custmer-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-family:Arial,sans-serif;margin:20px 0;box-shadow:0 2px 5px #0000001a}.custmer-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.custmer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;font-size:14px;text-transform:uppercase;letter-spacing:1px}.custmer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}.custmer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.custmer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px;text-align:left;border-bottom:1px solid #ddd}.custmer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .custmer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.custmer-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover:after{content:"View Customer Comment";position:absolute;background-color:#333;color:#fff;padding:5px;font-size:12px;border-radius:5px;bottom:30px;left:50%;transform:translate(-50%);opacity:0;transition:opacity .3s}.custmer-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover:after{opacity:1}.green-text[_ngcontent-%COMP%]{color:green}.red-text[_ngcontent-%COMP%]{color:red}.custome-cmd[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:auto;max-height:200px;max-width:100%;box-sizing:border-box;margin-bottom:2%}.custome-cmd[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.custome-cmd[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.custome-cmd[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.custome-cmd[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.custome-cmd[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.custome-cmd[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .custome-cmd[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}table.table-bordered[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.today-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff!important;font-weight:lighter}table.table-bordered[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.past-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:red!important;color:#fff!important;font-weight:lighter}table.table-bordered[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.empty-date-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#ff0!important;color:#000!important;font-weight:400}table.table-bordered[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.upcoming-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:orange!important;color:#fff!important;font-weight:400}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{background-clip:padding-box}table.table-bordered[_ngcontent-%COMP%]{background-color:transparent!important}table.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:inherit!important}']})};var fY=n=>({"full-width":n});function mY(n,e){if(n&1){let t=Nt();c(0,"div",27),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.selectSite(r))}),h(1),d()}if(n&2){let t=e.$implicit;Zn("selected",t.selected),_(),de(" ",t.site_no," ")}}function gY(n,e){if(n&1){let t=Nt();c(0,"div",22)(1,"div",23)(2,"span",24),lt("click",function(){G(t);let r=k(2);return q(r.closePopup())}),h(3,"\xD7"),d(),c(4,"div",25),rt(5,mY,2,3,"div",26),d()()()}if(n&2){let t=k(2);_(5),D("ngForOf",t.site_details)}}function _Y(n,e){if(n&1){let t=Nt();c(0,"div",5)(1,"div",6)(2,"div",7)(3,"label"),h(4,"Token"),d()(),c(5,"div",8)(6,"div",9)(7,"div",10)(8,"label",11),h(9,"Token Status:"),d(),c(10,"select",12),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Sales_stage2,r)||(a.get_dbtaracker.Sales_stage2=r),q(r)}),c(11,"option",13),h(12,"Select Token Status"),d(),c(13,"option",14),h(14,"Token Received"),d(),c(15,"option",15),h(16,"Token Not Received"),d()()(),c(17,"div",10)(18,"label",11),h(19,"Site No:"),d(),c(20,"button",16),lt("click",function(){G(t);let r=k();return q(r.openPopup())}),h(21,"Select site"),d()(),rt(22,gY,6,1,"div",17),c(23,"div",10)(24,"label",11),h(25,"Token Received Date:"),d(),c(26,"input",18),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Sales_token_recived_date,r)||(a.get_dbtaracker.Sales_token_recived_date=r),q(r)}),d()()(),c(27,"div",19)(28,"div")(29,"label",11),h(30,"Remarks"),d(),Lt(31,"textarea",20),d()(),c(32,"button",21),lt("click",function(){G(t);let r=k();return q(r.update_token())}),h(33,"Update"),d(),c(34,"button",21),lt("click",function(){G(t);let r=k();return q(r.back_btn("Token"))}),h(35,"Back"),d()()()()}if(n&2){let t=k();_(10),gt("ngModel",t.get_dbtaracker.Sales_stage2),_(12),D("ngIf",t.isPopupVisible),_(4),gt("ngModel",t.get_dbtaracker.Sales_token_recived_date)}}function vY(n,e){if(n&1){let t=Nt();c(0,"div",5)(1,"div",6)(2,"div",7)(3,"label"),h(4,"Agreement"),d()(),c(5,"div",8)(6,"div",9)(7,"div",10)(8,"label",11),h(9,"Agreement Status:"),d(),c(10,"select",12),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Customer_stage1,r)||(a.get_dbtaracker.Customer_stage1=r),q(r)}),c(11,"option",13),h(12,"Select Token Status"),d(),c(13,"option",28),h(14,"Agreement Completed"),d(),c(15,"option",29),h(16,"Agreement Not Completed"),d()()(),c(17,"div",10)(18,"label",11),h(19,"Site No:"),d(),c(20,"input",30),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.booked_site,r)||(a.get_dbtaracker.booked_site=r),q(r)}),d()(),c(21,"div",10)(22,"label",11),h(23,"Agreement Date:"),d(),c(24,"input",18),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Customer_agreement_date,r)||(a.get_dbtaracker.Customer_agreement_date=r),q(r)}),d()()(),c(25,"div",19)(26,"div")(27,"label",11),h(28,"Remarks"),d(),Lt(29,"textarea",20),d()(),c(30,"button",21),lt("click",function(){G(t);let r=k();return q(r.update_agreement())}),h(31,"Update"),d(),c(32,"button",21),lt("click",function(){G(t);let r=k();return q(r.back_btn("Agreement"))}),h(33,"Back"),d()()()()}if(n&2){let t=k();_(10),gt("ngModel",t.get_dbtaracker.Customer_stage1),_(10),gt("ngModel",t.get_dbtaracker.booked_site),_(4),gt("ngModel",t.get_dbtaracker.Customer_agreement_date)}}function xY(n,e){if(n&1){let t=Nt();c(0,"div",5)(1,"div",6)(2,"div",7)(3,"label"),h(4,"Registration"),d()(),c(5,"div",8)(6,"div",9)(7,"div",10)(8,"label",11),h(9,"Registration Status:"),d(),c(10,"select",12),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Customer_stage2,r)||(a.get_dbtaracker.Customer_stage2=r),q(r)}),c(11,"option",13),h(12,"Select Token Status"),d(),c(13,"option",31),h(14,"Registration Completed"),d(),c(15,"option",32),h(16,"Registration Not Completed"),d()()(),c(17,"div",10)(18,"label",11),h(19,"Site No:"),d(),c(20,"input",30),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.booked_site,r)||(a.get_dbtaracker.booked_site=r),q(r)}),d()(),c(21,"div",10)(22,"label",11),h(23,"Registration Date:"),d(),c(24,"input",18),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.get_dbtaracker.Customer_registration_date,r)||(a.get_dbtaracker.Customer_registration_date=r),q(r)}),d()()(),c(25,"div",19)(26,"div")(27,"label",11),h(28,"Remarks"),d(),Lt(29,"textarea",20),d()(),c(30,"button",21),lt("click",function(){G(t);let r=k();return q(r.update_registration())}),h(31,"Update"),d(),c(32,"button",21),lt("click",function(){G(t);let r=k();return q(r.back_btn("Registration"))}),h(33,"Back"),d()()()()}if(n&2){let t=k();_(10),gt("ngModel",t.get_dbtaracker.Customer_stage2),_(10),gt("ngModel",t.get_dbtaracker.booked_site),_(4),gt("ngModel",t.get_dbtaracker.Customer_registration_date)}}var y1=class n{constructor(e,t,i,r,a){this.route=e;this.apiService=t;this.http=i;this.router=r;this.userService=a}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}current_task=null;sales_id=null;dbtracker_api_url="";site_details_url="";ngOnInit(){this.dbtracker_api_url=this.apiService.sales_dbtracker_api(),this.site_details_url=this.apiService.site_details_api(),this.route.params.subscribe(e=>{this.current_task=e.salescardname,this.sales_id=e.sales_id}),this.get_dbtaracker_data_api(),this.get_site_details()}get_dbtaracker;get_dbtaracker_data_api(){this.http.get(this.dbtracker_api_url+this.sales_id).subscribe(e=>{this.get_dbtaracker=e},e=>{console.error("Error fetching items",e)})}isPopupVisible=!1;openPopup(){this.isPopupVisible=!0}closePopup(){this.isPopupVisible=!1}site_details=[];available_site=[];selected_site;get_site_details(){this.http.get(this.site_details_url).subscribe(e=>{this.available_site=e.filter(t=>t.is_site_booked===!1),this.site_details=this.available_site.map(t=>Sn(Li({},t),{selected:!1}))},e=>{console.error("Error fetching items",e)})}selectSite(e){this.selected_site&&(this.selected_site.selected=!1),e.selected=!0,this.selected_site=e}successmgs=!1;update_token(){let e=this.dbtracker_api_url+this.sales_id,t=!0,i=!0;this.get_dbtaracker.Sales_stage2==="Token Received"&&(t=!1,i=!0);let r={Sales_stage2:this.get_dbtaracker.Sales_stage2,Sales_token_recived_date:this.get_dbtaracker.Sales_token_recived_date,booked_site:this.selected_site.site_no,booked_site_id:this.selected_site.site_id,is_sales_tracker:t,is_customer_tracker:i},a={headers:new ti({"Content-Type":"application/json"})};this.http.put(e,r,a).subscribe(s=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Token"),this.router.navigate(["/view-sales-accounts",this.get_dbtaracker.project_id])},1e3)},s=>{console.error("PUT request failed",s)}),this.update_booked_site()}update_booked_site(){let e=this.site_details_url+this.selected_site.site_id,t={is_site_booked:!0},i={headers:new ti({"Content-Type":"application/json"})};this.http.put(e,t,i).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Token"),this.router.navigate(["/view-sales-accounts",this.get_dbtaracker.project_id])},1e3)},r=>{console.error("PUT request failed",r)})}back_btn(e){this.apiService.set_redirect_card(e),this.router.navigate(["/view-sales-accounts",this.get_dbtaracker.project_id])}update_agreement(){let e=this.dbtracker_api_url+this.sales_id,t={Customer_stage1:this.get_dbtaracker.Customer_stage1,Customer_agreement_date:this.get_dbtaracker.Customer_agreement_date},i={headers:new ti({"Content-Type":"application/json"})};this.http.put(e,t,i).subscribe(r=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Agreement"),this.router.navigate(["/view-sales-accounts",this.get_dbtaracker.project_id])},1e3)},r=>{console.error("PUT request failed",r)})}update_registration(){let e=this.dbtracker_api_url+this.sales_id,t=!0,i=!0,r=!0;this.get_dbtaracker.Customer_stage2==="Registration Completed"&&(t=!1,i=!1,r=!0);let a={Customer_stage2:this.get_dbtaracker.Customer_stage2,Sales_token_recived_date:this.get_dbtaracker.Sales_token_recived_date,is_sales_tracker:t,is_customer_tracker:i,is_customer_database:r},s={headers:new ti({"Content-Type":"application/json"})};this.http.put(e,a,s).subscribe(o=>{this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Registration"),this.router.navigate(["/view-sales-accounts",this.get_dbtaracker.project_id])},1e3)},o=>{console.error("PUT request failed",o)})}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(sn),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-sales-details-accounts"]],decls:7,vars:7,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5","mob-res"],["class","container mt-5",4,"ngIf"],[1,"container","mt-5"],[1,"card","shadow"],[1,"heading-card"],[1,"card-body"],[1,"row"],[1,"col"],["for",""],["name","","id","",1,"custom-input",3,"ngModelChange","ngModel"],["value",""],["value","Token Received"],["value","Token Not Received"],[1,"custom-input",3,"click"],["class","popup-container",4,"ngIf"],["type","date",1,"custom-input",3,"ngModelChange","ngModel"],[1,"row","mb-3"],["name","","id","",1,"custom-input"],[1,"submit-btn",3,"click"],[1,"popup-container"],[1,"popup-card"],[1,"close-btn",3,"click"],[1,"site-container"],["class","site-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"site-item",3,"click"],["value","Agreement Completed"],["value","Agreement Not Completed"],["readonly","","type","text",1,"custom-input",3,"ngModelChange","ngModel"],["value","Registration Completed"],["value","Registration Not Completed"]],template:function(t,i){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3),rt(4,_Y,36,3,"div",4)(5,vY,34,3,"div",4)(6,xY,34,3,"div",4),d()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(5,fY,!i.isSidebarOpen)),_(2),D("ngIf",i.current_task==="Token"),_(),D("ngIf",i.current_task==="Agreement"),_(),D("ngIf",i.current_task==="Registration"))},dependencies:[Ke,Hi,mi,xn,bn,ln,cn,Ki,Gi,ei,ii],styles:[".site-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(50px,1fr));gap:15px;margin:20px 0}.site-item[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;align-items:center;justify-content:center;border:2px solid #ccc;border-radius:8px;font-size:16px;font-weight:700;background-color:#f9f9f9;cursor:pointer;transition:all .3s ease-in-out}.site-item[_ngcontent-%COMP%]:hover{border-color:#4caf50;background-color:#e8f5e9}.site-item.selected[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:2px solid #388e3c}.popup-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.popup-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;width:400px;padding:20px;box-shadow:0 5px 15px #0000004d;text-align:center;animation:_ngcontent-%COMP%_popupFadeIn .3s ease;position:relative}.close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;font-size:24px;font-weight:700;color:#333;cursor:pointer;transition:color .3s ease}.close-btn[_ngcontent-%COMP%]:hover{color:red}@keyframes _ngcontent-%COMP%_popupFadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}"]})};var bY=n=>({"full-width":n}),$T=n=>["/view-sales-accounts",n],S1=class n{constructor(e){this.userService=e}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}ngOnInit(){this.get_data()}user_details;get_data(){this.user_details=this.userService.getUserData(),this.user_details||(window.location.href="/access-denied")}project1=1;project2=2;static \u0275fac=function(t){return new(t||n)(Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-project-accounds"]],decls:25,vars:10,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container",2,"margin-top","10%"],[1,"row"],[1,"col","mt-5"],[1,"projects-card"],["src","/assets/images/Anbu-Avenue.jpg","alt","",1,"project-img"],[1,"projects-card-txt"],[2,"margin-bottom","5px"],[1,"banner-btn"],[3,"routerLink"],["src","/assets/images/RVS.jpg","alt","",1,"project-img"]],template:function(t,i){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),Lt(7,"img",7),c(8,"div",8)(9,"h4",9),h(10,"Komarapalayam"),d()(),c(11,"div",10)(12,"a",11),Lt(13,"span"),h(14,"Update Sales"),d()()()(),c(15,"div",5)(16,"div",6),Lt(17,"img",12),c(18,"div",8)(19,"h4",9),h(20,"Sangagiri"),d()(),c(21,"div",10)(22,"a",11),Lt(23,"span"),h(24,"Update Sales"),d()()()()()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(4,bY,!i.isSidebarOpen)),_(10),D("routerLink",te(6,$T,i.project1)),_(10),D("routerLink",te(8,$T,i.project2)))},dependencies:[Ke,on,ei,ii],styles:[".project-img[_ngcontent-%COMP%]{height:150px;width:100%}.projects-card[_ngcontent-%COMP%]{background-color:#5e0f80;border-radius:10px;display:flex;display:inline-block;padding:10px;color:#fff;cursor:pointer;transition:transform .3s ease,color .3s ease}.projects-card[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.projects-card-txt[_ngcontent-%COMP%]{text-align:center;border:1px solid white;padding:5px}.banner-btn[_ngcontent-%COMP%]{margin:10px auto 0;width:100%}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:inline-block;margin:0 10px;color:#fff;border:.5px solid #fff;position:relative;z-index:1;transition:color .5s;padding:10px;width:95%;text-align:center}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:0;height:100%;position:absolute;top:0;left:0;background:#fff;z-index:-1;transition:.5s}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{width:100%;color:#000}.banner-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#000}"]})};var yY=n=>({"full-width":n});function SY(n,e){if(n&1){let t=Nt();c(0,"div",12)(1,"div",13)(2,"span",14),lt("click",function(){G(t);let r=k();return q(r.closePopup())}),h(3,"\xD7"),d(),Lt(4,"br"),c(5,"p"),h(6),d()()()}if(n&2){let t=k();_(6),A(t.remarks)}}function wY(n,e){if(n&1){let t=Nt();c(0,"tr")(1,"td"),h(2),d(),c(3,"td",25),h(4),d(),c(5,"td",26),h(6),d(),c(7,"td"),h(8),d(),c(9,"td",27),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.remark_data(r.financial_remarks))}),Lt(10,"i",28),d()()}if(n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.goal_amount),_(2),A(t.actual_amount),_(2),A(t.diffrent_amount)}}function CY(n,e){if(n&1&&(pe(0),rt(1,wY,11,4,"tr",24),fe()),n&2){let t=k(2);_(),D("ngForOf",t.financial_goal_data)}}function MY(n,e){n&1&&(c(0,"tr")(1,"td",29),h(2,"No task found"),d()())}function EY(n,e){if(n&1){let t=Nt();c(0,"tr")(1,"td"),h(2),d(),c(3,"td",25),h(4),d(),c(5,"td",26),h(6),d(),c(7,"td"),h(8),d(),c(9,"td",27),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.remark_data(r.new_booking_remarks))}),Lt(10,"i",28),d()()}if(n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.new_booking_goal),_(2),A(t.new_booking_actual),_(2),A(t.new_booking_diffrence)}}function AY(n,e){if(n&1&&(pe(0),rt(1,EY,11,4,"tr",24),fe()),n&2){let t=k(2);_(),D("ngForOf",t.new_booking_data)}}function TY(n,e){n&1&&(c(0,"tr")(1,"td",29),h(2,"No task found"),d()())}function kY(n,e){if(n&1){let t=Nt();c(0,"tr")(1,"td"),h(2),d(),c(3,"td",25),h(4),d(),c(5,"td",26),h(6),d(),c(7,"td"),h(8),d(),c(9,"td",25),h(10),d(),c(11,"td",26),h(12),d(),c(13,"td"),h(14),d(),c(15,"td",27),lt("click",function(){let r=G(t).$implicit,a=k(3);return q(a.remark_data(r.functional_remark))}),Lt(16,"i",28),d()()}if(n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.agreement_goal),_(2),A(t.agreement_actual),_(2),A(t.agreement_diffrence),_(2),A(t.registration_goal),_(2),A(t.registration_actual),_(2),A(t.registration_diffrence)}}function IY(n,e){if(n&1&&(pe(0),rt(1,kY,17,7,"tr",24),fe()),n&2){let t=k(2);_(),D("ngForOf",t.functional_data)}}function DY(n,e){n&1&&(c(0,"tr")(1,"td",8),h(2,"No task found"),d()())}function PY(n,e){if(n&1&&(c(0,"tr")(1,"td"),h(2),d(),c(3,"td"),h(4),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d()()),n&2){let t=e.$implicit,i=e.index;_(2),A(i+1),_(2),A(t.site_no),_(2),A(t.is_site_booked?"Soled":"Not Soled"),_(2),A(t.is_site_booked?"Not Available":"Available")}}function LY(n,e){if(n&1&&(pe(0),rt(1,PY,9,4,"tr",24),c(2,"tr")(3,"td"),h(4,"Total"),d(),c(5,"td"),h(6),d(),c(7,"td"),h(8),d(),c(9,"td"),h(10),d()(),fe()),n&2){let t=k(2);_(),D("ngForOf",t.site_details),_(5),A(t.total_site),_(2),A(t.sold_site),_(2),A(t.available_site)}}function RY(n,e){n&1&&(c(0,"tr")(1,"td",30),h(2,"No task found"),d()())}function OY(n,e){if(n&1&&(c(0,"div")(1,"div",5)(2,"div",15)(3,"p"),h(4),d()()(),c(5,"div",16)(6,"table",17)(7,"thead")(8,"tr")(9,"th",18),h(10,"Financial Goal"),d()(),c(11,"tr",19)(12,"th",20),h(13,"S.No"),d(),c(14,"th",20),h(15,"Goal"),d(),c(16,"th",20),h(17,"Actual"),d(),c(18,"th",20),h(19,"Difference"),d(),c(20,"th",20),h(21,"Remark"),d()()(),c(22,"tbody"),rt(23,CY,2,1,"ng-container",21),d(),rt(24,MY,3,0,"ng-template",null,0,Ie),d()(),c(26,"div",16)(27,"table",17)(28,"thead")(29,"tr")(30,"th",18),h(31,"New Booking"),d()(),c(32,"tr",19)(33,"th",20),h(34,"S.No"),d(),c(35,"th",20),h(36,"Goal"),d(),c(37,"th",20),h(38,"Actual"),d(),c(39,"th",20),h(40,"Difference"),d(),c(41,"th",20),h(42,"Remark"),d()()(),c(43,"tbody"),rt(44,AY,2,1,"ng-container",21),d(),rt(45,TY,3,0,"ng-template",null,0,Ie),d()(),c(47,"div",16)(48,"table",17)(49,"thead")(50,"tr")(51,"th",22),h(52,"Functional Goal"),d()(),c(53,"tr"),Lt(54,"th",20),c(55,"th",23),h(56,"Agreement"),d(),c(57,"th",23),h(58,"Registration"),d(),Lt(59,"th",20),d(),c(60,"tr",19)(61,"th",20),h(62,"S.No"),d(),c(63,"th",20),h(64,"Goal"),d(),c(65,"th",20),h(66,"Actual"),d(),c(67,"th",20),h(68,"Difference"),d(),c(69,"th",20),h(70,"Goal"),d(),c(71,"th",20),h(72,"Actual"),d(),c(73,"th",20),h(74,"Difference"),d(),c(75,"th",20),h(76,"Remark"),d()()(),c(77,"tbody"),rt(78,IY,2,1,"ng-container",21),d(),rt(79,DY,3,0,"ng-template",null,0,Ie),d()(),c(81,"div",16)(82,"table",17)(83,"thead")(84,"tr")(85,"th",18),h(86,"Overall Status"),d()(),c(87,"tr",19)(88,"th",20),h(89,"S.No"),d(),c(90,"th",20),h(91,"Total Site"),d(),c(92,"th",20),h(93,"Sold"),d(),c(94,"th",20),h(95,"Available"),d()()(),c(96,"tbody"),pe(97),rt(98,LY,11,4,"ng-container",21),fe(),d(),rt(99,RY,3,0,"ng-template",null,0,Ie),d()()()),n&2){let t=Qe(25),i=k();_(4),A(i.project_name),_(19),D("ngIf",i.financial_goal_data&&i.financial_goal_data.length>0)("ngIfElse",t),_(21),D("ngIf",i.new_booking_data&&i.new_booking_data.length>0)("ngIfElse",t),_(34),D("ngIf",i.functional_data&&i.functional_data.length>0)("ngIfElse",t),_(20),D("ngIf",i.site_details&&i.site_details.length>0)("ngIfElse",t)}}var w1=class n{constructor(e,t,i){this.apiService=e;this.http=t;this.userService=i}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}sales_report_url="";site_details_url="";ngOnInit(){this.sales_report_url=this.apiService.sales_report_api(),this.site_details_url=this.apiService.site_details_api()}is_tablevisible=!1;project_name="";sales_report_data=[];financial_goal_data=[];new_booking_data=[];functional_data=[];get_sales_report(e){this.is_tablevisible=!0;let t=new Date;this.http.get(this.sales_report_url).subscribe(i=>{this.sales_report_data=i.filter(r=>r.project_id===e),this.financial_goal_data=this.sales_report_data.filter(r=>r.goal_amount!==null&&r.goal_amount!==void 0&&r.actual_amount!==null&&r.actual_amount!==void 0&&r.diffrent_amount!==null&&r.diffrent_amount!==void 0&&r.financial_remarks!==null&&r.financial_remarks!==void 0).map(r=>({goal_amount:r.goal_amount,actual_amount:r.actual_amount,diffrent_amount:r.diffrent_amount,financial_remarks:r.financial_remarks})),this.new_booking_data=this.sales_report_data.filter(r=>r.new_booking_goal!==null&&r.new_booking_goal!==void 0&&r.new_booking_actual!==null&&r.new_booking_actual!==void 0&&r.new_booking_diffrence!==null&&r.new_booking_diffrence!==void 0&&r.new_booking_remarks!==null&&r.new_booking_remarks!==void 0).map(r=>({new_booking_goal:r.new_booking_goal,new_booking_actual:r.new_booking_actual,new_booking_diffrence:r.new_booking_diffrence,new_booking_remarks:r.new_booking_remarks})),this.functional_data=this.sales_report_data.filter(r=>r.agreement_goal!==null&&r.agreement_goal!==void 0&&r.agreement_actual!==null&&r.agreement_actual!==void 0&&r.agreement_diffrence!==null&&r.agreement_diffrence!==void 0&&r.registration_goal!==null&&r.registration_goal!==void 0&&r.registration_actual!==null&&r.registration_actual!==void 0&&r.registration_diffrence!==null&&r.registration_diffrence!==void 0&&r.functional_remark!==null&&r.functional_remark!==void 0).map(r=>({agreement_goal:r.agreement_goal,agreement_actual:r.agreement_actual,agreement_diffrence:r.agreement_diffrence,registration_goal:r.registration_goal,registration_actual:r.registration_actual,registration_diffrence:r.registration_diffrence,functional_remark:r.functional_remark})),console.log(this.sales_report_data)},i=>{console.error("Error fetching items",i)}),e==1?this.project_name="Anbu Avenue":e==2&&(this.project_name="RVS Avenue"),this.get_site_details(e)}is_popup=!1;remarks="";remark_data(e){this.remarks=e,this.is_popup=!0}closePopup(){this.is_popup=!1}total_site;sold_site;available_site;site_details=[];get_site_details(e){this.http.get(this.site_details_url).subscribe(t=>{this.site_details=t.filter(i=>i.Project_id==e),this.total_site=this.site_details.length,this.sold_site=this.site_details.filter(i=>i.is_site_booked==!0).length,this.available_site=this.site_details.filter(i=>i.is_site_booked==!1).length,console.log(this.site_details,"Site details")},t=>{console.error("Error fetching items",t)})}static \u0275fac=function(t){return new(t||n)(Vt(_i),Vt(yi),Vt(oi))};static \u0275cmp=Be({type:n,selectors:[["app-sales-report"]],decls:15,vars:6,consts:[["noData",""],[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"mt-5"],[1,"row"],[1,"col","project-card",3,"click"],[2,"text-align","center"],[1,"col","project-card",2,"margin-left","15px",3,"click"],["class","popup-container",4,"ngIf"],[4,"ngIf"],[1,"popup-container"],[1,"popup-card"],[1,"close-btn",3,"click"],[1,"bradcrumb-card"],[1,"table-responsive"],[1,"table","table-responsive","table-bordered","content-table"],["colspan","7",1,"main-header"],[1,"header-row"],[1,"headers-title"],[4,"ngIf","ngIfElse"],["colspan","8",1,"main-header"],["colspan","3",1,"headers-title"],[4,"ngFor","ngForOf"],[1,"goal-color"],[1,"actual-color"],[3,"click"],[1,"fas","fa-eye"],["colspan","5",2,"text-align","center"],["colspan","8",2,"text-align","center"]],template:function(t,i){t&1&&(c(0,"app-header",1),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",2),c(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",5)(6,"div",6)(7,"div",7),lt("click",function(){return i.get_sales_report(1)}),c(8,"h6",8),h(9,"Anbu Avenue"),d()(),c(10,"div",9),lt("click",function(){return i.get_sales_report(2)}),c(11,"h6",8),h(12,"RVS Avenue"),d()()()(),rt(13,SY,7,1,"div",10)(14,OY,101,9,"div",11),d()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(4,yY,!i.isSidebarOpen)),_(11),D("ngIf",i.is_popup),_(),D("ngIf",i.is_tablevisible))},dependencies:[Ke,Hi,mi,ei,ii],styles:[".project-card[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:10px;background:linear-gradient(135deg,indigo,#9370db);box-shadow:0 4px 6px #0000001a,0 1px 3px #00000014;transition:transform .3s ease,box-shadow .3s ease;padding:20px;overflow:hidden;color:#fff}.project-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 15px #0003,0 4px 6px #0000001a;cursor:pointer;background:linear-gradient(135deg,#9370db,indigo)}.goal[_ngcontent-%COMP%]{background-color:#d6a6be;text-align:center}.actual[_ngcontent-%COMP%]{background-color:#92c47d;text-align:center}.sts-all[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{text-align:center;transition:all .3s ease}tr[_ngcontent-%COMP%]{text-align:center}.main-header[_ngcontent-%COMP%]{background-color:#741b48;color:#fff}.table-size[_ngcontent-%COMP%]{width:105%}.meeting-header[_ngcontent-%COMP%]{background-color:#5b3283;color:#fff;font-size:18px;padding:5px;margin-top:5%;text-align:center}.content-table[_ngcontent-%COMP%]{margin:20px 0;font-size:16px;text-align:center}.goal-header[_ngcontent-%COMP%], .actual-header[_ngcontent-%COMP%]{color:#000;font-weight:700}.goal-header[_ngcontent-%COMP%]{background-color:#d7a0b1}.actual-header[_ngcontent-%COMP%]{background-color:#a3d5a6}.goal-color[_ngcontent-%COMP%]{background-color:#d6a6be}.actual-color[_ngcontent-%COMP%]{background-color:#92c47d}.vertical-center[_ngcontent-%COMP%], .table-custom[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}.bg-light-pink[_ngcontent-%COMP%]{background-color:#e7c4c4}.bg-light-green[_ngcontent-%COMP%]{background-color:#98d98e}.headers-clr[_ngcontent-%COMP%]{background-color:#b9f1fe}.headers-title[_ngcontent-%COMP%]{background-color:#ffefe5}.popup-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.popup-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:20px;box-shadow:0 5px 15px #0000004d;text-align:center;animation:_ngcontent-%COMP%_popupFadeIn .3s ease;position:relative}.close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;font-size:24px;font-weight:700;color:#333;cursor:pointer;transition:color .3s ease}.close-btn[_ngcontent-%COMP%]:hover{color:red}@keyframes _ngcontent-%COMP%_popupFadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}"]})};var NY=n=>({"full-width":n});function FY(n,e){if(n&1){let t=Nt();c(0,"div",5)(1,"div",6)(2,"strong"),h(3,"Success!"),d(),h(4," Updated Successfully. "),c(5,"button",7),lt("click",function(){G(t);let r=k();return q(r.successmgs=!1)}),h(6,"\xD7"),d()()()}}function BY(n,e){if(n&1&&(c(0,"option",37),h(1),d()),n&2){let t=e.$implicit;D("ngValue",t),_(),de(" ",t.department_name,"")}}function VY(n,e){n&1&&(c(0,"option",38),h(1,"No designation found "),d())}function UY(n,e){if(n&1&&(c(0,"option",37),h(1),d()),n&2){let t=e.$implicit;D("ngValue",t),_(),A(t.designation_name)}}function zY(n,e){if(n&1){let t=Nt();c(0,"div",8)(1,"div",9)(2,"div",10)(3,"label"),h(4,"Create Users"),d()(),c(5,"div",11)(6,"div",12)(7,"div",13)(8,"label"),h(9,"First Name:"),d(),c(10,"input",14),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.User_first_name,r)||(a.User_first_name=r),q(r)}),d()(),c(11,"div",13)(12,"label"),h(13,"Last Name:"),d(),c(14,"input",15),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.User_Last_name,r)||(a.User_Last_name=r),q(r)}),d()()(),c(15,"div",12)(16,"div",13)(17,"label"),h(18,"Gender"),d(),c(19,"select",16),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.User_gender,r)||(a.User_gender=r),q(r)}),c(20,"option"),h(21,"Select Gender"),d(),c(22,"option",17),h(23,"Male"),d(),c(24,"option",18),h(25,"Female"),d(),c(26,"option",19),h(27,"Others"),d()()(),c(28,"div",13)(29,"label"),h(30,"ID:"),d(),c(31,"input",20),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.User_ID_Card_no,r)||(a.User_ID_Card_no=r),q(r)}),d()()(),c(32,"div",12)(33,"div",13)(34,"label"),h(35,"Email ID:"),d(),c(36,"input",21),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.User_email_id,r)||(a.User_email_id=r),q(r)}),d()(),c(37,"div",13)(38,"label"),h(39,"Password:"),d(),c(40,"input",22),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.User_password,r)||(a.User_password=r),q(r)}),d()()(),c(41,"div",12)(42,"div",13)(43,"label"),h(44,"Mobile Number:"),d(),c(45,"input",23),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.User_mobile_no,r)||(a.User_mobile_no=r),q(r)}),d()(),c(46,"div",13)(47,"label"),h(48,"DOB:"),d(),c(49,"input",24),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.User_dob,r)||(a.User_dob=r),q(r)}),d()()(),c(50,"div",12)(51,"div",13)(52,"label"),h(53,"Department:"),d(),c(54,"select",25),lt("change",function(){G(t);let r=k();return q(r.get_designation_api())}),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.selected_department,r)||(a.selected_department=r),q(r)}),c(55,"option",26),h(56,"Select Department"),d(),rt(57,BY,2,2,"option",27),d()(),c(58,"div",13)(59,"label"),h(60,"Designation:"),d(),c(61,"select",16),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.selected_designation,r)||(a.selected_designation=r),q(r)}),c(62,"option"),h(63,"Select Designation"),d(),rt(64,VY,2,0,"option",28)(65,UY,2,2,"option",27),d()()(),c(66,"div",12)(67,"div",13)(68,"label"),h(69,"Active User:"),d(),c(70,"select",29),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.User_is_active,r)||(a.User_is_active=r),q(r)}),c(71,"option",30),h(72,"Select"),d(),c(73,"option",31),h(74,"Yes"),d(),c(75,"option",32),h(76,"No"),d()()(),c(77,"div",13)(78,"label",33),h(79,"Profile Image:"),d(),Lt(80,"br"),c(81,"input",34),lt("change",function(r){G(t);let a=k();return q(a.onFileSelected(r))}),d()(),c(82,"div",13)(83,"label",33),h(84,"Upload R & R:"),d(),Lt(85,"br"),c(86,"input",34),lt("change",function(r){G(t);let a=k();return q(a.onFileSelected_pdf(r))}),d()()(),c(87,"button",35),lt("click",function(){G(t);let r=k();return q(r.create_user())}),h(88,"Create"),d(),c(89,"button",36),lt("click",function(){G(t);let r=k();return q(r.clancel_btn())}),h(90,"Cancel"),d()()()()}if(n&2){let t=k();_(10),gt("ngModel",t.User_first_name),_(4),gt("ngModel",t.User_Last_name),_(5),gt("ngModel",t.User_gender),_(12),gt("ngModel",t.User_ID_Card_no),_(5),gt("ngModel",t.User_email_id),_(4),gt("ngModel",t.User_password),_(5),gt("ngModel",t.User_mobile_no),_(4),gt("ngModel",t.User_dob),_(5),gt("ngModel",t.selected_department),_(3),D("ngForOf",t.get_department_data),_(4),gt("ngModel",t.selected_designation),_(3),D("ngIf",!(t.get_designation_data!=null&&t.get_designation_data.length)),_(),D("ngForOf",t.get_designation_data),_(5),gt("ngModel",t.User_is_active)}}function HY(n,e){if(n&1&&(c(0,"option",37),h(1),d()),n&2){let t=e.$implicit;D("ngValue",t),_(),de("",t.department_name," ")}}function WY(n,e){if(n&1){let t=Nt();c(0,"div",8)(1,"div",9)(2,"div",10)(3,"label"),h(4,"Manage Department"),d()(),c(5,"div",11)(6,"div",12)(7,"div",13)(8,"label"),h(9,"Department Name:"),d(),c(10,"input",39),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.department_name,r)||(a.department_name=r),q(r)}),d()()(),c(11,"button",35),lt("click",function(){G(t);let r=k();return q(r.create_department())}),h(12,"Add"),d(),c(13,"button",36),lt("click",function(){G(t);let r=k();return q(r.clancel_btn())}),h(14,"Cancel"),d()()(),c(15,"div",9)(16,"div",10)(17,"label"),h(18,"Manage Designation"),d()(),c(19,"div",11)(20,"div",12)(21,"div",13)(22,"label"),h(23,"Select Department"),d(),c(24,"select",16),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.selected_department,r)||(a.selected_department=r),q(r)}),c(25,"option",40),h(26,"Select Department"),d(),rt(27,HY,2,2,"option",27),d()(),c(28,"div",13)(29,"label"),h(30,"Last Name:"),d(),c(31,"input",15),vt("ngModelChange",function(r){G(t);let a=k();return _t(a.designation_name,r)||(a.designation_name=r),q(r)}),d()()(),c(32,"button",35),lt("click",function(){G(t);let r=k();return q(r.create_designation())}),h(33,"Add"),d(),c(34,"button",36),lt("click",function(){G(t);let r=k();return q(r.clancel_btn())}),h(35,"Cancel"),d()()()()}if(n&2){let t=k();_(10),gt("ngModel",t.department_name),_(14),gt("ngModel",t.selected_department),_(3),D("ngForOf",t.get_department_data),_(4),gt("ngModel",t.designation_name)}}var C1=class n{constructor(e,t,i,r){this.route=e;this.apiService=t;this.http=i;this.router=r}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}task_name="";ngOnInit(){this.apifromservice(),this.get_department_api(),this.route.params.subscribe(e=>{this.task_name=e.TaskName})}create_user_api_url="";email_sender_api_url="";manage_department_url="";manage_designation_url="";apifromservice(){this.create_user_api_url=this.apiService.user_management_api(),this.email_sender_api_url=this.apiService.send_email_api(),this.manage_department_url=this.apiService.manage_department(),this.manage_designation_url=this.apiService.manage_designation()}department_name="";create_department(){let e=this.manage_department_url,t={department_name:this.department_name},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Marketing Calender"),this.router.navigate(["/view-users-details"])},1e3)},r=>{console.log("Post request failed",r)}),this.get_department_api()}get_department_data=[];get_department_api(){this.http.get(this.apiService.manage_department()).subscribe(e=>{this.get_department_data=e},e=>{console.error("Error fetching items",e)})}selected_department;designation_name="";create_designation(){let e=this.manage_designation_url,t={designation_name:this.designation_name,department_id:this.selected_department.department_id,department_name:this.selected_department.department_name},i={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,t,i).subscribe(r=>{console.log(r),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1,this.apiService.set_redirect_card("Marketing Calender"),this.router.navigate(["/view-users-details"])},1e3)},r=>{console.log("Post request failed",r)}),this.get_designation_api()}get_designation_data=[];get_designation_api(){this.http.get(this.manage_designation_url).subscribe(e=>{this.get_designation_data=e.filter(t=>t.department_id==this.selected_department.department_id)},e=>{console.error("Error fetching items",e)})}user_img_selectedFile=null;onFileSelected(e){let t=e.target;t.files&&(this.user_img_selectedFile=t.files[0])}user_pdf_selectedFile=null;onFileSelected_pdf(e){let t=e.target;t.files&&(this.user_pdf_selectedFile=t.files[0])}selected_designation;successmgs=!1;User_first_name="";User_Last_name="";User_gender="";User_ID_Card_no="";User_email_id="";User_password="";User_mobile_no="";User_Department="";User_Department_id=0;User_Designation="";User_Designation_id=0;User_dob=null;User_is_active=null;create_user(){let e=this.create_user_api_url,t=new FormData;t.append("User_first_name",this.User_first_name),t.append("User_Last_name",this.User_Last_name),t.append("User_gender",this.User_gender),t.append("User_ID_Card_no",this.User_ID_Card_no),t.append("User_email_id",this.User_email_id),t.append("User_password",this.User_password),t.append("User_mobile_no",this.User_mobile_no),t.append("User_Department",this.selected_department.department_name),t.append("User_Department_id",this.selected_department.department_id),t.append("User_Designation",this.selected_designation.designation_name),t.append("User_Designation_id",this.selected_designation.designation_id),t.append("User_dob",this.User_dob?.toString()||""),t.append("User_is_active",this.User_is_active?"true":"false"),this.user_img_selectedFile&&t.append("user_profile_img",this.user_img_selectedFile),this.user_pdf_selectedFile&&t.append("User_r_and_r",this.user_pdf_selectedFile),this.http.post(e,t).subscribe(i=>{console.log(i),this.send_email(),this.successmgs=!0,setTimeout(()=>{this.successmgs=!1},2e3),this.router.navigate(["/view-users"])},i=>{console.log("Post request failed",i)})}send_email(){let e=this.email_sender_api_url,i=`
      <h1>Welcome to AGASTHYA DEVELOPER PRIVATE LIMITED</h1>
      <p>Dear User,</p>
      <p>Here are your account details:</p>
      <ul>
        <li><strong>User Email:</strong> {{username}}</li>
        <li><strong>Password:</strong> {{password}}</li>
      </ul>
      <p>Thank you for using AMS!</p>
    `.replace("{{username}}",this.User_email_id).replace("{{password}}",this.User_password),r={to:this.User_email_id,subject:"AMS Account Details",body:i},a={headers:new ti({"Content-Type":"application/json"})};this.http.post(e,r,a).subscribe(s=>{console.log(s)},s=>{console.log("Post request failed",s)})}clancel_btn(){this.router.navigate(["/view-users-details"])}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi),Vt(sn))};static \u0275cmp=Be({type:n,selectors:[["app-add-users"]],decls:6,vars:7,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],["class","alert-card fade-in",4,"ngIf"],["class","container mt-5 mb-3",4,"ngIf"],[1,"alert-card","fade-in"],[1,"alert-content"],[1,"close-btn",3,"click"],[1,"container","mt-5","mb-3"],[1,"card","mt-5","shadow"],[1,"heading-card"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-6"],["required","","type","text","placeholder","Enter First Name",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","text","placeholder","Enter Last Name",1,"custom-input",3,"ngModelChange","ngModel"],[1,"custom-input",3,"ngModelChange","ngModel"],["value","Male"],["value","Female"],["value","Others"],["required","","type","text","placeholder","Enter ID No",1,"custom-input",3,"ngModelChange","ngModel"],["required","","placeholder","Enter Email ID","type","email",1,"custom-input",3,"ngModelChange","ngModel"],["required","","placeholder","Enter Password","type","password",1,"custom-input",3,"ngModelChange","ngModel"],["required","","placeholder","Mobile Number","type","text",1,"custom-input",3,"ngModelChange","ngModel"],["required","","type","date",1,"custom-input",3,"ngModelChange","ngModel"],[1,"custom-input",3,"change","ngModelChange","ngModel"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],["value","","disabled","",4,"ngIf"],["name","","id","",1,"custom-input",3,"ngModelChange","ngModel"],["disabled",""],["value","true"],["value","false"],["for",""],["required","","id","img-upload","type","file",1,"custom-input",3,"change"],[1,"submit-btn",3,"click"],["type","reset",1,"submit-btn",3,"click"],[3,"ngValue"],["value","","disabled",""],["required","","type","text","placeholder","Enter Department Name",1,"custom-input",3,"ngModelChange","ngModel"],["aria-readonly","true","value",""]],template:function(t,i){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",1),c(2,"div",2),rt(3,FY,7,0,"div",3)(4,zY,91,14,"div",4)(5,WY,36,4,"div",4),d()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(5,NY,!i.isSidebarOpen)),_(),D("ngIf",i.successmgs),_(),D("ngIf",i.task_name=="Create User"),_(),D("ngIf",i.task_name=="Manage Department"))},dependencies:[Ke,Hi,mi,xn,bn,ln,cn,Ki,gs,Gi,ei,ii],styles:[".custom-file-upload[_ngcontent-%COMP%]{position:relative;display:inline-block;margin-top:0%}.custom-file-upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background-color:#347536;color:#fff;padding:10px 20px;border-radius:5px;cursor:pointer;transition:background-color .3s ease;font-size:14px}.custom-file-upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{background-color:#45a049}.custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.file-name[_ngcontent-%COMP%]{margin-left:10px;font-size:14px;font-style:italic;color:#555;display:inline-block;vertical-align:middle;max-width:300px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})};var jY=n=>({"full-width":n}),M1=class n{isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Be({type:n,selectors:[["app-view-hr-details"]],decls:7,vars:4,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"mt-5"],["routerLink","/view-users-details",1,"submit-btn",2,"width","100%"]],template:function(t,i){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3)(4,"div",3)(5,"button",4),h(6,"View Users"),d()()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(2,jY,!i.isSidebarOpen)))},dependencies:[Ke,on,ei,ii]})};var GY=n=>({"full-width":n}),qY=()=>["/add-users","Create User"],XY=()=>["/add-users","Manage Department"],YY=(n,e)=>({"active-user":n,"inactive-user":e});function $Y(n,e){if(n&1&&(c(0,"tr")(1,"td")(2,"div",11),Lt(3,"img",12),c(4,"div",13)(5,"p",14),h(6),d()()()(),c(7,"td")(8,"p",15),h(9),d()(),c(10,"td")(11,"p",15),h(12),d()(),c(13,"td"),h(14),Et(15,"date"),d(),c(16,"td",16),h(17),d(),c(18,"td"),Lt(19,"i",17),d()()),n&2){let t=e.$implicit;_(3),D("src",t.user_profile_img,cl),_(3),A(t.User_first_name),_(3),A(t.User_Department),_(3),A(t.User_Designation),_(2),de(" ",t.User_dob?At(15,7,t.User_dob,"dd-MM-yyy"):"N/A"," "),_(2),D("ngClass",ms(10,YY,t.User_is_active,!t.User_is_active)),_(),de(" ",t.User_is_active?"Active":"Inactive"," ")}}var E1=class n{constructor(e,t,i){this.route=e;this.apiService=t;this.http=i}isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}ngOnInit(){this.get_user_api()}get_user_data=[];get_user_api(){this.http.get(this.apiService.user_management_api()).subscribe(e=>{this.get_user_data=e},e=>{console.error("Error fetching items",e)})}static \u0275fac=function(t){return new(t||n)(Vt(Mi),Vt(_i),Vt(yi))};static \u0275cmp=Be({type:n,selectors:[["app-view-user-details"]],decls:27,vars:9,consts:[[3,"toggleSidebarEvent"],[3,"isOpen"],[1,"content",3,"ngClass"],[1,"container","mt-5"],[1,"mt-5"],[1,"submit-btn",2,"width","150px","margin-left","5px",3,"routerLink"],[1,"submit-btn",2,"width","250px",3,"routerLink"],[1,"mt-5","table-responsive"],[1,"table","align-middle","mb-0","bg-white"],[1,"bg-light"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],["alt","",1,"rounded-circle",2,"width","45px","height","45px",3,"src"],[1,"ms-3"],[1,"fw-bold","mb-1"],[1,"fw-normal","mb-1"],[3,"ngClass"],[1,"far","fa-edit"]],template:function(t,i){t&1&&(c(0,"app-header",0),lt("toggleSidebarEvent",function(){return i.toggleSidebar()}),d(),Lt(1,"app-sidebar",1),c(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),h(6,"Add Users"),d(),c(7,"button",6),h(8,"Manage Department"),d()(),c(9,"div",7)(10,"table",8)(11,"thead",9)(12,"tr")(13,"th"),h(14,"Name"),d(),c(15,"th"),h(16,"Department"),d(),c(17,"th"),h(18,"Designation"),d(),c(19,"th"),h(20,"DOB"),d(),c(21,"th"),h(22,"Status"),d(),c(23,"th"),h(24,"Actions"),d()()(),c(25,"tbody"),rt(26,$Y,20,13,"tr",10),d()()()()()),t&2&&(_(),D("isOpen",i.isSidebarOpen),_(),D("ngClass",te(5,GY,!i.isSidebarOpen)),_(3),D("routerLink",fc(7,qY)),_(2),D("routerLink",fc(8,XY)),_(19),D("ngForOf",i.get_user_data))},dependencies:[Ke,Hi,on,ei,ii,Vr],styles:[".active-user[_ngcontent-%COMP%]{color:green;font-weight:700}.inactive-user[_ngcontent-%COMP%]{color:red;font-weight:700}"]})};var KY=[{path:"",component:i0},{path:"login",component:n0},{path:"dashboard",component:J0},{path:"add-task/:taskName/:projectid",component:wu},{path:"new-goal/:projectid",component:wg},{path:"Update-actual/:updateactual/:id",component:yg},{path:"Actual-task/:projectid",component:Sg},{path:"marketing-status/:projectid",component:fg},{path:"view-goals/:projectid",component:xg},{path:"project-marketing",component:vg},{path:"marketing-add-goals",component:wu},{path:"marketing-goals",component:wu},{path:"marketing-meeting",component:Pg},{path:"marketing-meeting-table/:projectid",component:Lg},{path:"add-meeting",component:Rg},{path:"Sales-projects",component:Eg},{path:"Sales-status/:salesprojectid",component:Cg},{path:"view-sales-details/:salesprojectid",component:Ig},{path:"Add-sales-details/:salescardname/:sales_id",component:kg},{path:"Sales-Report",component:w1},{path:"create-users",component:Ag},{path:"view-users",component:Tg},{path:"access-denied",component:x1},{path:"project-accounds",component:S1},{path:"view-sales-accounts/:projectid",component:b1},{path:"add-sales-accounts/:salescardname/:sales_id",component:y1},{path:"add-users/:TaskName",component:C1},{path:"hr-dashboard",component:M1},{path:"view-users-details",component:E1}],A1=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Rn({type:n});static \u0275inj=Ln({imports:[dv.forRoot(KY),dv]})};var Gu=class n{title="ui";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Be({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){t&1&&Lt(0,"router-outlet")},dependencies:[pw]})};var ZY="@",JY=(()=>{let e=class e{constructor(i,r,a,s,o){this.doc=i,this.delegate=r,this.zone=a,this.animationType=s,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=hc(QS,{optional:!0}),this.loadingSchedulerFn=hc(QY,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let i=()=>this.moduleImpl??import("./chunk-HUYV6ZVC.mjs").then(a=>a),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(i):r=i(),r.catch(a=>{throw new Md(5300,!1)}).then(({\u0275createEngine:a,\u0275AnimationRendererFactory:s})=>{this._engine=a(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(i,r){let a=this.delegate.createRenderer(i,r);if(a.\u0275type===0)return a;typeof a.throwOnSyntheticProps=="boolean"&&(a.throwOnSyntheticProps=!1);let s=new rS(a);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let l=o.createRenderer(i,r);s.use(l),this.scheduler?.notify(10)}).catch(o=>{s.use(a)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){JS()},e.\u0275prov=Kn({token:e,factory:e.\u0275fac});let n=e;return n})(),rS=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(ZY)}},QY=new hs("");function KT(n="animations"){return ew("NgAsyncAnimations"),XS([{provide:tw,useFactory:(e,t,i)=>new JY(e,t,i,n),deps:[Td,cw,mo]},{provide:ov,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var T1=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Rn({type:n,bootstrap:[Gu]});static \u0275inj=Ln({providers:[uw(),KT(),sw(ow())],imports:[dw,A1,Ow,Nw,lC,zA,lw]})};var aS=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Rn({type:n,bootstrap:[Gu]});static \u0275inj=Ln({imports:[T1,hw]})};export{aS as a};
